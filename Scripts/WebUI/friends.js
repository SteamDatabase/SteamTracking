/*! This file includes third-party software, governed by the licenses described here: https://steamcommunity.com/public/javascript/webui/friends.licenses.txt */

/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
!(function(c) {
  function e(e) {
    for (
      var t, n, o = e[0], i = e[1], r = e[2], a = 0, s = [];
      a < o.length;
      a++
    )
      (n = o[a]), p[n] && s.push(p[n][0]), (p[n] = 0);
    for (t in i) Object.prototype.hasOwnProperty.call(i, t) && (c[t] = i[t]);
    for (m && m(e); s.length; ) s.shift()();
    return u.push.apply(u, r || []), l();
  }
  function l() {
    for (var e, t = 0; t < u.length; t++) {
      for (var n = u[t], o = !0, i = 1; i < n.length; i++) {
        var r = n[i];
        0 !== p[r] && (o = !1);
      }
      o && (u.splice(t--, 1), (e = a((a.s = n[0]))));
    }
    return e;
  }
  var n = {},
    p = { 1: 0 },
    u = [];
  function a(e) {
    if (n[e]) return n[e].exports;
    var t = (n[e] = { i: e, l: !1, exports: {} });
    return c[e].call(t.exports, t, t.exports, a), (t.l = !0), t.exports;
  }
  (a.m = c),
    (a.c = n),
    (a.d = function(e, t, n) {
      a.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: n });
    }),
    (a.r = function(e) {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(e, "__esModule", { value: !0 });
    }),
    (a.t = function(t, e) {
      if ((1 & e && (t = a(t)), 8 & e)) return t;
      if (4 & e && "object" == typeof t && t && t.__esModule) return t;
      var n = Object.create(null);
      if (
        (a.r(n),
        Object.defineProperty(n, "default", { enumerable: !0, value: t }),
        2 & e && "string" != typeof t)
      )
        for (var o in t)
          a.d(
            n,
            o,
            function(e) {
              return t[e];
            }.bind(null, o)
          );
      return n;
    }),
    (a.n = function(e) {
      var t =
        e && e.__esModule
          ? function() {
              return e.default;
            }
          : function() {
              return e;
            };
      return a.d(t, "a", t), t;
    }),
    (a.o = function(e, t) {
      return Object.prototype.hasOwnProperty.call(e, t);
    }),
    (a.p = "");
  var t = (window.webpackJsonp = window.webpackJsonp || []),
    o = t.push.bind(t);
  (t.push = e), (t = t.slice());
  for (var i = 0; i < t.length; i++) e(t[i]);
  var m = o;
  u.push(["gfbn", 6, 0, 7]), l();
})({
  "/IDK": function(e, t, n) {
    "use strict";
    n.d(t, "c", function() {
      return i;
    }),
      n.d(t, "e", function() {
        return r;
      }),
      n.d(t, "d", function() {
        return a;
      }),
      n.d(t, "a", function() {
        return s;
      }),
      n.d(t, "m", function() {
        return c;
      }),
      n.d(t, "j", function() {
        return l;
      }),
      n.d(t, "h", function() {
        return p;
      }),
      n.d(t, "k", function() {
        return u;
      }),
      n.d(t, "i", function() {
        return m;
      }),
      n.d(t, "b", function() {
        return d;
      }),
      n.d(t, "l", function() {
        return h;
      }),
      n.d(t, "g", function() {
        return _;
      }),
      n.d(t, "f", function() {
        return f;
      });
    var o = n("UqDm");
    function i(e) {
      if (!(e.clientX || e.clientY || e.screenX || e.screenY)) return !0;
      if (e.relatedTarget) return !r(e.currentTarget, e.relatedTarget);
      var t = e.currentTarget.getBoundingClientRect();
      return (
        (e.clientX <= t.left ||
          e.clientX >= t.right ||
          e.clientY <= t.top ||
          e.clientY >= t.bottom) &&
        (console.log(
          e.clientX +
            " <= " +
            t.left +
            " || " +
            e.clientX +
            " >= " +
            t.right +
            " ||\n\t\t\t\t" +
            e.clientY +
            " <= " +
            t.top +
            " || " +
            e.clientY +
            " >= " +
            t.bottom
        ),
        !0)
      );
    }
    function r(e, t) {
      for (; t; ) {
        if (
          (t.parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE &&
            (t = t.parentNode.host),
          t == e)
        )
          return !0;
        t = t.parentElement;
      }
      return !1;
    }
    function a(e, t) {
      for (; t; ) if ((t = t.parentElement) == e) return !0;
      return !1;
    }
    function s(e) {
      if (!window.getSelection) return !1;
      for (var t = window.getSelection(), n = 0, o = 0; o < t.rangeCount; o++) {
        var i = t.getRangeAt(o);
        if (i.startOffset != i.endOffset)
          r(e, i.commonAncestorContainer) && n++;
      }
      return 0 < t.rangeCount && t.rangeCount == n;
    }
    function c(e, t) {
      var n = e.offsetTop;
      e.offsetParent != t && (n -= t.offsetTop),
        n < t.scrollTop
          ? e.scrollIntoView(!0)
          : n + e.offsetHeight > t.scrollTop + t.offsetHeight &&
            e.scrollIntoView(!1);
    }
    function l(e, t, n) {
      var o = 0,
        i = 0;
      return (
        t < e.left ? (o = e.left - t) : t > e.right && (o = t - e.right),
        n < e.top ? (i = e.top - n) : n > e.bottom && (i = n - e.bottom),
        Math.sqrt(o * o + i * i)
      );
    }
    function p(e, t) {
      return {
        width: t.width,
        height: t.height,
        top: e.screenTop + t.top,
        bottom: e.screenTop + t.bottom,
        left: e.screenLeft + t.left,
        right: e.screenLeft + t.right
      };
    }
    function u(e) {
      var t = void 0;
      return e && (t = e.ownerDocument.defaultView), t;
    }
    function m(e) {
      var t = "steam://openurl/";
      e.startsWith(t) && (e = e.slice(t.length)),
        (function(e) {
          var t = document.createElement("textarea");
          (t.textContent = e),
            (t.style.position = "fixed"),
            document.body.appendChild(t),
            t.select();
          try {
            document.execCommand("copy");
          } catch (e) {
            console.warn("Copy to clipboard failed.", e);
          } finally {
            document.body.removeChild(t);
          }
        })(e);
    }
    function d(e) {
      var t = e.ownerDocument;
      return (
        t.fullscreen ||
        t.webkitIsFullScreen ||
        t.mozFullScreen ||
        t.msFullscreenElement
      );
    }
    function h(e) {
      var t = e;
      t.requestFullscreen
        ? t.requestFullscreen()
        : t.webkitRequestFullScreen
          ? t.webkitRequestFullScreen()
          : t.mozRequestFullScreen
            ? t.mozRequestFullScreen()
            : t.msRequestFullscreen && t.msRequestFullscreen();
    }
    function _(e) {
      var t = e.ownerDocument;
      t.cancelFullscreen
        ? t.cancelFullscreen()
        : t.webkitCancelFullScreen
          ? t.webkitCancelFullScreen()
          : t.mozCancelFullScreen
            ? t.mozCancelFullScreen()
            : t.msExitFullscreen && t.msExitFullscreen();
    }
    var f = (function() {
      function e(e) {
        var r = this;
        (this.m_bNeedSort = !1),
          (this.m_bOffsetsInvalidated = !1),
          (this.m_rgChildren = []),
          (this.RecomputeVisibility = function() {
            var e = r.m_elParent.scrollTop - r.m_nBufferPx,
              t =
                r.m_elParent.scrollTop +
                r.m_elParent.clientHeight +
                r.m_nBufferPx;
            r.EnsureSort();
            for (var n = 0, o = r.m_rgChildren; n < o.length; n++) {
              var i = o[n];
              if (!(i.yOffset < e)) {
                if (i.yOffset > t) break;
                i.fnCallback(!0);
              }
            }
            (r.m_nLastYMin = e), (r.m_nLastYMax = t);
          }),
          (this.m_nBufferPx = e);
      }
      return (
        (e.prototype.SetParent = function(e) {
          this.m_elParent &&
            this.m_elParent.ownerDocument.defaultView.removeEventListener(
              "resize",
              this.RecomputeVisibility
            ),
            (this.m_elParent = e),
            this.m_elParent &&
              this.m_elParent.ownerDocument.defaultView.addEventListener(
                "resize",
                this.RecomputeVisibility
              );
        }),
        (e.prototype.InvalidateOffsetsAndRecompute = function() {
          (this.m_bOffsetsInvalidated = !0), this.RecomputeVisibility();
        }),
        (e.prototype.EnsureSort = function() {
          if (this.m_bOffsetsInvalidated) {
            for (var e = 0; e < this.m_rgChildren.length; e++)
              this.m_rgChildren[e].yOffset = this.m_rgChildren[
                e
              ].element.offsetTop;
            this.m_bOffsetsInvalidated = !1;
          }
          this.m_bNeedSort &&
            (this.m_rgChildren.sort(function(e, t) {
              return e.yOffset - t.yOffset;
            }),
            (this.m_bNeedSort = !1));
        }),
        (e.prototype.RegisterChild = function(e, t) {
          this.m_rgChildren.push({
            element: e,
            yOffset: e.offsetTop,
            fnCallback: t
          }),
            (this.m_bNeedSort = !0),
            void 0 !== this.m_nLastYMin &&
              void 0 !== this.m_nLastYMax &&
              e.offsetTop >= this.m_nLastYMin &&
              e.offsetTop <= this.m_nLastYMax &&
              t(!0);
        }),
        (e.prototype.UnregisterChild = function(t) {
          o.d(this.m_rgChildren, function(e) {
            return e.element == t;
          });
        }),
        e
      );
    })();
  },
  "0N1H": function(e, t, n) {
    "use strict";
    n.d(t, "k", function() {
      return o;
    }),
      n.d(t, "l", function() {
        return i;
      }),
      n.d(t, "d", function() {
        return r;
      }),
      n.d(t, "e", function() {
        return a;
      }),
      n.d(t, "j", function() {
        return s;
      }),
      n.d(t, "f", function() {
        return c;
      }),
      n.d(t, "g", function() {
        return l;
      }),
      n.d(t, "i", function() {
        return p;
      }),
      n.d(t, "h", function() {
        return u;
      }),
      n.d(t, "a", function() {
        return m;
      }),
      n.d(t, "c", function() {
        return d;
      }),
      n.d(t, "b", function() {
        return h;
      });
    var o = 1,
      i = 4,
      r = 750,
      a = 799,
      s = 7,
      c = 250820,
      l = 330050,
      p = 358510,
      u = 366490,
      m = "18446744073709551615",
      d = 0,
      h = 2147483647;
  },
  "1VtQ": function(e, t, n) {
    "use strict";
    function o(e, t, n) {
      return {
        get: function() {
          var e = n.value.bind(this);
          return (
            this.hasOwnProperty(t) ||
              Object.defineProperty(this, t, { value: e }),
            e
          );
        }
      };
    }
    function i(e, t, n) {
      return [e, t, n];
    }
    n.d(t, "a", function() {
      return o;
    }),
      n.d(t, "b", function() {
        return i;
      });
  },
  "1n9R": function(e, t, n) {
    "use strict";
    n.d(t, "a", function() {
      return o;
    }),
      n.d(t, "d", function() {
        return i;
      }),
      n.d(t, "c", function() {
        return a;
      }),
      n.d(t, "b", function() {
        return s;
      });
    var o = {
        EUNIVERSE: 0,
        WEB_UNIVERSE: "",
        LANGUAGE: "english",
        COUNTRY: "",
        CDN_URL: "",
        MEDIA_CDN_COMMUNITY_URL: "",
        MEDIA_CDN_URL: "",
        COMMUNITY_CDN_URL: "",
        COMMUNITY_CDN_ASSET_URL: "",
        PUBLIC_SHARED_URL: "",
        COMMUNITY_BASE_URL: "",
        CHAT_BASE_URL: "",
        STORE_BASE_URL: "",
        STORE_ICON_BASE_URL: "",
        IN_CLIENT: !1,
        USE_POPUPS: !1,
        IN_MOBILE: !1,
        WEBAPI_BASE_URL: "",
        TOKEN_URL: "",
        SESSIONID: "",
        BUILD_TIMESTAMP: 0,
        FRIENDSUI_BETA: !1,
        STEAM_TV: !1
      },
      i = {
        logged_in: !1,
        steamid: "",
        accountid: 0,
        account_name: "",
        token: void 0,
        token_use_id: void 0
      },
      r = "webui_config";
    function a() {
      var e = s("config");
      e && Object.assign(o, e);
      var t = s("userinfo");
      t && Object.assign(i, t), (window.__webpack_public_path__ = o.CDN_URL);
    }
    function s(e, t) {
      void 0 === t && (t = r);
      var n = document.getElementById(t);
      if (n)
        try {
          return JSON.parse(n.getAttribute("data-" + e) || "");
        } catch (e) {
          console.error("Failed to parse config", e);
        }
      else console.error("Missing config element #" + t);
    }
  },
  "8o0Y": function(e, t, n) {
    "use strict";
    n.d(t, "b", function() {
      return c;
    }),
      n.d(t, "a", function() {
        return p;
      });
    var o = n("mrSG"),
      i = n("q1tI"),
      r = n("/IDK"),
      a = n("EGkk"),
      l = n("G+3Z"),
      s = n("2vnA"),
      c = (function() {
        function e() {}
        return (
          (e.GetBrowserInfoForPopup = function(e) {
            return null;
          }),
          (e.prototype.SetTakeFocus = function(e) {
            this.m_fnTakeFocus = e;
          }),
          e
        );
      })();
    function p(e, t, n) {
      var o,
        i = void 0,
        r = void 0,
        a = t;
      if (a.preventDefault && a.stopPropagation) {
        if (a.shiftKey) return null;
        a.preventDefault(),
          a.stopPropagation(),
          (o = a.currentTarget),
          (i = a.clientX),
          (r = a.clientY);
      } else o = t;
      var s = new m(e, o, i, r, n);
      return s.Show(), s;
    }
    var u = (function(n) {
        function e(e) {
          var t = n.call(this) || this;
          return (
            (t.m_bVisible = !1),
            (t.m_elSubmenuItem = null),
            (t.m_timerHideSubMenu = 0),
            (t.m_ownerWindow = e),
            t
          );
        }
        return (
          o.d(e, n),
          (e.prototype.Init = function(e, t) {
            (e.options.bForcePopup || this.m_ownerWindow.innerWidth) < 400 &&
            this.m_ownerWindow.SteamClient &&
            this.m_ownerWindow.SteamClient.Window
              ? (this.m_popupContextMenu = new a.a(
                  e,
                  t,
                  c.GetBrowserInfoForPopup(this.m_ownerWindow)
                ))
              : ((this.m_embeddedElementInstance = Object(l.b)(
                  this.m_ownerWindow.document
                )),
                (this.m_rctElement = i.createElement(a.g, e, t)));
          }),
          (e.prototype.SetOnHideCallback = function(e) {
            this.m_fnOnHideCallback = e;
          }),
          (e.prototype.Show = function() {
            this.m_rctElement
              ? this.m_embeddedElementInstance.Show(this.m_rctElement)
              : this.m_popupContextMenu.Show(),
              (this.m_bVisible = !0);
          }),
          (e.prototype.Hide = function() {
            this.InternalHide();
          }),
          (e.prototype.HideIfNotInFocus = function() {
            this.BHasFocus() || this.BIsFocusInChildHierarchy() || this.Hide();
          }),
          (e.prototype.InternalHide = function() {
            this.m_bVisible &&
              ((this.m_bVisible = !1),
              this.InternalHideSubMenu(),
              this.m_fnOnHideCallback && this.m_fnOnHideCallback(),
              this.m_embeddedElementInstance
                ? this.m_embeddedElementInstance.Hide(300)
                : this.m_popupContextMenu.Close());
          }),
          Object.defineProperty(e.prototype, "visible", {
            get: function() {
              return this.m_bVisible;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "options", {
            get: function() {
              return this.m_options;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "owner_window", {
            get: function() {
              return this.m_ownerWindow;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ShowSubMenu = function(e, t) {
            return this.m_elSubmenuItem == e
              ? (this.CancelHideSubMenuTimer(),
                this.m_submenu.TakeFocus(),
                null)
              : (this.InternalHideSubMenu(),
                (this.m_elSubmenuItem = e),
                (this.m_submenu = new d(this, t(), e)),
                this.m_submenu.Show(),
                this.m_submenu);
          }),
          (e.prototype.CancelHideSubMenuTimer = function() {
            0 < this.m_timerHideSubMenu &&
              (clearTimeout(this.m_timerHideSubMenu),
              (this.m_timerHideSubMenu = 0));
          }),
          (e.prototype.HideSubMenu = function() {
            var e = this;
            if (this.m_submenu) {
              if (!(0 < this.m_timerHideSubMenu)) {
                this.m_timerHideSubMenu = window.setTimeout(function() {
                  e.InternalHideSubMenu(), (e.m_timerHideSubMenu = 0);
                }, 500);
              }
            } else this.CancelHideSubMenuTimer();
          }),
          (e.prototype.InternalHideSubMenu = function() {
            this.CancelHideSubMenuTimer(),
              this.m_submenu &&
                (this.BIsFocusInChildHierarchy() && this.TakeFocus(),
                (this.m_elSubmenuItem = null),
                this.m_submenu.InternalHide(),
                (this.m_submenu = null));
          }),
          (e.prototype.TakeFocus = function() {
            this.m_popupContextMenu && this.m_popupContextMenu.Focus(),
              this.m_fnTakeFocus && this.m_fnTakeFocus();
          }),
          (e.prototype.BInternalElementInParentHierarchy = function(e) {
            return (
              this.m_parentInstance &&
              (this.m_parentInstance.BIsChildElement(e) ||
                this.m_parentInstance.BInternalElementInParentHierarchy(e))
            );
          }),
          (e.prototype.BInternalElementInChildHierarchy = function(e) {
            return (
              this.m_submenu &&
              (this.m_submenu.BIsChildElement(e) ||
                this.m_submenu.BInternalElementInChildHierarchy(e))
            );
          }),
          (e.prototype.BIsChildElement = function(e) {
            return this.m_embeddedElementInstance
              ? this.m_embeddedElementInstance.BIsChildElement(e)
              : r.e(this.m_popupContextMenu.root_element, e);
          }),
          (e.prototype.BHasFocus = function() {
            return this.m_embeddedElementInstance
              ? this.m_embeddedElementInstance.BIsChildElement(
                  this.m_ownerWindow.document.activeElement
                )
              : this.m_popupContextMenu.focused;
          }),
          (e.prototype.BIsFocusInChildHierarchy = function() {
            return (
              this.m_submenu &&
              (this.m_submenu.BHasFocus() ||
                this.m_submenu.BIsFocusInChildHierarchy())
            );
          }),
          (e.prototype.BIsElementInMenuHierarchy = function(e) {
            return (
              this.BInternalElementInParentHierarchy(e) ||
              this.BInternalElementInChildHierarchy(e)
            );
          }),
          (e.prototype.BIsSubMenuVisible = function() {
            return !!this.m_submenu;
          }),
          o.c([s.observable], e.prototype, "m_bVisible", void 0),
          e
        );
      })(c),
      m = (function(s) {
        function c(e, t, n, o, i) {
          var r = s.call(this, t.ownerDocument.defaultView) || this;
          c.sm_iActiveContextMenuInstance &&
            c.sm_iActiveContextMenuInstance.Hide(),
            ((c.sm_iActiveContextMenuInstance = r).m_options = i || {});
          var a = {
            element: t,
            clientX: n,
            clientY: o,
            instance: r,
            options: r.m_options,
            fnOnMenuItemSelected: function() {
              r.Hide();
            }
          };
          return r.Init(a, e), r;
        }
        return (
          o.d(c, s),
          (c.prototype.Show = function() {
            c.sm_mapEmbeddedMouseOverlays.ShowElement(
              this.m_ownerWindow.document,
              i.createElement(a.f),
              this
            ),
              s.prototype.Show.call(this);
          }),
          (c.prototype.Hide = function() {
            c.sm_mapEmbeddedMouseOverlays.HideElement(
              this.m_ownerWindow.document,
              this
            ),
              s.prototype.Hide.call(this);
          }),
          (c.sm_mapEmbeddedMouseOverlays = new l.a("ContextMenuMouseOverlay")),
          c
        );
      })(u),
      d = (function(r) {
        function e(e, t, n) {
          var o = r.call(this, n.ownerDocument.defaultView) || this;
          (o.m_parentInstance = e),
            (o.m_options = {
              bOverlapVertical: !0,
              bUseWebStyles: e.options.bUseWebStyles
            });
          var i = {
            element: n,
            clientX: null,
            clientY: null,
            instance: o,
            options: o.m_options,
            fnOnMenuItemSelected: function() {
              o.Hide();
            },
            bSubmenu: !0
          };
          return o.Init(i, t), o;
        }
        return (
          o.d(e, r),
          (e.prototype.Hide = function() {
            var e = this;
            this.m_popupContextMenu
              ? window.setTimeout(function() {
                  e.m_parentInstance.HideIfNotInFocus();
                }, 10)
              : this.m_parentInstance.Hide();
          }),
          e
        );
      })(u);
  },
  EGkk: function(e, t, n) {
    "use strict";
    n.d(t, "c", function() {
      return u;
    }),
      n.d(t, "d", function() {
        return m;
      }),
      n.d(t, "b", function() {
        return d;
      }),
      n.d(t, "e", function() {
        return h;
      }),
      n.d(t, "g", function() {
        return _;
      }),
      n.d(t, "a", function() {
        return f;
      }),
      n.d(t, "f", function() {
        return g;
      }),
      n.d(t, "h", function() {
        return v;
      }),
      n.d(t, "i", function() {
        return S;
      });
    var a = n("mrSG"),
      o = n("okNM"),
      s = n("q1tI"),
      c = n("i8i4"),
      l = n("JtU4"),
      R = n("/IDK"),
      i = n("1VtQ"),
      r = n("e2SU"),
      p = n("WpBz"),
      u = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          a.d(t, e),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.children,
              n = e.className,
              o = a.f(e, ["children", "className"]),
              i =
                this.context.contextMenuInstance &&
                this.context.contextMenuInstance.options.bUseWebStyles
                  ? "popup_menu popup_body"
                  : "contextMenuContents";
            return (
              n && (i += " " + n),
              s.createElement("div", a.a({}, o, { className: i }), t)
            );
          }),
          (t.contextTypes = {
            contextMenuInstance: function() {
              return null;
            }
          }),
          t
        );
      })(s.PureComponent),
      m = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          a.d(t, e),
          (t.prototype.OnClick = function(e) {
            this.props.disabled ||
              (this.props.onClick && this.props.onClick(e),
              this.props.bInteractableItem ||
                (this.props.onSelected && this.props.onSelected(e),
                this.context.contextMenuInstance &&
                  this.context.contextMenuInstance.Hide()));
          }),
          (t.prototype.OnMouseEnter = function(e) {
            this.context.contextMenuInstance &&
              this.context.contextMenuInstance.HideSubMenu();
          }),
          (t.prototype.render = function() {
            var e = this.props,
              t = (e.onSelected,
              e.bInteractableItem,
              a.f(e, ["onSelected", "bInteractableItem"])),
              n = [
                this.context.contextMenuInstance &&
                this.context.contextMenuInstance.options.bUseWebStyles
                  ? "popup_menu_item"
                  : "contextMenuItem"
              ];
            return (
              this.props.className && n.push(this.props.className),
              this.props.disabled && n.push("disabled"),
              s.createElement(
                "div",
                a.a({ onMouseEnter: this.OnMouseEnter }, t, {
                  onClick: this.OnClick,
                  unselectable: this.props.unselectable,
                  className: n.join(" ")
                }),
                this.props.children
              )
            );
          }),
          (t.contextTypes = {
            contextMenuInstance: function() {
              return null;
            }
          }),
          a.c([i.a], t.prototype, "OnClick", null),
          a.c([i.a], t.prototype, "OnMouseEnter", null),
          t
        );
      })(s.PureComponent),
      d = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          a.d(t, e),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.bChecked,
              n = e.children,
              o = a.f(e, ["bChecked", "children"]);
            return s.createElement(
              m,
              a.a({}, o, { className: t && "menuChecked" }),
              s.createElement("div", { className: "contextMenuCheckMark" }),
              n
            );
          }),
          t
        );
      })(s.PureComponent),
      h = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bActive: !1 }), t;
        }
        return (
          a.d(e, n),
          (e.prototype.OnSubMenuMouseEnter = function() {
            this.context.contextMenuInstance.CancelHideSubMenuTimer();
          }),
          (e.prototype.RenderSubMenu = function() {
            return s.createElement(
              u,
              { onMouseEnter: this.OnSubMenuMouseEnter },
              this.props.children
            );
          }),
          (e.prototype.OnMouseEnter = function(e) {
            var t = this;
            if (this.context.contextMenuInstance) {
              var n = this.context.contextMenuInstance.ShowSubMenu(
                e.currentTarget,
                this.RenderSubMenu
              );
              n &&
                (this.setState({ bActive: !0 }),
                n.SetOnHideCallback(function() {
                  t.setState({ bActive: !1 });
                }));
            }
          }),
          (e.prototype.OnClick = function(e) {
            this.OnMouseEnter(e), this.props.onClick && this.props.onClick(e);
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.label,
              n = (e.children, e.className),
              o = a.f(e, ["label", "children", "className"]);
            return (
              this.state.bActive && (n = (n || "") + " active"),
              s.createElement(
                m,
                a.a({}, o, {
                  onClick: this.OnClick,
                  className: n,
                  onMouseEnter: this.OnMouseEnter,
                  onSelected: null,
                  bInteractableItem: !0
                }),
                t,
                " ",
                s.createElement(r.l, null)
              )
            );
          }),
          (e.contextTypes = {
            contextMenuInstance: function() {
              return null;
            }
          }),
          a.c([i.a], e.prototype, "OnSubMenuMouseEnter", null),
          a.c([i.a], e.prototype, "RenderSubMenu", null),
          a.c([i.a], e.prototype, "OnMouseEnter", null),
          a.c([i.a], e.prototype, "OnClick", null),
          e
        );
      })(s.PureComponent),
      _ = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_elMenu = void 0),
            (t.m_cReenteranceGuard = 1),
            (t.state = {
              ready: !1,
              menuLeft: void 0,
              menuTop: void 0,
              menuRight: void 0,
              menuBottom: void 0,
              menuWidth: void 0,
              menuHeight: void 0
            }),
            (t.m_mutationObserver = new MutationObserver(t.OnMenuMutation)),
            t
          );
        }
        return (
          a.d(e, n),
          (e.prototype.BindMenuElement = function(e) {
            var t = this;
            this.m_elMenu &&
              (this.m_mutationObserver.disconnect(),
              this.props.popup ||
                this.m_elMenu.ownerDocument.defaultView.removeEventListener(
                  "resize",
                  this.OnWindowResize
                )),
              e &&
                (this.m_mutationObserver.observe(e, {
                  childList: !0,
                  subtree: !0
                }),
                this.props.popup ||
                  e.ownerDocument.defaultView.addEventListener(
                    "resize",
                    this.OnWindowResize
                  )),
              (this.m_elMenu = e || void 0),
              this.PositionMenu(),
              this.state.ready ||
                (this.props.instance.SetTakeFocus(this.TakeFocus.bind(this)),
                this.setState({ ready: !0 }, function() {
                  t.TakeFocus();
                }));
          }),
          (e.prototype.OnMenuMutation = function(e, t) {
            this.PositionMenu();
          }),
          (e.prototype.OnWindowResize = function() {
            this.PositionMenu();
          }),
          (e.prototype.OnBlur = function(e) {
            (e.relatedTarget && R.e(e.currentTarget, e.relatedTarget)) ||
              (e.relatedTarget &&
                this.props.instance.BIsElementInMenuHierarchy(
                  e.relatedTarget
                )) ||
              this.props.instance.BIsSubMenuVisible() ||
              (this.state.ready &&
                this.props.instance.visible &&
                this.props.instance.Hide());
          }),
          (e.prototype.OnKeyDown = function(e) {
            27 == e.keyCode &&
              this.state.ready &&
              (this.props.instance.Hide(),
              e.preventDefault(),
              e.stopPropagation());
          }),
          (e.prototype.getChildContext = function() {
            return { contextMenuInstance: this.props.instance };
          }),
          (e.prototype.componentDidUpdate = function() {
            0 < this.m_cReenteranceGuard--
              ? this.PositionMenu()
              : (this.m_cReenteranceGuard = 2);
          }),
          (e.prototype.TakeFocus = function() {
            if (
              this.m_elMenu &&
              this.state.ready &&
              this.props.instance.visible &&
              (this.props.popup ||
                !R.e(this.m_elMenu, this.m_elMenu.ownerDocument.activeElement))
            ) {
              var e = this.m_elMenu.querySelector(".ContextMenuAutoFocus");
              e && e.focus ? e.focus() : this.m_elMenu.focus();
            }
          }),
          (e.prototype.PositionMenu = function() {
            var e = this.m_elMenu,
              t = this.props.element;
            if (e && t) {
              var n = t.ownerDocument.defaultView;
              e.ownerDocument.defaultView.CtxUpdate = this.PositionMenu.bind(
                this
              );
              var o = t.getBoundingClientRect(),
                i = e.getBoundingClientRect(),
                r = null != this.props.popup,
                a = this.props.options,
                s = {
                  menuLeft: void 0,
                  menuRight: void 0,
                  menuTop: void 0,
                  menuBottom: void 0,
                  menuWidth: void 0,
                  menuHeight: void 0
                },
                c = this.props.clientX,
                l = this.props.clientY,
                p = n.innerWidth,
                u = n.innerHeight;
              if (r) {
                (c += n.screenLeft), (l += n.screenTop), (o = R.h(n, o));
                var m = n.screen,
                  d = 0,
                  h = 0;
                m.availLeft && (d = m.availLeft),
                  m.availTop && (h = m.availTop),
                  (p = d + m.availWidth),
                  (u = h + m.availHeight);
              }
              (a.bOverlapHorizontal || a.bOverlapVertical) && (c = l = void 0);
              var _ = c || o.left,
                f = c || o.right,
                g = i.width;
              a.bMatchWidth && ((g = f - _), (s.menuWidth = g));
              var b = (a.bOverlapHorizontal ? f : _) - g,
                v = 0 < b,
                S = p - (a.bOverlapHorizontal ? _ : f) - g,
                y = 0 < S,
                C = (a.bPreferPopLeft || !y) && v;
              v ||
                y ||
                ((C = y < v),
                a.bFitToWindow && ((g += (C ? b : S) - 8), (s.menuWidth = g))),
                (!a.bPreferPopLeft && y) || !v
                  ? (s.menuLeft = a.bOverlapHorizontal ? _ : f)
                  : (s.menuRight = p - (a.bOverlapHorizontal ? f : _));
              var I = l || o.top,
                O = l || o.bottom,
                E = i.height;
              a.bMatchHeight && ((E = O - I), (s.menuHeight = E));
              var w = (a.bOverlapVertical ? O : I) - E,
                M = 0 < w,
                D = u - (a.bOverlapVertical ? I : O) - E,
                T = 0 < D,
                G = (a.bPreferPopTop || !T) && M;
              M ||
                T ||
                ((G = D < w),
                a.bFitToWindow && ((E += (G ? w : D) - 8), (s.menuHeight = E))),
                G
                  ? (s.menuBottom = u - (a.bOverlapVertical ? O : I))
                  : (s.menuTop = a.bOverlapVertical ? I : O),
                r
                  ? (s.menuHeight || (s.menuHeight = i.height),
                    s.menuWidth || (s.menuWidth = i.width),
                    s.menuBottom &&
                      !s.menuTop &&
                      ((s.menuTop = u - s.menuBottom - s.menuHeight),
                      (s.menuBottom = void 0)),
                    s.menuRight &&
                      !s.menuLeft &&
                      ((s.menuLeft = p - s.menuRight - s.menuWidth),
                      (s.menuRight = void 0)))
                  : (s.menuLeft && (s.menuLeft += n.scrollX),
                    s.menuTop && (s.menuTop += n.scrollY),
                    s.menuBottom &&
                      (s.menuBottom +=
                        n.document.body.scrollHeight -
                        n.scrollY -
                        n.innerHeight),
                    s.menuRight &&
                      (s.menuRight +=
                        n.document.body.scrollWidth -
                        n.scrollX -
                        n.innerWidth)),
                (s.menuLeft === this.state.menuLeft &&
                  s.menuRight === this.state.menuRight &&
                  s.menuTop === this.state.menuTop &&
                  s.menuBottom === this.state.menuBottom &&
                  s.menuWidth === this.state.menuWidth &&
                  s.menuHeight === this.state.menuHeight) ||
                  this.setState(s);
            }
          }),
          (e.prototype.render = function() {
            var i = this,
              e = { visibility: this.state.ready ? "visible" : "hidden" };
            if (this.props.popup) {
              var r = this.props.element.ownerDocument.defaultView;
              void 0 !== this.state.menuLeft &&
                void 0 !== this.state.menuTop &&
                void 0 !== this.state.menuWidth &&
                void 0 !== this.state.menuHeight &&
                r.SteamClient.Window.GetWindowRestoreDetails(function(e) {
                  var t = i.props.popup.window,
                    n = i.state.menuLeft - r.screenX,
                    o = i.state.menuTop - r.screenY;
                  try {
                    t.SteamClient.Window.PositionWindowRelative(
                      e,
                      n,
                      o,
                      i.state.menuWidth,
                      i.state.menuHeight
                    );
                  } catch (e) {
                    console.error(e);
                  }
                });
            } else
              void 0 !== this.state.menuTop
                ? (e.top = this.state.menuTop)
                : void 0 !== this.state.menuBottom &&
                  (e.bottom = this.state.menuBottom),
                void 0 !== this.state.menuLeft
                  ? (e.left = this.state.menuLeft)
                  : void 0 !== this.state.menuRight &&
                    (e.right = this.state.menuRight),
                void 0 !== this.state.menuHeight &&
                  (e.height = this.state.menuHeight),
                void 0 !== this.state.menuWidth &&
                  (e.width = this.state.menuWidth);
            var t =
              this.props.options.strClassName ||
              (this.props.options.bUseWebStyles
                ? "popup_block_new popup_block_hidden_until_visible"
                : "contextMenu");
            return (
              this.props.instance.visible &&
                this.state.ready &&
                (t += " visible"),
              (t += " ContextMenuFocusContainer"),
              s.createElement(
                "div",
                {
                  className: t,
                  ref: this.BindMenuElement,
                  style: e,
                  onBlur: this.OnBlur,
                  onKeyDown: this.OnKeyDown,
                  tabIndex: 0
                },
                this.props.children
              )
            );
          }),
          (e.childContextTypes = {
            contextMenuInstance: function() {
              return null;
            },
            context: function() {
              return null;
            }
          }),
          a.c([i.a], e.prototype, "BindMenuElement", null),
          a.c([i.a, Object(p.a)(100)], e.prototype, "OnMenuMutation", null),
          a.c([i.a], e.prototype, "OnWindowResize", null),
          a.c([i.a], e.prototype, "OnBlur", null),
          a.c([i.a], e.prototype, "OnKeyDown", null),
          (e = a.c([o.observer], e))
        );
      })(s.Component),
      f = (function(i) {
        function r(e, t, n) {
          var o =
            i.call(this, "contextmenu_" + r.sm_iContextMenuInstance++, {
              title: "Menu",
              html_class: "ContextMenuPopup client_chat_frame",
              body_class: "ContextMenuPopupBody",
              replace_existing_popup: !1,
              target_browser: n,
              eCreationFlags: l.c.ContextMenu
            }) || this;
          return (o.m_menuProps = e), (o.m_children = t), o;
        }
        return (
          a.d(r, i),
          (r.prototype.UpdateParamsBeforeShow = function(e) {
            var t = R.h(
              this.m_menuProps.element.ownerDocument.defaultView,
              this.m_menuProps.element.getBoundingClientRect()
            );
            return (
              (e.dimensions = {
                left: t.right,
                top: t.top,
                width: 350,
                height: 1
              }),
              (e.availscreenwidth = this.m_menuProps.element.ownerDocument.defaultView.screen.availWidth),
              (e.availscreenheight = this.m_menuProps.element.ownerDocument.defaultView.screen.availHeight),
              e
            );
          }),
          (r.prototype.Render = function(e, t) {
            c.render(
              s.createElement(
                _,
                a.a({}, this.m_menuProps, { popup: this }),
                this.m_children
              ),
              t
            );
          }),
          (r.prototype.OnBlur = function() {}),
          (r.prototype.OnFocus = function() {}),
          (r.prototype.OnLoad = function() {}),
          (r.prototype.OnResize = function() {}),
          (r.prototype.OnClose = function() {}),
          (r.sm_iContextMenuInstance = 0),
          r
        );
      })(l.a);
    function g(e) {
      return s.createElement("div", { className: "ContextMenuMouseOverlay" });
    }
    var b = "DEBUG_StickyContextMenus";
    function v() {
      return (
        window.sessionStorage && "true" == window.sessionStorage.getItem(b)
      );
    }
    function S(e) {
      e
        ? window.sessionStorage.setItem(b, "true")
        : window.sessionStorage.removeItem(b);
    }
  },
  "G+3Z": function(e, t, n) {
    "use strict";
    n.d(t, "b", function() {
      return a;
    }),
      n.d(t, "a", function() {
        return c;
      });
    var o = n("i8i4"),
      i = n("/IDK"),
      r = (function() {
        return function(e) {
          this.instance = new s(e, !1);
        };
      })();
    function a(e) {
      return new s(e.body, !0);
    }
    var s = (function() {
        function e(e, t) {
          void 0 === t && (t = !0),
            (this.m_parent = e),
            (this.m_window = e.ownerDocument.defaultView),
            (this.m_bRemoveOnHide = t);
        }
        return (
          (e.prototype.Show = function(n, o) {
            var i = this;
            return (
              this.CancelShowInterval(),
              o
                ? new Promise(function(t, e) {
                    i.iIntervalShow = i.m_window.setTimeout(function() {
                      var e = i.m_parent.ownerDocument;
                      e.defaultView &&
                        !e.defaultView.closed &&
                        (i.InternalShow(n), t());
                    }, o);
                  })
                : (this.InternalShow(n), Promise.resolve())
            );
          }),
          (e.prototype.InternalShow = function(e) {
            this.m_container
              ? o.unmountComponentAtNode(this.m_container)
              : ((this.m_container = this.m_parent.ownerDocument.createElement(
                  "div"
                )),
                this.m_parent.appendChild(this.m_container)),
              o.render(e, this.m_container);
          }),
          (e.prototype.Hide = function(e) {
            var t = this;
            this.CancelShowInterval(),
              e
                ? (this.iIntervalShow = this.m_window.setTimeout(function() {
                    t.InternalHide();
                  }, e))
                : this.InternalHide();
          }),
          (e.prototype.InternalHide = function() {
            this.m_container &&
              (o.unmountComponentAtNode(this.m_container),
              this.m_bRemoveOnHide &&
                (this.m_parent.removeChild(this.m_container),
                (this.m_container = null)));
          }),
          (e.prototype.CancelShowInterval = function() {
            void 0 !== this.iIntervalShow &&
              (this.m_window.clearInterval(this.iIntervalShow),
              (this.iIntervalShow = void 0));
          }),
          (e.prototype.BIsChildElement = function(e) {
            return this.m_container && i.e(this.m_container, e);
          }),
          e
        );
      })(),
      c = (function() {
        function e(e) {
          (this.m_mapEmbeddedHovers = new WeakMap()), (this.m_strUniqueID = e);
        }
        return (
          (e.prototype.ShowElementDelayed = function(e, t, n, o) {
            var i = this.GetEmbeddedElement(e);
            return (i.activeObject = o), i.instance.Show(n, t);
          }),
          (e.prototype.ShowElement = function(e, t, n) {
            var o = this.GetEmbeddedElement(e);
            (o.activeObject = n), o.instance.Show(t);
          }),
          (e.prototype.HideElement = function(e, t, n) {
            var o = this.GetEmbeddedElement(e);
            o.activeObject == t &&
              ((o.activeObject = void 0), o.instance.Hide(n));
          }),
          (e.prototype.GetEmbeddedElement = function(e) {
            var t = this.m_mapEmbeddedHovers.get(e);
            return (
              t || ((t = new r(e.body)), this.m_mapEmbeddedHovers.set(e, t)), t
            );
          }),
          e
        );
      })();
  },
  J0bI: function(e, t, n) {
    "use strict";
    n.d(t, "b", function() {
      return s;
    }),
      n.d(t, "a", function() {
        return c;
      });
    var o = n("mrSG"),
      i = n("2vnA"),
      r = n("0N1H"),
      a = n("tkkQ"),
      s = (function() {
        function e(e) {
          (this.m_bReady = !1),
            (this.m_bValid = !1),
            (this.m_strInviteCode = e);
        }
        return (
          (e.prototype.BIsReady = function() {
            return this.m_bReady;
          }),
          (e.prototype.BIsValid = function() {
            return this.m_bValid;
          }),
          (e.prototype.BIsInviteLink = function() {
            return !!this.m_strInviteCode;
          }),
          (e.prototype.GetInviteCode = function() {
            return this.m_strInviteCode;
          }),
          (e.prototype.BNeverExpires = function() {
            return this.m_rtTimeExpires == r.b;
          }),
          (e.prototype.GetChatRoomGroupID = function() {
            return this.m_ulChatRoomGroupID;
          }),
          (e.prototype.BIsVoiceChatInvite = function() {
            return !!this.m_ulChatID;
          }),
          (e.prototype.GetChatID = function() {
            return this.m_ulChatID;
          }),
          (e.prototype.GetURL = function() {
            return this.m_strInviteCode ? c(this.m_strInviteCode) : null;
          }),
          (e.prototype.BIsUserBanned = function() {
            return this.m_bIsBanned;
          }),
          (e.prototype.GetTimeKickExpires = function() {
            return this.m_rtKickExpires;
          }),
          Object.defineProperty(e.prototype, "time_expires", {
            get: function() {
              return this.m_rtTimeExpires;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.InitInvalid = function() {
            (this.m_bValid = !1), (this.m_bReady = !0);
          }),
          (e.prototype.InitDirectInvite = function(e, t, n, o) {
            void 0 === n && (n = !1),
              void 0 === o && (o = void 0),
              (this.m_ulChatRoomGroupID = e),
              (this.m_ulChatID = t),
              (this.m_bIsBanned = n),
              (this.m_rtKickExpires = o),
              (this.m_rtTimeExpires = r.b),
              (this.m_bValid = !0),
              (this.m_bReady = !0);
          }),
          o.c([i.observable], e.prototype, "m_bReady", void 0),
          o.c([i.action], e.prototype, "InitInvalid", null),
          o.c([i.action], e.prototype, "InitDirectInvite", null),
          e
        );
      })();
    function c(e) {
      return "public" == a.a.WEB_UNIVERSE
        ? "https://s.team/chat/" + e
        : a.a.COMMUNITY_BASE_URL + "chat/invite/" + e;
    }
  },
  JtU4: function(e, t, n) {
    "use strict";
    n.d(t, "c", function() {
      return s;
    }),
      n.d(t, "a", function() {
        return m;
      }),
      n.d(t, "b", function() {
        return d;
      }),
      n.d(t, "d", function() {
        return _;
      });
    var s,
      o,
      i = n("mrSG"),
      r = n("2vnA"),
      a = n("i8i4"),
      c = n("UqDm"),
      l = n("WpBz"),
      p = n("1VtQ");
    ((o = s || (s = {}))[(o.Minimized = 1)] = "Minimized"),
      (o[(o.Hidden = 2)] = "Hidden"),
      (o[(o.Tooltip = 4)] = "Tooltip"),
      (o[(o.ContextMenu = 8)] = "ContextMenu"),
      (o[(o.Resizable = 16)] = "Resizable");
    var u = (function() {
        function e(e, t) {
          (this.m_rgLoadingLinks = []), (this.m_rgLoadingLinks = []);
          for (
            var n = e.document.getElementsByTagName("link"), o = 0;
            o < n.length;
            o++
          ) {
            var i = n[o];
            i.addEventListener("load", this.OnLinkLoad),
              this.m_rgLoadingLinks.push(i);
          }
        }
        return (
          (e.prototype.SetTarget = function(e) {
            (this.m_fnRender = e),
              0 == this.m_rgLoadingLinks.length &&
                (this.m_fnRender(), (this.m_fnRender = void 0));
          }),
          (e.prototype.OnLinkLoad = function(e) {
            e.currentTarget.removeEventListener("load", this.OnLinkLoad),
              c.c(this.m_rgLoadingLinks, e.currentTarget),
              0 == this.m_rgLoadingLinks.length &&
                (this.m_fnRender(), (this.m_fnRender = void 0));
          }),
          i.c([p.a], e.prototype, "OnLinkLoad", null),
          e
        );
      })(),
      m = (function() {
        function e(e, t) {
          (this.m_bFocused = !1),
            (this.m_strName = e),
            (this.m_rgParams = t),
            this.m_rgParams.target_browser &&
              (this.m_strName +=
                "_pid" + this.m_rgParams.target_browser.m_unPID),
            (this.m_strTitle = t.title),
            delete this.m_rgParams.title;
        }
        return (
          (e.prototype.UpdateParamsBeforeShow = function(e) {
            return e;
          }),
          (e.prototype.OnDrop = function(e) {
            console.log("Ignoring drop onto toplevel window", e),
              e.preventDefault(),
              e.stopPropagation();
          }),
          (e.prototype.OnDragOver = function(e) {
            e.preventDefault(),
              (e.dataTransfer.dropEffect = "none"),
              e.stopPropagation();
          }),
          (e.prototype.OnMessage = function(e) {
            "window_moved" == e.data && this.OnResize();
          }),
          (e.prototype.Show = function(e) {
            var t,
              n = this;
            void 0 === e && (e = !0),
              window.SteamClient &&
                (this.m_rgParams.eCreationFlags |= s.Hidden),
              this.m_rgParams.eCreationFlags & s.Tooltip && (e = !1),
              this.BIsValid() &&
                (this.BIsClosed()
                  ? ((this.m_popup = void 0), (this.m_element = void 0))
                  : e && this.Focus());
            var o,
              i,
              r,
              a = _.GetExistingPopup(this.m_strName);
            (a && !this.m_rgParams.replace_existing_popup) ||
              ((this.m_rgParams = this.UpdateParamsBeforeShow(this.m_rgParams)),
              a
                ? ((i = a.m_element),
                  (o = a.m_popup),
                  a.ReleasePopup(),
                  (r = a.m_renderWhenReady),
                  _.RemoveTrackedPopup(a),
                  o.removeEventListener("beforeunload", a.OnBeforeUnloadEvent),
                  o.removeEventListener("unload", a.OnUnload),
                  o.removeEventListener("resize", a.OnResizeEvent),
                  o.removeEventListener("focus", this.OnFocusInternal),
                  o.removeEventListener("blur", this.OnBlurInternal),
                  o.removeEventListener("drop", a.OnDrop),
                  o.removeEventListener("dragover", a.OnDragOver),
                  o.removeEventListener("message", this.OnMessage))
                : ((o = (t = h.CreatePopup(this.m_strName, this.m_rgParams))
                    .popup),
                  (i = t.element),
                  (r = new u(o, i))),
              o &&
                i &&
                ((o.document.title = this.m_strTitle),
                o.addEventListener("beforeunload", this.OnBeforeUnloadEvent),
                o.addEventListener("unload", this.OnUnload),
                o.addEventListener("resize", this.OnResizeEvent),
                o.addEventListener("focus", this.OnFocusInternal),
                o.addEventListener("blur", this.OnBlurInternal),
                o.addEventListener("drop", this.OnDrop),
                o.addEventListener("dragover", this.OnDragOver),
                o.addEventListener("message", this.OnMessage),
                (this.m_popup = o),
                (this.m_element = i),
                (this.m_renderWhenReady = r),
                this.m_renderWhenReady.SetTarget(function() {
                  return n.RenderInternal(n.m_popup, n.m_element, e);
                })),
              _.AddTrackedPopup(this),
              a && e && this.Focus());
          }),
          (e.prototype.RemoveEventListeners = function() {
            this.window.removeEventListener(
              "beforeunload",
              this.OnBeforeUnloadEvent
            ),
              this.window.removeEventListener("unload", this.OnUnload),
              this.window.removeEventListener("resize", this.OnResizeEvent),
              this.window.removeEventListener("focus", this.OnFocusInternal),
              this.window.removeEventListener("blur", this.OnBlurInternal),
              this.window.removeEventListener("drop", this.OnDrop),
              this.window.removeEventListener("dragover", this.OnDragOver),
              this.window.removeEventListener("message", this.OnMessage);
          }),
          (e.prototype.RenderInternal = function(e, t, n) {
            this.Render(e, t),
              this.OnLoad(),
              e.SteamClient &&
                (n
                  ? e.SteamClient.Window.BringToFront()
                  : e.SteamClient.Window.ShowWindow());
          }),
          (e.prototype.OnResizeEvent = function() {
            this.OnResize();
          }),
          (e.prototype.OnBeforeUnloadEvent = function() {
            this.OnBeforeUnload();
          }),
          (e.prototype.OnUnload = function() {
            this.RemoveEventListeners(),
              _.RemoveTrackedPopup(this),
              this.OnClose(),
              a.unmountComponentAtNode(this.m_element);
          }),
          Object.defineProperty(e.prototype, "browser_info", {
            get: function() {
              return this.m_rgParams.target_browser;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "window", {
            get: function() {
              return this.m_popup;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "root_element", {
            get: function() {
              return this.m_element;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "title", {
            get: function() {
              return this.m_strTitle;
            },
            set: function(e) {
              (this.m_strTitle = e),
                this.m_popup && (this.m_popup.document.title = this.m_strTitle);
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Focus = function() {
            this.m_popup &&
            void 0 !== this.m_popup.SteamClient &&
            void 0 !== this.m_popup.SteamClient.Window
              ? this.m_popup.SteamClient.Window.BringToFront()
              : this.m_popup && this.m_popup.focus();
          }),
          (e.prototype.Close = function() {
            this.m_popup && this.m_popup.close();
          }),
          (e.prototype.GetName = function() {
            return this.m_strName;
          }),
          (e.prototype.BIsValid = function() {
            return !!this.m_popup;
          }),
          (e.prototype.BIsClosed = function() {
            return !this.m_popup || this.m_popup.closed;
          }),
          (e.prototype.BIsVisible = function() {
            return (
              this.m_popup &&
              !this.m_popup.closed &&
              "visible" == this.m_popup.document.visibilityState
            );
          }),
          (e.prototype.BIsFocused = function() {
            return this.BIsVisible() && this.m_popup.document.hasFocus();
          }),
          (e.prototype.OnFocusInternal = function() {
            (this.m_bFocused = !0), this.OnFocus();
          }),
          (e.prototype.OnBlurInternal = function() {
            (this.m_bFocused = !1), this.OnBlur();
          }),
          Object.defineProperty(e.prototype, "focused", {
            get: function() {
              return this.m_bFocused;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetWindowRestoreDetails = function() {
            var n = this;
            return this.m_popup &&
              !this.m_popup.closed &&
              this.m_popup.SteamClient
              ? new Promise(function(t, e) {
                  n.m_popup.SteamClient.Window.GetWindowRestoreDetails(function(
                    e
                  ) {
                    t(e);
                  });
                })
              : Promise.resolve("");
          }),
          (e.prototype.IsMinimized = function() {
            var n = this;
            return this.m_popup &&
              !this.m_popup.closed &&
              this.m_popup.SteamClient &&
              this.m_popup.SteamClient.Window &&
              this.m_popup.SteamClient.Window.IsWindowMinimized
              ? new Promise(function(t, e) {
                  n.m_popup.SteamClient.Window.IsWindowMinimized(function(e) {
                    t(e);
                  });
                })
              : Promise.resolve(!1);
          }),
          (e.prototype.ReleasePopup = function() {
            this.OnClose(), (this.m_popup = null);
          }),
          (e.prototype.OnBeforeUnload = function() {}),
          (e.prototype.OnFocus = function() {}),
          (e.prototype.OnBlur = function() {}),
          i.c([r.observable], e.prototype, "m_bFocused", void 0),
          i.c([p.a], e.prototype, "OnMessage", null),
          i.c([p.a], e.prototype, "OnResizeEvent", null),
          i.c([p.a], e.prototype, "OnBeforeUnloadEvent", null),
          i.c([p.a], e.prototype, "OnUnload", null),
          i.c([p.a], e.prototype, "OnFocusInternal", null),
          i.c([p.a], e.prototype, "OnBlurInternal", null),
          i.c([r.computed], e.prototype, "focused", null),
          e
        );
      })(),
      d = (function(r) {
        function e(e, t, n, o) {
          var i = r.call(this, e, n) || this;
          return i.SetSavedDimensionsKey(t), (i.m_bExpires = o), i;
        }
        return (
          i.d(e, r),
          (e.prototype.BIsInOverlay = function() {
            return (
              this.browser_info &&
              this.browser_info != { m_unPID: 0, m_nBrowserID: -1 }
            );
          }),
          (e.prototype.SetSavedDimensionsKey = function(e) {
            this.m_strSavedDimensionsKey = e;
          }),
          (e.prototype.UpdateParamsBeforeShow = function(e) {
            return (
              !this.m_strSavedDimensionsKey ||
              e.bIgnoreSavedDimensions ||
              e.strRestoreDetails
                ? e.strRestoreDetails &&
                  ((this.m_strInitialSavedDimensionsKey = this.GetSavedDimensionsKey()),
                  _.SetRestoreDetails(
                    this.m_strInitialSavedDimensionsKey,
                    e.strRestoreDetails,
                    this.m_bExpires
                  ))
                : ((this.m_strInitialSavedDimensionsKey = this.GetSavedDimensionsKey()),
                  (e.strRestoreDetails = _.GetRestoreDetails(
                    this.m_strInitialSavedDimensionsKey
                  ))),
              e
            );
          }),
          (e.prototype.OnLoad = function() {
            var t = this;
            this.GetWindowRestoreDetails().then(function(e) {
              (t.m_strInitialRestoreDetails = e), t.OnResizeComplete(e);
            });
          }),
          (e.prototype.OnResize = function() {
            this.QueryAndStoreWindowPosition();
          }),
          (e.prototype.OnResizeComplete = function(e) {}),
          (e.prototype.QueryAndStoreWindowPosition = function() {
            var n = this;
            if (this.m_strInitialRestoreDetails) {
              var o = this.GetSavedDimensionsKey();
              this.m_popup.setTimeout(function() {
                n.GetWindowRestoreDetails().then(function(e) {
                  var t =
                    n.m_strInitialRestoreDetails == e &&
                    o == n.m_strInitialSavedDimensionsKey;
                  n.m_popup &&
                    n.m_strSavedDimensionsKey &&
                    e &&
                    !t &&
                    (_.SetRestoreDetails(o, e, n.m_bExpires),
                    (n.m_rgParams.strRestoreDetails = e),
                    (n.m_strInitialSavedDimensionsKey = o),
                    n.OnResizeComplete(e));
                });
              }, 30);
            }
          }),
          (e.prototype.OnBeforeUnload = function() {
            this.QueryAndStoreWindowPosition(),
              r.prototype.OnBeforeUnload.call(this);
          }),
          (e.prototype.OnClose = function() {}),
          (e.prototype.SaveWindowPosition = function(e) {
            _.SetRestoreDetails(this.GetSavedDimensionsKey(), e, !1),
              (this.m_rgParams.strRestoreDetails = e);
          }),
          i.c([p.a], e.prototype, "QueryAndStoreWindowPosition", null),
          e
        );
      })(m),
      h = (function() {
        function e() {
          var a = this;
          (this.m_bShuttingDown = !1),
            (this.m_mapPopups = new Map()),
            (this.m_rgShutdownCallbacks = []),
            (this.m_rgPopupCreatedCallbacks = []),
            (this.m_unCurrentAccountID = 0),
            (this.m_mapRestoreDetails = new Map()),
            (this.m_bSaveRequired = !1),
            Object({
              NODE_ENV: "production",
              STEAM_BUILD: "buildbot",
              VALVE_BUILD: "false"
            }).MOBILE_BUILD ||
              window.addEventListener("beforeunload", function(e) {
                a.m_bShuttingDown = !0;
                for (
                  var t = 0, n = a.m_rgShutdownCallbacks;
                  t < n.length;
                  t++
                ) {
                  (0, n[t])();
                }
                var o = [];
                a.m_mapPopups.forEach(function(e) {
                  e.BIsValid() && !e.BIsClosed() && o.push(e);
                });
                for (var i = 0, r = o; i < r.length; i++) {
                  r[i].Close();
                }
                a.m_bSaveRequired && a.SaveSavedDimensionStore(),
                  a.m_mapPopups.clear();
              });
        }
        return (
          (e.prototype.SetCurrentLoggedInAccountID = function(e) {
            (this.m_unCurrentAccountID = e)
              ? this.LoadSavedDimensionStore()
              : this.ClearSavedDimensionStore();
          }),
          (e.prototype.AddShutdownCallback = function(e) {
            this.m_rgShutdownCallbacks.push(e);
          }),
          (e.prototype.AddPopupCreatedCallback = function(e) {
            this.m_rgPopupCreatedCallbacks.push(e);
          }),
          (e.prototype.AddTrackedPopup = function(e) {
            this.m_mapPopups.set(e.GetName(), e);
            for (
              var t = 0, n = this.m_rgPopupCreatedCallbacks;
              t < n.length;
              t++
            ) {
              (0, n[t])(e);
            }
          }),
          (e.prototype.RemoveTrackedPopup = function(e) {
            this.m_mapPopups.delete(e.GetName());
          }),
          (e.prototype.GetExistingPopup = function(e) {
            return this.m_mapPopups.get(e);
          }),
          (e.prototype.GetPopups = function() {
            return this.m_mapPopups.values();
          }),
          (e.prototype.ClosePopupsOwnedByBrowser = function(t) {
            this.m_mapPopups.forEach(function(e) {
              e.browser_info &&
                e.browser_info.m_nBrowserID == t.m_nBrowserID &&
                e.browser_info.m_unPID == t.m_unPID &&
                e.Close();
            });
          }),
          (e.CreatePopup = function(e, t) {
            var n = t.dimensions || {},
              o = n.width || 300,
              i = n.height || 300,
              r = t.title,
              a = "width=" + o + ",height=" + i;
            void 0 !== n.left && (a += ",left=" + n.left),
              void 0 !== n.top && (a += ",top=" + n.top),
              (a += ",resizeable,status=0,toolbar=0,menubar=0,location=0");
            var s = "about:blank",
              c = [];
            c.push("createflags=" + t.eCreationFlags),
              t.minWidth && c.push("minwidth=" + t.minWidth),
              t.minHeight && c.push("minheight=" + t.minHeight),
              t.target_browser &&
                (c.push("pid=" + t.target_browser.m_unPID),
                c.push("browser=" + t.target_browser.m_nBrowserID),
                t.availscreenwidth &&
                  t.availscreenheight &&
                  (c.push("screenavailwidth=" + t.availscreenwidth),
                  c.push("screenavailheight=" + t.availscreenheight))),
              t.strRestoreDetails &&
                c.push("restoredetails=" + t.strRestoreDetails),
              c && (s += "?" + c.join("&"));
            var l = (t.owner_window || window).open(s, e, a, !0);
            if (!l)
              return (
                console.log(
                  "Failed to create popup.. browser popup blocker enabled?"
                ),
                {}
              );
            var p = "";
            t.html_class && (p = 'class="' + t.html_class + '"');
            var u = "";
            t.body_class && (u = 'class="' + t.body_class + '"');
            var m =
              "<!DOCTYPE html><html " +
              p +
              "><head><title></title></head><body " +
              u +
              '><div id="popup_target"></div></body></html>';
            l.document.write(m), (l.document.title = r);
            for (
              var d = l.document.getElementsByTagName("head")[0],
                h = document.getElementsByTagName("link"),
                _ = 0;
              _ < h.length;
              _++
            ) {
              var f = h[_];
              if ("stylesheet" == f.rel) {
                for (
                  var g = l.document.createElement("link"), b = 0;
                  b < f.attributes.length;
                  b++
                ) {
                  var v = f.attributes.item(b);
                  g.setAttribute(v.name, v.value);
                }
                d.appendChild(g);
              }
            }
            return {
              popup: l,
              element: l.document.getElementById("popup_target")
            };
          }),
          (e.prototype.BShuttingDown = function() {
            return this.m_bShuttingDown;
          }),
          (e.prototype.GetLocalStorageKey = function() {
            return "PopupSavedDimensions_" + this.m_unCurrentAccountID;
          }),
          (e.prototype.LoadSavedDimensionStore = function() {
            if (this.m_unCurrentAccountID) {
              var e = this.GetLocalStorageKey();
              this.m_mapRestoreDetails = void 0;
              var t = window.localStorage.getItem(e);
              if (t)
                try {
                  var n = JSON.parse(t);
                  this.m_mapRestoreDetails = new Map(n);
                } catch (e) {}
              this.m_mapRestoreDetails ||
                (this.m_mapRestoreDetails = new Map());
            }
          }),
          (e.prototype.SaveSavedDimensionStore = function() {
            if (this.m_unCurrentAccountID && this.m_bSaveRequired) {
              var e = this.GetLocalStorageKey(),
                t = JSON.stringify(Array.from(this.m_mapRestoreDetails));
              window.localStorage.setItem(e, t), (this.m_bSaveRequired = !1);
            }
          }),
          (e.prototype.DebouncedSaveSavedDimensionStore = function() {
            this.SaveSavedDimensionStore();
          }),
          (e.prototype.ClearSavedDimensionStore = function() {
            this.m_mapRestoreDetails.clear(), (this.m_bSaveRequired = !1);
          }),
          (e.prototype.GetRestoreDetails = function(e) {
            if (!this.m_mapRestoreDetails.has(e)) return "";
            var t = this.m_mapRestoreDetails.get(e);
            return (
              (t.last_used = Date.now()),
              (this.m_bSaveRequired = !0),
              t.strRestoreDetails
            );
          }),
          (e.prototype.SetRestoreDetails = function(e, t, n) {
            if (e) {
              if (t) {
                if (50 < this.m_mapRestoreDetails.size) {
                  for (
                    var o = null,
                      i = Date.now(),
                      r = 0,
                      a = Array.from(this.m_mapRestoreDetails.keys());
                    r < a.length;
                    r++
                  ) {
                    var s = a[r],
                      c = this.m_mapRestoreDetails.get(s);
                    c.last_used < i &&
                      c.bExpires &&
                      ((i = c.last_used), (o = s));
                  }
                  o && this.m_mapRestoreDetails.delete(o);
                }
                var l = {
                  strRestoreDetails: t,
                  last_used: Date.now(),
                  bExpires: n
                };
                this.m_mapRestoreDetails.set(e, l);
              } else this.m_mapRestoreDetails.delete(e);
              (this.m_bSaveRequired = !0),
                this.m_bShuttingDown
                  ? this.SaveSavedDimensionStore()
                  : this.DebouncedSaveSavedDimensionStore();
            }
          }),
          i.c(
            [p.a, Object(l.a)(100)],
            e.prototype,
            "DebouncedSaveSavedDimensionStore",
            null
          ),
          e
        );
      })(),
      _ = new h();
  },
  MfD9: function(e, t, n) {
    e.exports = {
      ChatMessageSteamStore_Failed: "bbcode_ChatMessageSteamStore_Failed_2wa0X",
      ChatMessageSteamStore: "bbcode_ChatMessageSteamStore_gwzSZ",
      senderName: "bbcode_senderName_1_tWd",
      URLSent: "bbcode_URLSent_2yalT",
      SteamURL: "bbcode_SteamURL_2VXfO",
      ChatMessageSteamStore_Name: "bbcode_ChatMessageSteamStore_Name_2-b92",
      ChatMessageSteamStore_GameNameAndIcon:
        "bbcode_ChatMessageSteamStore_GameNameAndIcon_qa-O1",
      ChatMessageSteamStore_Header: "bbcode_ChatMessageSteamStore_Header_3X7hC",
      ChatMessageSteamStore_HeaderImage:
        "bbcode_ChatMessageSteamStore_HeaderImage_2s811",
      Blurred: "bbcode_Blurred_3BKMl",
      ChatMessageSteamStore_GameDetails:
        "bbcode_ChatMessageSteamStore_GameDetails_99hwV",
      ChatMessageSteamStore_Description:
        "bbcode_ChatMessageSteamStore_Description_17PwS",
      ChatMessageSteamStore_GameIcon:
        "bbcode_ChatMessageSteamStore_GameIcon_1EeOf",
      ChatMessageSteamStore_Body: "bbcode_ChatMessageSteamStore_Body_1L1hB",
      ChatMessageSteamStore_DetailsContainer:
        "bbcode_ChatMessageSteamStore_DetailsContainer_2d12m",
      ChatMessageSteamStore_MediaContainer:
        "bbcode_ChatMessageSteamStore_MediaContainer_2i_00",
      ChatMessageSteamStore_MainMedia:
        "bbcode_ChatMessageSteamStore_MainMedia_28eQq",
      ChatMessageSteamStore_VideoThumbnail:
        "bbcode_ChatMessageSteamStore_VideoThumbnail_2c-FU",
      ChatMessageSteamStore_ThumbnailsContainer:
        "bbcode_ChatMessageSteamStore_ThumbnailsContainer_246HV",
      ChatMessageSteamStore_Screenshot:
        "bbcode_ChatMessageSteamStore_Screenshot_3XVGb",
      ChatMessageSteamStore_ScreenshotThumbnail:
        "bbcode_ChatMessageSteamStore_ScreenshotThumbnail_3R0VG",
      videoPlaying: "bbcode_videoPlaying_1UpDR",
      ChatMessageSteamStore_VideoPlayButton:
        "bbcode_ChatMessageSteamStore_VideoPlayButton_2oeMy",
      ChatMessageSteamStore_VideoLargeContainer:
        "bbcode_ChatMessageSteamStore_VideoLargeContainer_2pzdG",
      ChatMessageSteamStore_VideoLarge:
        "bbcode_ChatMessageSteamStore_VideoLarge_2Dj_u",
      ChatMessageSteamStore_Footer: "bbcode_ChatMessageSteamStore_Footer_1mXJd",
      ChatMessageSteamStore_PricingContainer:
        "bbcode_ChatMessageSteamStore_PricingContainer_fYTQK",
      ChatMessageSteamStore_Pricing:
        "bbcode_ChatMessageSteamStore_Pricing_bKeQr",
      ChatMessageSteamStore_Pricing_Discount:
        "bbcode_ChatMessageSteamStore_Pricing_Discount_1BAfb",
      ChatMessageSteamStore_Pricing_FinalContainer:
        "bbcode_ChatMessageSteamStore_Pricing_FinalContainer_3piGx",
      ChatMessageSteamStore_Pricing_Final:
        "bbcode_ChatMessageSteamStore_Pricing_Final_2TCu5",
      hasDiscount: "bbcode_hasDiscount_2DoYC",
      ChatMessageSteamStore_Pricing_Initial:
        "bbcode_ChatMessageSteamStore_Pricing_Initial_1Jm7h",
      ChatMessageSteamStore_ViewStore:
        "bbcode_ChatMessageSteamStore_ViewStore_1_czf",
      ChatMessageSteamStore_Free: "bbcode_ChatMessageSteamStore_Free_3Zq0f",
      ChatMessageSteamStore_CopyURL:
        "bbcode_ChatMessageSteamStore_CopyURL_23S5M"
    };
  },
  SOfK: function(e, t, n) {
    e.exports = {
      PreMessage: "messages_PreMessage_1jeo-",
      CodeMessage: "messages_CodeMessage_1Fe4I",
      QuoteMessage: "messages_QuoteMessage_33jrq"
    };
  },
  UqDm: function(e, t, n) {
    "use strict";
    function o(e, t, n) {
      t < 0 ||
        n < 0 ||
        (n >= e.length && (e[n] = void 0), e.splice(n, 0, e.splice(t, 1)[0]));
    }
    function i(e, t) {
      return r(e, function(e) {
        return t == e;
      });
    }
    function r(e, t) {
      var n = e.findIndex(t);
      return 0 <= n && (e.splice(n, 1), !0);
    }
    function a(e, i) {
      return e.reduce(function(e, t, n, o) {
        return e + (i(t, n, o) ? 1 : 0);
      }, 0);
    }
    function s(e, t) {
      return e.filter(function(e) {
        return t !== e;
      });
    }
    function c(e, t) {
      if (e.length != t.length) return !1;
      for (var n = 0; n < e.length; n++) if (e[n] != t[n]) return !1;
      return !0;
    }
    function l(e, t, n) {
      for (var o = 0, i = e.length - 1; o <= i; ) {
        var r = Math.floor((o + i) / 2),
          a = n(e[r], t);
        if (a < 0) o = r + 1;
        else if (0 < a) i = r - 1;
        else {
          if (i == r) return r;
          if (r == o) return r < i && n(t, e[r + 1]) < 0 ? r : r + 1;
          o = r;
        }
      }
      return i;
    }
    function p(e, t, n) {
      var o = l(e, t, n);
      e.splice(o + 1, 0, t);
    }
    n.d(t, "e", function() {
      return o;
    }),
      n.d(t, "c", function() {
        return i;
      }),
      n.d(t, "d", function() {
        return r;
      }),
      n.d(t, "b", function() {
        return a;
      }),
      n.d(t, "a", function() {
        return s;
      }),
      n.d(t, "f", function() {
        return c;
      }),
      n.d(t, "g", function() {
        return l;
      }),
      n.d(t, "h", function() {
        return p;
      });
  },
  WpBz: function(e, t, n) {
    "use strict";
    function o(a) {
      return function(e, i, t) {
        var r = t.value;
        t.value = function() {
          for (var e = this, t = [], n = 0; n < arguments.length; n++)
            t[n] = arguments[n];
          var o = this[i + "_DebounceProperties"];
          void 0 === o &&
            (o = this[i + "_DebounceProperties"] = {
              hTimer: void 0,
              nPending: 0
            }),
            void 0 === o.hTimer
              ? (r.apply(this, t),
                (o.hTimer = window.setInterval(function() {
                  0 < o.nPending
                    ? (r.apply(e, t), (o.nPending = 0))
                    : (window.clearInterval(o.hTimer), (o.hTimer = void 0));
                }, a)))
              : (o.nPending += 1);
        };
      };
    }
    n.d(t, "a", function() {
      return o;
    });
  },
  XaMz: function(e, t, n) {
    "use strict";
    function o(e, t) {
      for (var n = [], o = 2; o < arguments.length; o++)
        n[o - 2] = arguments[o];
      console.assert
        ? 0 == n.length
          ? console.assert(!!e, t)
          : console.assert.apply(console, [!!e, t].concat(n))
        : e || console.warn.apply(console, [t].concat(n));
    }
    n.d(t, "a", function() {
      return o;
    });
  },
  Y3TG: function(e, t, n) {
    "use strict";
    n("vDqi"), n("JtU4");
  },
  e2SU: function(e, t, n) {
    "use strict";
    n.d(t, "u", function() {
      return i;
    }),
      n.d(t, "P", function() {
        return r;
      }),
      n.d(t, "e", function() {
        return a;
      }),
      n.d(t, "g", function() {
        return s;
      }),
      n.d(t, "l", function() {
        return c;
      }),
      n.d(t, "y", function() {
        return l;
      }),
      n.d(t, "B", function() {
        return p;
      }),
      n.d(t, "m", function() {
        return u;
      }),
      n.d(t, "U", function() {
        return m;
      }),
      n.d(t, "K", function() {
        return d;
      }),
      n.d(t, "I", function() {
        return h;
      }),
      n.d(t, "eb", function() {
        return _;
      }),
      n.d(t, "fb", function() {
        return f;
      }),
      n.d(t, "cb", function() {
        return g;
      }),
      n.d(t, "W", function() {
        return b;
      }),
      n.d(t, "s", function() {
        return v;
      }),
      n.d(t, "r", function() {
        return S;
      }),
      n.d(t, "H", function() {
        return y;
      }),
      n.d(t, "a", function() {
        return C;
      }),
      n.d(t, "p", function() {
        return I;
      }),
      n.d(t, "w", function() {
        return O;
      }),
      n.d(t, "E", function() {
        return E;
      }),
      n.d(t, "db", function() {
        return w;
      }),
      n.d(t, "D", function() {
        return M;
      }),
      n.d(t, "h", function() {
        return D;
      }),
      n.d(t, "G", function() {
        return T;
      }),
      n.d(t, "F", function() {
        return G;
      }),
      n.d(t, "S", function() {
        return R;
      }),
      n.d(t, "f", function() {
        return N;
      }),
      n.d(t, "i", function() {
        return L;
      }),
      n.d(t, "d", function() {
        return k;
      }),
      n.d(t, "x", function() {
        return A;
      }),
      n.d(t, "X", function() {
        return P;
      }),
      n.d(t, "ab", function() {
        return F;
      }),
      n.d(t, "v", function() {
        return B;
      }),
      n.d(t, "c", function() {
        return V;
      }),
      n.d(t, "b", function() {
        return x;
      }),
      n.d(t, "k", function() {
        return U;
      }),
      n.d(t, "V", function() {
        return j;
      }),
      n.d(t, "z", function() {
        return H;
      }),
      n.d(t, "C", function() {
        return W;
      }),
      n.d(t, "L", function() {
        return z;
      }),
      n.d(t, "R", function() {
        return q;
      }),
      n.d(t, "J", function() {
        return K;
      }),
      n.d(t, "Y", function() {
        return Y;
      }),
      n.d(t, "Z", function() {
        return J;
      }),
      n.d(t, "O", function() {
        return X;
      }),
      n.d(t, "n", function() {
        return Q;
      }),
      n.d(t, "o", function() {
        return Z;
      }),
      n.d(t, "gb", function() {
        return $;
      }),
      n.d(t, "j", function() {
        return ee;
      }),
      n.d(t, "A", function() {
        return te;
      }),
      n.d(t, "T", function() {
        return ne;
      }),
      n.d(t, "bb", function() {
        return oe;
      }),
      n.d(t, "q", function() {
        return ie;
      }),
      n.d(t, "M", function() {
        return re;
      }),
      n.d(t, "N", function() {
        return ae;
      }),
      n.d(t, "t", function() {
        return se;
      }),
      n.d(t, "Q", function() {
        return ce;
      });
    var o = n("q1tI");
    function i() {
      return o.createElement(
        "svg",
        {
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Hyperlink",
          "data-name": "Layer 1",
          viewBox: "0 0 100 100",
          x: "0px",
          y: "0px"
        },
        o.createElement(
          "g",
          { "data-name": "Group" },
          o.createElement("path", {
            "data-name": "Path",
            d:
              "M50.86,20.23l-9,9,4.24,4.24,9-9c6.35-6.35,16.09-6.93,21.73-1.3s5,15.38-1.3,21.73l-9,9,4.24,4.24,9-9c8.69-8.69,9.27-22.24,1.3-30.21S59.55,11.55,50.86,20.23Z"
          }),
          o.createElement("path", {
            "data-name": "Path",
            d:
              "M44.89,75.53a17.22,17.22,0,0,1-11.28,5.13A13.23,13.23,0,0,1,19.34,66.39a17.22,17.22,0,0,1,5.13-11.28l9-9-4.24-4.24-9,9a23.21,23.21,0,0,0-6.88,15.22c0,.37,0,.74,0,1.11A19.19,19.19,0,0,0,33.91,86.66a23.21,23.21,0,0,0,15.22-6.88l9-9-4.24-4.24Z"
          }),
          o.createElement("rect", {
            "data-name": "Path",
            className: "Link1",
            x: "28.75",
            y: "47",
            width: "42.48",
            height: "6",
            transform: "translate(-20.71 50) rotate(-45)"
          })
        )
      );
    }
    function r() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Settings",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "-305.5 396.5 256 256",
          enableBackground: "new -305.5 396.5 256 256"
        },
        o.createElement("path", {
          d:
            "M-232.755,589.942l3.103,2.408c5.78,4.492,11.973,8.18,18.409,10.959l3.581,1.547l2.276,33.783 c0.089,1.33,1.385,2.54,2.715,2.54h48.62c1.355,0,2.745-1.273,2.852-2.621l2.74-33.284l3.602-1.496 c6.406-2.656,12.646-6.262,18.554-10.707l3.137-2.366l30.578,15.009c1.155,0.571,2.924,0.017,3.563-1.087l24.303-42.1 c0.674-1.173,0.265-3.014-0.852-3.785l-27.872-19.309l0.469-3.832c0.495-4.032,0.725-7.395,0.725-10.57 c0-3.129-0.227-6.5-0.687-10.307l-0.469-3.896l28.699-19.253c1.112-0.741,1.509-2.473,0.84-3.627l-24.3-42.104 c-0.657-1.139-2.502-1.727-3.7-1.155l-31.208,14.748l-3.091-2.341c-5.571-4.224-11.466-7.688-17.522-10.306l-3.58-1.548 l-2.34-34.887c-0.089-1.33-1.381-2.536-2.715-2.536h-48.617c-1.355,0-2.74,1.274-2.851,2.626l-2.834,34.371l-3.593,1.501 c-6.082,2.535-12.028,5.924-17.667,10.071l-3.124,2.302l-31.392-15.413c-1.168-0.575-2.924-0.025-3.559,1.074l-24.309,42.107 c-0.678,1.172-0.264,3.014,0.848,3.781l28.068,19.444l-0.524,3.883c-0.592,4.378-0.865,8.018-0.865,11.462 c0,2.988,0.179,6.065,0.55,9.403l0.431,3.853l-28.528,19.125c-1.108,0.742-1.509,2.468-0.84,3.632l24.308,42.1 c0.656,1.142,2.489,1.726,3.7,1.154L-232.755,589.942z M-177.498,560.051c-19.311,0-35.02-15.709-35.02-35.02 s15.709-35.02,35.02-35.02s35.02,15.709,35.02,35.02S-158.188,560.051-177.498,560.051z"
        })
      );
    }
    function a() {
      return o.createElement(
        "svg",
        {
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_ChatSettings",
          version: "1.1",
          x: "0px",
          y: "0px",
          viewBox: "0 0 600 600"
        },
        o.createElement(
          "g",
          null,
          o.createElement("path", {
            d:
              "M256,0C126.6,0,21.3,104.7,21.3,233.7c0,65.9,26.5,125.4,74.7,168.3v99.3c0,3.8,2,7.4,5.3,9.2c1.7,1,3.5,1.5,5.3,1.5   c1.8,0,3.7-0.5,5.4-1.5l85.8-50.3c18.9,4.8,38.4,7.3,58.1,7.3c129.4,0,234.7-104.9,234.7-233.7C490.7,104.7,385.4,0,256,0z    M405.3,254.1L370,260c-3,13.5-8.3,26-15.5,37.3l20.8,29.2L347.8,354l-29.2-20.8c-11.3,7.2-23.8,12.5-37.3,15.5l-5.9,35.3h-39   l-5.9-35.3c-13.5-3-26-8.3-37.3-15.5L164.2,354l-27.5-27.5l20.8-29.2C150.3,286,145,273.5,142,260l-35.3-5.9v-39l35.3-5.9   c3-13.5,8.3-26,15.5-37.3l-20.8-29.2l27.5-27.5l29.2,20.8c11.3-7.2,23.8-12.5,37.3-15.5l5.9-35.3h39l5.9,35.3   c13.5,3,26,8.3,37.3,15.5l29.2-20.8l27.5,27.5L354.5,172c7.2,11.3,12.5,23.8,15.5,37.3l35.3,5.9V254.1z"
          }),
          o.createElement("circle", { cx: "256", cy: "234.6", r: "45.9" })
        )
      );
    }
    function s() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          className: "SVGIcon_Button SVGIcon_CopyToClipboard",
          xmlns: "http://www.w3.org/2000/svg",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polyline", {
          fill: "none",
          className: "line",
          strokeWidth: "12",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points:
            "178.25,197.25 247,197.25 247,82.5 175,10.25 111.5,10.25 111.5,56 "
        }),
        o.createElement("polygon", {
          fill: "none",
          className: "line",
          strokeWidth: "12",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "155,133 83,60.75 11,60.75 11,247.75 155,247.75 "
        }),
        o.createElement("polyline", {
          fill: "none",
          className: "line",
          strokeWidth: "12",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "83,60.75 83,133 155,133 "
        }),
        o.createElement("polyline", {
          fill: "none",
          className: "line",
          strokeWidth: "12",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "175,10.25 175,82.5 247,82.5 "
        })
      );
    }
    function c() {
      return o.createElement(
        "svg",
        {
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_DownArrowContextMenu",
          "data-name": "Layer 1",
          viewBox: "0 0 128 128",
          x: "0px",
          y: "0px"
        },
        o.createElement("polygon", {
          points:
            "50 59.49 13.21 22.89 4.74 31.39 50 76.41 95.26 31.39 86.79 22.89 50 59.49"
        })
      );
    }
    function l() {
      return o.createElement(
        "svg",
        {
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_MagnifyingGlass",
          version: "1.1",
          x: "0px",
          y: "0px",
          viewBox: "0 0 100 100"
        },
        o.createElement(
          "g",
          { transform: "translate(0,-952.36218)" },
          o.createElement("path", {
            className: "ColorSelector",
            d:
              "m 40.99855,964.36216 c -15.9798,0 -28.9986,13.01864 -28.9986,28.99862 0,15.97992 13.0188,28.99862 28.9986,28.99862 6.9189,0 13.2881,-2.4349 18.2803,-6.4997 l 23.5927,23.6239 c 1.1714,1.1714 3.0784,1.1715 4.2498,0 1.1716,-1.1715 1.1716,-3.0783 0,-4.2498 l -23.6239,-23.5926 c 4.0649,-4.9923 6.4997,-11.3615 6.4997,-18.28042 0,-15.97998 -13.0187,-28.99862 -28.9986,-28.99862 z m 0,5.99972 c 12.7374,0 22.9989,10.26145 22.9989,22.9989 0,12.73732 -10.2615,22.99892 -22.9989,22.99892 -12.7374,0 -22.9989,-10.2616 -22.9989,-22.99892 0,-12.73745 10.2615,-22.9989 22.9989,-22.9989 z",
            fill: "#ffffff",
            fillOpacity: "1",
            stroke: "none",
            visibility: "visible",
            display: "inline",
            overflow: "visible"
          })
        )
      );
    }
    function p(e) {
      var t = "SVGIcon_Button SVGIcon_Microphone";
      return (
        e.className && (t += " " + e.className),
        o.createElement(
          "svg",
          {
            version: "1.1",
            xmlns: "http://www.w3.org/2000/svg",
            className: t,
            x: "0px",
            y: "0px",
            width: "256px",
            height: "256px",
            viewBox: "-127.5 664.5 256 256"
          },
          o.createElement(
            "g",
            { className: "MicBase" },
            o.createElement(
              "g",
              null,
              o.createElement(
                "g",
                null,
                o.createElement("path", {
                  d:
                    "M-64.7,826.3c-0.5-2.9-0.8-5.8-0.8-8.7v-38.2h11.2v36.5L-64.7,826.3z"
                }),
                o.createElement("path", {
                  d:
                    "M-54.8,779.9v35.8l-9.6,9.6c-0.4-2.6-0.6-5.1-0.6-7.6v-37.7H-54.8 M-53.8,778.9H-66v38.7c0,3.3,0.4,6.5,1,9.7l11.2-11.2 V778.9L-53.8,778.9z"
                })
              ),
              o.createElement(
                "g",
                null,
                o.createElement("path", {
                  d:
                    "M56.8,817.6c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1h-35.2 c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6v-38.7H56.8V817.6z"
                }),
                o.createElement("path", {
                  d:
                    "M69,778.9H56.8v38.7c0,24.7-24.8,44.9-55.3,44.9c-16.6,0-31.6-6-41.7-15.5l-8.6,8.6c11.1,10.5,26.7,17.5,44.2,18.8v25.1 h-35.2c-2.1,0-3.8,2.7-3.8,6.1c0,3.4,1.7,6.1,3.8,6.1h35.5H7.3h35.5c2.1,0,3.8-2.7,3.8-6.1c0-3.4-1.7-6.1-3.8-6.1H7.6v-25.1 C42,871.8,69,847.3,69,817.6V778.9L69,778.9z"
                })
              )
            ),
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                d:
                  "M40.6,712.5c0-21.6-17.5-39.1-39.1-39.1c-21.6,0-39.1,17.5-39.1,39.1v87.4l10-10v-72.4h0v-5c0-16.1,13.1-29.1,29.1-29.1 c16.1,0,29.1,13.1,29.1,29.1v5v14.1l10-10V712.5z"
              })
            ),
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                d:
                  "M-4.7,835.4c-2.2-0.5-4.4-1.2-6.4-2.2C-9.1,834.2-6.9,834.9-4.7,835.4z"
              }),
              o.createElement("path", {
                d: "M-0.1,836c-0.2,0-0.4,0-0.6,0C-0.6,836-0.4,836-0.1,836z"
              }),
              o.createElement("path", {
                d: "M30.6,806.9C30.6,806.9,30.6,806.9,30.6,806.9v-16.6"
              }),
              o.createElement("path", {
                d:
                  "M-11.9,832.8c0.2,0.1,0.5,0.2,0.7,0.3C-11.4,833-11.7,832.9-11.9,832.8L-11.9,832.8z"
              }),
              o.createElement("path", {
                d:
                  "M-1.7,835.9c-0.3,0-0.5-0.1-0.8-0.1C-2.3,835.8-2,835.8-1.7,835.9z"
              }),
              o.createElement("path", {
                d:
                  "M-3.3,835.7c-0.3-0.1-0.6-0.1-1-0.2C-3.9,835.6-3.6,835.6-3.3,835.7z"
              }),
              o.createElement("path", {
                d:
                  "M30.6,776.1v14.1v16.6c0,0,0,0,0,0s0,0,0,0c0,16.1-13,29.1-29.1,29.1c-0.5,0-1.1,0-1.6,0c-0.2,0-0.4,0-0.6,0 c-0.3,0-0.6,0-1-0.1c-0.3,0-0.5-0.1-0.8-0.1c-0.2,0-0.5-0.1-0.7-0.1c-0.3-0.1-0.6-0.1-1-0.2c-0.2,0-0.3-0.1-0.5-0.1 c-2.2-0.5-4.4-1.2-6.4-2.2c0,0-0.1,0-0.1,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-3-1.6-5.7-3.6-8-6.1l-7.1,7.1 c7.1,7.6,17.3,12.3,28.5,12.3c21.6,0,39.1-17.5,39.1-39.1v-40.8L30.6,776.1z"
              }),
              o.createElement("path", {
                d:
                  "M-0.8,836c-0.3,0-0.6-0.1-1-0.1C-1.4,835.9-1.1,835.9-0.8,836z"
              }),
              o.createElement("path", {
                d: "M1.5,836.1c-0.5,0-1.1,0-1.6,0C0.4,836,0.9,836.1,1.5,836.1z"
              }),
              o.createElement("path", {
                d:
                  "M-2.6,835.8c-0.2,0-0.5-0.1-0.7-0.1C-3,835.7-2.8,835.7-2.6,835.8z"
              }),
              o.createElement("path", {
                d:
                  "M1.5,836.1c16.1,0,29.1-13,29.1-29.1c0,0,0,0,0,0C30.6,823,17.6,836.1,1.5,836.1z"
              }),
              o.createElement("path", {
                d:
                  "M-4.2,835.5c-0.2,0-0.3-0.1-0.5-0.1C-4.5,835.4-4.4,835.5-4.2,835.5z"
              }),
              o.createElement("path", {
                d:
                  "M-11.1,833.2C-11.1,833.2-11.2,833.2-11.1,833.2C-11.2,833.2-11.1,833.2-11.1,833.2z"
              })
            )
          ),
          o.createElement(
            "g",
            { className: "MicFill" },
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                d:
                  "M-53.8,816.1L-65,827.3c2.2,10.8,7.9,20.5,16.2,28.3l8.6-8.6c-8.5-7.9-13.6-18.2-13.6-29.4V816.1L-53.8,816.1z"
              })
            ),
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                d:
                  "M1.5,834.6c-15.2,0-27.6-12.4-27.6-27.6v-94.5c0-15.2,12.4-27.6,27.6-27.6c15.2,0,27.6,12.4,27.6,27.6v94.5 C29.1,822.2,16.7,834.6,1.5,834.6z"
              }),
              o.createElement("path", {
                d:
                  "M1.5,696.3c8.9,0,16.1,7.2,16.1,16.1v94.5c0,8.9-7.2,16.1-16.1,16.1c-8.9,0-16.1-7.2-16.1-16.1v-94.5 C-14.6,703.6-7.4,696.3,1.5,696.3 M1.5,673.3c-21.6,0-39.1,17.5-39.1,39.1v94.5c0,21.6,17.5,39.1,39.1,39.1s39.1-17.5,39.1-39.1 v-94.5C40.6,690.8,23.1,673.3,1.5,673.3L1.5,673.3z"
              })
            )
          ),
          o.createElement(
            "g",
            { className: "MicStrike", fill: "none", strokeWidth: "1" },
            o.createElement("line", {
              x1: "-82.5",
              y1: "866.5",
              x2: "83.5",
              y2: "700.4"
            })
          )
        )
      );
    }
    function u() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Emoticon",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("circle", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "12",
          strokeMiterlimit: "10",
          cx: "128",
          cy: "128",
          r: "107.5"
        }),
        o.createElement("path", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "12",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          d:
            "M74.484,145.945 c0,0,12.996,37.533,53.514,37.533c38.084,0,53.499-37.533,53.499-37.533"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "12",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "94.5",
          y1: "97.5",
          x2: "94.5",
          y2: "109.5"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "12",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "160.5",
          y1: "97.5",
          x2: "160.5",
          y2: "109.5"
        })
      );
    }
    function m() {
      return o.createElement(
        "svg",
        {
          fill: "#FFFFFF",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Submit",
          version: "1.1",
          x: "0px",
          y: "0px",
          viewBox: "0 0 100 100"
        },
        o.createElement(
          "g",
          { transform: "translate(0,-952.36218)" },
          o.createElement("path", {
            d:
              "m 92.115057,974.14842 a 2.0001999,2.0001999 0 0 0 -1.96764,2.02965 l 0.0376,31.19553 -77.475501,0 16.161909,-15.73013 a 2.0002746,2.0002746 0 1 0 -2.790355,-2.8667 L 6.3913393,1007.9405 a 2.0001999,2.0001999 0 0 0 -0.0011,2.8646 l 19.6896957,19.2036 a 2.0002671,2.0002671 0 1 0 2.792551,-2.8646 l -16.170767,-15.771 79.153048,0 a 2.0001999,2.0001999 0 0 0 1.72959,-0.5437 2.0001999,2.0001999 0 0 0 0.0598,-0.058 2.0001999,2.0001999 0 0 0 0.54259,-1.7218 l -0.0388,-32.87638 a 2.0001999,2.0001999 0 0 0 -2.03297,-2.02522 z",
            fill: "#FFFFFF",
            fillOpacity: "1",
            fillRule: "evenodd",
            stroke: "none",
            visibility: "visible",
            display: "inline",
            overflow: "visible"
          })
        )
      );
    }
    function d() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_ResizeIcon",
          x: "0px",
          y: "0px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          null,
          o.createElement("path", {
            fill: "#020202",
            d:
              "M115.512,137.263l21.6-21.6c0,0,25.5,25.5,45.8,45.8l35-35v91.6h-91.6l35-35 C141.012,162.763,115.512,137.263,115.512,137.263z"
          }),
          o.createElement("path", {
            fill: "#020202",
            d:
              "M108.312,129.763c-20.3-20.3-35.8-35.8-35.8-35.8l21.6-21.601c0,0,15.5,15.5,35.8,35.801L108.312,129.763z"
          }),
          o.createElement("path", {
            fill: "#020202",
            d:
              "M54.312,75.763c-20.3-20.3-15.8-15.8-15.8-15.8l21.6-21.601c0,0-4.5-4.5,15.8,15.801L54.312,75.763z"
          })
        )
      );
    }
    function h() {
      return o.createElement(
        "svg",
        {
          fill: "#FFFFFF",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Popout",
          viewBox: "0 0 8 8",
          x: "0px",
          y: "0px"
        },
        o.createElement("path", {
          d:
            "M0 0v8h8v-2h-1v1h-6v-6h1v-1h-2zm4 0l1.5 1.5-2.5 2.5 1 1 2.5-2.5 1.5 1.5v-4h-4z"
        })
      );
    }
    function _() {
      return o.createElement(
        "svg",
        {
          fill: "#FFFFFF",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_X",
          version: "1.1",
          x: "0px",
          y: "0px",
          viewBox: "-165 95 100 100"
        },
        o.createElement(
          "g",
          null,
          o.createElement("polygon", {
            points:
              "-74.9,117.2 -102.2,145 -74.9,172.8 -89.1,186.8 -116.2,159.3 -143.2,186.8 -157.5,172.8 -130.2,145 -157.5,117.2 -143.2,103.2 -116.2,130.7 -89.1,103.2"
          })
        )
      );
    }
    function f() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_2",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_X_Line",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "45",
          strokeMiterlimit: "10",
          x1: "212",
          y1: "212",
          x2: "44",
          y2: "44"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "45",
          strokeMiterlimit: "10",
          x1: "44",
          y1: "212",
          x2: "212",
          y2: "44"
        })
      );
    }
    function g(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_VoiceRoom",
          x: "0px",
          y: "0px",
          width: "64px",
          height: "64px",
          viewBox: "0 0 64 64",
          enableBackground: "new 0 0 64 64"
        },
        !e.exitOnly &&
          o.createElement(
            "g",
            null,
            o.createElement("path", {
              className: "Bubble",
              fill: "none",
              strokeMiterlimit: "1",
              strokeWidth: "2.5px",
              d:
                "M60.1,32.3c0,15.1-12.3,27.3-27.4,27.3 c-5,0-9.7-1.4-13.8-3.7c-1.8-1.1-15,5.4-13.8,3.4c1.7-2.9,5.9-10.3,4.7-12C7,43,5.3,37.8,5.3,32.3C5.3,17.2,17.6,5,32.7,5 C47.8,5,60.1,17.2,60.1,32.3z"
            })
          ),
        !e.exitOnly &&
          o.createElement(
            "g",
            null,
            o.createElement("path", {
              className: "AudioLines",
              opacity: "0",
              strokeWidth: "1px",
              d:
                "M37.2,51.1c-0.5,0-1-0.1-1.3-0.4c-0.7-0.5-0.7-1.3,0-1.8c6.3-4.4,9.8-10.2,9.8-16.4c0-6.2-3.5-12-9.8-16.4 c-0.7-0.5-0.7-1.3,0-1.8s1.9-0.5,2.6,0c7.1,4.9,10.9,11.4,10.9,18.3c0,6.9-3.9,13.4-10.9,18.3C38.2,51,37.7,51.1,37.2,51.1 M21.4,40.2c0.5,0,0.9-0.1,1.3-0.4c2.8-2,4.3-4.6,4.3-7.3s-1.5-5.4-4.3-7.3c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c2.1,1.5,3.3,3.4,3.3,5.5c0,2.1-1.2,4-3.3,5.5c-0.7,0.5-0.7,1.3,0,1.8C20.4,40.1,20.9,40.2,21.4,40.2 M29.3,45.7 c0.5,0,1-0.1,1.3-0.4c4.9-3.4,7.7-7.9,7.7-12.7c0-4.8-2.7-9.3-7.7-12.7c-0.7-0.5-1.9-0.5-2.6,0c-0.7,0.5-0.7,1.3,0,1.8 c4.2,2.9,6.6,6.8,6.6,10.9c0,4.1-2.3,8-6.6,10.9c-0.7,0.5-0.7,1.3,0,1.8C28.4,45.5,28.8,45.7,29.3,45.7"
            })
          ),
        o.createElement(
          "g",
          { className: "Arrow", opacity: e.exitOnly ? 1 : 0 },
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "2",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points: "41,30.7 14.5,30.7 23.5,19.4 "
          }),
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "2",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points: "41,30.7 14.5,30.7 23.5,42 "
          })
        ),
        o.createElement(
          "g",
          null,
          o.createElement("polyline", {
            className: "ExitDoor",
            opacity: e.exitOnly ? 1 : 0,
            strokeLinecap: "round",
            strokeMiterlimit: "1",
            strokeWidth: "2px",
            fill: "none",
            points:
              "32.5,22.1 32.5,17.7 47.7,17.7 47.7,43.8 32.5,43.8 32.5,39.5"
          })
        ),
        !e.exitOnly &&
          o.createElement(
            "g",
            { className: "Microphone" },
            o.createElement("path", {
              d:
                "M40.971,28.593v6.278c0,4.007-4.023,7.284-8.971,7.284c-2.693,0-5.126-0.974-6.765-2.516 c-1.379-1.28-2.207-2.952-2.207-4.769v-6.278l0,0H21.05v6.278c0,0.536,0.064,1.055,0.162,1.573 c0.357,1.752,1.281,3.325,2.627,4.592c1.801,1.702,4.332,2.839,7.17,3.049v4.072H25.3c-0.341,0-0.616,0.438-0.616,0.989 c0,0.552,0.275,0.99,0.616,0.99h5.759h1.882H38.7c0.341,0,0.616-0.438,0.616-0.99c0-0.551-0.275-0.989-0.616-0.989h-5.71v-4.072 c5.58-0.422,9.96-4.396,9.96-9.214v-6.278H40.971z"
            }),
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                d:
                  "M32,39.841c-3.493,0-6.343-2.344-6.343-5.213v-17.85c0-2.871,2.85-5.213,6.343-5.213s6.343,2.342,6.343,5.213v17.85,C38.343,37.497,35.493,39.841,32,39.841z"
              })
            )
          )
      );
    }
    function b() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_TextRoom",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256",
          stroke: "#000",
          strokeWidth: "10px"
        },
        o.createElement(
          "g",
          { className: "ScratchPad" },
          o.createElement("path", {
            fill: "none",
            strokeWidth: "0",
            strokeMiterlimit: "10",
            d:
              "M179.751,40.994h14.869 c8.388,0,15.25,6.862,15.25,15.25v141.193c0,8.388-6.862,15.25-15.25,15.25H57.37c-8.388,0-15.25-6.862-15.25-15.25V56.244 c0-8.388,6.862-15.25,15.25-15.25h14.869H179.751z"
          }),
          o.createElement("line", {
            fill: "none",
            strokeWidth: "0",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            x1: "74.495",
            y1: "27.313",
            x2: "74.495",
            y2: "54.063"
          }),
          o.createElement("line", {
            fill: "none",
            strokeWidth: "0",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            x1: "124.495",
            y1: "27.313",
            x2: "124.495",
            y2: "54.063"
          }),
          o.createElement("line", {
            fill: "none",
            strokeWidth: "0",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            x1: "174.745",
            y1: "27.313",
            x2: "174.745",
            y2: "54.063"
          })
        ),
        o.createElement("line", {
          className: "TextLines",
          x1: "71.6",
          y1: "115.4",
          x2: "179.4",
          y2: "115.4"
        }),
        o.createElement("line", {
          className: "TextLines",
          x1: "71.6",
          y1: "145.8",
          x2: "143.3",
          y2: "145.8"
        }),
        o.createElement("line", {
          className: "TextLines",
          x1: "71.6",
          y1: "175.9",
          x2: "179.4",
          y2: "175.9"
        }),
        o.createElement("line", {
          className: "TextLines",
          x1: "73.7",
          y1: "82.7",
          x2: "166.8",
          y2: "82.7"
        })
      );
    }
    function v(e) {
      var t = "SVGIcon_Button SVGIcon_Headphones";
      return (
        e.className && (t += " " + e.className),
        o.createElement(
          "svg",
          {
            version: "1.1",
            xmlns: "http://www.w3.org/2000/svg",
            className: t,
            x: "0px",
            y: "0px",
            width: "256px",
            height: "256px",
            viewBox: "-305.5 396.5 256 256"
          },
          o.createElement(
            "g",
            { className: "HeadPhonesBase" },
            o.createElement(
              "g",
              null,
              o.createElement("path", {
                fill: "none",
                d:
                  "M-176.5,418.7c-37,0-69.5,30.2-69.5,64.5v25.3c11.3,2.3,19.9,12.3,19.9,24.3v8.6l100.9-100.9 C-138.2,427.3-156.7,418.7-176.5,418.7z"
              }),
              o.createElement("path", {
                d:
                  "M-226.2,532.9c0-12-8.5-22-19.9-24.3v-25.3c0-34.4,32.5-64.5,69.5-64.5c19.8,0,38.3,8.6,51.2,21.9l6.9-6.9 c-14.8-15.1-35.7-24.9-58.2-24.9c-42.3,0-79.4,34.8-79.4,74.5v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8c0,7.8,3.6,14.7,9.2,19.3 l40.5-40.5V532.9z"
              }),
              o.createElement("path", {
                d:
                  "M-97.1,508.6v-25.3c0-7.5-1.3-14.8-3.8-21.8l-7.9,7.9c1.2,4.5,1.8,9.1,1.8,13.9v25.3c-11.3,2.3-19.9,12.3-19.9,24.3v29.8 c0,13.7,11.1,24.8,24.8,24.8c13.7,0,24.8-11.1,24.8-24.8v-29.8C-77.2,520.9-85.8,510.9-97.1,508.6z"
              })
            )
          ),
          o.createElement(
            "g",
            { className: "HeadphonesStrike" },
            o.createElement("line", {
              fill: "none",
              x1: "-260.5",
              y1: "598.5",
              x2: "-94.5",
              y2: "432.4"
            })
          ),
          o.createElement(
            "g",
            { className: "HeadPhonesFill" },
            o.createElement("path", {
              d:
                "M-226.2,562.7v-21.2l-40.5,40.5c4.3,3.5,9.7,5.6,15.6,5.6C-237.3,587.5-226.2,576.4-226.2,562.7z"
            }),
            o.createElement("path", {
              d:
                "M-118.3,433.7l-6.9,6.9c7.9,8.1,13.7,18,16.5,28.8l7.9-7.9C-104.5,451.1-110.5,441.6-118.3,433.7z"
            })
          )
        )
      );
    }
    function S() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_5",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Group",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { transform: "translate(0,-952.36218)" },
          o.createElement("path", {
            d:
              "M58.6,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1\tC86.7,983,74,970.4,58.6,970.4z M202.1,970.4c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C230.2,983,217.6,970.4,202.1,970.4z M130.4,986c-15.4,0-28.1,12.7-28.1,28.1c0,15.4,12.7,28.1,28.1,28.1s28.1-12.7,28.1-28.1 C158.5,998.6,145.8,986,130.4,986z M242.8,1110.6c0-0.1,0-17.9,0-18l-0.1-16.1c0-22.4-18.2-40.6-40.6-40.6 c-17.8,0-30,7.7-36.3,18.8c-2,3.5-3.4,7.3-4.5,11.1c-7.5-8.7-18.6-14.3-31-14.3s-23.5,5.6-31,14.3c-1.1-3.9-2.5-7.6-4.5-11.1 c-6.3-11.1-18.4-18.8-36.3-18.8c-22.4,0-40.6,18.2-40.6,40.6v46.8c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2 c3.4,0,6.2-2.8,6.2-6.2v-31.2h9.4v9.4c0,3.4,2.8,6.2,6.2,6.2h12.5v31.2c0,3.4,2.8,6.2,6.2,6.2H146c3.4,0,6.2-2.8,6.2-6.2v-31.2 h12.5c3.4,0,6.2-2.8,6.2-6.2v-9.4h9.4v31.2c0,3.4,2.8,6.2,6.2,6.2h31.2c3.4,0,6.2-2.8,6.2-6.2v-31.2h12.5c3.4,0,6.3-2.7,6.3-6.2\tV1110.6z"
          })
        )
      );
    }
    function y() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_PlusCircle",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("circle", {
          fill: "none",
          strokeWidth: "10",
          strokeMiterlimit: "10",
          cx: "128",
          cy: "128",
          r: "95.333"
        }),
        o.createElement("line", {
          className: "horizontalLine",
          fill: "none",
          strokeWidth: "10",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "73.333",
          y1: "128",
          x2: "183.333",
          y2: "128"
        }),
        o.createElement("line", {
          className: "verticalLine",
          fill: "none",
          strokeWidth: "10",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "128.333",
          y1: "73.335",
          x2: "128.333",
          y2: "183.333"
        })
      );
    }
    function C() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_AddFriend",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          {
            className: "friendHead",
            transform: "matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"
          },
          o.createElement("circle", { cx: "86.296", cy: "47.419", r: "33.526" })
        ),
        o.createElement("path", {
          className: "friendBody",
          d:
            "M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"
        }),
        o.createElement("path", {
          className: "plusCircle",
          d:
            "M179.01,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.989,66.99,66.989c36.997,0,66.99-29.991,66.99-66.989 S216.008,103.892,179.01,103.892z M217.893,175.882h-33.647v33.882c0,2.762-2.239,5-5,5s-5-2.238-5-5v-33.882h-33.647 c-2.762,0-5-2.238-5-5c0-2.763,2.238-5,5-5h33.647V132.47c0-2.762,2.239-5,5-5s5,2.238,5,5v33.412h33.647c2.762,0,5,2.237,5,5 C222.893,173.643,220.654,175.882,217.893,175.882z"
        })
      );
    }
    function I() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_4",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_FriendRequest",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          {
            className: "friendHead",
            transform: "matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)"
          },
          o.createElement("circle", { cx: "85.923", cy: "47.419", r: "33.526" })
        ),
        o.createElement("path", {
          className: "friendBody",
          d:
            "M100.353,170.882c0-23.589,10.397-44.736,26.842-59.152c-3.352-0.423-6.773-0.649-10.257-0.649H94.231\tc-39.775,0-56.481,28.271-56.481,63.099v41.88c0,0-0.3,16.369,35.917,21.813c36.217,5.444,73.651,5,73.651,5 C119.666,230.681,100.353,203.044,100.353,170.882z"
        }),
        o.createElement("path", {
          className: "friendBodyFull",
          d:
            "M176.504,217.922v-42.624c0-35.443-17.002-64.217-57.483-64.217H106.96h-1.017H94.898 c-40.48,0.001-57.484,28.774-57.484,64.217v42.624c0,0,0,22.197,69.544,22.197C177.521,240.121,176.504,217.922,176.504,217.922z"
        }),
        o.createElement("path", {
          className: "friendArm",
          d:
            "M18.167,63.833c6.53-0.734,39.348,39.127,50.007,47.647s21.327,16.686,15.16,25.353s-20.646,16.74-36.167,2.5 S-1.349,90.532,0,85.333S8.599,64.909,18.167,63.833z"
        }),
        o.createElement("path", {
          className: "redCircle",
          d:
            "M178.51,103.892c-36.998,0-66.99,29.992-66.99,66.99s29.994,66.99,66.99,66.99c36.997,0,66.99-29.992,66.99-66.99 S215.508,103.892,178.51,103.892z"
        })
      );
    }
    function O() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_5",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Invite",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "255.999px",
          viewBox: "0 0 256 255.999"
        },
        o.createElement("path", {
          d:
            "M165.678,20.535c-17.251,0-31.386,14.135-31.386,31.386c0,17.252,14.135,31.386,31.386,31.386 c17.251,0,31.386-14.134,31.386-31.386C197.063,34.67,182.929,20.535,165.678,20.535z"
        }),
        o.createElement("path", {
          d:
            "M165.678,93.121c24.995,0,45.335,20.34,45.335,45.335v52.31c0,3.853-3.123,6.975-6.975,6.975h-13.95v34.874 c0,3.852-3.123,6.974-6.974,6.975h-34.874c-3.852-0.001-6.974-3.123-6.975-6.975v-34.874h-13.95c-3.852,0-6.974-3.123-6.974-6.975 v-52.31C120.343,113.461,140.683,93.121,165.678,93.121z"
        }),
        o.createElement(
          "g",
          { className: "invitePlus" },
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "22",
            strokeMiterlimit: "10",
            x1: "14",
            y1: "128",
            x2: "101.5",
            y2: "128"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "22",
            strokeMiterlimit: "10",
            x1: "57.75",
            y1: "84.25",
            x2: "57.75",
            y2: "171.75"
          })
        )
      );
    }
    function E() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_5",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Paperclip",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          fill: "none",
          strokeWidth: "10",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          d:
            "M167.768,62.647 l-0.012,123.052c0,24.729-19.334,44.856-43.096,44.866c-23.765-0.006-43.099-20.134-43.096-44.872L81.557,48.851 c0-15.345,14.483-27.827,29.83-27.83c15.342,0.003,27.827,12.488,27.833,27.833l-0.002,139.245 c0.003,6.376-8.546,12.925-14.925,12.925c0,0-13.929-0.166-13.929-12.928l0.003-124.839"
        })
      );
    }
    function w() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Volume",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "255.999px",
          viewBox: "0 0 256 255.999"
        },
        o.createElement(
          "g",
          { className: "Speaker" },
          o.createElement("path", {
            d:
              "M93.785,52.265c-0.946,0-2.357,0.63-3.304,1.577L40.284,98.022c-0.947,0.789-2.831,1.578-4.093,1.578H9.367 C8.104,99.6,7,100.706,7,101.967v52.069c0,1.264,1.104,2.367,2.367,2.367H36.19c1.262,0,3.146,0.632,4.093,1.578l50.197,44.181 c0.947,0.789,2.516,1.578,3.304,1.578s1.578-1.104,1.578-2.367V54.631C95.363,53.369,94.731,52.265,93.785,52.265z"
          })
        ),
        o.createElement(
          "g",
          { className: "SoundWaves" },
          o.createElement("path", {
            className: "SoundWavesHighest",
            d:
              "M193.826,30.402c24.959,24.958,40.349,59.403,40.349,97.604c0,38.199-15.388,72.645-40.349,97.603l9.916,9.916 c28.067-28.067,44.263-64.673,44.263-107.521c0-42.847-16.196-79.455-44.263-107.521"
          }),
          o.createElement("path", {
            className: "SoundWavesHigh",
            d:
              "M175.737,47.628l-8.924,8.924c18.271,18.27,29.536,43.484,29.536,71.448s-11.264,53.178-29.536,71.448l8.924,8.924 c20.546-20.546,33.234-49.008,33.234-80.374c0-31.366-12.688-59.829-33.234-80.374V47.628z"
          }),
          o.createElement("path", {
            className: "SoundWavesMed",
            d:
              "M148.913,74.454l-8.925,8.925c11.488,11.488,18.491,27.236,18.491,44.624c0,17.388-7.054,33.281-18.491,44.575l8.875,8.975 c13.811-13.635,22.239-32.753,22.239-53.55c0-20.797-8.432-39.793-22.189-53.55V74.454z"
          }),
          o.createElement("path", {
            className: "SoundWavesLow",
            d:
              "M121.989,101.229l-8.778,9.073c4.641,4.516,7.397,10.706,7.397,17.702c0,6.995-2.755,13.186-7.397,17.702l8.778,9.073 c7.035-6.844,11.243-16.413,11.243-26.775C133.232,117.643,129.024,108.075,121.989,101.229z"
          })
        ),
        o.createElement(
          "g",
          { className: "SoundX" },
          o.createElement("line", {
            fill: "none",
            strokeWidth: "0",
            strokeMiterlimit: "10",
            x1: "137",
            y1: "170.667",
            x2: "223.167",
            y2: "84.5"
          }),
          o.createElement("line", {
            fill: "none",
            strokeWidth: "0",
            strokeMiterlimit: "10",
            x1: "137",
            y1: "84.5",
            x2: "223.167",
            y2: "170.667"
          })
        )
      );
    }
    function M() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_NewChatGroup",
          x: "0px",
          y: "0px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "Bubble",
          strokeWidth: "12",
          strokeMiterlimit: "10",
          d:
            "M127.393,10.833 c64.854,0,117.46,52.609,117.46,117.013c0,24.035-7.254,45.804-19.5,63.943c-4.99,7.711,13.15,39.457,20.408,51.705 c4.989,8.612-51.701-19.05-59.412-14.514c-17.233,9.979-37.188,15.872-58.957,15.872c-64.859,0-117.465-52.607-117.465-117.008 C9.928,63.442,62.534,10.833,127.393,10.833z"
        }),
        o.createElement("line", {
          strokeWidth: "22",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "83.5",
          y1: "128.886",
          x2: "176.184",
          y2: "128.886"
        }),
        o.createElement("line", {
          strokeWidth: "22",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          x1: "129.842",
          y1: "82.544",
          x2: "129.842",
          y2: "175.228"
        })
      );
    }
    function D() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Crown",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          null,
          o.createElement("path", {
            d:
              "M239.874,94.963l-31.115,21.325c-18.18,12.586-43.351,5.594-52.44-14.333l-23.772-50.692c-2.099-4.194-8.041-4.194-9.789,0 l-23.074,50.343c-9.439,20.627-35.31,27.27-53.49,13.983L16.128,93.565c-4.195-3.147-10.139,1.049-8.391,6.293l31.464,106.628 c0.35,1.049,1.398,1.397,2.098,1.397h173.752c1.049,0,1.749-0.698,2.098-1.397l31.115-104.53 C250.012,96.36,244.068,91.816,239.874,94.963z"
          })
        )
      );
    }
    function T() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Play",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "playTriangle",
          d:
            "M65.321,33.521c-11.274-6.615-20.342-1.471-20.342,11.52V210.96c0,12.989,9.068,18.135,20.342,11.521l137.244-82.348 c11.274-6.618,11.274-17.646,0-24.509L65.321,33.521z"
        })
      );
    }
    function G() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Pause",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          d:
            "M44.979,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6H50.979c-3.3,0-6,2.7-6,6V219.364z"
        }),
        o.createElement("path", {
          d:
            "M149.267,219.364c0,3.3,2.7,6,6,6h49.753c3.3,0,6-2.7,6-6V36.5c0-3.3-2.7-6-6-6h-49.753c-3.3,0-6,2.7-6,6V219.364z"
        })
      );
    }
    function R() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_SortBy",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "time" },
          o.createElement("circle", {
            fill: "none",
            strokeWidth: "10",
            strokeMiterlimit: "10",
            cx: "91.735",
            cy: "128.014",
            r: "64"
          }),
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points: "91.735,90.833 91.735,128.014 116.58,152.086 \t"
          })
        ),
        o.createElement(
          "g",
          { className: "arrow" },
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points: "199.735,63.66 199.735,192.366 171.207,163.675"
          }),
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points: "199.735,63.66 199.735,192.366 228.266,163.675"
          })
        ),
        o.createElement(
          "g",
          { className: "alphabet" },
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points: "70.268,109.934 94.483,63.635 119.77,109.934"
          }),
          o.createElement("line", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            x1: "77.458",
            y1: "97.861",
            x2: "112.135",
            y2: "97.861"
          }),
          o.createElement("polyline", {
            fill: "none",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "10",
            points:
              "70.045,145.379 119.547,145.379 70.045,192.032 119.547,192.032"
          })
        )
      );
    }
    function N() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Check",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polyline", {
          fill: "none",
          stroke: "#fff",
          strokeWidth: "24",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "49.5,147.75 95,210.75 206.5,45.25 "
        })
      );
    }
    function L() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_DialogCheck",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "defs",
          null,
          o.createElement(
            "linearGradient",
            { id: "linear", x1: "0%", y1: "0%", x2: "100%", y2: "100%" },
            o.createElement("stop", {
              id: "stop0",
              offset: "0%",
              stopColor: "#00ccff"
            }),
            o.createElement("stop", {
              id: "stop1",
              offset: "100%",
              stopColor: "#2d73ff"
            })
          ),
          o.createElement(
            "filter",
            { id: "f1", x: "0", y: "0", width: "200%", height: "200%" },
            o.createElement("feOffset", {
              result: "offOut",
              in: "SourceAlpha",
              dx: "20",
              dy: "20"
            }),
            o.createElement("feGaussianBlur", {
              result: "blurOut",
              in: "offOut",
              stdDeviation: "10"
            }),
            o.createElement("feBlend", {
              in: "SourceGraphic",
              in2: "blurOut",
              mode: "normal"
            })
          )
        ),
        o.createElement("path", {
          fill: "none",
          stroke: "url(#linear)",
          strokeWidth: "24",
          strokeLinecap: "round",
          strokeLinejoin: "miter",
          strokeMiterlimit: "10",
          d: "M206.5,45.25L95,210.75l-45.5-63",
          strokeDasharray: "365.19 365.19",
          strokeDashoffset: "0.00"
        }),
        o.createElement("path", {
          fill: "none",
          opacity: ".2",
          filter: "url(#f1)",
          stroke: "url(#linear)",
          strokeWidth: "24",
          strokeLinecap: "round",
          strokeLinejoin: "miter",
          strokeMiterlimit: "10",
          d: "M206.5,45.25L95,210.75l-45.5-63",
          strokeDasharray: "365.19 365.19",
          strokeDashoffset: "0.00"
        })
      );
    }
    function k() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Caution",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "triangle" },
          o.createElement("path", {
            stroke: "#020202",
            strokeWidth: "16",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            d: "M127.9,76.632"
          }),
          o.createElement("path", {
            fill: "none",
            stroke: "#020202",
            strokeWidth: "11",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            strokeMiterlimit: "5",
            d:
              "M128.001,226.606c42.507,0,81.538,0,87.756,0c31.222,0,36.95-14.974,24.045-34.771c-6.921-10.617-78.297-122.962-89.163-140.254\tC141.859,37.613,138.542,29.393,128,29.393l0,0c-10.543,0-13.86,8.222-22.639,22.189C94.495,68.874,23.119,181.219,16.198,191.836 c-12.905,19.797-7.175,34.771,24.045,34.771C46.463,226.606,85.494,226.606,128.001,226.606"
          }),
          o.createElement("path", { fill: "#020202", d: "M127.9,208.12" })
        ),
        o.createElement(
          "g",
          { className: "exclamation" },
          o.createElement("line", {
            fill: "none",
            stroke: "#020202",
            strokeWidth: "16",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            x1: "127.9",
            y1: "76.632",
            x2: "127.9",
            y2: "160.07"
          }),
          o.createElement("path", {
            fill: "#020202",
            d:
              "M127.9,208.12c-6.377,0-11.548-5.17-11.548-11.548c0-6.377,5.17-11.547,11.548-11.547 c6.377,0,11.547,5.17,11.547,11.547C139.447,202.95,134.277,208.12,127.9,208.12"
          })
        )
      );
    }
    function A() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Lock",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "topLock",
          d:
            "M203.553,197.794c0,21.929-17.778,39.706-39.706,39.706H92.154c-21.929,0-39.706-17.777-39.706-39.706v-71.693 c0-21.928,17.778-39.706,39.706-39.706h71.692c21.928,0,39.706,17.778,39.706,39.706V197.794z M128.001,129.664 c-8.941,0-16.19,7.248-16.19,16.189c0,5.589,2.833,10.518,7.137,13.427c2.066,1.395,0.318,23.508,0.318,32.842 c0,2.292-0.078,3.65,8.734,3.65c8.676,0,8.75-1.221,8.75-3.654c0-9.348-1.708-31.469,0.368-32.886 c4.269-2.916,7.071-7.821,7.071-13.38C144.191,136.912,136.941,129.664,128.001,129.664z"
        }),
        o.createElement("path", {
          className: "baseLock",
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "22",
          strokeMiterlimit: "10",
          d:
            "M84.813,172.74V73.688l0,0 c0-23.85,19.335-43.188,43.187-43.188l0,0c23.852,0,43.188,19.337,43.188,43.188l0,0v23.885"
        })
      );
    }
    function P(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className:
            "SVGIcon_Button SVGIcon_Throbber " + (e.className && e.className),
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { id: "partCircle" },
          o.createElement("path", {
            className: "roundOuter",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895"
          }),
          o.createElement("path", {
            className: "roundOuter",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d: "M201.432,101.166"
          }),
          o.createElement("path", {
            className: "roundOuter",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d: "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754"
          })
        ),
        o.createElement(
          "g",
          { id: "mainOutline" },
          o.createElement("path", {
            className: "roundFill",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundOuterOutline",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber01",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber02",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber03",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber04",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber05",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber06",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber07",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber08",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber09",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber10",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber11",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber12",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber13",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber14",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          }),
          o.createElement("path", {
            className: "roundThrobber15",
            strokeLinecap: "butt",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            d:
              "M127.82,23.895 c-54.686,0-99.487,42.167-103.745,95.754l55.797,23.069c4.729-3.231,10.44-5.122,16.584-5.122c0.551,0,1.098,0.014,1.642,0.047 l24.815-35.968c0-0.17-0.004-0.338-0.004-0.509c0-21.647,17.61-39.261,39.26-39.261s39.263,17.613,39.263,39.261 c0,21.65-17.611,39.264-39.263,39.264c-0.299,0-0.593-0.007-0.887-0.014l-35.392,25.251c0.018,0.462,0.035,0.931,0.035,1.396 c0,16.252-13.22,29.472-29.469,29.472c-14.265,0-26.19-10.185-28.892-23.666L27.66,156.37 c12.355,43.698,52.503,75.733,100.16,75.733c57.495,0,104.104-46.61,104.104-104.105S185.314,23.895,127.82,23.895z"
          })
        ),
        o.createElement(
          "g",
          { id: "bottomCircle" },
          o.createElement("path", {
            fill: "#ffffff",
            d:
              "M89.226,181.579L76.5,176.321c2.256,4.696,6.159,8.628,11.339,10.786 c11.197,4.668,24.11-0.647,28.779-11.854c2.259-5.425,2.274-11.405,0.033-16.841c-2.237-5.436-6.46-9.675-11.886-11.938 c-5.384-2.24-11.151-2.156-16.22-0.244l13.146,5.436c8.261,3.443,12.166,12.93,8.725,21.189 C106.976,181.115,97.486,185.022,89.226,181.579"
          })
        ),
        o.createElement(
          "g",
          { id: "topCircle" },
          o.createElement("circle", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "6",
            strokeMiterlimit: "10",
            cx: "161.731",
            cy: "101.274",
            r: "23.019"
          })
        )
      );
    }
    function F() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Video",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "videoPlayButton",
          d:
            "M165.399,124.063L109.118,92.06c-1.399-0.797-3.118-0.787-4.508,0.026c-1.39,0.805-2.25,2.295-2.25,3.905v64.008 c0,1.609,0.86,3.1,2.25,3.913c0.705,0.412,1.491,0.613,2.277,0.613c0.768,0,1.546-0.191,2.241-0.596l56.283-32.003 c1.416-0.806,2.285-2.306,2.285-3.934C167.694,126.368,166.816,124.869,165.399,124.063z"
        }),
        o.createElement("path", {
          d:
            "M238.069,40.646H214.25h-28.82h-28.82h-28.458h-0.36H99.333H70.536H41.727h-23.82c-3.184,0-5.773,2.59-5.773,5.772v23.856 v120.441v18.867c0,3.184,2.589,5.771,5.773,5.771h2.415h21.394h28.82h28.82h28.459h0.361h28.457h28.82h28.82h23.82 c3.184,0,5.773-2.589,5.773-5.771v-18.867V70.274V46.418C243.844,43.223,241.254,40.646,238.069,40.646z M191.215,47.181h17.273  V64.5h-17.273V47.181L191.215,47.181z M162.396,47.181h17.272V64.5h-17.272V47.181z M133.938,47.181h16.912V64.5h-16.912V47.181z\tM105.128,47.181h16.912V64.5h-16.912V47.181z M76.309,47.181h17.273V64.5H76.309V47.181z M47.488,47.181h17.273V64.5H47.488V47.181 z M18.681,47.181h17.273V64.5H18.681V47.181z M35.954,208.811H18.681v-17.319h17.273V208.811z M64.763,208.811H47.489v-17.319 h17.273V208.811L64.763,208.811z M93.583,208.811H76.31v-17.319h17.273V208.811z M122.041,208.811h-16.912v-17.319h16.912V208.811z M150.849,208.811h-16.912v-17.319h16.912V208.811z M179.668,208.811h-17.272v-17.319h17.272V208.811z M208.488,208.811h-17.273 v-17.319h17.273V208.811z M237.297,208.811h-17.273v-17.319h17.273V208.811L237.297,208.811z M237.297,184.943H214.25h-28.819 h-28.82h-28.458h-0.361H99.333H70.537H41.728H18.682V71.047h23.046h28.82h28.82h28.458h0.36h28.458h28.82h28.82h23.045v113.896 H237.297z M237.297,64.5h-17.273V47.181h17.273V64.5L237.297,64.5z"
        })
      );
    }
    function B() {
      return o.createElement(
        "svg",
        {
          xmlns: "http://www.w3.org/2000/svg",
          version: "1.1",
          className: "SVGIcon_Button SVGIcon_Image",
          x: "0px",
          y: "0px",
          viewBox: "0 0 100 100",
          enableBackground: "new 0 0 100 100"
        },
        o.createElement("path", {
          stroke: "#ffffff",
          fill: "#ffffff",
          d:
            "M83.086,12.091H16.913C10.344,12.091,5,17.435,5,24.004v51.992l0.005,0.102c0.056,6.514,5.396,11.813,11.908,11.813h66.173  c6.531,0,11.874-5.314,11.906-11.764L95,24.004C95,17.435,89.654,12.091,83.086,12.091z M83.086,82.989H16.913  c-3.516,0-6.488-2.653-6.93-6.106l18.899-20.615c1.226-1.34,2.85-2.076,4.574-2.076c1.723,0,3.347,0.736,4.574,2.078l19.611,21.393  c0.885,0.961,2.508,1.029,3.473,0.148c1-0.916,1.068-2.476,0.152-3.478l-4.113-4.485l8.406-8.918  c1.258-1.332,2.926-2.064,4.696-2.064c1.772,0,3.44,0.732,4.696,2.064l15.061,15.973C89.564,80.346,86.594,82.989,83.086,82.989z   M90.08,69.801L78.532,57.555c-2.194-2.328-5.132-3.609-8.275-3.609c-3.142,0-6.08,1.281-8.272,3.609l-8.164,8.656l-12.162-13.27  c-2.171-2.366-5.084-3.67-8.201-3.67c-3.119,0-6.031,1.304-8.202,3.67L9.92,69.673V24.004c0-3.856,3.137-6.994,6.993-6.994h66.173  c3.857,0,6.994,3.137,6.994,6.994V69.801z"
        }),
        o.createElement("path", {
          stroke: "#ffffff",
          fill: "#ffffff",
          d:
            "M68.907,22.489c-6.569,0-11.914,5.344-11.914,11.914c0,6.569,5.345,11.913,11.914,11.913  c6.567,0,11.913-5.344,11.913-11.913C80.82,27.833,75.477,22.489,68.907,22.489z M68.907,41.396c-3.856,0-6.993-3.137-6.993-6.993  s3.137-6.994,6.993-6.994c3.854,0,6.991,3.138,6.991,6.994S72.764,41.396,68.907,41.396z"
        })
      );
    }
    function V() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Bell",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          d:
            "M107.785,33.965c-34.875,8.972-60.644,40.618-60.644,78.308v53.903c0,4.965-4.035,8.99-8.975,8.99 c-9.929,0-17.978,8.066-17.978,17.971c0,9.924,8.059,17.969,18.013,17.969h179.598c9.948,0,18.014-8.066,18.014-17.969 c0-9.926-8.087-17.971-17.979-17.971c-4.956,0-8.975-3.993-8.975-8.99v-53.903c0-37.676-25.763-69.333-60.644-78.308v-9.281 c0-11.193-9.052-20.219-20.215-20.219c-11.143,0-20.215,9.052-20.215,20.219V33.965L107.785,33.965z M96.554,220.09h62.891 c0,17.366-14.079,31.445-31.445,31.445C110.633,251.535,96.554,237.458,96.554,220.09z"
        })
      );
    }
    function x(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          transform: "rotate(" + e.angle + ")",
          id: "arrowBase",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Arrow",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polyline", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "10",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "128,247.688 128,8.313 181.061,61.674 "
        }),
        o.createElement("polyline", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "10",
          strokeLinecap: "round",
          strokeLinejoin: "round",
          strokeMiterlimit: "10",
          points: "128,247.688 128,8.313 74.939,61.674 "
        })
      );
    }
    function U(e) {
      var t = "";
      return (
        e.angle && (t = "rotate(" + e.angle + ")"),
        o.createElement(
          "svg",
          {
            transform: t,
            version: "1.1",
            id: "arrowBase",
            xmlns: "http://www.w3.org/2000/svg",
            className: "SVGIcon_Button SVGIcon_DoubleArrow",
            x: "0px",
            y: "0px",
            width: "256px",
            height: "256px",
            viewBox: "0 0 256 256"
          },
          o.createElement("polyline", {
            className: "Arrow1",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "23",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points: "135.65,21.667 30.081,127.235 137.18,234.333 "
          }),
          o.createElement("polyline", {
            className: "Arrow2",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "23",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points: "224.389,21.667 118.821,127.235 225.92,234.333 "
          })
        )
      );
    }
    function j() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "arrowBase",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_DoubleArrow",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polyline", {
          className: "Arrow1",
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "23",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          points: "135.65,21.667 30.081,127.235 137.18,234.333 "
        }),
        o.createElement("polyline", {
          className: "Arrow2",
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "23",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          points: "224.389,21.667 118.821,127.235 225.92,234.333 "
        })
      );
    }
    function H() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Maximize",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("rect", {
          x: "24",
          y: "42.167",
          fill: "none",
          stroke: "rgb(120, 138, 146)",
          strokeWidth: "18",
          strokeMiterlimit: "10",
          width: "208",
          height: "171.667"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "rgb(120, 138, 146)",
          strokeWidth: "42",
          strokeMiterlimit: "10",
          x1: "24",
          y1: "54.01",
          x2: "232",
          y2: "54.01"
        })
      );
    }
    function W() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Minimize",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("line", {
          fill: "none",
          stroke: "rgb(120, 138, 146)",
          strokeWidth: "18",
          strokeMiterlimit: "10",
          x1: "24",
          y1: "209.01",
          x2: "232",
          y2: "209.01"
        })
      );
    }
    function z() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_2",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Restore",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polyline", {
          fill: "none",
          stroke: "rgb(120, 138, 146)",
          strokeWidth: "12",
          strokeMiterlimit: "10",
          points: "83,90.861 83,42.167 232,42.167 232,165.14 173,165.14 "
        }),
        o.createElement("rect", {
          x: "24",
          y: "90.861",
          fill: "none",
          stroke: "rgb(120, 138, 146)",
          strokeWidth: "18",
          strokeMiterlimit: "10",
          width: "149",
          height: "122.973"
        })
      );
    }
    function q() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_SingleWindowToggle",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "mainBox" },
          o.createElement("rect", {
            x: "90",
            y: "42.167",
            fill: "none",
            stroke: "rgb(120, 138, 146)",
            strokeWidth: "18",
            strokeMiterlimit: "10",
            width: "142",
            height: "171.667"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "rgb(120, 138, 146)",
            strokeWidth: "42",
            strokeMiterlimit: "10",
            x1: "90",
            y1: "54.01",
            x2: "232",
            y2: "54.01"
          })
        ),
        o.createElement(
          "g",
          { className: "leftBox" },
          o.createElement("rect", {
            x: "28",
            y: "42.167",
            fill: "none",
            stroke: "rgb(120, 138, 146)",
            strokeWidth: "18",
            strokeMiterlimit: "10",
            width: "62",
            height: "171.667"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "rgb(120, 138, 146)",
            strokeWidth: "42",
            strokeMiterlimit: "10",
            x1: "28",
            y1: "54.01",
            x2: "90",
            y2: "54.01"
          })
        )
      );
    }
    function K() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_2",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Reload",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "30",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          d:
            "M229.809,147.639 c-9.178,47.863-51.27,84.027-101.809,84.027c-57.253,0-103.667-46.412-103.667-103.666S70.747,24.334,128,24.334 c34.107,0,64.368,16.472,83.261,41.895"
        }),
        o.createElement("polygon", {
          points: "147.639,108.361 245.755,10.166 245.834,108.361 "
        })
      );
    }
    function Y() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_2",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Trade",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          d:
            "M132.025,162.943h40.246c0,0,3.219,56.879-31.303,79.599c-12.298,8.094,71.103-6.708,75.574-79.599h35.775l-60.146-74.681 L132.025,162.943z"
        }),
        o.createElement("path", {
          d:
            "M123.975,93.056H83.729c0,0-3.219-56.879,31.303-79.599c12.298-8.094-71.103,6.708-75.574,79.599H3.682l60.146,74.681 L123.975,93.056z"
        })
      );
    }
    function J() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Trash",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "base" },
          o.createElement("path", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d:
              "M216.773,43.909 l-7.399,177.589c-0.37,8.893-7.919,16.1-16.812,16.1H63.437c-8.914,0-16.442-7.24-16.812-16.1L39.226,43.909"
          })
        ),
        o.createElement(
          "g",
          { className: "lines" },
          o.createElement("path", {
            className: "line1",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M128,68.12v137.197"
          }),
          o.createElement("path", {
            className: "line2",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M83.613,68.12 l4.035,137.197"
          }),
          o.createElement("path", {
            className: "line3",
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M172.387,68.12 l-4.035,137.197"
          })
        ),
        o.createElement(
          "g",
          { className: "lid" },
          o.createElement("path", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M27.121,38.577H228.88"
          }),
          o.createElement("path", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            d:
              "M87.648,38.577l4.319-10.796c2.072-5.181,8.292-9.379,13.84-9.379h44.386 c5.572,0,11.761,4.18,13.841,9.379l4.319,10.796"
          })
        )
      );
    }
    function X() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Scroll",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { transform: "translate(0,-952.36215)" },
          o.createElement("path", {
            d:
              "M49.624,963.362c-20.72,0-37.667,14.78-37.667,32.806c0,3.589,3.353,6.499,7.486,6.499l52.407-0.305v162.5 c0,18.134,17.404,32.5,38.018,32.5h96.508c20.612,0,37.667-14.475,37.667-32.5c0-3.59-3.354-6.499-7.486-6.5H217.84V996.168 c0-18.024-16.947-32.806-37.667-32.806H49.624z M49.624,976.362h2.223c0.569,0.162,1.158,0.265,1.754,0.306 c8.159,1.274,14.426,6.085,16.962,12.694l-42.112,0.306C31.513,981.897,39.656,976.362,49.624,976.362z M79.337,976.362h100.836 c12.587,0,22.694,8.77,22.694,19.806v162.194H139.23c-4.135,0.001-7.486,2.91-7.488,6.5c0,4.609-1.43,7.796-4.21,10.765 c-2.78,2.972-7.203,5.757-13.686,7.923c-0.624,0.201-1.214,0.476-1.755,0.813h-2.223c-12.695,0-23.044-8.573-23.044-19.5v-169 C86.824,988.529,84.023,981.812,79.337,976.362z M108.582,1005.611c-4.135,0.169-7.33,3.216-7.135,6.807 c0.193,3.59,3.702,6.363,7.837,6.194h71.123c4.135,0.051,7.535-2.817,7.592-6.407c0.059-3.591-3.246-6.542-7.381-6.594 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1005.603,108.816,1005.603,108.582,1005.611z M108.582,1044.612 c-4.135,0.169-7.33,3.215-7.135,6.807c0.193,3.588,3.702,6.362,7.837,6.192h71.123c4.135,0.051,7.535-2.816,7.592-6.407 c0.059-3.59-3.246-6.542-7.381-6.592c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1044.603,108.816,1044.603,108.582,1044.612z M108.582,1083.612c-4.135,0.169-7.33,3.216-7.135,6.806c0.193,3.589,3.702,6.363,7.837,6.193h71.123 c4.135,0.052,7.535-2.816,7.592-6.407c0.059-3.59-3.246-6.541-7.381-6.592c-0.069-0.001-0.141-0.001-0.211,0h-71.123 C109.05,1083.602,108.816,1083.602,108.582,1083.612z M108.582,1122.611c-4.135,0.17-7.33,3.216-7.135,6.806 c0.193,3.591,3.702,6.364,7.837,6.195h71.123c4.135,0.05,7.535-2.818,7.592-6.408c0.059-3.591-3.246-6.541-7.381-6.593 c-0.069,0-0.141,0-0.211,0h-71.123C109.05,1122.602,108.816,1122.602,108.582,1122.611z M145.547,1171.363h82.002 c-3.09,7.604-11.189,12.999-21.173,12.999h-67.849c0.196-0.197,0.512-0.306,0.703-0.509 C142.576,1180.277,144.436,1175.973,145.547,1171.363z"
          })
        )
      );
    }
    function Q(e) {
      return o.createElement(
        "svg",
        {
          transform: "rotate(" + e.angle + ")",
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_FlatArrow",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polygon", {
          points: "13.913,141 128,59 242.087,141 ",
          fill: "#ffffff"
        })
      );
    }
    function Z(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className:
            "SVGIcon_Button SVGIcon_FriendIcon" +
            (e.bPending ? " SVGIcon_FriendIcon_Pending" : ""),
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "outline" },
          o.createElement(
            "g",
            { transform: "matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)" },
            o.createElement("path", {
              d:
                "M102.239,90.394c-22.556,0-40.906-18.351-40.906-40.906c0-22.556,18.35-40.906,40.906-40.906s40.906,18.35,40.906,40.906 C143.145,72.043,124.795,90.394,102.239,90.394z"
            })
          ),
          o.createElement("path", {
            d:
              "M127.453,250.212c-30.208,0-52.086-4.188-65.028-12.45c-12.507-7.983-13.141-17.484-13.141-19.308v-41.781 c0-20.554,5.356-38.104,15.489-50.754c11.63-14.519,29.216-22.193,50.858-22.194h23.646c21.643,0,39.229,7.674,50.858,22.193 c10.133,12.65,15.488,30.201,15.488,50.754v41.751c0.011,2.202-0.586,8.058-6.43,14.175 c-11.164,11.687-35.301,17.613-71.732,17.613C127.458,250.212,127.458,250.212,127.453,250.212z"
          }),
          o.createElement("path", {
            className: "WavingArm",
            opacity: e.bPending ? "1" : "0",
            d:
              "M87.625,170.102c-5.877,0-14.85-1.804-24.219-10.4c-8.677-7.961-20.959-20.438-30.563-31.048 c-18.766-20.732-21.125-26.658-19.522-32.832c1.463-5.64,10.288-27.077,26.729-28.926c0.429-0.048,0.867-0.072,1.303-0.072 c7.609,0,14.543,6.335,38.063,31.516c7.141,7.645,14.524,15.549,18.002,18.33l0.803,0.641c5.551,4.432,11.291,9.015,15.104,14.136 c8.477,11.383,3.634,20.705,1.158,24.185C108.034,164.692,97.995,170.102,87.625,170.102z"
          })
        ),
        o.createElement(
          "g",
          { className: "foreground" },
          o.createElement(
            "g",
            { transform: "matrix(1.34048,0,0,1.34048,-10.0942,-5.50445)" },
            o.createElement("circle", {
              fill: "#FFFFFF",
              cx: "102.239",
              cy: "49.488",
              r: "33.446"
            })
          ),
          o.createElement("path", {
            fill: "#FFFFFF",
            d:
              "M195.624,218.454v-41.781c0-34.743-16.666-62.948-56.347-62.948h-11.822h-0.997h-10.826 c-39.68,0.001-56.348,28.205-56.348,62.948v41.781c0,0,0,21.758,68.169,21.758C196.62,240.214,195.624,218.454,195.624,218.454z"
          }),
          o.createElement("path", {
            className: "WavingArm",
            opacity: e.bPending ? "1" : "0",
            d:
              "M41.167,76.833c6.53-0.734,39.348,39.127,50.007,47.647c10.659,8.52,21.327,16.686,15.16,25.353 s-20.646,16.74-36.167,2.5 s-48.516-48.801-47.167-54S31.599,77.909,41.167,76.833z"
          })
        )
      );
    }
    function $() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "base",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_YouTube",
          x: "0px",
          y: "0px",
          width: "71.412px",
          height: "50px",
          viewBox: "0 0 71.412 50"
        },
        o.createElement(
          "g",
          { id: "g5", transform: "scale(0.58823529,0.58823529)" },
          o.createElement("path", {
            id: "path7",
            fill: "#ff0000",
            d:
              "M118.9,13.3c-1.4-5.2-5.5-9.3-10.7-10.701C98.7,0,60.7,0,60.7,0 s-38,0-47.5,2.5C8.1,3.9,3.9,8.1,2.5,13.3C0,22.8,0,42.5,0,42.5s0,19.799,2.5,29.199C3.9,76.9,8,80.999,13.2,82.4 C22.8,85,60.7,85,60.7,85s37.999,0,47.5-2.5c5.2-1.399,9.3-5.5,10.7-10.7c2.499-9.501,2.499-29.201,2.499-29.201 S121.5,22.8,118.9,13.3z"
          }),
          o.createElement("polygon", {
            id: "polygon9",
            fill: "#ffffff",
            points: "80.201,42.5 48.6,24.3 48.6,60.7"
          })
        )
      );
    }
    function ee() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_DoNotDisturb",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("circle", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "24",
          strokeMiterlimit: "10",
          cx: "128",
          cy: "128",
          r: "101.5"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "24",
          strokeMiterlimit: "10",
          x1: "73",
          y1: "128",
          x2: "183",
          y2: "128"
        })
      );
    }
    function te(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          transform: e.bFlipHorizontal ? "scale(-1 1)" : "scale(1 1)",
          className: "SVGIcon_Button SVGIcon_MediaControls",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "Arrow",
          d:
            "M77.003,54.763h32.784c3.794,0,9.113,2.181,11.814,4.848l63.604,62.773c2.703,2.667,2.727,7.054,0.05,9.748 l-63.705,64.206c-2.674,2.693-7.968,4.898-11.763,4.898H77.003"
        }),
        o.createElement("polyline", {
          className: "preArrowBox",
          opacity: e.bHidePreArrow ? "0" : "1",
          points: "6.833,54.763 46.71,54.763 46.71,201.236 6.833,201.236 \t"
        }),
        o.createElement("polyline", {
          className: "jumpAheadBox",
          opacity: e.bShowJumpAheadBox ? "1" : "0",
          points: "6.833,54.764 86.386,54.764 86.386,201.236 6.833,201.236 \t"
        }),
        o.createElement("polyline", {
          className: "postArrowBox",
          opacity: e.bHidePostArrow ? "0" : "1",
          points:
            "209.29,54.763 249.167,54.763 249.167,201.236 209.29,201.236 \t"
        })
      );
    }
    function ne() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_SteamTV",
          x: "0px",
          y: "0px",
          width: "1024px",
          height: "256px",
          viewBox: "0 0 1024 256"
        },
        o.createElement(
          "defs",
          null,
          o.createElement(
            "linearGradient",
            { id: "gradient", x1: "0%", y1: "0%", x2: "100%", y2: "0%" },
            o.createElement("stop", {
              offset: "0%",
              stopColor: "rgb(55, 102, 251)"
            }),
            o.createElement("stop", {
              offset: "100%",
              stopColor: "rgb(91, 106, 219)"
            })
          ),
          o.createElement(
            "linearGradient",
            { id: "gradientText", x1: "0%", y1: "0%", x2: "100%", y2: "0%" },
            o.createElement("stop", {
              offset: "0%",
              stopColor: "rgb(91, 106, 219)"
            }),
            o.createElement("stop", {
              offset: "100%",
              stopColor: "rgb(125, 110, 188)"
            })
          )
        ),
        o.createElement("circle", {
          className: "logoBG",
          opacity: "0",
          fill: "#000000",
          cx: "156.586",
          cy: "128",
          r: "125.914"
        }),
        o.createElement(
          "g",
          { id: "logo" },
          o.createElement("path", {
            fill: "url(#gradient)",
            d:
              "M156.374,5.355c-64.404,0-117.167,49.661-122.18,112.77l65.712,27.171 c5.567-3.808,12.293-6.032,19.53-6.032c0.649,0,1.294,0.016,1.934,0.051l29.226-42.355c0-0.202-0.005-0.399-0.005-0.598 c0-25.496,20.74-46.241,46.237-46.241c25.498,0,46.239,20.745,46.239,46.241c0,25.494-20.741,46.241-46.239,46.241 c-0.352,0-0.698-0.01-1.047-0.021l-41.68,29.741c0.022,0.546,0.041,1.095,0.041,1.644c0,19.14-15.569,34.707-34.706,34.707 c-16.796,0-30.843-11.991-34.026-27.87l-46.993-19.429c14.55,51.464,61.831,89.19,117.957,89.19 c67.713,0,122.605-54.893,122.605-122.604C278.978,60.244,224.086,5.355,156.374,5.355"
          }),
          o.createElement("path", {
            fill: "rgb(67, 104, 241)",
            d:
              "M111.026,191.387l-15.061-6.22c2.67,5.56,7.285,10.208,13.418,12.767 c13.25,5.521,28.531-0.771,34.054-14.028c2.674-6.416,2.694-13.5,0.04-19.929c-2.646-6.431-7.64-11.451-14.063-14.129 c-6.371-2.648-13.196-2.552-19.198-0.291l15.561,6.436c9.776,4.074,14.396,15.299,10.324,25.072 C132.031,190.841,120.801,195.464,111.026,191.387"
          }),
          o.createElement("path", {
            fill: "rgb(79, 105, 230)",
            d:
              "M227.639,96.359c0-16.987-13.82-30.809-30.809-30.809c-16.987,0-30.812,13.821-30.812,30.809 c0,16.988,13.824,30.806,30.812,30.806C213.818,127.165,227.639,113.347,227.639,96.359 M173.736,96.306 c0-12.783,10.364-23.142,23.145-23.142c12.783,0,23.145,10.359,23.145,23.142c0,12.783-10.361,23.142-23.145,23.142 C184.1,119.447,173.736,109.089,173.736,96.306"
          })
        ),
        o.createElement(
          "g",
          { id: "steam" },
          o.createElement("path", {
            fill: "rgb(92, 106, 218)",
            d:
              "M404.52,91.9l-7.968,14.006c-6.138-4.287-14.455-6.862-21.717-6.862c-8.299,0-13.437,3.43-13.437,9.586 c0,7.473,9.124,9.212,22.682,14.082c14.574,5.149,22.948,11.21,22.948,24.558c0,18.264-14.359,28.519-34.998,28.519 c-10.063,0-22.195-2.595-31.53-8.265l5.815-15.539c7.579,4.008,16.644,6.381,24.722,6.381c10.897,0,16.071-4.021,16.071-9.96 c0-6.802-7.893-8.843-20.641-13.06c-14.521-4.856-24.586-11.213-24.586-25.992c0-16.658,13.34-26.225,32.538-26.225 C387.797,83.128,398.551,87.367,404.52,91.9"
          }),
          o.createElement("polygon", {
            fill: "rgb(99, 107, 211)",
            points:
              "468.163,100.753 468.163,174.252 449.402,174.252 449.402,100.753 422.166,100.753 422.166,84.663 495.315,84.663 495.315,100.753 \t"
          }),
          o.createElement("polygon", {
            fill: "rgb(108, 108, 203)",
            points:
              "533.512,100.706 533.512,120.896 569.417,120.896 569.417,136.982 533.512,136.982 533.512,158.014 575.173,158.014 575.173,174.253 514.757,174.253 514.757,84.665 575.173,84.665 575.173,100.706"
          }),
          o.createElement("path", {
            fill: "rgb(117, 109, 195)",
            d:
              "M617.054,156.857l-5.932,17.396h-19.67l33.593-89.594h18.888l34.539,89.594h-20.336l-6.061-17.396H617.054z M634.378,106.035l-12.23,35.87h24.723L634.378,106.035z"
          }),
          o.createElement("polygon", {
            fill: "rgb(125, 110, 188)",
            points:
              "773.403,119.291 748.888,171.645 738.302,171.645 714.182,119.758 714.182,174.253 696.212,174.253 696.212,84.665 714.138,84.665 744.251,149.33 773.285,84.665 791.374,84.665 791.374,174.253 773.406,174.253"
          })
        ),
        o.createElement(
          "g",
          { id: "tv" },
          o.createElement("polygon", {
            fill: "rgb(125, 110, 188)",
            points:
              "853.961,92.664 823.506,92.664 823.506,84.147 893.835,84.147 893.835,92.664 863.51,92.664 863.51,174.479 853.961,174.479"
          }),
          o.createElement("polygon", {
            fill: "rgb(125, 110, 188)",
            points:
              "909.835,84.147 920.286,84.147 950.612,165.831 980.033,84.147 990.487,84.147 956.421,174.479 944.159,174.479"
          })
        )
      );
    }
    function oe() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_Viewers",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("path", {
          className: "frontGuy",
          fill: "#666666",
          d:
            "M181.732,53.151c-17.255,0-31.321,13.316-31.321,32.634v25.132 c0,18.005,24.006,21.006,24.382,21.381c-10.691,2.813-30.947,8.252-40.888,15.566c-8.252,6.003-11.44,18.005-13.128,22.882 c-0.75,2.063-1.688,5.064-1.688,7.127c0,0,0,9.94,0,19.881s12.941,16.505,18.005,16.505h89.65c4.877,0,18.006-5.627,18.006-16.505 s0-19.881,0-19.881c0-2.251-0.938-5.627-1.688-7.689c-4.313-10.878-4.688-16.316-13.315-22.319 c-9.941-6.939-30.009-12.19-40.512-15.004c0.374-0.563,24.193-4.127,24.193-22.131V85.785 C213.053,66.467,198.986,53.151,181.732,53.151L181.732,53.151z"
        }),
        o.createElement("path", {
          className: "backGuy",
          fill: "rgb(144, 153, 161)",
          d:
            "M84.204,34.396c-20.068,0-36.385,15.38-36.385,38.074v29.258c0,20.818,27.945,24.382,28.32,24.944 c-12.378,3.189-36.01,9.565-47.638,18.006c-9.753,7.127-13.504,21.006-15.379,26.632c-0.75,2.251-1.876,6.002-1.876,8.253  c0,0,0,11.44,0,23.257c0,11.815,15.004,19.13,20.819,19.13h104.279c5.814,0,20.818-6.564,20.818-19.13c0-12.566,0-23.257,0-23.257 c0-2.438-1.125-6.564-2.063-8.815c-5.063-12.566-5.438-18.942-15.566-26.069c-11.628-8.065-34.885-14.067-47.076-17.443 c0.375-0.563,28.133-4.876,28.133-25.695V72.469C120.59,49.775,104.272,34.396,84.204,34.396L84.204,34.396z"
        })
      );
    }
    function ie() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_5",
          className: "SVGIcon_Button SVGIcon_Globe",
          xmlns: "http://www.w3.org/2000/svg",
          x: "0px",
          y: "0px",
          viewBox: "0 0 64 64"
        },
        o.createElement(
          "g",
          null,
          o.createElement("path", {
            d:
              "M32.5,5C17.9,5,6,16.9,6,31.5C6,46.1,17.9,58,32.5,58S59,46.1,59,31.5C59,16.9,47.1,5,32.5,5 M32.5,54.7c-1.2,0-2.5-0.1-3.7-0.3c-1.1-1.1-2.1-2.8-3-4.8c-0.8-1.8-1.4-3.8-2-6c2.7-0.3,5.6-0.5,8.6-0.5c3,0,5.9,0.2,8.6,0.5c-0.5,2.2-1.2,4.2-2,6c-0.9,2-1.9,3.7-3,4.8C35,54.6,33.7,54.7,32.5,54.7 M32.5,41.4c-3.2,0-6.2,0.2-9,0.5c-0.6-3-0.9-6.2-1-9.6h19.9c0,3.4-0.4,6.6-1,9.6C38.7,41.6,35.7,41.4,32.5,41.4 M32.5,8.3c1.2,0,2.5,0.1,3.7,0.3c1.1,1.1,2.1,2.8,3,4.8c0.8,1.8,1.4,3.8,2,6c-2.7,0.3-5.6,0.5-8.6,0.5c-3,0-5.9-0.2-8.6-0.5c0.5-2.2,1.2-4.2,2-6c0.9-2,1.9-3.7,3-4.8C30,8.4,31.3,8.3,32.5,8.3 M32.5,21.6c3.2,0,6.2-0.2,9-0.5c0.6,3,0.9,6.2,1,9.6H22.6c0-3.4,0.4-6.6,1-9.6C26.3,21.4,29.3,21.6,32.5,21.6 M44.1,30.7c0-3.5-0.4-6.8-1-9.8c3.4-0.5,6.4-1.1,8.8-2c2.3,3.5,3.6,7.5,3.7,11.8H44.1z M20.9,30.7H9.3c0.1-4.2,1.4-8.3,3.7-11.8c2.5,0.8,5.5,1.5,8.8,2C21.3,23.9,21,27.2,20.9,30.7 M20.9,32.3c0,3.5,0.4,6.8,1,9.8c-3.4,0.5-6.4,1.1-8.8,2c-2.3-3.5-3.6-7.5-3.7-11.8H20.9z M44.1,32.3h11.6c-0.1,4.2-1.4,8.3-3.7,11.8c-2.5-0.8-5.5-1.5-8.8-2C43.7,39.1,44,35.8,44.1,32.3 M51,17.5c-0.1,0-0.2,0.1-0.3,0.1c-2.3,0.7-5,1.3-7.9,1.7c-0.9-4.1-2.3-7.6-4-10.1c3.8,1.1,7.3,3.1,10.2,5.9C49.6,15.9,50.3,16.6,51,17.5 M26.3,9.2c-1.7,2.5-3.1,6-4,10.1c-2.9-0.4-5.6-1-7.9-1.7c-0.1,0-0.2-0.1-0.3-0.1c0.6-0.8,1.3-1.6,2.1-2.4C19,12.2,22.5,10.2,26.3,9.2 M14,45.5c0.1,0,0.2-0.1,0.3-0.1c2.3-0.7,5-1.3,7.9-1.7c0.9,4.1,2.3,7.6,4,10.1c-3.8-1.1-7.3-3.1-10.2-5.9C15.4,47.1,14.7,46.4,14,45.5 M38.7,53.8c1.7-2.5,3.1-6,4-10.1c2.9,0.4,5.6,1,7.9,1.7c0.1,0,0.2,0.1,0.3,0.1c-0.6,0.8-1.3,1.6-2.1,2.4C46,50.8,42.5,52.8,38.7,53.8"
          })
        )
      );
    }
    function re() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_STVTimelineGrabber",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { className: "leftarrow", opacity: "0" },
          o.createElement("polygon", {
            points: "127.817,4.403 4,128 127.817,251.598"
          })
        ),
        o.createElement(
          "g",
          { className: "rightarrow", opacity: "0" },
          o.createElement("polygon", {
            points: "127.816,4.403 251.633,128 127.816,251.598"
          })
        ),
        o.createElement(
          "g",
          { className: "grabber" },
          o.createElement("polygon", {
            points:
              "145.692,22.132 145.692,234.361 127.817,251.598 110.307,234.361 110.307,22.132 127.817,4.403"
          })
        )
      );
    }
    function ae() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_STVTimelineMarker",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("polygon", {
          className: "pointer",
          points:
            "128,154.979 46.374,230.548 46.374,253.333 209.626,253.333 209.626,230.548 \t"
        }),
        o.createElement("rect", {
          className: "line",
          x: "116.271",
          y: "3.168",
          width: "23.459",
          height: "137.332"
        })
      );
    }
    function se(e) {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_HideShowChat",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement(
          "g",
          { id: "hidechat", opacity: e.showChat ? "0" : "1" },
          ">",
          o.createElement("polyline", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points:
              "156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011"
          }),
          o.createElement("polyline", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points: "109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            x1: "49.786",
            y1: "15.012",
            x2: "214.409",
            y2: "233.723"
          })
        ),
        o.createElement(
          "g",
          { id: "showchat", opacity: e.showChat ? "1" : "0" },
          o.createElement("polygon", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points:
              "116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 225.299,59.011 225.299,189.834"
          })
        ),
        o.createElement(
          "g",
          { id: "textlines", opacity: e.showChat ? "1" : "0" },
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeMiterlimit: "10",
            x1: "72.333",
            y1: "124.75",
            x2: "194.167",
            y2: "124.75"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeMiterlimit: "10",
            x1: "72.333",
            y1: "155.75",
            x2: "194.167",
            y2: "155.75"
          }),
          o.createElement("line", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeMiterlimit: "10",
            x1: "72.333",
            y1: "93.75",
            x2: "179.926",
            y2: "93.75"
          }),
          o.createElement("polyline", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points:
              "156.001,189.834 116.375,189.834 67.31,222.538 67.31,189.834 39.834,189.834 39.834,59.011 59.25,59.011 "
          }),
          o.createElement("polyline", {
            fill: "none",
            stroke: "#ffffff",
            strokeWidth: "10",
            strokeLinecap: "round",
            strokeMiterlimit: "10",
            points: "109.427,59.011 225.299,59.011 225.299,189.834 207,189.834"
          })
        )
      );
    }
    function ce() {
      return o.createElement(
        "svg",
        {
          version: "1.1",
          id: "Layer_1",
          xmlns: "http://www.w3.org/2000/svg",
          className: "SVGIcon_Button SVGIcon_ShowBothChats",
          x: "0px",
          y: "0px",
          width: "256px",
          height: "256px",
          viewBox: "0 0 256 256"
        },
        o.createElement("circle", {
          opacity: "0",
          fill: "#FFFFFF",
          strokeWidth: "0",
          cx: "166.241",
          cy: "161.906",
          r: "75.259"
        }),
        o.createElement("polyline", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "8",
          strokeLinecap: "round",
          strokeMiterlimit: "10",
          points:
            "92.367,155.634 51.311,183 51.311,150.296 23.834,150.296 23.834,19.473 140.5,19.473 140.5,91.5"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "8",
          strokeMiterlimit: "10",
          x1: "48.529",
          y1: "82.167",
          x2: "113.379",
          y2: "82.167"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "8",
          strokeMiterlimit: "10",
          x1: "48.529",
          y1: "113.167",
          x2: "113.379",
          y2: "113.167"
        }),
        o.createElement("line", {
          fill: "none",
          stroke: "#ffffff",
          strokeWidth: "8",
          strokeMiterlimit: "10",
          x1: "48.529",
          y1: "51.167",
          x2: "99.138",
          y2: "51.167"
        }),
        o.createElement("path", {
          d:
            "M166.241,82.167c-43.933,0-79.74,35.807-79.74,79.74c0,43.932,35.808,79.739,79.74,79.739 c43.932,0,79.739-35.808,79.739-79.739C245.98,117.975,210.173,82.167,166.241,82.167 M166.241,231.717 c-3.611,0-7.522-0.301-11.134-0.902c-3.31-3.311-6.318-8.426-9.027-14.444c-2.407-5.416-4.212-11.434-6.018-18.054  8.124-0.902,16.851-1.505,25.878-1.505c9.026,0,17.753,0.603,25.877,1.505c-1.504,6.62-3.61,12.638-6.018,18.054 c-2.708,6.019-5.718,11.134-9.027,14.444C173.764,231.416,169.852,231.717,166.241,231.717 M166.241,191.696 c-9.629,0-18.656,0.602-27.082,1.505c-1.805-9.027-2.708-18.656-3.009-28.887h59.88c0,10.23-1.203,19.859-3.009,28.887 C184.896,192.298,175.87,191.696,166.241,191.696 M166.241,92.097c3.61,0,7.522,0.301,11.133,0.903 c3.311,3.31,6.319,8.425,9.027,14.443c2.407,5.416,4.213,11.435,6.019,18.055c-8.125,0.902-16.851,1.504-25.878,1.504  s-17.753-0.602-25.878-1.504c1.505-6.62,3.611-12.639,6.019-18.055c2.708-6.018,5.717-11.133,9.026-14.443 \tC158.719,92.398,162.63,92.097,166.241,92.097 M166.241,132.117c9.629,0,18.655-0.602,27.081-1.504 \tc1.806,9.026,2.708,18.655,3.009,28.887h-59.88c0-10.231,1.204-19.86,3.01-28.887 \tC147.585,131.516,156.612,132.117,166.241,132.117 M201.146,159.5c0-10.532-1.203-20.462-3.009-29.488 c10.23-1.505,19.258-3.311,26.479-6.019c6.921,10.531,10.833,22.567,11.134,35.507H201.146z M131.336,159.5H96.432 c0.301-12.639,4.212-24.976,11.133-35.507c7.522,2.407,16.55,4.514,26.479,6.019C132.54,139.038,131.637,148.968,131.336,159.5 M131.336,164.314c0,10.531,1.204,20.461,3.01,29.488c-10.231,1.505-19.259,3.31-26.48,6.018 c-6.921-10.531-10.832-22.567-11.133-35.506H131.336z M201.146,164.314h34.905c-0.301,12.638-4.213,24.975-11.134,35.506 c-7.522-2.406-16.55-4.513-26.479-6.018C199.942,184.775,200.845,174.846,201.146,164.314 M221.908,119.78 c-0.301,0-0.602,0.301-0.903,0.301c-6.92,2.106-15.045,3.912-23.771,5.115c-2.708-12.337-6.921-22.868-12.036-30.391 c11.434,3.31,21.966,9.328,30.691,17.753C217.695,114.966,219.802,117.072,221.908,119.78 M147.585,94.806 c-5.115,7.522-9.328,18.054-12.036,30.391c-8.727-1.203-16.851-3.009-23.771-5.115c-0.301,0-0.602-0.301-0.902-0.301 c1.805-2.407,3.911-4.814,6.318-7.222C125.619,103.833,136.15,97.814,147.585,94.806 M110.574,204.033 c0.301,0,0.602-0.301,0.902-0.301c6.921-2.106,15.045-3.912,23.771-5.115c2.708,12.337,6.921,22.869,12.036,30.392 c-11.435-3.311-21.966-9.328-30.692-17.754C114.786,208.848,112.68,206.742,110.574,204.033 M184.896,229.009 c5.116-7.522,9.329-18.055,12.036-30.392c8.727,1.203,16.852,3.009,23.771,5.115c0.301,0,0.603,0.301,0.903,0.301 c-1.806,2.407-3.912,4.814-6.319,7.222C206.863,219.981,196.331,226,184.896,229.009"
        })
      );
    }
  },
  fGPn: function(e, t, n) {
    "use strict";
    n.d(t, "a", function() {
      return r;
    }),
      n.d(t, "b", function() {
        return s;
      });
    var o = n("tkkQ"),
      i = { success: !0, result: 1 },
      r = (function() {
        function e() {
          (this.m_connection = new a()),
            (this.m_bAllowAccountMismatch = !1),
            (this.m_mapCacheSubscribedApp = new Map());
        }
        return (
          (e.prototype.FailureResult = function(e) {
            void 0 === e && (e = 2);
            var t = { success: !1, result: e };
            return (
              this.m_connection &&
                !this.m_connection.browser_supported &&
                (t.browser_unsupported = !0),
              this.m_connection &&
                !this.m_connection.connected_to_client &&
                (t.connect_failed = !0),
              7 == e && (t.call_unsupported = !0),
              t
            );
          }),
          (e.prototype.SetAllowAccountMismatch = function(e) {
            this.m_bAllowAccountMismatch = e;
          }),
          (e.prototype.BClientConnected = function() {
            var e = this;
            return this.m_connection.Connect().then(
              function() {
                return i;
              },
              function() {
                return e.FailureResult();
              }
            );
          }),
          (e.prototype.BClientSupportsMessage = function(e) {
            return (
              !(
                !this.m_connection.connected_to_client ||
                !this.m_connection.ready
              ) &&
              -1 !== this.m_connection.ClientInfo.rgSupportedMessages.indexOf(e)
            );
          }),
          (e.prototype.OpenFriendChatDialog = function(e) {
            var t = { message: "ShowFriendChatDialog", steamid: e };
            return this.GenericEResultCall(t);
          }),
          (e.prototype.OpenChatRoomGroupDialog = function(e, t) {
            var n = { message: "ShowChatRoomGroupDialog", chat_group_id: e };
            return t && (n.chat_room_id = t), this.GenericEResultCall(n);
          }),
          (e.prototype.ShowChatRoomGroupInvite = function(e) {
            var t = { message: "ShowChatRoomGroupInvite", invite_code: e };
            return this.GenericEResultCall(t);
          }),
          (e.prototype.OpenJoinGameDialog = function(e) {
            var t = { message: "ShowJoinGameDialog", friend_id: e };
            return this.GenericEResultCall(t);
          }),
          (e.prototype.BIsSubscribedApp = function(n) {
            var o = this;
            if (this.m_mapCacheSubscribedApp.has(n))
              return Promise.resolve(this.m_mapCacheSubscribedApp.get(n));
            var e = { message: "IsSubscribedApp", appid: n };
            return this.GenericEResultCall(e).then(function(e) {
              if (!e.connect_failed) {
                var t = 1 == e.result;
                return o.m_mapCacheSubscribedApp.set(n, t), t;
              }
            });
          }),
          (e.prototype.ViewGameInfoForSteamID = function(e) {
            var t = { message: "ViewGameInfoForSteamID", steamid: e };
            return this.GenericEResultCall(t);
          }),
          (e.prototype.BClientAccountMatches = function() {
            return (
              !o.d.logged_in ||
              o.d.accountid == this.m_connection.ClientInfo.unAccountID
            );
          }),
          (e.prototype.GenericEResultCall = function(e) {
            var t = this;
            return this.m_connection
              .Connect()
              .then(function() {
                return t.m_bAllowAccountMismatch || t.BClientAccountMatches()
                  ? t.m_connection.SendMsgAndAwaitResponse(e).then(function(e) {
                      return 1 === e.success ? i : t.FailureResult(e.success);
                    })
                  : { success: !1, result: 19, account_mismatch: !0 };
              })
              .catch(function() {
                return t.FailureResult();
              });
          }),
          e
        );
      })(),
      a = (function() {
        function e() {
          (this.m_mapWaitingCallbacks = new Map()),
            (this.m_iCallSeq = 1),
            (this.m_bReady = !1),
            (this.m_bClientConnectionFailed = !1),
            (this.m_bSecurityException = !1),
            (this.m_ClientInfo = {
              ulVersion: "",
              bFriendsUIEnabled: !1,
              unAccountID: 0,
              rgSupportedMessages: []
            });
        }
        return (
          Object.defineProperty(e.prototype, "ClientInfo", {
            get: function() {
              return this.m_ClientInfo;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ready", {
            get: function() {
              return this.m_bReady;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "browser_supported", {
            get: function() {
              return !this.m_bSecurityException;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "connected_to_client", {
            get: function() {
              return (
                this.m_socket && this.m_socket.readyState == WebSocket.OPEN
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SendMsgAndAwaitResponse = function(o) {
            var i = this;
            return new Promise(function(e, t) {
              var n = i.m_iCallSeq++;
              i.BSendMsg(o, n)
                ? i.m_mapWaitingCallbacks.set(n, {
                    iSeq: n,
                    fnCallback: e,
                    fnError: t
                  })
                : t();
            });
          }),
          (e.prototype.BSendMsg = function(e, t) {
            if (!this.m_socket || this.m_socket.readyState != WebSocket.OPEN)
              return !1;
            var n = Object.assign({}, e, {
              universe: o.a.EUNIVERSE,
              accountid: o.d.accountid
            });
            void 0 !== t && (n.sequenceid = t);
            try {
              return this.m_socket.send(JSON.stringify(n)), !0;
            } catch (e) {
              return !1;
            }
          }),
          (e.prototype.OnSocketMessage = function(e) {
            try {
              var t = JSON.parse(e.data);
              if (t.sequenceid) {
                var n = this.m_mapWaitingCallbacks.get(t.sequenceid);
                if (n)
                  return (
                    this.m_mapWaitingCallbacks.delete(t.sequenceid),
                    void n.fnCallback(t)
                  );
              }
            } catch (e) {
              console.error("exception parsing response", e);
            }
          }),
          (e.prototype.Connect = function() {
            var o = this;
            if (this.m_bReady && this.m_socket.readyState == WebSocket.OPEN)
              return Promise.resolve();
            if (this.m_promiseConnect) return this.m_promiseConnect;
            var e = new Promise(function(t, n) {
              try {
                o.m_socket = new WebSocket(
                  "ws://127.0.0.1:27060/clientsocket/"
                );
              } catch (e) {
                return (o.m_bSecurityException = !0), void n(e);
              }
              (o.m_socket.onerror = function(e) {
                n();
              }),
                (o.m_socket.onmessage = o.OnSocketMessage.bind(o)),
                (o.m_socket.onopen = function(e) {
                  o
                    .SendMsgAndAwaitResponse({ message: "GetClientInfo" })
                    .then(function(e) {
                      1 == e.success
                        ? ((o.m_ClientInfo.ulVersion = e.clientversion),
                          (o.m_ClientInfo.bFriendsUIEnabled = !!e.friendsui),
                          (o.m_ClientInfo.unAccountID = e.accountid),
                          e.supported_messages &&
                            (o.m_ClientInfo.rgSupportedMessages =
                              e.supported_messages),
                          t())
                        : n();
                    })
                    .catch(n);
                });
            });
            return (
              (this.m_promiseConnect = e),
              this.m_promiseConnect
                .then(function() {
                  (o.m_bReady = !0), (o.m_promiseConnect = void 0);
                })
                .catch(function() {
                  (o.m_bClientConnectionFailed = !0),
                    (o.m_promiseConnect = void 0);
                }),
              this.m_promiseConnect
            );
          }),
          e
        );
      })(),
      s = new r();
    window.ClientConnectionAPI = s;
  },
  gfbn: function(e, t, n) {
    "use strict";
    n.r(t);
    var G = n("tkkQ"),
      R = n("mrSG"),
      o = n("wsDK"),
      a = (function() {
        function e(e, t, n) {
          void 0 === t && (t = 0),
            (this.m_nOffset = t || 0),
            e instanceof Uint8Array || e instanceof DataView
              ? ((this.m_nLength = n || e.byteLength - this.m_nOffset),
                (this.m_nOffset += e.byteOffset),
                (this.m_viewPacket = new DataView(
                  e.buffer,
                  this.m_nOffset,
                  this.m_nLength
                )))
              : ((this.m_nLength = n || e.byteLength - this.m_nOffset),
                (this.m_viewPacket = new DataView(
                  e,
                  this.m_nOffset,
                  this.m_nLength
                ))),
            (this.m_rgubPacket = new Uint8Array(
              this.m_viewPacket.buffer,
              this.m_viewPacket.byteOffset,
              this.m_viewPacket.byteLength
            )),
            (this.m_iGet = 0),
            (this.m_iPut = 0);
        }
        return (
          (e.prototype.TellGet = function() {
            return this.m_iGet + this.m_viewPacket.byteOffset;
          }),
          (e.prototype.GetPacket = function() {
            return this.m_viewPacket.buffer;
          }),
          (e.prototype.GetUint8 = function() {
            return this.m_viewPacket.getUint8(this.m_iGet++);
          }),
          (e.prototype.GetUint32 = function(e) {
            void 0 === e && (e = !0);
            var t = this.m_viewPacket.getUint32(this.m_iGet, e);
            return (this.m_iGet += 4), t;
          }),
          (e.prototype.SeekGetHead = function(e) {
            void 0 === e && (e = 0), (this.m_iGet = e || 0);
          }),
          (e.prototype.SeekGetCurrent = function(e) {
            this.m_iGet += e;
          }),
          (e.prototype.TellPut = function() {
            return this.m_iPut + this.m_viewPacket.byteOffset;
          }),
          (e.prototype.TellMaxPut = function() {
            return this.m_viewPacket.byteLength;
          }),
          (e.prototype.PutUint8 = function(e) {
            this.m_viewPacket.setUint8(this.m_iPut++, e);
          }),
          (e.prototype.PutUint32 = function(e, t) {
            void 0 === t && (t = !0),
              this.m_viewPacket.setUint32(this.m_iPut, e, t),
              (this.m_iPut += 4);
          }),
          (e.prototype.PutBytes = function(e) {
            this.m_rgubPacket.set(e, this.m_iPut), (this.m_iPut += e.length);
          }),
          (e.prototype.SeekPut = function(e) {
            this.m_iPut += e;
          }),
          (e.prototype.GetCountBytesRemaining = function() {
            return this.m_viewPacket.byteLength - this.m_iGet;
          }),
          e
        );
      })(),
      i = [
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "a",
        "b",
        "c",
        "d",
        "e",
        "f"
      ];
    function p(e) {
      for (var t = "", n = 0; n < e.length; n++) {
        var o = e[n];
        t += i[o >>> 4] + i[15 & o];
      }
      return t;
    }
    var r = n("hRO2"),
      s = n("LS9x"),
      E = n("s+DT"),
      c = (function() {
        function t(e, t, n, o, i) {
          if (o)
            (this.m_eMsg = o.m_eMsg),
              (this.m_bValid = o.m_bValid),
              this.m_bValid &&
                ((this.m_netPacket = o.m_netPacket),
                (this.m_cubHeader = o.m_cubHeader),
                (this.m_header = o.m_header),
                this.InitForType(n));
          else {
            if (((this.m_header = new s.d(null)), (this.m_bValid = !0), t))
              if (
                ((this.m_netPacket = t),
                this.m_netPacket.SeekGetHead(),
                (this.m_eMsg = this.m_netPacket.GetUint32()),
                2147483648 & this.m_eMsg)
              ) {
                (this.m_eMsg = 2147483647 & this.m_eMsg),
                  (this.m_cubHeader = this.m_netPacket.GetUint32());
                try {
                  s.d.deserializeBinaryFromReader(
                    this.m_header,
                    new r.BinaryReader(
                      this.m_netPacket.GetPacket(),
                      this.m_netPacket.TellGet(),
                      this.m_cubHeader
                    )
                  ),
                    this.m_netPacket.SeekGetCurrent(this.m_cubHeader),
                    n && this.InitForType(n);
                } catch (e) {
                  console.error("Exception deserializing protobuf", e),
                    (this.m_bValid = !1);
                }
              } else this.m_bValid = !1;
            else e && (this.m_eMsg = e), n && (this.m_body = new n());
            i && this.m_header.set_jobid_target(i.Hdr().jobid_target());
          }
        }
        return (
          (t.InitHeaderFromPacket = function(e) {
            return new t(void 0, e);
          }),
          (t.prototype.InitForType = function(e) {
            if (((this.m_body = new e()), this.m_netPacket)) {
              this.m_netPacket.SeekGetHead(8 + this.m_cubHeader);
              try {
                e.deserializeBinaryFromReader(
                  this.m_body,
                  new r.BinaryReader(
                    this.m_netPacket.GetPacket(),
                    this.m_netPacket.TellGet(),
                    this.m_netPacket.GetCountBytesRemaining()
                  )
                );
              } catch (e) {
                (this.m_bValid = !1),
                  console.error(
                    "Exception parsing protobuf message body.  Definitions may be out of sync with server version."
                  ),
                  console.log(e.stack || e);
              }
            }
          }),
          (t.prototype.BIsValid = function() {
            return this.m_bValid;
          }),
          (t.prototype.Body = function() {
            return this.m_body;
          }),
          (t.prototype.Hdr = function() {
            return this.m_header;
          }),
          (t.prototype.GetEMsg = function() {
            return this.m_eMsg;
          }),
          (t.prototype.SetEMsg = function(e) {
            this.m_eMsg = e;
          }),
          (t.prototype.GetEResult = function() {
            return this.Hdr().eresult();
          }),
          (t.prototype.Serialize = function() {
            var e = this.m_header.serializeBinary(),
              t = this.m_body.serializeBinary(),
              n = 2147483648 | this.m_eMsg,
              o = new Uint8Array(8 + e.length + t.length),
              i = new a(o);
            return (
              i.PutUint32(n),
              i.PutUint32(e.length),
              i.PutBytes(e),
              i.PutBytes(t),
              o
            );
          }),
          (t.prototype.DEBUG_ToObject = function() {
            return {};
          }),
          (t.prototype.DEBUG_LogToConsole = function() {}),
          t
        );
      })(),
      u = (function(i) {
        function n(e, t, n, o) {
          return void 0 === t && (t = 0), i.call(this, t, n, e, o) || this;
        }
        return (
          R.d(n, i),
          (n.InitFromPacket = function(e, t) {
            return new n(e, 0, t);
          }),
          (n.InitFromMsg = function(e, t) {
            return new n(e, void 0, void 0, t);
          }),
          (n.Init = function(e, t) {
            return new n(e, t);
          }),
          (n.prototype.Body = function() {
            return i.prototype.Body.call(this);
          }),
          n
        );
      })(c),
      m = n("2vnA"),
      l = new ((function() {
        function e() {
          (this.m_mapCallbacks = new Map()),
            (this.m_rgRegisteredEMsgs = []),
            (this.m_mapServiceMethodHandlers = new Map()),
            (this.m_rgRegisteredServiceMethodHandlers = []);
        }
        return (
          (e.prototype.DispatchMsgToHandlers = function(e, t) {
            var n = e.GetEMsg();
            if (146 == n) {
              var o = e.Hdr().target_job_name();
              if (o)
                if ((a = this.m_mapServiceMethodHandlers.get(o))) {
                  this.DEBUG_LogMessageDispatch(e, a[0]);
                  for (var i = 0, r = a; i < r.length; i++) {
                    r[i].invoke(e, t);
                  }
                  return !0;
                }
            } else {
              var a;
              if ((a = this.m_mapCallbacks.get(n))) {
                this.DEBUG_LogMessageDispatch(e, a[0]);
                for (var s = 0, c = a; s < c.length; s++) {
                  c[s].invoke(e);
                }
                return !0;
              }
            }
            return !1;
          }),
          (e.prototype.DEBUG_LogMessageDispatch = function(e, t) {}),
          Object.defineProperty(e.prototype, "emsg_list", {
            get: function() {
              return this.m_rgRegisteredEMsgs;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "servicemethod_list", {
            get: function() {
              return this.m_rgRegisteredServiceMethodHandlers;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.AddCallback = function(n, e, o) {
            var i = this,
              t = this.m_mapCallbacks.get(n);
            return (
              t ||
                ((t = []),
                this.m_mapCallbacks.set(n, t),
                this.m_rgRegisteredEMsgs.push(n)),
              t.push({ invoke: o, msgClass: e }),
              {
                invoke: o,
                unregister: function() {
                  var e = i.m_mapCallbacks.get(n);
                  if (e)
                    for (var t = 0; t < e.length; t++)
                      e[t].invoke == o && (e.splice(t, 1), t--);
                }
              }
            );
          }),
          (e.prototype.AddServiceMethodHandler = function(a, s) {
            var n = this,
              o = function(e, t) {
                var n = u.InitFromMsg(a.request, e),
                  o = u.Init(a.response, 147),
                  i = s(n, o),
                  r = function(e) {
                    o.Hdr().set_eresult(e), t(o);
                  };
                i instanceof Promise
                  ? i.then(r).catch(function() {
                      r(2);
                    })
                  : r(i);
              };
            return (
              this.m_mapServiceMethodHandlers.has(a.name)
                ? console.error("Duplicate registration for method " + a.name)
                : (this.m_mapServiceMethodHandlers.set(a.name, [
                    { invoke: o, msgClass: a.request }
                  ]),
                  this.m_rgRegisteredServiceMethodHandlers.push(a.name)),
              {
                invoke: o,
                unregister: function() {
                  var e = n.m_mapServiceMethodHandlers.get(a.name);
                  if (e)
                    for (var t = 0; t < e.length; t++)
                      e[t].invoke == o && (e.splice(t, 1), t--);
                }
              }
            );
          }),
          (e.prototype.AddServiceNotificationHandler = function(o, i) {
            var n = this,
              r = function(e, t) {
                var n = u.InitFromMsg(o.request, e);
                i(n);
              },
              e = this.m_mapServiceMethodHandlers.get(o.name);
            return (
              e ||
                ((e = []),
                this.m_mapServiceMethodHandlers.set(o.name, e),
                this.m_rgRegisteredServiceMethodHandlers.push(o.name)),
              e.push({ invoke: r, msgClass: o.request }),
              {
                invoke: r,
                unregister: function() {
                  var e = n.m_mapServiceMethodHandlers.get(o.name);
                  if (e)
                    for (var t = 0; t < e.length; t++)
                      e[t].invoke == r && (e.splice(t, 1), t--);
                }
              }
            );
          }),
          R.c([m.observable], e.prototype, "m_rgRegisteredEMsgs", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_rgRegisteredServiceMethodHandlers",
            void 0
          ),
          e
        );
      })())();
    function d(e, t, n) {
      return l.AddCallback(e, t, function(e) {
        Object(m.runInAction)(function() {
          n(u.InitFromMsg(t, e));
        });
      });
    }
    function h(e, t) {
      return l.AddServiceNotificationHandler(e, t);
    }
    function _(e, n) {
      return l.AddServiceNotificationHandler(e, function(e) {
        var t;
        return (
          Object(m.runInAction)(function() {
            t = n(e);
          }),
          t
        );
      });
    }
    var f = n("H7XF"),
      g = n("NH0Q"),
      b = n("SMf8"),
      v = n("16wW"),
      S = n("0N1H"),
      y = n("vDqi"),
      C = n.n(y),
      I = (function() {
        function e() {
          this.m_CMList = { rgCMList: [], rtLastLoaded: 0 };
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_Storage = e),
              (this.m_promiseLoadFromStorage = this.m_Storage
                .GetObject(this.GetLocalStorageKey())
                .then(function(e) {
                  return (
                    e &&
                      e.rgCMList &&
                      e.rgCMList.length &&
                      e.rgCMList[0].strHost &&
                      Object.assign(t.m_CMList, e),
                    null
                  );
                })
                .catch(function() {
                  return null;
                }));
          }),
          (e.prototype.GetBestCMToConnectTo = function() {
            var t = this;
            return this.m_promiseLoadFromStorage.then(function() {
              var e = new Date().getTime() / 1e3;
              return !t.m_CMList.rgCMList.length ||
                604800 < e - t.m_CMList.rtLastLoaded
                ? t.GetCMListFromWebAPI()
                : t.PingCMs();
            });
          }),
          (e.prototype.LogCMDisconnected = function(e, t) {
            t ||
              ((e.nConnectFailures = (e.nConnectFailures || 0) + 1),
              this.WriteCMListToLocalStorage());
          }),
          (e.prototype.BuildCMWebSocketURL = function(e) {
            return "wss://" + this.FixDevHost(e) + "/cmsocket/";
          }),
          (e.prototype.FixDevHost = function(e) {
            if (
              4 == G.a.EUNIVERSE &&
              "dev" == G.a.WEB_UNIVERSE &&
              e.match(/^127\.0\.0\.1/)
            ) {
              var t = G.a.WEBAPI_BASE_URL.match(/https?:\/\/([^\/:]*)/);
              if (t && t[1]) return e.replace(/^127\.0\.0\.1/, t[1]);
            }
            return e;
          }),
          (e.prototype.GetLocalStorageKey = function() {
            return "CCMList_" + G.a.EUNIVERSE;
          }),
          (e.prototype.WriteCMListToLocalStorage = function() {
            this.m_Storage.StoreObject(
              this.GetLocalStorageKey(),
              this.m_CMList
            );
          }),
          (e.prototype.GetCMListFromWebAPI = function() {
            var a = this,
              s = G.a.WEBAPI_BASE_URL + "ISteamDirectory/GetCMList/v1/",
              c = "GetCMList_JSONP_" + new Date().getTime();
            return (
              (s += "?cellid=0"),
              G.a.IN_MOBILE || (s += "&jsonp=" + encodeURIComponent(c)),
              new Promise(function(n, o) {
                var i = !1,
                  r = window.setTimeout(function() {
                    (i = !0),
                      a.m_CMList.rgCMList.length
                        ? a.PingCMs().then(n, o)
                        : o("Request to load CM list timed out");
                  }, 1e4),
                  t = function(e) {
                    delete window[c];
                    var t = 0;
                    e &&
                      e.response &&
                      e.response.serverlist_websockets &&
                      (t = e.response.serverlist_websockets.length || 0),
                      0 < t && a.OnCMListResponse(e),
                      i || (window.clearInterval(r), a.PingCMs().then(n, o));
                  };
                if (G.a.IN_MOBILE)
                  C.a.get(s).then(function(e) {
                    console.log(e), t(e.data);
                  });
                else {
                  window[c] = t;
                  var e = window.document.createElement("script");
                  (e.type = "text/javascript"),
                    (e.async = !0),
                    (e.src = s),
                    (e.onerror = o),
                    window.document.head.appendChild(e);
                }
              })
            );
          }),
          (e.prototype.OnCMListResponse = function(e) {
            for (
              var t = new Map(), n = 0, o = this.m_CMList.rgCMList;
              n < o.length;
              n++
            ) {
              var i = o[n];
              t.set(i.strHost, i);
            }
            if (
              ((this.m_CMList = {
                rgCMList: [],
                rtLastLoaded: new Date().getTime() / 1e3
              }),
              e.response && e.response.serverlist_websockets)
            )
              for (
                var r = 0, a = 0, s = e.response.serverlist_websockets;
                a < s.length;
                a++
              ) {
                var c = s[a],
                  l = t.get(c) || {};
                this.m_CMList.rgCMList.push(
                  Object.assign(l, { strHost: c, nPriority: r++ })
                );
              }
          }),
          (e.prototype.PingCMs = function() {
            for (
              var p = this,
                e = new Date().getTime() / 1e3 - 18e3,
                u = [],
                m = void 0,
                d = 1e4,
                t = 0,
                n = this.m_CMList.rgCMList;
              t < n.length;
              t++
            ) {
              var o = n[t],
                i = (o.msPing || 0) + (o.nCMLoad || 0);
              !i || o.rtLastCheck < e || 1e4 < i
                ? u.length < 20 && u.push(o)
                : i < d && ((m = o), (d = i));
            }
            if (0 == u.length)
              return (
                m || (m = this.GetCMWithFewestDisconnects()),
                m ? Promise.resolve(m) : Promise.reject("No CMs available")
              );
            var h = !1;
            return new Promise(function(t, n) {
              var o,
                i,
                r = "immediate",
                a = function(e) {
                  h ||
                    ((h = !0),
                    p.WriteCMListToLocalStorage(),
                    o && window.clearTimeout(o),
                    i && window.clearTimeout(i),
                    e
                      ? t(e)
                      : p.m_CMList.rgCMList.length
                        ? t(p.GetCMWithFewestDisconnects())
                        : n("No CMs available"));
                };
              m && (p.BCMOkToUse(m, r) || 0 == u.length) && a(m),
                h ||
                  ((o = window.setTimeout(function() {
                    (r = "timeout"), !h && m && p.BCMOkToUse(m, r) && a(m);
                  }, 400)),
                  (i = window.setTimeout(function() {
                    (r = "seriouslytimeout"),
                      a(p.BCMOkToUse(m, r) ? m : void 0);
                  }, 12e3)));
              var s,
                e = 0,
                c = 0;
              s = function() {
                if (e < u.length) {
                  var n = u[e++];
                  return (
                    p.PingCM(n).then(function() {
                      var e, t;
                      (t = ((e = n).msPing || 0) + (e.nCMLoad || 0)) < d &&
                        ((m = e), (d = t), !h && p.BCMOkToUse(m, r) && a(m)),
                        (!h && s()) ||
                          (0 == --c &&
                            (h ||
                              a(
                                p.BCMOkToUse(m, "seriouslytimeout") ? m : void 0
                              )));
                    }),
                    !0
                  );
                }
                return !1;
              };
              for (var l = 0; l < 4; l++) s() && c++;
            });
          }),
          (e.prototype.GetCMWithFewestDisconnects = function() {
            if (this.m_CMList.rgCMList.length) {
              for (
                var e = this.m_CMList.rgCMList[0], t = 1;
                0 < e.nConnectFailures && t < this.m_CMList.rgCMList.length;

              ) {
                var n = this.m_CMList.rgCMList[t++];
                (!n.nConnectFailures ||
                  n.nConnectFailures < e.nConnectFailures) &&
                  (e = n);
              }
              return e;
            }
          }),
          (e.prototype.BCMOkToUse = function(e, t) {
            if (!e) return !1;
            var n = e.msPing + e.nCMLoad;
            return (
              (n < 80 && e.msPing < 60) ||
              ("immediate" != t &&
                ((n < 140 && e.msPing < 100) ||
                  ("timeout" != t && (n < 350 && e.msPing < 275))))
            );
          }),
          (e.prototype.PingCM = function(i) {
            var t = "https://" + this.FixDevHost(i.strHost) + "/cmping/",
              r = performance.now();
            return new Promise(function(o, e) {
              C.a
                .head(t)
                .then(function(e) {
                  var t = performance.now() - r,
                    n = e.headers["x-steam-cmload"]
                      ? parseInt(e.headers["x-steam-cmload"])
                      : void 0;
                  (i.msPing = t),
                    (i.nCMLoad = n),
                    (i.rtLastCheck = new Date().getTime() / 1e3),
                    o(t);
                })
                .catch(function() {
                  (i.msPing = 1e4),
                    (i.nCMLoad = 0),
                    (i.rtLastCheck = new Date().getTime() / 1e3),
                    o(1e4);
                });
            });
          }),
          e
        );
      })(),
      O = n("bijA"),
      w = n("UqDm"),
      M = n("1VtQ"),
      D = (function() {
        function e() {
          this.m_vecCallbacks = [];
        }
        return (
          (e.prototype.Register = function(e) {
            var t = this;
            this.m_vecCallbacks.push(e);
            return {
              Unregister: function() {
                w.c(t.m_vecCallbacks, e);
              }
            };
          }),
          (e.prototype.Dispatch = function() {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            for (var n = 0, o = this.m_vecCallbacks; n < o.length; n++) {
              o[n].apply(void 0, e);
            }
          }),
          (e.prototype.ClearAllCallbacks = function() {
            this.m_vecCallbacks = [];
          }),
          e
        );
      })(),
      T = (function() {
        function e() {}
        return (
          (e.prototype.Schedule = function(e, t) {
            this.IsScheduled() && this.Cancel(),
              (this.m_fnCallback = t),
              (this.m_schTimer = window.setTimeout(this.ScheduledInternal, e));
          }),
          (e.prototype.IsScheduled = function() {
            return void 0 !== this.m_schTimer;
          }),
          (e.prototype.Cancel = function() {
            this.m_schTimer &&
              (clearTimeout(this.m_schTimer), (this.m_schTimer = void 0));
          }),
          (e.prototype.ScheduledInternal = function() {
            this.m_schTimer = void 0;
            var e = this.m_fnCallback;
            (this.m_fnCallback = void 0), e();
          }),
          R.c([M.a], e.prototype, "ScheduledInternal", null),
          e
        );
      })(),
      N = (function() {
        function e() {
          this.m_rgListeners = [];
        }
        return (
          (e.prototype.AddEventListener = function(e, t, n) {
            e.addEventListener(t, n),
              this.m_rgListeners.push({ element: e, type: t, listener: n });
          }),
          (e.prototype.Unregister = function() {
            for (var e = 0, t = this.m_rgListeners; e < t.length; e++) {
              var n = t[e];
              n.element.removeEventListener(n.type, n.listener);
            }
            this.m_rgListeners = [];
          }),
          e
        );
      })(),
      L = "DEBUG_LogCMTraffic";
    var k = (function() {
      function e(e) {
        void 0 === e && (e = !1),
          (this.m_bRunOnce = !1),
          (this.m_ClientConnectionCallbacks = new D()),
          (this.m_mapServerTypeCallbacks = new Map()),
          (this.m_bRunOnce = e);
      }
      return (
        (e.prototype.RunCallbacks = function(e, t) {
          void 0 === e
            ? (this.m_ClientConnectionCallbacks.Dispatch(t),
              this.m_bRunOnce &&
                this.m_ClientConnectionCallbacks.ClearAllCallbacks())
            : this.m_mapServerTypeCallbacks.has(e) &&
              (this.m_mapServerTypeCallbacks.get(e).Dispatch(),
              this.m_bRunOnce && this.m_mapServerTypeCallbacks.delete(e));
        }),
        (e.prototype.RunAllCallbacks = function(e, t) {
          var n = this;
          this.RunCallbacks(void 0, t),
            e.forEach(function(e) {
              return n.RunCallbacks(e, t);
            });
        }),
        (e.prototype.AddCallback = function(e, t) {
          var n = this.m_ClientConnectionCallbacks;
          return (
            void 0 !== t &&
              (this.m_mapServerTypeCallbacks.has(t) ||
                this.m_mapServerTypeCallbacks.set(t, new D()),
              (n = this.m_mapServerTypeCallbacks.get(t))),
            n.Register(e)
          );
        }),
        e
      );
    })();
    function A(e, t) {
      return function() {
        try {
          e();
        } catch (e) {
          console.error("Error in " + t + " callback:", e);
        }
      };
    }
    var P,
      F,
      B,
      V,
      x = (function() {
        function e() {
          var a = this;
          (this.m_steamid = new E.a()),
            (this.m_bLoggedOn = !1),
            (this.m_bCompletedInitialConnect = !1),
            (this.m_unAccountFlags = 0),
            (this.m_strIPCountry = ""),
            (this.m_strPersonaName = ""),
            (this.m_steamidLastLoggedOn = new E.a()),
            (this.m_bConnected = !1),
            (this.m_bConnectionFailed = !1),
            (this.m_setConnectedServers = new Set()),
            (this.m_callbacksOnConnectOneTime = new k(!0)),
            (this.m_callbacksOnConnect = new k()),
            (this.m_callbacksOnDisconnect = new k()),
            (this.m_bForceDisconnect = !1),
            (this.m_bPerformedInitialClockAdjustment = !1),
            (this.m_nWallClockDriftMS = 0),
            (this.m_nPerfClockServerMSOffset =
              new Date().getTime() - performance.now()),
            (this.ClientServersAvailableHandler = d(5501, O.f, function(e) {
              for (
                var t = new Set(a.m_setConnectedServers),
                  n = 0,
                  o = e.Body().server_types_available();
                n < o.length;
                n++
              ) {
                var i = o[n],
                  r = i.server();
                void 0 !== r &&
                  (a.m_bLoggedOn &&
                    ((a.m_setConnectedServers.has(r) && !i.changed()) ||
                      (i.changed() &&
                        a.m_setConnectedServers.has(r) &&
                        a.m_callbacksOnDisconnect.RunCallbacks(r),
                      a.m_callbacksOnConnect.RunCallbacks(r),
                      a.m_callbacksOnConnectOneTime.RunCallbacks(r))),
                  a.m_setConnectedServers.add(r),
                  t.delete(r));
              }
              t.forEach(function(e) {
                a.m_setConnectedServers.delete(e),
                  a.m_bLoggedOn && a.m_callbacksOnDisconnect.RunCallbacks(e);
              });
            })),
            (this.m_ServiceTransport = {
              SendMsg: function(e, t, n) {
                return (
                  t.SetEMsg(151),
                  t.Hdr().set_target_job_name(e),
                  a.SendMsgAndAwaitResponse(t, n)
                );
              },
              SendNotification: function(e, t) {
                return (
                  t.SetEMsg(151), t.Hdr().set_target_job_name(e), a.Send(t)
                );
              }
            }),
            window &&
              window.addEventListener &&
              window.addEventListener("unload", function(e) {
                a.ForceDisconnect();
              });
        }
        return (
          (e.ConstructClientCMInterface = function() {
            return new j();
          }),
          (e.ConstructWebCMInterface = function(e) {
            return new U(e);
          }),
          Object.defineProperty(e.prototype, "steamid", {
            get: function() {
              return this.m_steamidLastLoggedOn;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "logged_on", {
            get: function() {
              return this.m_bLoggedOn;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BDisconnected = function() {
            return !this.logged_on && this.m_steamidLastLoggedOn.BIsValid();
          }),
          (e.prototype.BConnectedToServer = function(e) {
            return void 0 === e
              ? this.m_bLoggedOn
              : this.m_setConnectedServers.has(e);
          }),
          Object.defineProperty(e.prototype, "has_completed_initial_connect", {
            get: function() {
              return this.m_bCompletedInitialConnect;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "account_flags", {
            get: function() {
              return this.m_unAccountFlags;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetServiceTransport = function() {
            return this.m_ServiceTransport;
          }),
          (e.prototype.RunWhenLoggedOn = function(e, t) {
            var n = A(e, "RunWhenLoggedOn");
            this.BConnectedToServer(t)
              ? n()
              : this.m_callbacksOnConnectOneTime.AddCallback(n, t);
          }),
          (e.prototype.AddOnLogonCallback = function(e, t) {
            var n = A(e, "AddOnLogonCallback");
            return (
              this.BConnectedToServer(t) && n(),
              this.m_callbacksOnConnect.AddCallback(n, t)
            );
          }),
          (e.prototype.AddOnDisconnectCallback = function(e, t) {
            var n,
              o,
              i = ((n = e),
              (o = "AddOnDisconnectCallback"),
              function(e) {
                try {
                  n(e);
                } catch (e) {
                  console.error("Error in " + o + " callback:", e);
                }
              });
            this.m_callbacksOnDisconnect.AddCallback(i, t);
          }),
          (e.prototype.ForceDisconnect = function() {
            (this.m_bForceDisconnect = !0), this.Disconnect();
          }),
          Object.defineProperty(e.prototype, "session", {
            get: function() {
              return null;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Send = function(e) {
            return (
              !!this.BIsConnected() &&
              (this.DEBUG_LogCMInterfaceActivity(e, "send"),
              this.SendInternal(e))
            );
          }),
          (e.prototype.BInternalShouldDispatchMessage = function(e) {
            return !0;
          }),
          (e.prototype.ResolveAwaitWithTransportError = function(e, t, n, o) {
            var i = u.Init(t);
            i.Hdr().set_eresult(2),
              i.Hdr().set_transport_error(n),
              o && i.Hdr().set_error_message(o),
              e(i);
          }),
          (e.prototype.DispatchMessage = function(t) {
            var n = this;
            try {
              if (!this.BInternalShouldDispatchMessage(t)) return;
              if (t.BIsValid()) {
                l.DispatchMsgToHandlers(t, function(e) {
                  e.Hdr().set_jobid_target(t.Hdr().jobid_source()), n.Send(e);
                }) || this.DEBUG_LogCMInterfaceActivity(t, "receive", !1);
              } else
                console.error(
                  "CMInterface RECV could not parse message of type " +
                    Object(o.a)(t.GetEMsg()) +
                    " " +
                    t.GetEMsg()
                );
            } catch (e) {
              console.error(
                "CMInterface RECV exception thrown while processing message of type " +
                  Object(o.a)(t.GetEMsg()),
                e
              ),
                t.DEBUG_LogToConsole();
            }
          }),
          (e.prototype.BIsConnected = function() {
            return this.m_bConnected;
          }),
          (e.prototype.OnConnect = function() {
            (this.m_bConnected = !0),
              (this.m_bConnectionFailed = !1),
              (this.m_bForceDisconnect = !1);
          }),
          (e.prototype.OnLoggedOn = function() {
            (this.m_bCompletedInitialConnect = !0),
              this.InternalAdjustClock(),
              this.m_callbacksOnConnect.RunAllCallbacks(
                this.m_setConnectedServers
              ),
              this.m_callbacksOnConnectOneTime.RunAllCallbacks(
                this.m_setConnectedServers
              );
          }),
          (e.prototype.OnDisconnect = function() {
            this.m_bConnected;
            (this.m_bConnected = !1),
              (this.m_bConnectionFailed = !0),
              (this.m_onConnect = void 0),
              (this.m_steamid = new E.a()),
              (this.m_bLoggedOn = !1),
              (this.m_unAccountFlags = 0),
              (this.m_strIPCountry = ""),
              (this.m_strPersonaName = ""),
              this.m_callbacksOnDisconnect.RunAllCallbacks(
                this.m_setConnectedServers,
                this.m_bForceDisconnect
              ),
              this.m_setConnectedServers.clear();
          }),
          (e.prototype.DEBUG_LogCMInterfaceActivity = function(e, t, n) {
            void 0 === n && (n = !0);
          }),
          (e.prototype.DEBUG_LogMessage = function(e) {
            for (var t = [], n = 1; n < arguments.length; n++)
              t[n - 1] = arguments[n];
          }),
          (e.prototype.InternalAdjustClock = function() {
            return R.b(this, void 0, void 0, function() {
              var t,
                r = this;
              return R.e(this, function(e) {
                return (
                  (t = u.Init(b.f, 9802))
                    .Body()
                    .set_client_request_timestamp(
                      Math.floor(performance.now()).toString()
                    ),
                  [
                    2,
                    this.SendMsgAndAwaitResponse(t, b.g).then(function(e) {
                      var t = performance.now(),
                        n = new Date(),
                        o = parseInt(e.Body().client_request_timestamp()),
                        i =
                          parseInt(e.Body().server_timestamp_ms()) -
                          ((t - o) >> 1);
                      return (
                        i && !isNaN(i) && t && !isNaN(t)
                          ? ((r.m_bPerformedInitialClockAdjustment = !0),
                            (r.m_nPerfClockServerMSOffset = i - t),
                            (r.m_nWallClockDriftMS = n.getTime() - i))
                          : AssertMsg(
                              !1,
                              "Error computing server time, server echo: " +
                                o +
                                " server time " +
                                i
                            ),
                        !0
                      );
                    })
                  ]
                );
              });
            });
          }),
          (e.prototype.BPerformedInitialClockAdjustment = function() {
            return this.m_bPerformedInitialClockAdjustment;
          }),
          (e.prototype.GetServerTimeMS = function() {
            return performance.now() + this.m_nPerfClockServerMSOffset;
          }),
          (e.prototype.GetServerRTime32 = function() {
            return Math.floor(
              (performance.now() + this.m_nPerfClockServerMSOffset) / 1e3
            );
          }),
          (e.prototype.RTime32ToDate = function(e) {
            return new Date(1e3 * e + this.m_nWallClockDriftMS);
          }),
          R.c([m.observable], e.prototype, "m_steamid", void 0),
          R.c([m.observable], e.prototype, "m_bLoggedOn", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bCompletedInitialConnect",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_unAccountFlags", void 0),
          R.c([m.observable], e.prototype, "m_strIPCountry", void 0),
          R.c([m.observable], e.prototype, "m_strPersonaName", void 0),
          R.c([m.observable], e.prototype, "m_steamidLastLoggedOn", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bPerformedInitialClockAdjustment",
            void 0
          ),
          R.c([m.action], e.prototype, "DispatchMessage", null),
          R.c([m.action], e.prototype, "OnDisconnect", null),
          e
        );
      })(),
      U = (function(n) {
        function e(e) {
          var t = n.call(this) || this;
          return (
            (t.m_Session = {
              m_bWaitingForLogonResponse: !1,
              m_nSessionID: 0,
              m_eResultLogonSuccess: 2,
              m_nSessionIDLast: 0,
              m_nClientInstanceID: "0"
            }),
            (t.m_bLoadingCMList = !1),
            (t.m_iCallSeq = 1),
            (t.m_mapWaitingCallbacks = new Map()),
            (t.m_CMList = new I()),
            (t.LogOnResponseHandler = d(751, b.e, function(e) {
              (t.m_Session.m_bWaitingForLogonResponse = !1),
                (t.m_Session.m_eResultLogonSuccess = e.Body().eresult()),
                1 == e.Body().eresult()
                  ? ((t.m_steamid = new E.a(
                      e.Body().client_supplied_steamid()
                    )),
                    (t.m_steamidLastLoggedOn = t.m_steamid),
                    (t.m_bLoggedOn = !0),
                    (t.m_Session.m_nSessionID = e.Hdr().client_sessionid()),
                    (t.m_Session.m_nSessionIDLast = t.m_Session.m_nSessionID),
                    (t.m_Session.m_nClientInstanceID = e
                      .Body()
                      .client_instance_id()),
                    t.OnLoggedOn())
                  : t.Disconnect();
            })),
            (t.ClientAccountInfoHandler = d(768, b.a, function(e) {
              (t.m_unAccountFlags = e.Body().account_flags() || 0),
                (t.m_strIPCountry = e.Body().ip_country() || ""),
                (t.m_strPersonaName = e.Body().persona_name() || "");
            })),
            t.m_CMList.Init(e),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.BIsConnected = function() {
            return this.m_Socket && this.m_Socket.readyState == WebSocket.OPEN;
          }),
          (e.prototype.Connect = function() {
            var r = this;
            return (
              this.m_Socket || this.m_bLoadingCMList
                ? this.m_onConnect || (this.m_onConnect = Promise.resolve())
                : (console.log("Loading CM List"),
                  (this.m_bConnected = !1),
                  (this.m_bLoggedOn = !1),
                  (this.m_Session.m_bWaitingForLogonResponse = !0),
                  (this.m_bLoadingCMList = !0),
                  (this.m_onConnect = this.m_CMList
                    .GetBestCMToConnectTo()
                    .then(function(o) {
                      console.log("Connecting socket to host " + o.strHost),
                        (r.m_bLoadingCMList = !1);
                      var i = (r.m_Socket = new WebSocket(
                        r.m_CMList.BuildCMWebSocketURL(o.strHost)
                      ));
                      return (
                        (i.binaryType = "arraybuffer"),
                        (i.onmessage = function(e) {
                          var t = new a(e.data),
                            n = c.InitHeaderFromPacket(t);
                          1 == n.GetEMsg()
                            ? r.DecodeAndDispatchMultiMsg(u.InitFromMsg(s.c, n))
                            : r.DispatchMessage(n);
                        }),
                        new Promise(function(t, n) {
                          (i.onopen = function(e) {
                            i == r.m_Socket
                              ? ((r.m_bConnected = !0), r.OnConnect(), t())
                              : n();
                          }),
                            (i.onerror = function(e) {
                              AssertMsg(!1, "Socket connect failed", e),
                                r.m_CMList.LogCMDisconnected(o, r.m_bLoggedOn),
                                i == r.m_Socket && r.OnDisconnect(),
                                n();
                            });
                        })
                      );
                    })
                    .catch(function() {
                      (r.m_bLoadingCMList = !1), r.OnDisconnect();
                    }))),
              this.m_onConnect
            );
          }),
          Object.defineProperty(e.prototype, "session", {
            get: function() {
              return this.m_Session;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClearHeartbeatInterval = function() {
            this.m_iIntervalHeartbeat &&
              (window.clearInterval(this.m_iIntervalHeartbeat),
              (this.m_iIntervalHeartbeat = void 0));
          }),
          (e.prototype.ResetHeartbeatInterval = function() {
            var t = this;
            this.ClearHeartbeatInterval(),
              (this.m_iIntervalHeartbeat = window.setInterval(function() {
                var e = u.Init(b.b, 703);
                t.Send(e);
              }, 27e3));
          }),
          (e.prototype.OnConnect = function() {
            var t = this;
            n.prototype.OnConnect.call(this),
              this.m_Socket &&
                ((this.m_Socket.onerror = function(e) {}),
                this.ResetHeartbeatInterval(),
                (this.m_Socket.onclose = function(e) {
                  t.OnDisconnect();
                }));
          }),
          (e.prototype.Disconnect = function() {
            this.m_Socket && this.m_Socket.close();
          }),
          (e.prototype.OnDisconnect = function() {
            n.prototype.OnDisconnect.call(this),
              (this.m_Socket = void 0),
              this.ClearHeartbeatInterval();
          }),
          (e.prototype.SendMsgAndAwaitResponse = function(o, i) {
            var r = this;
            return new Promise(function(e, t) {
              var n = r.m_iCallSeq++;
              o.Hdr().set_jobid_source("" + n),
                r.Send(o)
                  ? r.m_mapWaitingCallbacks.set(n, {
                      iSeq: n,
                      msgClass: i,
                      fnCallback: e
                    })
                  : r.ResolveAwaitWithTransportError(
                      e,
                      i,
                      2,
                      "Web socket not connected"
                    );
            });
          }),
          (e.prototype.SendInternal = function(e) {
            return (
              !!this.m_Socket &&
              (this.m_steamid.BIsValid() &&
                e.Hdr().set_steamid(this.m_steamid.ConvertTo64BitString()),
              this.m_Session.m_nSessionID &&
                e.Hdr().set_client_sessionid(this.m_Session.m_nSessionID),
              this.m_Socket.send(e.Serialize()),
              300 != e.GetEMsg() && this.ResetHeartbeatInterval(),
              !0)
            );
          }),
          (e.prototype.BInternalShouldDispatchMessage = function(e) {
            if (
              e.BIsValid() &&
              e.Hdr().jobid_target() &&
              e.Hdr().jobid_target() !== S.a
            ) {
              var t = parseInt(e.Hdr().jobid_target());
              if (this.m_mapWaitingCallbacks.has(t)) {
                var n = this.m_mapWaitingCallbacks.get(t);
                if (n) {
                  var o = u.InitFromMsg(n.msgClass, e);
                  this.DEBUG_LogCMInterfaceActivity(o, "receive", !0),
                    o.BIsValid()
                      ? n.fnCallback(o)
                      : this.ResolveAwaitWithTransportError(
                          n.fnCallback,
                          n.msgClass,
                          102,
                          "Failed to parse response from server"
                        ),
                    this.m_mapWaitingCallbacks.delete(t);
                }
                return !1;
              }
              this.DEBUG_LogCMInterfaceActivity(e, "receive", !1);
            }
            return !0;
          }),
          (e.prototype.DecodeAndDispatchMultiMsg = function(e) {
            var t = e.Body().message_body();
            if (t) {
              e.Body().size_unzipped() && (t = v.inflate(t));
              for (var n = new a(t); 0 < n.GetCountBytesRemaining(); ) {
                var o = n.GetUint32(),
                  i = c.InitHeaderFromPacket(
                    new a(n.GetPacket(), n.TellGet(), o)
                  );
                this.DispatchMessage(i), n.SeekGetCurrent(o);
              }
            }
          }),
          R.c([m.action], e.prototype, "DecodeAndDispatchMultiMsg", null),
          e
        );
      })(x),
      j = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e.m_setEMsgHandlers = new Set()),
            (e.m_setServiceMethodHandlers = new Set()),
            e
          );
        }
        return (
          R.d(e, t),
          (e.prototype.SendMsgAndAwaitResponse = function(n, i) {
            var r = this;
            return new Promise(function(o, e) {
              if (r.m_hSharedConnection) {
                r.DEBUG_LogCMInterfaceActivity(n, "send");
                var t = f.fromByteArray(n.Serialize());
                SteamClient.SharedConnection.SendMsgAndAwaitResponse(
                  r.m_hSharedConnection,
                  t
                )
                  .then(function(e) {
                    var t = new a(f.toByteArray(e)),
                      n = u.InitFromPacket(i, t);
                    r.DEBUG_LogCMInterfaceActivity(n, "receive", !0),
                      n.BIsValid()
                        ? o(n)
                        : r.ResolveAwaitWithTransportError(
                            o,
                            i,
                            102,
                            "Failed to parse response from server"
                          );
                  })
                  .catch(function(e) {
                    r.ResolveAwaitWithTransportError(o, i, 2, e);
                  });
              }
            });
          }),
          (e.prototype.SendInternal = function(e) {
            var t = f.fromByteArray(e.Serialize());
            return (
              SteamClient.SharedConnection.SendMsg(this.m_hSharedConnection, t),
              !0
            );
          }),
          (e.prototype.OnMsgRecvd = function(e) {
            var t = new a(f.toByteArray(e)),
              n = c.InitHeaderFromPacket(t);
            this.DispatchMessage(n);
          }),
          (e.prototype.OnLogonInfoChanged = function(e) {
            this.DEBUG_LogMessage("Login info from client: ", e),
              (this.m_bLoggedOn = e.bLoggedOn),
              (G.a.EUNIVERSE = e.eUniverse),
              (G.a.MEDIA_CDN_COMMUNITY_URL = e.strCommunityImagesURL),
              e.strSteamid
                ? ((this.m_steamid = new E.a(e.strSteamid)),
                  (this.m_steamidLastLoggedOn = this.m_steamid),
                  (G.d.logged_in = !0),
                  (G.d.steamid = e.strSteamid),
                  (G.d.accountid = this.m_steamid.GetAccountID()),
                  (G.d.account_name = e.strAccountName))
                : 0 != this.m_steamid.GetAccountID() &&
                  (this.m_steamid = new E.a()),
              this.m_bLoggedOn
                ? (this.m_bConnected || this.OnConnect(), this.OnLoggedOn())
                : this.OnDisconnect();
          }),
          (e.prototype.Connect = function() {
            var o = this;
            return this.m_hSharedConnection
              ? Promise.resolve()
              : (this.m_onConnect = new Promise(function(t, n) {
                  SteamClient.SharedConnection.AllocateSharedConnection()
                    .then(function(e) {
                      e
                        ? (o.OnSharedConnectionEstablished(e),
                          o.DEBUG_LogMessage(
                            "obtained handle ",
                            o.m_hSharedConnection
                          ),
                          o.OnConnect(),
                          t())
                        : n();
                    })
                    .catch(n);
                }));
          }),
          (e.prototype.OnSharedConnectionEstablished = function(e) {
            var a = this;
            (this.m_hSharedConnection = e),
              this.m_setEMsgHandlers.clear(),
              this.m_setServiceMethodHandlers.clear(),
              this.m_hEMsgRegistrationObserver &&
                this.m_hEMsgRegistrationObserver(),
              (this.m_hEMsgRegistrationObserver = Object(m.autorun)(function() {
                if (a.m_hSharedConnection) {
                  for (var e = 0, t = l.emsg_list; e < t.length; e++) {
                    var n = t[e];
                    a.m_setEMsgHandlers.has(n) ||
                      (a.m_setEMsgHandlers.add(n),
                      SteamClient.SharedConnection.SubscribeToEMsg(
                        a.m_hSharedConnection,
                        n
                      ));
                  }
                  for (var o = 0, i = l.servicemethod_list; o < i.length; o++) {
                    var r = i[o];
                    a.m_setServiceMethodHandlers.has(r) ||
                      (a.m_setServiceMethodHandlers.add(r),
                      SteamClient.SharedConnection.SubscribeToClientServiceMethod(
                        a.m_hSharedConnection,
                        r
                      ));
                  }
                }
              }));
            var t = !1;
            SteamClient.SharedConnection.RegisterOnLogonInfoChanged(
              this.m_hSharedConnection,
              function(e) {
                a.OnLogonInfoChanged(e),
                  t ||
                    ((t = !0),
                    SteamClient.SharedConnection.RegisterOnMessageReceived(
                      a.m_hSharedConnection,
                      a.OnMsgRecvd.bind(a)
                    ));
              }
            );
          }),
          (e.prototype.OnConnect = function() {
            t.prototype.OnConnect.call(this);
          }),
          (e.prototype.Disconnect = function() {
            if (this.m_hSharedConnection) {
              var e = u.Init(g.c, 716);
              e.Body().set_persona_state(0),
                e.Body().set_persona_set_by_user(!1),
                this.Send(e),
                SteamClient.SharedConnection.Close(this.m_hSharedConnection),
                this.OnSharedConnectionClosed();
            }
          }),
          (e.prototype.OnSharedConnectionClosed = function() {
            t.prototype.OnDisconnect.call(this),
              (this.m_hSharedConnection = void 0),
              this.m_setEMsgHandlers.clear(),
              this.m_hEMsgRegistrationObserver &&
                (this.m_hEMsgRegistrationObserver(),
                (this.m_hEMsgRegistrationObserver = void 0));
          }),
          R.c([m.action], e.prototype, "OnLogonInfoChanged", null),
          e
        );
      })(x),
      H = (function() {
        function e(e) {
          var t,
            n,
            o,
            i = this;
          (this.m_bLogonFailed = !1),
            (this.m_bForcedDisconnect = !1),
            (this.m_bConnectSucceeded = !1),
            (this.m_bEverConnected = !1),
            (this.m_bEverLoggedOn = !1),
            (this.m_cConsecutiveConnectionFailures = 0),
            (this.m_bWaitingToReconnect = !1),
            (this.m_rgdtRecentFailures = []),
            (this.m_eWebLogonState = 0),
            (this.m_ClientLogoffHandler = ((t = 757),
            (n = b.c),
            (o = function(e) {
              34 == e.Body().eresult() &&
                ((i.m_eWebLogonState = 15), (i.m_bWaitingToReconnect = !0));
            }),
            l.AddCallback(t, n, function(e) {
              o(u.InitFromMsg(n, e));
            }))),
            (this.m_CMInterface = e),
            this.m_CMInterface.AddOnDisconnectCallback(this.OnCMDisconnected),
            this.m_CMInterface.AddOnLogonCallback(this.OnCMLoggedOn);
        }
        return (
          Object.defineProperty(e.prototype, "web_logon_state", {
            get: function() {
              return this.m_eWebLogonState;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsInInitialConnect = function() {
            return 1 == this.m_eWebLogonState || 5 == this.m_eWebLogonState;
          }),
          (e.prototype.BIsWaitingToReconnect = function() {
            return this.m_bWaitingToReconnect;
          }),
          (e.prototype.BWillAutoReconnect = function() {
            return void 0 !== this.m_iTimeoutRetryLogon;
          }),
          (e.prototype.ClearRetryTimeout = function() {
            this.m_iTimeoutRetryLogon &&
              (window.clearTimeout(this.m_iTimeoutRetryLogon),
              (this.m_iTimeoutRetryLogon = void 0));
          }),
          (e.prototype.GetMSUntilNextReconnectAttempt = function() {
            return this.m_dtNextLogonAttempt
              ? Math.max(
                  0,
                  this.m_dtNextLogonAttempt.getTime() - new Date().getTime()
                )
              : 0;
          }),
          (e.prototype.ReconnectNow = function() {
            this.m_bWaitingToReconnect &&
              ((this.m_rgdtRecentFailures = []), this.RetryLogin());
          }),
          (e.prototype.OnCMDisconnected = function(e) {
            if (
              13 != this.m_eWebLogonState &&
              14 != this.m_eWebLogonState &&
              15 != this.m_eWebLogonState
            )
              if (this.m_bForcedDisconnect) this.RetryLogin();
              else {
                for (; 24 <= this.m_rgdtRecentFailures.length; )
                  this.m_rgdtRecentFailures.shift();
                if (
                  (this.m_rgdtRecentFailures.push(new Date()),
                  this.m_bConnectSucceeded &&
                    !this.m_CMInterface.session.m_bWaitingForLogonResponse)
                ) {
                  var t = this.m_CMInterface.session.m_eResultLogonSuccess;
                  this.m_eWebLogonState =
                    1 != t ? (this.m_bEverLoggedOn ? 6 : 8) : 10;
                } else this.m_eWebLogonState = this.m_bEverConnected ? 10 : 2;
                this.m_cConsecutiveConnectionFailures++,
                  e || this.RescheduleLogin();
              }
          }),
          (e.prototype.OnCMLoggedOn = function() {
            (this.m_eWebLogonState = 9),
              (this.m_bEverLoggedOn = !0),
              (this.m_cConsecutiveConnectionFailures = 0);
          }),
          (e.prototype.PerformInitialLogon = function(e) {
            e.token_use_id &&
              (window.sessionStorage.getItem("token_use_id") == e.token_use_id
                ? (console.log(
                    "In-page token has already been consumed, requesting a new token."
                  ),
                  (e = null))
                : window.sessionStorage.setItem(
                    "token_use_id",
                    e.token_use_id
                  )),
              this.PerformWebLogOn(e);
          }),
          (e.prototype.PerformWebLogOn = function(e) {
            var t = this;
            if (
              ((this.m_bConnectSucceeded = !1),
              (this.m_eWebLogonState = this.m_bEverConnected ? 3 : 1),
              e && e.steamid && e.token && e.account_name)
            ) {
              (G.d.steamid = e.steamid),
                (G.d.accountid = new E.a(e.steamid).GetAccountID()),
                (G.d.account_name = e.account_name);
              var n = u.Init(b.d, 5514);
              n.Body().set_account_name(e.account_name),
                n.Body().set_protocol_version(65580),
                n.Body().set_qos_level(2),
                n.Body().set_client_os_type(4294966596),
                n.Body().set_ui_mode(4),
                n.Body().set_chat_mode(2),
                n.Body().set_web_logon_nonce(e.token),
                n.Hdr().set_steamid(e.steamid),
                this.m_CMInterface.session.m_nSessionIDLast &&
                  n
                    .Body()
                    .set_last_session_id(
                      this.m_CMInterface.session.m_nSessionIDLast >>> 0
                    ),
                n
                  .Body()
                  .set_client_instance_id(
                    this.m_CMInterface.session.m_nClientInstanceID
                  ),
                this.m_CMInterface.Connect().then(function() {
                  (G.d.logged_in = !0),
                    (t.m_bConnectSucceeded = !0),
                    (t.m_bEverConnected = !0),
                    (t.m_eWebLogonState = t.m_bEverLoggedOn ? 7 : 5),
                    t.m_CMInterface.Send(n);
                });
            } else this.RetryLogin();
          }),
          (e.prototype.RetryLogin = function() {
            var o = this;
            if (
              ((this.m_bWaitingToReconnect = !1),
              this.ClearRetryTimeout(),
              this.m_CMInterface.BIsConnected() && this.m_bConnectSucceeded)
            )
              return (
                (this.m_bForcedDisconnect = !0),
                void this.m_CMInterface.ForceDisconnect()
              );
            AssertMsg(
              11 != this.m_eWebLogonState,
              "RetryLogin called while request in flight"
            ),
              11 != this.m_eWebLogonState &&
                ((this.m_eWebLogonState = 11),
                this.m_CMInterface.Connect(),
                C.a
                  .get(G.a.TOKEN_URL, { method: "POST" })
                  .then(function(e) {
                    var t = e.data;
                    if (t.logged_in && t.steamid && t.token && t.account_name) {
                      var n = new E.a(t.steamid);
                      o.m_bEverLoggedOn &&
                      o.m_CMInterface.steamid.GetAccountID() != n.GetAccountID()
                        ? ((o.m_eWebLogonState = 14),
                          o.m_CMInterface.ForceDisconnect())
                        : o.PerformWebLogOn(t);
                    } else (o.m_eWebLogonState = 13), o.m_CMInterface.ForceDisconnect();
                  })
                  .catch(function(e) {
                    (o.m_eWebLogonState = 12), o.RescheduleLogin();
                  }));
          }),
          (e.prototype.RescheduleLogin = function() {
            for (
              var e = this,
                t = 0,
                n = 0,
                o = new Date(),
                i = 0,
                r = this.m_rgdtRecentFailures;
              i < r.length;
              i++
            ) {
              var a = r[i];
              a.getTime() >= o.getTime() - 6e4
                ? t++
                : a.getTime() >= o.getTime() - 36e5 && n++;
            }
            n += t;
            var s = this.m_cConsecutiveConnectionFailures + t;
            if (s <= 2) this.RetryLogin();
            else if (s <= 10 && n <= 10) {
              var c = 5e3 * (s - 2);
              (this.m_dtNextLogonAttempt = new Date(new Date().getTime() + c)),
                (this.m_bWaitingToReconnect = !0),
                this.ClearRetryTimeout(),
                (this.m_iTimeoutRetryLogon = window.setTimeout(function() {
                  (e.m_dtNextLogonAttempt = void 0), e.RetryLogin();
                }, c));
            } else this.m_bWaitingToReconnect = !0;
          }),
          R.c([m.observable], e.prototype, "m_eWebLogonState", void 0),
          R.c([M.a], e.prototype, "OnCMDisconnected", null),
          R.c([M.a], e.prototype, "OnCMLoggedOn", null),
          e
        );
      })(),
      W = n("i8i4"),
      z = n("Nh+S"),
      q = (function() {
        return function() {};
      })(),
      K = { "76561198409181301": "#Broadcast_EnglishMain" },
      Y = "Quake Champions Open",
      J = 611500;
    ((F = P || (P = {}))[(F.Terminator = 0)] = "Terminator"),
      (F[(F.MatchStarted = 1)] = "MatchStarted"),
      (F[(F.GameStateChanged = 2)] = "GameStateChanged"),
      (F[(F.TowerDeath = 3)] = "TowerDeath"),
      (F[(F.BarracksDeath = 4)] = "BarracksDeath"),
      (F[(F.AncientDeath = 5)] = "AncientDeath"),
      (F[(F.RoshanDeath = 6)] = "RoshanDeath"),
      (F[(F.HeroDeath = 7)] = "HeroDeath"),
      (F[(F.TeamFight = 8)] = "TeamFight"),
      (F[(F.FirstBlood = 9)] = "FirstBlood"),
      ((V = B || (B = {}))[(V.INIT = 0)] = "INIT"),
      (V[(V.WAIT_FOR_PLAYERS_TO_LOAD = 1)] = "WAIT_FOR_PLAYERS_TO_LOAD"),
      (V[(V.HERO_SELECTION = 2)] = "HERO_SELECTION"),
      (V[(V.STRATEGY_TIME = 3)] = "STRATEGY_TIME"),
      (V[(V.PRE_GAME = 4)] = "PRE_GAME"),
      (V[(V.GAME_IN_PROGRESS = 5)] = "GAME_IN_PROGRESS"),
      (V[(V.POST_GAME = 6)] = "POST_GAME"),
      (V[(V.DISCONNECT = 7)] = "DISCONNECT"),
      (V[(V.TEAM_SHOWCASE = 8)] = "TEAM_SHOWCASE"),
      (V[(V.CUSTOM_GAME_SETUP = 9)] = "CUSTOM_GAME_SETUP"),
      (V[(V.WAIT_FOR_MAP_TO_LOAD = 10)] = "WAIT_FOR_MAP_TO_LOAD"),
      (V[(V.LAST = 11)] = "LAST");
    var X = (function() {
      function e() {
        (this.m_nLastUpdated = Date.now()),
          (this.m_mapLanguages = m.observable.map());
      }
      return (
        (e.prototype.GetTokenList = function(e) {
          return this.m_mapLanguages.has(e) ? this.m_mapLanguages.get(e) : null;
        }),
        e
      );
    })();
    function Q(e, t, n, o, i) {
      if (!e.startsWith("#"))
        return console.log("Token doesn't start with #:", e), "";
      var r = e;
      e = e.toLowerCase();
      var a = "";
      if (
        (t && t.has(e) && (a = t.get(e)),
        !a && n && n.has(e) && (a = n.get(e)),
        a)
      ) {
        var s = a.match(/{[A-za-z0-9_%#:]+}/g);
        if (s)
          for (var c = 0, l = s; c < l.length; c++) {
            var p = l[c],
              u = Q(Z(p.slice(1, -1), i), t, n, o, i);
            if (!u) return "";
            a = a.replace(p, u);
          }
        a = Z(a, i);
      } else if (
        ((t || n) &&
          console.log(
            "No loc found for appid",
            o,
            r,
            "Tokens:",
            t,
            "Fallback:",
            n
          ),
        t && 1 != G.a.EUNIVERSE)
      )
        return e;
      return a;
    }
    function Z(e, t) {
      var n = e.match(/%[A-Za-z0-9_:]+%/g);
      if (n)
        for (var o = 0, i = n; o < i.length; o++) {
          var r = i[o],
            a = r.slice(1, -1).toLowerCase(),
            s = t.get(a);
          if (!s) return console.log("No rich presence found for", a), "";
          e = e.replace(r, s);
        }
      return e;
    }
    var $ = "fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb";
    function ee(e, t) {
      var n = ".jpg";
      44 == e.length && ((n = e.substr(-4)), (e = e.substr(0, 40)));
      var o = G.a.MEDIA_CDN_COMMUNITY_URL + "images/avatars/";
      return (o += e.substr(0, 2) + "/" + e), t && (o += t), (o += n);
    }
    var te = (function() {
        function e(e) {
          (this.m_bInitialized = !1),
            (this.m_ePersonaState = 0),
            (this.m_unGamePlayedAppID = 0),
            (this.m_gameid = "0"),
            (this.m_unPersonaStateFlags = 0),
            (this.m_strPlayerName = ""),
            (this.m_strAvatarHash = $),
            (this.m_rtLastSeenOnline = 0),
            (this.m_strGameExtraInfo = ""),
            (this.m_unGameServerIP = 0),
            (this.m_unGameServerPort = 0),
            (this.m_game_lobby_id = ""),
            (this.m_mapRichPresence = m.observable.map()),
            (this.m_bNameInitialized = !1),
            (this.m_bStatusInitialized = !1),
            (this.m_steamid = e);
        }
        return (
          (e.prototype.Reset = function() {
            (this.m_ePersonaState = 0),
              (this.m_unGamePlayedAppID = 0),
              (this.m_gameid = "0"),
              (this.m_strGameExtraInfo = ""),
              (this.m_unGameServerIP = 0),
              (this.m_unGameServerPort = 0),
              (this.m_game_lobby_id = ""),
              this.m_mapRichPresence.clear(),
              (this.m_broadcastId = void 0),
              (this.m_broadcastAccountId = void 0),
              (this.m_broadcastAppId = void 0),
              (this.m_broadcastViewerCount = void 0),
              (this.m_strBroadcastTitle = void 0);
          }),
          (e.prototype.UpdateFromMessage = function(e, t) {
            if (
              (0 != (1 & e) &&
                ((this.m_bStatusInitialized = !0),
                (this.m_ePersonaState = t.persona_state() || 0),
                0 != this.m_ePersonaState
                  ? ((this.m_unGamePlayedAppID = t.game_played_app_id() || 0),
                    (this.m_gameid = t.gameid() || "0"),
                    (this.m_strGameExtraInfo = t.game_name() || ""),
                    (this.m_unGameServerIP = t.game_server_ip() || 0),
                    (this.m_unGameServerPort = t.game_server_port() || 0),
                    (this.m_game_lobby_id = t.game_lobby_id() || ""))
                  : this.Reset()),
              0 != (2 & e) &&
                ((this.m_bNameInitialized = !0),
                (this.m_strPlayerName = t.player_name() || "")),
              0 != (64 & e) &&
                (this.m_rtLastSeenOnline =
                  t.last_seen_online() || t.last_logoff() || 0),
              0 != (16 & e))
            ) {
              var n = t.avatar_hash(),
                o = !0;
              if (n) {
                for (var i = 0; i < n.length && o; i++) o = !n[i];
                this.m_strAvatarHash = o ? $ : p(n);
              }
            }
            if (
              (t.persona_state_flags() &&
                (this.m_unPersonaStateFlags = t.persona_state_flags()),
              0 != (4096 & e))
            ) {
              this.m_mapRichPresence.clear();
              for (var r = 0, a = t.rich_presence(); r < a.length; r++) {
                var s = a[r];
                this.m_mapRichPresence.set(s.key().toLowerCase(), s.value());
              }
            }
            if (
              (0 != (8192 & e) && (this.m_broadcastId = t.broadcast_id()),
              0 != (16384 & e))
            ) {
              var c = E.a.InitFromAccountID(t.watching_broadcast_accountid()),
                l = c.ConvertTo64BitString();
              "public" != G.a.WEB_UNIVERSE || K[l]
                ? ((this.m_broadcastAccountId = t.watching_broadcast_accountid()),
                  (this.m_broadcastAppId = t.watching_broadcast_appid()),
                  (this.m_broadcastViewerCount = t.watching_broadcast_viewers()),
                  (this.m_strBroadcastTitle = t.watching_broadcast_title()),
                  c.BIsValid() &&
                    (this.m_broadcastAppId || (this.m_broadcastAppId = J),
                    (this.m_strBroadcastTitle = Y)))
                : ((this.m_broadcastAccountId = 0),
                  (this.m_broadcastAppId = 0),
                  (this.m_broadcastViewerCount = 0),
                  (this.m_strBroadcastTitle = ""));
            }
            this.m_bNameInitialized &&
              this.m_bStatusInitialized &&
              (this.m_bInitialized = !0);
          }),
          (e.prototype.GetAccountID = function() {
            return this.m_steamid.GetAccountID();
          }),
          Object.defineProperty(e.prototype, "is_online", {
            get: function() {
              return 0 != this.m_ePersonaState && 7 != this.m_ePersonaState;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_ingame", {
            get: function() {
              return (
                this.is_online &&
                (0 != this.m_unGamePlayedAppID || "0" != this.m_gameid)
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_in_nonsteam_game", {
            get: function() {
              return 0 == this.m_unGamePlayedAppID && "0" != this.m_gameid;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_in_joinable_game", {
            get: function() {
              return (
                this.has_joinable_game_flag ||
                this.is_in_valid_lobby ||
                this.has_server_ip
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_joinable_game_flag", {
            get: function() {
              return 0 != (2 & this.m_unPersonaStateFlags);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_in_valid_lobby", {
            get: function() {
              return this.m_game_lobby_id && "0" != this.m_game_lobby_id;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_server_ip", {
            get: function() {
              return 0 != this.m_unGameServerIP;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_awayOrSnooze", {
            get: function() {
              return 3 == this.m_ePersonaState || 4 == this.m_ePersonaState;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "last_seen_online", {
            get: function() {
              return this.m_rtLastSeenOnline;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClearStateOnDisconnect = function() {
            0 != this.m_ePersonaState && this.Reset();
          }),
          Object.defineProperty(e.prototype, "current_game_name", {
            get: function() {
              return this.m_strGameExtraInfo
                ? this.m_strGameExtraInfo
                : this.m_unGamePlayedAppID
                  ? Yo.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID)
                      .m_strName
                  : "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "current_game_icon_url", {
            get: function() {
              return this.m_unGamePlayedAppID
                ? Yo.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID).icon_url
                : "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_appinfo_ready", {
            get: function() {
              return (
                !this.m_unGamePlayedAppID ||
                Yo.AppInfoStore.GetAppInfo(this.m_unGamePlayedAppID)
                  .m_bInitialized
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetLocalizedRichPresenceDisplayString = function(e) {
            var t = this.m_mapRichPresence.get("steam_display"),
              n = G.a.LANGUAGE;
            return Q(
              t,
              e.GetTokenList(n),
              "english" != n ? e.GetTokenList("english") : null,
              this.m_unGamePlayedAppID,
              this.m_mapRichPresence
            );
          }),
          Object.defineProperty(e.prototype, "current_game_rich_presence", {
            get: function() {
              if (this.m_mapRichPresence.has("steam_display")) {
                var e = Yo.AppInfoStore.GetRichPresenceLoc(
                  this.m_unGamePlayedAppID
                );
                if (e) return this.GetLocalizedRichPresenceDisplayString(e);
              }
              return "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "player_group", {
            get: function() {
              return this.m_mapRichPresence.has("steam_player_group")
                ? this.m_mapRichPresence.get("steam_player_group")
                : "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "player_group_size", {
            get: function() {
              return this.m_mapRichPresence.has("steam_player_group_size")
                ? Number.parseInt(
                    this.m_mapRichPresence.get("steam_player_group_size")
                  )
                : 0;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "online_state", {
            get: function() {
              return this.is_online
                ? this.is_ingame
                  ? "in-game"
                  : IsFeatureBroadcastEnabled() && this.m_broadcastAccountId
                    ? "watchingbroadcast"
                    : "online"
                : "offline";
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BHasAvatarSet = function() {
            return this.m_strAvatarHash != $;
          }),
          Object.defineProperty(e.prototype, "avatar_url", {
            get: function() {
              return ee(this.m_strAvatarHash);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_medium", {
            get: function() {
              return ee(this.m_strAvatarHash, "_medium");
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_full", {
            get: function() {
              return ee(this.m_strAvatarHash, "_full");
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.observable], e.prototype, "m_bInitialized", void 0),
          R.c([m.observable], e.prototype, "m_ePersonaState", void 0),
          R.c([m.observable], e.prototype, "m_unGamePlayedAppID", void 0),
          R.c([m.observable], e.prototype, "m_gameid", void 0),
          R.c([m.observable], e.prototype, "m_unPersonaStateFlags", void 0),
          R.c([m.observable], e.prototype, "m_strPlayerName", void 0),
          R.c([m.observable], e.prototype, "m_strAvatarHash", void 0),
          R.c([m.observable], e.prototype, "m_rtLastSeenOnline", void 0),
          R.c([m.observable], e.prototype, "m_strGameExtraInfo", void 0),
          R.c([m.observable], e.prototype, "m_unGameServerIP", void 0),
          R.c([m.observable], e.prototype, "m_unGameServerPort", void 0),
          R.c([m.observable], e.prototype, "m_game_lobby_id", void 0),
          R.c([m.observable], e.prototype, "m_broadcastId", void 0),
          R.c([m.observable], e.prototype, "m_broadcastAccountId", void 0),
          R.c([m.observable], e.prototype, "m_broadcastAppId", void 0),
          R.c([m.observable], e.prototype, "m_broadcastViewerCount", void 0),
          R.c([m.observable], e.prototype, "m_strBroadcastTitle", void 0),
          R.c([m.computed], e.prototype, "current_game_name", null),
          R.c([m.computed], e.prototype, "current_game_icon_url", null),
          R.c([m.computed], e.prototype, "current_game_rich_presence", null),
          R.c([m.computed], e.prototype, "online_state", null),
          R.c([m.computed], e.prototype, "avatar_url", null),
          R.c([m.computed], e.prototype, "avatar_url_medium", null),
          R.c([m.computed], e.prototype, "avatar_url_full", null),
          e
        );
      })(),
      ne = (function() {
        function e(e) {
          (this.m_bInitialized = !1),
            (this.m_bLocalUserOwnsApp = void 0),
            (this.m_unAppID = e);
        }
        return (
          Object.defineProperty(e.prototype, "appid", {
            get: function() {
              return this.m_unAppID;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_initialized", {
            get: function() {
              return this.m_bInitialized;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_valid", {
            get: function() {
              return this.m_bInitialized && !!this.m_strName;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return this.m_strName;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "header_image_url", {
            get: function() {
              return (
                G.a.MEDIA_CDN_URL +
                "steam/apps/" +
                this.m_unAppID +
                "/header.jpg"
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "icon_url", {
            get: function() {
              return this.BuildAppURL(
                this.m_strIconURL,
                "061818254b2c99ac49e6626adb128ed1282a392f"
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "logo_url", {
            get: function() {
              return this.BuildAppURL(
                this.m_strLogoURL,
                "338200c5d6c4d9bdcf6632642a2aeb591fb8a5c2.gif"
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BuildAppURL = function(e, t) {
            return e
              ? G.a.MEDIA_CDN_COMMUNITY_URL +
                  "images/apps/" +
                  this.appid +
                  "/" +
                  e +
                  ".jpg"
              : ee(t);
          }),
          R.c([m.observable], e.prototype, "m_bInitialized", void 0),
          R.c([m.observable], e.prototype, "m_strName", void 0),
          R.c([m.observable], e.prototype, "m_strIconURL", void 0),
          R.c([m.observable], e.prototype, "m_strLogoURL", void 0),
          R.c([m.observable], e.prototype, "m_bLocalUserOwnsApp", void 0),
          R.c([m.computed], e.prototype, "icon_url", null),
          R.c([m.computed], e.prototype, "logo_url", null),
          e
        );
      })(),
      oe = (function() {
        function e() {
          (this.m_mapAppInfo = new Map()),
            (this.m_mapRichPresenceLoc = m.observable.map()),
            (this.m_cAppInfoRequestsInFlight = 0),
            (this.m_setPendingAppInfo = new Set()),
            (this.m_fnCallbackOnAppInfoLoaded = new D()),
            G.a.IN_CLIENT;
        }
        return (
          (e.prototype.Init = function(e) {
            this.m_CMInterface = e;
          }),
          (e.prototype.BHavePendingAppInfoRequests = function() {
            return (
              0 < this.m_setPendingAppInfo.size ||
              0 < this.m_cAppInfoRequestsInFlight
            );
          }),
          (e.prototype.RegisterCallbackOnLoad = function(e) {
            if (!this.BHavePendingAppInfoRequests())
              return (
                AssertMsg(
                  !1,
                  "Registering for callback on appinfo load, but nothing queued"
                ),
                void e()
              );
            this.m_fnCallbackOnAppInfoLoaded.Register(e);
          }),
          (e.prototype.GetAppInfo = function(e) {
            AssertMsg(
              this.m_CMInterface,
              "CAppInfoStore.GetAppInfo called before Init"
            );
            var t = this.m_mapAppInfo.get(e);
            return (
              t ||
                ((t = new ne(e)),
                this.m_mapAppInfo.set(e, t),
                this.QueueAppInfoRequest(t)),
              t
            );
          }),
          (e.prototype.QueueAppInfoRequest = function(e) {
            this.m_setPendingAppInfo.add(e.appid),
              void 0 === this.m_iDelayLoadAppInfo &&
                (this.m_iDelayLoadAppInfo = SetBackgroundTimeout(
                  this.LoadAppInfo.bind(this),
                  25
                ));
          }),
          (e.prototype.LoadAppInfo = function() {
            var r = this;
            (this.m_iDelayLoadAppInfo = void 0),
              this.m_CMInterface.RunWhenLoggedOn(function() {
                var e = Array.from(r.m_setPendingAppInfo);
                if ((r.m_setPendingAppInfo.clear(), e.length)) {
                  r.m_cAppInfoRequestsInFlight++;
                  var t = u.Init(z.b);
                  t.Body().set_appids(e),
                    z.c
                      .GetApps(r.m_CMInterface.GetServiceTransport(), t)
                      .then(function(e) {
                        if (1 == e.GetEResult())
                          for (
                            var t = 0, n = e.Body().apps();
                            t < n.length;
                            t++
                          ) {
                            var o = n[t],
                              i = r.m_mapAppInfo.get(o.appid());
                            AssertMsg(
                              i,
                              "Got appinfo response for unrequest appid " +
                                o.appid()
                            ),
                              i && r.OnAppInfoUpdate(i, o);
                          }
                        0 == --r.m_cAppInfoRequestsInFlight &&
                          0 == r.m_setPendingAppInfo.size &&
                          (r.m_fnCallbackOnAppInfoLoaded.Dispatch(),
                          r.m_fnCallbackOnAppInfoLoaded.ClearAllCallbacks());
                      });
                }
              });
          }),
          (e.prototype.OnAppInfoUpdate = function(e, t) {
            (e.m_bInitialized = !0),
              (e.m_strName = t.name()),
              (e.m_strIconURL = t.icon()),
              (e.m_strLogoURL = t.logo());
          }),
          (e.prototype.GetRichPresenceLoc = function(e) {
            if (this.m_mapRichPresenceLoc.has(e.toString())) {
              var t = this.m_mapRichPresenceLoc.get(e.toString());
              return (
                t.m_nLastUpdated + 72e5 < Date.now() &&
                  this.QueueRichPresenceLocRequest(t, e),
                this.m_mapRichPresenceLoc.get(e.toString())
              );
            }
            var n = new X();
            return (
              this.m_mapRichPresenceLoc.set(e.toString(), n),
              this.QueueRichPresenceLocRequest(n, e),
              n
            );
          }),
          (e.prototype.OnRichPresenceLocUpdate = function(e, t, n) {
            e.m_nLastUpdated = Date.now();
            for (var o = 0, i = n; o < i.length; o++) {
              var r = i[o],
                a = r.language(),
                s = e.m_mapLanguages.get(a);
              s
                ? s.clear()
                : (e.m_mapLanguages.set(a, new Map()),
                  (s = e.m_mapLanguages.get(a)));
              for (var c = 0, l = r.tokens(); c < l.length; c++) {
                var p = l[c];
                s.set(p.name().toLowerCase(), p.value());
              }
            }
          }),
          (e.prototype.QueueRichPresenceLocRequest = function(t, n) {
            var o = this;
            this.m_CMInterface.RunWhenLoggedOn(function() {
              var e = u.Init(z.a);
              e.Body().set_appid(n),
                e.Body().set_language(G.a.LANGUAGE),
                z.c
                  .GetAppRichPresenceLocalization(
                    o.m_CMInterface.GetServiceTransport(),
                    e
                  )
                  .then(function(e) {
                    1 == e.GetEResult() &&
                      o.OnRichPresenceLocUpdate(t, n, e.Body().token_lists());
                  });
            });
          }),
          R.c([m.action], e.prototype, "OnAppInfoUpdate", null),
          R.c([m.action], e.prototype, "OnRichPresenceLocUpdate", null),
          e
        );
      })(),
      ie = n("K5Io"),
      re = n("oh5H"),
      ae = (function() {
        function e() {}
        return (
          (e.prototype.OnTabActivate = function() {
            (this.m_msLastActive = performance.now()),
              this.InternalOnTabActivate();
          }),
          (e.prototype.GetTimeLastActivate = function() {
            return this.m_msLastActive || 0;
          }),
          (e.prototype.IsChatRoom = function() {
            return !1;
          }),
          (e.prototype.IsFriendChat = function() {
            return !1;
          }),
          e
        );
      })(),
      se = 0,
      ce = (function() {
        function e(e) {
          (this.m_vecTabs = m.observable.array(null, { deep: !1 })),
            (this.m_id = se++),
            (this.m_browserContext = e);
        }
        return (
          (e.prototype.GetBrowserContext = function() {
            return this.m_browserContext;
          }),
          (e.prototype.GetTitle = function() {
            return this.m_activeTab
              ? 2 == this.tabCount
                ? Object(re.b)(
                    "#WindowTitle_ChatTabTitle",
                    this.m_activeTab.GetTabName()
                  )
                : 2 < this.tabCount
                  ? Object(re.b)(
                      "#WindowTitle_ChatTabTitlePlural",
                      this.m_activeTab.GetTabName(),
                      this.tabCount - 1
                    )
                  : this.m_activeTab.GetTabName()
              : "";
          }),
          (e.prototype.OnWindowFocus = function() {
            this.m_activeTab && this.m_activeTab.OnTabFocus();
          }),
          Object.defineProperty(e.prototype, "tabs", {
            get: function() {
              return this.m_vecTabs;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "tabCount", {
            get: function() {
              return this.m_vecTabs.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "activeTab", {
            get: function() {
              return this.m_activeTab;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetTabSetIdentifier = function() {
            return this.m_vecTabs
              .map(function(e) {
                return e.GetUniqueID();
              })
              .join("_");
          }),
          (e.prototype.GetTabForChat = function(e) {
            for (var t = 0, n = this.m_vecTabs; t < n.length; t++) {
              var o = n[t];
              if (o.IsTabForChat(e)) return o;
            }
            return null;
          }),
          (e.prototype.GetTabByUniqueID = function(e) {
            for (var t = 0, n = this.m_vecTabs; t < n.length; t++) {
              var o = n[t];
              if (o.GetUniqueID() == e) return o;
            }
            return null;
          }),
          (e.prototype.BHasTab = function(e) {
            return -1 !== this.m_vecTabs.indexOf(e);
          }),
          (e.prototype.AddTab = function(e) {
            -1 == this.m_vecTabs.indexOf(e) &&
              (this.m_vecTabs.push(e),
              !this.m_activeTab &&
                0 < this.m_vecTabs.length &&
                (this.m_activeTab = this.m_vecTabs[0]));
          }),
          (e.prototype.ActivateTab = function(e) {
            -1 != this.m_vecTabs.indexOf(e)
              ? (this.activeTab &&
                  this.activeTab != e &&
                  this.activeTab.OnTabDeactivate(),
                (this.m_activeTab = e).OnTabActivate(),
                this.Focus())
              : console.log("Tab not found");
          }),
          (e.prototype.ActivateNextTab = function() {
            var e = this.m_vecTabs.indexOf(this.m_activeTab);
            (e = (e + 1) % this.m_vecTabs.length),
              this.ActivateTab(this.m_vecTabs[e]);
          }),
          (e.prototype.ActivatePreviousTab = function() {
            var e = this.m_vecTabs.indexOf(this.m_activeTab);
            (e = (e + this.m_vecTabs.length - 1) % this.m_vecTabs.length),
              this.ActivateTab(this.m_vecTabs[e]);
          }),
          (e.prototype.RemoveTab = function(e) {
            var t = this.m_vecTabs.indexOf(e);
            if (-1 == t) return !1;
            var n = e && e == this.m_activeTab;
            if ((this.m_vecTabs.splice(t, 1), n))
              if (this.m_vecTabs.length) {
                for (
                  var o = void 0, i = 0, r = this.m_vecTabs;
                  i < r.length;
                  i++
                ) {
                  var a = r[i];
                  (!o || a.GetTimeLastActivate() > o.GetTimeLastActivate()) &&
                    (o = a);
                }
                this.m_activeTab = o || this.m_vecTabs[Math.max(t - 1, 0)];
              } else this.m_activeTab = void 0;
            return (
              0 == this.m_vecTabs.length && Yo.UIStore.CloseTabSet(this), !0
            );
          }),
          (e.prototype.MoveTabAfter = function(e, t) {
            var n = this.m_vecTabs.indexOf(t);
            -1 != n && this.MoveTabToIndex(e, n + 1);
          }),
          (e.prototype.MoveTabToIndex = function(e, t) {
            var n = this.m_vecTabs.indexOf(e);
            -1 != n &&
              w.e(this.m_vecTabs, n, Math.min(t, this.m_vecTabs.length - 1));
          }),
          (e.prototype.Focus = function() {
            Yo.UIStore.FocusTabSet(this);
          }),
          (e.prototype.OnPopupClosed = function(e) {
            e && Yo.UIStore.SetSuppressBrowserContextBroadcasting(!0),
              Yo.UIStore.OnTabSetClosed(this),
              this.CloseAllTabs(),
              e && Yo.UIStore.SetSuppressBrowserContextBroadcasting(!1);
          }),
          (e.prototype.CloseAllTabs = function() {
            this.m_activeTab = void 0;
            for (var e = 0, t = this.m_vecTabs; e < t.length; e++) {
              var n = t[e];
              Yo.UIStore.CloseTab(this.m_browserContext, n, !0);
            }
            this.m_vecTabs.clear();
          }),
          Object.defineProperty(e.prototype, "is_popup_active", {
            get: function() {
              return Yo.UIStore.BIsTabSetActive(this);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_popup_visible", {
            get: function() {
              return Yo.UIStore.BIsTabSetVisible(this);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_popup_focused", {
            get: function() {
              return Yo.UIStore.BIsTabSetFocused(this);
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Serialize = function() {
            for (var e = [], t = 0, n = this.m_vecTabs; t < n.length; t++) {
              var o = n[t];
              o.GetUniqueID().startsWith("br") || e.push(o.GetUniqueID());
            }
            return {
              tabs: e,
              active_tab: this.activeTab && this.activeTab.GetUniqueID()
            };
          }),
          R.c([m.observable], e.prototype, "m_id", void 0),
          R.c([m.observable], e.prototype, "m_activeTab", void 0),
          R.c([m.action], e.prototype, "AddTab", null),
          R.c([m.action], e.prototype, "ActivateTab", null),
          R.c([m.action], e.prototype, "ActivateNextTab", null),
          R.c([m.action], e.prototype, "ActivatePreviousTab", null),
          R.c([m.action], e.prototype, "RemoveTab", null),
          R.c([m.action], e.prototype, "OnPopupClosed", null),
          R.c([m.action], e.prototype, "CloseAllTabs", null),
          e
        );
      })(),
      le = n("J0bI"),
      pe = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.BIsExpired = function() {
            return Yo.GetServerRTime32() >= this.m_rtTimeExpires;
          }),
          (t.prototype.InitFromInviteLinkInfo = function(e) {
            (this.m_ulChatRoomGroupID = e.group_summary().chat_group_id()),
              (this.m_ulChatID = e.chat_id());
            var t = new E.a(e.steamid_sender());
            t.BIsIndividualAccount() &&
              (this.m_unAccountIDInviter = t.GetAccountID()),
              (this.m_rtTimeExpires = e.time_expires()),
              (this.m_bIsBanned = e.banned()),
              (this.m_rtKickExpires = e.time_kick_expire()),
              (this.m_bValid = !0),
              (this.m_bReady = !0);
          }),
          (t.prototype.InitInvalid = function() {
            (this.m_bValid = !1), (this.m_bReady = !0);
          }),
          (t.prototype.InitDirectInvite = function(e, t, n, o) {
            void 0 === n && (n = !1),
              void 0 === o && (o = void 0),
              (this.m_ulChatRoomGroupID = e),
              (this.m_ulChatID = t),
              (this.m_bIsBanned = n),
              (this.m_rtKickExpires = o),
              (this.m_rtTimeExpires = S.b),
              (this.m_bValid = !0),
              (this.m_bReady = !0);
          }),
          R.c([m.action], t.prototype, "InitFromInviteLinkInfo", null),
          R.c([m.action], t.prototype, "InitInvalid", null),
          R.c([m.action], t.prototype, "InitDirectInvite", null),
          t
        );
      })(le.b),
      ue = (function() {
        function e(e) {
          (this.m_mapInviteByCode = new Map()), (this.m_ChatStore = e);
        }
        return (
          (e.prototype.JoinChatGroup = function(e, t, n) {
            var o = new pe();
            return o.InitDirectInvite(e, t), this.AcceptInvite(o, n);
          }),
          (e.prototype.AcceptInvite = function(e, r) {
            var a = this;
            null == r && (r = Yo.GetDefaultBrowserContext());
            var t = u.Init(ie.v);
            return (
              t.Body().set_chat_group_id(e.GetChatRoomGroupID()),
              e.BIsInviteLink() && t.Body().set_invite_code(e.GetInviteCode()),
              e.GetChatID() && t.Body().set_chat_id(e.GetChatID()),
              ie.V.JoinChatRoomGroup(
                this.m_ChatStore.CMInterface.GetServiceTransport(),
                t
              ).then(function(e) {
                var t = { result: e.GetEResult() };
                if (1 == t.result) {
                  var n = a.m_ChatStore.AddJoinedChatRoomGroup(
                    e.Body().state(),
                    e.Body().user_chat_state()
                  );
                  Yo.UIStore.ShowAndOrActivateChatRoomGroup(r, n, !0);
                  var o = e.Body().join_chat_id();
                  if (n) {
                    var i = n.GetChatRoom(o);
                    i && i.StartVoiceChat();
                  }
                } else 15 == t.result && (t.time = e.Body().time_expire());
                return t;
              })
            );
          }),
          (e.prototype.GetInviteFromCode = function(e) {
            var t = this,
              n = this.m_mapInviteByCode.get(e);
            if (
              (n || ((n = new pe(e)), this.m_mapInviteByCode.set(e, n)),
              !n.BIsReady() ||
                !this.m_ChatStore.GetChatRoomGroup(n.GetChatRoomGroupID()))
            ) {
              var o = u.Init(ie.p);
              o.Body().set_invite_code(e),
                ie.V.GetInviteLinkInfo(
                  this.m_ChatStore.CMInterface.GetServiceTransport(),
                  o
                ).then(function(e) {
                  1 == e.GetEResult()
                    ? (t.m_ChatStore.AddKnownChatRoomGroup(
                        e.Body().group_summary(),
                        e.Body().user_chat_group_state()
                      ),
                      n.InitFromInviteLinkInfo(e.Body()))
                    : n.InitInvalid();
                });
            }
            return n;
          }),
          (e.prototype.GetDirectInviteInfo = function(t, n, e) {
            var o = this,
              i = new pe(),
              r = this.m_ChatStore.GetChatRoomGroup(t);
            if (r && r.GetChatRoom(n)) i.InitDirectInvite(t, n);
            else {
              var a = u.Init(ie.o);
              a
                .Body()
                .set_steamid_invitee(
                  E.a.InitFromAccountID(e).ConvertTo64BitString()
                ),
                a.Body().set_chat_group_id(t),
                a.Body().set_chat_id(n),
                ie.V.GetInviteInfo(
                  this.m_ChatStore.CMInterface.GetServiceTransport(),
                  a
                ).then(function(e) {
                  if (
                    1 != e.GetEResult() ||
                    !e
                      .Body()
                      .group_summary()
                      .chat_group_id()
                  )
                    return (
                      console.log(
                        "GetDirectInviteInfo: respose EResult " + e.GetEResult()
                      ),
                      void i.InitInvalid()
                    );
                  o.m_ChatStore.AddKnownChatRoomGroup(
                    e.Body().group_summary(),
                    null
                  ),
                    i.InitDirectInvite(
                      t,
                      n,
                      e.Body().banned(),
                      e.Body().time_kick_expire()
                    );
                });
            }
            return i;
          }),
          e
        );
      })(),
      me = (function() {
        function e(e, t, n, o, i, r) {
          (this.unAccountIDInviter = e),
            (this.rtTimestamp = t),
            (this.appID = n),
            (this.connectString = o),
            (this.lobbyID = r),
            (this.bDismissed = i),
            (this.bAccepted = !1);
        }
        return (
          (e.prototype.AcceptGameInvite = function() {
            var e,
              t = E.a.InitFromAccountID(this.unAccountIDInviter);
            null != this.lobbyID
              ? (e =
                  "steam://joinlobby/" +
                  this.appID +
                  "/" +
                  this.lobbyID +
                  "/" +
                  t.ConvertTo64BitString())
              : ((e =
                  "steam://rungame/" +
                  this.appID +
                  "/" +
                  t.ConvertTo64BitString()),
                void 0 !== this.connectString &&
                  (e += "/" + encodeURIComponent(this.connectString))),
              Yo.OpenURLInBrowser(e, qo),
              (this.bAccepted = !0),
              Yo.ChatStore.GameInviteStore.RecordDismissTime(this);
          }),
          (e.prototype.DismissInvite = function() {
            (this.bDismissed = !0),
              Yo.ChatStore.GameInviteStore.RecordDismissTime(this);
          }),
          R.c([m.observable], e.prototype, "bDismissed", void 0),
          R.c([m.observable], e.prototype, "bAccepted", void 0),
          R.c([m.action], e.prototype, "AcceptGameInvite", null),
          R.c([m.action], e.prototype, "DismissInvite", null),
          e
        );
      })(),
      de = { dismisstimes: {} },
      he = "GameInvites",
      _e = (function() {
        function e() {
          (this.m_mapGameInvites = new Map()),
            (this.m_mapDismissedInvites = m.observable.map()),
            (this.m_mapInviteByCode = new Map());
        }
        return (
          (e.prototype.Init = function() {
            var r = this;
            Yo.SettingsStore.GetObjectFromLocalStorageWhenReady(he, de).then(
              function(e) {
                var t = new Date();
                for (var n in (t.setDate(t.getDate() - 14),
                r.m_mapDismissedInvites.clear(),
                e.dismisstimes)) {
                  var o = parseInt(n),
                    i = e.dismisstimes[n];
                  new Date(1e3 * i) < t || r.m_mapDismissedInvites.set(o, i);
                }
              }
            );
          }),
          (e.prototype.RegisterGameInvite = function(e, t, n, o, i) {
            var r = this.m_mapGameInvites.get(e);
            r || ((r = new Map()), this.m_mapGameInvites.set(e, r));
            var a = r.get(t);
            if (!a) {
              var s = !1,
                c = this.m_mapDismissedInvites.get(e);
              c && (s = t <= c),
                (a = new me(e, t, n, o, s, i)),
                r.set(t, a),
                r.forEach(function(e) {
                  e.rtTimestamp < t && e.DismissInvite();
                });
            }
            return a;
          }),
          (e.prototype.RecordDismissTime = function(e) {
            var t = this.m_mapDismissedInvites.get(e.unAccountIDInviter);
            (t && t > e.rtTimestamp) ||
              (this.m_mapDismissedInvites.set(
                e.unAccountIDInviter,
                e.rtTimestamp
              ),
              this.WriteToLocalStorage());
          }),
          (e.prototype.WriteToLocalStorage = function() {
            Yo.SettingsStore.StoreObjectInLocalStorage(he, {
              dismisstimes: this.m_mapDismissedInvites
            });
          }),
          e
        );
      })(),
      fe = (function() {
        function e() {
          this.bCollapsed = !1;
        }
        return (
          (e.prototype.IsEmpty = function() {
            return (
              !this.bCollapsed &&
              void 0 === this.nDefaultWidth &&
              void 0 === this.nDesiredWidth
            );
          }),
          e
        );
      })(),
      ge = "ChatEmbeds",
      be = (function() {
        function e() {
          this.m_mapEmbed = new m.ObservableMap();
        }
        return (
          (e.prototype.Init = function() {
            var o = this;
            Yo.SettingsStore.GetObjectFromLocalStorageWhenReady(ge, {}).then(
              function(e) {
                for (var t in (o.m_mapEmbed.clear(), e)) {
                  var n = new fe();
                  Object.assign(n, e[t]), o.m_mapEmbed.set(t, n);
                }
              }
            );
          }),
          (e.prototype.GetKey = function(e, t) {
            return t + "_" + e;
          }),
          (e.prototype.EvictOldestIfNecessary = function() {
            if (100 < this.m_mapEmbed.size) {
              var e = Array.from(this.m_mapEmbed.keys()).sort()[0];
              this.m_mapEmbed.delete(e);
            }
          }),
          (e.prototype.GetOrCreateEmbedData = function(e, t) {
            var n = this.GetKey(e, t),
              o = this.m_mapEmbed.get(n);
            return o || ((o = new fe()).bCollapsed = !1), o;
          }),
          (e.prototype.SaveEmbedData = function(e, t, n) {
            n.IsEmpty()
              ? this.m_mapEmbed.delete(this.GetKey(e, t))
              : this.m_mapEmbed.set(this.GetKey(e, t), n),
              this.EvictOldestIfNecessary(),
              this.WriteToLocalStorage();
          }),
          (e.prototype.WriteToLocalStorage = function() {
            Yo.SettingsStore.StoreObjectInLocalStorage(ge, this.m_mapEmbed);
          }),
          (e.prototype.GetCollapsedState = function(e, t) {
            var n = this.m_mapEmbed.get(this.GetKey(e, t));
            return !(!n || !n.bCollapsed);
          }),
          (e.prototype.SetCollapsedState = function(e, t, n) {
            var o = this.GetOrCreateEmbedData(e, t);
            (o.bCollapsed = n), this.SaveEmbedData(e, t, o);
          }),
          (e.prototype.GetWidths = function(e, t) {
            var n = this.m_mapEmbed.get(this.GetKey(e, t));
            if (n && n.nDesiredWidth && n.nDefaultWidth)
              return {
                nDesiredWidth: n.nDesiredWidth,
                nDefaultWidth: n.nDefaultWidth
              };
          }),
          (e.prototype.SetWidths = function(e, t, n, o) {
            var i = this.GetOrCreateEmbedData(e, t);
            n == o
              ? (delete i.nDefaultWidth, delete i.nDesiredWidth)
              : ((i.nDesiredWidth = n), (i.nDefaultWidth = o)),
              this.SaveEmbedData(e, t, i);
          }),
          e
        );
      })(),
      ve = n("q1tI"),
      Se = n.n(ve),
      ye = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetArgument = function(e, t) {
            return (
              void 0 === t && (t = !1),
              !e || (t && void 0 === this.props.args[e])
                ? this.props.args[""]
                : this.props.args[e]
            );
          }),
          t
        );
      })(ve.Component),
      Ce = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { failedToRender: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidCatch = function(e, t) {
            this.setState({ failedToRender: !0 });
          }),
          (e.prototype.render = function() {
            if (this.state.failedToRender) return this.props.bbcode;
            var e = this.props.bbcode;
            return (
              !0 !== this.props.bSkipTrimInput && (e = e.trim()),
              this.props.parser.ParseBBCode(e, this.props.context)
            );
          }),
          e
        );
      })(ve.PureComponent),
      Ie = (function() {
        function e(e) {
          this.m_dictComponents = e;
        }
        return (
          (e.prototype.dictComponents = function() {
            return this.m_dictComponents;
          }),
          (e.EscapeBBCode = function(e) {
            return e.replace(/[\[\\]/g, "\\$&");
          }),
          (e.prototype.StripBBCode = function(e, t) {
            for (
              var n = "", o = 0, i = this.Parse_FindBBCodeNodes(e.trim());
              o < i.length;
              o++
            ) {
              var r = i[o];
              1 == r.type && (n += r.text);
            }
            return n;
          }),
          (e.prototype.EndAndStartNewNode = function(e, t, n) {
            void 0 === n && (n = 0), e.push(t);
            var o = new De();
            return (o.type = n), o;
          }),
          (e.prototype.Parse_FindBBCodeNodes = function(e) {
            for (
              var t = [], n = new De(), o = !1, i = !1, r = 0;
              r < e.length;
              r++
            ) {
              var a = e[r];
              switch (n.type) {
                case 0:
                  "[" == a
                    ? ((n.type = 2), (i = !0))
                    : ((n.type = 1), "\\" == a ? (o = !o) : (n.text += a));
                  break;
                case 2:
                case 3:
                  "/" == a && i
                    ? ((n.type = 3), (n.text = ""), (i = !1))
                    : "[" != a || o
                      ? "]" != a || o
                        ? "\\" == a
                          ? ((n.text += a), (o = !o), (i = !1))
                          : ((n.text += a), (i = o = !1))
                        : (i && n.ConvertMalformedNodeToText(),
                          (n = this.EndAndStartNewNode(t, n)),
                          (i = !1))
                      : (n.ConvertMalformedNodeToText(),
                        (n = this.EndAndStartNewNode(t, n, 2)),
                        (i = !0));
                  break;
                case 1:
                  "[" != a || o
                    ? "\\" == a
                      ? (o && (n.text += a), (o = !o))
                      : ((n.text += a), (o = !1))
                    : ((n = this.EndAndStartNewNode(t, n, 2)), (i = !0));
              }
            }
            return (
              0 != n.type &&
                ((2 != n.type && 3 != n.type) || n.ConvertMalformedNodeToText(),
                t.push(n)),
              t
            );
          }),
          (e.prototype.ParseTagArguments = function(e) {
            if (!e || e.length < 1) return {};
            var t = {},
              n = "",
              o = "",
              i = 0,
              r = 0;
            "=" == e[0] && (i = 2);
            var a = !1;
            for (r++; r < e.length; r++) {
              var s = e[r],
                c = !0,
                l = !1;
              switch (i) {
                case 0:
                  if ("=" == s) return {};
                  if (" " == s) continue;
                  i = 1;
                  break;
                case 1:
                  ("=" != s && " " != s) ||
                    a ||
                    ((i = " " == s ? 0 : 2), (c = !1));
                  break;
                case 2:
                  " " == s
                    ? ((i = 0), (l = !(c = !1)))
                    : '"' == s ? (c = !(i = 4)) : (i = 3);
                  break;
                case 3:
                case 4:
                  ((" " == s && 4 != i && !a) || ('"' == s && 4 == i && !a)) &&
                    ((i = 0), (l = !(c = !1)));
              }
              c &&
                ("\\" != s || a
                  ? ((a = !1),
                    1 == i
                      ? (n += s)
                      : 3 == i || 4 == i
                        ? (o += s)
                        : AssertMsg(
                            !1,
                            "Not expecting to accumulate buffer in state %u",
                            i
                          ))
                  : (a = !0)),
                l && ((t[n] = o), (o = n = ""));
            }
            return 0 != i && (t[n] = o), t;
          }),
          e
        );
      })(),
      Oe = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.ParseBBCode = function(e, t) {
            var n = this.Parse_FindBBCodeNodes(e);
            return this.Parse_NotificationHandlers(n, t);
          }),
          (e.prototype.Parse_NotificationHandlers = function(e, t) {
            for (
              var n = void 0, o = this.dictComponents(), i = 0, r = e;
              i < r.length;
              i++
            ) {
              var a = r[i];
              if (2 == a.type) {
                var s = a.text.indexOf("="),
                  c = a.text.indexOf(" ");
                -1 != c && (-1 == s || c < s) && (s = c);
                var l = a.text,
                  p = void 0;
                0 < s && ((p = l.substr(s)), (l = l.substr(0, s))),
                  n || (n = []),
                  n.push({ tagname: l, argumentstring: p, text: "" });
              } else if (3 == a.type) {
                var u = n && n.pop();
                if (u && u.tagname == a.text && o[u.tagname])
                  return o[u.tagname]({
                    context: t,
                    tagname: u.tagname,
                    args: this.ParseTagArguments(u.argumentstring),
                    text: u.text
                  });
              } else
                1 == a.type &&
                  n &&
                  n.length &&
                  (n[n.length - 1].text += a.text);
            }
          }),
          e
        );
      })(Ie),
      Ee = (function() {
        function e() {
          this.m_rctElements = [];
        }
        return (
          (e.prototype.AppendText = function(e) {
            e.length && this.m_rctElements.push(e);
          }),
          (e.prototype.AppendNodes = function() {
            for (var e, t = [], n = 0; n < arguments.length; n++)
              t[n] = arguments[n];
            (e = this.m_rctElements).push.apply(e, t);
          }),
          Object.defineProperty(e.prototype, "elements", {
            get: function() {
              return this.m_rctElements;
            },
            enumerable: !0,
            configurable: !0
          }),
          e
        );
      })(),
      we = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.BuildTextComponent = function(e) {
            return e;
          }),
          (t.prototype.BuildNewlineComponent = function() {
            return ve.createElement("br");
          }),
          t
        );
      })(
        (function(e) {
          function t() {
            return (null !== e && e.apply(this, arguments)) || this;
          }
          return (
            R.d(t, e),
            (t.prototype.AppendText = function(e) {
              for (var t = e.indexOf("\n"); -1 !== t; t = e.indexOf("\n"))
                this.m_rctElements.push(
                  this.BuildTextComponent(e.substr(0, t))
                ),
                  this.m_rctElements.push(this.BuildNewlineComponent()),
                  (e = e.substr(t + 1));
              e.length && this.m_rctElements.push(this.BuildTextComponent(e));
            }),
            t
          );
        })(Ee)
      ),
      Me = (function(o) {
        function e(e, t) {
          void 0 === t && (t = Ee);
          var n = o.call(this, e) || this;
          return (n.m_accumulatorType = t), n;
        }
        return (
          R.d(e, o),
          (e.prototype.ParseBBCode = function(e, t) {
            var n = this.Parse_FindBBCodeNodes(e);
            return this.Parse_BuildReactComponents(n, t);
          }),
          (e.prototype.Parse_BuildReactComponents = function(e, t) {
            for (
              var n = new this.m_accumulatorType(),
                o = void 0,
                i = this.dictComponents(),
                r = 0,
                a = e;
              r < a.length;
              r++
            ) {
              var s = a[r];
              if (1 == s.type) n.AppendText(s.text);
              else if (2 == s.type) {
                var c = s.text.indexOf("="),
                  l = s.text.indexOf(" ");
                -1 != l && (-1 == c || l < c) && (c = l);
                var p = s.text,
                  u = void 0;
                0 < c && ((u = p.substr(c)), (p = p.substr(0, c))),
                  o || (o = []),
                  o.push({ accumulator: n, tagname: p, argumentstring: u }),
                  (n = new this.m_accumulatorType());
              } else if (3 == s.type) {
                var m = o && o.pop();
                if (m && m.tagname == s.text && i[m.tagname]) {
                  var d = i[m.tagname],
                    h = o.map(function(e) {
                      return e.tagname;
                    }),
                    _ = ve.createElement.apply(
                      ve,
                      [
                        d,
                        {
                          context: t,
                          tagname: m.tagname,
                          parentTags: h,
                          args: this.ParseTagArguments(m.argumentstring)
                        }
                      ].concat(n.elements)
                    );
                  (n = m.accumulator).AppendNodes(_);
                } else if (m) {
                  (f = m.accumulator).AppendText(
                    "[" +
                      m.tagname +
                      (m.argumentstring ? m.argumentstring : "") +
                      "]"
                  ),
                    f.AppendNodes.apply(f, n.elements),
                    f.AppendText("[/" + s.text + "]"),
                    (n = f);
                }
              }
            }
            for (; o && o.length; ) {
              var f,
                g = o.pop();
              (f = g.accumulator).AppendText(
                "[" +
                  g.tagname +
                  (g.argumentstring ? "=" + g.argumentstring : "") +
                  "]"
              ),
                f.AppendNodes.apply(f, n.elements),
                (n = f);
            }
            var b = n.elements;
            return 1 < b.length
              ? ve.createElement.apply(ve, [ve.Fragment, null].concat(b))
              : 1 == b.length ? b[0] : null;
          }),
          e
        );
      })(Ie),
      De = (function() {
        function e() {
          (this.type = 0), (this.text = "");
        }
        return (
          (e.prototype.ConvertMalformedNodeToText = function() {
            3 == this.type
              ? (this.text = "[/" + this.text)
              : 2 == this.type && (this.text = "[" + this.text),
              (this.type = 1);
          }),
          e
        );
      })(),
      Te = (function() {
        function o(e) {
          this.idGenerator =
            e ||
            function() {
              return "";
            };
        }
        return (
          (o.prototype.LOG = function() {
            for (var e = [], t = 0; t < arguments.length; t++)
              e[t] = arguments[t];
            this.enabled &&
              console.log.apply(console, [this.idGenerator() + ":"].concat(e));
          }),
          (o.create = function(e, t) {
            void 0 === t && (t = !1);
            var n = new o(e);
            return (n.enabled = t), n.LOG.bind(n);
          }),
          o
        );
      })(),
      Ge = n("JilM"),
      Re = (function() {
        function e() {}
        return (
          (e.prototype.Init = function(e) {
            this.m_CMInterface = e;
          }),
          (e.prototype.GetTradeOfferURL = function() {
            var t = this;
            if (this.m_strTradeOfferToken)
              return Promise.resolve(this.GetConstructedTradeOfferURL());
            var e = u.Init(Ge.b);
            return Ge.c
              .GetTradeOfferAccessToken(
                this.m_CMInterface.GetServiceTransport(),
                e
              )
              .then(function(e) {
                if (1 == e.GetEResult())
                  return (
                    (t.m_strTradeOfferToken = e
                      .Body()
                      .trade_offer_access_token()),
                    t.GetConstructedTradeOfferURL()
                  );
                throw new Error("Error getting Trade Offer token");
              });
          }),
          (e.prototype.GetDefaultTradeOfferURLForFriend = function(e) {
            return G.a.COMMUNITY_BASE_URL + "tradeoffer/new/?partner=" + e;
          }),
          (e.prototype.GetConstructedTradeOfferURL = function() {
            var e = this.m_CMInterface.steamid.GetAccountID();
            return (
              G.a.COMMUNITY_BASE_URL +
              "tradeoffer/new/?partner=" +
              e +
              "&token=" +
              encodeURIComponent(this.m_strTradeOfferToken)
            );
          }),
          e
        );
      })(),
      Ne = (function() {
        return function(e) {
          (this.result = 50),
            (this.steamguard_required_days = 0),
            (this.new_device_cooldown_days = 0),
            (this.default_password_reset_probation_days = 0),
            (this.password_reset_probation_days = 0),
            (this.default_email_change_probation_days = 0),
            (this.email_change_probation_days = 0),
            (this.result = e);
        };
      })();
    var Le,
      ke,
      Ae,
      Pe,
      Fe,
      Be,
      Ve = {
        "/me": { strDescriptionToken: "#SlashCommandDescription_Me" },
        "/code": {
          strDescriptionToken: "#SlashCommandDescription_Code",
          bOptimisticBBCode: !0
        },
        "/pre": {
          strDescriptionToken: "#SlashCommandDescription_Pre",
          bOptimisticBBCode: !0
        },
        "/giphy": { strDescriptionToken: "#SlashCommandDescription_Giphy" },
        "/spoiler": {
          strDescriptionToken: "#SlashCommandDescription_Spoiler",
          bOptimisticBBCode: !0
        },
        "/quote": {
          strDescriptionToken: "#SlashCommandDescription_Quote",
          bOptimisticBBCode: !0
        },
        "/random": {
          strDescriptionToken: "#SlashCommandDescription_Random",
          unExpectedArguments: [1, 2]
        },
        "/flip": {
          strDescriptionToken: "#SlashCommandDescription_Flip",
          unExpectedArguments: 0
        }
      };
    function xe(e) {
      return Ve[e];
    }
    ((ke = Le || (Le = {}))[(ke.None = 0)] = "None"),
      (ke[(ke.Deleting = 1)] = "Deleting"),
      (ke[(ke.Deleted = 2)] = "Deleted"),
      ((Pe = Ae || (Ae = {}))[(Pe.None = 0)] = "None"),
      (Pe[(Pe.Animating = 1)] = "Animating"),
      ((Be = Fe || (Fe = {}))[(Be.None = 0)] = "None"),
      (Be[(Be.Generic = 1)] = "Generic"),
      (Be[(Be.NotFriends = 2)] = "NotFriends"),
      (Be[(Be.NoChatPermissionInGroup = 3)] = "NoChatPermissionInGroup"),
      (Be[(Be.RateLimitExceeded = 4)] = "RateLimitExceeded");
    var Ue = (function() {
        function e(e, t, n, o, i, r, a) {
          (this.unOrdinal = 0),
            (this.eDeleteState = Le.None),
            (this.eAnimationState = Ae.None),
            (this.unAccountID = e),
            (this.rtTimestamp = t),
            (this.unOrdinal = n || 0),
            13e3 < o.length
              ? (this.strMessage = o.substr(0, 13e3))
              : (this.strMessage = o),
            (this.m_strSlashCommand = (function(e) {
              if (!e) return null;
              var t = e.split(/\s/),
                n = t[0],
                o = t.slice(1);
              if (Ve[n]) {
                var i = Ve[n].unExpectedArguments;
                if (
                  void 0 === i ||
                  ("number" == typeof i
                    ? i === o.length
                    : -1 < i.indexOf(o.length))
                )
                  return n;
              }
              return null;
            })(o)),
            (this.strMessage = this.HandleSpecialMessage(this.strMessage)),
            void 0 !== i &&
              ((this.eServerMsgType = i),
              (this.strServerMsgParam = r),
              (this.unServerMsgParamAccountID = a));
        }
        return (
          (e.prototype.UniqueKey = function() {
            return this.unOrdinal
              ? this.rtTimestamp + "_" + this.unOrdinal
              : this.rtTimestamp;
          }),
          Object.defineProperty(e.prototype, "Mentions", {
            get: function() {
              return this.m_mentions || {};
            },
            set: function(e) {
              this.m_mentions = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsLocalEcho = function() {
            return !1;
          }),
          (e.prototype.BHasServerAcknowledged = function() {
            return !0;
          }),
          Object.defineProperty(e.prototype, "eErrorSending", {
            get: function() {
              return Fe.None;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsServerMessage = function() {
            return null != this.eServerMsgType && 0 != this.eServerMsgType;
          }),
          (e.prototype.BIsInvite = function() {
            return 5 == this.eServerMsgType;
          }),
          (e.prototype.GetSlashCommand = function() {
            return this.m_strSlashCommand;
          }),
          (e.prototype.BIsOlderThan = function(e) {
            return (
              this.rtTimestamp < e.rtTimestamp ||
              (this.rtTimestamp == e.rtTimestamp &&
                this.unOrdinal < e.unOrdinal)
            );
          }),
          (e.prototype.BIsNewerThan = function(e) {
            return (
              this.rtTimestamp > e.rtTimestamp ||
              (this.rtTimestamp == e.rtTimestamp &&
                this.unOrdinal > e.unOrdinal)
            );
          }),
          (e.prototype.HasUserContent = function() {
            return !this.m_bNoUserContent;
          }),
          (e.prototype.HandleSpecialMessage = function(e) {
            if ("+1" == e)
              return (this.m_bNoUserContent = !0), "[plusone][/plusone]";
            if (
              this.m_strSlashCommand &&
              xe(this.m_strSlashCommand).bOptimisticBBCode
            ) {
              var t = this.m_strSlashCommand.slice(1);
              return (
                "[" +
                t +
                "]" +
                e.slice(this.m_strSlashCommand.length + 1) +
                "[/" +
                t +
                "]"
              );
            }
            return e;
          }),
          (e.prototype.OnAnimationEnd = function() {
            this.eAnimationState = Ae.None;
          }),
          R.c([m.observable], e.prototype, "rtTimestamp", void 0),
          R.c([m.observable], e.prototype, "unOrdinal", void 0),
          R.c([m.observable], e.prototype, "eDeleteState", void 0),
          R.c([m.observable], e.prototype, "eAnimationState", void 0),
          e
        );
      })(),
      je = (function(i) {
        function r(e, t, n) {
          var o = i.call(this, e, t, -1, n) || this;
          return (
            (o.eErrorSending = Fe.None),
            (o.m_bServerAcknowledged = !1),
            (o.strMessageObservable = o.HandleSpecialMessage(n)),
            (o.m_iLocalEchoID = r.sm_iLocalEchoID++),
            o
          );
        }
        return (
          R.d(r, i),
          Object.defineProperty(r.prototype, "strMessage", {
            get: function() {
              return this.strMessageObservable;
            },
            set: function(e) {
              this.strMessageObservable = this.HandleSpecialMessage(e);
            },
            enumerable: !0,
            configurable: !0
          }),
          (r.prototype.BIsLocalEcho = function() {
            return !0;
          }),
          (r.prototype.UniqueKey = function() {
            return this.m_bServerAcknowledged
              ? i.prototype.UniqueKey.call(this)
              : "localecho_" + this.m_iLocalEchoID;
          }),
          (r.prototype.BHasServerAcknowledged = function() {
            return this.m_bServerAcknowledged;
          }),
          (r.prototype.OnServerAcknowledged = function() {
            this.m_bServerAcknowledged = !0;
          }),
          (r.sm_iLocalEchoID = 0),
          R.c([m.observable], r.prototype, "eErrorSending", void 0),
          R.c([m.observable], r.prototype, "strMessageObservable", void 0),
          R.c([m.observable], r.prototype, "m_bServerAcknowledged", void 0),
          R.c([m.action], r.prototype, "OnServerAcknowledged", null),
          r
        );
      })(Ue),
      He = (function(o) {
        function i(e, t, n) {
          return o.call(this, e, t, ++i.m_nOrdinal, n) || this;
        }
        return R.d(i, o), (i.m_nOrdinal = 0), i;
      })(Ue),
      We = (function(r) {
        function e(e, t, n, o) {
          var i = r.call(this, e, t, 0, "") || this;
          return (
            (i.m_targetSteamID = n),
            (i.m_tradeRequestID = o),
            (i.m_bCancelled = !1),
            (i.m_bDeclined = !1),
            (i.m_bAccepted = !1),
            (i.m_bPopupBlocked = !1),
            (i.m_ErrorDetails = new Ne(50)),
            i
          );
        }
        return (
          R.d(e, r),
          (e.prototype.TargetSteamID = function() {
            return this.m_targetSteamID;
          }),
          (e.prototype.TradeRequestID = function() {
            return this.m_tradeRequestID;
          }),
          (e.prototype.MarkAsCancelled = function(e) {
            (this.m_bCancelled = !0), (this.m_ErrorDetails = e || new Ne(7));
          }),
          (e.prototype.MarkAsDeclined = function() {
            this.m_bDeclined = !0;
          }),
          (e.prototype.MarkAsAccepted = function(e) {
            (this.m_bAccepted = !0), e || this.ShowPopupBlockedWarning();
          }),
          (e.prototype.ShowPopupBlockedWarning = function() {
            this.m_bPopupBlocked = !0;
          }),
          R.c([m.observable], e.prototype, "m_bCancelled", void 0),
          R.c([m.observable], e.prototype, "m_bDeclined", void 0),
          R.c([m.observable], e.prototype, "m_bAccepted", void 0),
          R.c([m.observable], e.prototype, "m_bPopupBlocked", void 0),
          R.c([m.action], e.prototype, "MarkAsCancelled", null),
          R.c([m.action], e.prototype, "MarkAsDeclined", null),
          R.c([m.action], e.prototype, "MarkAsAccepted", null),
          R.c([m.action], e.prototype, "ShowPopupBlockedWarning", null),
          e
        );
      })(Ue);
    function ze(e) {
      switch (e) {
        case 1:
        case 5:
        case 2:
        case 3:
        case 3:
        case 4:
        case 9:
        case 10:
          return !0;
      }
      return !1;
    }
    var qe = (function() {
        function e() {
          (this.m_rgMessageBlocks = m.observable.array([], { deep: !1 })),
            this.Clear();
        }
        return (
          Object.defineProperty(e.prototype, "message_blocks", {
            get: function() {
              return this.m_rgMessageBlocks;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "time_passes_index", {
            get: function() {
              return this.m_iIndexLastTimePassesGap;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Clear = function() {
            this.m_rgMessageBlocks.clear(),
              this.m_rgMessageBlocks.push(new Ke()),
              (this.m_iIndexLastTimePassesGap = void 0);
          }),
          (e.prototype.AppendMessage = function(e) {
            var t = this.m_rgMessageBlocks[this.m_rgMessageBlocks.length - 1];
            if (!t.BCanAccumulateMessage(e)) {
              var n = t;
              (t = new Ke()),
                this.m_rgMessageBlocks.push(t),
                n.SetNextBlock(t),
                3600 <= e.rtTimestamp - n.GetRTimeLastMessage() &&
                  (n.GetRTimeMidnightBeforeBlock() ==
                  Yo.GetLocalMidnightInRTime32(e.rtTimestamp)
                    ? (this.m_iIndexLastTimePassesGap =
                        this.m_rgMessageBlocks.length - 1)
                    : (this.m_iIndexLastTimePassesGap = void 0));
            }
            t.AppendMessage(e);
          }),
          (e.prototype.BuildMessageBlocks = function(e) {
            this.Clear();
            for (var t = 0, n = e; t < n.length; t++) {
              var o = n[t];
              this.AppendMessage(o);
            }
          }),
          (e.prototype.AppendNewMessage = function(e) {
            this.AppendMessage(e);
          }),
          (e.prototype.RemoveOldestMessages = function(e) {
            for (var t = 0; 0 < e && !(t >= this.m_rgMessageBlocks.length); ) {
              if ((i = this.m_rgMessageBlocks[t].messages).length > e) break;
              (e -= i.length), t++;
            }
            if (0 == t) return null;
            for (var n = null, o = t - 1; 0 <= o; o--) {
              var i;
              if (0 != (i = this.m_rgMessageBlocks[o].messages).length) {
                n = i[i.length - 1];
                break;
              }
            }
            return this.m_rgMessageBlocks.splice(0, t), n;
          }),
          R.c([m.observable], e.prototype, "m_iIndexLastTimePassesGap", void 0),
          R.c([m.action], e.prototype, "BuildMessageBlocks", null),
          R.c([m.action], e.prototype, "AppendNewMessage", null),
          R.c([m.action], e.prototype, "RemoveOldestMessages", null),
          e
        );
      })(),
      Ke = (function() {
        function a() {
          (this.m_rgMessages = []), (this.m_bMessageBlockIsOnlyEmotes = !0);
        }
        return (
          (a.prototype.CreateVirtualSplitOnTimestamp = function(e) {
            var t = new a(),
              n = new a();
            t.SetNextBlock(n), n.SetNextBlock(this.m_nextBlock);
            for (var o = 0, i = this.m_rgMessages; o < i.length; o++) {
              var r = i[o];
              r.rtTimestamp < e ? t.AppendMessage(r) : n.AppendMessage(r);
            }
            return [t, n];
          }),
          (a.prototype.UniqueKey = function() {
            return this.m_rgMessages.length
              ? this.m_rgMessages[0].UniqueKey()
              : "EmptyBlock";
          }),
          Object.defineProperty(a.prototype, "messages", {
            get: function() {
              return this.m_rgMessages;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.SetNextBlock = function(e) {
            this.m_nextBlock = e;
          }),
          Object.defineProperty(a.prototype, "is_last_block", {
            get: function() {
              return void 0 === this.m_nextBlock;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.GetRTimeMidnightBeforeBlock = function() {
            return this.m_rtMidnightBeforeBlock;
          }),
          (a.prototype.GetRTimeMidnightBeforeNextBlock = function() {
            return this.m_nextBlock
              ? this.m_nextBlock.GetRTimeMidnightBeforeBlock()
              : Yo.GetLocalMidnightInRTime32();
          }),
          (a.prototype.GetRTimeLastMessage = function() {
            return this.m_rgMessages.length
              ? this.m_rgMessages[this.m_rgMessages.length - 1].rtTimestamp
              : S.b;
          }),
          (a.prototype.GetRTimeFirstMessage = function() {
            return this.m_rgMessages.length
              ? this.m_rgMessages[0].rtTimestamp
              : 0;
          }),
          (a.prototype.AppendMessage = function(e) {
            "/me" === e.GetSlashCommand() ||
              (this.m_bMessageBlockIsOnlyEmotes = !1),
              this.m_rgMessages.length ||
                (this.m_rtMidnightBeforeBlock = Yo.GetLocalMidnightInRTime32(
                  e.rtTimestamp
                )),
              this.m_rgMessages.push(e);
          }),
          (a.prototype.BCanAccumulateMessage = function(e) {
            if (!this.m_rgMessages.length) return !0;
            var t = this.m_rgMessages[0].unAccountID,
              n = this.m_rgMessages[this.m_rgMessages.length - 1].rtTimestamp,
              o = this.m_rgMessages[this.m_rgMessages.length - 1];
            return (
              e.BIsServerMessage() == this.m_rgMessages[0].BIsServerMessage() &&
              (!(
                !e.BIsServerMessage() ||
                e.BIsInvite() ||
                this.m_rgMessages[0].BIsInvite()
              ) ||
                (!(!t || t != e.unAccountID) &&
                  (e.BIsInvite() == this.m_rgMessages[0].BIsInvite() &&
                    (!(300 < e.rtTimestamp - n) &&
                      ((!this.m_bMessageBlockIsOnlyEmotes ||
                        "/me" === e.GetSlashCommand()) &&
                        (!(e instanceof He || o instanceof He) &&
                          !(
                            Yo.GetLocalMidnightInRTime32(e.rtTimestamp) >
                            this.m_rtMidnightBeforeBlock
                          )))))))
            );
          }),
          (a.prototype.BIsInvite = function() {
            return (
              0 < this.m_rgMessages.length && this.m_rgMessages[0].BIsInvite()
            );
          }),
          (a.prototype.BIsServerMsg = function() {
            return (
              0 < this.m_rgMessages.length &&
              this.m_rgMessages[0].BIsServerMessage() &&
              !this.m_rgMessages[0].BIsInvite()
            );
          }),
          R.c([m.observable.shallow], a.prototype, "m_rgMessages", void 0),
          R.c([m.observable.shallow], a.prototype, "m_nextBlock", void 0),
          R.c([m.action], a.prototype, "CreateVirtualSplitOnTimestamp", null),
          a
        );
      })(),
      Ye = (function() {
        function e() {
          (this.timestamp = 0),
            (this.imageWidth = 0),
            (this.imageHeight = 0),
            (this.spoilerTag = !1),
            (this.eUploadState = 0),
            (this.uploadProgress = 0);
        }
        return (
          R.c([m.observable], e.prototype, "eUploadState", void 0),
          R.c([m.observable], e.prototype, "uploadProgress", void 0),
          R.c([m.observable], e.prototype, "strErrorDescription", void 0),
          e
        );
      })(),
      Je = (function() {
        function a(e, t, n) {
          var o = this;
          (this.BASELOG = Te.create(function() {
            return "CChat-" + o.unique_id;
          }, !1)),
            (this.m_rgChatViews = []),
            (this.m_bChatLogsLoaded = !1),
            (this.m_bMoreAvailable = !1),
            (this.m_nLoadingHistoryInProgressCount = 0),
            (this.m_rgChatMessages = []),
            (this.m_ChatMessageBlockList = new qe()),
            (this.m_cUnreadChatMessages = 0),
            (this.m_bHasUnreadPriorityChatMessages = !1),
            (this.m_rtFirstUnreadChatMsg = 0),
            (this.m_rtLastAckedChatMsg = 0),
            (this.m_rtLastServerAckedChatMsg = 0),
            (this.m_rtLastMessageReceived = 0),
            (this.m_rtLastServerMessageReceived = 0),
            (this.m_bPrepended = !1),
            (this.m_FriendStore = e),
            (this.m_ChatStore = t),
            (this.m_CMInterface = n),
            (this.m_fileUploadProps = new Ye());
        }
        return (
          (a.prototype.UnloadChatState = function() {
            this.UnloadActiveChatState(),
              (this.m_rtLastMessageReceived = 0),
              (this.m_rtLastServerMessageReceived = 0);
          }),
          (a.prototype.UnloadActiveChatState = function() {
            (this.m_rgChatMessages = []),
              this.m_ChatMessageBlockList.Clear(),
              (this.m_bChatLogsLoaded = !1);
          }),
          Object.defineProperty(a.prototype, "BIsPrepend", {
            get: function() {
              return this.m_bPrepended;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.ResetPrepended = function() {
            this.m_bPrepended = !1;
          }),
          (a.prototype.OnTyping = function() {}),
          Object.defineProperty(a.prototype, "is_friend_typing", {
            get: function() {
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.OnReceivedNewMessage = function(e, t, n, o) {}),
          (a.prototype.BShouldTrackUnreadMessages = function() {
            return !0;
          }),
          (a.prototype.BIsVoiceAllowed = function() {
            return !0;
          }),
          (a.prototype.GetVoiceNotAllowedReason = function() {
            return null;
          }),
          (a.prototype.InitUnreadMessageCountFromServer = function(e, t, n) {
            (this.m_cUnreadChatMessages = e),
              (this.m_bHasUnreadPriorityChatMessages = !1),
              (this.m_rtLastAckedChatMsg = this.m_rtLastServerAckedChatMsg = t),
              (this.m_rtLastMessageReceived = n),
              this.m_rtLastAckedChatMsg < this.m_rtLastMessageReceived &&
                (this.m_rtFirstUnreadChatMsg = this.m_rtLastAckedChatMsg + 1),
              Yo.FriendStore.UpdateUnreadMessagesGlobal();
          }),
          (a.prototype.AddChatView = function(e) {
            this.m_rgChatViews.push(e);
          }),
          (a.prototype.RemoveChatView = function(e) {
            var t = this.m_rgChatViews.indexOf(e);
            -1 != t && this.m_rgChatViews.splice(t, 1);
          }),
          (a.prototype.IsMoreHistoryAvailable = function() {
            return this.m_bMoreAvailable;
          }),
          (a.prototype.InternalLoadChatLogs = function(e) {
            var t,
              n,
              o,
              i = this;
            if ((void 0 === e && (e = !1), e)) {
              var r = this.GetMostRecentChatMsg();
              r
                ? ((t = r.rtTimestamp), (n = r.unOrdinal))
                : ((t = S.c), (n = 0));
            } else (t = S.c), (n = 0);
            (o = S.b),
              (this.m_nLoadingHistoryInProgressCount += 1),
              this.GetMessagesFromTimeRange(t, n, o, 0, a.k_InitialMessageCount)
                .then(function(e) {
                  var t = e.messages,
                    n = e.moreAvailable;
                  i.AddMessagesToHistory(t, n),
                    (i.m_nLoadingHistoryInProgressCount -= 1);
                })
                .catch(function(e) {
                  return (
                    (i.m_nLoadingHistoryInProgressCount -= 1), Promise.reject(e)
                  );
                });
          }),
          (a.prototype.LoadMoreHistory = function() {
            var o = this;
            return 0 != this.m_nLoadingHistoryInProgressCount
              ? Promise.resolve(!0)
              : ((this.m_nLoadingHistoryInProgressCount += 1),
                this.GetMessagesFromTimeRange(
                  S.c,
                  0,
                  this.m_oldestMessageTime,
                  this.m_oldestMessageOrdinal,
                  a.k_LoadMoreMessageCount
                )
                  .then(function(e) {
                    var t = e.messages,
                      n = e.moreAvailable;
                    return (
                      o.AddMessagesToHistory(t, n),
                      (o.m_nLoadingHistoryInProgressCount -= 1),
                      !0
                    );
                  })
                  .catch(function(e) {
                    return (
                      (o.m_nLoadingHistoryInProgressCount -= 1),
                      Promise.reject(e)
                    );
                  }));
          }),
          (a.prototype.AddMessagesToHistory = function(e, t) {
            this.BASELOG("merging " + e.length + " messages"),
              this.MergeChatHistoryChunk(e),
              this.BASELOG(this.m_rgChatMessages.length + " total messages"),
              (this.m_bMoreAvailable = t),
              this.BASELOG(
                "friend chat oldest time " +
                  this.m_oldestMessageTime +
                  " oldest ordinal " +
                  this.m_oldestMessageOrdinal +
                  " bMoreAvailable " +
                  this.m_bMoreAvailable
              );
          }),
          Object.defineProperty(a.prototype, "ChatStore", {
            get: function() {
              return this.m_ChatStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.OnActivate = function() {
            (this.m_cUnreadChatMessages ||
              this.m_bHasUnreadPriorityChatMessages) &&
              ((this.m_cUnreadChatMessages = 0),
              (this.m_bHasUnreadPriorityChatMessages = !1),
              this.m_rtLastMessageReceived &&
                ((this.m_rtLastAckedChatMsg = this.m_rtLastMessageReceived),
                this.AckChatMsg(this.m_rtLastMessageReceived)),
              Yo.FriendStore.UpdateUnreadMessagesGlobal());
          }),
          (a.prototype.OnDeactivate = function() {
            this.m_rtFirstUnreadChatMsg = 0;
          }),
          Object.defineProperty(a.prototype, "self", {
            get: function() {
              return this.m_FriendStore.self;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.InternalAppendChatMsg = function(e) {
            (0 != this.m_rgChatViews.length || this.m_bChatLogsLoaded) &&
              (this.m_rgChatMessages.push(e),
              this.m_ChatMessageBlockList.AppendNewMessage(e),
              this.TrimLogsIfPossible());
          }),
          (a.prototype.TrimLogsIfPossible = function() {
            var e =
              this.m_rgChatMessages.length - a.k_KeepLoadedWhenAtScrollBottom;
            if (!(e <= 0)) {
              for (var t = 0, n = this.m_rgChatViews; t < n.length; t++) {
                if (!n[t].is_scrolled_to_bottom) return;
              }
              var o = this.m_ChatMessageBlockList.RemoveOldestMessages(e);
              if (o) {
                var i = this.m_rgChatMessages.indexOf(o);
                i < 0
                  ? AssertMsg(!1, "Failed to find message being removed")
                  : this.m_rgChatMessages.splice(0, i + 1);
              }
            }
          }),
          (a.prototype.AppendChatMsg = function(e, t, n, o) {
            var i = new Ue(e, t, n, o);
            return (
              (i.eAnimationState = Ae.Animating),
              this.InternalAppendChatMsg(i),
              i
            );
          }),
          (a.prototype.AppendLocalEchoChatMsg = function(e) {
            var t = new je(this.self.accountid, Yo.GetServerRTime32(), e);
            return (
              (t.eAnimationState = Ae.Animating),
              this.InternalAppendChatMsg(t),
              t
            );
          }),
          (a.prototype.AddNewChatMsgAndNotify = function(e, t, n, o, i, r) {
            var a = this.AppendChatMsg(e, t, n, o);
            a.Mentions = r;
            var s = void 0 !== i;
            this.CheckShouldNotify(a, s ? i : o, o);
          }),
          (a.prototype.UpdateChatMessageDeletedState = function(e, t) {
            for (var n = 0, o = this.m_rgChatMessages; n < o.length; n++)
              for (var i = o[n], r = 0, a = e; r < a.length; r++) {
                var s = a[r];
                i.rtTimestamp == s.rtTimestamp &&
                  i.unOrdinal == s.unOrdinal &&
                  (i.eDeleteState != Le.Deleted && (i.eDeleteState = t));
              }
          }),
          (a.prototype.BShouldSilentlyAddMessage = function(e) {
            return !1;
          }),
          (a.prototype.DecorateNotification = function(e, t, n, o) {
            if (o !== n) {
              var i = this.m_ChatStore.NotificationBBCodeParser,
                r = {
                  chat: this,
                  unAccountIDSender: e.unAccountID,
                  key: e.UniqueKey(),
                  rtTimestamp: e.rtTimestamp,
                  onLoad: function() {}
                },
                a = i.ParseBBCode(o, r);
              if (a) return R.a({}, t, a);
            }
            return t;
          }),
          (a.prototype.CheckShouldNotify = function(e, t, n) {
            var o = this,
              i = this.self.accountid == e.unAccountID,
              r = !1,
              a = !1,
              s = this.GetVisibilityState(),
              c = this.BShouldSilentlyAddMessage(e);
            if (e.BIsServerMessage())
              this.m_rtLastServerMessageReceived = e.rtTimestamp;
            else {
              i
                ? (a = r = !0)
                : c && 0 == this.m_cUnreadChatMessages
                  ? (r = !0)
                  : 4 == s
                    ? (r = !0)
                    : 3 == s &&
                      0 == this.m_cUnreadChatMessages &&
                      Yo.IdleTracker.AddOnNextActivityCallback(function() {
                        4 == o.GetVisibilityState() && o.OnActivate();
                      }),
                (this.m_rtLastMessageReceived = e.rtTimestamp);
              var l = this.m_cUnreadChatMessages,
                p = this.m_bHasUnreadPriorityChatMessages;
              this.BShouldTrackUnreadMessages() &&
                (r
                  ? ((this.m_rtLastAckedChatMsg = e.rtTimestamp),
                    (this.m_cUnreadChatMessages = 0),
                    (this.m_bHasUnreadPriorityChatMessages = !1),
                    a || this.AckChatMsg(e.rtTimestamp))
                  : (0 == this.m_rtFirstUnreadChatMsg &&
                      (this.m_rtFirstUnreadChatMsg = this.m_rtLastMessageReceived),
                    this.m_cUnreadChatMessages++)),
                c || this.OnReceivedNewMessage(e, s, t, n),
                (l == this.m_cUnreadChatMessages &&
                  p == this.m_bHasUnreadPriorityChatMessages) ||
                  Yo.FriendStore.UpdateUnreadMessagesGlobal();
            }
          }),
          (a.prototype.AddVoiceChannelInviteMsg = function(e, t, n) {
            this.InternalAppendChatMsg(new He(e, t, n));
          }),
          (a.prototype.AddNewServerMsg = function(e, t, n, o, i, r) {
            ze(o) && this.InternalAppendChatMsg(new Ue(e, t, n, "", o, i, r));
          }),
          (a.prototype.AckChatMsg = function(e) {
            this.m_rtLastServerAckedChatMsg != e &&
              (this.AckChatMsgOnServer(e),
              (this.m_rtLastServerAckedChatMsg = e));
          }),
          (a.prototype.OnUserChatEcho = function(e, t) {
            e >= this.m_rtLastAckedChatMsg &&
              ((this.m_rtLastMessageReceived = e),
              this.UpdateLastAckTimeFromServer(e));
          }),
          (a.prototype.UpdateLastAckTimeFromServer = function(e) {
            this.m_rtLastServerAckedChatMsg <= e &&
              ((this.m_rtLastServerAckedChatMsg = e),
              (this.m_rtLastAckedChatMsg = e),
              this.m_rtLastMessageReceived <= e &&
                ((this.m_cUnreadChatMessages = 0),
                (this.m_bHasUnreadPriorityChatMessages = !1),
                Yo.FriendStore.UpdateUnreadMessagesGlobal()));
          }),
          (a.prototype.GetMostRecentChatMsg = function() {
            for (var e = this.m_rgChatMessages.length - 1; 0 <= e; e--)
              if (-1 != this.m_rgChatMessages[e].unOrdinal)
                return this.m_rgChatMessages[e];
            return null;
          }),
          (a.prototype.MergeChatHistoryChunk = function(e) {
            var t;
            if (e.length) {
              var n,
                o = e[0],
                i = e[e.length - 1],
                r = 0;
              for (n = this.m_rgChatMessages.length - 1; 0 <= n; n--)
                if (-1 != this.m_rgChatMessages[n].unOrdinal) {
                  if (this.m_rgChatMessages[n].BIsOlderThan(o)) break;
                  this.m_rgChatMessages[n].BIsNewerThan(i) && r++;
                }
              for (
                n++,
                  (t = this.m_rgChatMessages).splice.apply(
                    t,
                    [n, this.m_rgChatMessages.length - n - r].concat(e)
                  ),
                  n = 0;
                n < this.m_rgChatMessages.length &&
                -1 == this.m_rgChatMessages[n].unOrdinal;
                n++
              );
              n >= this.m_rgChatMessages.length
                ? ((this.m_oldestMessageTime = S.b),
                  (this.m_oldestMessageOrdinal = 0))
                : ((this.m_oldestMessageTime = this.m_rgChatMessages[
                    n
                  ].rtTimestamp),
                  (this.m_oldestMessageOrdinal = this.m_rgChatMessages[
                    n
                  ].unOrdinal)),
                this.m_ChatMessageBlockList.BuildMessageBlocks(
                  this.m_rgChatMessages
                ),
                (this.m_bPrepended = !0);
            }
          }),
          (a.prototype.SetUploadFileError = function(e, t) {
            (this.m_fileUploadProps.eUploadState = e),
              (this.m_fileUploadProps.strErrorDescription = t),
              (this.m_fileUploadProps.displayFileName = null);
          }),
          (a.prototype.BeginFileUpload = function(e, t, n, o) {
            for (var r = this, i = ""; i.length < 40; )
              i += Math.floor(16 * Math.random()).toString(16);
            this.ClearFileUploadError(),
              (this.m_fileUploadProps.file = e),
              (this.m_fileUploadProps.displayFileName = e.name),
              (this.m_fileUploadProps.uploadFileName =
                window.performance.now() + "_" + e.name),
              (this.m_fileUploadProps.sha1 = i),
              (this.m_fileUploadProps.hmac = ""),
              (this.m_fileUploadProps.timestamp = 0),
              (this.m_fileUploadProps.imageWidth = t),
              (this.m_fileUploadProps.imageHeight = n),
              (this.m_fileUploadProps.eUploadState = 1),
              (this.m_fileUploadProps.uploadProgress = 0),
              (this.m_fileUploadProps.spoilerTag = o);
            var a = new FormData();
            a.set("sessionid", G.a.SESSIONID),
              a.set("file_size", e.size.toString()),
              a.set("file_name", this.m_fileUploadProps.uploadFileName),
              a.set("file_sha", i),
              a.set("file_image_width", t.toString()),
              a.set("file_image_height", n.toString()),
              a.set("file_type", e.type),
              C.a
                .post(G.a.CHAT_BASE_URL + "chat/beginfileupload/", a)
                .then(function(e) {
                  (r.m_fileUploadProps.timestamp = e.data.timestamp),
                    (r.m_fileUploadProps.hmac = e.data.hmac),
                    r.DoFileUpload(e.data.result);
                })
                .catch(function(i) {
                  Object(m.runInAction)(function() {
                    (r.m_fileUploadProps.eUploadState = 2),
                      r.BASELOG(i.response);
                    var e = null;
                    if (i.response) {
                      var t = i.response.data,
                        n = i.response.status,
                        o = t && t.success;
                      401 == n
                        ? 21 == o
                          ? (e = Object(re.b)(
                              "#Chat_Settings_Error_NotLoggedOn"
                            ))
                          : 112 == o
                            ? (e = Object(re.b)(
                                "#Chat_Settings_Error_LimitedUser"
                              ))
                            : 15 == o &&
                              (e = Object(re.b)(
                                "#Chat_Settings_Error_FailedToUpload"
                              ))
                        : (e =
                            400 == n
                              ? 8 == o
                                ? Object(re.b)(
                                    "#Chat_Settings_Error_InvalidImage"
                                  )
                                : Object(re.b)(
                                    "#Chat_Settings_Error_ServerError"
                                  ) +
                                  " (" +
                                  o +
                                  ")"
                              : Object(re.b)(
                                  "#Chat_Settings_Error_ServerError"
                                ));
                    } else e = Object(re.b)("#ConnectionTrouble_FailedToConnect");
                    r.m_fileUploadProps.strErrorDescription = Object(re.b)(
                      "#Chat_Upload_ErrorStart",
                      e
                    );
                  });
                });
          }),
          (a.prototype.DoFileUpload = function(t) {
            var n = this,
              e = this.m_fileUploadProps.file,
              o = t.use_https ? "https://" : "http://";
            o += t.url_host + t.url_path;
            for (
              var i = {
                  onUploadProgress: function(e) {
                    var t = e.loaded / e.total * 100;
                    Object(m.runInAction)(function() {
                      n.m_fileUploadProps.uploadProgress = t;
                    });
                  },
                  headers: {}
                },
                r = 0;
              r < t.request_headers.length;
              ++r
            ) {
              var a = t.request_headers[r];
              "Content-Length" != a.name &&
                "Host" != a.name &&
                (i.headers[a.name] = a.value);
            }
            C.a
              .put(o, e, i)
              .then(function(e) {
                n.CommitFileUpload(!0, t.ugcid);
              })
              .catch(function(e) {
                n.BASELOG(e.response),
                  Object(m.runInAction)(function() {
                    (n.m_fileUploadProps.strErrorDescription = Object(re.b)(
                      "#Chat_Upload_ErrorCloud"
                    )),
                      (n.m_fileUploadProps.eUploadState = 2),
                      (n.m_fileUploadProps.uploadProgress = 0);
                  }),
                  n.CommitFileUpload(!1, t.ugcid);
              });
          }),
          (a.prototype.CommitFileUpload = function(t, e) {
            var r = this,
              n = (this.m_fileUploadProps.file, this.m_fileUploadProps.sha1),
              o = new FormData();
            o.set("sessionid", G.a.SESSIONID),
              o.set("file_name", this.m_fileUploadProps.uploadFileName),
              o.set("file_sha", n),
              o.set("success", t ? "1" : "0"),
              o.set("ugcid", e),
              o.set("file_type", this.m_fileUploadProps.file.type),
              o.set(
                "file_image_width",
                this.m_fileUploadProps.imageWidth.toString()
              ),
              o.set(
                "file_image_height",
                this.m_fileUploadProps.imageHeight.toString()
              ),
              o.set("timestamp", this.m_fileUploadProps.timestamp.toString()),
              o.set("hmac", this.m_fileUploadProps.hmac),
              o.set("spoiler", this.m_fileUploadProps.spoilerTag ? "1" : "0"),
              this.PopulateCommitFileUploadFormData(o),
              C.a
                .post(G.a.CHAT_BASE_URL + "chat/commitfileupload/", o)
                .then(function(e) {
                  t
                    ? ((r.m_fileUploadProps.uploadProgress = 0),
                      (r.m_fileUploadProps.file = null),
                      (r.m_fileUploadProps.eUploadState = 0))
                    : (r.m_fileUploadProps.eUploadState = 2);
                })
                .catch(function(i) {
                  t &&
                    Object(m.runInAction)(function() {
                      r.BASELOG(i),
                        (r.m_fileUploadProps.uploadProgress = 0),
                        (r.m_fileUploadProps.eUploadState = 2);
                      var e = null;
                      if (i.response) {
                        var t = i.response.data,
                          n = i.response.status,
                          o = t && t.success;
                        400 == n
                          ? (e = Object(re.b)(
                              "#Chat_Settings_Error_AccessDenied"
                            ))
                          : 401 == n
                            ? 21 == o
                              ? (e = Object(re.b)(
                                  "#Chat_Settings_Error_NotLoggedOn"
                                ))
                              : 112 == o
                                ? (e = Object(re.b)(
                                    "#Chat_Settings_Error_LimitedUser"
                                  ))
                                : 15 == o &&
                                  (e = Object(re.b)(
                                    "#Chat_Settings_Error_AccessDenied"
                                  ))
                            : (e =
                                500 == n
                                  ? Object(re.b)(
                                      "#Chat_Settings_Error_ServerError"
                                    ) +
                                    " (" +
                                    o +
                                    ")"
                                  : Object(re.b)(
                                      "#Chat_Settings_Error_ServerError"
                                    ));
                      } else e = Object(re.b)("#ConnectionTrouble_FailedToConnect");
                      r.m_fileUploadProps.strErrorDescription =
                        "Failed to commit upload: " + e;
                    });
                });
          }),
          (a.prototype.ClearFileUploadError = function() {
            (2 != this.m_fileUploadProps.eUploadState &&
              3 != this.m_fileUploadProps.eUploadState &&
              4 != this.m_fileUploadProps.eUploadState) ||
              ((this.m_fileUploadProps.uploadProgress = 0),
              (this.m_fileUploadProps.file = null),
              (this.m_fileUploadProps.eUploadState = 0));
          }),
          (a.prototype.GetVisibilityState = function(e) {
            for (var t = 0, n = 0, o = this.m_rgChatViews; n < o.length; n++) {
              var i = o[n];
              if (!e || i.BIsInBrowserContext(e)) {
                var r = i.GetVisibilityState();
                t < r && (t = r);
              }
            }
            return t;
          }),
          Object.defineProperty(a.prototype, "unread_message_count", {
            get: function() {
              return this.m_cUnreadChatMessages;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "has_unread_priority_messages", {
            get: function() {
              return this.m_bHasUnreadPriorityChatMessages;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "first_unread_msg_time", {
            get: function() {
              return this.m_rtFirstUnreadChatMsg;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "time_last_message", {
            get: function() {
              return this.m_rtLastMessageReceived;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "time_last_ack", {
            get: function() {
              return this.m_rtLastAckedChatMsg;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "file_upload_props", {
            get: function() {
              return this.m_fileUploadProps;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "chat_messages", {
            get: function() {
              return this.m_rgChatMessages;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "chat_message_blocks", {
            get: function() {
              return this.m_ChatMessageBlockList;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(a.prototype, "last_voice_participation_time", {
            get: function() {
              return this.m_rtLastAckedChatMsg;
            },
            enumerable: !0,
            configurable: !0
          }),
          (a.prototype.LoadChatLogs = function() {
            this.m_bChatLogsLoaded ||
              ((this.m_bChatLogsLoaded = !0), this.InternalLoadChatLogs(!1));
          }),
          (a.prototype.OnConnectionRestored = function() {
            this.m_bChatLogsLoaded && this.InternalLoadChatLogs(!0);
          }),
          (a.k_KeepLoadedWhenAtScrollBottom =
            2 * (a.k_InitialMessageCount = 100)),
          (a.k_LoadMoreMessageCount = 50),
          R.c([m.observable], a.prototype, "m_bMoreAvailable", void 0),
          R.c([m.observable.shallow], a.prototype, "m_rgChatMessages", void 0),
          R.c([m.observable], a.prototype, "m_cUnreadChatMessages", void 0),
          R.c([m.observable], a.prototype, "m_rtFirstUnreadChatMsg", void 0),
          R.c([m.observable], a.prototype, "m_rtLastAckedChatMsg", void 0),
          R.c([m.observable], a.prototype, "m_rtLastMessageReceived", void 0),
          R.c(
            [m.observable],
            a.prototype,
            "m_rtLastServerMessageReceived",
            void 0
          ),
          R.c([m.observable], a.prototype, "m_fileUploadProps", void 0),
          R.c([m.action], a.prototype, "AddMessagesToHistory", null),
          R.c([m.action], a.prototype, "OnActivate", null),
          R.c([m.action], a.prototype, "OnDeactivate", null),
          R.c([m.action], a.prototype, "AppendChatMsg", null),
          R.c([m.action], a.prototype, "AppendLocalEchoChatMsg", null),
          R.c([m.action], a.prototype, "AddNewChatMsgAndNotify", null),
          R.c([m.action], a.prototype, "UpdateChatMessageDeletedState", null),
          R.c([m.action], a.prototype, "AddVoiceChannelInviteMsg", null),
          R.c([m.action], a.prototype, "AddNewServerMsg", null),
          R.c([m.action], a.prototype, "SetUploadFileError", null),
          R.c([m.action], a.prototype, "BeginFileUpload", null),
          R.c([m.action], a.prototype, "DoFileUpload", null),
          R.c([m.action], a.prototype, "CommitFileUpload", null),
          R.c([m.action], a.prototype, "ClearFileUploadError", null),
          a
        );
      })(),
      Xe = n("p2YY"),
      Qe = n("3osS"),
      Ze = n("hf+I"),
      $e = n("neGj"),
      et = n("zw2r"),
      tt = n("j4mb"),
      nt = (function() {
        function e(e, t) {
          (this.m_bInitialized = !1),
            (this.m_bGotInitialState = !1),
            (this.m_strClanName = ""),
            (this.m_strClanTag = ""),
            (this.m_strAvatarHash = $),
            (this.m_eClanAccountFlags = 0),
            (this.m_cMemberCount = 0),
            (this.m_cUsersOnline = 0),
            (this.m_cUsersInGame = 0),
            (this.m_cChatRoomMembers = 0),
            (this.m_bPersonaStateLoadRequested = !1),
            (this.m_steamid = e),
            (this.m_eClanRelationship = t);
        }
        return (
          (e.prototype.BNeedsPersonaData = function() {
            return !this.m_bInitialized && !this.m_bPersonaStateLoadRequested;
          }),
          (e.prototype.SetPersonaStateLoadRequested = function() {
            this.m_bPersonaStateLoadRequested = !0;
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return this.m_bInitialized ? this.m_strClanName : "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "steamid", {
            get: function() {
              return this.m_steamid;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "clanid", {
            get: function() {
              return this.m_steamid.GetAccountID();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_count", {
            get: function() {
              return this.m_cMemberCount;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "users_online", {
            get: function() {
              return this.m_cUsersOnline;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "users_ingame", {
            get: function() {
              return this.m_cUsersInGame;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "count_chat_room_members", {
            get: function() {
              return this.m_cChatRoomMembers;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "chat_room_private", {
            get: function() {
              return this.m_bChatRoomPrivate;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsMember = function() {
            return 3 == this.m_eClanRelationship;
          }),
          (e.prototype.BIsInvite = function() {
            return 2 == this.m_eClanRelationship;
          }),
          (e.prototype.SetRelationship = function(e) {
            this.m_eClanRelationship = e;
          }),
          (e.prototype.BIsOGG = function() {
            return (
              !!this.m_unOGGAppID ||
              (this.m_bGotInitialState && 0 != (16 & this.m_eClanAccountFlags))
            );
          }),
          (e.prototype.GetOGGAppID = function() {
            return this.m_unOGGAppID;
          }),
          (e.prototype.BMatchesSearchString = function(e) {
            return -1 !== this.m_strClanName.toLocaleLowerCase().indexOf(e);
          }),
          Object.defineProperty(e.prototype, "avatar_url", {
            get: function() {
              return ee(this.m_strAvatarHash);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_medium", {
            get: function() {
              return this.BIsOGG()
                ? this.avatar_url
                : ee(this.m_strAvatarHash, "_medium");
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_full", {
            get: function() {
              return this.BIsOGG()
                ? this.avatar_url
                : ee(this.m_strAvatarHash, "_full");
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OpenChatDialog = function(t, n) {
            return (
              void 0 === n && (n = !0),
              this.GetChatRoomGroupID().then(function(e) {
                return Yo.ChatStore.JoinAndShowChatRoomGroup(t, e, n), e;
              })
            );
          }),
          (e.prototype.ReadPersonaStateUpdate = function(e, t) {
            if (
              ((this.m_bInitialized = !0),
              0 != (2 & e) && (this.m_strClanName = t.player_name()),
              0 != (1024 & e) &&
                ((this.m_strClanTag = t.clan_tag()),
                t.clan_data().chat_group_id() &&
                  (this.m_ulChatRoomGroupID = t.clan_data().chat_group_id()),
                t.clan_data().ogg_app_id() &&
                  (this.m_unOGGAppID = t.clan_data().ogg_app_id())),
              0 != (16 & e))
            ) {
              var n = t.avatar_hash(),
                o = !0;
              if (n) {
                for (var i = 0; i < n.length && o; i++) o = !n[i];
                this.m_strAvatarHash = o ? $ : p(n);
              }
            }
          }),
          (e.prototype.ReadStateUpdate = function(e) {
            if (
              ((this.m_bGotInitialState = !0),
              (this.m_eClanAccountFlags = e.clan_account_flags()),
              (this.m_bChatRoomPrivate = e.chat_room_private()),
              void 0 !== e.user_counts() && e.user_counts().members())
            ) {
              var t = e.user_counts();
              (this.m_cMemberCount = t.members()),
                (this.m_cUsersOnline = t.online()),
                (this.m_cUsersInGame = t.in_game()),
                (this.m_cChatRoomMembers = t.chat_room_members());
            }
          }),
          (e.prototype.GetChatGroupIDIfLoaded = function() {
            return this.m_ulChatRoomGroupID;
          }),
          (e.prototype.GetChatRoomGroupID = function() {
            var t = this;
            if (this.m_ulChatRoomGroupID)
              return Promise.resolve(this.m_ulChatRoomGroupID);
            var e = u.Init(ie.S);
            return (
              e.Body().set_steamid(this.steamid.ConvertTo64BitString()),
              e.Body().set_autocreate(!0),
              ie.Z.GetClanChatRoomInfo(
                Yo.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                return 1 == e.GetEResult() &&
                  e
                    .Body()
                    .chat_group_summary()
                    .chat_group_id()
                  ? ((t.m_ulChatRoomGroupID = e
                      .Body()
                      .chat_group_summary()
                      .chat_group_id()),
                    t.m_ulChatRoomGroupID)
                  : null;
              })
            );
          }),
          (e.prototype.SetChatGroupID = function(e) {
            this.m_ulChatRoomGroupID = e;
          }),
          R.c([m.observable], e.prototype, "m_bInitialized", void 0),
          R.c([m.observable], e.prototype, "m_bGotInitialState", void 0),
          R.c([m.observable], e.prototype, "m_eClanRelationship", void 0),
          R.c([m.observable], e.prototype, "m_strAvatarHash", void 0),
          R.c([m.observable], e.prototype, "m_ulChatRoomGroupID", void 0),
          R.c([m.observable], e.prototype, "m_cMemberCount", void 0),
          R.c([m.observable], e.prototype, "m_cUsersOnline", void 0),
          R.c([m.observable], e.prototype, "m_cUsersInGame", void 0),
          R.c([m.observable], e.prototype, "m_cChatRoomMembers", void 0),
          R.c([m.observable], e.prototype, "m_bChatRoomPrivate", void 0),
          R.c([m.computed], e.prototype, "avatar_url", null),
          R.c([m.computed], e.prototype, "avatar_url_medium", null),
          R.c([m.computed], e.prototype, "avatar_url_full", null),
          e
        );
      })(),
      ot = (function() {
        function e(e) {
          var n = this;
          (this.m_mapClans = m.observable.map()),
            (this.m_eClanStateHandler = d(822, O.c, function(e) {
              var t = new E.a(e.Body().steamid_clan());
              n.GetOrCreateClan(t).ReadStateUpdate(e.Body());
            })),
            (this.m_FriendStore = e);
        }
        return (
          (e.prototype.Init = function(e) {
            (this.m_CMInterface = e),
              this.m_CMInterface.AddOnLogonCallback(this.OnLogOn.bind(this));
          }),
          (e.prototype.OnLogOn = function() {}),
          Object.defineProperty(e.prototype, "clan_invites", {
            get: function() {
              var t = [];
              return (
                this.m_mapClans.forEach(function(e) {
                  e.m_bInitialized && e.BIsInvite() && t.push(e);
                }),
                t.sort(function(e, t) {
                  return e.name.localeCompare(t.name);
                }),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetClan = function(e) {
            var t;
            return (
              e instanceof E.a
                ? (AssertMsg(
                    e.BIsClanAccount(),
                    "expected clan steamid in GetClan()"
                  ),
                  (t = e.GetAccountID()))
                : (t = e),
              this.m_mapClans.get(t)
            );
          }),
          (e.prototype.JoinClanChatRoom = function(e, t) {
            var n = this.GetOrCreateClan(t);
            n.OpenChatDialog(e, !0),
              n.BNeedsPersonaData() && this.LoadMissingClanPersonas();
          }),
          (e.prototype.ClearClanMembershipData = function() {
            this.m_mapClans.forEach(function(e) {
              e.SetRelationship(0);
            });
          }),
          (e.prototype.SetClanChatGroupID = function(e, t) {
            var n = this.GetOrCreateClan(e);
            n.SetChatGroupID(t),
              n.BNeedsPersonaData() && this.ScheduleLoadMissingClanPersonas();
          }),
          (e.prototype.GetOrCreateClan = function(e, t) {
            var n;
            n = e instanceof E.a ? e : E.a.InitFromClanID(e);
            var o = this.m_mapClans.get(n.GetAccountID());
            return (
              o
                ? void 0 !== t && o.SetRelationship(t)
                : ((o = new nt(n, t || 0)),
                  this.m_mapClans.set(n.GetAccountID(), o)),
              o
            );
          }),
          (e.prototype.OnClanRelationshipChanged = function(e, t) {
            this.GetOrCreateClan(e, t);
          }),
          (e.prototype.RespondToClanInvite = function(e, t) {
            var n = u.Init(tt.a);
            return (
              n.Body().set_steamid(e.ConvertTo64BitString()),
              n.Body().set_accept(t),
              tt.b
                .RespondToClanInvite(
                  this.m_CMInterface.GetServiceTransport(),
                  n
                )
                .then(function(e) {
                  return 1 == e.GetEResult();
                })
            );
          }),
          (e.prototype.EnsureInitialStateForClanInvites = function() {
            var t = u.Init(Qe.e, 5554);
            this.clan_invites.forEach(function(e) {
              e.m_bGotInitialState ||
                t.Body().add_steamid_clans(e.steamid.ConvertTo64BitString());
            }),
              t.Body().steamid_clans().length <= 0 ||
                this.m_CMInterface.Send(t);
          }),
          (e.prototype.ScheduleLoadMissingClanPersonas = function() {
            this.m_iIntervalLoadClanData ||
              (this.m_iIntervalLoadClanData = SetBackgroundTimeout(
                this.LoadMissingClanPersonas.bind(this),
                100
              ));
          }),
          (e.prototype.LoadMissingClanPersonas = function() {
            this.m_iIntervalLoadClanData &&
              (ClearBackgroundTimeout(this.m_iIntervalLoadClanData),
              (this.m_iIntervalLoadClanData = void 0));
            var t = u.Init(g.p, 815);
            t.Body().set_persona_state_requested(1042),
              this.m_mapClans.forEach(function(e) {
                e.BNeedsPersonaData() &&
                  (t.Body().add_friends(e.steamid.ConvertTo64BitString()),
                  e.SetPersonaStateLoadRequested());
              }),
              t.Body().friends().length && this.m_CMInterface.Send(t);
          }),
          (e.prototype.OnClanPersonaStateUpdate = function(e, t) {
            var n = new E.a(t.friendid());
            this.GetOrCreateClan(n).ReadPersonaStateUpdate(e, t);
          }),
          R.c([m.computed], e.prototype, "clan_invites", null),
          e
        );
      })();
    function it(e, t) {
      return (
        e == t ||
        (e && t && e.friend == t.friend && e.clan == t.clan && e.chat == t.chat)
      );
    }
    var rt,
      at,
      st = (function() {
        function e(e) {
          var t = this;
          (this.m_rgFavorites = m.observable.array()),
            (this.m_IncomingFavoritesHandler = _(
              et.e.FavoritesChangedHandler,
              function(e) {
                return t.RecvFavoritesList(e.Body().favorites()), 1;
              }
            )),
            (this.m_FriendStore = e),
            (this.m_ClanStore = e.ClanStore);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_CMInterface = e),
              (this.m_ChatStore = Yo.ChatStore),
              this.m_CMInterface.AddOnLogonCallback(function() {
                var e = u.Init(et.b);
                et.f
                  .GetFavorites(t.m_CMInterface.GetServiceTransport(), e)
                  .then(function(e) {
                    1 == e.GetEResult() &&
                      t.RecvFavoritesList(e.Body().favorites());
                  });
              }, 47);
          }),
          (e.prototype.BIsFavorited = function(e) {
            for (var t = 0, n = this.m_rgFavorites; t < n.length; t++) {
              if (it(n[t], e)) return !0;
            }
            return !1;
          }),
          Object.defineProperty(e.prototype, "favorites", {
            get: function() {
              return this.m_rgFavorites;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.AddToFavorites = function(t, e) {
            var n = this.m_rgFavorites.findIndex(function(e) {
              return it(e, t);
            });
            return -1 === n || (void 0 !== e && n !== e)
              ? (-1 !== n
                  ? w.e(this.m_rgFavorites, n, n < e ? e - 1 : e)
                  : void 0 !== e
                    ? this.m_rgFavorites.splice(e, 0, t)
                    : this.m_rgFavorites.push(t),
                this.SaveFavorites())
              : Promise.resolve(!0);
          }),
          (e.prototype.RemoveFromFavorites = function(t) {
            return w.d(this.m_rgFavorites, function(e) {
              return it(e, t);
            })
              ? this.SaveFavorites()
              : Promise.resolve(!0);
          }),
          (e.prototype.OnFriendRemoved = function(e) {
            var t = this.m_FriendStore.GetPlayer(e);
            this.RemoveFromFavorites({ friend: t });
          }),
          (e.prototype.SaveFavorites = function() {
            for (
              var e = u.Init(et.d), t = 0, n = this.m_rgFavorites;
              t < n.length;
              t++
            ) {
              var o = n[t],
                i = e.Body().add_favorites();
              o.friend
                ? i.set_accountid(o.friend.accountid)
                : o.clan
                  ? i.set_clanid(o.clan.clanid)
                  : o.chat
                    ? i.set_chat_group_id(o.chat.GetGroupID())
                    : AssertMsg(!1, "empty favorite struct");
            }
            return et.f
              .SetFavorites(this.m_CMInterface.GetServiceTransport(), e)
              .then(function(e) {
                return 1 == e.GetEResult();
              });
          }),
          (e.prototype.ReadFavorites = function(e) {
            this.m_rgFavorites.clear();
            for (var t = 0, n = e; t < n.length; t++) {
              var o = n[t];
              if (o.accountid()) {
                var i = this.m_FriendStore.GetFriend(o.accountid());
                i && this.m_rgFavorites.push({ friend: i });
              } else if (o.clanid()) {
                var r = this.m_ClanStore.GetClan(o.clanid());
                r && this.m_rgFavorites.push({ clan: r });
              } else if (o.chat_group_id()) {
                var a = this.m_ChatStore.GetChatRoomGroup(o.chat_group_id());
                a && this.m_rgFavorites.push({ chat: a });
              }
            }
          }),
          (e.prototype.RecvFavoritesList = function(e) {
            var t = this;
            Object(m.when)(function() {
              return (
                t.m_FriendStore.friends_list_ready &&
                t.m_ChatStore.chat_group_list_ready
              );
            }, this.ReadFavorites.bind(this, e));
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            e.metrics().set_friends_favorite_count(
              w.b(this.m_rgFavorites, function(e) {
                return !!e.friend;
              })
            ),
              e.metrics().set_group_chat_favorite_count(
                w.b(this.m_rgFavorites, function(e) {
                  return !!e.chat || !!e.clan;
                })
              );
          }),
          R.c([m.action], e.prototype, "AddToFavorites", null),
          R.c([m.action], e.prototype, "RemoveFromFavorites", null),
          R.c([m.action], e.prototype, "OnFriendRemoved", null),
          R.c([m.action], e.prototype, "ReadFavorites", null),
          e
        );
      })(),
      ct = n("Gp1o"),
      lt = n("WpBz"),
      pt = (function() {
        return function() {
          (this.Notifications_ShowInGame = 0),
            (this.Notifications_ShowOnline = 0),
            (this.Notifications_ShowMessage = 0),
            (this.Sounds_PlayInGame = 0),
            (this.Sounds_PlayOnline = 0),
            (this.Sounds_PlayMessage = 0);
        };
      })(),
      ut = (function() {
        function i(e) {
          (this.m_eFriendRelationship = 0),
            (this.m_bPersonaStateLoadRequested = !1),
            (this.m_bPersonaStateReady = !1),
            (this.m_bPersonaNameHistoryLoaded = void 0),
            (this.m_rgPersonaNameHistory = []),
            (this.m_bBetaStatusLoading = !1),
            (this.m_bBetaStatusStale = !0),
            (this.m_bIsOnlineInBeta = void 0),
            (this.m_bIsInBeta = void 0),
            (this.m_unAccountID = e),
            (this.m_persona = new te(E.a.InitFromAccountID(e))),
            0 == e &&
              (AssertMsg(!1, "unset accountid"),
              (this.m_bPersonaStateReady = !0),
              (this.m_persona.m_bInitialized = !0));
        }
        return (
          (i.prototype.LoadIfNecessary = function() {
            this.m_persona.m_bInitialized ||
              this.m_bPersonaStateLoadRequested ||
              ((this.m_bPersonaStateLoadRequested = !0),
              Yo.FriendStore.QueueFriendPersonaStateLoad(this));
          }),
          Object.defineProperty(i.prototype, "is_ready", {
            get: function() {
              return (
                !(
                  !this.m_persona.m_bInitialized && !this.m_bPersonaStateReady
                ) &&
                (Object.defineProperty(this, "is_ready", { value: !0 }), !0)
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "persona", {
            get: function() {
              return (
                this.LoadIfNecessary(),
                Object.defineProperty(this, "persona", {
                  value: this.m_persona
                }),
                this.m_persona
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "accountid", {
            get: function() {
              return this.m_unAccountID;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "steamid", {
            get: function() {
              return this.m_persona.m_steamid;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "steamid64", {
            get: function() {
              return this.m_persona.m_steamid.ConvertTo64BitString();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "efriendrelationship", {
            get: function() {
              return this.m_eFriendRelationship;
            },
            set: function(e) {
              this.m_eFriendRelationship = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "is_friend", {
            get: function() {
              return (
                3 == this.m_eFriendRelationship ||
                6 == this.m_eFriendRelationship
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "is_blocked", {
            get: function() {
              return (
                5 == this.m_eFriendRelationship ||
                6 == this.m_eFriendRelationship
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.GetCommunityProfileURL = function() {
            return G.a.COMMUNITY_BASE_URL + "profiles/" + this.steamid64 + "/";
          }),
          Object.defineProperty(i.prototype, "has_nickname", {
            get: function() {
              return !!this.m_strNickname;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "nickname", {
            get: function() {
              return this.m_strNickname;
            },
            set: function(e) {
              (this.m_strNickname = e),
                (this.m_strPlayerNicknameNormalized = e
                  ? i.NormalizeNameForSearch(e)
                  : "");
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "notification_settings", {
            get: function() {
              return (
                this.m_NotificationSettings ||
                  (this.m_NotificationSettings = new pt()),
                this.m_NotificationSettings
              );
            },
            set: function(e) {
              this.m_NotificationSettings = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.BShowInGameNotification = function() {
            return (
              1 == this.notification_settings.Notifications_ShowInGame ||
              (Yo.SettingsStore.FriendsSettings.bNotifications_ShowIngame &&
                2 != this.notification_settings.Notifications_ShowInGame)
            );
          }),
          (i.prototype.BShowMessageNotification = function() {
            return (
              1 == this.notification_settings.Notifications_ShowMessage ||
              (Yo.SettingsStore.FriendsSettings.bNotifications_ShowMessage &&
                2 != this.notification_settings.Notifications_ShowMessage)
            );
          }),
          (i.prototype.BShowOnlineNotification = function() {
            return (
              1 == this.notification_settings.Notifications_ShowOnline ||
              (Yo.SettingsStore.FriendsSettings.bNotifications_ShowOnline &&
                2 != this.notification_settings.Notifications_ShowOnline)
            );
          }),
          (i.prototype.BPlayInGameSound = function() {
            return (
              1 == this.notification_settings.Sounds_PlayInGame ||
              (Yo.SettingsStore.FriendsSettings.bSounds_PlayIngame &&
                2 != this.notification_settings.Sounds_PlayInGame)
            );
          }),
          (i.prototype.BPlayMessageSound = function() {
            return (
              1 == this.notification_settings.Sounds_PlayMessage ||
              (Yo.SettingsStore.FriendsSettings.bSounds_PlayMessage &&
                2 != this.notification_settings.Sounds_PlayMessage)
            );
          }),
          (i.prototype.BPlayOnlineSound = function() {
            return (
              1 == this.notification_settings.Sounds_PlayOnline ||
              (Yo.SettingsStore.FriendsSettings.bSounds_PlayOnline &&
                2 != this.notification_settings.Sounds_PlayOnline)
            );
          }),
          Object.defineProperty(i.prototype, "display_name", {
            get: function() {
              if (this.has_nickname) {
                var e = this.primary_display_name;
                return (
                  this.showing_secondary_display_name &&
                    (e += "(" + this.secondary_display_name + ")"),
                  e
                );
              }
              return this.persona.m_strPlayerName;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "primary_display_name", {
            get: function() {
              if (
                this.has_nickname &&
                !Yo.SettingsStore.CommunityPreferences.bParenthesizeNicknames
              )
                return this.nickname;
              return this.persona.m_strPlayerName;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "has_secondary_display_name", {
            get: function() {
              return this.has_nickname;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "showing_secondary_display_name", {
            get: function() {
              return (
                !!Yo.SettingsStore.CommunityPreferences
                  .bParenthesizeNicknames && this.has_secondary_display_name
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "secondary_display_name", {
            get: function() {
              return Yo.SettingsStore.CommunityPreferences
                .bParenthesizeNicknames && this.has_nickname
                ? this.nickname
                : this.persona.m_strPlayerName;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "is_display_name_nickname", {
            get: function() {
              return (
                this.has_nickname &&
                !Yo.SettingsStore.CommunityPreferences.bParenthesizeNicknames
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.NormalizeNameForSearch = function(e) {
            return e.toLocaleLowerCase();
          }),
          Object.defineProperty(i.prototype, "player_name_normalized", {
            get: function() {
              var e = this;
              if (void 0 === this.m_strPlayerNameNormalized) {
                if (!this.is_ready) return "";
                var t = function() {
                  e.m_strPlayerNameNormalized = i.NormalizeNameForSearch(
                    e.m_persona.m_strPlayerName
                  );
                };
                Object(m.autorun)(t),
                  void 0 === this.m_strPlayerNameNormalized && t();
              }
              return (
                this.m_persona.m_strPlayerName, this.m_strPlayerNameNormalized
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "game_name_normalized", {
            get: function() {
              var e = this;
              if (void 0 === this.m_strGameNameNormalized) {
                if (!this.is_ready) return "";
                var t = function() {
                  e.m_strGameNameNormalized = i.NormalizeNameForSearch(
                    e.m_persona.current_game_name
                  );
                };
                Object(m.autorun)(t),
                  void 0 === this.m_strGameNameNormalized && t();
              }
              return (
                this.m_persona.current_game_name, this.m_strGameNameNormalized
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.MatchSearchString = function(e) {
            var t = this.player_name_normalized.indexOf(e);
            return -1 !== t
              ? {
                  match: 1,
                  iOffset: t,
                  bFullMatch:
                    0 === t && this.player_name_normalized.length === e.length
                }
              : this.has_nickname &&
                -1 !== (t = this.m_strPlayerNicknameNormalized.indexOf(e))
                ? {
                    match: 2,
                    iOffset: t,
                    bFullMatch:
                      0 === t &&
                      this.m_strPlayerNicknameNormalized.length === e.length
                  }
                : { match: 0 };
          }),
          (i.prototype.BMatchesSearchString = function(e, t) {
            if (-1 !== this.player_name_normalized.indexOf(e)) return !0;
            if (this.has_nickname) {
              if (-1 !== this.m_strPlayerNicknameNormalized.indexOf(e))
                return !0;
            } else if (
              t &&
              this.m_persona.is_ingame &&
              -1 !== this.game_name_normalized.indexOf(e)
            )
              return !0;
            return !1;
          }),
          Object.defineProperty(i.prototype, "persona_name_history", {
            get: function() {
              var i = this;
              if (void 0 === this.m_bPersonaNameHistoryLoaded) {
                var e = u.Init(O.a, 5570);
                e
                  .Body()
                  .add_Ids()
                  .set_steamid(this.steamid64),
                  e.Body().set_id_count(1),
                  Yo.CMInterface.SendMsgAndAwaitResponse(e, O.b).then(function(
                    e
                  ) {
                    if (
                      (AssertMsg(
                        1 == e.Body().responses().length,
                        "Got an invalid number of responses to CMsgClientAMGetPersonaNameHistory"
                      ),
                      1 == e.Body().responses().length)
                    ) {
                      var o = e.Body().responses()[0];
                      AssertMsg(
                        o.steamid() == i.steamid64,
                        "Got a response for the wrong user from CMsgClientAMGetPersonaNameHistory"
                      ),
                        o.steamid() == i.steamid64 &&
                          (AssertMsg(
                            0 == i.m_rgPersonaNameHistory.length,
                            "Got persona name history response for same user twice."
                          ),
                          Object(m.runInAction)(function() {
                            for (var e = 0, t = o.names(); e < t.length; e++) {
                              var n = t[e];
                              i.m_rgPersonaNameHistory.push(n.name());
                            }
                            i.m_bPersonaNameHistoryLoaded = !0;
                          }));
                    }
                  }),
                  (this.m_bPersonaNameHistoryLoaded = !1);
              }
              return this.m_rgPersonaNameHistory;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "persona_name_history_loaded", {
            get: function() {
              return !0 === this.m_bPersonaNameHistoryLoaded;
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.OpenChatDialog = function(e) {
            return this.is_blocked
              ? (Yo.OpenURLInBrowser(this.GetCommunityProfileURL(), e), null)
              : Yo.ShowFriendChatDialog(e, this.m_unAccountID, !0);
          }),
          Object.defineProperty(i, "FriendSortStatusComparator", {
            get: function() {
              var e = Yo.SettingsStore.BForceAlphabeticFriendSorting();
              return i.FriendSortStatusComparatorInternal.bind(null, e);
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.FriendSortStatusComparatorInternal = function(e, t, n) {
            var o = t.persona,
              i = n.persona;
            if (o.is_ingame) {
              if (!i.is_ingame) return -1;
              if (e) return 0;
              if (o.is_awayOrSnooze) {
                if (!i.is_awayOrSnooze) return 1;
              } else if (i.is_awayOrSnooze) return -1;
            } else if (i.is_ingame) return 1;
            if (o.is_online) {
              if (!i.is_online) return -1;
            } else if (i.is_online) return 1;
            if (!e)
              if (o.is_awayOrSnooze) {
                if (!i.is_awayOrSnooze) return 1;
              } else if (i.is_awayOrSnooze) return -1;
            return 0;
          }),
          Object.defineProperty(i, "DefaultFriendSortComparator", {
            get: function() {
              var o = Yo.SettingsStore.BForceAlphabeticFriendSorting();
              return function(e, t) {
                var n = i.FriendSortStatusComparatorInternal(o, e, t);
                return 0 != n
                  ? n
                  : e.display_name.localeCompare(t.display_name);
              };
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.FriendSortByLastSeenComparator = function(e, t) {
            var n = e.persona,
              o = t.persona;
            if (!n.is_online && !o.is_online) {
              var i = Yo.GetServerRTime32() - n.last_seen_online,
                r = Yo.GetServerRTime32() - o.last_seen_online;
              if (r < i) return 1;
              if (i < r) return -1;
            }
            return e.display_name.localeCompare(t.display_name);
          }),
          (i.FriendSortByFriendOrNotComparator = function(e, t) {
            return (e.is_friend && !t.is_friend) ||
              (!e.is_friend && t.is_friend)
              ? e.is_friend ? -1 : 1
              : e.display_name.localeCompare(t.display_name);
          }),
          (i.prototype.GetOfflineStatusUpdateRate = function() {
            if (0 == this.persona.last_seen_online) return 3e4;
            var e = 1e3,
              t = Yo.GetServerRTime32() - this.persona.last_seen_online;
            return (e *= 86400 < t ? 3600 : 7200 < t ? 60 : 15);
          }),
          (i.prototype.GetOfflineStatusTime = function() {
            if (0 == this.persona.last_seen_online)
              return Object(re.b)("#PersonaStateOffline");
            var e = this.GetOfflineStatusUpdateRate();
            (!G.a.IN_MOBILE || e <= 60) && Object(ct.a)(e);
            var t = Yo.GetServerRTime32() - this.persona.last_seen_online;
            return t < 60
              ? Object(re.b)("#PersonaStateLastSeen_JustNow")
              : Object(re.b)("#PersonaStateLastSeen", Object(re.e)(t));
          }),
          Object.defineProperty(i.prototype, "localized_online_status", {
            get: function() {
              switch (this.persona.m_ePersonaState) {
                case 0:
                case 7:
                  return this.GetOfflineStatusTime();
                case 1:
                  return Object(re.b)("#PersonaStateOnline");
                case 2:
                  return Object(re.b)("#PersonaStateBusy");
                case 3:
                  return Object(re.b)("#PersonaStateAway");
                case 4:
                  return Object(re.b)("#PersonaStateSnooze");
                case 5:
                  return Object(re.b)("#PersonaStateLookingToTrade");
                case 6:
                  return Object(re.b)("#PersonaStateLookingToPlay");
                default:
                  return "";
              }
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.GetBroadcastDescription = function() {
            if (this.persona.m_strBroadcastTitle)
              return this.persona.m_strBroadcastTitle;
            if (this.persona.m_broadcastAccountId) {
              var e = Yo.FriendStore.GetPlayer(
                  this.persona.m_broadcastAccountId
                ),
                t = this.persona.m_broadcastAppId
                  ? Yo.AppInfoStore.GetAppInfo(this.persona.m_broadcastAppId)
                  : null;
              if (e.is_ready)
                return t && t.is_valid
                  ? Object(re.b)(
                      "#PersonaStateWatchingBroadcast_PlayerGame",
                      e.display_name,
                      t.name
                    )
                  : Object(re.b)(
                      "#PersonaStateWatchingBroadcast_Player",
                      e.display_name
                    );
            }
            return null;
          }),
          (i.prototype.LoadFriendsUIBetaStatus = function() {
            var t = this;
            if (
              this.is_friend &&
              this.m_bBetaStatusStale &&
              !this.m_bBetaStatusLoading
            ) {
              this.m_bBetaStatusLoading = !0;
              var n = this.persona.is_online,
                e = u.Init($e.c);
              e.Body().set_steamid(this.steamid64),
                $e.g
                  .IsInFriendsUIBeta(Yo.CMInterface.GetServiceTransport(), e)
                  .then(function(e) {
                    (t.m_bBetaStatusLoading = !1),
                      (t.m_bBetaStatusStale = !1),
                      (t.m_bIsOnlineInBeta =
                        e.Body().online_in_friendsui() || !1),
                      (t.m_bIsInBeta = e.Body().has_used_friendsui() || !1),
                      Object(m.when)(function() {
                        return t.persona.is_online != n;
                      }).then(function() {
                        t.m_bBetaStatusStale = !0;
                      });
                  });
            }
          }),
          Object.defineProperty(i.prototype, "is_in_beta", {
            get: function() {
              return this.LoadFriendsUIBetaStatus(), this.m_bIsInBeta;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "is_online_in_beta", {
            get: function() {
              return this.LoadFriendsUIBetaStatus(), this.m_bIsOnlineInBeta;
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.observable], i.prototype, "m_eFriendRelationship", void 0),
          R.c([m.observable], i.prototype, "m_bPersonaStateReady", void 0),
          R.c(
            [m.observable],
            i.prototype,
            "m_bPersonaNameHistoryLoaded",
            void 0
          ),
          R.c([m.observable], i.prototype, "m_rgPersonaNameHistory", void 0),
          R.c(
            [m.observable],
            i.prototype,
            "m_strPlayerNicknameNormalized",
            void 0
          ),
          R.c([m.observable], i.prototype, "m_strNickname", void 0),
          R.c([m.observable], i.prototype, "m_bBetaStatusStale", void 0),
          R.c([m.observable], i.prototype, "m_bIsOnlineInBeta", void 0),
          R.c([m.observable], i.prototype, "m_bIsInBeta", void 0),
          R.c([m.computed], i.prototype, "display_name", null),
          R.c([m.computed], i.prototype, "secondary_display_name", null),
          R.c([m.computed], i.prototype, "persona_name_history", null),
          R.c([m.computed], i.prototype, "persona_name_history_loaded", null),
          R.c([m.computed], i.prototype, "localized_online_status", null),
          i
        );
      })(),
      mt = "FriendStoreLocalPrefs",
      dt = (function() {
        function e() {
          (this.m_currentMsg = null), (this.m_mapLastSeenApp = new Map());
        }
        return (
          (e.prototype.Init = function(e) {
            (this.m_CMInterface = e),
              SetBackgroundInterval(this.NotifyImpressions, 12e4);
          }),
          (e.prototype.RecordFriendInGameImpression = function(e) {
            if (!(e == S.j || (e >= S.d && e <= S.e))) {
              this.m_currentMsg || (this.m_currentMsg = u.Init(Ze.a));
              var t = !0;
              if (this.m_mapLastSeenApp.has(e)) {
                var n = this.m_mapLastSeenApp.get(e);
                t = 864e5 < Date.now() - n;
              }
              var o = null;
              if (t)
                this.m_mapLastSeenApp.set(e, Date.now()),
                  (o = this.m_currentMsg.Body().add_impressions()).set_appid(e),
                  o.set_type(2),
                  o.set_num_impressions(0);
              else {
                for (
                  var i = 0;
                  i < this.m_currentMsg.Body().impressions().length;
                  ++i
                ) {
                  var r = this.m_currentMsg.Body().impressions()[i];
                  if (r.appid() == e && 1 == r.type()) {
                    o = r;
                    break;
                  }
                }
                o ||
                  ((o = this.m_currentMsg.Body().add_impressions()).set_appid(
                    e
                  ),
                  o.set_type(1),
                  o.set_num_impressions(0));
              }
              o.set_num_impressions(o.num_impressions() + 1);
            }
          }),
          (e.prototype.NotifyImpressions = function() {
            if (this.m_currentMsg) {
              var e = this.m_currentMsg;
              (this.m_currentMsg = null),
                Ze.b.ReportProductImpressionsFromClient(
                  this.m_CMInterface.GetServiceTransport(),
                  e
                );
            }
          }),
          R.c([m.action.bound], e.prototype, "NotifyImpressions", null),
          e
        );
      })(),
      ht = (function() {
        function e() {
          var O = this;
          (this.m_FriendGroupStore = new Dt(this)),
            (this.m_ClanStore = new ot(this)),
            (this.m_FavoritesStore = new st(this)),
            (this.m_mapPlayerCache = new Map()),
            (this.m_mapApprovedNonFriendMessages = m.observable.map()),
            (this.m_setFriendsNeedingPersonaStateLoad = new Set()),
            (this.m_iIntervalSubscribeToPersonaStateUpdates = 0),
            (this.m_setFriendAccountIDs = new Set()),
            (this.m_setIncomingInviteAccountIDs = new Set()),
            (this.m_bUserSetPersonaState = !1),
            (this.m_eUserPersonaState = 0),
            (this.m_FriendStorePrefs = {
              ePersonaState: 1,
              strNonFriendsAllowedToMsg: ""
            }),
            (this.m_cPersonaStateUpdatesReceived = 0),
            (this.m_bReadyToRender = !1),
            (this.m_bPerFriendPreferencesLoaded = !1),
            (this.m_bReceivedFriendsList = !1),
            (this.m_bInitialPersonaStatesLoaded = !1),
            (this.m_bParentalLocked = void 0),
            (this.m_eUserPersonaStateParental = 1),
            (this.m_rgPersonaStateChangeCallbacks = new D()),
            (this.m_rgPlayerGameChangedCallbacks = new D()),
            (this.m_nMissingPersonaStateRetryCount = 0),
            (this.m_nMissingPersonaStateMaxRetries = 5),
            (this.m_FriendInGameNotificationStore = new dt()),
            (this.m_bSnoozeCallbackFired = !0),
            (this.m_bAwayCallbackFired = !0),
            (this.m_bNextActivityCallbackRegistered = !1),
            (this.fnRecvMsgClientFriendsList = d(767, g.i, function(e) {
              e.Body().bincremental() && O.SetFriendsList(e.Body());
            })),
            (this.fnRecvMsgClientPersonaState = d(766, g.m, function(e) {
              for (
                var t = e.Body().status_flags(), n = 0, o = e.Body().friends();
                n < o.length;
                n++
              ) {
                var i = o[n],
                  r = new E.a(i.friendid());
                if (r.BIsClanAccount())
                  O.m_ClanStore.OnClanPersonaStateUpdate(t, i);
                else if (r.BIsIndividualAccount()) {
                  var a = O.GetPlayerIfCached(r.GetAccountID());
                  a || (a = O.GetPlayer(r.GetAccountID()));
                  var s = a.persona,
                    c = s.m_ePersonaState,
                    l = s.m_strPlayerName,
                    p = s.m_unGamePlayedAppID,
                    u = s.m_strGameExtraInfo,
                    m = s.is_in_nonsteam_game,
                    d = s.m_broadcastAppId,
                    h = s.m_bInitialized;
                  s.m_bInitialized || O.m_cPersonaStateUpdatesReceived++,
                    s.UpdateFromMessage(t, i);
                  var _ = 0 != (1 & t);
                  if (r.GetAccountID() == O.self.accountid && _) {
                    var f = !!i.persona_set_by_user(),
                      g = s.m_ePersonaState;
                    O.UpdateUserPersonaStateInternal(g, f, !0),
                      1 == g &&
                        1 != (g = O.AdjustPersonaStateForIdleTime(g)) &&
                        O.UpdateUserPersonaStateInternal(g, !1);
                  }
                  var b = !1,
                    v = s.m_unGamePlayedAppID,
                    S = s.m_broadcastAppId;
                  !d || (IsFeatureBroadcastEnabled() && d == J) || (d = void 0),
                    !S ||
                      (IsFeatureBroadcastEnabled() && S == J) ||
                      (S = void 0);
                  var y = !1;
                  if (v || p || m || s.is_in_nonsteam_game || S || d) {
                    if (
                      ((b = p != v), s.GetAccountID() != O.m_self.accountid)
                    ) {
                      var C = p,
                        I = v;
                      0 == s.m_ePersonaState && (I = 0),
                        m && (C = _t),
                        s.is_in_nonsteam_game && (I = _t),
                        !C && d && (C = d),
                        !I && S && (I = S),
                        a.is_friend &&
                          O.m_FriendGroupStore.OnFriendGameChanged(
                            r.GetAccountID(),
                            C,
                            I
                          ),
                        O.m_rgPlayerGameChangedCallbacks.Dispatch(
                          r.GetAccountID(),
                          C,
                          I
                        ),
                        (y = !0);
                    }
                  } else
                    s.m_strGameExtraInfo && (b = u != s.m_strGameExtraInfo);
                  h &&
                    a.is_friend &&
                    a.accountid != O.m_self.accountid &&
                    (c != s.m_ePersonaState || b) &&
                    (a.BPlayInGameSound() && b && a.persona.is_ingame
                      ? O.PlayJoinGameSound()
                      : a.BPlayOnlineSound() &&
                        c != s.m_ePersonaState &&
                        1 == s.m_ePersonaState &&
                        O.PlayFriendOnlineSound(),
                    O.OnFriendPersonaStateChanged(a, c, s.m_ePersonaState, b)),
                    y ||
                      (s.m_ePersonaState == c &&
                        !b &&
                        s.m_strPlayerName == l) ||
                      O.m_rgPersonaStateChangeCallbacks.Dispatch(a);
                }
              }
              O.m_cPersonaStateUpdatesReceived >=
                O.m_setFriendAccountIDs.size &&
                O.m_bReceivedFriendsList &&
                ((O.m_bInitialPersonaStatesLoaded = !0),
                O.UpdateReadyToRenderState());
            })),
            (this.m_PerFriendPreferencesChangedHandler = _(
              Xe.j.NotifyPerFriendPreferencesChangedHandler,
              function(e) {
                var t = O.GetPlayer(e.Body().accountid());
                if (t) {
                  var n = e.Body().preferences();
                  t.nickname = n.nickname() || void 0;
                  var o = new pt();
                  O.FillPerFriendNotificationSettingsFromMessage(o, n),
                    (t.notification_settings = o);
                }
                return 1;
              }
            )),
            (this.m_InitiateTradeResult = d(7704, Qe.h, function(e) {
              var t = e.Body().response(),
                n = (e.Body().trade_request_id(),
                new E.a(e.Body().other_steamid()));
              switch (t) {
                case 0:
                case 50:
                  break;
                case 1:
                  (o = Yo.ShowFriendChatDialog(
                    Yo.GetDefaultBrowserContext(),
                    n.GetAccountID(),
                    !1
                  )) && o.MarkTradeRequestDeclined();
                  break;
                case 11:
                case 4:
                case 12:
                case 9:
                case 8:
                case 13:
                case 7:
                case 26:
                case 22:
                  var o,
                    i = new Ne(e.Body().response());
                  (i.steamguard_required_days = e
                    .Body()
                    .steamguard_required_days()),
                    (i.new_device_cooldown_days = e
                      .Body()
                      .new_device_cooldown_days()),
                    (i.default_password_reset_probation_days = e
                      .Body()
                      .default_password_reset_probation_days()),
                    (i.password_reset_probation_days = e
                      .Body()
                      .password_reset_probation_days()),
                    (i.default_email_change_probation_days = e
                      .Body()
                      .default_email_change_probation_days()),
                    (i.email_change_probation_days = e
                      .Body()
                      .email_change_probation_days()),
                    (o = Yo.ShowFriendChatDialog(
                      Yo.GetDefaultBrowserContext(),
                      n.GetAccountID(),
                      !1
                    )) && o.CancelTradeRequest(i);
              }
            })),
            (this.m_InitiateTradeProposed = d(7702, Qe.g, function(e) {
              var t = new E.a(e.Body().other_steamid()),
                n = O.GetFriend(t.GetAccountID());
              if (n) {
                var o = e.Body().trade_request_id(),
                  i = Yo.ShowFriendChatDialog(
                    Yo.GetDefaultBrowserContext(),
                    n.accountid,
                    !1
                  );
                i &&
                  i.AddNewTradeRequestAndNotify(
                    t.GetAccountID(),
                    Yo.GetServerRTime32(),
                    e.Body().other_steamid(),
                    o
                  );
              }
            })),
            (this.m_StartTradingSession = d(7705, Qe.i, function(e) {
              var t = new E.a(e.Body().other_steamid()),
                n = O.OpenTradeWindow(e.Body().other_steamid()),
                o = Yo.ShowFriendChatDialog(
                  Yo.GetDefaultBrowserContext(),
                  t.GetAccountID(),
                  !1
                );
              o && o.MarkTradeRequestAccepted(n);
            }));
        }
        return (
          (e.prototype.Init = function(e) {
            var s = this;
            (this.m_CMInterface = e),
              this.m_FriendGroupStore.Init(e),
              this.m_ClanStore.Init(e),
              this.m_FavoritesStore.Init(e),
              this.m_FriendInGameNotificationStore.Init(e);
            var t = !1;
            return (
              this.m_CMInterface.AddOnLogonCallback(function() {
                t
                  ? s.SendPersonaStateToServer(!0)
                  : ((t = !0),
                    (s.m_self = s.AddPlayerToCache(
                      s.m_CMInterface.steamid.GetAccountID(),
                      1
                    )),
                    Yo.SettingsStore.GetObjectFromLocalStorage(
                      mt,
                      s.m_FriendStorePrefs
                    ).then(function(e) {
                      if (
                        null !=
                          (s.m_FriendStorePrefs = e)
                            .strNonFriendsAllowedToMsg &&
                        "" != e.strNonFriendsAllowedToMsg
                      )
                        for (
                          var t = new Date().getTime(),
                            n = e.strNonFriendsAllowedToMsg.split(","),
                            o = 0;
                          o < n.length;
                          ++o
                        ) {
                          var i = n[o].split("=");
                          if (2 == i.length) {
                            var r = Number(i[0]),
                              a = Number(i[1]);
                            t < a && s.m_mapApprovedNonFriendMessages.set(r, a);
                          }
                        }
                      (s.m_eUserPersonaState = e.ePersonaState),
                        (s.m_bUserSetPersonaState = !1),
                        s.SendPersonaStateToServer(!0);
                    }),
                    s.m_bReadyToRender ||
                      SetBackgroundTimeout(s.ForceReadyToRender.bind(s), 1e3)),
                  s.GetFriendsList();
              }),
              this.m_CMInterface.AddOnDisconnectCallback(function() {
                s.SetPersonasOffline(!1),
                  s.m_FriendGroupStore.OnPersonaStateCacheReset();
              }),
              this.m_CMInterface.AddOnDisconnectCallback(function() {
                s.SetPersonasOffline(!0);
              }, 102),
              Object(m.autorun)(function() {
                var e = Yo.ParentalStore.BIsFriendsBlocked();
                s.OnParentalLockChanged(e);
              }),
              this.InitializeIdleTracking(),
              this.m_bReadyToRender
                ? Promise.resolve()
                : new Promise(function(e, t) {
                    s.m_fnOnReadyToRender = e;
                  })
            );
          }),
          (e.prototype.UpdateUnreadMessagesGlobal = function() {
            if (
              void 0 !== window.SteamClient &&
              null !=
                window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages
            ) {
              for (
                var e = 0,
                  t = 0,
                  n = Yo.ChatStore.FriendChatStore.GetFriendsWithUnreadMessages(
                    null
                  );
                t < n.length;
                t++
              ) {
                n[t].has_unread_priority_messages && ++e;
              }
              (e += Yo.ChatStore.GetChatRoomsWithUnreadPriorityMessages()
                .length),
                window.SteamClient.WebChat.SetNumChatsWithUnreadPriorityMessages(
                  e
                );
            }
          }),
          (e.prototype.GetFriendsList = function() {
            return R.b(this, void 0, void 0, function() {
              var t, n, o;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      (t = u.Init(et.c)),
                      [
                        4,
                        et.f.GetFriendsList(
                          this.m_CMInterface.GetServiceTransport(),
                          t
                        )
                      ]
                    );
                  case 1:
                    return (
                      1 == (n = e.sent()).GetEResult()
                        ? this.SetFriendsList(n.Body().friendslist())
                        : ((o = { message: "ShowFriendsErrorRetryDialog" }),
                          window.parent.postMessage(
                            o,
                            "https://steamloopback.host"
                          ),
                          AssertMsg(
                            !1,
                            "GetFriendsList returned",
                            n.GetEResult()
                          )),
                      [2]
                    );
                }
              });
            });
          }),
          (e.prototype.UpdateReadyToRenderState = function() {
            this.m_bReadyToRender ||
              (this.m_bReceivedFriendsList &&
                this.m_bInitialPersonaStatesLoaded &&
                this.m_bPerFriendPreferencesLoaded &&
                ((this.m_bReadyToRender = !0),
                this.m_fnOnReadyToRender &&
                  (this.m_fnOnReadyToRender(),
                  (this.m_fnOnReadyToRender = void 0))));
          }),
          (e.prototype.ForceReadyToRender = function() {
            AssertMsg(
              this.m_bReadyToRender,
              "FriendStore: Forcing ready to render, was not ready in time."
            ),
              (this.m_bInitialPersonaStatesLoaded = !0),
              (this.m_bPerFriendPreferencesLoaded = !0),
              this.UpdateReadyToRenderState();
          }),
          (e.prototype.AddPersonaStateChangedCallback = function(e) {
            return this.m_rgPersonaStateChangeCallbacks.Register(e);
          }),
          (e.prototype.AddPlayerGameChangedCallback = function(e) {
            return this.m_rgPlayerGameChangedCallbacks.Register(e);
          }),
          (e.prototype.BIsInvisibleMode = function() {
            return 7 == this.m_eUserPersonaState;
          }),
          (e.prototype.GetUserDoNotDisturb = function() {
            return Yo.SettingsStore.FriendsSettings.bDoNotDisturbMode;
          }),
          (e.prototype.SetUserDoNotDisturb = function(e) {
            (Yo.SettingsStore.FriendsSettings.bDoNotDisturbMode = e),
              Yo.SettingsStore.BUpdateFriendsSettings(
                Yo.SettingsStore.FriendsSettings
              );
          }),
          (e.prototype.SetUserPersonaState = function(e) {
            this.UpdateUserPersonaStateInternal(e, !0);
          }),
          (e.prototype.BApprovedNonFriendMessages = function(e) {
            var t = new Date(),
              n = this.m_mapApprovedNonFriendMessages.get(e);
            return null != n && n > t.getTime();
          }),
          (e.prototype.SetApprovedNonFriendMessages = function(e) {
            var o = new Date().getTime();
            this.m_mapApprovedNonFriendMessages.set(e, o + 864e5);
            var i = "";
            this.m_mapApprovedNonFriendMessages.forEach(function(e, t, n) {
              o < e &&
                (0 != i.length && (i += ","),
                (i += t.toString() + "=" + e.toString()));
            }),
              (this.m_FriendStorePrefs.strNonFriendsAllowedToMsg = i),
              Yo.SettingsStore.StoreObjectInLocalStorage(
                mt,
                this.m_FriendStorePrefs
              );
          }),
          (e.prototype.OnParentalLockChanged = function(e) {
            !this.m_bParentalLocked && e
              ? ((this.m_eUserPersonaStateParental = this.m_eUserPersonaState),
                this.UpdateUserPersonaStateInternal(0, !1),
                (this.m_bParentalLocked = e))
              : this.m_bParentalLocked &&
                !e &&
                ((this.m_bParentalLocked = e),
                this.UpdateUserPersonaStateInternal(
                  this.m_eUserPersonaStateParental,
                  !1
                ));
          }),
          (e.prototype.UpdateUserPersonaStateInternal = function(e, t, n) {
            void 0 === n && (n = !1),
              this.m_bParentalLocked ||
                (e == this.m_eUserPersonaState &&
                  this.m_bUserSetPersonaState == t) ||
                (0 == e && t
                  ? Yo.SignOutOfFriends(void 0)
                  : ((this.m_eUserPersonaState = e),
                    (this.m_bUserSetPersonaState = t),
                    n || this.SendPersonaStateToServer(),
                    (t || 1 == this.m_eUserPersonaState) &&
                      ((this.m_FriendStorePrefs.ePersonaState = e),
                      Yo.SettingsStore.StoreObjectInLocalStorage(
                        mt,
                        this.m_FriendStorePrefs
                      ))));
          }),
          (e.prototype.SendPersonaStateToServer = function(e) {
            void 0 === e && (e = !1);
            var t = u.Init(g.c, 716);
            t.Body().set_persona_state(this.m_eUserPersonaState),
              t.Body().set_persona_set_by_user(this.m_bUserSetPersonaState),
              t.Body().set_need_persona_response(e),
              this.m_CMInterface.Send(t);
          }),
          (e.prototype.AdjustPersonaStateForIdleTime = function(e) {
            return (1 == e || 3 == e) &&
              7200 <= Yo.IdleTracker.GetUserIdleTime()
              ? 4
              : 1 == e && 300 <= Yo.IdleTracker.GetUserIdleTime() ? 3 : e;
          }),
          Object.defineProperty(e.prototype, "FriendGroupStore", {
            get: function() {
              return this.m_FriendGroupStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ClanStore", {
            get: function() {
              return this.m_ClanStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "FavoritesStore", {
            get: function() {
              return this.m_FavoritesStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "all_friends", {
            get: function() {
              var t = this,
                n = [];
              return (
                this.m_setFriendAccountIDs.forEach(function(e) {
                  n.push(t.GetFriend(e));
                }),
                n
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "all_friends_accountids", {
            get: function() {
              return this.m_setFriendAccountIDs;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "friends_list_ready", {
            get: function() {
              return this.m_bReceivedFriendsList;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetFriend = function(e) {
            var t = this.m_mapPlayerCache.get(e);
            if (t) {
              if (!t.is_friend) return null;
            } else AssertMsg(!1, "Friend missing from cache: " + e);
            return t;
          }),
          (e.prototype.GetPlayer = function(e) {
            var t = this.m_mapPlayerCache.get(e);
            return t || (t = this.AddPlayerToCache(e, 3)), t;
          }),
          (e.prototype.AddPlayerToCache = function(e, t, n) {
            if ((void 0 === n && (n = !0), this.m_mapPlayerCache.has(e)))
              return this.m_mapPlayerCache.get(e);
            var o = new ut(e);
            return this.m_mapPlayerCache.set(e, o), o;
          }),
          (e.prototype.GetPlayerIfCached = function(e) {
            return this.m_mapPlayerCache.get(e);
          }),
          (e.prototype.GetFriendIfCached = function(e) {
            var t = this.m_mapPlayerCache.get(e);
            return t && t.is_friend ? t : null;
          }),
          (e.prototype.SetPersonasOffline = function(t) {
            var n = this;
            this.m_mapPlayerCache.forEach(function(e) {
              (t && (e.is_friend || e.accountid == n.self.accountid)) ||
                (e.persona.is_online && e.persona.ClearStateOnDisconnect());
            });
          }),
          (e.prototype.QueueFriendPersonaStateLoad = function(e) {
            this.m_setFriendsNeedingPersonaStateLoad.add(e.accountid),
              this.m_iIntervalSubscribeToPersonaStateUpdates ||
                (this.m_iIntervalSubscribeToPersonaStateUpdates = SetBackgroundTimeout(
                  this.SubscribeToMissingPersonaStates.bind(this),
                  50
                ));
          }),
          Object.defineProperty(e.prototype, "self", {
            get: function() {
              return this.m_self;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SubscribeToMissingPersonaStates = function() {
            var r = this;
            this.m_iIntervalSubscribeToPersonaStateUpdates &&
              (ClearBackgroundTimeout(
                this.m_iIntervalSubscribeToPersonaStateUpdates
              ),
              (this.m_iIntervalSubscribeToPersonaStateUpdates = 0));
            var a = [];
            if (
              (this.m_setFriendsNeedingPersonaStateLoad.forEach(function(e) {
                var t = r.m_mapPlayerCache.get(e);
                t && !t.persona.m_bInitialized && a.push(t.accountid);
              }),
              this.m_setFriendsNeedingPersonaStateLoad.clear(),
              a.length)
            ) {
              var e = u.Init(g.p, 815);
              e.Body().set_persona_state_requested(1106);
              for (var t = 0, n = a; t < n.length; t++) {
                var o = n[t];
                e
                  .Body()
                  .add_friends(E.a.InitFromAccountID(o).ConvertTo64BitString());
              }
              this.m_CMInterface.Send(e),
                SetBackgroundTimeout(function() {
                  for (var e = 0, t = 0, n = a; t < n.length; t++) {
                    var o = n[t],
                      i = r.GetPlayer(o);
                    i &&
                      !i.persona.m_bInitialized &&
                      ((i.m_bPersonaStateReady = !0),
                      i.persona.m_bNameInitialized ||
                        (AssertMsg(
                          i.m_bPersonaStateLoadRequested,
                          "PersonaStateLoadRequested not set"
                        ),
                        r.m_setFriendsNeedingPersonaStateLoad.add(o)),
                      e++);
                  }
                  0 < e
                    ? r.m_nMissingPersonaStateRetryCount <
                      r.m_nMissingPersonaStateMaxRetries
                      ? (r.m_nMissingPersonaStateRetryCount++,
                        r.m_iIntervalSubscribeToPersonaStateUpdates ||
                          (r.m_iIntervalSubscribeToPersonaStateUpdates = SetBackgroundTimeout(
                            r.SubscribeToMissingPersonaStates.bind(r),
                            1e3
                          )))
                      : console.log(
                          "Giving up persona state retries with",
                          e,
                          "still not filled",
                          r.m_setFriendsNeedingPersonaStateLoad
                        )
                    : (r.m_nMissingPersonaStateRetryCount = 0);
                }, 500);
            }
          }),
          (e.prototype.InitializeIdleTracking = function() {
            this.m_bAwayCallbackFired &&
              ((this.m_bAwayCallbackFired = !1),
              Yo.IdleTracker.AddOnIdleCallback(this.OnIdle.bind(this, 3), 300)),
              this.m_bSnoozeCallbackFired &&
                ((this.m_bSnoozeCallbackFired = !1),
                Yo.IdleTracker.AddOnIdleCallback(
                  this.OnIdle.bind(this, 4),
                  7200
                ));
          }),
          (e.prototype.ResetIdleState = function() {
            this.m_bUserSetPersonaState ||
              (3 != this.m_eUserPersonaState &&
                4 != this.m_eUserPersonaState) ||
              this.UpdateUserPersonaStateInternal(1, !1),
              (this.m_bNextActivityCallbackRegistered = !1),
              this.InitializeIdleTracking();
          }),
          (e.prototype.OnIdle = function(e) {
            3 == e
              ? ((this.m_bAwayCallbackFired = !0),
                this.m_bUserSetPersonaState ||
                  4 == this.m_eUserPersonaState ||
                  this.UpdateUserPersonaStateInternal(e, !1))
              : 4 == e &&
                ((this.m_bSnoozeCallbackFired = !0),
                this.m_bUserSetPersonaState ||
                  this.UpdateUserPersonaStateInternal(e, !1)),
              this.m_bNextActivityCallbackRegistered ||
                ((this.m_bNextActivityCallbackRegistered = !0),
                Yo.IdleTracker.AddOnNextActivityCallback(
                  this.ResetIdleState.bind(this)
                ));
          }),
          (e.prototype.SendFriendInvite = function(e) {
            var t = u.Init(Xe.a);
            return (
              t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),
              Xe.k
                .AddFriend(this.m_CMInterface.GetServiceTransport(), t)
                .then(function(e) {
                  return e.Body().friend_relationship();
                })
            );
          }),
          (e.prototype.RemoveFriend = function(e) {
            var t = u.Init(Xe.g);
            return (
              t.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),
              Xe.k
                .RemoveFriend(this.m_CMInterface.GetServiceTransport(), t)
                .then(function(e) {
                  return e.Body().friend_relationship();
                })
            );
          }),
          (e.prototype.BlockPlayer = function(e, t) {
            void 0 === t && (t = !1);
            var n = u.Init(Xe.f);
            return (
              n.Body().set_steamid(e.persona.m_steamid.ConvertTo64BitString()),
              t && n.Body().set_unignore(!0),
              Xe.k
                .IgnoreFriend(this.m_CMInterface.GetServiceTransport(), n)
                .then(function(e) {
                  return e.Body().friend_relationship();
                })
            );
          }),
          (e.prototype.AddFriend = function(e, t) {
            var n = new E.a(e).GetAccountID(),
              o = this.m_setIncomingInviteAccountIDs.has(n);
            2 == t
              ? o ||
                (((a = this.AddPlayerToCache(
                  n,
                  3,
                  !1
                )).efriendrelationship = t),
                a.LoadIfNecessary(),
                this.m_setIncomingInviteAccountIDs.add(n),
                this.m_FriendGroupStore.OnIncomingInviteAdded(n))
              : o &&
                (((a = this.AddPlayerToCache(
                  n,
                  3,
                  !1
                )).efriendrelationship = t),
                this.m_setIncomingInviteAccountIDs.delete(n),
                this.m_FriendGroupStore.OnIncomingInviteRemoved(n));
            4 == t
              ? (((a = this.AddPlayerToCache(
                  n,
                  3,
                  !1
                )).efriendrelationship = t),
                a.LoadIfNecessary(),
                this.m_FriendGroupStore.OnOutgoingInviteAdded(n))
              : this.m_FriendGroupStore.OnOutgoingInviteRemoved(n);
            var i = this.m_setFriendAccountIDs.has(n);
            if (3 == t || 6 == t) {
              var r = void 0;
              i
                ? (r = this.GetFriend(n))
                : (this.m_setFriendAccountIDs.add(n),
                  (r = this.AddPlayerToCache(n, 2, !1)).LoadIfNecessary(),
                  this.m_FriendGroupStore.OnFriendAdded(n)),
                (r.efriendrelationship = t);
            } else {
              var a;
              i &&
                (this.m_FriendGroupStore.OnFriendRemoved(n),
                this.m_FavoritesStore.OnFriendRemoved(n),
                this.m_setFriendAccountIDs.delete(n)),
                ((a = this.AddPlayerToCache(n, 3, !1)).efriendrelationship = t);
            }
          }),
          (e.prototype.SetFriendsList = function(e) {
            var t = e.friends();
            if (!e.bincremental()) {
              for (var n = 0, o = this.all_friends; n < o.length; n++) {
                o[n].efriendrelationship = 0;
              }
              this.m_setFriendAccountIDs.clear(),
                this.m_setIncomingInviteAccountIDs.clear(),
                this.m_FriendGroupStore.OnFullFriendsListUpdateStart(),
                this.m_ClanStore.ClearClanMembershipData();
            }
            for (var i = 0, r = t; i < r.length; i++) {
              var a = r[i],
                s = new E.a(a.ulfriendid());
              if (s.BIsIndividualAccount()) {
                var c = a.efriendrelationship();
                this.AddFriend(s.ConvertTo64BitString(), c);
              } else
                s.BIsClanAccount() &&
                  this.m_ClanStore.OnClanRelationshipChanged(
                    s,
                    a.efriendrelationship()
                  );
            }
            if (!e.bincremental()) {
              this.m_FriendGroupStore.OnFullFriendsListUpdateComplete(),
                this.m_ClanStore.LoadMissingClanPersonas(),
                (this.m_bReceivedFriendsList = !0);
              var l = u.Init(ie.R);
              ie.W.RequestFriendPersonaStates(
                this.m_CMInterface.GetServiceTransport(),
                l
              ),
                this.RequestPerFriendPreferences(),
                0 == this.m_setFriendAccountIDs.size
                  ? ((this.m_bInitialPersonaStatesLoaded = !0),
                    this.UpdateReadyToRenderState())
                  : this.SubscribeToMissingPersonaStates();
            }
          }),
          (e.prototype.OnFriendPersonaStateChanged = function(e, t, n, o) {
            if (
              Yo.NotificationManager.BNotificationsPermitted() &&
              Yo.SettingsStore.BReady() &&
              !Yo.FriendStore.GetUserDoNotDisturb()
            ) {
              if (o && e.persona.is_ingame && e.BShowInGameNotification()) {
                var i = e.persona.current_game_name;
                return (
                  e.persona.is_in_nonsteam_game ||
                    this.m_FriendInGameNotificationStore.RecordFriendInGameImpression(
                      e.persona.m_unGamePlayedAppID
                    ),
                  void (
                    i &&
                    Yo.NotificationManager.DisplayNotificationFromFriend(e, {
                      title: e.display_name,
                      body: Object(re.b)("#Friend_StateChange_InGame", i),
                      rawbody: i,
                      tag: "state_" + e.accountid,
                      state: "ingame",
                      steamid: e.persona.m_steamid.ConvertTo64BitString()
                    })
                  )
                );
              }
              0 == t &&
                0 != n &&
                e.BShowOnlineNotification() &&
                Yo.NotificationManager.DisplayNotificationFromFriend(e, {
                  title: e.display_name,
                  body: Object(re.b)("#Friend_StateChange_Online"),
                  tag: "state_" + e.accountid,
                  state: "online",
                  steamid: e.persona.m_steamid.ConvertTo64BitString()
                });
            }
          }),
          (e.prototype.PlayJoinGameSound = function() {
            Yo.FriendStore.GetUserDoNotDisturb() ||
              Yo.AudioPlaybackManager.PlayAudioURL(
                G.a.COMMUNITY_CDN_URL +
                  "public/sounds/webui/ui_steam_smoother_friend_join.m4a"
              );
          }),
          (e.prototype.PlayFriendOnlineSound = function() {
            Yo.FriendStore.GetUserDoNotDisturb() ||
              Yo.AudioPlaybackManager.PlayAudioURL(
                G.a.COMMUNITY_CDN_URL +
                  "public/sounds/webui/ui_steam_smoother_friend_online.m4a"
              );
          }),
          (e.prototype.FillPerFriendNotificationSettingsFromMessage = function(
            e,
            t
          ) {
            (e.Notifications_ShowInGame = t.notifications_showingame()),
              (e.Notifications_ShowMessage = t.notifications_showmessages()),
              (e.Notifications_ShowOnline = t.notifications_showonline()),
              (e.Sounds_PlayInGame = t.sounds_showingame()),
              (e.Sounds_PlayMessage = t.sounds_showmessages()),
              (e.Sounds_PlayOnline = t.sounds_showonline());
          }),
          (e.prototype.RequestPerFriendPreferences = function() {
            var a = this,
              e = u.Init(Xe.e);
            Xe.k
              .GetPerFriendPreferences(
                this.m_CMInterface.GetServiceTransport(),
                e
              )
              .then(function(r) {
                Object(m.runInAction)(function() {
                  for (
                    var e = 0, t = r.Body().preferences();
                    e < t.length;
                    e++
                  ) {
                    var n = t[e],
                      o = a.GetPlayer(n.accountid());
                    if (o) {
                      o.nickname = n.nickname() || void 0;
                      var i = new pt();
                      a.FillPerFriendNotificationSettingsFromMessage(i, n),
                        (o.notification_settings = i);
                    } else
                      console.log(
                        "Got per-friend preferences back for a user we don't have a Player for:",
                        n
                      );
                  }
                  (a.m_bPerFriendPreferencesLoaded = !0),
                    a.UpdateReadyToRenderState();
                });
              });
          }),
          (e.prototype.FillMessageFromPerFriendNotificationSettings = function(
            e,
            t
          ) {
            e.set_notifications_showingame(t.Notifications_ShowInGame),
              e.set_notifications_showmessages(t.Notifications_ShowMessage),
              e.set_notifications_showonline(t.Notifications_ShowOnline),
              e.set_sounds_showingame(t.Sounds_PlayInGame),
              e.set_sounds_showmessages(t.Sounds_PlayMessage),
              e.set_sounds_showonline(t.Sounds_PlayOnline);
          }),
          (e.prototype.SetPlayerNickname = function(e, t) {
            return this.SetPlayerPerFriendPreferences(
              e,
              t,
              e.notification_settings
            );
          }),
          (e.prototype.SetPlayerNotificationSettings = function(e, t) {
            return this.SetPlayerPerFriendPreferences(e, e.nickname, t);
          }),
          (e.prototype.SetPlayerPerFriendPreferences = function(e, t, n) {
            var o = u.Init(Xe.i),
              i = o.Body().preferences();
            return (
              i.set_accountid(e.accountid),
              i.set_nickname(t),
              this.FillMessageFromPerFriendNotificationSettings(i, n),
              Xe.k
                .SetPerFriendPreferences(
                  Yo.CMInterface.GetServiceTransport(),
                  o
                )
                .then(function(e) {
                  return e.GetEResult();
                })
            );
          }),
          (e.prototype.InviteToGame = function(e, t) {
            var n = u.Init(O.d, 7005);
            n.Hdr().set_routing_appid(t),
              n
                .Body()
                .set_steam_id_src(
                  this.m_CMInterface.steamid.ConvertTo64BitString()
                ),
              n
                .Body()
                .set_steam_id_dest(
                  E.a.InitFromAccountID(e.accountid).ConvertTo64BitString()
                ),
              this.m_CMInterface.Send(n);
          }),
          (e.prototype.InviteToLobby = function(e, t, n) {
            var o = u.Init(O.e, 6621);
            o.Hdr().set_routing_appid(t),
              o.Body().set_steam_id_lobby(n),
              o
                .Body()
                .set_steam_id_user_invited(
                  E.a.InitFromAccountID(e.accountid).ConvertTo64BitString()
                ),
              this.m_CMInterface.Send(o);
          }),
          (e.prototype.InviteToWatch = function(e) {
            Yo.ShowFriendChatDialog(
              Yo.GetDefaultBrowserContext(),
              e.accountid,
              !0
            );
            Yo.BroadcastStore.InviteToWatch(e.accountid).then(function(e) {});
          }),
          (e.prototype.InviteToTrade = function(e) {
            var t = u.Init(Qe.g, 7701);
            t
              .Body()
              .set_other_steamid(e.persona.m_steamid.ConvertTo64BitString());
            var n = Yo.ShowFriendChatDialog(
              Yo.GetDefaultBrowserContext(),
              e.accountid,
              !0
            );
            n &&
              n.AddNewTradeRequestAndNotify(
                Yo.FriendStore.self.accountid,
                Yo.GetServerRTime32(),
                e.persona.m_steamid.ConvertTo64BitString(),
                0
              ),
              this.m_CMInterface.Send(t);
          }),
          (e.prototype.CancelTradeRequest = function(e) {
            var t = u.Init(Qe.f, 7706);
            t.Body().set_other_steamid(e), this.m_CMInterface.Send(t);
          }),
          (e.prototype.RespondToTradeRequest = function(e, t) {
            var n = u.Init(Qe.h, 7703);
            n.Body().set_trade_request_id(e),
              n.Body().set_response(t ? 0 : 1),
              this.m_CMInterface.Send(n);
          }),
          (e.prototype.OpenTradeWindow = function(e) {
            var t = "Trade" + e,
              n = G.a.COMMUNITY_BASE_URL + "trade/" + e,
              o = window.open(
                n,
                t,
                "height=1120,width=1028,resize=yes,scrollbars=yes"
              );
            return !!o && (o.focus(), !0);
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            for (
              var t = 0, n = 0, o = 0, i = 0, r = this.all_friends;
              i < r.length;
              i++
            ) {
              var a = r[i];
              3 == a.efriendrelationship &&
                (t++, a.persona.is_online && n++, a.persona.is_ingame && o++);
            }
            e.metrics().set_friends_count(t),
              e.metrics().set_friends_online_count(n),
              e.metrics().set_friends_in_game_count(o),
              this.m_FriendGroupStore.FillInChatUsabilityMetrics(e),
              this.m_FavoritesStore.FillInChatUsabilityMetrics(e);
          }),
          R.c([m.observable], e.prototype, "m_bReceivedFriendsList", void 0),
          R.c([m.action], e.prototype, "OnParentalLockChanged", null),
          R.c([m.action], e.prototype, "SetPersonasOffline", null),
          R.c([M.a, Object(lt.a)(100)], e.prototype, "PlayJoinGameSound", null),
          R.c(
            [M.a, Object(lt.a)(100)],
            e.prototype,
            "PlayFriendOnlineSound",
            null
          ),
          R.c([m.action], e.prototype, "SetPlayerNickname", null),
          R.c([m.action], e.prototype, "SetPlayerNotificationSettings", null),
          R.c([m.action], e.prototype, "SetPlayerPerFriendPreferences", null),
          R.c([m.action], e.prototype, "InviteToGame", null),
          R.c([m.action], e.prototype, "InviteToLobby", null),
          R.c([m.action], e.prototype, "InviteToWatch", null),
          R.c([m.action], e.prototype, "InviteToTrade", null),
          R.c([m.action], e.prototype, "CancelTradeRequest", null),
          R.c([m.action], e.prototype, "RespondToTradeRequest", null),
          R.c([m.action], e.prototype, "OpenTradeWindow", null),
          e
        );
      })(),
      _t = -6;
    ((at = rt || (rt = {}))[(at.eOnlineOnly = 0)] = "eOnlineOnly"),
      (at[(at.eOnlineOnlyNotInGame = 1)] = "eOnlineOnlyNotInGame"),
      (at[(at.eOfflineOnly = 2)] = "eOfflineOnly"),
      (at[(at.eIncomingInvites = 3)] = "eIncomingInvites"),
      (at[(at.eAll = 4)] = "eAll");
    var ft = (function() {
        function e(e) {
          (this.m_eDisplayType = rt.eAll),
            (this.m_strName = ""),
            (this.m_bCollapsed = !1),
            (this.m_OnHeaderClick = void 0),
            (this.m_rgAccountIDMembers = m.observable.array()),
            (this.m_setMembers = new Set()),
            (this.m_strName = e);
        }
        return (
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return this.m_strName;
            },
            set: function(e) {
              this.m_strName = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "icon_url", {
            get: function() {
              return "";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "display_type", {
            get: function() {
              return this.m_eDisplayType;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "onheaderclick", {
            get: function() {
              return this.m_OnHeaderClick;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "collapsed", {
            get: function() {
              return this.m_bCollapsed;
            },
            set: function(e) {
              this.m_bCollapsed = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetCurrentMemberSet = function() {
            return this.m_setMembers;
          }),
          Object.defineProperty(e.prototype, "member_count", {
            get: function() {
              return this.display_type == rt.eAll
                ? this.unfiltered_count
                : this.member_list.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unfiltered_count", {
            get: function() {
              return this.member_accountid_list.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_counts", {
            get: function() {
              for (
                var e = 0, t = 0, n = 0, o = this.member_list_unsorted;
                n < o.length;
                n++
              ) {
                var i = o[n];
                i.persona.is_online && (e++, i.persona.is_ingame && t++);
              }
              return { online: e, ingame: t };
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetOnHeaderClick = function(e) {
            this.m_OnHeaderClick = e;
          }),
          (e.prototype.Clear = function() {
            this.m_rgAccountIDMembers.clear(), this.m_setMembers.clear();
          }),
          (e.prototype.AddMember = function(e) {
            this.HasMember(e) ||
              (this.m_setMembers.add(e), this.m_rgAccountIDMembers.push(e));
          }),
          (e.prototype.RemoveMember = function(e) {
            this.HasMember(e) &&
              (this.m_setMembers.delete(e), w.c(this.m_rgAccountIDMembers, e));
          }),
          (e.prototype.HasMember = function(e) {
            return this.m_setMembers.has(e);
          }),
          Object.defineProperty(e.prototype, "GetRawMemberList", {
            get: function() {
              return this.m_rgAccountIDMembers.map(function(e) {
                return Yo.FriendStore.GetPlayer(e);
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_list", {
            get: function() {
              var e = this.member_list_unsorted.slice();
              return e.sort(ut.DefaultFriendSortComparator), e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_list_unsorted", {
            get: function() {
              for (
                var e = [], t = 0, n = this.GetRawMemberList;
                t < n.length;
                t++
              ) {
                var o = n[t];
                if (
                  (this.display_type != rt.eOnlineOnly ||
                    o.persona.is_online) &&
                  (this.display_type != rt.eOfflineOnly || !o.persona.is_online)
                ) {
                  if (this.display_type == rt.eOnlineOnlyNotInGame) {
                    if (!o.persona.is_online || o.persona.is_ingame) continue;
                    if (
                      IsFeatureBroadcastEnabled() &&
                      o.persona.m_broadcastAppId == J
                    )
                      continue;
                  }
                  e.push(o);
                }
              }
              return e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_accountid_list", {
            get: function() {
              return this.m_rgAccountIDMembers;
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.observable], e.prototype, "m_strName", void 0),
          R.c([m.observable], e.prototype, "m_bCollapsed", void 0),
          R.c([m.computed], e.prototype, "member_count", null),
          R.c([m.computed], e.prototype, "unfiltered_count", null),
          R.c([m.computed], e.prototype, "member_counts", null),
          R.c([m.action], e.prototype, "SetOnHeaderClick", null),
          R.c([m.action], e.prototype, "Clear", null),
          R.c([m.action], e.prototype, "AddMember", null),
          R.c([m.action], e.prototype, "RemoveMember", null),
          R.c([m.computed], e.prototype, "member_list", null),
          R.c([m.computed], e.prototype, "member_list_unsorted", null),
          e
        );
      })(),
      gt = (function(r) {
        function e(e, t, n, o) {
          void 0 === t && (t = -1),
            void 0 === n && (n = !1),
            void 0 === o && (o = !1);
          var i = r.call(this, e) || this;
          return (
            (i.m_bModifiable = !1),
            (i.m_bAcceptsGroupRemovals = !1),
            (i.m_iGroupID = t),
            (i.m_bModifiable = n),
            (i.m_bAcceptsGroupRemovals = o),
            i
          );
        }
        return (
          R.d(e, r),
          Object.defineProperty(e.prototype, "id", {
            get: function() {
              return this.m_iGroupID;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "" + this.m_iGroupID;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "modifiable", {
            get: function() {
              return this.m_bModifiable;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "accepts_group_removals", {
            get: function() {
              return this.m_bAcceptsGroupRemovals;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(
            e.prototype,
            "should_filter_categorized_friends",
            {
              get: function() {
                return !1;
              },
              enumerable: !0,
              configurable: !0
            }
          ),
          Object.defineProperty(e.prototype, "GetRawMemberList", {
            get: function() {
              return this.member_accountid_list.map(function(e) {
                return Yo.FriendStore.GetPlayer(e);
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetMembersMatchingSearch = function(e) {
            for (
              var t = [], n = 0, o = this.GetRawMemberList;
              n < o.length;
              n++
            ) {
              var i = o[n];
              i.BMatchesSearchString(e, !1) && t.push(i);
            }
            return t.sort(ut.DefaultFriendSortComparator), t;
          }),
          R.c([m.computed], e.prototype, "GetRawMemberList", null),
          e
        );
      })(ft),
      bt = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          Object.defineProperty(t.prototype, "display_type", {
            get: function() {
              return Yo.SettingsStore.FriendsSettings
                .bHideOfflineFriendsInTagGroups
                ? rt.eOnlineOnly
                : rt.eAll;
            },
            enumerable: !0,
            configurable: !0
          }),
          t
        );
      })(gt),
      vt = (function(o) {
        function e(e, t) {
          var n = o.call(this, e, t, !1, !0) || this;
          return (n.m_eDisplayType = rt.eOnlineOnlyNotInGame), n;
        }
        return (
          R.d(e, o),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "all";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "display_type", {
            get: function() {
              return Yo.SettingsStore.FriendsSettings
                .bCategorizeInGameFriendsByGame
                ? rt.eOnlineOnlyNotInGame
                : rt.eOnlineOnly;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(
            e.prototype,
            "should_filter_categorized_friends",
            {
              get: function() {
                return Yo.SettingsStore.FriendsSettings.bHideCategorizedFriends;
              },
              enumerable: !0,
              configurable: !0
            }
          ),
          e
        );
      })(gt),
      St = (function(n) {
        function e(e, t) {
          return n.call(this, e, t, !1, !0) || this;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "offline";
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(
            e.prototype,
            "should_filter_categorized_friends",
            {
              get: function() {
                var e = Yo.SettingsStore.FriendsSettings;
                return (
                  e.bHideCategorizedFriends && !e.bHideOfflineFriendsInTagGroups
                );
              },
              enumerable: !0,
              configurable: !0
            }
          ),
          e
        );
      })(gt),
      yt = (function(n) {
        function e(e, t) {
          return n.call(this, e, t, !1, !0) || this;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "outgoing";
            },
            enumerable: !0,
            configurable: !0
          }),
          e
        );
      })(gt),
      Ct = (function(n) {
        function e(e, t) {
          return n.call(this, e, t, !1, !0) || this;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "ingame";
            },
            enumerable: !0,
            configurable: !0
          }),
          e
        );
      })(gt),
      It = (function(o) {
        function e(e, t) {
          var n = o.call(this, e, t, !1, !0) || this;
          return (
            (n.m_mapSteamIDToMutualFriends = m.observable.map()),
            (n.m_unMutualFriendsCacheHash = 0),
            (n.m_eDisplayType = rt.eIncomingInvites),
            n
          );
        }
        return (
          R.d(e, o),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "incominginvites";
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetMutualFriendsCacheHash = function() {
            return this.m_unMutualFriendsCacheHash;
          }),
          (e.prototype.SetMutualFriendsCacheHash = function(e) {
            this.m_unMutualFriendsCacheHash = e;
          }),
          (e.prototype.SetMutualFriends = function(e) {
            this.m_mapSteamIDToMutualFriends.replace(e);
          }),
          Object.defineProperty(e.prototype, "map_steamid_to_mutual_friends", {
            get: function() {
              return this.m_mapSteamIDToMutualFriends;
            },
            enumerable: !0,
            configurable: !0
          }),
          e
        );
      })(gt),
      Ot = (function(t) {
        function e(e) {
          return t.call(this, "", e, !1, !1) || this;
        }
        return (
          R.d(e, t),
          Object.defineProperty(e.prototype, "is_initialized", {
            get: function() {
              return (
                0 != this.id &&
                Yo.AppInfoStore.GetAppInfo(this.id).is_initialized
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "game_" + this.id;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return !this.is_initialized || this.id < 0
                ? ""
                : Yo.AppInfoStore.GetAppInfo(this.id).name;
            },
            set: function(e) {},
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "icon_url", {
            get: function() {
              return !this.is_initialized || this.id < 0
                ? ""
                : Yo.AppInfoStore.GetAppInfo(this.id).icon_url;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.PlayerGroupSortComparator = function(e, t, n, o) {
            var i = e.persona.player_group,
              r = t.persona.player_group;
            if (i && !r) return -1;
            if (r && !i) return 1;
            if (i && r) {
              var a = e.persona.player_group_size || n.get(i),
                s = t.persona.player_group_size || n.get(r);
              if (a != s) return s - a;
              if (i != r) return i.localeCompare(r);
            }
            return o(e, t);
          }),
          Object.defineProperty(e.prototype, "member_list", {
            get: function() {
              for (
                var n = this,
                  e = [],
                  o = new Map(),
                  t = 0,
                  i = this.GetRawMemberList;
                t < i.length;
                t++
              ) {
                var r = i[t];
                if ((e.push(r), r.persona.player_group)) {
                  var a = o.get(r.persona.player_group);
                  o.set(r.persona.player_group, a ? a + 1 : 1);
                }
              }
              var s = ut.DefaultFriendSortComparator;
              return (
                0 == this.id
                  ? e.sort(s)
                  : e.sort(function(e, t) {
                      return n.PlayerGroupSortComparator(e, t, o, s);
                    }),
                e
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.computed], e.prototype, "member_list", null),
          e
        );
      })(gt),
      Et = { groups: { offline: !0, outgoing: !0 } },
      wt = "FriendGroupCollapse",
      Mt = (function() {
        function e() {
          this.m_mapCollapsePrefs = m.observable.map();
        }
        return (
          (e.prototype.Init = function() {
            var n = this;
            Yo.SettingsStore.GetObjectFromLocalStorageWhenReady(wt, Et).then(
              function(e) {
                for (var t in (n.m_mapCollapsePrefs.clear(), e.groups))
                  n.m_mapCollapsePrefs.set(t, e.groups[t]);
              }
            );
          }),
          (e.prototype.GetUserGroupCollapsed = function(e) {
            return !!this.m_mapCollapsePrefs.get(e);
          }),
          (e.prototype.SetUserGroupCollapsed = function(e, t) {
            !!this.m_mapCollapsePrefs.get(e) != t &&
              (t
                ? this.m_mapCollapsePrefs.set(e, t)
                : this.m_mapCollapsePrefs.delete(e),
              this.WritePrefs());
          }),
          (e.prototype.ToggleUserGroupCollapsed = function(e) {
            this.SetUserGroupCollapsed(e, !this.GetUserGroupCollapsed(e));
          }),
          (e.prototype.WritePrefs = function() {
            Yo.SettingsStore.StoreObjectInLocalStorage(wt, {
              groups: this.m_mapCollapsePrefs.toJSON()
            });
          }),
          R.c([m.action], e.prototype, "SetUserGroupCollapsed", null),
          R.c([m.action], e.prototype, "ToggleUserGroupCollapsed", null),
          e
        );
      })(),
      Dt = (function() {
        function e(e) {
          (this.m_FriendGroupDisplayPrefs = new Mt()),
            (this.m_mapGroups = m.observable.map()),
            (this.m_mapGameGroups = m.observable.map()),
            (this.m_singletonGameGroup = new Ot(0)),
            (this.m_groupAllFriends = new vt(
              Object(re.b)("#FriendGroup_Online"),
              -1
            )),
            (this.m_groupOfflineFriends = new St(
              Object(re.b)("#FriendGroup_Offline"),
              -3
            )),
            (this.m_groupIngameFriends = new Ct(
              Object(re.b)("#FriendGroup_InGame"),
              -4
            )),
            (this.m_groupIncomingInvites = new It(
              Object(re.b)("#FriendGroup_IncomingInvites"),
              -5
            )),
            (this.m_groupOutgoingInvites = new yt(
              Object(re.b)("#FriendGroup_Outgoing"),
              -6
            )),
            (this.m_FriendStore = e),
            (this.m_groupOfflineFriends.m_eDisplayType = rt.eOfflineOnly);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_CMInterface = e),
              this.m_FriendGroupDisplayPrefs.Init(),
              this.m_CMInterface.AddOnLogonCallback(function() {
                return R.b(t, void 0, void 0, function() {
                  var t, n;
                  return R.e(this, function(e) {
                    switch (e.label) {
                      case 0:
                        return (
                          (t = u.Init(et.a)),
                          [
                            4,
                            et.f.GetCategories(
                              this.m_CMInterface.GetServiceTransport(),
                              t
                            )
                          ]
                        );
                      case 1:
                        return (
                          1 == (n = e.sent()).GetEResult() &&
                            this.RecvCategoriesList(n.Body()),
                          [2]
                        );
                    }
                  });
                });
              }, 47);
          }),
          Object.defineProperty(e.prototype, "all_friends", {
            get: function() {
              return this.m_groupAllFriends;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ingame_group", {
            get: function() {
              return this.m_groupIngameFriends;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "incoming_invites_group", {
            get: function() {
              return this.m_groupIncomingInvites;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "outgoing_invites_group", {
            get: function() {
              return this.m_groupOutgoingInvites;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "friend_groups", {
            get: function() {
              return this.game_groups.concat(
                this.user_groups,
                this.default_groups
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "groupDisplayPrefs", {
            get: function() {
              return this.m_FriendGroupDisplayPrefs;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "user_groups", {
            get: function() {
              var t = [];
              return (
                this.m_mapGroups.forEach(function(e) {
                  t.push(e);
                }),
                t.sort(function(e, t) {
                  return e.name.localeCompare(t.name);
                }),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "game_groups", {
            get: function() {
              var t = [],
                n = 2;
              return (
                1 == this.m_singletonGameGroup.unfiltered_count && (n = 1),
                this.m_mapGameGroups.forEach(function(e) {
                  e.name && e.member_count >= n && t.push(e);
                }),
                t.sort(function(e, t) {
                  return e.member_count == t.member_count
                    ? e.name.localeCompare(t.name)
                    : t.member_count - e.member_count;
                }),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "singleton_game_group", {
            get: function() {
              if (1 == this.m_singletonGameGroup.unfiltered_count) {
                var e = this.m_singletonGameGroup.member_accountid_list[0];
                if (!Yo.FriendStore.GetPlayer(e).persona.is_in_nonsteam_game)
                  return;
              }
              return this.m_singletonGameGroup;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "default_groups", {
            get: function() {
              return [this.m_groupAllFriends, this.m_groupOfflineFriends];
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnFullFriendsListUpdateStart = function() {
            this.m_groupOfflineFriends.Clear(),
              this.m_groupAllFriends.Clear(),
              this.m_groupIncomingInvites.Clear(),
              this.m_groupOutgoingInvites.Clear();
          }),
          (e.prototype.OnFullFriendsListUpdateComplete = function() {
            this.m_mapGameGroups.clear(),
              this.m_singletonGameGroup.Clear(),
              this.m_groupIngameFriends.Clear();
            for (
              var e = 0, t = this.m_FriendStore.all_friends;
              e < t.length;
              e++
            ) {
              var n = t[e];
              if (n.persona.is_ingame) {
                var o = n.persona.is_in_nonsteam_game
                  ? _t
                  : n.persona.m_unGamePlayedAppID;
                this.OnFriendGameChanged(n.accountid, 0, o);
              }
            }
          }),
          (e.prototype.OnPersonaStateCacheReset = function() {
            this.m_mapGameGroups.clear(),
              this.m_singletonGameGroup.Clear(),
              this.m_groupIngameFriends.Clear();
          }),
          (e.prototype.OnFriendAdded = function(e) {
            this.m_groupAllFriends.AddMember(e),
              this.m_groupOfflineFriends.AddMember(e);
          }),
          (e.prototype.OnFriendRemoved = function(t) {
            this.m_groupAllFriends.RemoveMember(t),
              this.m_groupOfflineFriends.RemoveMember(t),
              this.m_groupIngameFriends.RemoveMember(t),
              this.m_singletonGameGroup.RemoveMember(t),
              this.m_mapGroups.forEach(function(e) {
                e.RemoveMember(t);
              }),
              this.m_mapGameGroups.forEach(function(e) {
                e.RemoveMember(t);
              });
          }),
          (e.prototype.OnFriendGameChanged = function(e, t, n) {
            var o =
                t == _t
                  ? this.m_singletonGameGroup
                  : 0 != t ? this.m_mapGameGroups.get(t) : null,
              i =
                n == _t
                  ? this.m_singletonGameGroup
                  : 0 != n ? this.m_mapGameGroups.get(n) : null;
            if (!((o && i && t == n) || (i && i.HasMember(e)))) {
              if (
                (o &&
                  o.HasMember(e) &&
                  (o.RemoveMember(e),
                  o != this.m_singletonGameGroup &&
                    (0 == o.unfiltered_count
                      ? this.m_singletonGameGroup.RemoveMember(e)
                      : 1 == o.unfiltered_count &&
                        this.m_singletonGameGroup.AddMember(
                          o.member_accountid_list[0]
                        ))),
                i)
              )
                i != this.m_singletonGameGroup &&
                  (1 == i.unfiltered_count
                    ? this.m_singletonGameGroup.RemoveMember(
                        i.member_accountid_list[0]
                      )
                    : 0 == i.unfiltered_count &&
                      this.m_singletonGameGroup.AddMember(e)),
                  i.AddMember(e);
              else if (0 != n) {
                var r = new Ot(n);
                r.AddMember(e),
                  this.m_singletonGameGroup.AddMember(e),
                  this.m_mapGameGroups.set(n, r);
              }
              0 != n
                ? this.m_groupIngameFriends.AddMember(e)
                : this.m_groupIngameFriends.RemoveMember(e);
            }
          }),
          (e.prototype.OnIncomingInviteAdded = function(e) {
            this.m_groupIncomingInvites.AddMember(e);
          }),
          (e.prototype.OnIncomingInviteRemoved = function(e) {
            this.m_groupIncomingInvites.RemoveMember(e);
          }),
          (e.prototype.OnOutgoingInviteAdded = function(e) {
            this.m_groupOutgoingInvites.AddMember(e);
          }),
          (e.prototype.OnOutgoingInviteRemoved = function(e) {
            this.m_groupOutgoingInvites.RemoveMember(e);
          }),
          (e.prototype.EnsureMutualFriendsForIncomingInvites = function() {
            var l = this;
            function e(e) {
              for (var t = 2166136261, n = 0; n < e.length; ++n)
                (t ^= e.charCodeAt(n)),
                  (t += (t << 1) + (t << 4) + (t << 7) + (t << 8) + (t << 24));
              return t >>> 0;
            }
            for (
              var p = 0, t = 0, n = this.m_groupIncomingInvites.member_list;
              t < n.length;
              t++
            ) {
              var o = n[t];
              p ^= e("" + o.accountid);
            }
            if (this.m_groupIncomingInvites.GetMutualFriendsCacheHash() != p) {
              this.m_groupIncomingInvites.SetMutualFriendsCacheHash(p);
              var i = u.Init(Xe.d);
              Xe.k
                .GetMutualFriendsForIncomingInvites(
                  this.m_CMInterface.GetServiceTransport(),
                  i
                )
                .then(function(e) {
                  if (
                    1 == e.GetEResult() &&
                    l.m_groupIncomingInvites.GetMutualFriendsCacheHash() == p
                  ) {
                    for (
                      var t = m.observable.map(),
                        n = 0,
                        o = e.Body().incoming_invite_mutual_friends_lists();
                      n < o.length;
                      n++
                    ) {
                      for (
                        var i = o[n],
                          r = new Set(),
                          a = 0,
                          s = i.mutual_friend_account_ids();
                        a < s.length;
                        a++
                      ) {
                        var c = s[a];
                        r.add(c);
                      }
                      t.set(i.steamid(), r);
                    }
                    l.m_groupIncomingInvites.SetMutualFriends(t);
                  }
                });
            }
          }),
          (e.prototype.CreateGroup = function(a, s) {
            var c = this,
              n = u.Init(g.d, 5560);
            return (
              n.Body().set_groupname(a),
              s && n.Body().set_steamid_friends(s),
              new Promise(function(e, t) {
                c.m_CMInterface
                  .SendMsgAndAwaitResponse(n, g.e)
                  .then(function(r) {
                    1 == r.Body().eresult() &&
                      Object(m.runInAction)(function() {
                        var e = r.Body().groupid(),
                          t = new bt(a, r.Body().groupid(), !0);
                        if (s)
                          for (var n = 0, o = s; n < o.length; n++) {
                            var i = o[n];
                            t.AddMember(new E.a(i).GetAccountID());
                          }
                        c.m_mapGroups.set(e, t);
                      }),
                      e(1 == r.Body().eresult());
                  })
                  .catch(function() {
                    e(!1);
                  });
              })
            );
          }),
          (e.prototype.ManageGroup = function(s, c, l, p) {
            var t = this;
            if (c == s.name && !l && !p) return Promise.resolve(!0);
            var n = u.Init(g.k, 5564);
            return (
              n.Body().set_groupid(s.id),
              c && c != s.name && n.Body().set_groupname(c),
              l && n.Body().set_steamid_friends_added(l),
              p && n.Body().set_steamid_friends_removed(p),
              new Promise(function(a, e) {
                t.m_CMInterface
                  .SendMsgAndAwaitResponse(n, g.l)
                  .then(function(e) {
                    if (1 == e.Body().eresult()) {
                      s.name = c;
                      for (var t = 0, n = l; t < n.length; t++) {
                        var o = n[t];
                        s.AddMember(new E.a(o).GetAccountID());
                      }
                      for (var i = 0, r = p; i < r.length; i++) {
                        o = r[i];
                        s.RemoveMember(new E.a(o).GetAccountID());
                      }
                    }
                    a(1 == e.Body().eresult());
                  })
                  .catch(function() {
                    a(!1);
                  });
              })
            );
          }),
          (e.prototype.RemoveGroup = function(t) {
            var n = this,
              e = u.Init(g.f, 5562);
            e.Body().set_groupid(t.id),
              this.m_CMInterface
                .SendMsgAndAwaitResponse(e, g.g)
                .then(function(e) {
                  1 == e.Body().eresult() && n.HandleGroupRemoval(t);
                });
          }),
          (e.prototype.HandleGroupRemoval = function(e) {
            this.m_mapGroups.delete(e.id);
          }),
          Object.defineProperty(e.prototype, "categorized_friend_set", {
            get: function() {
              var t = new Set();
              return (
                this.m_mapGroups.forEach(function(e) {
                  e.member_accountid_list.forEach(t.add.bind(t));
                }),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.RecvCategoriesList = function(e) {
            this.m_mapGroups.clear();
            for (var t = 0, n = e.categories(); t < n.length; t++) {
              var o = n[t],
                i = o.groupid(),
                r = new bt(o.name() || "", o.groupid(), !0);
              (r.m_eDisplayType = rt.eAll), this.m_mapGroups.set(i, r);
              for (var a = 0, s = o.accountid_members(); a < s.length; a++) {
                var c = s[a];
                r.AddMember(c);
              }
            }
          }),
          (e.prototype.TransferFriendFromToGroup = function(t, n, o) {
            var e,
              i = this,
              r = o && o.modifiable,
              a = n && n.modifiable,
              s = [];
            r &&
              ((e = u.Init(g.a, 5566)).Body().set_groupid(o.id),
              e
                .Body()
                .set_steamiduser(t.persona.m_steamid.ConvertTo64BitString()),
              s.push(
                this.m_CMInterface
                  .SendMsgAndAwaitResponse(e, g.b)
                  .then(function(e) {
                    return (
                      1 == e.Body().eresult() && (o.AddMember(t.accountid), !0)
                    );
                  })
              ));
            a &&
              ((e = u.Init(g.n, 5568)).Body().set_groupid(n.id),
              e
                .Body()
                .set_steamiduser(t.persona.m_steamid.ConvertTo64BitString()),
              s.push(
                this.m_CMInterface
                  .SendMsgAndAwaitResponse(e, g.o)
                  .then(function(e) {
                    return (
                      1 == e.Body().eresult() &&
                      (n.RemoveMember(t.accountid),
                      0 == n.unfiltered_count && i.HandleGroupRemoval(n),
                      !0)
                    );
                  })
              ));
            return Promise.all(s);
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            var t = this;
            e.metrics().set_friends_category_count(this.m_mapGroups.size),
              e
                .metrics()
                .set_friends_categorized_count(
                  this.categorized_friend_set.size
                ),
              this.singleton_game_group &&
                e
                  .metrics()
                  .set_friends_in_game_singleton_count(
                    this.singleton_game_group.unfiltered_count
                  ),
              e.metrics().set_game_group_count(this.game_groups.length);
            var n = function(e) {
                return t.m_FriendGroupDisplayPrefs.GetUserGroupCollapsed(
                  e.unique_id
                );
              },
              o = e.ui_state().category_collapse();
            o.set_in_game_collapsed(n(this.m_singletonGameGroup)),
              o.set_online_collapsed(n(this.m_groupAllFriends)),
              o.set_offline_collapsed(n(this.m_groupOfflineFriends)),
              o.set_categories_collapsed(
                w.b(Array.from(this.m_mapGroups.values()), n)
              ),
              o.set_game_groups_collapsed(
                w.b(Array.from(this.m_mapGameGroups.values()), n)
              );
          }),
          R.c([m.computed], e.prototype, "friend_groups", null),
          R.c([m.computed], e.prototype, "user_groups", null),
          R.c([m.computed], e.prototype, "game_groups", null),
          R.c([m.computed], e.prototype, "singleton_game_group", null),
          R.c([m.computed], e.prototype, "default_groups", null),
          R.c([m.action], e.prototype, "OnFullFriendsListUpdateComplete", null),
          R.c([m.action], e.prototype, "OnPersonaStateCacheReset", null),
          R.c([m.action], e.prototype, "HandleGroupRemoval", null),
          R.c([m.computed], e.prototype, "categorized_friend_set", null),
          R.c([m.action], e.prototype, "RecvCategoriesList", null),
          R.c([m.action], e.prototype, "TransferFriendFromToGroup", null),
          e
        );
      })(),
      Tt = (function(r) {
        function e(e, t, n, o) {
          var i = r.call(this, e.FriendStore, e, e.CMInterface) || this;
          return (
            (i.LOG = Te.create(function() {
              return i.unique_id;
            }, !1)),
            (i.m_unSortOrder = 0),
            (i.m_lastChatLink = null),
            (i.m_groupVoiceActiveMembers = new ft(
              Object(re.b)("#Chat_MemberGroup_VoiceChatting")
            )),
            (i.m_eDesktopNotificationLevel = 0),
            (i.m_eMobileNotificationLevel = 0),
            (i.m_bUnreadIndicatorMuted = !1),
            (i.m_group = t),
            (i.m_ulGroupID = t.GetGroupID()),
            (i.m_ulChatID = n),
            (i.m_bIsDefaultForGroup = o),
            i.m_groupVoiceActiveMembers.SetOnHeaderClick(i.StartVoiceChat),
            i
          );
        }
        return (
          R.d(e, r),
          Object.defineProperty(e.prototype, "VoiceChatStore", {
            get: function() {
              return this.ChatStore.VoiceChat;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unread_message_count", {
            get: function() {
              switch (this.GetDesktopNotificationLevel()) {
                case 4:
                  return this.m_cUnreadChatMessages;
                case 3:
                case 2:
                  return this.has_unread_mention ? 1 : 0;
                case 1:
                case 0:
                default:
                  return 0;
              }
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "time_last_activity", {
            get: function() {
              var e = this.GetDesktopNotificationLevel(),
                t = 0;
              switch ((this.time_last_ack &&
                (t = Math.max(this.time_last_ack, t)),
              e)) {
                case 4:
                  t = Math.max(this.time_last_message || 0, t);
                  break;
                case 3:
                case 2:
                  t = Math.max(this.time_last_mention || 0, t);
                  break;
                case 1:
                case 0:
                  break;
                default:
                  AssertMsg(!1, "unhandled EChatRoomNotificationLevel: " + e);
              }
              return t;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_unread_messages", {
            get: function() {
              return this.BIsUnreadIndicatorMuted()
                ? 0 < this.unread_message_count
                : this.has_any_unread_messages;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_any_unread_messages", {
            get: function() {
              return 0 < this.m_cUnreadChatMessages;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_unread_mention", {
            get: function() {
              return this.m_rtLastMention > this.m_rtLastAckedChatMsg;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "time_last_mention", {
            get: function() {
              return this.m_rtLastMention;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BHasAckedChatMsg = function() {
            return this.m_rtLastAckedChatMsg && 0 != this.m_rtLastAckedChatMsg;
          }),
          (e.prototype.LoadChatLogs = function() {
            r.prototype.LoadChatLogs.call(this);
          }),
          (e.prototype.GetMessagesFromTimeRange = function(e, t, n, o, i) {
            var r = this,
              a = u.Init(ie.s);
            return (
              a.Body().set_chat_group_id(this.m_ulGroupID),
              a.Body().set_chat_id(this.m_ulChatID),
              a.Body().set_max_count(i),
              a.Body().set_start_time(e),
              a.Body().set_start_ordinal(t),
              a.Body().set_last_time(n),
              a.Body().set_last_ordinal(o),
              this.LOG(
                "trying to load " +
                  i +
                  " messages in range " +
                  e +
                  ":" +
                  t +
                  " - " +
                  n +
                  ":" +
                  o
              ),
              ie.V.GetMessageHistory(
                this.m_ChatStore.CMInterface.GetServiceTransport(),
                a
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw t;
                return {
                  messages: r.GetMessagesFromResponse(e),
                  moreAvailable: e.Body().more_available()
                };
              })
            );
          }),
          (e.prototype.GetMessagesFromResponse = function(e) {
            for (
              var t = e.Body().messages(), n = [], o = t.length - 1;
              0 <= o;
              o--
            ) {
              var i = t[o],
                r = i.server_message().message() || 0,
                a = void 0,
                s = void 0;
              if (0 != r) {
                if (
                  ((r = i.server_message().message()),
                  (a = i.server_message().string_param()),
                  (s = i.server_message().accountid_param()),
                  !ze(r))
                ) {
                  this.LOG("unrenderable message " + r);
                  continue;
                }
              } else if (!i.message() || 0 == i.message().trim().length)
                continue;
              var c = new Ue(
                i.sender(),
                i.server_timestamp(),
                i.ordinal() || 0,
                i.message(),
                r,
                a,
                s
              );
              i.deleted() && (c.eDeleteState = Le.Deleted), n.push(c);
            }
            return n;
          }),
          (e.prototype.GetBBCodeParser = function() {
            return this.m_ChatStore.ChatRoomBBCodeParser;
          }),
          (e.prototype.AckChatMsgOnServer = function(e) {
            var t = u.Init(ie.c);
            t.Body().set_chat_group_id(this.m_ulGroupID),
              t.Body().set_chat_id(this.m_ulChatID),
              t.Body().set_timestamp(e),
              ie.V.AckChatMessage(this.m_CMInterface.GetServiceTransport(), t);
          }),
          (e.prototype.GetDesktopNotificationLevel = function() {
            return 0 == this.m_eDesktopNotificationLevel
              ? this.m_group.GetDesktopNotificationLevel()
              : this.m_eDesktopNotificationLevel;
          }),
          (e.prototype.GetMobileNotificationLevel = function() {
            return 0 === this.m_eMobileNotificationLevel
              ? this.GetDesktopNotificationLevel()
              : this.m_eMobileNotificationLevel;
          }),
          (e.prototype.BIsUnreadIndicatorMuted = function() {
            return this.m_group.BIsUnreadIndicatorMuted();
          }),
          (e.prototype.GetDesktopNotificationLevelSetting = function() {
            return this.m_eDesktopNotificationLevel;
          }),
          (e.prototype.GetMobileNotificationLevelsetting = function() {
            return this.m_eMobileNotificationLevel;
          }),
          (e.prototype.UpdateUserState = function(e) {
            (this.m_rtLastAckedChatMsg = e.time_last_ack()),
              (this.m_rtLastMention = e.time_last_mention()),
              (this.m_eDesktopNotificationLevel = e.desktop_notification_level()),
              (this.m_eMobileNotificationLevel = e.mobile_notification_level()),
              (this.m_bUnreadIndicatorMuted = e.unread_indicator_muted()),
              (this.m_rtLastAckedChatMsg || 0) < this.m_rtLastMessageReceived &&
                ((this.m_cUnreadChatMessages = 1),
                this.m_rtLastAckedChatMsg &&
                  (this.m_rtFirstUnreadChatMsg = this.m_rtLastAckedChatMsg + 1),
                Yo.FriendStore.UpdateUnreadMessagesGlobal());
          }),
          (e.prototype.UpdateChatState = function(e) {
            var n = this;
            AssertMsg(
              this.m_ulChatID == e.chat_id(),
              "State for different chat room"
            ),
              (this.m_strName = e.chat_name()),
              (this.m_bVoiceAllowed = e.voice_allowed());
            for (
              var t = !1,
                o = !1,
                i = this.m_FriendStore.self.accountid,
                r = new Set(
                  this.m_groupVoiceActiveMembers.GetCurrentMemberSet()
                ),
                a = 0,
                s = e.members_in_voice();
              a < s.length;
              a++
            ) {
              var c = s[a];
              r.delete(c) ||
                (this.m_groupVoiceActiveMembers.AddMember(c),
                c != i && (t = !0));
            }
            r.forEach(function(e) {
              n.m_groupVoiceActiveMembers.RemoveMember(e);
              var t = n.m_groupVoiceActiveMembers.HasMember(e);
              n.VoiceChatStore.OnUserLeftChatRoomVoiceChat(
                n.m_ulGroupID,
                n.m_ulChatID,
                e,
                t
              ),
                e != i && (o = !0);
            }),
              this.BVoiceActive() &&
                (t
                  ? Yo.AudioPlaybackManager.PlayAudioURL(
                      G.a.COMMUNITY_CDN_URL +
                        "public/sounds/webui/steam_voice_channel_enter.m4a?v=1"
                    )
                  : o &&
                    Yo.AudioPlaybackManager.PlayAudioURL(
                      G.a.COMMUNITY_CDN_URL +
                        "public/sounds/webui/steam_voice_channel_exit.m4a?v=1"
                    )),
              (this.m_rtLastMessageReceived = e.time_last_message()),
              (this.m_unSortOrder = e.sort_order());
          }),
          Object.defineProperty(e.prototype, "voice_active_member_list", {
            get: function() {
              return this.m_groupVoiceActiveMembers;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "voice_active_contains_friends", {
            get: function() {
              for (
                var e = 0;
                e < this.m_groupVoiceActiveMembers.member_list.length;
                e++
              )
                if (
                  this.m_groupVoiceActiveMembers.member_list[e].is_friend ||
                  this.m_groupVoiceActiveMembers.member_list[e] ==
                    Yo.FriendStore.self
                )
                  return !0;
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "voice_active_contains_self", {
            get: function() {
              for (
                var e = 0;
                e < this.m_groupVoiceActiveMembers.member_list.length;
                e++
              )
                if (
                  this.m_groupVoiceActiveMembers.member_list[e] ==
                  Yo.FriendStore.self
                )
                  return !0;
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(
            e.prototype,
            "voice_active_contains_only_self",
            {
              get: function() {
                return (
                  1 == this.m_groupVoiceActiveMembers.member_list.length &&
                  this.m_groupVoiceActiveMembers.member_list[0] ==
                    Yo.FriendStore.self
                );
              },
              enumerable: !0,
              configurable: !0
            }
          ),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return this.IsDefaultRoomForGroup()
                ? "Home"
                : this.IsUnsavedVoiceChannel()
                  ? Object(re.b)("#Chat_CreateChatChannel_DefaultName")
                  : this.m_strName;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.IsUnsavedVoiceChannel = function() {
            return !(0 != this.m_strName.length || !this.m_bVoiceAllowed);
          }),
          (e.prototype.GetParentGroupID = function() {
            return this.m_ulGroupID;
          }),
          (e.prototype.GetGroup = function() {
            return this.m_group;
          }),
          (e.prototype.IsDefaultRoomForGroup = function() {
            return this.m_bIsDefaultForGroup;
          }),
          (e.prototype.GetRoomID = function() {
            return this.m_ulChatID;
          }),
          (e.prototype.BIsDefaultRoom = function() {
            return this.m_bIsDefaultForGroup;
          }),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "cr" + this.m_ulChatID;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetVoiceAllowed = function() {
            return this.m_bVoiceAllowed;
          }),
          (e.prototype.IsTempVoiceRoom = function() {
            return (
              !!this.GetVoiceAllowed() &&
              (!this.m_strName || 0 == this.m_strName.length)
            );
          }),
          (e.prototype.GetSortOrder = function() {
            return this.m_unSortOrder;
          }),
          (e.prototype.InsertBBCodeMarkup = function(e) {
            (e = Me.EscapeBBCode(e)).replace(//g, "@");
            for (var t = e.indexOf("@"); -1 !== t; ) {
              for (
                var n = e.indexOf("@", t + 1),
                  o = e.indexOf(" ", t + 1),
                  i = Math.min(
                    -1 === n ? e.length : n,
                    -1 === o ? e.length : o
                  ),
                  r = e.substr(t + 1, i - t - 1).toLocaleLowerCase(),
                  a = void 0,
                  s = void 0,
                  c = 0,
                  l = this.GetChatRoomGroup().memberList.member_list_unsorted;
                c < l.length;
                c++
              ) {
                var p = l[c],
                  u = Me.EscapeBBCode(p.player_name_normalized),
                  m = u + "#" + p.accountid.toString(36);
                if (m.startsWith(r)) {
                  var d = void 0,
                    h = m.length === r.length,
                    _ = h || u.length === r.length;
                  (_ || h) && (d = r.length),
                    !h &&
                      e.length - t - 1 >= m.length &&
                      e.substr(t + 1, u.length).toLocaleLowerCase() === m &&
                      ((_ = h = !0), (d = m.length)),
                    !_ &&
                      e.length - t - 1 >= u.length &&
                      e.substr(t + 1, u.length).toLocaleLowerCase() === u &&
                      (d = u.length),
                    d && (void 0 === s || s <= d) && ((a = p), (s = d));
                }
              }
              var f = !1;
              this.GetChatRoomGroup().BCanIMentionAll() &&
                (f =
                  "online" == r ||
                  "online#0" == r ||
                  "all" == r ||
                  "all#0" == r);
              var g = void 0,
                b = void 0,
                v = void 0;
              if (f && (void 0 === s || s <= r.length)) {
                var S = r;
                -1 !== r.indexOf("#") && (S = r.substr(0, r.indexOf("#"))),
                  (b = g = S),
                  (v = r.length),
                  "online" == g && (g = "here");
              } else
                a &&
                  void 0 !== s &&
                  ((g = "" + a.accountid),
                  (b = a.persona.m_strPlayerName),
                  (v = s));
              if (b && void 0 !== v) {
                var y = e.substr(0, t),
                  C = e.substr(t + 1 + v),
                  I =
                    "[mention=" + g + "]@" + Me.EscapeBBCode(b) + "[/mention]";
                n = (e = y + I + C).indexOf("@", y.length + I.length);
              }
              t = n;
            }
            return e;
          }),
          (e.prototype.StartVoiceChat = function() {
            this.BVoiceActive() ||
              this.ChatStore.VoiceChat.InitiateRoomChat(
                this.m_ulGroupID,
                this.m_ulChatID
              );
          }),
          (e.prototype.ToggleVoiceChat = function() {
            this.BVoiceActive()
              ? this.ChatStore.VoiceChat.OnUserEndVoiceChat()
              : this.StartVoiceChat();
          }),
          (e.prototype.BVoiceActive = function() {
            return this.ChatStore.VoiceChat.IsVoiceActiveForRoom(
              this.m_ulGroupID,
              this.m_ulChatID
            );
          }),
          (e.prototype.SendChatMessage = function(e) {
            var n = this;
            if (!this.GetChatRoomGroup().BCanChat())
              return (
                (this.AppendLocalEchoChatMsg("").eErrorSending =
                  Fe.NoChatPermissionInGroup),
                !0
              );
            var t = this.InsertBBCodeMarkup(e),
              o = u.Init(ie.J);
            o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_chat_id(this.m_ulChatID),
              o.Body().set_message(t);
            var i = this.AppendLocalEchoChatMsg(t);
            return (
              ie.V.SendChatMessage(
                this.m_ChatStore.CMInterface.GetServiceTransport(),
                o
              )
                .then(function(t) {
                  Object(m.runInAction)(function() {
                    if (1 == t.GetEResult()) {
                      (i.rtTimestamp = t.Body().server_timestamp()),
                        (i.unOrdinal = t.Body().ordinal()),
                        n.OnUserChatEcho(i.rtTimestamp, i.unOrdinal);
                      var e = t.Body().modified_message();
                      e &&
                        (n.m_ChatStore.EmoticonStore.TrackEmoticonUsage(
                          e,
                          i.rtTimestamp
                        ),
                        (i.strMessage = e)),
                        i.OnServerAcknowledged();
                    } else
                      switch (t.GetEResult()) {
                        case 84:
                          i.eErrorSending = Fe.RateLimitExceeded;
                          break;
                        default:
                          i.eErrorSending = Fe.Generic;
                      }
                  });
                })
                .catch(function() {
                  i.eErrorSending = Fe.Generic;
                }),
              !0
            );
          }),
          (e.prototype.DeleteChatMessges = function(l) {
            return R.b(this, void 0, void 0, function() {
              var t, n, o, i, r, a, s, c;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    for (
                      t = l.map(function(e) {
                        return {
                          rtTimestamp: e.rtTimestamp,
                          unOrdinal: e.unOrdinal
                        };
                      }),
                        this.UpdateChatMessageDeletedState(t, Le.Deleting),
                        (n = u.Init(ie.i))
                          .Body()
                          .set_chat_group_id(this.m_ulGroupID),
                        n.Body().set_chat_id(this.m_ulChatID),
                        o = 0,
                        i = l;
                      o < i.length;
                      o++
                    )
                      (r = i[o]),
                        (a = n.Body().add_messages()).set_server_timestamp(
                          r.rtTimestamp
                        ),
                        a.set_ordinal(r.unOrdinal);
                    return [
                      4,
                      ie.V.DeleteChatMessages(
                        this.m_ChatStore.CMInterface.GetServiceTransport(),
                        n
                      )
                    ];
                  case 1:
                    return (
                      (s = e.sent()),
                      1 != (c = s.GetEResult())
                        ? (this.UpdateChatMessageDeletedState(t, Le.None),
                          [2, c])
                        : (this.UpdateChatMessageDeletedState(t, Le.Deleted),
                          [2, 1])
                    );
                }
              });
            });
          }),
          (e.prototype.PopulateCommitFileUploadFormData = function(e) {
            e.set("chat_group_id", this.m_ulGroupID),
              e.set("chat_id", this.m_ulChatID);
          }),
          (e.prototype.BShouldTrackUnreadMessages = function() {
            return (
              this.m_bIsDefaultForGroup ||
              !this.m_bVoiceAllowed ||
              this.BVoiceActive()
            );
          }),
          (e.prototype.BShouldSilentlyAddMessage = function(e) {
            return Yo.FriendStore.GetPlayer(e.unAccountID).is_blocked;
          }),
          (e.prototype.PlayChatRoomNotificationSound = function() {
            Yo.FriendStore.GetUserDoNotDisturb() ||
              Yo.AudioPlaybackManager.PlayAudioURL(
                G.a.COMMUNITY_CDN_URL +
                  "public/sounds/webui/steam_chatroom_notification.m4a?v=1"
              );
          }),
          (e.prototype.PlayAtMentionSound = function() {
            Yo.FriendStore.GetUserDoNotDisturb() ||
              Yo.AudioPlaybackManager.PlayAudioURL(
                G.a.COMMUNITY_CDN_URL +
                  "public/sounds/webui/steam_at_mention.m4a?v=1"
              );
          }),
          (e.prototype.OnReceivedNewMessage = function(t, e, n, o) {
            var i = this;
            if (
              this.BShouldTrackUnreadMessages() &&
              !t.BIsLocalEcho() &&
              t.unAccountID != this.self.accountid
            ) {
              (t.Mentions.mention_all ||
                t.Mentions.mention_here ||
                t.Mentions.mention_user) &&
                (this.m_rtLastMention = t.rtTimestamp);
              var r = void 0;
              switch (this.GetDesktopNotificationLevel()) {
                case 1:
                  r = !1;
                  break;
                case 2:
                  r = t.Mentions.mention_user;
                  break;
                case 3:
                  r =
                    t.Mentions.mention_user ||
                    t.Mentions.mention_here ||
                    t.Mentions.mention_all;
                  break;
                case 4:
                default:
                  r = !0;
              }
              if (r && !Yo.FriendStore.GetUserDoNotDisturb()) {
                if (
                  (Yo.SettingsStore.FriendsSettings
                    .bSounds_PlayChatRoomNotification &&
                  (t.Mentions.mention_all ||
                    t.Mentions.mention_here ||
                    t.Mentions.mention_user)
                    ? this.PlayAtMentionSound()
                    : Yo.SettingsStore.FriendsSettings
                        .bSounds_PlayChatRoomNotification &&
                      e < 4 &&
                      this.PlayChatRoomNotificationSound(),
                  Yo.NotificationManager.BNotificationsPermitted() &&
                    e < 4 &&
                    Yo.SettingsStore.FriendsSettings
                      .bNotifications_ShowChatRoomNotification)
                ) {
                  var a = Yo.FriendStore.GetPlayer(t.unAccountID);
                  a.LoadIfNecessary();
                  Object(m.when)(
                    function() {
                      return a.is_ready;
                    },
                    function() {
                      var e = {
                        title: i.m_bIsDefaultForGroup
                          ? i.GetGroup().name
                          : i.name,
                        body: a.display_name + ': "' + n + '"',
                        icon: a.persona.avatar_url_medium,
                        rawbody: n,
                        tag: "groupmsg_" + a.accountid,
                        steamid: a.persona.m_steamid.ConvertTo64BitString()
                      };
                      (e = i.DecorateNotification(t, e, n, o)).body &&
                        (Yo.NotificationManager.DisplayNotification(e, function(
                          e
                        ) {
                          return Yo.UIStore.ShowAndOrActivateChat(e, i, !0);
                        }),
                        i.m_bHasUnreadPriorityChatMessages ||
                          ((i.m_bHasUnreadPriorityChatMessages = !0),
                          Yo.FriendStore.UpdateUnreadMessagesGlobal()));
                    },
                    { timeout: 1e3 }
                  );
                }
                0 == Yo.SettingsStore.FriendsSettings.nChatFlashMode &&
                  e < 4 &&
                  Yo.UIStore.FlashChatWindow(this);
              }
            }
          }),
          (e.prototype.GetChatRoomGroup = function() {
            return this.m_ChatStore.GetChatRoomGroup(this.m_ulGroupID);
          }),
          (e.prototype.GetMember = function(e) {
            return this.GetChatRoomGroup().GetMember(e);
          }),
          (e.prototype.SearchMembers = function(e, t, n) {
            void 0 === t && (t = 5), void 0 === n && (n = !1);
            var o = [],
              i = e.toLocaleLowerCase(),
              r = this.GetChatRoomGroup().BCanIMentionAll()
                ? ""
                : Object(re.b)("#ChatMentionSuggest_NoPermission");
            "online".startsWith(i) &&
              o.push({
                friend: null,
                iMatchOffset: 0,
                bNicknameMatch: !1,
                meta_mention: "online",
                strNotSelectable: r
              }),
              "all".startsWith(i) &&
                o.push({
                  friend: null,
                  iMatchOffset: 0,
                  bNicknameMatch: !1,
                  meta_mention: "all",
                  strNotSelectable: r
                });
            for (
              var a = [],
                s = [],
                c = 0,
                l = this.GetChatRoomGroup().memberList.member_list;
              c < l.length;
              c++
            ) {
              var p = l[c];
              if (p != this.self) {
                if (i.length) {
                  var u = p.MatchSearchString(i),
                    m = 0 === u.iOffset;
                  if (0 == u.match || (n && !m)) continue;
                  var d = {
                    friend: p,
                    iMatchOffset: u.iOffset,
                    bNicknameMatch: 2 == u.match
                  };
                  m ? (u.bFullMatch ? a.unshift(d) : a.push(d)) : s.push(d);
                } else
                  o.push({ friend: p, iMatchOffset: 0, bNicknameMatch: !1 });
                if (o.length + a.length >= t) break;
              }
            }
            for (var h = 0; h < a.length && o.length < t; h++) o.push(a[h]);
            for (h = 0; h < s.length && o.length < t; h++) o.push(s[h]);
            return o;
          }),
          (e.prototype.BNameMatchesSearch = function(e) {
            return -1 != this.name.toLocaleLowerCase().indexOf(e);
          }),
          (e.prototype.CreateInviteLink = function(e) {
            var i = this,
              t = u.Init(ie.g);
            t.Body().set_chat_group_id(this.m_ulGroupID),
              t.Body().set_seconds_valid(e),
              t.Body().set_chat_id(this.m_ulChatID),
              ie.V.CreateInviteLink(
                this.m_ChatStore.CMInterface.GetServiceTransport(),
                t
              ).then(function(e) {
                var t = e.Body().invite_code(),
                  n = Object(le.a)(t),
                  o = e.Body().seconds_valid();
                0 != o && (o += Math.floor(Date.now() / 1e3)),
                  (i.m_lastChatLink = { strInviteURL: n, rtExpires: o });
              });
          }),
          (e.prototype.OnActivate = function() {
            r.prototype.OnActivate.call(this),
              this.m_ChatStore.OnChatRoomActivated(this);
          }),
          Object.defineProperty(e.prototype, "lastChatLinkInfo", {
            get: function() {
              return this.m_lastChatLink;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BCanDeleteMemberMessages = function(e) {
            return this.GetChatRoomGroup().BCanDeleteMemberMessages(e);
          }),
          (e.prototype.ChangeNameWhileWaitingForRenameRequest = function(e) {
            this.m_strName = e;
          }),
          (e.prototype.SetNotificationPreferences = function(e, t, n) {
            var o = u.Init(ie.P);
            o.Body().set_chat_group_id(this.m_ulGroupID);
            var i = o.Body().add_chat_room_preferences();
            return (
              i.set_chat_id(this.m_ulChatID),
              void 0 !== e &&
                ((this.m_eDesktopNotificationLevel = e),
                i.set_desktop_notification_level(e),
                4 == e && this.m_bUnreadIndicatorMuted && (n = !1)),
              void 0 !== t &&
                ((this.m_eMobileNotificationLevel = t),
                i.set_mobile_notification_level(t)),
              void 0 !== n &&
                ((this.m_bUnreadIndicatorMuted = n),
                i.set_unread_indicator_muted(n)),
              ie.V.SetUserChatGroupPreferences(
                Yo.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                return 1 == e.GetEResult();
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_strName", void 0),
          R.c([m.observable], e.prototype, "m_unSortOrder", void 0),
          R.c([m.observable], e.prototype, "m_lastChatLink", void 0),
          R.c([m.observable], e.prototype, "m_rtLastMention", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_eDesktopNotificationLevel",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_eMobileNotificationLevel",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_bUnreadIndicatorMuted", void 0),
          R.c([m.action], e.prototype, "UpdateUserState", null),
          R.c([m.action], e.prototype, "UpdateChatState", null),
          R.c([m.computed], e.prototype, "name", null),
          R.c([M.a], e.prototype, "StartVoiceChat", null),
          R.c([m.action], e.prototype, "SendChatMessage", null),
          R.c(
            [M.a, Object(lt.a)(100)],
            e.prototype,
            "PlayChatRoomNotificationSound",
            null
          ),
          R.c(
            [M.a, Object(lt.a)(100)],
            e.prototype,
            "PlayAtMentionSound",
            null
          ),
          R.c([m.action], e.prototype, "CreateInviteLink", null),
          R.c([m.action], e.prototype, "OnActivate", null),
          R.c(
            [m.action],
            e.prototype,
            "ChangeNameWhileWaitingForRenameRequest",
            null
          ),
          e
        );
      })(Je),
      Gt = n("2lpH"),
      Rt = n.n(Gt);
    function Nt(e, t) {
      return (
        (t = t <= 32 ? 32 : t <= 64 ? 64 : 256),
        G.a.MEDIA_CDN_COMMUNITY_URL +
          "images/chaticons/" +
          e.substr(0, 2) +
          "/" +
          e.substr(2, 2) +
          "/" +
          e.substr(4, 2) +
          "/" +
          e +
          "_" +
          t +
          ".jpg"
      );
    }
    var Lt = (function() {
        function e(e, t) {
          void 0 === e && (e = 20), (this.m_rank = e), (this.m_role_ids = t);
        }
        return (
          (e.prototype.BHasRole = function(t) {
            return (
              -1 !=
              this.m_role_ids.findIndex(function(e) {
                return e == t;
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_rank", void 0),
          R.c([m.observable], e.prototype, "m_role_ids", void 0),
          e
        );
      })(),
      kt = (function() {
        function e(e) {
          (this.m_roleActions = new ie.a()), (this.m_roleActions = e);
        }
        return (
          (e.prototype.BCanPerformAction = function(e) {
            switch (e) {
              case 1:
                return this.m_roleActions.can_create_rename_delete_channel();
              case 2:
                return this.m_roleActions.can_kick();
              case 3:
                return this.m_roleActions.can_ban();
              case 4:
                return this.m_roleActions.can_invite();
              case 5:
                return this.m_roleActions.can_change_tagline_avatar_name();
              case 6:
                return this.m_roleActions.can_chat();
              case 8:
                return this.m_roleActions.can_change_group_roles();
              case 9:
                return this.m_roleActions.can_change_user_roles();
              case 10:
                return this.m_roleActions.can_mention_all();
              case 11:
                return this.m_roleActions.can_set_watching_broadcast();
              default:
                return !1;
            }
          }),
          (e.prototype.SetCanPerformAction = function(e, t) {
            switch (e) {
              case 1:
                this.m_roleActions.set_can_create_rename_delete_channel(t);
                break;
              case 2:
                this.m_roleActions.set_can_kick(t);
                break;
              case 3:
                this.m_roleActions.set_can_ban(t);
                break;
              case 4:
                this.m_roleActions.set_can_invite(t);
                break;
              case 5:
                this.m_roleActions.set_can_change_tagline_avatar_name(t);
                break;
              case 6:
                this.m_roleActions.set_can_chat(t);
                break;
              case 8:
                this.m_roleActions.set_can_change_group_roles(t);
                break;
              case 9:
                this.m_roleActions.set_can_change_user_roles(t);
                break;
              case 10:
                this.m_roleActions.set_can_mention_all(t);
                break;
              case 11:
                this.m_roleActions.set_can_set_watching_broadcast(t);
            }
          }),
          (e.prototype.toString = function() {
            var e = this.role_id;
            return (
              this.m_roleActions.can_create_rename_delete_channel() &&
                (e += " CreateRenameDeleteChannel"),
              this.m_roleActions.can_kick() && (e += " Kick"),
              this.m_roleActions.can_ban() && (e += " Ban"),
              this.m_roleActions.can_invite() && (e += " Invite"),
              this.m_roleActions.can_change_tagline_avatar_name() &&
                (e += " ChangeTaglineAvatarName"),
              this.m_roleActions.can_chat() && (e += " Chat"),
              this.m_roleActions.can_change_group_roles() &&
                (e += " ChangeGroupRoles"),
              this.m_roleActions.can_change_user_roles() &&
                (e += " ChangeUserRoles"),
              e
            );
          }),
          Object.defineProperty(e.prototype, "role_id", {
            get: function() {
              return this.m_roleActions.role_id();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "roleActions", {
            get: function() {
              return this.m_roleActions;
            },
            enumerable: !0,
            configurable: !0
          }),
          e
        );
      })(),
      At = (function() {
        function e(e, t) {
          var n = this;
          (this.LOG = Te.create(function() {
            return n.unique_id;
          }, !1)),
            (this.m_chatStore = null),
            (this.m_ulGroupID = ""),
            (this.m_ulDefaultChatID = ""),
            (this.m_rtTimeJoined = 0),
            (this.m_rtLastAck = 0),
            (this.m_bFullStateLoaded = !1),
            (this.m_strName = ""),
            (this.m_strTagLine = ""),
            (this.m_strAvatarSHA = ""),
            (this.m_mapRooms = m.observable.map(null, { deep: !1 })),
            (this.m_eUserDesktopNotificationLevel = 4),
            (this.m_eUserMobileNotificationLevel = 4),
            (this.m_bUnreadIndicatorMuted = !1),
            (this.m_roles = []),
            (this.m_roleActions = []),
            (this.m_groupMembers = new Ut()),
            (this.m_cMemberSummaryCount = 0),
            (this.m_chatStore = e),
            (this.m_ulGroupID = t);
        }
        return (
          (e.prototype.BIsValid = function() {
            return 0 < this.m_mapRooms.size;
          }),
          (e.prototype.IsNamedGroupChat = function() {
            return !!this.m_strName;
          }),
          (e.prototype.GetOwnerAccountID = function() {
            return this.m_unOwnerAccountID;
          }),
          (e.prototype.BIsAccountIDOwner = function(e) {
            return this.BIsClanChatRoom()
              ? 50 == this.GetMemberRankIfPresent(e)
              : this.GetOwnerAccountID() == e;
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              if (this.m_strName) return this.m_strName;
              var e = this.members_to_highlight_name,
                t = e.members;
              if (!t.length)
                return e.remaining_count
                  ? Object(re.b)(
                      "#ChatRoom_GenericWithOthers",
                      e.remaining_count
                    )
                  : Object(re.b)("#ChatRoom_GenericEmpty");
              switch (t.length) {
                case 1:
                  return 0 < e.remaining_count
                    ? Object(re.b)(
                        "#ChatRoom_OneFriendPlusMore",
                        t[0].display_name,
                        e.remaining_count
                      )
                    : Object(re.b)("#ChatRoom_OneFriend", t[0].display_name);
                case 2:
                  return 0 < e.remaining_count
                    ? Object(re.b)(
                        "#ChatRoom_TwoPlusMore",
                        t[0].display_name,
                        t[1].display_name,
                        e.remaining_count
                      )
                    : Object(re.b)(
                        "#ChatRoom_TwoFriends",
                        t[0].display_name,
                        t[1].display_name
                      );
                case 3:
                  return Object(re.b)(
                    "#ChatRoom_ThreeFriends",
                    t[0].display_name,
                    t[1].display_name,
                    t[2].display_name
                  );
                default:
                  return (
                    AssertMsg(!1, "unexpected number of friends: " + t.length),
                    ""
                  );
              }
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "tagline", {
            get: function() {
              return this.m_strTagLine;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatarSHA", {
            get: function() {
              return this.m_strAvatarSHA;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "watching_broadcast_steamid", {
            get: function() {
              return this.m_unWatchingBroadcastAccountID
                ? E.a.InitFromAccountID(this.m_unWatchingBroadcastAccountID)
                : null;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "hasAvatar", {
            get: function() {
              return 0 < this.m_strAvatarSHA.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_small", {
            get: function() {
              return Nt(this.m_strAvatarSHA, 32);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_medium", {
            get: function() {
              return Nt(this.m_strAvatarSHA, 64);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "avatar_url_full", {
            get: function() {
              return Nt(this.m_strAvatarSHA, 256);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "memberCountTotal", {
            get: function() {
              return this.m_bFullStateLoaded
                ? this.m_groupMembers.unfiltered_count
                : this.m_cMemberSummaryCount;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "readyToRender", {
            get: function() {
              return this.m_bFullStateLoaded;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "memberCountOnline", {
            get: function() {
              return this.m_bFullStateLoaded
                ? this.m_groupMembers.member_counts.online
                : this.memberCountTotal;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "memberCountInGame", {
            get: function() {
              return this.m_groupMembers.member_counts.ingame;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "memberList", {
            get: function() {
              return this.m_groupMembers;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "cg" + this.m_ulGroupID;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "timeJoined", {
            get: function() {
              return this.m_rtTimeJoined;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetGroupID = function() {
            return this.m_ulGroupID;
          }),
          (e.prototype.GetDefaultChatID = function() {
            return this.m_ulDefaultChatID;
          }),
          (e.prototype.BIsClanChatRoom = function() {
            return !!this.m_unClanID;
          }),
          (e.prototype.BIsVoiceChannel = function(e) {
            var t = this.GetChatRoom(e);
            return (
              null != t &&
              (t.GetVoiceAllowed() && t.GetRoomID() != this.GetDefaultChatID())
            );
          }),
          (e.prototype.BIsTempVoiceChannel = function(e) {
            var t = this.GetChatRoom(e);
            return t && t.IsTempVoiceRoom();
          }),
          (e.prototype.GetClanID = function() {
            return this.m_unClanID;
          }),
          Object.defineProperty(e.prototype, "chatRoomList", {
            get: function() {
              var e = Array.from(this.m_mapRooms.values());
              return (
                e.sort(function(e, t) {
                  if (e.GetSortOrder() < t.GetSortOrder()) return -1;
                  if (e.GetSortOrder() > t.GetSortOrder()) return 1;
                  var n = Rt.a.fromString(e.GetRoomID()),
                    o = Rt.a.fromString(t.GetRoomID());
                  return n.lessThan(o) ? -1 : n.greaterThan(o) ? 1 : 0;
                }),
                e
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "textRoomList", {
            get: function() {
              var t = this;
              return this.chatRoomList.filter(function(e) {
                return (
                  !e.GetVoiceAllowed() || e.GetRoomID() == t.GetDefaultChatID()
                );
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "voiceRoomList", {
            get: function() {
              return this.chatRoomList.filter(function(e) {
                return e.GetVoiceAllowed();
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "hasVoiceRoom", {
            get: function() {
              for (
                var e, t = this.m_mapRooms.values();
                (e = t.next()) && !e.done;

              )
                if (e.value.GetVoiceAllowed()) return !0;
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetDesktopNotificationLevel = function(e) {
            return (
              void 0 === e && (e = !1),
              0 == this.m_eUserDesktopNotificationLevel
                ? this.BIsClanChatRoom() ? 3 : 4
                : this.m_eUserDesktopNotificationLevel
            );
          }),
          (e.prototype.GetMobileNotificationLevel = function() {
            return 0 === this.m_eUserMobileNotificationLevel
              ? this.GetDesktopNotificationLevel()
              : this.m_eUserMobileNotificationLevel;
          }),
          (e.prototype.BIsUnreadIndicatorMuted = function() {
            return this.m_bUnreadIndicatorMuted;
          }),
          Object.defineProperty(e.prototype, "HasUnreadChatMessage", {
            get: function() {
              for (
                var e = 0, t = Array.from(this.m_mapRooms.values());
                e < t.length;
                e++
              ) {
                var n = t[e];
                if (
                  (this.m_bUnreadIndicatorMuted
                    ? n.has_unread_messages
                    : n.has_any_unread_messages) &&
                  (n.BIsDefaultRoom() ||
                    n.time_last_ack >= this.m_rtLastAck ||
                    n.time_last_mention > this.m_rtLastAck)
                )
                  return !0;
              }
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "HasUnreadMention", {
            get: function() {
              for (
                var e = 0, t = Array.from(this.m_mapRooms.values());
                e < t.length;
                e++
              ) {
                if (t[e].has_unread_mention) return !0;
              }
              return !1;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetChatRoomsWithUnreadPriorityMessages = function(t) {
            this.m_mapRooms.forEach(function(e) {
              e.has_unread_priority_messages && t.push(e);
            });
          }),
          (e.prototype.GetMostRecentChatAck = function() {
            var t = 0;
            return (
              this.m_mapRooms.forEach(function(e) {
                e.time_last_ack > t && (t = e.time_last_ack);
              }),
              this.m_rtLastAck > t && (t = this.m_rtLastAck),
              t
            );
          }),
          Object.defineProperty(e.prototype, "time_last_activity", {
            get: function() {
              var t = 0;
              return (
                this.m_mapRooms.forEach(function(e) {
                  e.BShouldTrackUnreadMessages() &&
                    (t = Math.max(e.time_last_activity, t));
                }),
                this.m_rtLastAck > t && (t = this.m_rtLastAck),
                this.m_rtTimeJoined > t && (t = this.m_rtTimeJoined),
                t
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BHasEverBeenAcked = function() {
            if (this.m_rtLastAck) return !0;
            for (
              var e = 0, t = Array.from(this.m_mapRooms.values());
              e < t.length;
              e++
            ) {
              if (t[e].time_last_ack) return !0;
            }
            return !1;
          }),
          (e.prototype.UpdateLastAckTimeFromServer = function(e) {
            this.m_rtLastAck < e && (this.m_rtLastAck = e);
          }),
          (e.prototype.IsInRoom = function(e) {
            return (
              AssertMsg(
                this.m_bFullStateLoaded,
                "Group state not fully loaded"
              ),
              this.m_groupMembers.HasMember(e)
            );
          }),
          (e.prototype.BRoomContainsJustTheseFriendsAndSelf = function(e) {
            if (!this.BIsCurrentUserAMember()) return !1;
            if (this.memberCountTotal != e.length + 1) return !1;
            for (var t = !0, n = 0, o = e; n < o.length; n++) {
              var i = o[n];
              if (this.m_rgGroupMembersSummary.indexOf(i) < 0) {
                t = !1;
                break;
              }
            }
            return t;
          }),
          (e.prototype.GetMyRank = function() {
            return this.GetMemberRank(
              this.m_chatStore.CMInterface.steamid.GetAccountID()
            );
          }),
          (e.prototype.ChangeMemberRank = function(e, t) {
            AssertMsg(
              this.m_groupMembers.HasMember(e),
              "ChangeMemberRank: missing member"
            ),
              (this.m_groupMembers.GetExtra(e).m_rank = t);
          }),
          (e.prototype.GetMemberRank = function(e) {
            AssertMsg(
              this.m_groupMembers.HasMember(e),
              "GetMemberRank: missing member"
            );
            var t = this.m_groupMembers.GetExtra(e);
            return t && 0 != t.m_rank
              ? t.m_rank
              : this.BIsClanChatRoom() ? 0 : 20;
          }),
          (e.prototype.GetMemberRankIfPresent = function(e) {
            var t = this.m_groupMembers.GetExtra(e);
            return t ? t.m_rank : 0;
          }),
          (e.prototype.ChangeMemberRoles = function(e, t) {
            AssertMsg(
              this.m_groupMembers.HasMember(e),
              "GetMemberRank: missing member"
            );
            var n = this.m_groupMembers.GetExtra(e);
            n && (n.m_role_ids = t);
          }),
          (e.prototype.GetMemberRankString = function(e) {
            if (!this.IsInRoom(e)) return "";
            switch (this.GetMemberRank(e)) {
              case 50:
                return Object(re.b)("#Chat_rank_owner");
              case 40:
                return Object(re.b)("#Chat_rank_officer");
              case 30:
                return Object(re.b)("#Chat_rank_moderator");
              case 20:
                return Object(re.b)("#Chat_rank_member");
              case 15:
                return Object(re.b)("#Chat_rank_guest");
              case 10:
                return Object(re.b)("#Chat_rank_viewer");
              case 0:
                return "";
              default:
                return Object(re.b)("#Chat_rank_unknown");
            }
          }),
          (e.prototype.GetMemberRankStringUnlocalized = function(e) {
            if (!this.IsInRoom(e)) return "";
            switch (this.GetMemberRank(e)) {
              case 50:
                return "Owner";
              case 40:
                return "Officer";
              case 30:
                return "Moderator";
              case 20:
                return "Member";
              case 15:
                return "Guest";
              case 10:
                return "Viewer";
              case 0:
                return "DefaultRank";
              default:
                return Object(re.b)("UnknownRank");
            }
          }),
          (e.prototype.GetMember = function(e) {
            if (this.IsInRoom(e))
              return this.m_chatStore.FriendStore.GetPlayer(e);
            this.m_bFullStateLoaded;
          }),
          (e.prototype.SetInitialGroupState = function(e) {
            AssertMsg(
              e.chat_group_id() == this.m_ulGroupID,
              "Chat group id doesn't match header"
            ),
              this.UpdateGroupStateFromSummary(e),
              this.UpdateChatRoomState(e.default_chat_id(), e.chat_rooms());
          }),
          (e.prototype.UpdateGroupStateFromSummary = function(e) {
            (this.m_strName = e.chat_group_name()),
              (this.m_strTagLine = e.chat_group_tagline()),
              null != e.chat_group_avatar_sha() &&
                (this.m_strAvatarSHA = p(e.chat_group_avatar_sha())),
              (this.m_unWatchingBroadcastAccountID = e.watching_broadcast_accountid()),
              (this.m_cMemberSummaryCount = e.active_member_count()),
              (this.m_unClanID = e.clanid()),
              (this.m_unOwnerAccountID = e.accountid_owner()),
              (this.m_unAppID = e.appid()),
              (this.m_rgGroupMembersSummary = e.top_members()),
              (this.m_defaultRoleID = e.default_role_id()),
              (this.m_roleActions = e.role_actions().map(function(e) {
                return new kt(e);
              })),
              this.m_groupMembers.AddMember(
                Yo.CMInterface.steamid.GetAccountID(),
                new Lt(e.rank(), e.role_ids())
              );
          }),
          (e.prototype.UpdateGroupState = function(e) {
            AssertMsg(
              e.header_state().chat_group_id() == this.m_ulGroupID,
              "Chat group id doesn't match header"
            ),
              this.UpdateChatRoomHeaderState(e.header_state()),
              this.m_groupMembers.Clear();
            for (var t = [], n = 0, o = e.members(); n < o.length; n++) {
              var i = o[n],
                r = i.accountid();
              this.m_groupMembers.AddMember(r, new Lt(i.rank(), i.role_ids())),
                t.length < 10 && t.push(r);
            }
            (!this.m_rgGroupMembersSummary ||
              this.m_rgGroupMembersSummary.length < t.length) &&
              (this.m_rgGroupMembersSummary = t),
              this.UpdateChatRoomState(e.default_chat_id(), e.chat_rooms()),
              (this.m_bFullStateLoaded = !0);
          }),
          (e.prototype.UnloadActiveGroupState = function() {
            this.UnloadGroupState(),
              this.m_mapRooms.forEach(function(e) {
                e.UnloadActiveChatState();
              });
          }),
          (e.prototype.UnloadGroupState = function() {
            (this.m_bFullStateLoaded = !1), this.m_groupMembers.Clear();
          }),
          (e.prototype.UnloadAndResetGroupState = function() {
            this.UnloadGroupState(),
              this.UpdateUserState(new ie.T()),
              this.m_mapRooms.forEach(function(e) {
                e.UnloadChatState();
              });
          }),
          (e.prototype.OnUserStateChange = function(e, t) {
            var n = e.accountid();
            1 == t
              ? (this.LOG(
                  "new member " + n + " roles [" + e.role_ids().toString() + "]"
                ),
                this.m_groupMembers.AddMember(
                  n,
                  new Lt(e.rank(), e.role_ids())
                ),
                Yo.GroupMemberStore.OnMemberAdded(this.m_ulGroupID, n),
                this.m_rgGroupMembersSummary.length < 10 &&
                  -1 == this.m_rgGroupMembersSummary.indexOf(n) &&
                  (this.m_rgGroupMembersSummary = this.m_rgGroupMembersSummary.concat(
                    [n]
                  )))
              : 2 == t || 3 == t || 10 == t
                ? (this.m_groupMembers.RemoveMember(n),
                  Yo.GroupMemberStore.OnMemberRemoved(this.m_ulGroupID, n),
                  -1 !== this.m_rgGroupMembersSummary.indexOf(n) &&
                    (this.m_rgGroupMembersSummary = w.a(
                      this.m_rgGroupMembersSummary,
                      n
                    )))
                : 7 == t
                  ? this.ChangeMemberRank(n, e.rank())
                  : 12 == t && this.ChangeMemberRoles(n, e.role_ids());
          }),
          (e.prototype.UpdateChatRoomState = function(e, t) {
            var n = this;
            this.m_ulDefaultChatID = e;
            var o = new Set();
            this.m_mapRooms.forEach(function(e, t) {
              return o.add(t);
            });
            for (var i = 0, r = t; i < r.length; i++) {
              var a = r[i],
                s = a.chat_id();
              o.delete(s);
              var c = this.m_mapRooms.get(s);
              c ||
                ((c = new Tt(this.m_chatStore, this, s, s == e)),
                this.m_mapRooms.set(s, c)),
                c.UpdateChatState(a);
            }
            o.forEach(function(e) {
              return n.m_mapRooms.delete(e);
            });
          }),
          (e.prototype.UpdateUserState = function(e) {
            for (var t = 0, n = e.user_chat_room_state(); t < n.length; t++) {
              var o = n[t],
                i = o.chat_id(),
                r = this.m_mapRooms.get(i);
              r && r.UpdateUserState(o);
            }
            (this.m_rtTimeJoined = e.time_joined()),
              (this.m_rtLastAck = e.time_last_group_ack()),
              (this.m_eUserDesktopNotificationLevel = e.desktop_notification_level()),
              (this.m_eUserMobileNotificationLevel = e.mobile_notification_level()),
              (this.m_bUnreadIndicatorMuted = e.unread_indicator_muted());
          }),
          (e.prototype.UpdateChatRoomHeaderState = function(e) {
            AssertMsg(
              e.chat_group_id() == this.m_ulGroupID,
              "Chat group id doesn't match header"
            ),
              (this.m_strName = e.chat_name()),
              (this.m_strTagLine = e.tagline()),
              null != e.avatar_sha() &&
                (this.m_strAvatarSHA = p(e.avatar_sha())),
              (this.m_unWatchingBroadcastAccountID = e.watching_broadcast_accountid()),
              (this.m_unClanID = e.clanid()),
              (this.m_unOwnerAccountID = e.accountid_owner()),
              (this.m_unAppID = e.appid()),
              (this.m_defaultRoleID = e.default_role_id()),
              (this.m_roles = e.roles().map(function(e) {
                return {
                  role_id: e.role_id(),
                  name: e.name(),
                  ordinal: e.ordinal()
                };
              }));
            for (var t = 0, n = this.m_roles; t < n.length; t++) {
              var o = n[t];
              this.LOG("role " + o.role_id + " " + o.name);
            }
            this.m_roleActions = e.role_actions().map(function(e) {
              return new kt(e);
            });
            for (var i = 0, r = this.m_roleActions; i < r.length; i++) {
              var a = r[i];
              this.LOG("role/action " + a.toString());
            }
          }),
          (e.prototype.BIsCurrentUserAMember = function() {
            return !!this.m_rtTimeJoined;
          }),
          (e.prototype.DefaultRoleID = function() {
            return this.m_defaultRoleID;
          }),
          (e.prototype.GetRoleActions = function(e) {
            for (var t = 0, n = this.m_roleActions; t < n.length; t++) {
              var o = n[t];
              if (o.role_id == e) return o;
            }
          }),
          (e.prototype.GetRoles = function() {
            return this.m_roles;
          }),
          (e.prototype.GetRoleOrdinal = function(e) {
            for (var t = 0, n = this.m_roles; t < n.length; t++) {
              var o = n[t];
              if (o.role_id == e) return o.ordinal;
            }
          }),
          (e.prototype.BIsUserGroupMember = function(e) {
            for (
              var t = 0, n = this.m_rgGroupMembersSummary;
              t < n.length;
              t++
            ) {
              if (n[t] == e.accountid) return !0;
            }
            return !1;
          }),
          (e.prototype.GetMemberRoleIDs = function(e) {
            return null == this.m_groupMembers.GetExtra(e)
              ? []
              : this.m_groupMembers.GetExtra(e).m_role_ids;
          }),
          (e.prototype.ToggleMemberRoleState = function(e, t) {
            var n = this.BMemberHasRole(e, t);
            return this.SetMemberRoleState(e, t, !n);
          }),
          (e.prototype.SetMemberRoleState = function(e, t, n) {
            if (n == this.BMemberHasRole(e, t)) return Promise.resolve(!0);
            if (!this.BCanIAssignRole(t)) return Promise.resolve(!1);
            var o,
              i = E.a.InitFromAccountID(e);
            return n
              ? ((o = u.Init(ie.d)).Body().set_chat_group_id(this.GetGroupID()),
                o.Body().set_steamid(i.ConvertTo64BitString()),
                o.Body().set_role_id(t),
                ie.V.AddRoleToUser(
                  Yo.ChatStore.CMInterface.GetServiceTransport(),
                  o
                ).then(function(e) {
                  return e.GetEResult(), 1 == e.GetEResult();
                }))
              : ((o = u.Init(ie.l)).Body().set_chat_group_id(this.GetGroupID()),
                o.Body().set_steamid(i.ConvertTo64BitString()),
                o.Body().set_role_id(t),
                ie.V.DeleteRoleFromUser(
                  Yo.ChatStore.CMInterface.GetServiceTransport(),
                  o
                ).then(function(e) {
                  return e.GetEResult(), 1 == e.GetEResult();
                }));
          }),
          (e.prototype.BDoesRoleAllowAction = function(e, t) {
            for (var n = 0, o = this.m_roleActions; n < o.length; n++) {
              var i = o[n];
              if (i.role_id == e && i.BCanPerformAction(t)) return !0;
            }
            return !1;
          }),
          (e.prototype.BCanIPerformActionOnUser = function(e, t, n) {
            return (
              void 0 === n && (n = !1),
              !(!n && !this.BHasMember(e)) &&
                (!this.BIsAccountIDOwner(e) && this.BCanIPerformAction(t))
            );
          }),
          (e.prototype.BHasMember = function(e) {
            return void 0 !== this.m_groupMembers.GetExtra(e);
          }),
          (e.prototype.BMemberHasRole = function(e, t) {
            var n = this.m_groupMembers.GetExtra(e);
            return !!n && n.BHasRole(t);
          }),
          (e.prototype.BCanIPerformAction = function(e) {
            if (
              this.BIsAccountIDOwner(
                this.m_chatStore.CMInterface.steamid.GetAccountID()
              )
            )
              return !0;
            var t = this.m_chatStore.CMInterface.steamid.GetAccountID(),
              n = this.m_groupMembers.GetExtra(t);
            if (n)
              for (var o = 0, i = n.m_role_ids; o < i.length; o++) {
                var r = i[o];
                if (this.BDoesRoleAllowAction(r, e)) return !0;
              }
            return !1;
          }),
          (e.prototype.BCanKickMember = function(e) {
            return this.BCanIPerformActionOnUser(e, 2);
          }),
          (e.prototype.BCanBanMember = function(e) {
            return this.BCanIPerformActionOnUser(e, 3);
          }),
          (e.prototype.BCanDeleteMemberMessages = function(e) {
            if (Yo.FriendStore.self.accountid == e && this.BIsAccountIDOwner(e))
              return !0;
            return (
              this.BCanIPerformActionOnUser(e, 2, !0) ||
              this.BCanIPerformActionOnUser(e, 3, !0)
            );
          }),
          (e.prototype.BCanICreateRoles = function() {
            return this.BCanIPerformAction(8);
          }),
          (e.prototype.BCanIModifyRole = function(e) {
            if (
              this.BIsAccountIDOwner(
                this.m_chatStore.CMInterface.steamid.GetAccountID()
              )
            )
              return !0;
            if (!this.BCanIPerformAction(8)) return !1;
            if (!this.GetRoleActions(e)) return !1;
            var t = this.GetRoleOrdinal(e);
            if (null == t) return !1;
            var n = this.GetHighestRankRoleIDForPermission(
                this.m_chatStore.CMInterface.steamid.GetAccountID(),
                8
              ),
              o = this.GetRoleOrdinal(n);
            return null != o && o < t;
          }),
          (e.prototype.BCanIAssignRoles = function() {
            return this.BCanIPerformAction(9);
          }),
          (e.prototype.BCanIAssignRole = function(e) {
            if (this.BIsClanChatRoom()) return !1;
            if (e == this.DefaultRoleID()) return !1;
            if (
              this.BIsAccountIDOwner(
                this.m_chatStore.CMInterface.steamid.GetAccountID()
              )
            )
              return !0;
            if (!this.BCanIPerformAction(9)) return !1;
            if (!this.GetRoleActions(e)) return !1;
            var t = this.GetRoleOrdinal(e);
            if (null == t) return !1;
            var n = this.GetHighestRankRoleIDForPermission(
                this.m_chatStore.CMInterface.steamid.GetAccountID(),
                9
              ),
              o = this.GetRoleOrdinal(n);
            return null != o && o < t;
          }),
          (e.prototype.BCanIMentionAll = function() {
            return this.BCanIPerformAction(10);
          }),
          (e.prototype.BCanIAssociateBroadcast = function() {
            return this.BCanIPerformAction(11);
          }),
          (e.prototype.GetHighestRankRoleIDForPermission = function(e, t) {
            var n = void 0,
              o = Number.MAX_VALUE,
              i = this.m_groupMembers.GetExtra(e);
            if (i) {
              for (var r = 0, a = i.m_role_ids; r < a.length; r++) {
                var s = a[r];
                if (this.BDoesRoleAllowAction(s, t)) {
                  var c = this.GetRoleOrdinal(s);
                  c < o && ((n = s), (o = c));
                }
              }
              return n;
            }
          }),
          (e.prototype.GetDefaultChatRoom = function() {
            return this.m_mapRooms.get(this.m_ulDefaultChatID);
          }),
          (e.prototype.GetChatRoom = function(e) {
            return this.m_mapRooms.get(e);
          }),
          (e.prototype.OnConnectionRestored = function() {
            this.UnloadGroupState(),
              this.m_mapRooms.forEach(function(e) {
                return e.OnConnectionRestored();
              });
          }),
          (e.prototype.OnRoomStateChange = function(e) {
            this.UpdateChatRoomState(e.default_chat_id(), e.chat_rooms());
          }),
          (e.prototype.OnActivate = function() {
            if (
              !this.m_rtLastAck ||
              (this.HasUnreadChatMessage &&
                !this.GetDefaultChatRoom().has_unread_messages)
            ) {
              var t = 0;
              this.m_mapRooms.forEach(function(e) {
                e.time_last_message && (t = Math.max(t, e.time_last_message));
              }),
                (this.m_rtLastAck = t || Yo.GetServerRTime32());
              var e = u.Init(ie.c);
              e.Body().set_chat_group_id(this.m_ulGroupID),
                e.Body().set_timestamp(this.m_rtLastAck),
                ie.V.AckChatMessage(Yo.CMInterface.GetServiceTransport(), e);
            }
          }),
          (e.prototype.InviteFriend = function(e, t) {
            var n = E.a.InitFromAccountID(e),
              o = u.Init(ie.u);
            o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_steamid(n.ConvertTo64BitString()),
              t && o.Body().set_chat_id(t.GetRoomID()),
              ie.V.InviteFriendToChatRoomGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                e.GetEResult();
              });
          }),
          (e.prototype.SaveChatRoomGroup = function(e) {
            var t = u.Init(ie.I);
            return (
              t.Body().set_chat_group_id(this.m_ulGroupID),
              t.Body().set_name(e),
              ie.V.SaveChatRoomGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                t
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw t;
              })
            );
          }),
          (e.prototype.RenameChatRoomGroup = function(e) {
            var t = this,
              n = this.m_strName;
            this.m_strName = e;
            var o = u.Init(ie.B);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_name(e),
              ie.V.RenameChatRoomGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                return 1 != e.GetEResult() && (t.m_strName = n), e.GetEResult();
              })
            );
          }),
          (e.prototype.SetChatRoomGroupTagline = function(e) {
            var t = this,
              n = this.m_strTagLine;
            if (
              (255 < e.length && (e = e.substring(0, 255)),
              e == this.m_strTagLine)
            )
              return Promise.resolve();
            this.m_strTagLine = e;
            var o = u.Init(ie.L);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_tagline(e),
              ie.V.SetChatRoomGroupTagline(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                1 != e.GetEResult() && (t.m_strTagLine = n);
              })
            );
          }),
          (e.prototype.SetChatRoomGroupWatchingBroadcast = function(i) {
            return R.b(this, void 0, void 0, function() {
              var t, n, o;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return i == this.m_unWatchingBroadcastAccountID
                      ? [2, Promise.resolve()]
                      : ((t = u.Init(ie.M))
                          .Body()
                          .set_chat_group_id(this.m_ulGroupID),
                        t.Body().set_watching_broadcast_accountid(i),
                        [
                          4,
                          ie.V.SetChatRoomGroupWatchingBroadcast(
                            this.m_chatStore.CMInterface.GetServiceTransport(),
                            t
                          )
                        ]);
                  case 1:
                    if (((n = e.sent()), 1 !== (o = n.GetEResult()))) throw o;
                    return (this.m_unWatchingBroadcastAccountID = i), [2];
                }
              });
            });
          }),
          (e.prototype.SetChatRoomGroupAvatar = function(n) {
            var o = this;
            if (n == this.m_strAvatarSHA) return Promise.resolve();
            var e = u.Init(ie.K);
            return (
              e.Body().set_chat_group_id(this.m_ulGroupID),
              e.Body().set_avatar_sha(
                (function(e) {
                  for (
                    var t = new Uint8Array(e.length / 2), n = 0;
                    n < e.length - 1;
                    n += 2
                  )
                    t[n / 2] = parseInt(e.substr(n, 2), 16);
                  return t;
                })(n)
              ),
              ie.V.SetChatRoomGroupAvatar(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw t;
                o.m_strAvatarSHA = n;
              })
            );
          }),
          (e.prototype.BCanInvite = function() {
            return this.BCanIPerformAction(4);
          }),
          (e.prototype.BCanBan = function() {
            return this.BCanIPerformAction(3);
          }),
          (e.prototype.BCanKick = function() {
            return this.BCanIPerformAction(2);
          }),
          (e.prototype.BCanAdminChannel = function() {
            return this.BCanIPerformAction(1);
          }),
          (e.prototype.BCanAdminGroup = function() {
            return this.BCanIPerformAction(5);
          }),
          (e.prototype.BCanChat = function() {
            return this.BCanIPerformAction(6);
          }),
          (e.prototype.BCanEditRoles = function() {
            return !this.BIsClanChatRoom() && this.BCanIPerformAction(9);
          }),
          Object.defineProperty(e.prototype, "members_to_highlight_name", {
            get: function() {
              return this.InternalGetMembersToHighlight(3, !0);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "members_to_highlight", {
            get: function() {
              return this.InternalGetMembersToHighlight(4, !1);
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.InternalGetMembersToHighlight = function(e, t) {
            var n = !t,
              o = !!this.m_rtTimeJoined,
              i = this.m_bFullStateLoaded
                ? this.m_groupMembers.unfiltered_count
                : this.m_cMemberSummaryCount;
            var r = e < i ? e - 1 : e,
              a = Yo.FriendStore,
              s = a.self,
              c = [],
              l = a.GetPlayer(this.GetOwnerAccountID());
            if (
              (l && l.accountid != s.accountid && c.push(l),
              this.m_rgGroupMembersSummary)
            ) {
              for (
                var p = 0, u = this.m_rgGroupMembersSummary;
                p < u.length;
                p++
              ) {
                if ((_ = u[p]) != s.accountid && !this.BIsAccountIDOwner(_)) {
                  var m = a.GetFriendIfCached(_);
                  if (
                    m &&
                    (t || m.persona.BHasAvatarSet()) &&
                    (m.persona.avatar_url, c.push(m), c.length >= r)
                  )
                    break;
                }
              }
              if (n && c.length < r)
                for (
                  var d = 0, h = this.m_rgGroupMembersSummary;
                  d < h.length;
                  d++
                ) {
                  var _;
                  if ((_ = h[d]) != s.accountid && !this.BIsAccountIDOwner(_)) {
                    var f = a.GetPlayer(_);
                    if (
                      f &&
                      !f.is_friend &&
                      (t || f.persona.BHasAvatarSet()) &&
                      (c.push(f), c.length >= r)
                    )
                      break;
                  }
                }
            }
            return (
              o && c.length < r && c.push(s),
              { members: c, remaining_count: i - c.length }
            );
          }),
          (e.prototype.SetUserBanState = function(e, t) {
            var n = E.a.InitFromAccountID(e).ConvertTo64BitString(),
              o = u.Init(ie.O);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_steamid(n),
              o.Body().set_ban_state(t),
              ie.V.SetUserBanState(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t && 29 != t)
                  throw (AssertMsg(!1, "Failed to change ban state " + t), t);
              })
            );
          }),
          (e.prototype.MuteUser = function(e, t) {
            var n = E.a.InitFromAccountID(e).ConvertTo64BitString(),
              o = u.Init(ie.A);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_steamid(n),
              o.Body().set_expiration(t),
              ie.V.MuteUserInGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t)
                  throw (AssertMsg(!1, "Failed to change muteexpiration " + t),
                  t);
              })
            );
          }),
          (e.prototype.KickUser = function(e, t) {
            var n = this,
              o = E.a.InitFromAccountID(e).ConvertTo64BitString(),
              i = u.Init(ie.x);
            return (
              i.Body().set_chat_group_id(this.m_ulGroupID),
              i.Body().set_steamid(o),
              i.Body().set_expiration(t),
              ie.V.KickUserFromGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                i
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw (n.LOG("Kick returned " + t), t);
              })
            );
          }),
          (e.prototype.RevokeInvite = function(e) {
            var n = this,
              t = E.a.InitFromAccountID(e).ConvertTo64BitString(),
              o = u.Init(ie.H);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_steamid(t),
              ie.V.RevokeInviteToGroup(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw (n.LOG("RevokeInvite returned " + t), t);
              })
            );
          }),
          (e.prototype.CreateChatRoom = function(e, t) {
            var n = this,
              o = u.Init(ie.f);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              o.Body().set_name(e),
              o.Body().set_allow_voice(t),
              ie.V.CreateChatRoom(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                var t = e
                  .Body()
                  .chat_room()
                  .chat_id();
                if (1 != e.GetEResult() || "" == t || "0" == t)
                  throw (AssertMsg(!1, "Failed to create chat room"),
                  new Error("Failed to create chat room"));
                return n.AddCreatedRoom(t, e.Body().chat_room());
              })
            );
          }),
          (e.prototype.CreateAndJoinTempVoiceRoom = function() {
            this.CreateChatRoom("", !0)
              .then(function(e) {
                e.StartVoiceChat();
              })
              .catch(function() {});
          }),
          (e.prototype.AddCreatedRoom = function(e, t) {
            var n = this.m_mapRooms.get(e);
            return (
              n ||
                ((n = new Tt(this.m_chatStore, this, e, !1)),
                this.m_mapRooms.set(e, n)),
              n.UpdateChatState(t),
              n
            );
          }),
          (e.prototype.RenameRoom = function(e, t) {
            if (e != this.m_ulDefaultChatID && t) {
              var n = this.GetChatRoom(e);
              if (n) {
                var o = n.name;
                n.ChangeNameWhileWaitingForRenameRequest(t);
                var i = u.Init(ie.C);
                i.Body().set_chat_group_id(this.m_ulGroupID),
                  i.Body().set_chat_id(e),
                  i.Body().set_name(t),
                  ie.V.RenameChatRoom(
                    this.m_chatStore.CMInterface.GetServiceTransport(),
                    i
                  ).then(function(e) {
                    1 == e.GetEResult() ||
                      (AssertMsg(!1, "Failed to change room name"),
                      n.ChangeNameWhileWaitingForRenameRequest(o));
                  });
              }
            }
          }),
          (e.prototype.ReorderRoom = function(e, t) {
            var n = u.Init(ie.E);
            n.Body().set_chat_group_id(this.m_ulGroupID),
              n.Body().set_chat_id(e),
              n.Body().set_move_after_chat_id(t),
              ie.V.ReorderChatRoom(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                n
              ).then(function(e) {
                1 == e.GetEResult() || AssertMsg(!1, "Failed to reorder room");
              });
          }),
          (e.prototype.DeleteChatRoom = function(t) {
            var n = this,
              e = u.Init(ie.j);
            e.Body().set_chat_group_id(this.m_ulGroupID),
              e.Body().set_chat_id(t),
              ie.V.DeleteChatRoom(
                this.m_chatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                1 == e.GetEResult()
                  ? n.RemoveRoom(t)
                  : AssertMsg(!1, "Failed to delete chat room");
              });
          }),
          (e.prototype.RemoveRoom = function(e) {
            this.m_mapRooms.delete(e);
          }),
          (e.prototype.LeaveChatRoomGroup = function(e) {
            this.m_chatStore
              .LeaveChatRoomGroup(e, this.m_ulGroupID)
              .catch(function() {});
          }),
          (e.prototype.GetInviteLinksForGroup = function() {
            var e = u.Init(ie.q);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              ie.V.GetInviteLinksForGroup(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                return 1 != e.GetEResult()
                  ? { loadingState: "failed", rgInviteLinks: null }
                  : {
                      loadingState: "loaded",
                      rgInviteLinks: e.Body().invite_links()
                    };
              })
            );
          }),
          (e.prototype.GetInvitedUsersForGroup = function() {
            var e = u.Init(ie.r);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              ie.V.GetInviteList(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                return 1 != e.GetEResult()
                  ? { loadingState: "failed", rgInvitedUsers: null }
                  : {
                      loadingState: "loaded",
                      rgInvitedUsers: e.Body().invites()
                    };
              })
            );
          }),
          (e.prototype.GetBanList = function() {
            var e = u.Init(ie.n);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              ie.V.GetBanList(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                var t = new Ft();
                return (
                  15 == e.GetEResult()
                    ? (t.loadingState = "denied")
                    : 1 == e.GetEResult()
                      ? ((t.rgBans = e.Body().bans()),
                        (t.loadingState = "loaded"))
                      : (t.loadingState = "failed"),
                  t
                );
              })
            );
          }),
          (e.prototype.GetRoleName = function(t) {
            var e = this.m_roles.findIndex(function(e) {
              return e.role_id == t;
            });
            if (0 <= e) return this.m_roles[e].name;
          }),
          (e.prototype.CreateRole = function(o) {
            var i = this;
            if (0 == (o = o.trim()).length) return Promise.resolve();
            var e = u.Init(ie.h);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              e.Body().set_name(o),
              this.m_roles.push({
                role_id: "-1",
                name: o,
                ordinal: Number.MAX_VALUE
              }),
              ie.V.CreateRole(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) {
                  var n = i.m_roles.findIndex(function(e) {
                    return "-1" == e.role_id;
                  });
                  throw (0 <= n && i.m_roles.splice(n, 1),
                  new Error("unable to create role, error " + t));
                }
                i.LOG("created role " + o);
              })
            );
          }),
          (e.prototype.DeleteRole = function(n) {
            var o = this,
              e = u.Init(ie.m);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              e.Body().set_role_id(n),
              ie.V.DeleteRole(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                if (1 != e.GetEResult())
                  throw new Error("unable to delete role " + n);
                var t = o.m_roles.findIndex(function(e) {
                  return e.role_id == n;
                });
                0 <= t && o.m_roles.splice(t, 1);
              })
            );
          }),
          (e.prototype.RenameRole = function(o, i) {
            var r = this;
            if (0 == (i = i.trim()).length) return Promise.resolve();
            var e = u.Init(ie.D);
            return (
              e.Body().set_chat_group_id(this.GetGroupID()),
              e.Body().set_role_id(o),
              e.Body().set_name(i),
              ie.V.RenameRole(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                e
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t)
                  throw new Error("unable to rename role " + o + " " + t);
                var n = r.m_roles.findIndex(function(e) {
                  return e.role_id == o;
                });
                0 <= n && (r.m_roles[n].name = i);
              })
            );
          }),
          (e.prototype.ReorderRole = function(e, t) {
            var n = u.Init(ie.F);
            return (
              n.Body().set_chat_group_id(this.GetGroupID()),
              n.Body().set_role_id(e),
              n.Body().set_ordinal(t),
              ie.V.ReorderRole(
                Yo.ChatStore.CMInterface.GetServiceTransport(),
                n
              ).then(function(e) {
                return 1 == e.GetEResult();
              })
            );
          }),
          (e.prototype.SetRoleAction = function(e, t, n) {
            var o = this,
              i = this.GetRoleActions(e);
            if (i) {
              if (n == i.BCanPerformAction(t)) return;
              var r = i.BCanPerformAction(t);
              i.SetCanPerformAction(t, n);
              var a = u.Init(ie.G);
              return (
                a.Body().set_chat_group_id(this.GetGroupID()),
                a.Body().set_role_id(e),
                a.Body().set_actions(i.roleActions),
                ie.V.ReplaceRoleActions(
                  Yo.ChatStore.CMInterface.GetServiceTransport(),
                  a
                ).then(function(e) {
                  1 != e.GetEResult() &&
                    (i.SetCanPerformAction(t, r),
                    o.LOG("SetRoleAction error, restoring " + t + " to " + r));
                })
              );
            }
          }),
          (e.prototype.DeleteInviteLink = function(t, e) {
            var n = u.Init(ie.k);
            if (
              (n.Body().set_chat_group_id(this.GetGroupID()),
              n.Body().set_invite_code(t),
              e && "loaded" == e.loadingState)
            ) {
              var o = e.rgInviteLinks.findIndex(function(e) {
                return e.invite_code() == t;
              });
              0 <= o &&
                (e.rgInviteLinks.splice(o, 1),
                this.LOG("removed link " + e.rgInviteLinks));
            }
            return ie.V.DeleteInviteLink(
              Yo.ChatStore.CMInterface.GetServiceTransport(),
              n
            ).then(function(e) {
              return 1 == e.GetEResult();
            });
          }),
          (e.prototype.SetNotificationPreferences = function(e, t, n) {
            var o = u.Init(ie.P);
            return (
              o.Body().set_chat_group_id(this.m_ulGroupID),
              void 0 !== e &&
                ((this.m_eUserDesktopNotificationLevel = e),
                o
                  .Body()
                  .chat_group_preferences()
                  .set_desktop_notification_level(e),
                4 == e && this.m_bUnreadIndicatorMuted && (n = !1)),
              void 0 !== t &&
                ((this.m_eUserMobileNotificationLevel = t),
                o
                  .Body()
                  .chat_group_preferences()
                  .set_mobile_notification_level(t)),
              void 0 !== n &&
                ((this.m_bUnreadIndicatorMuted = n),
                o
                  .Body()
                  .chat_group_preferences()
                  .set_unread_indicator_muted(n)),
              ie.V.SetUserChatGroupPreferences(
                Yo.CMInterface.GetServiceTransport(),
                o
              ).then(function(e) {
                return 1 == e.GetEResult();
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_rtTimeJoined", void 0),
          R.c([m.observable], e.prototype, "m_rtLastAck", void 0),
          R.c([m.observable], e.prototype, "m_unOwnerAccountID", void 0),
          R.c([m.observable], e.prototype, "m_bFullStateLoaded", void 0),
          R.c([m.observable], e.prototype, "m_strName", void 0),
          R.c([m.observable], e.prototype, "m_strTagLine", void 0),
          R.c([m.observable], e.prototype, "m_strAvatarSHA", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_unWatchingBroadcastAccountID",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_eUserDesktopNotificationLevel",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_eUserMobileNotificationLevel",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_bUnreadIndicatorMuted", void 0),
          R.c([m.observable], e.prototype, "m_roles", void 0),
          R.c([m.observable], e.prototype, "m_rgGroupMembersSummary", void 0),
          R.c([m.observable], e.prototype, "m_cMemberSummaryCount", void 0),
          R.c([m.computed], e.prototype, "name", null),
          R.c([m.computed], e.prototype, "hasAvatar", null),
          R.c([m.computed], e.prototype, "avatar_url_small", null),
          R.c([m.computed], e.prototype, "avatar_url_medium", null),
          R.c([m.computed], e.prototype, "avatar_url_full", null),
          R.c([m.computed], e.prototype, "chatRoomList", null),
          R.c([m.computed], e.prototype, "textRoomList", null),
          R.c([m.computed], e.prototype, "voiceRoomList", null),
          R.c([m.computed], e.prototype, "hasVoiceRoom", null),
          R.c([m.computed], e.prototype, "HasUnreadChatMessage", null),
          R.c([m.computed], e.prototype, "HasUnreadMention", null),
          R.c([m.computed], e.prototype, "time_last_activity", null),
          R.c([m.action], e.prototype, "ChangeMemberRank", null),
          R.c([m.action], e.prototype, "ChangeMemberRoles", null),
          R.c([m.action], e.prototype, "SetInitialGroupState", null),
          R.c([m.action], e.prototype, "UpdateGroupStateFromSummary", null),
          R.c([m.action], e.prototype, "UpdateGroupState", null),
          R.c([m.action], e.prototype, "UnloadActiveGroupState", null),
          R.c([m.action], e.prototype, "UnloadGroupState", null),
          R.c([m.action], e.prototype, "UnloadAndResetGroupState", null),
          R.c([m.action], e.prototype, "UpdateChatRoomState", null),
          R.c([m.action], e.prototype, "UpdateUserState", null),
          R.c([m.action], e.prototype, "UpdateChatRoomHeaderState", null),
          R.c([m.action], e.prototype, "OnActivate", null),
          R.c([m.computed], e.prototype, "members_to_highlight_name", null),
          R.c([m.computed], e.prototype, "members_to_highlight", null),
          R.c([m.action], e.prototype, "AddCreatedRoom", null),
          R.c([m.action], e.prototype, "RemoveRoom", null),
          e
        );
      })(),
      Pt = (function(o) {
        function e(e, t) {
          var n = o.call(this) || this;
          return (
            (n.LOG = Te.create(function() {
              return n.GetUniqueID();
            }, !1)),
            (n.m_mapChatViews = new Map()),
            (n.m_bShowSettingsDialog = !1),
            (n.m_bShowBroadcast = !1),
            (n.m_bChatHidden = !1),
            (n.m_bShowGlobalChat = !1),
            (n.m_bMemberSearchActive = !1),
            (n.m_strMemberSearchString = ""),
            (n.m_tabset = e),
            (n.m_group = t),
            n.m_group.BIsValid() && n.SelectChat(n.m_group.GetDefaultChatID()),
            (n.m_disposeChatRooms = Object(m.autorun)(function() {
              var e = n.m_group.chatRoomList;
              n.m_selectedChatView &&
                e.length &&
                e.indexOf(n.m_selectedChatView.chat) < 0 &&
                n.SelectChat(n.m_group.GetDefaultChatID());
            })),
            n
          );
        }
        return (
          R.d(e, o),
          (e.prototype.GetGroup = function() {
            return this.m_group;
          }),
          (e.prototype.GetSelectedChatView = function() {
            return this.m_selectedChatView;
          }),
          (e.prototype.GetActiveChatView = function() {
            return this.GetPopoverChatView() || this.GetSelectedChatView();
          }),
          (e.prototype.GetPopoverChatView = function() {
            return this.m_popoverChatView;
          }),
          Object.defineProperty(e.prototype, "isBroadcastShown", {
            get: function() {
              return this.m_bShowBroadcast;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ShowBroadcast = function() {
            var e = this;
            this.SetChannelListCollapsed(!0, !1),
              this.SetMemberListCollapsed(!0, !1),
              (this.m_bShowBroadcast = !0),
              SetBackgroundTimeout(function() {
                e.GetActiveChatView() &&
                  e.GetActiveChatView().OnChatFrameChanged();
              }, 30);
          }),
          (e.prototype.HideBroadcast = function() {
            var e = this;
            (this.m_bShowBroadcast = !1),
              Yo.UIStore.SetTheaterMode(!1),
              SetBackgroundTimeout(function() {
                e.GetActiveChatView() &&
                  e.GetActiveChatView().OnChatFrameChanged();
              }, 30);
          }),
          (e.prototype.SetVerticalBroadcastChat = function(e) {
            this.m_bShowVerticalBroadcastChat = e;
          }),
          (e.prototype.ToggleTheaterModeBroadcastChat = function() {
            Yo.UIStore.SetTheaterMode(!Yo.UIStore.GetTheaterMode());
          }),
          (e.prototype.SetChatHidden = function(e) {
            this.m_bChatHidden = e;
          }),
          (e.prototype.SetGlobalBroadcastChatShown = function(e) {
            (this.m_bShowGlobalChat = e),
              this.GetActiveChatView() &&
                this.GetActiveChatView().OnChatFrameChanged();
          }),
          (e.prototype.SetLocalBroadcastId = function(e) {
            this.m_strLocalBroadcastId = e;
          }),
          (e.prototype.SetMemberListCollapsed = function(e, t) {
            if ((void 0 === t && (t = !0), t)) {
              this.m_bMemberListCollapsedOverride = void 0;
              var n = this.GetGroup();
              Yo.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(
                n.GetGroupID(),
                "bMemberListCollapsed",
                e
              );
            } else this.m_bMemberListCollapsedOverride = e;
          }),
          (e.prototype.SetChannelListCollapsed = function(e, t) {
            if ((void 0 === t && (t = !0), t)) {
              this.m_bChannelListCollapsedOverride = void 0;
              var n = this.GetGroup();
              Yo.ChatStore.ChatRoomGroupDisplayPrefs.SetChatRoomDisplayPref(
                n.GetGroupID(),
                "bChannelListCollapsed",
                e
              );
            } else this.m_bChannelListCollapsedOverride = e;
          }),
          (e.prototype.ClosePopoverChat = function() {
            this.m_popoverChatView &&
              (this.m_popoverChatView.OnViewClosed(),
              this.m_disposeActiveVoice && this.m_disposeActiveVoice(),
              (this.m_popoverChatView = null));
          }),
          (e.prototype.SelectChat = function(e) {
            var t = this,
              n = this.m_group.GetChatRoom(e);
            if (n) {
              if (
                n.GetVoiceAllowed() &&
                n != this.m_group.GetDefaultChatRoom()
              ) {
                if (this.m_popoverChatView && this.m_popoverChatView.chat == n)
                  return;
              } else if (
                (this.ClosePopoverChat(),
                this.m_selectedChatView && this.m_selectedChatView.chat == n)
              )
                return;
              n.GetVoiceAllowed() && this.m_group.GetDefaultChatRoom() != n
                ? (this.ClosePopoverChat(),
                  (this.m_popoverChatView = this.GetChatViewForRoom(n)),
                  this.m_disposeActiveVoice && this.m_disposeActiveVoice(),
                  (this.m_disposeActiveVoice = Object(m.when)(
                    function() {
                      return !n.BVoiceActive();
                    },
                    function() {
                      t.m_popoverChatView &&
                        t.m_popoverChatView.chat == n &&
                        t.ClosePopoverChat();
                    }
                  )))
                : (this.m_selectedChatView &&
                    this.m_selectedChatView.OnViewClosed(),
                  (this.m_selectedChatView = this.GetChatViewForRoom(n))),
                this.m_tabset.activeTab == this &&
                  this.m_tabset.is_popup_focused &&
                  this.OnTabActivate();
            }
          }),
          (e.prototype.SelectNextChannel = function() {
            var e = this.GetSelectedChannelIndex(),
              t = this.GetGroup().textRoomList,
              n = e >= t.length - 1 ? 0 : e + 1;
            this.SelectChat(t[n].GetRoomID());
          }),
          (e.prototype.SelectPreviousChannel = function() {
            var e = this.GetSelectedChannelIndex(),
              t = this.GetGroup().textRoomList,
              n = e <= 0 ? t.length - 1 : e - 1;
            this.SelectChat(t[n].GetRoomID());
          }),
          (e.prototype.GetSelectedChannelIndex = function() {
            var t = this.GetSelectedChatView().chat.GetRoomID();
            return this.GetGroup().textRoomList.findIndex(function(e) {
              return e.GetRoomID() === t;
            });
          }),
          (e.prototype.GetChatViewForRoom = function(e) {
            var t = e.GetRoomID(),
              n = this.m_mapChatViews.get(t);
            return (
              n
                ? this.LOG("reusing chat for " + t)
                : (n = new Xt(this.m_tabset, e)),
              n
            );
          }),
          (e.prototype.StartRoomRename = function(e) {
            this.m_ulRenameChatRoomID = e;
          }),
          (e.prototype.EndRoomRename = function() {
            this.m_ulRenameChatRoomID = "";
          }),
          (e.prototype.IsRoomRenameActive = function(e) {
            return (
              "" != this.m_ulRenameChatRoomID && this.m_ulRenameChatRoomID == e
            );
          }),
          (e.prototype.GetRenameRoomID = function() {
            return this.m_ulRenameChatRoomID;
          }),
          (e.prototype.OnTabClosed = function() {
            this.m_disposeActiveVoice && this.m_disposeActiveVoice(),
              this.m_disposeChatRooms && this.m_disposeChatRooms(),
              this.ClosePopoverChat(),
              this.GetSelectedChatView().OnViewClosed(),
              Yo.ChatStore.DecRefActiveChatRoomGroup(
                this.GetGroup().GetGroupID()
              );
          }),
          (e.prototype.IsVoiceActive = function() {
            return (
              Yo.ChatStore.VoiceChat.GetActiveChatRoomGroupID() ==
              this.m_group.GetGroupID()
            );
          }),
          (e.prototype.IsTabForChat = function(e) {
            if (!(e instanceof Tt)) return !1;
            var t = e;
            return !!this.m_group.GetChatRoom(t.GetRoomID());
          }),
          (e.prototype.GetUnreadMessageCount = function() {
            return this.m_group.HasUnreadChatMessage ? 1 : 0;
          }),
          (e.prototype.SetMemberSearchEnabled = function(e) {
            (this.m_bMemberSearchActive && this.m_strMemberSearchString == e) ||
              ((this.m_bMemberSearchActive = !0),
              (this.m_strMemberSearchString = e || ""));
          }),
          (e.prototype.ClearMemberSearch = function() {
            (this.m_bMemberSearchActive = !1),
              (this.m_strMemberSearchString = "");
          }),
          (e.prototype.IsMemberSearchActive = function() {
            return this.m_bMemberSearchActive;
          }),
          (e.prototype.GetMemberSearch = function() {
            return this.m_strMemberSearchString;
          }),
          Object.defineProperty(e.prototype, "normalizedMemberSearch", {
            get: function() {
              return this.m_strMemberSearchString.trim().toLocaleLowerCase();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "isMemberListExpanded", {
            get: function() {
              if (this.m_bMemberSearchActive) return !0;
              if (void 0 === this.m_bMemberListCollapsedOverride) {
                var e = this.GetGroup();
                return !Yo.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(
                  e.GetGroupID(),
                  "bMemberListCollapsed"
                );
              }
              return !this.m_bMemberListCollapsedOverride;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "isChannelListCollapsed", {
            get: function() {
              if (void 0 === this.m_bChannelListCollapsedOverride) {
                var e = this.GetGroup();
                return Yo.ChatStore.ChatRoomGroupDisplayPrefs.GetChatRoomDisplayPref(
                  e.GetGroupID(),
                  "bChannelListCollapsed"
                );
              }
              return this.m_bChannelListCollapsedOverride;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetTabName = function() {
            return this.m_group.name;
          }),
          (e.prototype.GetUniqueID = function() {
            return this.m_group.unique_id;
          }),
          (e.prototype.OnTabFocus = function() {
            var e = this.GetActiveChatView();
            e && e.OnFocus();
          }),
          (e.prototype.InternalOnTabActivate = function() {
            var e = this.GetActiveChatView();
            e && e.OnActivate();
          }),
          (e.prototype.OnTabDeactivate = function() {
            var e = this.GetActiveChatView();
            e && e.OnDeactivate();
          }),
          (e.prototype.IsChatRoom = function() {
            return !0;
          }),
          (e.prototype.GetChatView = function() {
            return this.GetActiveChatView();
          }),
          R.c([m.observable], e.prototype, "m_selectedChatView", void 0),
          R.c([m.observable], e.prototype, "m_popoverChatView", void 0),
          R.c([m.observable], e.prototype, "m_bShowSettingsDialog", void 0),
          R.c([m.observable], e.prototype, "m_ulRenameChatRoomID", void 0),
          R.c([m.observable], e.prototype, "m_bShowBroadcast", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bShowVerticalBroadcastChat",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_strLocalBroadcastId", void 0),
          R.c([m.observable], e.prototype, "m_bChatHidden", void 0),
          R.c([m.observable], e.prototype, "m_bShowGlobalChat", void 0),
          R.c([m.observable], e.prototype, "m_bMemberSearchActive", void 0),
          R.c([m.observable], e.prototype, "m_strMemberSearchString", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bMemberListCollapsedOverride",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_bChannelListCollapsedOverride",
            void 0
          ),
          R.c([m.action], e.prototype, "ShowBroadcast", null),
          R.c([m.action.bound], e.prototype, "HideBroadcast", null),
          R.c([m.action.bound], e.prototype, "SetVerticalBroadcastChat", null),
          R.c([m.action], e.prototype, "ToggleTheaterModeBroadcastChat", null),
          R.c([m.action], e.prototype, "SetChatHidden", null),
          R.c([m.action], e.prototype, "SetGlobalBroadcastChatShown", null),
          R.c([m.action], e.prototype, "SetLocalBroadcastId", null),
          R.c([m.action], e.prototype, "SetMemberListCollapsed", null),
          R.c([m.action], e.prototype, "SetChannelListCollapsed", null),
          R.c([m.action], e.prototype, "ClosePopoverChat", null),
          R.c([m.action], e.prototype, "SelectChat", null),
          R.c([m.action], e.prototype, "SelectNextChannel", null),
          R.c([m.action], e.prototype, "SelectPreviousChannel", null),
          R.c([m.action], e.prototype, "StartRoomRename", null),
          R.c([m.action], e.prototype, "EndRoomRename", null),
          R.c([m.action], e.prototype, "OnTabClosed", null),
          R.c([m.action], e.prototype, "SetMemberSearchEnabled", null),
          R.c([m.action], e.prototype, "ClearMemberSearch", null),
          R.c([m.computed], e.prototype, "normalizedMemberSearch", null),
          R.c([m.computed], e.prototype, "isMemberListExpanded", null),
          R.c([m.computed], e.prototype, "isChannelListCollapsed", null),
          e
        );
      })(ae),
      Ft = (function() {
        function e() {
          this.loadingState = "pending";
        }
        return (
          R.c([m.observable], e.prototype, "loadingState", void 0),
          R.c([m.observable], e.prototype, "rgBans", void 0),
          e
        );
      })(),
      Bt = { bMemberListCollapsed: void 0, bChannelListCollapsed: void 0 },
      Vt = "ChatRoomGroupDisplayPrefs",
      xt = (function() {
        function e() {
          this.m_mapDisplayPrefs = m.observable.map();
        }
        return (
          (e.prototype.Init = function(e) {
            var n = this;
            (this.m_SettingsStore = e),
              this.m_SettingsStore
                .GetObjectFromLocalStorageWhenReady(Vt)
                .then(function(e) {
                  for (var t in (n.m_mapDisplayPrefs.clear(), e.chatRoomGroups))
                    n.m_mapDisplayPrefs.set(t, e.chatRoomGroups[t]);
                });
          }),
          (e.prototype.GetChatRoomDisplayPref = function(e, t) {
            return (this.m_mapDisplayPrefs.get(e) || Bt)[t];
          }),
          (e.prototype.ToggleChatRoomDisplayPref = function(e, t) {
            var n = this.GetChatRoomDisplayPref(e, t);
            this.SetChatRoomDisplayPref(e, t, !n);
          }),
          (e.prototype.SetChatRoomDisplayPref = function(e, t, n) {
            var o = this.m_mapDisplayPrefs.get(e);
            (o && o[t] === n) ||
              (o ||
                (this.m_mapDisplayPrefs.set(e, Object.assign({}, Bt)),
                (o = this.m_mapDisplayPrefs.get(e))),
              (o[t] = n),
              this.WritePrefs());
          }),
          (e.prototype.WritePrefs = function() {
            this.m_SettingsStore.StoreObjectInLocalStorage(Vt, {
              chatRoomGroups: this.m_mapDisplayPrefs.toJSON()
            });
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            var t = Array.from(this.m_mapDisplayPrefs.values());
            e.ui_state().set_group_chat_left_col_collapsed(
              w.b(t, function(e) {
                return e.bChannelListCollapsed;
              })
            ),
              e.ui_state().set_group_chat_right_col_collapsed(
                w.b(t, function(e) {
                  return e.bMemberListCollapsed;
                })
              );
          }),
          R.c([m.action], e.prototype, "SetChatRoomDisplayPref", null),
          e
        );
      })(),
      Ut = (function() {
        function e() {
          this.m_mapAccountToExtra = m.observable.map();
        }
        return (
          (e.prototype.GetCurrentMemberSet = function() {
            var n = new Set();
            return (
              this.m_mapAccountToExtra.forEach(function(e, t) {
                n.add(t);
              }),
              n
            );
          }),
          Object.defineProperty(e.prototype, "unfiltered_count", {
            get: function() {
              return this.m_mapAccountToExtra.size;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_counts", {
            get: function() {
              for (
                var e = 0, t = 0, n = 0, o = this.member_list_unsorted;
                n < o.length;
                n++
              ) {
                var i = o[n];
                i.persona.is_online && (e++, i.persona.is_ingame && t++);
              }
              return { online: e, ingame: t };
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Clear = function() {
            this.m_mapAccountToExtra.clear();
          }),
          (e.prototype.AddMember = function(e, t) {
            void 0 === t && (t = void 0),
              this.HasMember(e) || this.m_mapAccountToExtra.set(e, t);
          }),
          (e.prototype.RemoveMember = function(e) {
            this.HasMember(e) && this.m_mapAccountToExtra.delete(e);
          }),
          (e.prototype.GetExtra = function(e) {
            return this.m_mapAccountToExtra.get(e);
          }),
          (e.prototype.HasMember = function(e) {
            return this.m_mapAccountToExtra.has(e);
          }),
          Object.defineProperty(e.prototype, "member_list", {
            get: function() {
              var e = this.member_list_unsorted.slice();
              return e.sort(ut.DefaultFriendSortComparator), e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "member_list_unsorted", {
            get: function() {
              var n = [];
              return (
                this.m_mapAccountToExtra.forEach(function(e, t) {
                  n.push(Yo.FriendStore.GetPlayer(t));
                }),
                n
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.computed], e.prototype, "unfiltered_count", null),
          R.c([m.computed], e.prototype, "member_counts", null),
          R.c([m.action], e.prototype, "Clear", null),
          R.c([m.action], e.prototype, "AddMember", null),
          R.c([m.action], e.prototype, "RemoveMember", null),
          R.c([m.computed], e.prototype, "member_list", null),
          R.c([m.computed], e.prototype, "member_list_unsorted", null),
          e
        );
      })(),
      jt = (function() {
        function e() {
          var c = this;
          (this.m_bEmoticonListRequested = !1),
            (this.m_bInitialized = !1),
            (this.m_rgEmoticons = []),
            (this.m_rgRecentEmoticons = void 0),
            (this.fnRecvEmoticonList = d(9331, g.h, function(e) {
              (c.m_rgEmoticons = []),
                (c.m_rgRecentEmoticons = void 0),
                (c.m_rtMostRecentEmoticon = void 0);
              for (
                var t = c.m_CMInterface.GetServerRTime32() - 604800,
                  n = 0,
                  o = e.Body().emoticons();
                n < o.length;
                n++
              ) {
                var i = o[n],
                  r = i.name(),
                  a = { name: r.substr(1, r.length - 2) },
                  s = a.name.toLowerCase();
                s != a.name && (a.name_normalized = s),
                  i.time_last_used() && (a.last_used = i.time_last_used()),
                  i.use_count() && (a.use_count = i.use_count()),
                  a.last_used ||
                    (i.time_received() &&
                      i.time_received() > t &&
                      ((a.time_received = i.time_received()),
                      (!c.m_rtMostRecentEmoticon ||
                        a.time_received > c.m_rtMostRecentEmoticon) &&
                        (c.m_rtMostRecentEmoticon = a.time_received))),
                  c.m_rgEmoticons.push(a);
              }
              (c.m_bInitialized = !0), (c.m_bEmoticonListRequested = !1);
            }));
        }
        return (
          (e.prototype.Init = function(e) {
            this.m_CMInterface = e;
          }),
          (e.GetEmoticonURL = function(e, t) {
            return t
              ? G.a.COMMUNITY_CDN_URL + "economy/emoticonlarge/" + e
              : G.a.COMMUNITY_CDN_URL + "economy/emoticon/" + e;
          }),
          (e.GetEmoticonReplaceRegex = function() {
            return e.sm_EmoticonRegex;
          }),
          (e.prototype.SearchEmoticons = function(e, t, n) {
            var o;
            void 0 === t && (t = 25),
              void 0 === n && (n = !0),
              this.m_bInitialized || this.RequestEmoticonList();
            var i = [];
            e = e.toLocaleLowerCase();
            for (var r = 0, a = this.recent_emoticons; r < a.length; r++) {
              var s = (p = a[r]).name_normalized || p.name;
              if (
                (!e || (n && s.startsWith(e)) || (!n && -1 !== s.indexOf(e))) &&
                (i.push({
                  name: p.name,
                  recent: !0,
                  new: !(p.last_used || !p.time_received)
                }),
                o || (o = new Set()),
                o.add(p.name),
                i.length >= t)
              )
                break;
            }
            if (i.length < t)
              for (var c = 0, l = this.m_rgEmoticons; c < l.length; c++) {
                var p;
                s = (p = l[c]).name_normalized || p.name;
                if (
                  (!e ||
                    (n && s.startsWith(e)) ||
                    (!n && -1 !== s.indexOf(e))) &&
                  (!o || !o.has(p.name)) &&
                  (i.push({ name: p.name, recent: !1, new: !1 }), i.length >= t)
                )
                  break;
              }
            return i;
          }),
          Object.defineProperty(e.prototype, "is_initialized", {
            get: function() {
              return this.m_bInitialized;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetTimeReceivedNewestEmoticon = function() {
            return (
              this.m_bInitialized || this.RequestEmoticonList(),
              this.m_rtMostRecentEmoticon
            );
          }),
          Object.defineProperty(e.prototype, "emoticon_list", {
            get: function() {
              return (
                this.m_bInitialized || this.RequestEmoticonList(),
                this.m_rgEmoticons
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "recent_emoticons", {
            get: function() {
              return (
                void 0 === this.m_rgRecentEmoticons &&
                  this.BuildRecentEmoticonList(),
                this.m_rgRecentEmoticons
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.TrackEmoticonUsage = function(e, t) {
            if (this.m_bInitialized) {
              for (
                var n, o = new Map(), i = /\[emoticon\]([^[]*)/g;
                (n = i.exec(e));

              ) {
                var r = o.get(n[1]) || 0;
                o.set(n[1], r + 1);
              }
              var a = !1;
              if (o.size) {
                if (void 0 !== this.m_rgRecentEmoticons)
                  for (
                    var s = 0, c = this.m_rgRecentEmoticons;
                    s < c.length;
                    s++
                  ) {
                    var l = c[s];
                    o.has(l.name) &&
                      ((l.last_used = t),
                      (l.use_count += o.get(l.name)),
                      o.delete(l.name),
                      l.time_received && ((a = !0), delete l.time_received));
                  }
                if (o.size)
                  for (var p = 0, u = this.m_rgEmoticons; p < u.length; p++) {
                    l = u[p];
                    o.has(l.name) &&
                      ((l.last_used = t),
                      (l.use_count += o.get(l.name)),
                      delete l.time_received,
                      void 0 !== this.m_rgRecentEmoticons &&
                        this.m_rgRecentEmoticons.push(l));
                  }
                if (
                  void 0 !== this.m_rgRecentEmoticons &&
                  (this.SortRecentEmoticons(), a)
                ) {
                  this.m_rtMostRecentEmoticon = void 0;
                  for (
                    var m = 0, d = this.m_rgRecentEmoticons;
                    m < d.length;
                    m++
                  ) {
                    !(l = d[m]).last_used &&
                      l.time_received &&
                      (!this.m_rtMostRecentEmoticon ||
                        l.time_received > this.m_rtMostRecentEmoticon) &&
                      (this.m_rtMostRecentEmoticon = l.time_received);
                  }
                }
              }
            }
          }),
          (e.prototype.RequestEmoticonList = function() {
            var t = this;
            !this.m_bEmoticonListRequested &&
              this.m_CMInterface &&
              ((this.m_bEmoticonListRequested = !0),
              this.m_CMInterface.RunWhenLoggedOn(function() {
                var e = u.Init(g.j, 9330);
                t.m_CMInterface.Send(e);
              }));
          }),
          (e.prototype.BuildRecentEmoticonList = function() {
            this.m_rgRecentEmoticons = [];
            for (
              var e = this.m_CMInterface.GetServerRTime32() - 604800,
                t = 0,
                n = this.m_rgEmoticons;
              t < n.length;
              t++
            ) {
              var o = n[t];
              (o.last_used || (o.time_received && o.time_received > e)) &&
                this.m_rgRecentEmoticons.push(o);
            }
            this.SortRecentEmoticons();
          }),
          (e.prototype.SortRecentEmoticons = function() {
            this.m_rgRecentEmoticons.sort(function(e, t) {
              return (
                (t.last_used || t.time_received) -
                (e.last_used || e.time_received)
              );
            }),
              (this.m_rgRecentEmoticons = this.m_rgRecentEmoticons.slice(
                0,
                50
              ));
          }),
          (e.sm_EmoticonRegex = new RegExp("([a-zA-Z0-9_\\-]+)", "g")),
          R.c([m.observable], e.prototype, "m_bInitialized", void 0),
          R.c([m.observable], e.prototype, "m_rtMostRecentEmoticon", void 0),
          R.c([m.action], e.prototype, "TrackEmoticonUsage", null),
          e
        );
      })(),
      Ht = "FriendRecentChats",
      Wt = (function() {
        function e(e) {
          var c = this;
          (this.m_rgFriendChats = []),
            (this.m_rtLastSessionUpdate = 0),
            (this.m_mapLastChatTimeByFriend = m.observable.map()),
            (this.m_mapRecentIgnoreTimeBeforeByFriend = m.observable.map()),
            (this.m_IncomingFriendMessageHandler = _(
              $e.f.IncomingMessageHandler,
              function(e) {
                var t = new E.a(e.Body().steamid_friend()),
                  n = Yo.FriendStore.GetPlayerIfCached(t.GetAccountID());
                if (!n) {
                  if (e.Body().low_priority()) return 41;
                  n = Yo.FriendStore.GetPlayer(t.GetAccountID());
                }
                if (1 == e.Body().chat_entry_type()) {
                  var o = e.Body().local_echo(),
                    i =
                      n.is_blocked || (e.Body().low_priority() && !n.is_friend),
                    r = o
                      ? c.m_ChatStore.FriendStore.self.persona.m_steamid
                      : t,
                    a = (s = c.GetFriendChat(
                      t.GetAccountID(),
                      !i
                    )).GetVisibilityState();
                  !(
                    i ||
                    o ||
                    Yo.FriendStore.BIsInvisibleMode() ||
                    Yo.FriendStore.GetUserDoNotDisturb()
                  ) &&
                    Yo.UIStore.ShowAndOrActivateChat(
                      Yo.GetDefaultBrowserContext(),
                      s,
                      !1
                    ),
                    s &&
                      (n.is_friend || 0 != a || s.SetShowNonFriendWarning(!0),
                      s.AddNewChatMsgAndNotify(
                        r.GetAccountID(),
                        e.Body().rtime32_server_timestamp(),
                        e.Body().ordinal(),
                        e.Body().message(),
                        e.Body().message_no_bbcode()
                      )),
                    c.m_mapLastChatTimeByFriend.set(
                      t.GetAccountID(),
                      e.Body().rtime32_server_timestamp()
                    );
                } else if (
                  2 == e.Body().chat_entry_type() &&
                  !e.Body().local_echo()
                ) {
                  var s;
                  (s = c.GetFriendChat(t.GetAccountID(), !1)) &&
                    s.OnFriendTypingNotification();
                }
                return 1;
              }
            )),
            (this.m_AckMessageEchoHandler = _(
              $e.f.NotifyAckMessageEchoHandler,
              function(e) {
                var t = new E.a(e.Body().steamid_partner()),
                  n = c.GetFriendChat(t.GetAccountID());
                return (
                  n && n.UpdateLastAckTimeFromServer(e.Body().timestamp()), 1
                );
              }
            )),
            (this.m_ChatStore = e);
        }
        return (
          (e.prototype.GetFriendChat = function(e, t) {
            void 0 === t && (t = !0);
            for (var n = 0, o = this.m_rgFriendChats; n < o.length; n++) {
              var i = o[n];
              if (i.accountid_partner == e) return i;
            }
            if (!t) return null;
            var r = new zt(e, this.m_ChatStore, this.m_ChatStore.CMInterface);
            return this.m_rgFriendChats.push(r), r;
          }),
          (e.prototype.OnLogon = function() {
            var o = this;
            this.LoadFriendMessageSessions(),
              Yo.SettingsStore.GetObjectFromLocalStorageWhenReady(Ht).then(
                function(e) {
                  for (var t in (o.m_mapRecentIgnoreTimeBeforeByFriend.clear(),
                  e.ignoretimes)) {
                    var n = parseInt(t, 10);
                    o.m_mapRecentIgnoreTimeBeforeByFriend.set(
                      n,
                      e.ignoretimes[t]
                    );
                  }
                }
              );
          }),
          (e.prototype.RestoreStatePostDisconnect = function() {
            this.LoadFriendMessageSessions();
            for (var e = 0, t = this.m_rgFriendChats; e < t.length; e++) {
              t[e].OnConnectionRestored();
            }
          }),
          (e.prototype.GetServiceTransport = function() {
            return this.m_ChatStore.CMInterface.GetServiceTransport();
          }),
          (e.prototype.LoadFriendMessageSessions = function() {
            var r = this,
              e = u.Init($e.e);
            e.Body().set_lastmessage_since(this.m_rtLastSessionUpdate),
              $e.g
                .GetActiveMessageSessions(this.GetServiceTransport(), e)
                .then(function(e) {
                  r.m_rtLastSessionUpdate = e.Body().timestamp();
                  for (
                    var t = 0, n = e.Body().message_sessions();
                    t < n.length;
                    t++
                  ) {
                    var o = n[t];
                    if (
                      (r.m_mapLastChatTimeByFriend.set(
                        o.accountid_friend(),
                        o.last_view()
                      ),
                      0 < o.unread_message_count())
                    ) {
                      var i = r.GetFriendChat(o.accountid_friend(), !0);
                      i &&
                        i.InitUnreadMessageCountFromServer(
                          o.unread_message_count(),
                          o.last_view(),
                          o.last_message()
                        );
                    }
                  }
                });
          }),
          (e.prototype.GetFriendsWithUnreadMessages = function(e) {
            for (
              var t = [], n = 0, o = this.m_rgFriendChats;
              n < o.length;
              n++
            ) {
              var i = o[n];
              0 < i.unread_message_count &&
                (!e || i.GetVisibilityState(e) < 2) &&
                !i.is_blocked_friend &&
                t.push(i);
            }
            return (
              t.sort(function(e, t) {
                return e.time_last_message - t.time_last_message;
              }),
              t
            );
          }),
          (e.prototype.GetUnfilteredFriendsWithUnreadMessages = function() {
            for (
              var e = [], t = 0, n = this.m_rgFriendChats;
              t < n.length;
              t++
            ) {
              var o = n[t];
              0 < o.unread_message_count && !o.is_blocked_friend && e.push(o);
            }
            return (
              e.sort(function(e, t) {
                return e.time_last_message - t.time_last_message;
              }),
              e
            );
          }),
          Object.defineProperty(e.prototype, "RecentChatCutoffDuration", {
            get: function() {
              return 3600;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClearRecentChatsForFriend = function(e) {
            this.m_mapRecentIgnoreTimeBeforeByFriend.set(
              e,
              Yo.GetServerRTime32()
            ),
              this.WriteRecentChatsPrefs();
          }),
          (e.prototype.WriteRecentChatsPrefs = function() {
            var n = this,
              o = Yo.GetServerRTime32() - this.RecentChatCutoffDuration;
            this.m_mapRecentIgnoreTimeBeforeByFriend.forEach(function(e, t) {
              e < o && n.m_mapRecentIgnoreTimeBeforeByFriend.delete(t);
            }),
              Yo.SettingsStore.StoreObjectInLocalStorage(Ht, {
                ignoretimes: this.m_mapRecentIgnoreTimeBeforeByFriend.toJS()
              });
          }),
          Object.defineProperty(e.prototype, "GetRecentlyChattingFriends", {
            get: function() {
              var i = this,
                r = [],
                a = Yo.GetServerRTime32() - this.RecentChatCutoffDuration;
              return (
                this.m_mapLastChatTimeByFriend.forEach(function(e, t) {
                  if (a <= e) {
                    var n = i.m_mapRecentIgnoreTimeBeforeByFriend.get(t);
                    if (!n || n < e) {
                      var o = Yo.FriendStore.GetFriend(t);
                      o && r.push(o);
                    }
                  }
                }),
                r.sort(ut.DefaultFriendSortComparator),
                r
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetUnreadFriendMessageCount = function(e) {
            for (
              var t = 0, n = 0, o = this.m_rgFriendChats;
              n < o.length;
              n++
            ) {
              var i = o[n];
              0 < i.unread_message_count &&
                (!e || i.GetVisibilityState(e) < 2) &&
                !i.is_blocked_friend &&
                (t += i.unread_message_count);
            }
            return t;
          }),
          (e.prototype.GetFriendLastChatTime = function(e) {
            return this.m_mapLastChatTimeByFriend.get(e) || 0;
          }),
          R.c([m.observable], e.prototype, "m_rgFriendChats", void 0),
          R.c([m.action], e.prototype, "ClearRecentChatsForFriend", null),
          R.c([m.computed], e.prototype, "GetRecentlyChattingFriends", null),
          e
        );
      })(),
      zt = (function(i) {
        function e(e, t, n) {
          var o = i.call(this, t.FriendStore, t, n) || this;
          return (
            (o.m_iClearFriendIsTypingInterval = void 0),
            (o.m_bFriendIsTyping = !1),
            (o.m_ChatMsgTradeRequest = null),
            (o.m_bNeedsNonFriendWarning = !1),
            (o.m_unAccountIDFriend = e),
            o
          );
        }
        return (
          R.d(e, i),
          Object.defineProperty(e.prototype, "unread_message_count", {
            get: function() {
              var e = this.m_ChatStore.VoiceChat.BPartnerHasRequestedAndIsInOneOnOneChat(
                this.m_unAccountIDFriend
              );
              return (
                (e = e && !this.BVoiceActive()),
                this.m_cUnreadChatMessages + (e ? 1 : 0)
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "VoiceChatStore", {
            get: function() {
              return this.m_ChatStore.VoiceChat;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetShowNonFriendWarning = function(e) {
            this.m_bNeedsNonFriendWarning = e;
          }),
          (e.prototype.GetShowNonFriendWarning = function() {
            var e =
              this.m_bNeedsNonFriendWarning &&
              !Yo.FriendStore.BApprovedNonFriendMessages(
                this.accountid_partner
              );
            if (e) {
              var t = Yo.FriendStore.GetFriend(this.accountid_partner);
              e = !t || !t.is_friend;
            }
            return e;
          }),
          (e.prototype.GetMessagesFromTimeRange = function(e, t, n, o, i) {
            var r = this,
              a = u.Init($e.b);
            return (
              a
                .Body()
                .set_steamid1(
                  this.m_CMInterface.steamid.ConvertTo64BitString()
                ),
              a
                .Body()
                .set_steamid2(
                  E.a
                    .InitFromAccountID(this.m_unAccountIDFriend)
                    .ConvertTo64BitString()
                ),
              a.Body().set_count(Je.k_LoadMoreMessageCount),
              a.Body().set_bbcode_format(!0),
              a.Body().set_rtime32_start_time(e),
              a.Body().set_start_ordinal(t),
              a.Body().set_time_last(n),
              a.Body().set_ordinal_last(o),
              console.log(
                this.unique_id +
                  " friend trying to load " +
                  i +
                  " messages in range " +
                  e +
                  ":" +
                  t +
                  " - " +
                  n +
                  ":" +
                  o
              ),
              $e.g
                .GetRecentMessages(
                  this.m_ChatStore.CMInterface.GetServiceTransport(),
                  a
                )
                .then(function(e) {
                  var t = e.GetEResult();
                  if (1 != t) throw t;
                  return {
                    messages: r.GetMessagesFromResponse(e),
                    moreAvailable: e.Body().more_available()
                  };
                })
            );
          }),
          (e.prototype.GetMessagesFromResponse = function(e) {
            for (
              var t = e.Body().messages(), n = [], o = t.length - 1;
              0 <= o;
              o--
            ) {
              var i = t[o],
                r = i.accountid();
              n.push(new Ue(r, i.timestamp(), i.ordinal(), i.message() || ""));
            }
            return n;
          }),
          (e.prototype.GetBBCodeParser = function() {
            return this.m_ChatStore.FriendChatBBCodeParser;
          }),
          (e.prototype.AckChatMsgOnServer = function(e) {
            var t = u.Init($e.a);
            t
              .Body()
              .set_steamid_partner(
                E.a
                  .InitFromAccountID(this.accountid_partner)
                  .ConvertTo64BitString()
              ),
              t.Body().set_timestamp(e),
              $e.g.AckMessage(this.m_CMInterface.GetServiceTransport(), t);
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              var e = this.chat_partner;
              return e ? e.display_name : void 0;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "unique_id", {
            get: function() {
              return "f" + this.accountid_partner;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsVoiceAllowed = function() {
            return (
              !!this.chat_partner.is_friend &&
              (0 != this.chat_partner.persona.m_ePersonaState &&
                !!this.chat_partner.is_online_in_beta)
            );
          }),
          (e.prototype.GetVoiceNotAllowedReason = function() {
            return this.chat_partner.is_friend
              ? 0 == this.chat_partner.persona.m_ePersonaState
                ? Object(re.b)(
                    "#VoiceChat_Unavailable_NotOnline",
                    this.chat_partner.display_name
                  )
                : this.chat_partner.is_online_in_beta
                  ? null
                  : Object(re.b)(
                      "#VoiceChat_Unavailable_NotInBeta",
                      this.chat_partner.display_name
                    )
              : Object(re.b)(
                  "#VoiceChat_Unavailable_NotFriend",
                  this.chat_partner.display_name
                );
          }),
          (e.prototype.ToggleVoiceChat = function() {
            return (
              this.ChatStore.VoiceChat.IsVoiceActiveForFriend(
                this.accountid_partner
              )
                ? this.ChatStore.VoiceChat.OnUserEndVoiceChat()
                : this.ChatStore.VoiceChat.InitiateFriendChat(
                    this.accountid_partner
                  ),
              !0
            );
          }),
          (e.prototype.BVoiceActive = function() {
            return this.ChatStore.VoiceChat.IsVoiceActiveForFriend(
              this.accountid_partner
            );
          }),
          Object.defineProperty(e.prototype, "is_blocked_friend", {
            get: function() {
              return this.chat_partner.is_blocked;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SendChatMessage = function(e) {
            var n = this;
            if (!this.m_CMInterface.logged_on) return !1;
            this.chat_partner.is_friend ||
              Yo.FriendStore.SetApprovedNonFriendMessages(
                this.chat_partner.accountid
              );
            var t = Me.EscapeBBCode(e),
              o = this.AppendLocalEchoChatMsg(t),
              i = u.Init($e.d);
            return (
              i.Body().set_chat_entry_type(1),
              i.Body().set_message(t),
              i
                .Body()
                .set_steamid(
                  E.a
                    .InitFromAccountID(this.accountid_partner)
                    .ConvertTo64BitString()
                ),
              i.Body().set_contains_bbcode(!0),
              $e.g
                .SendMessage(this.m_CMInterface.GetServiceTransport(), i)
                .then(function(e) {
                  if (1 == e.GetEResult()) {
                    (o.rtTimestamp = e.Body().server_timestamp()),
                      (o.unOrdinal = e.Body().ordinal()),
                      n.OnUserChatEcho(o.rtTimestamp, o.unOrdinal);
                    var t = e.Body().modified_message();
                    t &&
                      Object(m.runInAction)(function() {
                        n.m_ChatStore.EmoticonStore.TrackEmoticonUsage(
                          t,
                          o.rtTimestamp
                        ),
                          (o.strMessage = t);
                      }),
                      o.OnServerAcknowledged();
                  } else
                    switch (e.GetEResult()) {
                      case 15:
                        o.eErrorSending = Fe.NotFriends;
                        break;
                      case 84:
                        o.eErrorSending = Fe.RateLimitExceeded;
                        break;
                      default:
                        o.eErrorSending = Fe.Generic;
                    }
                })
                .catch(function() {
                  o.eErrorSending = Fe.Generic;
                }),
              !(this.m_tsLastSentTypingNotification = void 0)
            );
          }),
          (e.prototype.OnTyping = function() {
            if (
              !this.m_tsLastSentTypingNotification ||
              1e4 < performance.now() - this.m_tsLastSentTypingNotification
            ) {
              this.m_tsLastSentTypingNotification = performance.now();
              var e = u.Init($e.d);
              e.Body().set_chat_entry_type(2),
                e
                  .Body()
                  .set_steamid(
                    E.a
                      .InitFromAccountID(this.accountid_partner)
                      .ConvertTo64BitString()
                  ),
                $e.g.SendMessage(this.m_CMInterface.GetServiceTransport(), e);
            }
          }),
          Object.defineProperty(e.prototype, "is_friend_typing", {
            get: function() {
              return this.m_bFriendIsTyping;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnFriendTypingNotification = function() {
            var e = this;
            this.m_bFriendIsTyping || (this.m_bFriendIsTyping = !0),
              void 0 !== this.m_iClearFriendIsTypingInterval &&
                window.clearInterval(this.m_iClearFriendIsTypingInterval),
              (this.m_iClearFriendIsTypingInterval = window.setTimeout(
                function() {
                  (e.m_iClearFriendIsTypingInterval = void 0),
                    e.ClearFriendIsTypingState();
                },
                11e3
              ));
          }),
          (e.prototype.PlayFriendMessageSound = function() {
            Yo.FriendStore.GetUserDoNotDisturb() ||
              Yo.AudioPlaybackManager.PlayAudioURL(
                G.a.COMMUNITY_CDN_URL +
                  "public/sounds/webui/ui_steam_message_old_smooth.m4a"
              );
          }),
          (e.prototype.OnReceivedNewMessage = function(e, t, n, o) {
            if (!e.BIsLocalEcho() && e.unAccountID != this.self.accountid) {
              if (
                (this.ClearFriendIsTypingState(),
                t < 2 &&
                  (this.is_blocked_friend || Yo.FriendStore.BIsInvisibleMode()))
              )
                return;
              if (
                Yo.NotificationManager.BNotificationsPermitted() &&
                this.chat_partner.BShowMessageNotification() &&
                t < 4 &&
                !Yo.FriendStore.GetUserDoNotDisturb()
              ) {
                var i = {
                  title: Object(re.b)(
                    "#Friend_Chat_SentMessage",
                    this.chat_partner.display_name
                  ),
                  body: n,
                  tag: "message_" + this.chat_partner.accountid,
                  steamid: this.chat_partner.persona.m_steamid.ConvertTo64BitString()
                };
                (i = this.DecorateNotification(e, i, n, o)).body &&
                  (this.GetShowNonFriendWarning() &&
                    Yo.SettingsStore.BClientHasFeatureOrOnWeb(
                      "NonFriendMessageHandling"
                    ) &&
                    (i.body = ""),
                  Yo.NotificationManager.DisplayNotificationFromFriend(
                    this.chat_partner,
                    i
                  ),
                  this.m_bHasUnreadPriorityChatMessages ||
                    ((this.m_bHasUnreadPriorityChatMessages = !0),
                    Yo.FriendStore.UpdateUnreadMessagesGlobal()));
              }
              this.chat_partner.BPlayMessageSound() &&
                t < 4 &&
                this.PlayFriendMessageSound(),
                0 == Yo.SettingsStore.FriendsSettings.nChatFlashMode &&
                  t < 4 &&
                  !Yo.FriendStore.GetUserDoNotDisturb() &&
                  Yo.UIStore.FlashChatWindow(this);
            }
          }),
          (e.prototype.ClearFriendIsTypingState = function() {
            void 0 !== this.m_iClearFriendIsTypingInterval &&
              (window.clearInterval(this.m_iClearFriendIsTypingInterval),
              (this.m_iClearFriendIsTypingInterval = void 0)),
              (this.m_bFriendIsTyping = !1);
          }),
          (e.prototype.PopulateCommitFileUploadFormData = function(e) {
            e.set(
              "friend_steamid",
              E.a
                .InitFromAccountID(this.accountid_partner)
                .ConvertTo64BitString()
            );
          }),
          (e.prototype.GetMember = function(e) {
            return e == this.m_unAccountIDFriend
              ? this.chat_partner
              : e == this.self.accountid ? this.self : void 0;
          }),
          Object.defineProperty(e.prototype, "accountid_partner", {
            get: function() {
              return this.m_unAccountIDFriend;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "chat_partner", {
            get: function() {
              return Yo.FriendStore.GetPlayer(this.m_unAccountIDFriend);
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.AddNewTradeRequestAndNotify = function(e, t, n, o) {
            var i = new We(e, t, n, o);
            this.InternalAppendChatMsg(i), (this.m_ChatMsgTradeRequest = i);
            var r = Object(re.b)(
              "#ChatRoom_TradeRequest_Recipient_Pending",
              this.chat_partner.display_name
            );
            this.CheckShouldNotify(i, r, r);
          }),
          (e.prototype.GetTradeRequest = function() {
            return this.m_ChatMsgTradeRequest;
          }),
          (e.prototype.CancelTradeRequest = function(e) {
            this.m_ChatMsgTradeRequest &&
              this.m_ChatMsgTradeRequest.MarkAsCancelled(e);
          }),
          (e.prototype.MarkTradeRequestDeclined = function() {
            this.m_ChatMsgTradeRequest &&
              this.m_ChatMsgTradeRequest.MarkAsDeclined();
          }),
          (e.prototype.MarkTradeRequestAccepted = function(e) {
            this.m_ChatMsgTradeRequest &&
              this.m_ChatMsgTradeRequest.MarkAsAccepted(e);
          }),
          (e.prototype.ViewerNeedsApproval = function(e) {
            var t =
              '[broadcastviewrequest requestid="' +
              e +
              '"][/broadcastviewrequest]';
            this.InternalAppendChatMsg(
              new Ue(this.chat_partner.accountid, Yo.GetServerRTime32(), 0, t)
            ),
              Yo.FriendStore.GetUserDoNotDisturb() ||
                Yo.NotificationManager.DisplayNotificationFromFriend(
                  this.chat_partner,
                  {
                    title: "",
                    body: Object(re.b)(
                      "#Chat_BroadcastViewRequest_Notification"
                    ),
                    tag: "message_" + this.chat_partner.accountid,
                    steamid: this.chat_partner.persona.m_steamid.ConvertTo64BitString()
                  }
                );
          }),
          R.c([m.observable], e.prototype, "m_bFriendIsTyping", void 0),
          R.c([m.observable], e.prototype, "m_bNeedsNonFriendWarning", void 0),
          R.c([m.action], e.prototype, "ToggleVoiceChat", null),
          R.c([m.action], e.prototype, "SendChatMessage", null),
          R.c(
            [M.a, Object(lt.a)(100)],
            e.prototype,
            "PlayFriendMessageSound",
            null
          ),
          R.c([m.action], e.prototype, "ClearFriendIsTypingState", null),
          R.c([m.action], e.prototype, "AddNewTradeRequestAndNotify", null),
          R.c([m.action], e.prototype, "CancelTradeRequest", null),
          R.c([m.action], e.prototype, "MarkTradeRequestDeclined", null),
          R.c([m.action], e.prototype, "MarkTradeRequestAccepted", null),
          R.c([m.action], e.prototype, "ViewerNeedsApproval", null),
          e
        );
      })(Je);
    function qt(e, t) {
      if (!e || !t) return [];
      for (var n = [], o = e.values(), i = o.next(); !i.done; )
        t(i.value) && n.push(i.value), (i = o.next());
      return n;
    }
    var Kt,
      Yt,
      Jt = (function() {
        function e(e) {
          var s = this;
          (this.LOG = Te.create(function() {
            return "chatstore";
          }, !1)),
            (this.m_EmoticonStore = new jt()),
            (this.m_FriendChatStore = new Wt(this)),
            (this.m_InviteStore = new ue(this)),
            (this.m_GameInviteStore = new _e()),
            (this.m_ChatRoomGroupDisplayPrefs = new xt()),
            (this.m_EmbedStore = new be()),
            (this.m_mapChatGroups = m.observable.map()),
            (this.m_mapActiveChatGroupsToRefCount = m.observable.map()),
            (this.m_mapClanChatsByClanID = new Map()),
            (this.m_bReceivedChatGroupList = !1),
            (this.m_bReadyToRender = !1),
            (this.m_bSendingActiveGroups = !1),
            (this.m_bSendActiveGroupsQueued = !1),
            (this.m_IncomingChatRoomMessageHandler = _(
              ie.U.NotifyIncomingChatMessageHandler,
              function(e) {
                var t = e.Body(),
                  n = s.FindChatRoom(t.chat_group_id(), t.chat_id());
                if (!n) return 2;
                var o = new E.a(t.steamid_sender());
                if (0 != (t.server_message().message() || 0))
                  n.AddNewServerMsg(
                    o.GetAccountID(),
                    t.timestamp(),
                    t.ordinal(),
                    t.server_message().message(),
                    t.server_message().string_param(),
                    t.server_message().accountid_param()
                  );
                else {
                  var i = t.mentions(),
                    r = null;
                  i &&
                    ((r = {}),
                    i.mention_all() && (r.mention_all = !0),
                    i.mention_here() && (r.mention_here = !0),
                    i.mention_accountids() &&
                      -1 !==
                        i
                          .mention_accountids()
                          .indexOf(s.m_FriendStore.self.accountid) &&
                      (r.mention_user = !0)),
                    n.AddNewChatMsgAndNotify(
                      o.GetAccountID(),
                      t.timestamp(),
                      t.ordinal(),
                      t.message(),
                      t.message_no_bbcode(),
                      r
                    );
                }
                return 1;
              }
            )),
            (this.m_ChatMessageModifiedHandler = _(
              ie.U.NotifyChatMessageModifiedHandler,
              function(e) {
                var t = e.Body(),
                  n = s.FindChatRoom(t.chat_group_id(), t.chat_id());
                if (!n) return 2;
                for (
                  var o = [], i = 0, r = e.Body().messages();
                  i < r.length;
                  i++
                ) {
                  var a = r[i];
                  a.deleted &&
                    o.push({
                      rtTimestamp: a.server_timestamp(),
                      unOrdinal: a.ordinal()
                    });
                }
                return n.UpdateChatMessageDeletedState(o, Le.Deleting), 1;
              }
            )),
            (this.m_IncomingChatRoomHeaderStateChangeHandler = h(
              ie.U.NotifyChatRoomHeaderStateChangeHandler,
              function(e) {
                var t = e
                    .Body()
                    .header_state()
                    .chat_group_id(),
                  n = s.m_mapChatGroups.get(t);
                return (
                  n && n.UpdateChatRoomHeaderState(e.Body().header_state()), 1
                );
              }
            )),
            (this.m_IncomingStateChangeHandler = h(
              ie.U.NotifyMemberStateChangeHandler,
              function(e) {
                var t = e.Body().chat_group_id(),
                  n = s.m_mapChatGroups.get(t);
                return (
                  n &&
                    n.OnUserStateChange(e.Body().member(), e.Body().change()),
                  1
                );
              }
            )),
            (this.m_IncomingChatRoomGroupRoomsChangeHandler = h(
              ie.U.NotifyChatRoomGroupRoomsChangeHandler,
              function(e) {
                var t = e.Body(),
                  n = s.m_mapChatGroups.get(t.chat_group_id());
                return n && n.OnRoomStateChange(t), 1;
              }
            )),
            (this.m_IncomingChatGroupUserStateChangedHandler = h(
              ie.U.NotifyChatGroupUserStateChangedHandler,
              function(e) {
                var t = e.Body(),
                  n = t.chat_group_id(),
                  o = t.user_action();
                switch (o) {
                  case 1:
                    var i = s.AddJoinedChatRoomGroup(
                      t.group_summary(),
                      t.user_chat_group_state()
                    );
                    Yo.UIStore.ShowAndOrActivateChatRoomGroup(qo, i, !1);
                    break;
                  case 2:
                  case 3:
                  case 10:
                    Yo.VoiceStore.GetActiveChatRoomGroupID() == n &&
                      Yo.VoiceStore.OnUserEndVoiceChat();
                    var r = (i = s.GetChatRoomGroup(n)) ? i.name : void 0;
                    s.RemoveChatRoomGroup(n),
                      r &&
                        (3 == o
                          ? Yo.ShowAlert(
                              Object(re.b)("#Alert_YouWereKickedTitle"),
                              Object(re.b)("#Alert_YouWereKickedDescription", r)
                            )
                          : 10 == o &&
                            Yo.ShowAlert(
                              Object(re.b)("#Alert_YouWereBannedTitle"),
                              Object(re.b)("#Alert_YouWereBannedDescription", r)
                            ));
                    break;
                  case 7:
                  case 0:
                    i = s.GetChatRoomGroup(n);
                    AssertMsg(
                      i,
                      "Got state change for ChatRoomGroup we don't know about"
                    ),
                      i && i.UpdateUserState(t.user_chat_group_state());
                    break;
                  case 4:
                    break;
                  default:
                    AssertMsg(
                      !1,
                      "Don't know how to handle state change of type " +
                        Object(ie.ab)(o) +
                        " "
                    );
                }
                return 1;
              }
            )),
            (this.m_AckChatMessageEchoHandler = _(
              ie.U.NotifyAckChatMessageEchoHandler,
              function(e) {
                var t = e.Body().chat_group_id(),
                  n = e.Body().chat_id(),
                  o = e.Body().timestamp(),
                  i = s.GetChatRoomGroup(t);
                if (!i) return 2;
                if (n) {
                  var r = i.GetChatRoom(n);
                  if (!r) return 11;
                  r.UpdateLastAckTimeFromServer(o);
                } else i.UpdateLastAckTimeFromServer(o);
                return 1;
              }
            )),
            (this.m_FriendStore = e);
        }
        return (
          (e.prototype.Init = function(e, t) {
            var n = this;
            (this.m_CMInterface = e),
              this.m_EmoticonStore.Init(e),
              (this.m_VoiceChat = t),
              (this.m_ChatRoomBBCodeParser = new Me(
                Yo.GetChatRoomBBCodeDictionary(),
                G.a.IN_MOBILE ? void 0 : we
              )),
              (this.m_FriendChatBBCodeParser = new Me(
                Yo.GetFriendChatBBCodeDictionary(),
                G.a.IN_MOBILE ? void 0 : we
              )),
              (this.m_NotificationBBCodeParser = new Oe(
                Yo.GetNotificationBBCodeDictionary()
              )),
              this.m_ChatRoomGroupDisplayPrefs.Init(Yo.SettingsStore),
              this.m_EmbedStore.Init();
            var o = !1;
            return (
              this.m_CMInterface.AddOnLogonCallback(function() {
                n.LoadMyChatRooms(),
                  o
                    ? n.RestoreStatePostDisconnect()
                    : (n.m_FriendChatStore.OnLogon(), (o = !0)),
                  n.m_GameInviteStore.Init();
              }, 102),
              new Promise(function(e, t) {
                n.m_fnOnReadyToRender = e;
              })
            );
          }),
          (e.prototype.SetReadyToRender = function() {
            this.m_bReadyToRender ||
              ((this.m_bReadyToRender = !0),
              this.m_fnOnReadyToRender &&
                (this.m_fnOnReadyToRender(),
                (this.m_fnOnReadyToRender = void 0)));
          }),
          (e.prototype.RestoreStatePostDisconnect = function() {
            this.m_FriendChatStore.RestoreStatePostDisconnect(),
              this.m_mapChatGroups.forEach(function(e) {
                return e.OnConnectionRestored();
              }),
              this.SendActiveChatRoomGroupsToServer();
          }),
          (e.prototype.LoadMyChatRooms = function() {
            var a = this,
              e = u.Init(ie.t);
            ie.V.GetMyChatRoomGroups(
              this.m_CMInterface.GetServiceTransport(),
              e
            )
              .then(function(r) {
                Object(m.runInAction)(function() {
                  1 != r.GetEResult() && !0;
                  for (
                    var e = 0, t = r.Body().chat_room_groups();
                    e < t.length;
                    e++
                  ) {
                    var n = t[e],
                      o = n.group_summary().chat_group_id();
                    if (o) {
                      var i = a.m_mapChatGroups.get(o);
                      i || ((i = new At(a, o)), a.m_mapChatGroups.set(o, i)),
                        i.SetInitialGroupState(n.group_summary()),
                        i.UpdateUserState(n.user_chat_group_state()),
                        a.OnGroupAdded(i),
                        i.BHasEverBeenAcked() || Yo.UIStore.ShowUnackedGroup(i);
                    } else !0;
                  }
                  a.SetReadyToRender(), (a.m_bReceivedChatGroupList = !0);
                });
              })
              .catch(function(e) {
                console.error("Failed to load chat rooms from server", e),
                  a.SetReadyToRender();
              });
          }),
          (e.prototype.OnGroupAdded = function(e) {
            e.GetClanID() &&
              (this.m_mapClanChatsByClanID.set(e.GetClanID(), e.GetGroupID()),
              this.m_FriendStore.ClanStore.SetClanChatGroupID(
                e.GetClanID(),
                e.GetGroupID()
              ));
          }),
          (e.prototype.OnChatRoomActivated = function(e) {
            e.GetGroup().OnActivate();
          }),
          (e.prototype.JoinAndShowChatRoomGroup = function(e, t, n) {
            var o = this.GetChatRoomGroup(t);
            o && o.BIsCurrentUserAMember()
              ? Yo.UIStore.ShowAndOrActivateChatRoomGroup(e, o, n)
              : this.m_InviteStore.JoinChatGroup(t, null, e);
          }),
          (e.prototype.AddCreatedChatRoomGroup = function(e, t, n, o) {
            if (!this.m_mapChatGroups.has(t)) {
              var i = new At(this, t);
              this.m_mapChatGroups.set(t, i),
                i.UpdateGroupState(n),
                i.UpdateUserState(o),
                this.OnGroupAdded(i),
                Yo.UIStore.ShowAndOrActivateChatRoomGroup(e, i, !0);
            }
          }),
          (e.prototype.AddKnownChatRoomGroup = function(e, t) {
            var n = e.chat_group_id();
            if (this.m_mapChatGroups.has(n)) {
              (o = this.m_mapChatGroups.get(n)).SetInitialGroupState(e);
            } else {
              var o = new At(this, n);
              this.m_mapChatGroups.set(n, o),
                o.SetInitialGroupState(e),
                t && o.UpdateUserState(t),
                this.OnGroupAdded(o);
            }
          }),
          (e.prototype.AddJoinedChatRoomGroup = function(e, t) {
            var n = t.chat_group_id(),
              o = this.m_mapChatGroups.get(n);
            return (
              o || ((o = new At(this, n)), this.m_mapChatGroups.set(n, o)),
              e instanceof ie.b
                ? o.UpdateGroupState(e)
                : o.SetInitialGroupState(e),
              this.OnGroupAdded(o),
              o.UpdateUserState(t),
              o
            );
          }),
          (e.prototype.RemoveChatRoomGroup = function(e) {
            var t = this.m_mapChatGroups.get(e);
            if (t) {
              var n = this.m_mapChatGroups.get(e);
              n && Yo.UIStore.CloseTabByID(n.unique_id),
                this.GetRefCountActiveChatRoomGroup(e) <= 0 &&
                  t.UnloadAndResetGroupState();
            }
          }),
          (e.prototype.FindChatRoom_Deprecated = function(n) {
            var o = null;
            return (
              this.m_mapChatGroups.forEach(function(e) {
                var t = e.GetChatRoom(n);
                t && (o = t);
              }),
              o
            );
          }),
          (e.prototype.FindChatRoom = function(e, t) {
            var n = this.m_mapChatGroups.get(e);
            return n ? n.GetChatRoom(t) : null;
          }),
          Object.defineProperty(e.prototype, "chat_group_list_ready", {
            get: function() {
              return this.m_bReceivedChatGroupList;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "FriendStore", {
            get: function() {
              return this.m_FriendStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "CMInterface", {
            get: function() {
              return this.m_CMInterface;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "VoiceChat", {
            get: function() {
              return this.m_VoiceChat;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ChatRoomBBCodeParser", {
            get: function() {
              return this.m_ChatRoomBBCodeParser;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "FriendChatBBCodeParser", {
            get: function() {
              return this.m_FriendChatBBCodeParser;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "NotificationBBCodeParser", {
            get: function() {
              return this.m_NotificationBBCodeParser;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "FriendChatStore", {
            get: function() {
              return this.m_FriendChatStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "EmoticonStore", {
            get: function() {
              return this.m_EmoticonStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "InviteStore", {
            get: function() {
              return this.m_InviteStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "GameInviteStore", {
            get: function() {
              return this.m_GameInviteStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "EmbedStore", {
            get: function() {
              return this.m_EmbedStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ChatRoomGroupDisplayPrefs", {
            get: function() {
              return this.m_ChatRoomGroupDisplayPrefs;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetActiveVoiceChat = function() {
            var e = this.m_VoiceChat.GetActiveVoiceChatID();
            if ("" != e) {
              if ((t = this.FindChatRoom_Deprecated(e))) return t;
            } else {
              var t,
                n = this.m_VoiceChat.GetActiveOneOnOneVoiceChatAccountID();
              if (0 != n) if ((t = this.GetFriendChat(n, !1))) return t;
            }
          }),
          (e.prototype.GetActiveVoiceChannelName = function() {
            var e = this.GetActiveVoiceChat();
            return null != e ? e.name : "";
          }),
          (e.prototype.GetFriendChat = function(e, t) {
            return (
              void 0 === t && (t = !0),
              e == this.FriendStore.self.accountid
                ? null
                : this.m_FriendChatStore.GetFriendChat(e, t)
            );
          }),
          (e.prototype.GetChatRoomGroup = function(e) {
            return this.m_mapChatGroups.get(e);
          }),
          Object.defineProperty(e.prototype, "currentChatRoomGroups", {
            get: function() {
              return qt(this.m_mapChatGroups, function(e) {
                return e.BIsCurrentUserAMember();
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "ClanChatRooms", {
            get: function() {
              return qt(this.m_mapChatGroups, function(e) {
                return e.BIsClanChatRoom();
              });
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetRefCountActiveChatRoomGroup = function(e) {
            var t = this.m_mapActiveChatGroupsToRefCount.get(e);
            return void 0 === t && (t = 0), t;
          }),
          (e.prototype.IncRefActiveChatRoomGroup = function(e, t) {
            var n = this.m_mapActiveChatGroupsToRefCount.get(e);
            return (
              void 0 === n && (n = 0),
              (n += 1),
              this.m_mapActiveChatGroupsToRefCount.set(e, n),
              1 == n && t && this.SendActiveChatRoomGroupsToServer(),
              n
            );
          }),
          (e.prototype.DecRefActiveChatRoomGroup = function(e) {
            var t = this.m_mapActiveChatGroupsToRefCount.get(e),
              n = void 0 !== t && 0 < t;
            if (
              (AssertMsg(
                n,
                "Attempting to DecRef a Chat Group that has no existing references. Doing nothing."
              ),
              !n)
            )
              return 0;
            if ((t -= 1) <= 0) {
              this.m_mapActiveChatGroupsToRefCount.delete(e);
              var o = this.m_mapChatGroups.get(e);
              o && o.UnloadActiveGroupState(),
                this.SendActiveChatRoomGroupsToServer();
            } else this.m_mapActiveChatGroupsToRefCount.set(e, t);
            return t;
          }),
          (e.prototype.OnRestorePopupsComplete = function() {
            0 < this.m_mapActiveChatGroupsToRefCount.size &&
              this.SendActiveChatRoomGroupsToServer();
          }),
          (e.prototype.SendActiveChatRoomGroupsToServer = function() {
            var a = this;
            if (this.m_bSendingActiveGroups)
              this.m_bSendActiveGroupsQueued = !0;
            else {
              var s = [],
                o = u.Init(ie.N);
              this.m_mapActiveChatGroupsToRefCount.forEach(function(e, t) {
                if (
                  (AssertMsg(
                    0 < e,
                    "SendActiveChatRoomGroupsToServer found invalid ref count for chat group."
                  ),
                  !(e <= 0))
                ) {
                  o.Body().add_chat_group_ids(t);
                  var n = a.m_mapChatGroups.get(t);
                  (n && n.readyToRender) ||
                    o.Body().add_chat_groups_data_requested(t),
                    n && n.BIsClanChatRoom() && s.push(n.GetClanID());
                }
              });
              var t = void 0,
                c = function(e) {
                  G.a.IN_CLIENT && SteamClient.WebChat.SetActiveClanChatIDs(s),
                    e && void 0 !== t && ClearBackgroundTimeout(t),
                    (a.m_bSendingActiveGroups = !1),
                    a.m_bSendActiveGroupsQueued &&
                      a.SendActiveChatRoomGroupsToServer();
                };
              (this.m_bSendActiveGroupsQueued = !1),
                (this.m_bSendingActiveGroups = !0),
                ie.V.SetSessionActiveChatRoomGroups(
                  this.m_CMInterface.GetServiceTransport(),
                  o
                ).then(function(e) {
                  if (1 == e.GetEResult()) {
                    for (
                      var t = !1, n = 0, o = e.Body().chat_states();
                      n < o.length;
                      n++
                    ) {
                      var i = o[n],
                        r = a.m_mapChatGroups.get(
                          i.header_state().chat_group_id()
                        );
                      if (r)
                        try {
                          r.UpdateGroupState(i),
                            r.BIsClanChatRoom() &&
                              -1 === s.indexOf(r.GetClanID()) &&
                              s.push(r.GetClanID());
                        } catch (e) {
                          (t = !0),
                            console.error(
                              "exception processing group update for group " +
                                r.GetGroupID(),
                              e
                            );
                        }
                    }
                    c(!t);
                  }
                }),
                (t = SetBackgroundTimeout(function() {
                  (a.m_bSendActiveGroupsQueued = !0), c(!0);
                }, 1e4));
            }
          }),
          (e.prototype.CreateChatRoomGroup = function(n, e, t, o) {
            var i = this;
            void 0 === o && (o = {});
            var r = o.unBroadcastAccountId,
              a = u.Init(ie.e);
            a.Body().set_name(e);
            for (var s = 0, c = t; s < c.length; s++) {
              var l = c[s];
              a.Body().add_steamid_invitees(l);
            }
            return (
              r && a.Body().set_watching_broadcast_accountid(r),
              ie.V.CreateChatRoomGroup(
                this.m_CMInterface.GetServiceTransport(),
                a
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw t;
                return (
                  i.AddCreatedChatRoomGroup(
                    n,
                    e.Body().chat_group_id(),
                    e.Body().state(),
                    e.Body().user_chat_state()
                  ),
                  e.Body().chat_group_id()
                );
              })
            );
          }),
          (e.prototype.LeaveChatRoomGroup = function(e, n) {
            var o = this,
              t = u.Init(ie.y);
            return (
              t.Body().set_chat_group_id(n),
              ie.V.LeaveChatRoomGroup(
                this.m_CMInterface.GetServiceTransport(),
                t
              ).then(function(e) {
                var t = e.GetEResult();
                if (1 != t) throw t;
                o.RemoveChatRoomGroup(n);
              })
            );
          }),
          (e.prototype.FindNamelessChatGroupWithFriends = function(e) {
            if (0 == e.length) return null;
            for (
              var t = e.map(function(e) {
                  return new E.a(e).GetAccountID();
                }),
                n = 0,
                o = Array.from(this.m_mapChatGroups.values());
              n < o.length;
              n++
            ) {
              var i = o[n];
              if (
                !i.IsNamedGroupChat() &&
                i.BRoomContainsJustTheseFriendsAndSelf(t)
              )
                return i;
            }
            return null;
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            e.metrics().set_group_chat_count(
              w.b(Array.from(this.m_mapChatGroups.values()), function(e) {
                return e.BIsCurrentUserAMember();
              })
            ),
              this.m_ChatRoomGroupDisplayPrefs.FillInChatUsabilityMetrics(e);
          }),
          (e.prototype.GetChatRoomsWithUnreadPriorityMessages = function() {
            var n = [],
              o = this;
            return (
              this.m_mapActiveChatGroupsToRefCount.forEach(function(e, t) {
                o.m_mapChatGroups
                  .get(t)
                  .GetChatRoomsWithUnreadPriorityMessages(n);
              }),
              n
            );
          }),
          R.c([m.observable], e.prototype, "m_bReceivedChatGroupList", void 0),
          R.c([jo], e.prototype, "JoinAndShowChatRoomGroup", null),
          R.c([m.action], e.prototype, "AddCreatedChatRoomGroup", null),
          R.c([m.action], e.prototype, "AddKnownChatRoomGroup", null),
          R.c([m.action], e.prototype, "AddJoinedChatRoomGroup", null),
          R.c([m.action], e.prototype, "RemoveChatRoomGroup", null),
          R.c([m.computed], e.prototype, "currentChatRoomGroups", null),
          R.c([m.computed], e.prototype, "ClanChatRooms", null),
          e
        );
      })(),
      Xt = (function(o) {
        function e(e, t) {
          var n = o.call(this) || this;
          return (
            (n.m_rgOnChatFrameChangedCallbacks = []),
            (n.m_bScrolledToBottom = !0),
            (n.m_scrollTop = -1),
            (n.m_scrollHeight = -1),
            (n.m_clientHeight = 1),
            (n.m_textEntryFocusCallbacks = new D()),
            (n.m_fileUploadImageWidth = 0),
            (n.m_fileUploadImageHeight = 0),
            (n.m_tabset = e),
            (n.m_chat = t),
            n.m_tabset && n.m_chat.AddChatView(n),
            (n.m_strTextEntry = ""),
            n
          );
        }
        return (
          R.d(e, o),
          (e.prototype.GetTabName = function() {
            return this.m_chat.name;
          }),
          (e.prototype.GetUniqueID = function() {
            return this.m_chat.unique_id;
          }),
          (e.prototype.OnTabFocus = function() {
            this.OnFocus();
          }),
          (e.prototype.InternalOnTabActivate = function() {
            this.OnActivate();
          }),
          (e.prototype.OnTabDeactivate = function() {
            this.OnDeactivate();
          }),
          (e.prototype.OnTabClosed = function() {
            this.OnViewClosed();
          }),
          (e.prototype.IsChatRoom = function() {
            return this.m_chat instanceof Tt;
          }),
          (e.prototype.IsFriendChat = function() {
            return this.m_chat instanceof zt;
          }),
          (e.prototype.IsVoiceActive = function() {
            return this.m_chat.BVoiceActive();
          }),
          (e.prototype.GetUnreadMessageCount = function() {
            return this.m_chat.unread_message_count;
          }),
          (e.prototype.IsTabForChat = function(e) {
            return this.m_chat == e;
          }),
          (e.prototype.GetChatView = function() {
            return this;
          }),
          (e.prototype.OnViewClosed = function() {
            this.m_chat.RemoveChatView(this);
          }),
          Object.defineProperty(e.prototype, "chat", {
            get: function() {
              return this.m_chat;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsInBrowserContext = function(e) {
            var t = this.m_tabset.GetBrowserContext();
            return e.m_nBrowserID == t.m_nBrowserID && e.m_unPID == t.m_unPID;
          }),
          (e.prototype.GetVisibilityState = function() {
            if (!this.m_tabset || !this.m_tabset.is_popup_active) return 0;
            var e = void 0;
            return (
              this.m_tabset.activeTab &&
                (e = this.m_tabset.activeTab.GetChatView()),
              e == this && this.m_tabset.is_popup_visible
                ? this.m_tabset.is_popup_focused
                  ? this.m_bScrolledToBottom && !Yo.IdleTracker.BIsUserIdle(60)
                    ? 4
                    : 3
                  : 2
                : 1
            );
          }),
          Object.defineProperty(e.prototype, "lastScrollHeight", {
            get: function() {
              return this.m_scrollHeight;
            },
            set: function(e) {
              this.m_scrollHeight = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "lastScrollTop", {
            get: function() {
              return this.m_scrollTop;
            },
            set: function(e) {
              this.m_scrollTop = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "lastClientHeight", {
            get: function() {
              return this.m_clientHeight;
            },
            set: function(e) {
              this.m_clientHeight = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_scrolled_to_bottom", {
            get: function() {
              return this.m_bScrolledToBottom;
            },
            set: function(e) {
              !this.m_bScrolledToBottom && e && this.m_chat.OnActivate(),
                (this.m_bScrolledToBottom = e);
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "text_entry", {
            get: function() {
              return this.m_strTextEntry;
            },
            set: function(e) {
              this.m_strTextEntry = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "file_upload", {
            get: function() {
              return this.m_fileUpload;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "file_upload_data_url", {
            get: function() {
              return this.m_fileUploadDataURL;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "file_image_width", {
            get: function() {
              return this.m_fileUploadImageWidth;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "file_image_height", {
            get: function() {
              return this.m_fileUploadImageHeight;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.CheckActivationAndNotifyChat = function() {
            this.m_bScrolledToBottom && this.m_chat.OnActivate();
          }),
          (e.prototype.OnActivate = function() {
            this.CheckActivationAndNotifyChat(), this.FocusTextInput();
          }),
          (e.prototype.OnDeactivate = function() {
            this.m_chat.OnDeactivate();
          }),
          (e.prototype.OnFocus = function() {
            this.CheckActivationAndNotifyChat();
          }),
          (e.prototype.FocusTextInput = function() {
            this.m_textEntryFocusCallbacks.Dispatch();
          }),
          (e.prototype.AddOnChatFrameChangedCallback = function(e) {
            this.m_rgOnChatFrameChangedCallbacks.push(e);
          }),
          (e.prototype.RemoveOnChatFrameChangedCallback = function(e) {
            w.c(this.m_rgOnChatFrameChangedCallbacks, e);
          }),
          (e.prototype.OnChatFrameChanged = function() {
            for (
              var e = 0, t = this.m_rgOnChatFrameChangedCallbacks;
              e < t.length;
              e++
            ) {
              (0, t[e])();
            }
          }),
          (e.prototype.StripExifMetadata = function(t, e) {
            var n = new DataView(t),
              o = 0,
              i = 0,
              r = [],
              a = 0;
            if (65496 == n.getUint16(o)) {
              o += 2;
              var s = n.getUint16(o);
              for (o += 2; o < n.byteLength && o < 131072; ) {
                if (65505 == s)
                  (r[a] = { recess: i, offset: o - 2 }),
                    (i = o + n.getUint16(o)),
                    a++;
                else if (65498 == s) break;
                (o += n.getUint16(o)), (s = n.getUint16(o)), (o += 2);
              }
              if (0 < r.length) {
                var c = new Array();
                return (
                  r.forEach(function(e) {
                    c.push(t.slice(e.recess, e.offset));
                  }, this),
                  c.push(t.slice(i)),
                  new Blob(c, { type: e })
                );
              }
            }
            return null;
          }),
          (e.prototype.SetFileToUpload = function(a) {
            var s = this;
            if (!a)
              return (
                (this.m_fileUpload = null),
                (this.m_fileUploadDataURL = null),
                (this.m_fileUploadImageWidth = 0),
                void (this.m_fileUploadImageHeight = 0)
              );
            if (10485760 < a.size)
              this.chat.SetUploadFileError(
                3,
                Object(re.b)("#Chat_Settings_Error_ChatFileTooLarge", a.name)
              );
            else {
              var e = a.name
                .split(".")
                .pop()
                .toLowerCase();
              if (
                -1 !=
                [
                  "jpg",
                  "jpeg",
                  "png",
                  "gif",
                  "webm",
                  "mpg",
                  "mp4",
                  "mpeg",
                  "ogv"
                ].indexOf(e)
              ) {
                var c = new FileReader();
                (c.onload = function(e) {
                  var t = a,
                    n = c.result,
                    o = s.StripExifMetadata(n, a.type);
                  if (o) {
                    var i = o;
                    (i.lastModifiedDate = a.lastModifiedDate),
                      (i.name = a.name),
                      (t = i);
                  }
                  if (
                    ((s.m_fileUpload = t),
                    (s.m_fileUploadDataURL = URL.createObjectURL(t)),
                    (s.m_fileUploadImageWidth = 0),
                    (s.m_fileUploadImageHeight = 0) == a.type.indexOf("image"))
                  ) {
                    var r = new Image();
                    (r.src = s.m_fileUploadDataURL),
                      (r.onload = function(e) {
                        (s.m_fileUploadImageWidth = r.width),
                          (s.m_fileUploadImageHeight = r.height);
                      });
                  }
                }),
                  c.readAsArrayBuffer(a);
              } else
                this.chat.SetUploadFileError(
                  4,
                  Object(re.b)(
                    "#Chat_Settings_Error_ChatFileTypeNotSupported",
                    a.name
                  )
                );
            }
          }),
          (e.prototype.UploadFile = function(e) {
            var t = this.m_fileUpload,
              n = this.m_fileUploadImageWidth,
              o = this.m_fileUploadImageHeight;
            this.chat.BeginFileUpload(t, n, o, e), this.SetFileToUpload(null);
          }),
          (e.prototype.RegisterForTextEntryFocus = function(e) {
            return this.m_textEntryFocusCallbacks.Register(e);
          }),
          (e.prototype.BVoiceActive = function() {
            return this.m_chat.BVoiceActive();
          }),
          R.c([m.observable], e.prototype, "m_bScrolledToBottom", void 0),
          R.c([m.observable], e.prototype, "m_fileUpload", void 0),
          R.c([m.observable], e.prototype, "m_fileUploadDataURL", void 0),
          e
        );
      })(ae),
      Qt = (function() {
        function e() {
          (this.enabled = !1),
            (this.locked = !1),
            (this.features = 0),
            (this.allowallapps = !1),
            (this.baselist = void 0),
            (this.customlist = void 0);
        }
        return (
          R.c([m.observable], e.prototype, "enabled", void 0),
          R.c([m.observable], e.prototype, "locked", void 0),
          R.c([m.observable], e.prototype, "features", void 0),
          R.c([m.observable], e.prototype, "allowallapps", void 0),
          R.c([m.observable], e.prototype, "baselist", void 0),
          R.c([m.observable], e.prototype, "customlist", void 0),
          e
        );
      })(),
      Zt = (function() {
        return function() {
          (this.broadcastid = "0"),
            (this.nViewers = 0),
            (this.nRequests = 0),
            (this.bIsBroadcasting = !1),
            (this.bIsRecordingDesktop = !1),
            (this.bBroadcastCapable = !1);
        };
      })(),
      $t = (function() {
        return function() {
          (this.nKeyCode = 0),
            (this.bAltKey = !1),
            (this.bShiftKey = !1),
            (this.bCtrlKey = !1),
            (this.bMetaKey = !1);
        };
      })(),
      en = (function() {
        return function() {
          (this.InGameOverlayScreenshotHotKey = new $t()),
            (this.InGameOverlayShortcutKey = new $t());
        };
      })();
    (Kt = en || (en = {})),
      (Yt = (function() {
        return function() {};
      })()),
      (Kt.FriendsSettings = Yt),
      (Kt.DefaultFriendsSettings = function() {
        return {
          bNotifications_ShowIngame: !0,
          bNotifications_ShowOnline: !1,
          bNotifications_ShowMessage: !0,
          bNotifications_EventsAndAnnouncements: !0,
          bSounds_PlayIngame: !1,
          bSounds_PlayOnline: !1,
          bSounds_PlayMessage: !0,
          bSounds_EventsAndAnnouncements: !1,
          bAlwaysNewChatWindow: !1,
          bForceAlphabeticFriendSorting: !1,
          nChatFlashMode: 0,
          bRememberOpenChats: !0,
          bCompactQuickAccess: !1,
          bCompactFriendsList: !1,
          bNotifications_ShowChatRoomNotification: !0,
          bSounds_PlayChatRoomNotification: !0,
          bHideOfflineFriendsInTagGroups: !1,
          bHideCategorizedFriends: !1,
          bCategorizeInGameFriendsByGame: !0,
          nChatFontSize: 2,
          b24HourClock: !1,
          bDoNotDisturbMode: !1,
          bDisableEmbedInlining: !1,
          bSignIntoFriends: !0,
          featuresEnabled: {}
        };
      });
    var tn, nn, on, rn;
    ((nn = tn || (tn = {}))[(nn.k_EClientUINotificationGroupChatMessage = 1)] =
      "k_EClientUINotificationGroupChatMessage"),
      (nn[(nn.k_EClientUINotificationFriendChatMessage = 2)] =
        "k_EClientUINotificationFriendChatMessage"),
      (nn[(nn.k_EClientUINotificationFriendPersonaState = 3)] =
        "k_EClientUINotificationFriendPersonaState"),
      ((rn = on || (on = {}))[(rn.k_EComputerActiveStateInvalid = 0)] =
        "k_EComputerActiveStateInvalid"),
      (rn[(rn.k_EComputerActiveStateActive = 1)] =
        "k_EComputerActiveStateActive"),
      (rn[(rn.k_EComputerActiveStateIdle = 2)] = "k_EComputerActiveStateIdle");
    var an,
      sn,
      cn = (function() {
        return function() {};
      })();
    function ln(e, t, n) {
      return Math.max(t, Math.min(n, e));
    }
    function pn(e, t, n, o, i) {
      return o + (i - o) * (e - t) / (n - t);
    }
    function un() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
    }
    function mn(e) {
      var t = Math.floor(e / 3600),
        n = Math.floor(e / 60) % 60,
        o = Math.floor(e) % 60,
        i = o.toString();
      o < 10 && (i = "0" + i);
      var r = n.toString();
      return (
        n < 10 && 0 < t && (r = "0" + r), (0 < t ? t + ":" : "") + r + ":" + i
      );
    }
    function dn(e, t) {
      var n = e.getElementsByTagName("MPD");
      return n && 1 == n.length ? n[0] : null;
    }
    function hn(e, t) {
      for (var n = 0; n < e.children.length; n++) {
        var o = e.children[n];
        if (o.tagName == t) return o;
      }
      return null;
    }
    function _n(e, t) {
      var n = e.getAttribute(t);
      if (!n) return null;
      var o = new Date(n);
      return "[object Date]" === Object.prototype.toString.call(o) ? o : null;
    }
    function fn(e, t) {
      var n = e.getAttribute(t);
      if (!n) return null;
      var o = 0,
        i = n.match(/(\d*)H/);
      return (
        i && (o += 60 * parseFloat(i[1]) * 60),
        (i = n.match(/(\d*)M/)) && (o += 60 * parseFloat(i[1])),
        (i = n.match(/(\d*\.?\d*)S/)) && (o += parseFloat(i[1])),
        o
      );
    }
    function gn(e, t) {
      var n = e.getAttribute(t);
      return n ? parseInt(n) : null;
    }
    function bn(e, t) {
      var n = e.getAttribute(t);
      return n || "";
    }
    function vn(e, t, n) {
      return (e = (e = e.replace("$RepresentationID$", t)).replace(
        "$Number$",
        n.toString()
      ));
    }
    function Sn(e) {
      return (
        0 == e.rgRoles.length ||
        0 <=
          e.rgRoles.findIndex(function(e) {
            return "main" == e;
          })
      );
    }
    function yn(e) {
      return e
        ? e.segmentTemplate.nDuration / e.segmentTemplate.nTimeScale * 1e3
        : 0;
    }
    function Cn(e, t) {
      var n = yn(e);
      return Math.floor(t / n) + 1;
    }
    ((sn = an || (an = {}))[(sn.k_EPending = 0)] = "k_EPending"),
      (sn[(sn.k_EAccepted = 1)] = "k_EAccepted"),
      (sn[(sn.k_ERejected = 2)] = "k_ERejected");
    var In,
      On,
      En = (function() {
        function e() {
          (this.m_nMinBufferTime = 0),
            (this.m_bHasProtectedRepresentations = !1),
            (this.m_dtAvailabilityStartTime = null),
            (this.m_dtPublishTime = null),
            (this.m_nMinimumUpdatePeriod = 0),
            (this.m_nTimeShiftBufferDepth = 0),
            (this.m_dtMediaPresentationDuration = null),
            (this.m_strBaseURL = ""),
            (this.m_strStatsLink = ""),
            (this.m_strStalledLink = ""),
            (this.m_strEventLogLink = ""),
            (this.m_rgPeriods = null),
            (this.m_tsLiveContentStart = 0);
        }
        return (
          (e.prototype.GetType = function() {
            return this.m_strType;
          }),
          (e.prototype.GetMinimumUpdatePeriod = function() {
            return this.m_nMinimumUpdatePeriod;
          }),
          (e.prototype.GetAvailabilityStartTime = function() {
            return this.m_dtAvailabilityStartTime;
          }),
          (e.prototype.GetPeriods = function() {
            return this.m_rgPeriods;
          }),
          (e.prototype.GetBaseURL = function() {
            return this.m_strBaseURL;
          }),
          (e.prototype.GetLiveContentStart = function() {
            return this.m_tsLiveContentStart;
          }),
          (e.prototype.GetTimeShiftBufferDepth = function() {
            return this.m_nTimeShiftBufferDepth;
          }),
          (e.prototype.GetMinBufferTime = function() {
            return this.m_nMinBufferTime;
          }),
          (e.prototype.GetAdaptationByTrackID = function(e) {
            if (!this.m_rgPeriods || 0 == this.m_rgPeriods.length) return null;
            for (
              var t = 0, n = this.m_rgPeriods[0].rgAdaptationSets;
              t < n.length;
              t++
            ) {
              var o = n[t];
              if (e == o.strID) return o;
            }
            return null;
          }),
          (e.prototype.GetVideoAdaption = function() {
            for (
              var e = 0, t = this.m_rgPeriods[0].rgAdaptationSets;
              e < t.length;
              e++
            ) {
              var n = t[e];
              if (n.bContainsVideo) return n;
            }
            return null;
          }),
          (e.prototype.GetPeriodDuration = function(e) {
            return e < this.m_rgPeriods.length && this.m_rgPeriods[e].nDuration
              ? this.m_rgPeriods[e].nDuration
              : 0;
          }),
          (e.prototype.GetLowestRepresentation = function(e) {
            var t = this.GetAdaptationByTrackID(e);
            if (!t) return null;
            for (
              var n = t.rgRepresentations[0], o = 0, i = t.rgRepresentations;
              o < i.length;
              o++
            ) {
              var r = i[o];
              r.nBandwidth < n.nBandwidth && (n = r);
            }
            return n;
          }),
          (e.prototype.GetStatsLink = function() {
            return this.m_strStatsLink;
          }),
          (e.prototype.GetStalledLink = function() {
            return this.m_strStalledLink;
          }),
          (e.prototype.GetEventLink = function() {
            return this.m_strEventLogLink;
          }),
          (e.prototype.SetLiveContentStart = function(e) {
            this.m_tsLiveContentStart = e;
          }),
          (e.prototype.ParseRepresentation = function(e, t) {
            var n = t,
              o = {
                strID: bn(e, "id"),
                strMimeType: bn(e, "mimeType"),
                strCodecs: bn(e, "codecs"),
                nBandwidth: gn(e, "bandwidth")
              };
            if (n.bContainsVideo) {
              if (
                ((o.nWidth = gn(e, "width")),
                (o.nHeight = gn(e, "height")),
                (o.nFrameRate = gn(e, "frameRate")),
                !(o.strID && o.strMimeType && o.strCodecs && o.nBandwidth))
              )
                return un("MPD - Representation Video Data Missing"), null;
            } else if (n.bContainsAudio) {
              o.nAudioSamplingRate = gn(e, "audioSamplingRate");
              var i = hn(e, "AudioChannelConfiguration");
              if (
                (i && (o.nAudioChannels = gn(i, "value")),
                o.nAudioChannels || (o.nAudioChannels = 2),
                !(
                  o.strID &&
                  o.strMimeType &&
                  o.strCodecs &&
                  o.nBandwidth &&
                  o.nAudioSamplingRate &&
                  o.nAudioChannels
                ))
              )
                return un("MPD - Representation Audio Data Missing"), null;
            }
            return o;
          }),
          (e.prototype.BParse = function(e) {
            var t = new DOMParser().parseFromString(e, "application/xml"),
              n = dn(t);
            if (!n) return !1;
            var o = n.getAttribute("type");
            if (
              ((this.m_nMinBufferTime = fn(n, "minBufferTime")),
              (this.m_bHasProtectedRepresentations = !1),
              "dynamic" == o)
            ) {
              if (
                ((this.m_strType = "dynamic"),
                (this.m_dtAvailabilityStartTime = _n(
                  n,
                  "availabilityStartTime"
                )),
                (this.m_dtPublishTime = _n(n, "publishTime")),
                (this.m_nMinimumUpdatePeriod = fn(n, "minimumUpdatePeriod")),
                (this.m_nTimeShiftBufferDepth = fn(n, "timeShiftBufferDepth")),
                !(
                  this.m_dtAvailabilityStartTime &&
                  this.m_dtPublishTime &&
                  this.m_nMinimumUpdatePeriod &&
                  this.m_nMinBufferTime &&
                  this.m_nTimeShiftBufferDepth
                ))
              )
                return !1;
            } else {
              if ("static" != o) return un("MPD - Unknown type"), !1;
              if (
                ((this.m_strType = "static"),
                (this.m_dtMediaPresentationDuration = _n(
                  n,
                  "mediaPresentationDuration"
                )),
                !this.m_nMinBufferTime || !this.m_dtMediaPresentationDuration)
              )
                return (
                  un("MPD - Missing Buffer Time or Presentation Duration"), !1
                );
            }
            var i = hn(n, "BASEURL");
            i && (this.m_strBaseURL = i.textContent);
            var r = hn(n, "Analytics");
            r &&
              ((this.m_strStatsLink = bn(r, "statslink")),
              (this.m_strStalledLink = bn(r, "stalledlink")),
              (this.m_strEventLogLink = bn(r, "eventlink")));
            var a = t.getElementsByTagName("Period");
            if (0 == a.length) return !1;
            var s = a[0],
              c = {
                strID: bn(s, "id"),
                nStart: fn(s, "start"),
                nDuration: fn(s, "duration"),
                rgAdaptationSets: []
              };
            if (!c.strID || null === c.nStart)
              return un("MPD - Missing Period Information."), !1;
            (this.m_rgPeriods = []), this.m_rgPeriods.push(c);
            for (
              var l, p, u, m = s.getElementsByTagName("AdaptationSet"), d = 0;
              d < m.length;
              d++
            ) {
              var h = m[d],
                _ = bn(h, "description"),
                f = bn(h, "lang"),
                g = {
                  bSegmentAlignment: ((l = h),
                  (p = "segmentAlignment"),
                  (u = void 0),
                  (u = l.getAttribute(p)),
                  u
                    ? "true" == (u = u.toLowerCase()) || ("false" != u && null)
                    : null),
                  bIsClosedCaption: "text/vtt" == bn(h, "mimeType"),
                  strLanguage: bn(h, "lang"),
                  bContainsVideo: !1,
                  bContainsAudio: !1,
                  bContainsGame: !1,
                  strDescription: _ || f,
                  strForceSub: bn(h, "forceSub"),
                  strID: bn(h, "id"),
                  rgRoles: [],
                  rgRepresentations: [],
                  thumbnails: null,
                  segmentTemplate: null
                };
              if ((c.rgAdaptationSets.push(g), g.bIsClosedCaption)) {
                g.rgRoles.push("subtitle");
                for (
                  var b = h.getElementsByTagName("Role"), v = 0;
                  v < b.length;
                  v++
                ) {
                  (N = bn(b[v], "value")) && g.rgRoles.push(N);
                }
                for (
                  var S = h.getElementsByTagName("Representation"), y = 0;
                  y < S.length;
                  y++
                ) {
                  var C = {
                      strID: bn((F = S[y]), "id"),
                      nBandwidth: gn(F, "bandwidth"),
                      strClosedCaptionFile: ""
                    },
                    I = hn(F, "BaseURL"),
                    O = I ? I.textContent : "";
                  if (!O)
                    return (
                      un(
                        "Closed Caption File has no BaseURL for (id): " +
                          C.strID
                      ),
                      !1
                    );
                  (C.strClosedCaptionFile =
                    this.m_strBaseURL + vn(O, C.strID, 0)),
                    g.rgRepresentations.push(C);
                }
              } else {
                if (!g.bSegmentAlignment)
                  return un("MPD - Segment Alignment Missing"), !1;
                for (
                  var E = h.getElementsByTagName("ContentComponent"), w = 0;
                  w < E.length;
                  w++
                ) {
                  var M = bn(E[w], "contentType");
                  "video" == M && (g.bContainsVideo = !0),
                    "audio" == M && (g.bContainsAudio = !0),
                    "game" == M && (g.bContainsGame = !0);
                }
                if (g.bContainsVideo) {
                  var D = hn(h, "Thumbnails");
                  if (D) {
                    var T = gn(D, "sheet"),
                      G = gn(D, "period");
                    g.thumbnails = {
                      nPeriod: G,
                      strTemplate: bn(D, "template"),
                      nSheet: T,
                      nSheetSeconds: T * G
                    };
                  }
                }
                var R = h.getElementsByTagName("Role");
                for (w = 0; w < R.length; w++) {
                  var N;
                  (N = bn(R[w], "value")) && g.rgRoles.push(N);
                }
                var L = h.getElementsByTagName("SegmentTemplate");
                if (0 == L.length)
                  return un("MPD - Segment Template Missing"), !1;
                var k = L[0];
                g.segmentTemplate = {
                  nTimeScale: gn(k, "timescale"),
                  nDuration: gn(k, "duration"),
                  nStartNumber: gn(k, "startNumber"),
                  strMedia: bn(k, "media"),
                  strInitialization: ""
                };
                var A = g.segmentTemplate;
                if (
                  (g.bContainsGame
                    ? (A.strInitialization = A.strMedia)
                    : (A.strInitialization = bn(k, "initialization")),
                  !(
                    A.nTimeScale &&
                    A.nDuration &&
                    A.nStartNumber &&
                    A.strMedia &&
                    A.strInitialization
                  ))
                )
                  return un("MPD - Segment Template Data Missing"), !1;
                var P = h.getElementsByTagName("Representation");
                for (w = 0; w < P.length; w++) {
                  var F = P[w];
                  if (!(C = this.ParseRepresentation(F, g))) return !1;
                  g.rgRepresentations.push(C);
                }
              }
            }
            return !0;
          }),
          (e.prototype.BUpdate = function(e) {
            var t = new DOMParser().parseFromString(e, "application/xml"),
              n = dn(t);
            if (!n) return !1;
            if ("dynamic" == this.m_strType) {
              var o = t.getElementsByTagName("Period");
              if (0 == o.length) return !1;
              for (
                var i = o[0].getElementsByTagName("AdaptationSet"), r = 0;
                r < i.length;
                r++
              ) {
                var a = i[r],
                  s = bn(a, "id"),
                  c = this.GetAdaptationByTrackID(s);
                if (c) {
                  var l = a.getElementsByTagName("Representation");
                  if (1 < l.length)
                    for (var p = 0; p < l.length; p++) {
                      for (
                        var u = l[p],
                          m = this.ParseRepresentation(u, c),
                          d = !0,
                          h = 0,
                          _ = c.rgRepresentations;
                        h < _.length;
                        h++
                      ) {
                        var f = _[h];
                        if (m.strID == f.strID) {
                          d = !1;
                          break;
                        }
                      }
                      d && c.rgRepresentations.push(m);
                    }
                  break;
                }
              }
            }
            var g = hn(n, "Analytics");
            return (
              g &&
                ((this.m_strStatsLink = bn(g, "statslink")),
                (this.m_strStalledLink = bn(g, "stalledlink")),
                (this.m_strEventLogLink = bn(g, "eventlink"))),
              !0
            );
          }),
          e
        );
      })();
    ((On = In || (In = {}))[(On.None = 0)] = "None"),
      (On[(On.Append = 1)] = "Append"),
      (On[(On.Remove = 2)] = "Remove");
    var wn = (function() {
      function e(e, t, n, o) {
        (this.m_callbacks = null),
          (this.m_mpd = null),
          (this.m_adaptation = null),
          (this.m_mediaSource = null),
          (this.m_sourceBuffer = null),
          (this.m_nTrackBufferMS = 0),
          (this.m_representation = null),
          (this.m_eBufferUpdate = In.None),
          (this.m_rgBufferedSegments = []),
          (this.m_bNeedInitSegment = !0),
          (this.m_nNextSegment = 0),
          (this.m_bRemoveBufferState = !1),
          (this.m_bSeekInProgress = !1),
          (this.m_tsLastBufferRemove = 0),
          (this.m_schNextDownload = new T()),
          (this.m_xhrDownload = null),
          (this.m_listeners = new N()),
          (this.m_rgDownloadLog = []),
          (this.m_nCurDownloadProgress = 0),
          (this.m_nCurDownloadBitrate = 0),
          (this.m_nNumConsecutiveDownloadGones = 0),
          (this.m_statsGameData = null),
          (this.m_callbacks = e),
          (this.m_mpd = t),
          (this.m_adaptation = n),
          (this.m_stats = o);
      }
      return (
        (e.prototype.SetMediaSource = function(e) {
          this.m_mediaSource = e;
        }),
        (e.prototype.SetBufferMS = function(e) {
          this.m_nTrackBufferMS = e;
        }),
        (e.prototype.GetRepresentationsCount = function() {
          return this.m_adaptation.rgRepresentations.length;
        }),
        (e.prototype.GetRepresentationByID = function(e) {
          for (
            var t = 0, n = this.m_adaptation.rgRepresentations;
            t < n.length;
            t++
          ) {
            var o = n[t];
            if (o.strID == e) return o;
          }
          return null;
        }),
        (e.prototype.GetNumConsecutiveDownloadGones = function() {
          return this.m_nNumConsecutiveDownloadGones;
        }),
        (e.prototype.ContainsVideo = function() {
          return this.m_adaptation.bContainsVideo;
        }),
        (e.prototype.ContainsAudio = function() {
          return this.m_adaptation.bContainsAudio;
        }),
        (e.prototype.ContainsGame = function() {
          return this.m_adaptation.bContainsGame;
        }),
        (e.prototype.GetAdaptation = function() {
          return this.m_adaptation;
        }),
        (e.prototype.GetBandwidthRequired = function() {
          return this.m_representation.nBandwidth;
        }),
        (e.prototype.BIsCurrentRepresentation = function(e) {
          return e && e.strID == this.m_representation.strID;
        }),
        (e.prototype.GetSourceBufferTimeRanges = function() {
          return this.m_sourceBuffer.buffered;
        }),
        (e.prototype.GetEstimatedAudioRate = function() {
          return this.m_representation && this.ContainsAudio()
            ? this.m_representation.nBandwidth
            : 0;
        }),
        (e.prototype.GetDebugName = function() {
          var e = [];
          return (
            this.ContainsVideo()
              ? e.push("Video")
              : this.ContainsAudio()
                ? e.push("Audio")
                : this.ContainsGame() && e.push("Game"),
            e.join(" & ")
          );
        }),
        (e.prototype.GetMaxSegment = function() {
          var e = this.m_mpd.GetPeriodDuration(0);
          return e ? Cn(this.m_adaptation, 1e3 * e) : Number.MAX_VALUE;
        }),
        (e.prototype.GetAmountBufferedInPlayerMS = function(e) {
          if (!this.m_sourceBuffer) return 0;
          var t = this.m_sourceBuffer.buffered;
          if (0 == t.length) return 0;
          e < t.start(0) && (e = t.start(0)), e > t.end(0) && (e = t.end(0));
          var n = t.end(0) - e;
          return Math.floor(1e3 * n);
        }),
        (e.prototype.GetAmountBufferedMS = function(e) {
          for (
            var t = this.GetAmountBufferedInPlayerMS(e),
              n = 0,
              o = this.m_rgBufferedSegments;
            n < o.length;
            n++
          ) {
            t += o[n].nDurationMS;
          }
          return t;
        }),
        (e.prototype.ChangeRepresentation = function(e) {
          if (this.m_adaptation.rgRepresentations.indexOf(e) < 0) return null;
          if (this.m_representation == e) return null;
          if (
            (this.ContainsVideo() &&
              un(
                this.GetDebugName() +
                  " changing representation to " +
                  (e.nHeight || 0) +
                  "p at " +
                  Math.ceil(e.nBandwidth / 1e3) +
                  "KB for segment " +
                  this.m_nNextSegment
              ),
            (this.m_representation = e),
            (this.m_bNeedInitSegment = !this.ContainsGame()),
            this.m_stats.SetRepresentation(e),
            this.ContainsGame())
          )
            return e;
          if (!this.m_sourceBuffer) {
            var t = e.strMimeType + ";codecs=" + e.strCodecs;
            (this.m_sourceBuffer = this.m_mediaSource.addSourceBuffer(t)),
              un(t),
              this.m_listeners.AddEventListener(
                this.m_sourceBuffer,
                "updateend",
                this.OnSourceBufferUpdateEnd
              ),
              this.m_listeners.AddEventListener(
                this.m_sourceBuffer,
                "error",
                this.OnSourceBufferError
              ),
              this.m_listeners.AddEventListener(
                this.m_sourceBuffer,
                "abort",
                this.OnSourceBufferAbort
              );
          }
          return e;
        }),
        (e.prototype.Close = function() {
          this.m_listeners.Unregister(),
            (this.m_sourceBuffer = null),
            this.ForceStopDownloads(),
            (this.m_eBufferUpdate = In.None),
            (this.m_bRemoveBufferState = !1),
            (this.m_callbacks = null),
            (this.m_mpd = null),
            (this.m_adaptation = null),
            (this.m_mediaSource = null),
            (this.m_nTrackBufferMS = 0),
            (this.m_representation = null),
            (this.m_rgBufferedSegments = []),
            (this.m_bNeedInitSegment = !0),
            (this.m_nNextSegment = 0),
            (this.m_bSeekInProgress = !1),
            (this.m_tsLastBufferRemove = 0),
            (this.m_rgDownloadLog = []),
            (this.m_stats = null),
            (this.m_rgGameDataFrames = []),
            (this.m_statsGameData = null);
        }),
        (e.prototype.GetActiveDownloads = function() {
          return this.m_xhrDownload ? 1 : 0;
        }),
        (e.prototype.GetActiveDownloadProgress = function() {
          return this.GetActiveDownloads() ? this.m_nCurDownloadProgress : 0;
        }),
        (e.prototype.OnSourceBufferUpdateEnd = function(e) {
          var t = this.m_callbacks.GetCurrentPlayTime(),
            n = this.GetAmountBufferedInPlayerMS(t);
          un(
            this.GetDebugName() +
              " OnSourceBufferUpdateEnd: [playback=" +
              t +
              "][buffered=" +
              n +
              "][start=" +
              this.GetBufferedStart() +
              "][end=" +
              this.GetBufferedEnd() +
              "]"
          );
          var o = this.m_eBufferUpdate;
          (this.m_eBufferUpdate = In.None),
            o == In.Append && this.m_callbacks.OnSegmentDownloaded(this),
            this.m_bSeekInProgress &&
              o == In.Remove &&
              !this.m_bRemoveBufferState &&
              this.ContinueSeek(),
            this.UpdateBuffer();
        }),
        (e.prototype.OnSourceBufferError = function(e) {
          console.log("OnSourceBufferError");
        }),
        (e.prototype.OnSourceBufferAbort = function(e) {
          console.log("OnSourceBufferAbort");
        }),
        (e.prototype.ScheduleNextDownload = function() {
          if (this.m_bNeedInitSegment) this.DownloadNextSegment();
          else if ((this.m_schNextDownload.Cancel(), this.m_xhrDownload))
            un(
              this.GetDebugName() +
                " ScheduleNextDownload - download already going"
            );
          else if (this.m_bSeekInProgress)
            un(this.GetDebugName() + " ScheduleNextDownload - seeking");
          else {
            var e = this.m_callbacks.GetCurrentPlayTime(),
              t = this.m_callbacks.GetPlaybackRate(),
              n = (function(e, t, n) {
                if ("dynamic" != e.GetType()) return 0;
                var o = yn(t);
                return (
                  (n - t.segmentTemplate.nStartNumber) * o -
                  (performance.now() - e.GetLiveContentStart())
                );
              })(this.m_mpd, this.m_adaptation, this.m_nNextSegment);
            if (0 < n)
              return (
                un(
                  this.GetDebugName() +
                    " ScheduleNextDownload - segment in future"
                ),
                void this.m_schNextDownload.Schedule(
                  n,
                  this.ScheduleNextDownload
                )
              );
            var o = this.GetAmountBufferedMS(e);
            if ((1 < t && (o /= t), o < 4e4))
              return (
                un(
                  this.GetDebugName() + " ScheduleNextDownload - download now"
                ),
                void this.DownloadNextSegment()
              );
            var i = 1.1 * yn(this.m_adaptation),
              r = this.GetAmountBufferedInPlayerMS(
                this.m_callbacks.GetCurrentPlayTime()
              );
            un(
              this.GetDebugName() +
                " ScheduleNextDownload - buffered, schedule later [sleep=" +
                i +
                "ms][buffer=" +
                r +
                "]"
            ),
              this.m_schNextDownload.Schedule(i, this.ScheduleNextDownload);
          }
        }),
        (e.prototype.DownloadNextSegment = function() {
          this.m_schNextDownload.Cancel();
          var e,
            t,
            n,
            o,
            i,
            r,
            a,
            s = "",
            c = 0;
          this.m_bNeedInitSegment
            ? ((this.m_bNeedInitSegment = !1),
              (i = this.m_mpd.GetBaseURL()),
              (r = this.m_adaptation),
              (a = this.m_representation),
              (s = vn(i + r.segmentTemplate.strInitialization, a.strID, 0)),
              (c = 0))
            : ((e = this.m_mpd.GetBaseURL()),
              (t = this.m_adaptation),
              (n = this.m_representation),
              (o = this.m_nNextSegment),
              (s = vn(e + t.segmentTemplate.strMedia, n.strID, o)),
              (c = yn(this.m_adaptation)),
              this.m_nNextSegment++),
            this.DownloadSegment(this.m_representation.strID, s, c);
        }),
        (e.prototype.DownloadSegment = function(g, b, v, S) {
          return (
            void 0 === S && (S = performance.now()),
            R.b(this, void 0, void 0, function() {
              var t,
                n,
                o,
                i,
                r,
                a,
                s,
                c,
                l,
                p,
                u,
                m,
                d,
                h,
                _,
                f = this;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    AssertMsg(
                      null === this.m_xhrDownload,
                      "Trying to download another segment while a download is already in flight"
                    ),
                      this.m_schNextDownload.Cancel(),
                      un("Downloading: " + b),
                      (t = null),
                      (n = performance.now()),
                      (o = C.a.CancelToken.source()),
                      (e.label = 1);
                  case 1:
                    return (
                      e.trys.push([1, 3, , 4]),
                      (this.m_nCurDownloadProgress = 0),
                      (this.m_xhrDownload = o),
                      (i = {
                        cancelToken: this.m_xhrDownload.token,
                        timeout: 15e3,
                        responseType: "arraybuffer",
                        onDownloadProgress: function(e) {
                          (f.m_nCurDownloadProgress = e.loaded / e.total),
                            (f.m_nCurDownloadBitrate =
                              8 *
                              e.loaded *
                              1e3 /
                              Math.max(1, performance.now() - n));
                        }
                      }),
                      this.ContainsGame() && (i.responseType = "json"),
                      [4, C.a.get(b, i)]
                    );
                  case 2:
                    return (t = e.sent()), [3, 4];
                  case 3:
                    return (
                      un("Failed to download segment: " + (r = e.sent())),
                      (t = r.response),
                      [3, 4]
                    );
                  case 4:
                    if (!this.m_xhrDownload || this.m_xhrDownload != o)
                      return [2];
                    if (
                      ((a = performance.now()),
                      (s = Math.floor(performance.now() - n)),
                      (c = t ? t.status : 0),
                      (this.m_xhrDownload = null),
                      this.m_bSeekInProgress)
                    )
                      return this.ContinueSeek(), [2];
                    if (!t || 200 != t.status)
                      return this.ContainsGame()
                        ? (this.ScheduleNextDownload(), [2])
                        : (this.m_stats.LogSegmentDownloadFailure(
                            s,
                            t ? t.status : 444
                          ),
                          9e3 < a - S
                            ? (un(
                                this.GetDebugName() +
                                  " HTTP download failed.. stopping loader: " +
                                  (a - S) +
                                  "ms"
                              ),
                              this.DownloadFailed())
                            : 410 == c
                              ? ((this.m_nNumConsecutiveDownloadGones += 1),
                                un(
                                  this.GetDebugName() +
                                    " HTTP download gone.. informing the player: " +
                                    (a - S) +
                                    "ms"
                                ),
                                this.DownloadGone())
                              : this.m_schNextDownload.Schedule(
                                  500,
                                  function() {
                                    return f.DownloadSegment(g, b, v, S);
                                  }
                                ),
                          [2]);
                    if (
                      ((this.m_nNumConsecutiveDownloadGones = 0),
                      this.ContainsGame())
                    ) {
                      for (
                        u = t.data,
                          this.m_rgGameDataFrames ||
                            (this.m_rgGameDataFrames = []),
                          m = Number.MIN_VALUE,
                          this.m_rgGameDataFrames.length &&
                            (m = this.m_rgGameDataFrames[
                              this.m_rgGameDataFrames.length - 1
                            ].pts),
                          d = 0,
                          h = u.frames;
                        d < h.length;
                        d++
                      )
                        (_ = h[d]).pts && _.gamedata
                          ? _.pts <= m
                            ? un("Invalide game pts")
                            : (this.m_rgGameDataFrames.push(_), (m = _.pts))
                          : un("Invalide game data");
                      this.TrimGameDataIfNecessary(),
                        (this.m_statsGameData = {
                          nAppID: u.appid,
                          ulBroadcastRelayID: u.broadcastrelayid,
                          nSegmentID: u.segmentid
                        });
                    } else (l = new Uint8Array(t.data)), this.m_rgBufferedSegments.push({ nDurationMS: v, data: l, representationStrID: g }), this.LogDownload(n, l.length), this.UpdateBuffer(), (p = l.length / 1e3), un("HTTP " + c + " (" + s + "ms, " + Math.floor(p) + "k): " + b);
                    return this.ScheduleNextDownload(), [2];
                }
              });
            })
          );
        }),
        (e.prototype.DownloadFailed = function() {
          this.m_callbacks.OnSegmentDownloadFailed(this);
        }),
        (e.prototype.DownloadGone = function() {
          this.m_callbacks.OnSegmentDownloadGone(this);
        }),
        (e.prototype.TrimGameDataIfNecessary = function() {
          var e = {
              pts: 1e3 * (this.m_callbacks.GetCurrentPlayTime() - 40),
              gamedata: null
            },
            t = w.g(this.m_rgGameDataFrames, e, function(e, t) {
              return e.pts - t.pts;
            });
          0 <= t &&
            (this.m_rgGameDataFrames = this.m_rgGameDataFrames.slice(t + 1));
        }),
        (e.prototype.UpdateBuffer = function() {
          if (this.m_eBufferUpdate == In.None)
            if (this.m_bRemoveBufferState) this.RemoveAllBuffers();
            else if (this.m_sourceBuffer)
              if (0 < this.m_rgBufferedSegments.length)
                try {
                  this.m_eBufferUpdate = In.Append;
                  var e = this.m_rgBufferedSegments[0];
                  this.m_sourceBuffer.appendBuffer(e.data),
                    this.m_rgBufferedSegments.splice(0, 1);
                } catch (e) {
                  "QuotaExceededError" === e.name
                    ? ((this.m_eBufferUpdate = In.None),
                      un(this.GetDebugName() + " Buffer - QuotaExceededError"))
                    : un(this.GetDebugName() + " Buffer - Exception", e);
                }
              else {
                var t = performance.now();
                if (
                  !this.m_bSeekInProgress &&
                  1e4 < t - this.m_tsLastBufferRemove
                ) {
                  var n = this.GetBufferedStart(),
                    o = this.m_callbacks.GetCurrentPlayTime() - 40;
                  if (n < o) {
                    var i = Math.min(this.GetBufferedEnd(), o);
                    return void (
                      i != n &&
                      ((this.m_eBufferUpdate = In.Remove),
                      this.m_sourceBuffer.remove(n, i),
                      (this.m_tsLastBufferRemove = t))
                    );
                  }
                }
              }
            else un("No source buffer?");
        }),
        (e.prototype.RemoveAllBuffers = function() {
          this.m_rgBufferedSegments = [];
          var e = 0;
          if (this.m_sourceBuffer)
            for (var t = this.m_sourceBuffer.buffered, n = 0; n < t.length; n++)
              e < t.end(n) && (e = t.end(n));
          (this.m_bRemoveBufferState = !1),
            (this.m_eBufferUpdate = In.Remove),
            0 != e
              ? this.m_sourceBuffer.remove(0, e + 1)
              : this.OnSourceBufferUpdateEnd(null);
        }),
        (e.prototype.GetBufferedStart = function() {
          return this.m_sourceBuffer && 0 != this.m_sourceBuffer.buffered.length
            ? this.m_sourceBuffer.buffered.start(0)
            : 0;
        }),
        (e.prototype.GetBufferedEnd = function() {
          return this.m_sourceBuffer && 0 != this.m_sourceBuffer.buffered.length
            ? this.m_sourceBuffer.buffered.end(0)
            : 0;
        }),
        (e.prototype.ForceStopDownloads = function() {
          this.m_schNextDownload.Cancel(),
            this.m_xhrDownload &&
              (this.m_xhrDownload.cancel(), (this.m_xhrDownload = null));
        }),
        (e.prototype.ForceRestartDownload = function() {
          this.ForceStopDownloads(), this.ScheduleNextDownload();
        }),
        (e.prototype.Seek = function(e) {
          var t = this.GetBufferedStart(),
            n = this.GetBufferedEnd(),
            o = e < t || n < e;
          if (
            (0 == t && 0 == n && (o = !0),
            un(
              this.GetDebugName() +
                " making an " +
                (o ? "unbuffered" : "buffered") +
                " seek to " +
                e
            ),
            this.m_bSeekInProgress || o || this.m_bNeedInitSegment)
          ) {
            (this.m_bSeekInProgress = !0), this.ForceStopDownloads();
            var i = Cn(this.m_adaptation, 1e3 * e);
            if (
              ((this.m_nNextSegment = ln(
                i,
                this.m_adaptation.segmentTemplate.nStartNumber,
                this.GetMaxSegment() - 1
              )),
              un(
                "Seek To Next Segment: " +
                  this.m_nNextSegment +
                  " at approx. " +
                  mn((this.m_nNextSegment - 1) * yn(this.m_adaptation) / 1e3) +
                  " seconds."
              ),
              this.ContainsGame())
            )
              return (
                (this.m_bSeekInProgress = !1),
                (this.m_rgGameDataFrames = []),
                void this.ScheduleNextDownload()
              );
            (this.m_bRemoveBufferState = !0), this.UpdateBuffer();
          } else this.ScheduleNextDownload();
        }),
        (e.prototype.ContinueSeek = function() {
          this.m_bSeekInProgress &&
            (this.m_eBufferUpdate == In.Remove ||
              this.m_bRemoveBufferState ||
              ((this.m_bSeekInProgress = !1), this.ScheduleNextDownload()));
        }),
        (e.prototype.BHasEnoughBuffered = function(e) {
          return (
            !this.m_bSeekInProgress &&
            (!!this.ContainsGame() ||
              (this.GetAmountBufferedInPlayerMS(e) >= this.m_nTrackBufferMS ||
                this.m_nNextSegment > this.GetMaxSegment()))
          );
        }),
        (e.prototype.LogDownload = function(e, t) {
          4 <= this.m_rgDownloadLog.length && this.m_rgDownloadLog.shift();
          var n = performance.now() - e;
          n <= 0 ||
            (this.m_rgDownloadLog.push({ cubData: t, nDownloadMS: n }),
            this.m_stats.LogDownload(t, n));
        }),
        (e.prototype.GetDownloadHistory = function() {
          return this.m_rgDownloadLog;
        }),
        (e.prototype.GetAvgDownloadRate = function() {
          for (
            var e = 0, t = 0, n = 0, o = this.m_rgDownloadLog;
            n < o.length;
            n++
          ) {
            var i = o[n];
            (e += i.nDownloadMS), (t += i.cubData);
          }
          return e <= 0
            ? this.m_nCurDownloadBitrate && 0 < this.GetActiveDownloads()
              ? this.m_nCurDownloadBitrate
              : 0
            : 8 * t * 1e3 / e;
        }),
        (e.prototype.GetGameDataFrames = function() {
          return this.m_rgGameDataFrames;
        }),
        (e.prototype.GetLatestGameDataFrameAppID = function() {
          return this.m_statsGameData && this.m_statsGameData.nAppID
            ? this.m_statsGameData.nAppID
            : 0;
        }),
        R.c([M.a], e.prototype, "OnSourceBufferUpdateEnd", null),
        R.c([M.a], e.prototype, "OnSourceBufferError", null),
        R.c([M.a], e.prototype, "OnSourceBufferAbort", null),
        R.c([M.a], e.prototype, "ScheduleNextDownload", null),
        R.c([M.a], e.prototype, "DownloadNextSegment", null),
        R.c([M.a], e.prototype, "DownloadFailed", null),
        R.c([M.a], e.prototype, "DownloadGone", null),
        e
      );
    })();
    function Mn(e) {
      for (var t = !1, n = !1, o = !0, i = 0; i < e.length; i++) {
        var r = e.charCodeAt(i);
        if (
          ((o && 48 <= r && r <= 57) || 35 == r || 42 == r || 10 == r
            ? (n = !0)
            : ((55356 <= r && r <= 57343) ||
                (8205 <= r && r <= 11093) ||
                12953 == r ||
                12349 == r ||
                12336 == r ||
                65039 == r ||
                12951 == r ||
                169 == r ||
                (48 <= r && r <= 57) ||
                35 == r ||
                42 == r ||
                10 == r ||
                174 == r) &&
              (o = !(n = !0)),
          n && 0 == i)
        )
          n = !(t = !0);
        else if (n && t) n = !(t = !0);
        else if (!n) return (t = !1);
        if (20 < i) return !1;
      }
      return !o && t;
    }
    function Dn(e) {
      var t = e.charCodeAt(0);
      return 65 <= t && t <= 90;
    }
    var Tn,
      Gn,
      Rn = 1e6,
      Nn = (function() {
        return function() {
          this.playback_speed = 1;
        };
      })(),
      Ln = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return R.d(t, e), t;
      })(Nn),
      kn = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return R.d(t, e), t;
      })(Nn),
      An = (function() {
        function e() {
          (this.m_steamIDBroadcast = ""),
            (this.m_steamIDViewer = ""),
            (this.m_broadcastID = ""),
            (this.m_ulViewerToken = ""),
            (this.m_host = ""),
            (this.m_strStatsLink = ""),
            (this.m_strStalledLink = ""),
            (this.m_strEventLogLink = ""),
            (this.m_allTimeSnapshot = new Pn(0)),
            (this.m_rgSnapShots = new Array(new Pn(0))),
            (this.m_videoResolution = 0),
            (this.m_audioRate = 0),
            (this.m_audioChannel = 0),
            (this.m_frameRate = 0),
            (this.m_strBufferingVideoResolution = "0x0@0"),
            (this.m_nPlaybackVideoResolution = 0),
            (this.m_strPlaybackVideoResolution = "0x0"),
            (this.m_htmlVideoResolution = 0),
            (this.m_strHtmlVideoDisplay = ""),
            (this.m_nAudioBandwidth = 0),
            (this.m_nVideoBandwidth = 0),
            (this.m_nBandwidthRequired = 0),
            (this.m_nCurBandwidthVideo = 0),
            (this.m_nAudioBufferedMS = 0),
            (this.m_nVideoBufferedMS = 0),
            (this.m_nActiveDownloads = 0),
            (this.m_nVideoDownloadProgress = 0),
            (this.m_videoBufferedRanges = null),
            (this.m_audioBufferedRanges = null),
            (this.m_nSegmentDurationMS = 0),
            (this.m_nPlaybackRate = 0),
            (this.m_nTimeToFirstFrameMS = -1),
            (this.m_fpsMonitor = new Bn());
        }
        return (
          (e.prototype.GetBytesReceivedToDisplay = function() {
            return (function(e, t, n, o) {
              void 0 === t && (t = 2),
                void 0 === n && (n = !0),
                void 0 === o && (o = !1);
              var i,
                r,
                a = n ? 1024 : 1e3,
                s = a * a,
                c = s * a,
                l = c * a;
              return (
                l < e
                  ? ((i = e / l), (r = o ? "Tbps" : "TB"))
                  : c < e
                    ? ((i = e / c), (r = o ? "Gbps" : "GB"))
                    : s < e
                      ? ((i = e / s), (r = o ? "Mbps" : "MB"))
                      : a < e
                        ? ((i = e / a), (r = o ? "Kbps" : "KB"))
                        : ((i = e), (r = o ? "bps" : "bytes")),
                i.toLocaleString(re.a.GetPreferredLocales(), {
                  minimumFractionDigits: 0,
                  maximumFractionDigits: t
                }) +
                  " " +
                  r
              );
            })(this.m_allTimeSnapshot.m_nBytesReceived, 1);
          }),
          (e.prototype.GetBufferingResolutionToDisplay = function() {
            return this.m_strBufferingVideoResolution;
          }),
          (e.prototype.GetPlaybackResolutionToDisplay = function() {
            return this.m_strPlaybackVideoResolution;
          }),
          (e.prototype.GetHTMLVideoResolutionToDisplay = function() {
            return this.m_strHtmlVideoDisplay;
          }),
          (e.prototype.GetDroppedFramesToDisplay = function() {
            return (
              this.m_allTimeSnapshot.m_nFramesDropped +
              "/" +
              this.m_allTimeSnapshot.m_nFramesDecoded
            );
          }),
          (e.prototype.GetStalledEventsToDisplay = function() {
            return String(this.m_allTimeSnapshot.m_nStallEvents);
          }),
          (e.prototype.GetFailedDownloadsToDisplay = function() {
            return String(this.m_allTimeSnapshot.m_nFailedSegments);
          }),
          (e.prototype.GetNumBufferedVideoRanges = function() {
            return this.m_videoBufferedRanges
              ? this.m_videoBufferedRanges.length
              : 0;
          }),
          (e.prototype.GetNumBufferedAudioRanges = function() {
            return this.m_audioBufferedRanges
              ? this.m_audioBufferedRanges.length
              : 0;
          }),
          (e.prototype.GetBufferedVideoSegmentForDisplay = function(e) {
            return this.m_videoBufferedRanges &&
              e < this.m_videoBufferedRanges.length
              ? mn(this.m_videoBufferedRanges.start(e)) +
                  " - " +
                  mn(this.m_videoBufferedRanges.end(e))
              : Object(re.b)("#DASHPlayerStats_VideoNoRangeInformation");
          }),
          (e.prototype.GetBufferedAudioSegmentForDisplay = function(e) {
            return this.m_audioBufferedRanges &&
              e < this.m_audioBufferedRanges.length
              ? mn(this.m_audioBufferedRanges.start(e)) +
                  " - " +
                  mn(this.m_audioBufferedRanges.end(e))
              : Object(re.b)("#DASHPlayerStats_AudioNoRangeInformation");
          }),
          (e.prototype.GetBandwidthStatsToDisplay = function() {
            if (this.m_rgSnapShots.length < 2)
              return (
                (this.m_allTimeSnapshot.m_nBandwidthMin / Rn).toFixed(3) +
                " / " +
                (this.m_allTimeSnapshot.m_nBandwidthMax / Rn).toFixed(3) +
                " / " +
                (this.m_allTimeSnapshot.GetAverageBandwidth() / Rn).toFixed(3)
              );
            var e = this.m_rgSnapShots[this.m_rgSnapShots.length - 2],
              t = this.m_rgSnapShots[this.m_rgSnapShots.length - 1];
            return (
              (
                (0 == t.m_nBandwidthMin
                  ? e.m_nBandwidthMin
                  : Math.min(e.m_nBandwidthMin, t.m_nBandwidthMin)) / Rn
              ).toFixed(3) +
              " / " +
              (Math.max(e.m_nBandwidthMax, t.m_nBandwidthMax) / Rn).toFixed(3) +
              " / " +
              (e.GetAverageBandwidthFromTwo(t) / Rn).toFixed(3)
            );
          }),
          (e.prototype.GetDownloadTimeStatsToDisplay = function() {
            if (this.m_rgSnapShots.length < 2)
              return (
                (
                  this.m_allTimeSnapshot.m_nSegmentDownloadTimeMinMS / 1e3
                ).toFixed(3) +
                " / " +
                (
                  this.m_allTimeSnapshot.m_nSegmentDownloadTimeMaxMS / 1e3
                ).toFixed(3) +
                " / " +
                (this.m_allTimeSnapshot.GetAverageDownloadTime() / 1e3).toFixed(
                  3
                )
              );
            var e = this.m_rgSnapShots[this.m_rgSnapShots.length - 2],
              t = this.m_rgSnapShots[this.m_rgSnapShots.length - 1];
            return (
              (
                (0 == t.m_nSegmentDownloadTimeMinMS
                  ? e.m_nSegmentDownloadTimeMinMS
                  : Math.min(
                      e.m_nSegmentDownloadTimeMinMS,
                      t.m_nSegmentDownloadTimeMinMS
                    )) / 1e3
              ).toFixed(3) +
              " / " +
              (
                Math.max(
                  e.m_nSegmentDownloadTimeMaxMS,
                  t.m_nSegmentDownloadTimeMaxMS
                ) / 1e3
              ).toFixed(3) +
              " / " +
              (e.GetAverageDownloadTimeFromTwo(t) / 1e3).toFixed(3)
            );
          }),
          (e.prototype.BHasFrameInformation = function() {
            return 0 < this.m_allTimeSnapshot.m_nFramesDecoded;
          }),
          (e.prototype.GetBandwidthRequiredToDisplay = function() {
            return (this.m_nBandwidthRequired / Rn).toFixed(3);
          }),
          (e.prototype.GetBandwithVideoToDisplay = function() {
            return (this.m_nCurBandwidthVideo / Rn).toFixed(3);
          }),
          (e.prototype.GetContentServerToDisplay = function() {
            return this.m_host;
          }),
          (e.prototype.GetVideoBufferedToDisplay = function() {
            return (this.m_nVideoBufferedMS / 1e3).toFixed(3);
          }),
          (e.prototype.GetAudioBufferedToDisplay = function() {
            return (this.m_nAudioBufferedMS / 1e3).toFixed(3);
          }),
          (e.prototype.GetActiveDownloadsToDisplay = function() {
            return String(this.m_nActiveDownloads);
          }),
          (e.prototype.GetVideoDownloadProgressToDisplay = function() {
            return this.m_nVideoDownloadProgress
              ? String(Math.round(100 * this.m_nVideoDownloadProgress)) + "%"
              : "100%";
          }),
          (e.prototype.GetTimeToFirstFrameToDisplay = function() {
            return -1 == this.m_nTimeToFirstFrameMS
              ? "Unknown"
              : String(this.m_nTimeToFirstFrameMS);
          }),
          (e.prototype.GetPersistentFrameDropsForDisplay = function() {
            return String(this.m_fpsMonitor.BIsDroppingFrames());
          }),
          (e.prototype.GetCurrentFPSForDisplay = function() {
            return this.m_fpsMonitor.BHasCurrentFPS()
              ? this.m_fpsMonitor.GetCurrentFPS().toFixed(1)
              : Object(re.b)("#DASHPlayerStats_Tracking");
          }),
          (e.prototype.GetPlaybackRateForDisplay = function() {
            return this.m_nPlaybackRate.toFixed(1) + "x";
          }),
          (e.prototype.GetFPSMonitor = function() {
            return this.m_fpsMonitor;
          }),
          (e.prototype.SetHTMLVideoPlayerDisplay = function(e, t, n, o) {
            this.m_htmlVideoResolution != o &&
              ((this.m_htmlVideoResolution = o),
              (this.m_strHtmlVideoDisplay = n + "x" + o)),
              this.m_nPlaybackVideoResolution != t &&
                ((this.m_nPlaybackVideoResolution = t),
                (this.m_strPlaybackVideoResolution = e + "x" + t));
          }),
          (e.prototype.SetVideoPlaybackResolution = function(e, t, n) {
            0 == this.m_videoResolution &&
              ((this.m_allTimeSnapshot.m_nInitialVideoResolution = t),
              (this.m_rgSnapShots[
                this.m_rgSnapShots.length - 1
              ].m_nInitialVideoResolution = t)),
              (this.m_strBufferingVideoResolution = e + "x" + t + "@" + n),
              (this.m_videoResolution = t),
              (this.m_frameRate = n);
          }),
          (e.prototype.SetRepresentation = function(e) {
            e &&
              (e.nAudioSamplingRate
                ? ((this.m_audioRate = Math.round(e.nBandwidth / 1e3)),
                  (this.m_audioChannel = e.nAudioChannels),
                  (this.m_nAudioBandwidth = e.nBandwidth))
                : e.nFrameRate &&
                  (this.SetVideoPlaybackResolution(
                    e.nWidth,
                    e.nHeight,
                    e.nFrameRate
                  ),
                  (this.m_nVideoBandwidth = e.nBandwidth)),
              (this.m_nBandwidthRequired =
                this.m_nAudioBandwidth + this.m_nVideoBandwidth));
          }),
          (e.prototype.SetCurrentVideoBandwidth = function(e) {
            this.m_nCurBandwidthVideo = e;
          }),
          (e.prototype.SetSegmentDurationMS = function(e) {
            this.m_nSegmentDurationMS = e;
          }),
          (e.prototype.SetBroadcasterAndViewerInfo = function(e, t, n, o) {
            (this.m_steamIDBroadcast = e),
              (this.m_steamIDViewer = t),
              (this.m_broadcastID = n),
              (this.m_ulViewerToken = o);
          }),
          (e.prototype.SetAnalyticLinks = function(e, t, n) {
            (this.m_strStatsLink = e),
              (this.m_strStalledLink = t),
              (this.m_strEventLogLink = n);
          }),
          (e.prototype.SetVideoInitializationURL = function(e) {
            var t = new URL(e);
            this.m_host = t.hostname;
          }),
          (e.prototype.SetAudioRate = function(e) {
            this.m_audioRate = e;
          }),
          (e.prototype.CaptureFrequentlyUpdatingInformation = function(e, t) {
            var n = this.ExtractFrameInfo(e);
            this.LogFrameInfo(n), this.LogBufferDuration(t, e);
          }),
          (e.prototype.LogDownload = function(e, t) {
            this.m_allTimeSnapshot.SegmentReceived(e, t),
              this.m_rgSnapShots[this.m_rgSnapShots.length - 1].SegmentReceived(
                e,
                t
              );
          }),
          (e.prototype.LogSegmentDownloadFailure = function(e, t) {
            (this.m_allTimeSnapshot.m_nFailedSegments += 1),
              (this.m_rgSnapShots[
                this.m_rgSnapShots.length - 1
              ].m_nFailedSegments += 1),
              (this.m_allTimeSnapshot.m_nLastSegementDownloadStatus = t),
              (this.m_rgSnapShots[
                this.m_rgSnapShots.length - 1
              ].m_nLastSegementDownloadStatus = t),
              this.LogDownload(0, e);
          }),
          (e.prototype.LogVideoError = function(e) {}),
          (e.prototype.LogVideoOnCanPlay = function(e) {
            -1 === this.m_nTimeToFirstFrameMS &&
              (this.m_nTimeToFirstFrameMS =
                Date.now() - this.m_allTimeSnapshot.m_timeMS);
          }),
          (e.prototype.LogErrorEvent = function(e, t) {}),
          (e.prototype.ReportVideoStalled = function(e, t) {
            if (0 != this.m_strStalledLink.length) {
              var n = this.FindBehindSegmentLoader(e, t);
              if (n) {
                (this.m_allTimeSnapshot.m_nStallEvents += 1),
                  (this.m_rgSnapShots[
                    this.m_rgSnapShots.length - 1
                  ].m_nStallEvents += 1);
                var o = new kn();
                this.GatherCommonStats(
                  o,
                  t,
                  n.GetBandwidthRequired(),
                  n.GetAvgDownloadRate()
                ),
                  (o.last_segment_response = this.m_rgSnapShots[
                    this.m_rgSnapShots.length - 1
                  ].m_nLastSegementDownloadStatus),
                  (o.audio_stalled = n.ContainsAudio()),
                  this.CaptureActiveDownloads(e),
                  (o.active_downloads = this.m_nActiveDownloads),
                  (o.vid_down_progress = this.m_nVideoDownloadProgress);
                for (
                  var i = n.GetDownloadHistory(), r = 0, a = i.length - 1;
                  0 <= a && r < 3;
                  --a
                )
                  (o["segment" + ++r + "_bytes"] = i[a].cubData),
                    (o["segment" + r + "_time"] =
                      Math.round(i[a].nDownloadMS) / 1e3);
                this.SendReportToServer(o, this.m_strStalledLink);
              } else un("DASHStats: Did not find any audio or video loaders");
            }
          }),
          (e.prototype.FindBehindSegmentLoader = function(e, t) {
            for (
              var n = !1,
                o = !1,
                i = t.currentTime,
                r = null,
                a = null,
                s = 0,
                c = e;
              s < c.length;
              s++
            ) {
              var l = c[s];
              (a = l.ContainsAudio() ? l : a),
                (r = l.ContainsVideo() ? l : a),
                l.BHasEnoughBuffered(i) &&
                  ((o = o || l.ContainsAudio()), (n = n || l.ContainsVideo()));
            }
            return (o = o || null == a), !n || (n && o) ? r : a;
          }),
          (e.prototype.ExtractFrameInfo = function(e) {
            var t = 0,
              n = 0;
            if (e.getVideoPlaybackQuality)
              try {
                var o = e.getVideoPlaybackQuality();
                (n = o.totalVideoFrames), (t = o.droppedVideoFrames);
              } catch (e) {
                un(
                  "Browser does not support HTMLVideoElement.getVideoPlaybackQuality()",
                  e.message
                );
              }
            else
              e.webkitDecodedFrames
                ? ((n = e.webkitDecodedFrames), (t = e.webkitDroppedFrames))
                : e.webkitDecodedFrameCount &&
                  ((n = e.webkitDecodedFrameCount),
                  (t = e.webkitDroppedFrameCount));
            return { framesDecoded: n, framesDropped: t };
          }),
          (e.prototype.LogFrameInfo = function(e) {
            (this.m_allTimeSnapshot.m_nFramesDecoded = e.framesDecoded),
              (this.m_allTimeSnapshot.m_nFramesDropped = e.framesDropped);
            var t = this.m_rgSnapShots[this.m_rgSnapShots.length - 1];
            if (1 == this.m_rgSnapShots.length)
              (t.m_nFramesDecoded = e.framesDecoded),
                (t.m_nFramesDropped = e.framesDropped);
            else {
              var n = this.m_rgSnapShots[this.m_rgSnapShots.length - 2];
              (t.m_nFramesDecoded = e.framesDecoded - n.m_nFramesDecoded),
                (t.m_nFramesDropped = e.framesDropped - n.m_nFramesDropped);
            }
          }),
          (e.prototype.LogBufferDuration = function(e, t) {
            for (
              var n = (this.m_nActiveDownloads = 0), o = e;
              n < o.length;
              n++
            ) {
              var i = o[n];
              i.ContainsAudio()
                ? ((this.m_nAudioBufferedMS = i.GetAmountBufferedMS(
                    t.currentTime
                  )),
                  (this.m_audioBufferedRanges = i.GetSourceBufferTimeRanges()))
                : i.ContainsVideo() &&
                  ((this.m_nVideoBufferedMS = i.GetAmountBufferedMS(
                    t.currentTime
                  )),
                  (this.m_videoBufferedRanges = i.GetSourceBufferTimeRanges())),
                (this.m_nActiveDownloads += i.GetActiveDownloads()),
                i.ContainsVideo() &&
                  (this.m_nVideoDownloadProgress = i.GetActiveDownloadProgress());
            }
            this.m_nPlaybackRate = t.playbackRate;
          }),
          (e.prototype.CaptureActiveDownloads = function(e) {
            for (
              var t = (this.m_nActiveDownloads = 0), n = e;
              t < n.length;
              t++
            ) {
              var o = n[t];
              (this.m_nActiveDownloads += o.GetActiveDownloads()),
                o.ContainsVideo() &&
                  (this.m_nVideoDownloadProgress = o.GetActiveDownloadProgress());
            }
          }),
          (e.prototype.ReportPlayerStats = function(e, t) {
            if (0 != this.m_strStatsLink.length) {
              var n = this.ExtractFrameInfo(t);
              if (
                n.framesDecoded != this.m_allTimeSnapshot.m_nFramesDecoded ||
                0 !=
                  this.m_rgSnapShots[this.m_rgSnapShots.length - 1]
                    .m_nBytesReceived
              ) {
                this.LogFrameInfo(n), this.LogBufferDuration(e, t);
                var o = new Ln(),
                  i = this.m_rgSnapShots[this.m_rgSnapShots.length - 1];
                (o.frames_decoded = i.m_nFramesDecoded),
                  (o.frames_dropped = i.m_nFramesDropped),
                  (o.bytes_received = i.m_nBytesReceived),
                  (o.seconds_delta = Math.round(
                    (Date.now() - i.m_timeMS) / 1e3
                  )),
                  (o.failed_segments = i.m_nFailedSegments),
                  (o.bw_min = i.m_nBandwidthMin),
                  (o.bw_max = i.m_nBandwidthMax),
                  (o.audio_buffer = Math.round(this.m_nAudioBufferedMS / 1e3)),
                  (o.video_buffer = Math.round(this.m_nVideoBufferedMS / 1e3)),
                  (o.seg_time_avg =
                    Math.round(i.GetAverageDownloadTime()) / 1e3),
                  (o.seg_time_min =
                    Math.round(i.m_nSegmentDownloadTimeMinMS) / 1e3),
                  (o.seg_time_max =
                    Math.round(i.m_nSegmentDownloadTimeMaxMS) / 1e3),
                  (o.initial_vid_res = i.m_nInitialVideoResolution),
                  (o.ttff = this.m_nTimeToFirstFrameMS),
                  (o.seg_duration = this.m_nSegmentDurationMS),
                  this.GatherCommonStats(
                    o,
                    t,
                    this.m_nBandwidthRequired,
                    i.GetAverageBandwidth()
                  ),
                  this.CreateNewEmptySnapshot(t.videoHeight),
                  this.SendReportToServer(o, this.m_strStatsLink);
              } else this.CreateNewEmptySnapshot(t.videoHeight);
            }
          }),
          (e.prototype.SendReportToServer = function(a, s) {
            return R.b(this, void 0, void 0, function() {
              var t, n, o, i, r;
              return R.e(this, function(e) {
                for (
                  t = new URL(s), n = new FormData(), o = 0, i = Object.keys(a);
                  o < i.length;
                  o++
                )
                  (r = i[o]), n.append(r, a[r]);
                return (
                  n.append("l", t.searchParams.get("l")),
                  n.append("e", t.searchParams.get("e")),
                  n.append("h", t.searchParams.get("h")),
                  un("CDASHStats Sending Report to Server", a),
                  C.a.post(s, n).catch(function(e) {
                    un("Failed to upload stats: ", e);
                  }),
                  [2]
                );
              });
            });
          }),
          (e.prototype.CreateNewEmptySnapshot = function(e) {
            5 <= this.m_rgSnapShots.length && this.m_rgSnapShots.shift(),
              this.m_rgSnapShots.push(new Pn(e));
          }),
          (e.prototype.GatherCommonStats = function(e, t, n, o) {
            (e.steamid = this.m_steamIDViewer),
              (e.host = this.m_host),
              (e.playback_position = Math.round(t.currentTime)),
              (e.video_res = this.m_videoResolution),
              (e.audio_rate = this.m_audioRate),
              (e.audio_ch = this.m_audioChannel),
              (e.bw_required = n),
              (e.bw_avg = Math.round(o)),
              (e.broadcast_accountid = new E.a(
                this.m_steamIDBroadcast
              ).GetAccountID()),
              (e.useragent = window.navigator.userAgent),
              (e.sessionid = G.a.SESSIONID);
          }),
          R.c([m.observable], e.prototype, "m_allTimeSnapshot", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_strBufferingVideoResolution",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_strPlaybackVideoResolution",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_strHtmlVideoDisplay", void 0),
          R.c([m.observable], e.prototype, "m_nBandwidthRequired", void 0),
          R.c([m.observable], e.prototype, "m_nCurBandwidthVideo", void 0),
          R.c([m.observable], e.prototype, "m_nAudioBufferedMS", void 0),
          R.c([m.observable], e.prototype, "m_nVideoBufferedMS", void 0),
          R.c([m.observable], e.prototype, "m_nActiveDownloads", void 0),
          R.c([m.observable], e.prototype, "m_nVideoDownloadProgress", void 0),
          R.c([m.observable], e.prototype, "m_videoBufferedRanges", void 0),
          R.c([m.observable], e.prototype, "m_audioBufferedRanges", void 0),
          R.c([m.observable], e.prototype, "m_nPlaybackRate", void 0),
          R.c([m.action], e.prototype, "SetVideoPlaybackResolution", null),
          R.c([m.action], e.prototype, "SetRepresentation", null),
          R.c([m.action], e.prototype, "SetCurrentVideoBandwidth", null),
          R.c(
            [m.action],
            e.prototype,
            "CaptureFrequentlyUpdatingInformation",
            null
          ),
          R.c([m.action], e.prototype, "LogDownload", null),
          R.c([m.action], e.prototype, "LogSegmentDownloadFailure", null),
          R.c([m.action], e.prototype, "LogFrameInfo", null),
          R.c([m.action], e.prototype, "LogBufferDuration", null),
          e
        );
      })(),
      Pn = (function() {
        function e(e) {
          (this.m_timeMS = Date.now()),
            (this.m_nBytesReceived = 0),
            (this.m_nInitialVideoResolution = 0),
            (this.m_nFailedSegments = 0),
            (this.m_nStallEvents = 0),
            (this.m_nEntries = 0),
            (this.m_nSegmentDownloadTimeTotalMS = 0),
            (this.m_nSegmentDownloadTimeMaxMS = 0),
            (this.m_nSegmentDownloadTimeMinMS = 0),
            (this.m_nBandwidthTotal = 0),
            (this.m_nBandwidthMin = 0),
            (this.m_nBandwidthMax = 0),
            (this.m_nLastSegementDownloadStatus = 200),
            (this.m_nFramesDecoded = 0),
            (this.m_nFramesDropped = 0),
            (this.m_nInitialVideoResolution = e);
        }
        return (
          (e.prototype.GetAverageBandwidth = function() {
            return this.m_nBandwidthTotal / Math.max(1, this.m_nEntries);
          }),
          (e.prototype.GetAverageDownloadTime = function() {
            return (
              this.m_nSegmentDownloadTimeTotalMS / Math.max(1, this.m_nEntries)
            );
          }),
          (e.prototype.GetAverageBandwidthFromTwo = function(e) {
            return (
              (e.m_nBandwidthTotal + this.m_nBandwidthTotal) /
              Math.max(1, e.m_nEntries + this.m_nEntries)
            );
          }),
          (e.prototype.GetAverageDownloadTimeFromTwo = function(e) {
            return (
              (e.m_nSegmentDownloadTimeTotalMS +
                this.m_nSegmentDownloadTimeTotalMS) /
              Math.max(1, e.m_nEntries + this.m_nEntries)
            );
          }),
          (e.prototype.SegmentReceived = function(e, t) {
            if (((this.m_nBytesReceived += e), !(e < 1024))) {
              var n = Math.round(8 * e * 1e3 / Math.max(t, 1));
              0 == this.m_nEntries
                ? ((this.m_nSegmentDownloadTimeMinMS = t),
                  (this.m_nBandwidthMin = n))
                : ((this.m_nSegmentDownloadTimeMinMS = Math.min(
                    t,
                    this.m_nSegmentDownloadTimeMinMS
                  )),
                  (this.m_nBandwidthMin = Math.min(n, this.m_nBandwidthMin))),
                (this.m_nBandwidthMax = Math.max(n, this.m_nBandwidthMax)),
                (this.m_nSegmentDownloadTimeMaxMS = Math.max(
                  t,
                  this.m_nSegmentDownloadTimeMaxMS
                )),
                (this.m_nBandwidthTotal += n),
                (this.m_nSegmentDownloadTimeTotalMS += t),
                (this.m_nEntries += 1);
            }
          }),
          R.c([m.observable], e.prototype, "m_nBytesReceived", void 0),
          R.c([m.observable], e.prototype, "m_nFailedSegments", void 0),
          R.c([m.observable], e.prototype, "m_nStallEvents", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_nSegmentDownloadTimeMaxMS",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_nSegmentDownloadTimeMinMS",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_nBandwidthMin", void 0),
          R.c([m.observable], e.prototype, "m_nBandwidthMax", void 0),
          R.c([m.observable], e.prototype, "m_nFramesDecoded", void 0),
          R.c([m.observable], e.prototype, "m_nFramesDropped", void 0),
          R.c([m.action], e.prototype, "SegmentReceived", null),
          e
        );
      })(),
      Fn = (function() {
        function e() {}
        return (
          (e.prototype.reset = function(e, t) {
            (this.bDropReading = e), (this.nTotalDecodedFrames = t);
          }),
          e
        );
      })(),
      Bn = (function() {
        function e() {
          (this.k_nTestFrequencyMS = 1e3),
            (this.k_nSlidingWindow = 6),
            (this.k_nDroppedFramesThreshold = 1),
            (this.k_nFailThreshold = 3),
            (this.k_nIgnoreReadingAroundResizeMS = 2e3),
            (this.m_schTracker = new T()),
            (this.m_rgResultsWindow = []),
            (this.m_nLastResizeMS = 0),
            (this.m_bDroppingFrameDetected = !1),
            (this.m_nCurrentFPS = 0);
        }
        return (
          (e.prototype.StartTracking = function(e) {
            this.m_schTracker.Schedule(
              this.k_nTestFrequencyMS,
              this.TakeReading
            ),
              (this.m_fnRequestDecoded = e),
              (this.m_lastFrameInfo = this.m_fnRequestDecoded()),
              (this.m_bDroppingFrameDetected = !1);
          }),
          (e.prototype.BHasCurrentFPS = function() {
            return 0 != this.m_nCurrentFPS;
          }),
          (e.prototype.GetCurrentFPS = function() {
            return this.m_nCurrentFPS;
          }),
          (e.prototype.BIsDroppingFrames = function() {
            return this.m_bDroppingFrameDetected;
          }),
          (e.prototype.SetWindowResized = function() {
            this.m_nLastResizeMS = Date.now();
          }),
          (e.prototype.BIsInResizeTimeWindow = function() {
            return (
              this.m_nLastResizeMS &&
              Date.now() - this.m_nLastResizeMS <
                this.k_nIgnoreReadingAroundResizeMS
            );
          }),
          (e.prototype.Close = function() {
            this.m_schTracker.Cancel(),
              (this.m_rgResultsWindow = []),
              (this.m_bDroppingFrameDetected = !1);
          }),
          (e.prototype.LogResizeAction = function() {
            this.m_nLastResizeMS = Date.now();
          }),
          (e.prototype.TakeReading = function() {
            this.m_schTracker.Schedule(
              this.k_nTestFrequencyMS,
              this.TakeReading
            );
            var e = !1,
              t = this.m_fnRequestDecoded();
            this.BIsInResizeTimeWindow() ||
              (e =
                0 < this.m_lastFrameInfo.framesDropped &&
                t.framesDropped - this.m_lastFrameInfo.framesDropped >
                  this.k_nDroppedFramesThreshold),
              this.AppendReading(e, t.framesDecoded),
              (this.m_bDroppingFrameDetected = this.ComputeDroppingFrames()),
              (this.m_nCurrentFPS =
                t.framesDecoded -
                this.m_lastFrameInfo.framesDecoded -
                (t.framesDropped - this.m_lastFrameInfo.framesDropped)),
              (this.m_lastFrameInfo = t);
          }),
          (e.prototype.ComputeDroppingFrames = function() {
            return (
              this.m_rgResultsWindow.length == this.k_nSlidingWindow &&
              this.m_rgResultsWindow.filter(function(e) {
                return e.bDropReading;
              }).length >= this.k_nFailThreshold
            );
          }),
          (e.prototype.AppendReading = function(e, t) {
            var n;
            (n =
              this.m_rgResultsWindow.length >= this.k_nSlidingWindow
                ? this.m_rgResultsWindow.shift()
                : new Fn()).reset(e, t),
              this.m_rgResultsWindow.push(n);
          }),
          R.c([m.observable], e.prototype, "m_bDroppingFrameDetected", void 0),
          R.c([m.observable], e.prototype, "m_nCurrentFPS", void 0),
          R.c([m.action.bound], e.prototype, "TakeReading", null),
          e
        );
      })();
    ((Gn = Tn || (Tn = {}))[(Gn.HAVE_NOTHING = 0)] = "HAVE_NOTHING"),
      (Gn[(Gn.HAVE_METADATA = 1)] = "HAVE_METADATA"),
      (Gn[(Gn.HAVE_CURRENT_DATA = 2)] = "HAVE_CURRENT_DATA"),
      (Gn[(Gn.HAVE_FUTURE_DATA = 3)] = "HAVE_FUTURE_DATA"),
      (Gn[(Gn.HAVE_ENOUGH_DATA = 4)] = "HAVE_ENOUGH_DATA");
    var Vn = (function() {
      function e(e) {
        (this.m_elVideo = null),
          (this.m_strMPD = ""),
          (this.m_schUpdateMPD = new T()),
          (this.m_bUseHLSManifest = !1),
          (this.m_strVideoAdaptationID = ""),
          (this.m_strAudioAdaptationID = ""),
          (this.m_strGameAdaptationID = ""),
          (this.m_rgLoaders = []),
          (this.m_mediaSource = null),
          (this.m_nTrackBufferMS = 0),
          (this.m_nLimitFPS = 0),
          (this.m_bIsBuffering = !0),
          (this.m_nSeekingToTime = -1),
          (this.m_listeners = new N()),
          (this.m_bFirstPlay = !0),
          (this.m_schGameDataEventTrigger = new T()),
          (this.m_schReportPlayerTrigger = new T()),
          (this.m_nGameDataLastFramePTS = -1),
          (this.m_bStatsViewVisible = !1),
          (this.m_schCaptureDisplayStatsTrigger = new T()),
          (this.m_videoRepSelected = null),
          (this.m_nAudioRepresentationIndex = 0),
          (this.m_stats = new An()),
          (this.m_bClosing = !1),
          (this.m_bUserPlayChoice = !0),
          (this.m_bUserLiveEdgeChoice = !0),
          (this.m_schFirstFrameThrottler = new T()),
          (this.m_elVideo = e),
          this.m_schReportPlayerTrigger.Schedule(3e4, this.ReportPlayerStats);
      }
      return (
        (e.prototype.CalcVideoStartRelativeToSystemClock = function(e) {
          var t = e ? new Date(e).getTime() : Date.now(),
            n =
              performance.now() -
              (t - this.m_mpd.GetAvailabilityStartTime().getTime());
          this.m_mpd.SetLiveContentStart(n), un("server time: " + e);
        }),
        (e.prototype.PlayMPD = function(n) {
          return R.b(this, void 0, void 0, function() {
            var t;
            return R.e(this, function(e) {
              switch (e.label) {
                case 0:
                  return (this.m_strMPD = n), [4, this.DownloadMPD()];
                case 1:
                  return (t = e.sent())
                    ? ((this.m_mpd = new En()),
                      this.m_mpd.BParse(t.data)
                        ? this.IsLiveContent()
                          ? (this.IsLiveContent() &&
                              (0 < this.m_mpd.GetMinimumUpdatePeriod() &&
                                this.m_schUpdateMPD.Schedule(
                                  1e3 * this.m_mpd.GetMinimumUpdatePeriod(),
                                  this.UpdateMPD
                                ),
                              this.CalcVideoStartRelativeToSystemClock(
                                t.headers.date
                              )),
                            this.m_bUseHLSManifest
                              ? this.CloseWithError(
                                  "playbackerror",
                                  "HLS manifest not yet supported"
                                )
                              : this.BCreateLoaders()
                                ? (this.m_stats.SetSegmentDurationMS(
                                    yn(this.GetCurrentVideoAdaptation())
                                  ),
                                  this.m_stats.SetAnalyticLinks(
                                    this.m_mpd.GetStatsLink(),
                                    this.m_mpd.GetStalledLink(),
                                    this.m_mpd.GetEventLink()
                                  ),
                                  this.m_stats.SetVideoInitializationURL(
                                    this.GetCurrentVideoAdaptation()
                                      .segmentTemplate.strInitialization
                                  ),
                                  this.InitVideoControl())
                                : this.CloseWithError(
                                    "playbackerror",
                                    "Failed to create segment loaders"
                                  ),
                            [2])
                          : (this.CloseWithError(
                              "playbackerror",
                              "Only live content is currently supported",
                              this.m_strMPD
                            ),
                            [2])
                        : (this.CloseWithError(
                            "playbackerror",
                            "Failed to parse MPD file",
                            this.m_strMPD
                          ),
                          [2]))
                    : [2];
              }
            });
          });
        }),
        (e.prototype.Close = function() {
          if (
            ((this.m_bClosing = !0),
            this.m_listeners.Unregister(),
            this.StopDownloads(),
            this.m_elVideo.pause(),
            this.m_mediaSource)
          ) {
            try {
              "closed" != this.m_mediaSource.readyState &&
                this.m_mediaSource.endOfStream();
            } catch (e) {}
            this.m_mediaSource = null;
          }
          (this.m_bIsBuffering = !0),
            (this.m_elVideo = null),
            (this.m_strMPD = ""),
            (this.m_mpd = null),
            (this.m_bUseHLSManifest = !1),
            (this.m_strVideoAdaptationID = ""),
            (this.m_strAudioAdaptationID = ""),
            (this.m_strGameAdaptationID = ""),
            (this.m_nTrackBufferMS = 0),
            (this.m_nLimitFPS = 0),
            (this.m_nSeekingToTime = -1),
            (this.m_nGameDataLastFramePTS = -1),
            (this.m_bStatsViewVisible = !1),
            (this.m_videoRepSelected = null),
            (this.m_nAudioRepresentationIndex = 0),
            this.m_stats && this.m_stats.GetFPSMonitor().Close(),
            (this.m_stats = null),
            (this.m_bFirstPlay = !0);
        }),
        (e.prototype.StopDownloads = function() {
          this.m_xhrUpdateMPD &&
            (this.m_xhrUpdateMPD.cancel(), (this.m_xhrUpdateMPD = null)),
            this.m_schUpdateMPD.Cancel(),
            this.m_schGameDataEventTrigger.Cancel(),
            this.m_schReportPlayerTrigger.Cancel(),
            this.m_schCaptureDisplayStatsTrigger.Cancel(),
            this.m_schFirstFrameThrottler.Cancel(),
            1 != this.m_elVideo.playbackRate &&
              (this.m_elVideo.playbackRate = 1);
          for (var e = 0, t = this.m_rgLoaders; e < t.length; e++) {
            t[e].Close();
          }
          this.m_bIsBuffering = !0;
        }),
        (e.prototype.IsBuffering = function() {
          return this.m_bIsBuffering;
        }),
        (e.prototype.IsLiveContent = function() {
          return !!this.m_mpd && "dynamic" == this.m_mpd.GetType();
        }),
        (e.prototype.DownloadMPD = function() {
          return R.b(this, void 0, void 0, function() {
            var n, o;
            return R.e(this, function(e) {
              switch (e.label) {
                case 0:
                  if (this.m_xhrUpdateMPD)
                    return (
                      AssertMsg(!1, "Multiple MPD download requests"), [2, null]
                    );
                  (n = performance.now()), (e.label = 1);
                case 1:
                  if (!(performance.now() - n < 3e4)) return [3, 7];
                  (o = null), (e.label = 2);
                case 2:
                  return (
                    e.trys.push([2, 4, , 5]),
                    (this.m_xhrUpdateMPD = C.a.CancelToken.source()),
                    [
                      4,
                      C.a.get(this.m_strMPD, {
                        cancelToken: this.m_xhrUpdateMPD.token
                      })
                    ]
                  );
                case 3:
                  return (o = e.sent()), [3, 5];
                case 4:
                  return e.sent(), [3, 5];
                case 5:
                  return (
                    (this.m_xhrUpdateMPD = null),
                    this.m_bClosing
                      ? [2, null]
                      : o && 200 == o.status
                        ? [2, o]
                        : (un(
                            "Failed to download, will retry: " + this.m_strMPD
                          ),
                          [
                            4,
                            ((t = 200),
                            new Promise(function(e) {
                              return setTimeout(e, t);
                            }))
                          ])
                  );
                case 6:
                  return e.sent(), [3, 1];
                case 7:
                  return un("Failed to download: " + this.m_strMPD), [2, null];
              }
              var t;
            });
          });
        }),
        (e.prototype.UpdateMPD = function() {
          return R.b(this, void 0, void 0, function() {
            var t;
            return R.e(this, function(e) {
              switch (e.label) {
                case 0:
                  return [4, this.DownloadMPD()];
                case 1:
                  return (
                    (t = e.sent()) &&
                      (this.m_mpd.BUpdate(t.data)
                        ? (this.CalcVideoStartRelativeToSystemClock(
                            t.headers.date
                          ),
                          this.m_stats.SetAnalyticLinks(
                            this.m_mpd.GetStatsLink(),
                            this.m_mpd.GetStalledLink(),
                            this.m_mpd.GetEventLink()
                          ),
                          0 < this.m_mpd.GetMinimumUpdatePeriod() &&
                            this.m_schUpdateMPD.Schedule(
                              1e3 * this.m_mpd.GetMinimumUpdatePeriod(),
                              this.UpdateMPD
                            ))
                        : this.CloseWithError(
                            "playbackerror",
                            "Failed to parse on Update the MPD file"
                          )),
                    [2]
                  );
              }
            });
          });
        }),
        (e.prototype.CloseWithError = function(e) {
          for (var t = [], n = 1; n < arguments.length; n++)
            t[n - 1] = arguments[n];
          this.Close(), un.apply(void 0, t);
        }),
        (e.prototype.BCreateLoaders = function() {
          var e = this.m_mpd.GetPeriods();
          if (0 == e.length) return !1;
          var t = e[0];
          (this.m_strVideoAdaptationID = ""),
            (this.m_strAudioAdaptationID = ""),
            (this.m_strGameAdaptationID = "");
          for (var n = 0, o = t.rgAdaptationSets; n < o.length; n++) {
            var i = o[n],
              r = null;
            if (
              (!this.m_strVideoAdaptationID &&
                i.bContainsVideo &&
                Sn(i) &&
                ((r = i), (this.m_strVideoAdaptationID = i.strID)),
              !this.m_strAudioAdaptationID &&
                i.bContainsAudio &&
                Sn(i) &&
                ((r = i), (this.m_strAudioAdaptationID = i.strID)),
              !this.m_strGameAdaptationID &&
                i.bContainsGame &&
                ((r = i), (this.m_strGameAdaptationID = i.strID)),
              r)
            ) {
              var a = new wn(this, this.m_mpd, r, this.m_stats);
              this.m_rgLoaders.push(a);
            }
          }
          return 0 < this.m_strVideoAdaptationID.length;
        }),
        (e.prototype.InitVideoControl = function() {
          var e = new MediaSource(),
            t = URL.createObjectURL(e);
          this.m_elVideo.pause(),
            (this.m_elVideo.src = t),
            (this.m_mediaSource = e),
            this.m_listeners.AddEventListener(
              e,
              "sourceopen",
              this.OnMediaSourceOpen
            ),
            this.m_listeners.AddEventListener(
              e,
              "sourceended",
              this.OnMediaSourceEnded
            ),
            this.m_listeners.AddEventListener(
              e,
              "sourceclose",
              this.OnMediaSourceClose
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "waiting",
              this.OnVideoWaiting
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "error",
              this.OnVideoError
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "canplay",
              this.OnVideoCanPlay
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "pause",
              this.OnVideoPause
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "resize",
              this.OnVideoResize
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "valve-bufferupdate",
              this.OnVideoTimeUpdate
            ),
            this.m_listeners.AddEventListener(
              this.m_elVideo,
              "timeupdate",
              this.OnVideoTimeUpdate
            );
        }),
        (e.prototype.OnMediaSourceOpen = function(e) {
          un("OnMediaSourceOpen");
          for (var t = 0, n = this.m_rgLoaders; t < n.length; t++) {
            n[t].SetMediaSource(this.m_mediaSource);
          }
          this.BeginPlayback();
        }),
        (e.prototype.OnMediaSourceEnded = function(e) {
          un("OnMediaSourceEnded");
        }),
        (e.prototype.OnMediaSourceClose = function(e) {
          un("OnMediaSourceClose");
        }),
        (e.prototype.OnVideoWaiting = function(e) {
          if (
            !this.BIsPlayerBufferedBetween(
              this.m_elVideo.currentTime,
              this.m_elVideo.currentTime + 0.5
            )
          ) {
            if (this.m_elVideo && 1 < this.m_elVideo.buffered.length)
              for (
                var t = this.m_elVideo.currentTime,
                  n = this.m_elVideo.buffered,
                  o = 0;
                o < n.length;
                ++o
              )
                if (
                  (un(
                    "OnVideoWaiting buffer " +
                      o +
                      " start:" +
                      n.start(o) +
                      " end: " +
                      n.end(o) +
                      " playerTime: " +
                      t
                  ),
                  n.start(o) <= t && t <= n.end(o))
                )
                  return (
                    un(
                      "OnVideoWaiting - time splitting, jumping to buffer " + o
                    ),
                    void this.Seek(n.start(o))
                  );
            if (
              (this.m_stats.ReportVideoStalled(
                this.m_rgLoaders,
                this.m_elVideo
              ),
              null === this.m_videoRepSelected)
            ) {
              var i = !0,
                r = this.GetVideoLoader();
              if (r) {
                var a = this.m_mpd.GetLowestRepresentation(
                  this.GetCurrentVideoAdaptation().strID
                );
                a &&
                  !r.BIsCurrentRepresentation(a) &&
                  (r.ChangeRepresentation(a),
                  un(
                    "OnVideoWaiting - Stalled, forced restart download at resolution: " +
                      a.nWidth +
                      "x" +
                      a.nHeight +
                      "@" +
                      a.nFrameRate +
                      " instead"
                  ),
                  (i = !1)),
                  this.Seek(this.m_elVideo.currentTime);
              }
              i &&
                un(
                  "OnVideoWaiting - Stalled, already at lowest resolution. No action taken. BHasLoader: " +
                    (null != r)
                );
            } else
              un(
                "OnVideoWaiting - Stalled, user explicitly chose a resolution: " +
                  this.m_videoRepSelected.nWidth +
                  "x" +
                  this.m_videoRepSelected.nHeight +
                  "@" +
                  this.m_videoRepSelected.nFrameRate
              );
          }
        }),
        (e.prototype.OnVideoPause = function(e) {
          this.OnVideoBufferProgress(), this.m_stats.GetFPSMonitor().Close();
        }),
        (e.prototype.OnVideoResize = function(e) {
          this.m_stats.GetFPSMonitor().SetWindowResized();
        }),
        (e.prototype.OnDebugPrintEventInfoAndAvailableBuffer = function(e) {
          var t = -1,
            n = this.GetVideoLoader();
          this.m_elVideo &&
            n &&
            (t = n.GetAmountBufferedInPlayerMS(this.m_elVideo.currentTime)),
            un("DebugMessage - Stats: " + e.type + " BufferedMS: " + t);
        }),
        (e.prototype.OnVideoError = function(e) {
          un("OnVideoError");
        }),
        (e.prototype.OnVideoCanPlay = function(e) {
          this.m_bIsBuffering ||
            (this.m_bUserPlayChoice && this.PlayOnElement(),
            this.m_stats.LogVideoOnCanPlay(e));
        }),
        (e.prototype.GetCurrentPlayTime = function() {
          return -1 != this.m_nSeekingToTime
            ? this.m_nSeekingToTime
            : this.m_elVideo.currentTime;
        }),
        (e.prototype.OnVideoTimeUpdate = function() {
          if (this.m_bUserLiveEdgeChoice && this.IsLiveContent()) {
            var e = this.GetBufferedLiveEdgeTime();
            if (
              1 == this.m_elVideo.playbackRate &&
              this.m_elVideo.currentTime <= e - 4.5 &&
              this.BIsPlayerBufferedBetween(this.m_elVideo.currentTime, e)
            ) {
              var t = e - this.m_elVideo.currentTime;
              (this.m_elVideo.playbackRate = 1.1),
                un(
                  "User is behind by " +
                    t.toFixed(2) +
                    " seconds, increasing playback speed to catch-up to live edge."
                );
            } else
              1.1 == this.m_elVideo.playbackRate &&
                this.m_elVideo.currentTime >= e - 1 &&
                ((this.m_elVideo.playbackRate = 1),
                un("User is caught up, returning to normal playrate"));
          }
        }),
        (e.prototype.BIsPlayerBufferedBetween = function(e, t) {
          return (
            0 < this.m_elVideo.buffered.length &&
            e >= this.m_elVideo.buffered.start(0) &&
            t <= this.m_elVideo.buffered.end(0)
          );
        }),
        (e.prototype.GetLiveContentStartTime = function() {
          return this.m_mpd.GetAvailabilityStartTime();
        }),
        (e.prototype.GetAvailableVideoStartTime = function() {
          if (!this.IsLiveContent()) return 0;
          var e = Math.floor(
              (performance.now() - this.m_mpd.GetLiveContentStart()) / 1e3
            ),
            t = this.GetBufferedLiveEdgeTime();
          return ln(e - this.m_mpd.GetTimeShiftBufferDepth() + 10, 0, t);
        }),
        (e.prototype.GetBufferedLiveEdgeTime = function() {
          return this.IsLiveContent()
            ? Math.floor(
                (performance.now() -
                  this.m_mpd.GetLiveContentStart() -
                  this.m_nTrackBufferMS) /
                  1e3
              )
            : this.m_mpd.GetPeriodDuration(0) - 1;
        }),
        (e.prototype.IsPaused = function() {
          return this.m_elVideo.paused;
        }),
        (e.prototype.Play = function() {
          (this.m_bUserPlayChoice = !0), this.Seek(this.m_elVideo.currentTime);
        }),
        (e.prototype.Pause = function() {
          (this.m_bUserLiveEdgeChoice = !1),
            1.1 == this.m_elVideo.playbackRate &&
              (this.m_elVideo.playbackRate = 1),
            (this.m_bUserPlayChoice = !1),
            this.m_elVideo.pause();
        }),
        (e.prototype.GetPlaybackRate = function() {
          return this.m_elVideo.paused ? 0 : this.m_elVideo.playbackRate;
        }),
        (e.prototype.OnSegmentDownloaded = function(e) {
          un(e.GetDebugName() + " OnSegmentDownloaded"),
            this.UpdateVideoRepresentation(this.m_videoRepSelected),
            this.OnVideoBufferProgress(),
            e == this.GetVideoLoader() &&
              this.m_stats.SetCurrentVideoBandwidth(e.GetAvgDownloadRate());
        }),
        (e.prototype.PlayOnElement = function() {
          var t = this,
            n = this.m_bFirstPlay;
          this.m_bFirstPlay = !1;
          var e = this.m_elVideo.play();
          e ||
            this.m_stats.GetFPSMonitor().StartTracking(function() {
              return t.m_stats.ExtractFrameInfo(t.m_elVideo);
            }),
            e
              .then(function() {
                t.m_stats.GetFPSMonitor().StartTracking(function() {
                  return t.m_stats.ExtractFrameInfo(t.m_elVideo);
                });
              })
              .catch(function(e) {
                n && t.DispatchEvent("valve-userinputneeded");
              });
        }),
        (e.prototype.OnVideoBufferProgress = function() {
          if (this.IsBuffering()) {
            for (
              var e = 0 < this.m_rgLoaders.length,
                t = -1 != this.m_nSeekingToTime ? this.m_nSeekingToTime : 0,
                n = 0,
                o = this.m_rgLoaders;
              n < o.length;
              n++
            ) {
              var i = o[n];
              if (!i.BHasEnoughBuffered(t)) {
                e = !1;
                break;
              }
              t = Math.max(t, i.GetBufferedStart());
            }
            e &&
              ((this.m_bIsBuffering = !1),
              (this.m_nSeekingToTime = -1),
              this.m_elVideo.currentTime != t
                ? (this.m_elVideo.currentTime = t)
                : this.m_elVideo.paused &&
                  this.m_bUserPlayChoice &&
                  this.PlayOnElement(),
              this.DispatchEvent("valve-bufferupdate"));
          }
        }),
        (e.prototype.OnSegmentDownloadFailed = function(e) {
          this.StopDownloads(), this.DispatchEvent("valve-downloadfailed");
        }),
        (e.prototype.OnSegmentDownloadGone = function(e) {
          this.m_bIsBuffering && e.GetNumConsecutiveDownloadGones() <= 3
            ? this.Seek(
                this.GetCurrentPlayTime() +
                  yn(this.GetCurrentVideoAdaptation()) / 1e3
              )
            : (un(
                "OnSegmentDownloadGone: too many consecutive 'gone', erroring the download: " +
                  e.GetNumConsecutiveDownloadGones()
              ),
              this.OnSegmentDownloadFailed(e));
        }),
        (e.prototype.GetCurrentAudioAdaptationfunction = function() {
          return this.m_mpd
            ? this.m_mpd.GetAdaptationByTrackID(this.m_strAudioAdaptationID)
            : null;
        }),
        (e.prototype.GetCurrentVideoAdaptation = function() {
          return this.m_mpd
            ? this.m_mpd.GetAdaptationByTrackID(this.m_strVideoAdaptationID)
            : null;
        }),
        (e.prototype.GetVideoLoader = function() {
          for (var e = 0, t = this.m_rgLoaders; e < t.length; e++) {
            var n = t[e];
            if (n.ContainsVideo()) return n;
          }
          return null;
        }),
        (e.prototype.GetAudioLoader = function() {
          for (var e = 0, t = this.m_rgLoaders; e < t.length; e++) {
            var n = t[e];
            if (n.ContainsAudio()) return n;
          }
          return null;
        }),
        (e.prototype.GetGameLoader = function() {
          for (var e = 0, t = this.m_rgLoaders; e < t.length; e++) {
            var n = t[e];
            if (n.ContainsGame()) return n;
          }
          return null;
        }),
        (e.prototype.SetTrackBufferMS = function(e) {
          this.m_nTrackBufferMS = e;
          for (var t = 0, n = this.m_rgLoaders; t < n.length; t++) {
            n[t].SetBufferMS(e);
          }
        }),
        (e.prototype.BeginPlayback = function() {
          var e = 0;
          if (this.IsLiveContent()) {
            var t = yn(this.GetCurrentVideoAdaptation()),
              n = 1e3 * this.m_mpd.GetMinBufferTime(),
              o = Math.max(t, n);
            this.SetTrackBufferMS(o),
              (e = this.GetBufferedLiveEdgeTime()),
              un(
                "Begin playback [this.buffer=" +
                  this.m_nTrackBufferMS +
                  "][nStartTime=" +
                  e +
                  "]"
              );
          } else this.SetTrackBufferMS(8e3), (e = 0);
          un("Starting playback at " + e);
          for (
            var i = this.PickStartingVideoRepresentation(),
              r = 0,
              a = this.m_rgLoaders;
            r < a.length;
            r++
          ) {
            var s = a[r];
            if (s.ContainsVideo()) {
              s.ChangeRepresentation(i);
              t = yn(s.GetAdaptation());
              this.m_schFirstFrameThrottler.Schedule(
                t / 2,
                this.VerifyFirstSegementDownloadProgress
              );
            } else if (s.ContainsAudio() || s.ContainsGame()) {
              var c =
                0 < s.GetAdaptation().rgRepresentations.length
                  ? s.GetAdaptation().rgRepresentations[0]
                  : null;
              s.ChangeRepresentation(c);
            }
          }
          this.Seek(e),
            this.GetGameLoader() &&
              this.m_schGameDataEventTrigger.Schedule(
                500,
                this.GameDataEventTrigger
              );
        }),
        (e.prototype.VerifyFirstSegementDownloadProgress = function() {
          var e = this.GetVideoLoader();
          if (
            null === this.m_videoRepSelected &&
            e &&
            e.GetDownloadHistory().length <= 1 &&
            0 < e.GetActiveDownloads() &&
            e.GetActiveDownloadProgress() < 0.55
          ) {
            var t = this.DetermineBestVideoRepresentation();
            t &&
              !e.BIsCurrentRepresentation(t) &&
              (e.ChangeRepresentation(t),
              e.ForceRestartDownload(),
              un(
                "Video download progressing too slowly, choosing " +
                  t.nWidth +
                  "x" +
                  t.nHeight +
                  "@" +
                  t.nFrameRate +
                  " instead"
              ));
          }
        }),
        (e.prototype.PickStartingVideoRepresentation = function() {
          var e = this.GetVideoLoader();
          if (!e) return null;
          for (
            var t = e.GetAdaptation(),
              n = null,
              o = e.GetRepresentationsCount() - 1;
            0 <= o;
            o--
          ) {
            var i = t.rgRepresentations[o],
              r = i.nFrameRate ? i.nFrameRate : 0;
            if (
              !(0 < this.m_nLimitFPS && r > this.m_nLimitFPS) &&
              ((n = i), this.GetVideoPlayerHeight() <= i.nHeight)
            )
              break;
          }
          return n;
        }),
        (e.prototype.DetermineBestVideoRepresentation = function() {
          for (
            var e = this.GetVideoLoader(),
              t = this.GetAudioLoader(),
              n = t && t != e ? t.GetEstimatedAudioRate() : 0,
              o = this.GetAvgLoaderDownloadRate(),
              i = e.GetRepresentationsCount() - 1,
              r = e.GetAdaptation().rgRepresentations[i],
              a = i - 1;
            0 <= a;
            a--
          ) {
            var s = e.GetAdaptation().rgRepresentations[a],
              c = (s.nBandwidth + n) * this.m_elVideo.playbackRate * 1.15;
            if (o < c)
              un(
                "Video select: Skipping " +
                  a +
                  " due to rate: [avg=" +
                  o +
                  "][required=" +
                  c +
                  "]"
              );
            else {
              var l = s.nFrameRate || 0;
              if (this.IsLiveContent() && 30 < l) {
                var p = this.m_stats.GetFPSMonitor();
                if (
                  p.BIsDroppingFrames() ||
                  (p.BHasCurrentFPS() && Math.ceil(p.GetCurrentFPS()) < 29)
                ) {
                  un(
                    "Video select: Skipping " +
                      a +
                      " due to dropping frames and high FPS representation: [fps:" +
                      l +
                      "]"
                  );
                  continue;
                }
              }
              if (0 < this.m_nLimitFPS && l > this.m_nLimitFPS)
                un("Video select: Skipping " + a + " due to frame rate limit");
              else {
                var u = r.nHeight || 0,
                  m = s.nHeight || 0,
                  d = this.GetVideoPlayerHeight();
                if (0 < d && 0 < u) if (xn(d) < m) break;
                r = s;
              }
            }
          }
          return r;
        }),
        (e.prototype.UpdateVideoRepresentation = function(e) {
          if (e && this.m_videoRepSelected == e) return null;
          var t = this.GetVideoLoader();
          if (!t) return null;
          if (this.IsBuffering()) return null;
          var n = this.DetermineBestVideoRepresentation();
          return (this.m_videoRepSelected = null), t.ChangeRepresentation(n);
        }),
        (e.prototype.SeekAndPlay = function(e) {
          return (this.m_bUserPlayChoice = !0), this.Seek(e);
        }),
        (e.prototype.Seek = function(e) {
          var t = this.GetAvailableVideoStartTime(),
            n = this.GetBufferedLiveEdgeTime();
          (e = ln(e, t, n)), (this.m_bUserLiveEdgeChoice = n - 5 <= e);
          var o = this.m_elVideo.paused;
          o || this.m_elVideo.pause(),
            (this.m_bIsBuffering = !0),
            (this.m_nSeekingToTime = e);
          for (var i = 0, r = this.m_rgLoaders; i < r.length; i++) {
            var a = r[i];
            a.ContainsGame() && (e = this.GetBufferedLiveEdgeTime()), a.Seek(e);
          }
          return (
            this.DispatchEvent("valve-bufferupdate"),
            o && this.OnVideoBufferProgress(),
            e
          );
        }),
        (e.prototype.JumpTime = function(e) {
          return (e += this.GetCurrentPlayTime()), this.Seek(e);
        }),
        (e.prototype.GetVideoPlayerHeight = function() {
          return this.m_elVideo.clientHeight;
        }),
        (e.prototype.GetAvgLoaderDownloadRate = function() {
          for (
            var e = 0, t = 0, n = 0, o = [this.GetVideoLoader()];
            n < o.length;
            n++
          ) {
            var i = o[n];
            i && ((e += i.GetAvgDownloadRate()), t++);
          }
          return 0 == t ? 0 : e / t;
        }),
        (e.prototype.GameDataEventTrigger = function() {
          var e = this.GetGameLoader();
          if (e) {
            var t = e.GetGameDataFrames(),
              n = -1;
            if (0 <= (n = t.length - 1)) {
              var o = t[n];
              o.pts != this.m_nGameDataLastFramePTS &&
                ((this.m_nGameDataLastFramePTS = o.pts),
                (o.gamedata.appid = e.GetLatestGameDataFrameAppID()),
                this.DispatchEvent("valve-gamedataupdate", o));
            }
            this.m_schGameDataEventTrigger.Schedule(
              500,
              this.GameDataEventTrigger
            );
          }
        }),
        (e.prototype.DispatchEvent = function(e, t) {
          void 0 === t && (t = null);
          var n = new CustomEvent(e, {
            cancelable: !0,
            bubbles: !0,
            detail: t
          });
          this.m_elVideo.dispatchEvent(n);
        }),
        (e.prototype.IsMuted = function() {
          return this.m_elVideo.muted;
        }),
        (e.prototype.SetMuted = function(e) {
          this.m_elVideo.muted = e;
        }),
        (e.prototype.SetVolume = function(e) {
          (e = ln(e, 0, 1)), (this.m_elVideo.volume = e);
        }),
        (e.prototype.GetVolume = function() {
          return this.m_elVideo.volume;
        }),
        (e.prototype.GetDASHPlayerStats = function() {
          return this.m_stats;
        }),
        (e.prototype.ReportPlayerStats = function() {
          this.m_stats.ReportPlayerStats(this.m_rgLoaders, this.m_elVideo),
            this.m_schReportPlayerTrigger.Schedule(3e5, this.ReportPlayerStats);
        }),
        (e.prototype.SetStatsViewIsVisible = function(e) {
          e && !this.m_bStatsViewVisible
            ? (this.CaptureStatsForDisplay(),
              this.m_schCaptureDisplayStatsTrigger.Schedule(
                250,
                this.CaptureStatsForDisplay
              ))
            : !e &&
              this.m_bStatsViewVisible &&
              this.m_schCaptureDisplayStatsTrigger.Cancel(),
            (this.m_bStatsViewVisible = e);
        }),
        (e.prototype.CaptureStatsForDisplay = function() {
          this.m_stats.SetHTMLVideoPlayerDisplay(
            this.m_elVideo.videoWidth,
            this.m_elVideo.videoHeight,
            this.m_elVideo.clientWidth,
            this.m_elVideo.clientHeight
          ),
            this.m_stats.CaptureFrequentlyUpdatingInformation(
              this.m_elVideo,
              this.m_rgLoaders
            ),
            this.m_schCaptureDisplayStatsTrigger.Schedule(
              250,
              this.CaptureStatsForDisplay
            );
        }),
        (e.prototype.GetVideoRepresentations = function() {
          var e = [];
          e.push({
            id: "auto",
            displayName: "Auto",
            selected: null === this.m_videoRepSelected
          });
          var t = this.GetCurrentVideoAdaptation();
          if (t)
            for (var n = 0, o = t.rgRepresentations; n < o.length; n++) {
              var i = o[n],
                r =
                  this.m_videoRepSelected &&
                  this.m_videoRepSelected.strID == i.strID,
                a = i.nFrameRate;
              50 < a && i.nFrameRate < 70
                ? (a = 60)
                : 25 < a && a < 35 && (a = 30);
              var s = i.nWidth + "x" + i.nHeight + " @ " + a + "fps";
              e.push({ id: i.strID, displayName: s, selected: r });
            }
          return e;
        }),
        (e.prototype.SetVideoRepresentation = function(e) {
          var t = !0,
            n = this.GetVideoLoader();
          if (e && "auto" != e.id) {
            var o = n.GetRepresentationByID(e.id);
            o &&
              ((t = !1),
              (null !== this.m_videoRepSelected &&
                this.m_videoRepSelected.strID == o.strID) ||
                ((this.m_videoRepSelected = o),
                n.ChangeRepresentation(o),
                this.Seek(this.m_elVideo.currentTime)));
          }
          t && (this.m_videoRepSelected = null);
        }),
        R.c([M.a], e.prototype, "UpdateMPD", null),
        R.c([M.a], e.prototype, "OnMediaSourceOpen", null),
        R.c([M.a], e.prototype, "OnMediaSourceEnded", null),
        R.c([M.a], e.prototype, "OnMediaSourceClose", null),
        R.c([M.a], e.prototype, "OnVideoWaiting", null),
        R.c([M.a], e.prototype, "OnVideoPause", null),
        R.c([M.a], e.prototype, "OnVideoResize", null),
        R.c(
          [M.a],
          e.prototype,
          "OnDebugPrintEventInfoAndAvailableBuffer",
          null
        ),
        R.c([M.a], e.prototype, "OnVideoError", null),
        R.c([M.a], e.prototype, "OnVideoCanPlay", null),
        R.c([M.a], e.prototype, "GetCurrentPlayTime", null),
        R.c([M.a], e.prototype, "OnVideoTimeUpdate", null),
        R.c([M.a], e.prototype, "GetPlaybackRate", null),
        R.c([M.a], e.prototype, "OnSegmentDownloaded", null),
        R.c([M.a], e.prototype, "PlayOnElement", null),
        R.c([M.a], e.prototype, "OnSegmentDownloadFailed", null),
        R.c([M.a], e.prototype, "OnSegmentDownloadGone", null),
        R.c([M.a], e.prototype, "VerifyFirstSegementDownloadProgress", null),
        R.c([M.a], e.prototype, "GameDataEventTrigger", null),
        R.c([M.a], e.prototype, "ReportPlayerStats", null),
        R.c([m.action.bound], e.prototype, "CaptureStatsForDisplay", null),
        e
      );
    })();
    function xn(e) {
      return e < 360 ? 480 : e < 480 ? 720 : 4320;
    }
    var Un,
      jn,
      Hn = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return R.d(t, e), t;
      })(Error),
      Wn = (function(n) {
        function e(e) {
          var t = n.call(this) || this;
          return (
            (t.m_appid = e || 0),
            (t.m_appLocalizationMap =
              0 != e ? Yo.AppInfoStore.GetRichPresenceLoc(t.m_appid) : null),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.parseColor = function(e) {
            if ("string" != typeof e || !e.match(/^#[0-9a-fA-F]{6}$/))
              throw new Hn("expected color string");
            return [
              parseInt(e.substring(1, 3), 16),
              parseInt(e.substring(3, 5), 16),
              parseInt(e.substring(5, 7), 16)
            ];
          }),
          (e.prototype.parseString = function(e) {
            if ("string" == typeof e) return e;
            throw new Hn("expected string");
          }),
          (e.prototype.parseNumber = function(e) {
            if ("number" == typeof e) return e;
            throw new Hn("expected number");
          }),
          (e.prototype.parseDate = function(e) {
            if ("number" == typeof e) return new Date(e);
            throw new Hn("expected timestamp");
          }),
          (e.prototype.parseArray = function(e, t) {
            var n = [];
            if ("object" != typeof e || !Array.isArray(e))
              throw new Hn("expected array");
            for (var o = e.length, i = 0; i < o; ++i)
              try {
                n.push(t(e[i]));
              } catch (e) {
                throw ((e.message += "\n...while parsing array element " + i),
                e);
              }
            return n;
          }),
          (e.prototype.parseDict = function(e, t) {
            var n = new Map();
            if ("object" != typeof e || Array.isArray(e))
              throw new Hn("expected object");
            for (var o in e)
              try {
                n.set(o, t(e[o]));
              } catch (e) {
                throw ((e.message +=
                  "\n...while parsing dictionary element " + o),
                e);
              }
            return n;
          }),
          (e.prototype.parseBracket = function(e) {
            var t = {
              name: this.parseString(e.name),
              start: this.parseDate(e.start),
              color: [255, 0, 255]
            };
            return (
              "params" in e &&
                (t.params = this.parseDict(
                  e.params,
                  this.parseString.bind(this)
                )),
              "end" in e && (t.end = this.parseDate(e.end)),
              "color" in e && (t.color = this.parseColor(e.color)),
              t
            );
          }),
          (e.prototype.parseMarker = function(e) {
            var t = { time: this.parseDate(e.time), color: [0, 255, 255] };
            return (
              "name" in e && (t.name = this.parseString(e.name)),
              "params" in e &&
                (t.params = this.parseDict(
                  e.params,
                  this.parseString.bind(this)
                )),
              "color" in e && (t.color = this.parseColor(e.color)),
              t
            );
          }),
          (e.prototype.parseBroadcastGameData = function(e) {
            var t = { appid: 0, brackets: [], markers: [] };
            return (
              "appid" in e && (t.appid = this.parseNumber(e.appid)),
              "brackets" in e &&
                (t.brackets = this.parseArray(
                  e.brackets,
                  this.parseBracket.bind(this)
                )),
              "markers" in e &&
                (t.markers = this.parseArray(
                  e.markers,
                  this.parseMarker.bind(this)
                )),
              t
            );
          }),
          (e.prototype.convertTime = function(e, t) {
            return e.getTime() / 1e3 - t;
          }),
          (e.prototype.LocalizeTokenIfPossible = function(e, t) {
            if (null == this.m_appLocalizationMap) return e;
            var n = G.a.LANGUAGE;
            return Q(
              e,
              this.m_appLocalizationMap.GetTokenList(n),
              "english" != n
                ? this.m_appLocalizationMap.GetTokenList("english")
                : null,
              this.m_appid,
              t
            );
          }),
          (e.prototype.UpdateMarkers = function(t, e) {
            var n;
            try {
              n = this.parseBroadcastGameData(t);
            } catch (e) {
              return (
                console.log("failed to parse game data: " + e),
                console.log(t),
                null
              );
            }
            n.markers.sort(function(e, t) {
              return e.time.getTime() - t.time.getTime();
            }),
              n.brackets.sort(function(e, t) {
                return e.start.getTime() - t.start.getTime();
              });
            for (var o = 0; o < n.brackets.length; ++o) {
              void 0 === (c = n.brackets[o]).end
                ? o < n.brackets.length - 1
                  ? (c.end = n.brackets[o + 1].start)
                  : (c.end = new Date(Date.now() + 36e5))
                : c.start.getTime() > c.end.getTime() && (c.end = c.start);
            }
            var i = [],
              r = [],
              a = e / 1e3;
            for (o = 0; o < n.markers.length; ++o) {
              var s = n.markers[o];
              i.push({
                nTime: this.convertTime(s.time, a),
                strLabel: this.LocalizeTokenIfPossible(s.name, s.params),
                color: Object(M.b)(s.color[0], s.color[1], s.color[2])
              });
            }
            for (o = 0; o < n.brackets.length; ++o) {
              var c = n.brackets[o];
              r.push({
                nTimeStart: this.convertTime(c.start, a),
                nTimeEnd: this.convertTime(c.end, a),
                strLabel: this.LocalizeTokenIfPossible(c.name, c.params),
                color: Object(M.b)(c.color[0], c.color[1], c.color[2])
              });
            }
            return { rgMarkers: i, rgSegments: r };
          }),
          e
        );
      })(q);
    ((jn = Un || (Un = {}))[(jn.None = 0)] = "None"),
      (jn[(jn.Loading = 1)] = "Loading"),
      (jn[(jn.Ready = 2)] = "Ready"),
      (jn[(jn.Error = 3)] = "Error");
    var zn,
      qn,
      Kn = (function() {
        function e() {
          (this.m_steamIDBroadcast = ""),
            (this.m_ulBroadcastID = ""),
            (this.m_strMPD = ""),
            (this.m_nHeartbeatInterval = 30),
            (this.m_eWatchState = Un.None),
            (this.m_strStateDescription = ""),
            (this.m_rgVideos = []),
            (this.m_rgChats = []),
            (this.m_schManifestTimeout = new T()),
            (this.m_schHeartbeatTimeout = new T());
        }
        return (
          (e.prototype.SetState = function(e, t) {
            void 0 === t && (t = ""),
              (this.m_eWatchState = e),
              (this.m_strStateDescription = t),
              e == Un.Error && console.log(this.m_strStateDescription);
          }),
          (e.prototype.GetVideoData = function(t) {
            return this.m_rgVideos.find(function(e) {
              return e.video == t;
            });
          }),
          R.c([m.observable], e.prototype, "m_eWatchState", void 0),
          R.c([m.observable], e.prototype, "m_strStateDescription", void 0),
          R.c([m.action], e.prototype, "SetState", null),
          e
        );
      })(),
      Yn = (function() {
        function e(e) {
          (this.m_steamIDBroadcast = ""),
            (this.m_strTitle = ""),
            (this.m_strAppId = ""),
            (this.m_strAppTitle = ""),
            (this.m_strThumbnailUrl = ""),
            (this.m_nViewerCount = 0),
            (this.m_bIsOnline = !1),
            (this.m_schUpdateTimeout = new T()),
            (this.m_nRefCount = 0),
            (this.m_steamIDBroadcast = e);
        }
        return (
          R.c([m.observable], e.prototype, "m_strTitle", void 0),
          R.c([m.observable], e.prototype, "m_strAppId", void 0),
          R.c([m.observable], e.prototype, "m_strAppTitle", void 0),
          R.c([m.observable], e.prototype, "m_strThumbnailUrl", void 0),
          R.c([m.observable], e.prototype, "m_nViewerCount", void 0),
          R.c([m.observable], e.prototype, "m_bIsOnline", void 0),
          e
        );
      })(),
      Jn = (function() {
        function e() {
          (this.m_mapBroadcasts = new Map()),
            (this.m_activeVideo = null),
            (this.m_activeChat = null),
            (this.m_broadcastSettings = {
              nVolume: 1,
              bMuted: !1,
              ulViewerToken: "0"
            }),
            (this.m_schSaveSettings = new T()),
            (this.m_broadcastInfos = {}),
            this.LoadBroadcastSettings();
        }
        return (
          (e.prototype.GetBroadcastState = function(e) {
            var t = this.m_mapBroadcasts.get(e);
            return t ? t.m_eWatchState : Un.None;
          }),
          (e.prototype.GetBroadcastStateDescription = function(e) {
            var t = this.m_mapBroadcasts.get(e);
            return t ? t.m_strStateDescription : "";
          }),
          (e.prototype.StartVideo = function(e, t, n) {
            console.log("Starting video for " + t), this.PauseAllVideo();
            var o,
              i = this.GetOrCreateBroadcast(t),
              r = this.m_broadcastSettings,
              a = r.nVolume,
              s = r.bMuted,
              c = new Xn(this, t, e, a, s);
            return (
              i.m_rgVideos.push({ video: c, eWatchLocation: n }),
              (this.m_activeVideo = c),
              (function() {
                var e = !1;
                try {
                  e = MediaSource.isTypeSupported(
                    'video/mp4;codecs="avc1.4d4032,mp4a.40.2"'
                  );
                } catch (e) {}
                return e;
              })() ||
              "probably" ===
                (o = document
                  .createElement("video")
                  .canPlayType(
                    'application/vnd.apple.mpegurl;codecs="avc1.64001f,mp4a.40.02"'
                  )) ||
              "maybe" === o
                ? (i.m_eWatchState == Un.None
                    ? this.GetBroadcastManifest(i, n)
                    : i.m_eWatchState == Un.Ready &&
                      c.Start(
                        i.m_strMPD,
                        i.m_ulBroadcastID,
                        this.m_broadcastSettings.ulViewerToken
                      ),
                  c)
                : (i.SetState(
                    Un.Error,
                    Object(re.b)("#BroadcastWatch_MinBrowser")
                  ),
                  null)
            );
          }),
          (e.prototype.PauseAllVideo = function() {
            this.m_mapBroadcasts.forEach(function(e) {
              for (var t = 0, n = e.m_rgVideos; t < n.length; t++) {
                n[t].video.StopPlaybackTillUserInput();
              }
            });
          }),
          (e.prototype.StopVideo = function(t) {
            var e = t.GetBroadcastSteamID(),
              n = this.m_mapBroadcasts.get(e);
            if ((t.Stop(), n)) {
              var o = new FormData();
              o.append("steamid", e),
                o.append("broadcastid", n.m_ulBroadcastID),
                o.append("viewertoken", this.m_broadcastSettings.ulViewerToken),
                C.a.post(G.a.CHAT_BASE_URL + "broadcast/stopwatching", o),
                w.d(n.m_rgVideos, function(e) {
                  return e.video == t;
                }),
                this.RemoveBroadcastIfUnused(n);
            }
          }),
          (e.prototype.StartChat = function(e, t, n) {
            var o = this.GetOrCreateBroadcast(t),
              i = new Qn(t, e);
            o.m_rgChats.push(i);
            return (this.m_activeChat = i).Start("0"), i;
          }),
          (e.prototype.StopChat = function(e) {
            var t = e.GetBroadcastSteamID(),
              n = this.m_mapBroadcasts.get(t);
            n && (w.c(n.m_rgChats, e), this.RemoveBroadcastIfUnused(n));
          }),
          (e.prototype.StartInfo = function(e) {
            var t = this.GetOrCreateBroadcastInfo(e);
            return (
              t.m_nRefCount++,
              1 === t.m_nRefCount && this.LoadBroadcastInfo(t),
              t
            );
          }),
          (e.prototype.StopInfo = function(e) {
            e.m_nRefCount--,
              0 === e.m_nRefCount &&
                (e.m_schUpdateTimeout.Cancel(),
                delete this.m_broadcastInfos[e.m_steamIDBroadcast]);
          }),
          (e.prototype.GetOrCreateBroadcastInfo = function(e) {
            if (!this.m_broadcastInfos[e]) {
              var t = new Yn(e);
              this.m_broadcastInfos[e] = t;
            }
            return this.m_broadcastInfos[e];
          }),
          (e.prototype.GetOrCreateBroadcast = function(e) {
            var t = this.m_mapBroadcasts.get(e);
            return (
              t ||
              (((t = new Kn()).m_steamIDBroadcast = e),
              (t.m_eWatchState = Un.None),
              this.m_mapBroadcasts.set(e, t),
              t)
            );
          }),
          (e.prototype.RemoveBroadcastIfUnused = function(e) {
            e.m_rgVideos.length ||
              e.m_rgChats.length ||
              (e.m_schHeartbeatTimeout.Cancel(),
              e.m_schManifestTimeout.Cancel(),
              this.m_mapBroadcasts.delete(e.m_steamIDBroadcast));
          }),
          (e.prototype.LoadBroadcastInfo = function(c) {
            return R.b(this, void 0, void 0, function() {
              var t,
                n,
                o,
                i,
                r,
                a,
                s = this;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    (t = "0"),
                      (n = this.m_mapBroadcasts.get(c.m_steamIDBroadcast)) &&
                        (t = n.m_ulBroadcastID),
                      (o = { steamid: c.m_steamIDBroadcast, broadcastid: t }),
                      (e.label = 1);
                  case 1:
                    return (
                      e.trys.push([1, 3, , 4]),
                      [
                        4,
                        C.a.get(
                          G.a.CHAT_BASE_URL + "broadcast/getbroadcastinfo/",
                          { params: o }
                        )
                      ]
                    );
                  case 2:
                    return (i = e.sent()) && i.data
                      ? ((r = i.data),
                        (c.m_strTitle = r.title),
                        (c.m_strAppId = r.appid),
                        (c.m_strAppTitle = r.app_title),
                        (c.m_strThumbnailUrl = r.thumbnail_url),
                        (c.m_nViewerCount = r.viewer_count),
                        (c.m_bIsOnline = r.is_online),
                        (a = r.update_interval) &&
                          "number" == typeof a &&
                          c.m_schUpdateTimeout.Schedule(1e3 * a, function() {
                            return s.LoadBroadcastInfo(c);
                          }),
                        [3, 4])
                      : [2];
                  case 3:
                    return e.sent(), [3, 4];
                  case 4:
                    return [2];
                }
              });
            });
          }),
          (e.prototype.GetBroadcastManifest = function(s, c, l) {
            return (
              void 0 === l && (l = Date.now()),
              R.b(this, void 0, void 0, function() {
                var t,
                  n,
                  o,
                  i,
                  r,
                  a = this;
                return R.e(this, function(e) {
                  switch (e.label) {
                    case 0:
                      s.SetState(Un.Loading, ""),
                        (t = {
                          steamid: s.m_steamIDBroadcast,
                          broadcastid: 0,
                          viewertoken: this.m_broadcastSettings.ulViewerToken,
                          watchlocation: c,
                          sessionid: G.a.SESSIONID
                        }),
                        (n = null),
                        (e.label = 1);
                    case 1:
                      return (
                        e.trys.push([1, 3, , 4]),
                        [
                          4,
                          C.a.get(
                            G.a.CHAT_BASE_URL + "broadcast/getbroadcastmpd/",
                            { params: t }
                          )
                        ]
                      );
                    case 2:
                      return (n = e.sent()), [3, 4];
                    case 3:
                      return e.sent(), [3, 4];
                    case 4:
                      if (!n || 200 != n.status)
                        return (
                          s.SetState(
                            Un.Error,
                            Object(re.b)("#BroadcastWatch_RequestFailed")
                          ),
                          [2]
                        );
                      if (
                        ((o = n.data),
                        this.SetBroadcastStateFromManifestResponse(s, o),
                        "waiting" == o.success)
                      ) {
                        if (6e4 < (i = Date.now() - l))
                          return (
                            s.SetState(
                              Un.Error,
                              Object(re.b)("#BroadcastWatch_NotAvailable")
                            ),
                            [2]
                          );
                        (r = 3e4 < i ? o.retry : 5e3),
                          s.m_schManifestTimeout.Schedule(r, function() {
                            return a.GetBroadcastManifest(s, l);
                          });
                      } else
                        "waiting_for_start" == o.success
                          ? s.m_schManifestTimeout.Schedule(
                              o.retry,
                              function() {
                                return a.GetBroadcastManifest(s, l);
                              }
                            )
                          : "waiting_for_reconnect" == o.success
                            ? s.m_schManifestTimeout.Schedule(
                                o.retry,
                                function() {
                                  return a.GetBroadcastManifest(s, l);
                                }
                              )
                            : "ready" == o.success &&
                              (this.SetViewerToken(o.viewertoken),
                              this.LoadBroadcast(s, o.broadcastid, o.url),
                              (s.m_nHeartbeatInterval = o.heartbeat_interval),
                              s.m_schHeartbeatTimeout.Schedule(
                                1e3 * s.m_nHeartbeatInterval,
                                function() {
                                  return a.HeartbeatBroadcast(s);
                                }
                              ));
                      return [2];
                  }
                });
              })
            );
          }),
          (e.prototype.HeartbeatBroadcast = function(o) {
            return R.b(this, void 0, void 0, function() {
              var t,
                n = this;
              return R.e(this, function(e) {
                return (
                  (t = new FormData()).append("steamid", o.m_steamIDBroadcast),
                  t.append("broadcastid", o.m_ulBroadcastID),
                  t.append(
                    "viewertoken",
                    this.m_broadcastSettings.ulViewerToken
                  ),
                  C.a.post(G.a.CHAT_BASE_URL + "broadcast/heartbeat/", t),
                  o.m_schHeartbeatTimeout.Schedule(
                    1e3 * o.m_nHeartbeatInterval,
                    function() {
                      return n.HeartbeatBroadcast(o);
                    }
                  ),
                  [2]
                );
              });
            });
          }),
          (e.prototype.SetBroadcastStateFromManifestResponse = function(e, t) {
            var n = t.success;
            "waiting" == n
              ? e.SetState(
                  Un.Loading,
                  Object(re.b)("#BroadcastWatch_WaitingForResponse")
                )
              : "waiting_for_start" == n
                ? e.SetState(
                    Un.Loading,
                    Object(re.b)("#BroadcastWatch_WaitingForStart")
                  )
                : "waiting_for_reconnect" == n
                  ? e.SetState(
                      Un.Loading,
                      Object(re.b)("#BroadcastWatch_WaitingForReconnect")
                    )
                  : "ready" == n
                    ? e.SetState(Un.Ready)
                    : "end" == n
                      ? e.SetState(
                          Un.Error,
                          Object(re.b)("#BroadcastWatch_NotAvailable")
                        )
                      : "noservers" == n
                        ? e.SetState(
                            Un.Error,
                            Object(re.b)("#BroadcastWatch_ServerLoad")
                          )
                        : "system_not_supported" == n
                          ? e.SetState(
                              Un.Error,
                              Object(re.b)("#BroadcastWatch_SystemNotSupported")
                            )
                          : "user_restricted" == n
                            ? e.SetState(
                                Un.Error,
                                Object(re.b)("#BroadcastWatch_UserRestricted")
                              )
                            : "poor_upload_quality" == n
                              ? e.SetState(
                                  Un.Error,
                                  Object(re.b)(
                                    "#BroadcastWatch_PoorUploadQuality"
                                  )
                                )
                              : "request_failed" == n
                                ? e.SetState(
                                    Un.Error,
                                    Object(re.b)(
                                      "#BroadcastWatch_RequestFailed"
                                    )
                                  )
                                : e.SetState(
                                    Un.Error,
                                    Object(re.b)("#BroadcastWatch_NotAvailable")
                                  );
          }),
          (e.prototype.LoadBroadcast = function(e, t, n) {
            var o = this;
            (e.m_ulBroadcastID = t),
              (e.m_strMPD = n),
              0 <=
                e.m_rgVideos.findIndex(function(e) {
                  return e.video == o.m_activeVideo;
                }) &&
                this.m_activeVideo.Start(
                  n,
                  t,
                  this.m_broadcastSettings.ulViewerToken
                ),
              0 <=
                e.m_rgChats.findIndex(function(e) {
                  return e == o.m_activeChat;
                }) && this.m_activeChat.Start(t);
          }),
          (e.prototype.BroadcastDownloadFailed = function(e) {
            e.Stop();
            var t = this.m_mapBroadcasts.get(e.GetBroadcastSteamID());
            if (t && t.m_eWatchState != Un.Loading) {
              var n = t.GetVideoData(e);
              this.GetBroadcastManifest(t, n.eWatchLocation);
            }
          }),
          (e.prototype.UserInputClickVideo = function(e) {
            if (this.m_activeVideo != e) {
              this.PauseAllVideo();
              var t = this.m_mapBroadcasts.get(e.GetBroadcastSteamID()),
                n = t.GetVideoData(e);
              return (
                (this.m_activeVideo = e),
                void this.GetBroadcastManifest(t, n.eWatchLocation)
              );
            }
            e.UserInputClick();
          }),
          (e.prototype.LoadBroadcastSettings = function() {
            if (window.localStorage) {
              var e = window.localStorage.getItem("broadcastSettings");
              if (e) {
                var t = JSON.parse(e);
                if (t) {
                  Object.assign(this.m_broadcastSettings, t);
                  var n = this.m_broadcastSettings;
                  (n.bMuted = !!n.bMuted),
                    (n.nVolume = ln(n.nVolume, 0, 1)),
                    "string" != typeof n.ulViewerToken &&
                      (n.ulViewerToken = "0");
                }
              }
            }
          }),
          (e.prototype.SaveBroadcastSettings = function() {
            var e = this;
            window.localStorage &&
              this.m_schSaveSettings.Schedule(1e3, function() {
                try {
                  window.localStorage.setItem(
                    "broadcastSettings",
                    JSON.stringify(e.m_broadcastSettings)
                  );
                } catch (e) {}
              });
          }),
          (e.prototype.SetViewerToken = function(e) {
            this.m_broadcastSettings.ulViewerToken != e &&
              ((this.m_broadcastSettings.ulViewerToken = e),
              this.SaveBroadcastSettings());
          }),
          (e.prototype.SaveVolumeChange = function(e, t) {
            (this.m_broadcastSettings.nVolume == e &&
              this.m_broadcastSettings.bMuted == t) ||
              ((this.m_broadcastSettings.nVolume = e),
              (this.m_broadcastSettings.bMuted = t),
              this.SaveBroadcastSettings());
          }),
          e
        );
      })();
    ((qn = zn || (zn = {}))[(qn.Timeline = 1)] = "Timeline"),
      (qn[(qn.Minimap = 2)] = "Minimap");
    var Xn = (function() {
        function e(e, t, n, o, i) {
          (this.m_store = null),
            (this.m_steamID = null),
            (this.m_elVideo = null),
            (this.m_player = null),
            (this.m_listeners = new N()),
            (this.m_gameDataParser = null),
            (this.m_info = null),
            (this.m_bPaused = !1),
            (this.m_nPlaybackTime = 0),
            (this.m_bBuffering = !1),
            (this.m_bOnLiveEdge = !1),
            (this.m_nVolume = 0),
            (this.m_bMuted = !1),
            (this.m_bUserInputNeeded = !1),
            (this.m_nTimelineDuration = 1800),
            (this.m_nVideoStartPos = 0),
            (this.m_nVideoEndPos = 0),
            (this.m_rgMarkers = m.observable.array()),
            (this.m_rgSegments = m.observable.array()),
            (this.m_store = e),
            (this.m_steamID = t),
            (this.m_elVideo = n),
            (this.m_nVolume = o),
            (this.m_bMuted = i);
        }
        return (
          (e.prototype.GetBroadcastSteamID = function() {
            return this.m_steamID;
          }),
          (e.prototype.IsPaused = function() {
            return this.m_bPaused;
          }),
          (e.prototype.GetPlaybackTime = function() {
            return this.m_nPlaybackTime;
          }),
          (e.prototype.SetStatsViewIsVisible = function(e) {
            this.m_player && this.m_player.SetStatsViewIsVisible(e);
          }),
          (e.prototype.GetDASHPlayerStats = function() {
            return this.m_player.GetDASHPlayerStats();
          }),
          (e.prototype.BHasDASHStats = function() {
            return null != this.m_player;
          }),
          (e.prototype.IsTimelineMapActive = function() {
            return !1;
          }),
          (e.prototype.IsBuffering = function() {
            return this.m_bBuffering;
          }),
          (e.prototype.IsOnLiveEdge = function() {
            return this.m_bOnLiveEdge;
          }),
          (e.prototype.GetVideoAvailableStartTime = function() {
            return this.m_nVideoStartPos;
          }),
          (e.prototype.GetVolume = function() {
            return this.m_nVolume;
          }),
          (e.prototype.GetUserInputNeeded = function() {
            return this.m_bUserInputNeeded;
          }),
          (e.prototype.GetVideoRepresentations = function() {
            return this.m_player.GetVideoRepresentations();
          }),
          (e.prototype.SetVideoRepresentation = function(e) {
            this.m_player.SetVideoRepresentation(e);
          }),
          (e.prototype.GetBroadcastInfo = function() {
            return this.m_info;
          }),
          (e.prototype.Start = function(e, t, n) {
            AssertMsg(!this.m_player, "Initialized twice?"),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "playing",
                this.OnVideoPlaying
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "pause",
                this.OnVideoPause
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "timeupdate",
                this.OnVideoTimeUpdate
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "valve-bufferupdate",
                this.OnVideoTimeUpdate
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "valve-gamedataupdate",
                this.OnGameDataUpdate
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "valve-downloadfailed",
                this.OnDownloadFailed
              ),
              this.m_listeners.AddEventListener(
                this.m_elVideo,
                "valve-userinputneeded",
                this.OnUserInputNeeded
              ),
              (this.m_bPaused = !1),
              (this.m_nPlaybackTime = 0),
              (this.m_bBuffering = !1),
              (this.m_nTimelineDuration = 1800),
              (this.m_nVideoStartPos = 0),
              (this.m_nVideoEndPos = 0),
              this.m_rgMarkers.clear(),
              this.m_rgSegments.clear(),
              (this.m_bUserInputNeeded = !1),
              (this.m_player = new Vn(this.m_elVideo)),
              this.m_player.PlayMPD(e),
              this.m_player
                .GetDASHPlayerStats()
                .SetBroadcasterAndViewerInfo(this.m_steamID, G.d.steamid, t, n),
              un("DASH Stat Object", this.m_player.GetDASHPlayerStats()),
              this.SetVolume(this.m_nVolume),
              this.m_player.SetMuted(this.m_bMuted),
              (this.m_info = this.m_store.StartInfo(this.m_steamID));
          }),
          (e.prototype.Stop = function() {
            this.m_listeners.Unregister(),
              this.m_info &&
                (this.m_store.StopInfo(this.m_info), (this.m_info = null)),
              (this.m_gameDataParser = null),
              this.m_player && (this.m_player.Close(), (this.m_player = null));
          }),
          (e.prototype.TogglePlayPause = function() {
            this.m_player.IsPaused()
              ? this.m_player.Play()
              : this.m_player.Pause();
          }),
          (e.prototype.JumpTime = function(e) {
            this.m_player.JumpTime(e);
          }),
          (e.prototype.Seek = function(e) {
            this.m_player.Seek(e);
          }),
          (e.prototype.SeekAndPlay = function(e) {
            this.m_player.SeekAndPlay(e);
          }),
          (e.prototype.JumpToLiveEdge = function() {
            this.SeekAndPlay(this.m_player.GetBufferedLiveEdgeTime());
          }),
          (e.prototype.SetVolume = function(e) {
            this.m_player.SetVolume(e),
              (this.m_nVolume = this.m_player.GetVolume()),
              this.m_store.SaveVolumeChange(e, this.m_bMuted);
          }),
          (e.prototype.SetMute = function(e) {
            this.m_player.SetMuted(e),
              (this.m_bMuted = e),
              this.m_store.SaveVolumeChange(this.m_nVolume, e);
          }),
          (e.prototype.IsMuted = function() {
            return this.m_bMuted;
          }),
          (e.prototype.OnVideoPlaying = function() {
            this.m_bPaused = !1;
          }),
          (e.prototype.OnVideoPause = function() {
            this.m_bPaused = !0;
          }),
          (e.prototype.OnVideoTimeUpdate = function() {
            (this.m_nPlaybackTime = this.m_player.GetCurrentPlayTime()),
              (this.m_nVideoStartPos = this.m_player.GetAvailableVideoStartTime()),
              (this.m_nVideoEndPos = Math.max(
                this.m_player.GetBufferedLiveEdgeTime(),
                this.m_nPlaybackTime
              )),
              (this.m_bBuffering = this.m_player.IsBuffering()),
              (this.m_bOnLiveEdge =
                this.m_nVideoEndPos - this.m_nPlaybackTime < 5),
              this.m_player.IsPaused() && (this.m_bOnLiveEdge = !1);
          }),
          (e.prototype.OnGameDataUpdate = function(e) {
            var t = e.detail;
            if (t && "object" == typeof t.gamedata) {
              this.m_gameDataParser ||
                (this.m_gameDataParser = new Wn(t.gamedata.appid));
              var n = this.m_player.GetLiveContentStartTime().getTime(),
                o = this.m_gameDataParser.UpdateMarkers(t.gamedata, n);
              if (o)
                this.m_rgMarkers.replace(o.rgMarkers || []),
                  this.m_rgSegments.replace(o.rgSegments || []);
              else;
            }
          }),
          (e.prototype.OnDownloadFailed = function() {
            this.m_store.BroadcastDownloadFailed(this);
          }),
          (e.prototype.OnUserInputNeeded = function() {
            this.m_bUserInputNeeded = !0;
          }),
          (e.prototype.UserInputClick = function() {
            (this.m_bUserInputNeeded = !1), this.JumpToLiveEdge();
          }),
          (e.prototype.StopPlaybackTillUserInput = function() {
            this.Stop(), this.OnUserInputNeeded();
          }),
          (e.prototype.GetTimelineStartPos = function() {
            return this.m_nVideoEndPos - this.m_nTimelineDuration;
          }),
          (e.prototype.GetTimelineDuration = function() {
            return this.m_nTimelineDuration;
          }),
          (e.prototype.GetTimeAtMousePosition = function(e, t, n, o) {
            var i = pn(e, t.left, t.right, n, o);
            return Math.floor(i + 0.5);
          }),
          (e.prototype.GetPercentOffsetFromTime = function(e, t) {
            var n = 0,
              o = 0;
            return (
              t == zn.Timeline
                ? (n = (o = this.m_nVideoEndPos) - this.m_nTimelineDuration)
                : (o = n = 0),
              pn(e, n, o, 0, 100)
            );
          }),
          (e.prototype.GetTimelineMarkers = function() {
            return this.m_rgMarkers;
          }),
          (e.prototype.GetTimelineSegments = function() {
            return this.m_rgSegments;
          }),
          (e.prototype.BHasMarkersOrSegments = function() {
            return this.has_segments || this.has_markers;
          }),
          Object.defineProperty(e.prototype, "has_markers", {
            get: function() {
              return 0 < this.m_rgMarkers.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "has_segments", {
            get: function() {
              return 0 < this.m_rgSegments.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.observable], e.prototype, "m_bPaused", void 0),
          R.c([m.observable], e.prototype, "m_nPlaybackTime", void 0),
          R.c([m.observable], e.prototype, "m_bBuffering", void 0),
          R.c([m.observable], e.prototype, "m_bOnLiveEdge", void 0),
          R.c([m.observable], e.prototype, "m_nVolume", void 0),
          R.c([m.observable], e.prototype, "m_bMuted", void 0),
          R.c([m.observable], e.prototype, "m_bUserInputNeeded", void 0),
          R.c([m.observable], e.prototype, "m_nTimelineDuration", void 0),
          R.c([m.observable], e.prototype, "m_nVideoStartPos", void 0),
          R.c([m.observable], e.prototype, "m_nVideoEndPos", void 0),
          R.c([m.action.bound], e.prototype, "Start", null),
          R.c([M.a], e.prototype, "OnVideoPlaying", null),
          R.c([M.a], e.prototype, "OnVideoPause", null),
          R.c([m.action.bound], e.prototype, "OnVideoTimeUpdate", null),
          R.c([m.action.bound], e.prototype, "OnGameDataUpdate", null),
          R.c([M.a], e.prototype, "OnDownloadFailed", null),
          R.c([M.a], e.prototype, "OnUserInputNeeded", null),
          R.c([m.computed], e.prototype, "has_markers", null),
          R.c([m.computed], e.prototype, "has_segments", null),
          e
        );
      })(),
      Qn = (function() {
        function e(e, t) {
          (this.m_steamID = ""),
            (this.m_iframe = null),
            (this.m_bIframeLoaded = !1),
            (this.m_ulBroadcastID = ""),
            (this.m_steamID = e),
            (this.m_iframe = t);
          var n = "/community/",
            o = G.a.CHAT_BASE_URL;
          o.endsWith(n) && (o = o.slice(0, -n.length));
          var i = G.a.CHAT_BASE_URL + "broadcast/watch/" + e;
          (i +=
            "?iframe=1&origin=" +
            o +
            "&muted=1&steamtv=1&enablechat=1&enablevideo=0"),
            (t.src = i),
            (t.onload = this.OnIframeLoaded);
        }
        return (
          (e.prototype.GetBroadcastSteamID = function() {
            return this.m_steamID;
          }),
          (e.prototype.Start = function(e) {
            (this.m_ulBroadcastID = e),
              this.m_bIframeLoaded && this.PostMessageToIframe();
          }),
          (e.prototype.OnIframeLoaded = function() {
            (this.m_bIframeLoaded = !0),
              this.m_ulBroadcastID && this.PostMessageToIframe();
          }),
          (e.prototype.PostMessageToIframe = function() {
            var e = {
              msg: "OnVideoIFrameBroadcastIDChanged",
              broadcastid: this.m_ulBroadcastID
            };
            this.m_iframe.contentWindow.postMessage(e, G.a.CHAT_BASE_URL);
          }),
          R.c([M.a], e.prototype, "OnIframeLoaded", null),
          R.c([M.a], e.prototype, "PostMessageToIframe", null),
          e
        );
      })(),
      Zn = new Jn();
    window.uiBroadcastWatchStore = Zn;
    var $n,
      eo,
      to = (function() {
        function e() {
          (this.m_status = new Zt()),
            (this.m_mapPendingRequests = new m.ObservableMap()),
            (this.m_nRequestID = 1);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_CMInterface = e),
              this.m_CMInterface.RunWhenLoggedOn(function() {
                G.a.IN_CLIENT &&
                  (SteamClient &&
                    SteamClient.Broadcast &&
                    SteamClient.Broadcast.RegisterForBroadcastStatus &&
                    SteamClient.Broadcast.RegisterForBroadcastStatus(
                      t.OnBroadcastStatus
                    ),
                  SteamClient &&
                    SteamClient.Broadcast &&
                    SteamClient.Broadcast.RegisterForViewerRequests &&
                    SteamClient.Broadcast.RegisterForViewerRequests(
                      t.OnViewerRequest
                    ));
              });
          }),
          (e.prototype.MakeKey = function(e, t) {
            return e + "_" + t;
          }),
          Object.defineProperty(e.prototype, "status", {
            get: function() {
              return this.m_status;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_broadcasting", {
            get: function() {
              return this.m_status.bIsBroadcasting;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "broadcastid", {
            get: function() {
              return this.m_status.broadcastid;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "is_broadcast_capable", {
            get: function() {
              return this.m_status.bBroadcastCapable;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnBroadcastStatus = function(e) {
            ((this.m_status.bIsBroadcasting && !e.bIsBroadcasting) ||
              ("0" != this.m_status.broadcastid && "0" == e.broadcastid)) &&
              this.m_mapPendingRequests.forEach(function(e, t, n) {
                e == an.k_EPending && n.delete(t);
              }),
              (this.m_status = e);
          }),
          (e.prototype.OnViewerRequest = function(e, t, n) {
            if (n == an.k_EPending) {
              var o = this.m_nRequestID++;
              this.m_mapPendingRequests.set(this.MakeKey(e, o), n);
              var i = Yo.GetDefaultBrowserContext(),
                r = Yo.ShowFriendChatDialog(i, e);
              r && r.ViewerNeedsApproval(o);
            } else this.m_mapPendingRequests.set(this.MakeKey(e, t), n);
          }),
          (e.prototype.ApproveViewerRequest = function(e, t) {
            var n = E.a.InitFromAccountID(e);
            SteamClient.Broadcast.ApproveViewerRequest(
              n.ConvertTo64BitString(),
              Number(t)
            );
          }),
          (e.prototype.RejectViewerRequest = function(e, t) {
            var n = E.a.InitFromAccountID(e);
            SteamClient.Broadcast.RejectViewerRequest(
              n.ConvertTo64BitString(),
              Number(t)
            );
          }),
          (e.prototype.GetRequestState = function(e, t) {
            return this.m_mapPendingRequests.get(this.MakeKey(e, t));
          }),
          (e.prototype.InviteToWatch = function(e) {
            var t = E.a.InitFromAccountID(e);
            return SteamClient.Broadcast.InviteToWatch(
              t.ConvertTo64BitString()
            );
          }),
          R.c([m.observable], e.prototype, "m_status", void 0),
          R.c([m.observable], e.prototype, "m_mapPendingRequests", void 0),
          R.c([m.computed], e.prototype, "status", null),
          R.c([m.computed], e.prototype, "is_broadcasting", null),
          R.c([m.computed], e.prototype, "broadcastid", null),
          R.c([m.computed], e.prototype, "is_broadcast_capable", null),
          R.c([M.a, m.action], e.prototype, "OnBroadcastStatus", null),
          R.c([M.a, m.action], e.prototype, "OnViewerRequest", null),
          R.c([m.action], e.prototype, "ApproveViewerRequest", null),
          R.c([m.action], e.prototype, "RejectViewerRequest", null),
          R.c([m.action], e.prototype, "InviteToWatch", null),
          e
        );
      })(),
      no = (function(o) {
        function e(e, t) {
          var n = o.call(this) || this;
          return (
            (n.m_bShowWatchPromptDialog = !1),
            (n.m_steamID = E.a.InitFromAccountID(t)),
            (n.m_tabset = e),
            (n.m_info = Zn.StartInfo(n.m_steamID.ConvertTo64BitString())),
            n
          );
        }
        return (
          R.d(e, o),
          (e.prototype.GetSteamID = function() {
            return this.m_steamID;
          }),
          (e.prototype.GetTabName = function() {
            var e = this.m_info && this.m_info.m_strTitle;
            return e || Y;
          }),
          (e.prototype.GetUniqueID = function() {
            return "br" + this.m_steamID.GetAccountID();
          }),
          (e.prototype.OnTabFocus = function() {}),
          (e.prototype.InternalOnTabActivate = function() {}),
          (e.prototype.OnTabDeactivate = function() {}),
          (e.prototype.OnTabClosed = function() {
            Zn.StopInfo(this.m_info);
          }),
          (e.prototype.IsVoiceActive = function() {
            return !1;
          }),
          (e.prototype.GetUnreadMessageCount = function() {
            return 0;
          }),
          (e.prototype.IsTabForChat = function(e) {
            return !1;
          }),
          (e.prototype.GetChatView = function() {
            return null;
          }),
          (e.prototype.ShowWatchPromptDialog = function(e) {
            (this.m_bShowWatchPromptDialog = !0),
              (this.m_watchPromptInitialFriend = e);
          }),
          (e.prototype.HideWatchPromptDialog = function() {
            (this.m_bShowWatchPromptDialog = !1),
              (this.m_watchPromptInitialFriend = void 0);
          }),
          R.c([m.observable], e.prototype, "m_bShowWatchPromptDialog", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_watchPromptInitialFriend",
            void 0
          ),
          R.c([m.action], e.prototype, "ShowWatchPromptDialog", null),
          R.c([m.action], e.prototype, "HideWatchPromptDialog", null),
          e
        );
      })(ae),
      oo = "ChatStorePopupState",
      io = (function() {
        function e(e) {
          (this.m_bRestoredPopupState = !1),
            (this.m_vecShowGroupsAfterRestorePopup = []),
            (this.m_iLastChatPopupID = 0),
            (this.m_mapChatBrowserContexts = new Map()),
            (this.m_bSuppressBrowserContextBroadcasting = !1),
            (this.m_bParentalLocked = void 0),
            (this.m_stateToRestoreFrom = void 0),
            (this.m_bRestoringPopups = !1),
            (this.m_bShuttingDown = !1),
            (this.m_bTheaterMode = !1),
            (this.m_chatStore = e);
        }
        return (
          (e.prototype.GetRootChatPerContextData = function() {
            return this.GetPerContextChatData(qo);
          }),
          (e.prototype.Init = function() {
            var t = this;
            Yo.AddPopupManagerShutdownCallback(function() {
              t.SerializePopupState(), (t.m_bShuttingDown = !0);
            }),
              Object(m.autorun)(function() {
                var e = Yo.ParentalStore.BIsFriendsBlocked();
                t.OnFriendsParentalLockChanged(e);
              });
          }),
          (e.prototype.OnFriendsParentalLockChanged = function(e) {
            !1 === this.m_bParentalLocked && e
              ? (this.SerializePopupState(!0),
                this.m_mapChatBrowserContexts.forEach(function(e) {
                  e.CloseAllPopups();
                }),
                (this.m_bRestoredPopupState = !1))
              : !0 !== this.m_bParentalLocked || e || this.RestorePopupState(),
              (this.m_bParentalLocked = e);
          }),
          (e.prototype.ShowFriendChatDialog = function(e, t, n, o) {
            void 0 === n && (n = !0), void 0 === o && (o = !0);
            var i = this.m_chatStore.GetFriendChat(t);
            return n && i && this.ShowAndOrActivateChat(e, i, o), i;
          }),
          (e.prototype.ShowFriendChatDialogWhenReady = function(e, t, n, o) {
            void 0 === n && (n = !0),
              void 0 === o && (o = !0),
              this.ShowFriendChatDialog(e, t, n, o);
          }),
          (e.prototype.ShowAndOrActivateChat = function(e, t, n) {
            if (t instanceof Tt) {
              var o = this.m_chatStore.GetChatRoomGroup(t.GetParentGroupID());
              if (!o)
                return void AssertMsg(!1, "Can't find group for chat room ");
              var i = this.ShowAndOrActivateChatRoomGroup(e, o, n);
              i && i.SelectChat(t.GetRoomID());
            } else this.ShowAndOrActivateTabByID(e, t.unique_id, n);
          }),
          (e.prototype.ShowAndOrActivateChatForTabset = function(e, t, n) {
            var o = e.GetTabForChat(t);
            o || this.CreateNewTabFromUniqueID(e, t.unique_id, !1),
              n && e.ActivateTab(o);
          }),
          (e.prototype.IsChatRoomGroupActive = function(e, t) {
            var n = this.GetPerContextChatData(e),
              o = this.GetTabSetByUniqueID(n, t.unique_id);
            return !!o && o.tabSet.activeTab == o.tab;
          }),
          (e.prototype.SetTheaterMode = function(e) {
            this.m_bTheaterMode = e;
          }),
          (e.prototype.GetTheaterMode = function() {
            return this.m_bTheaterMode;
          }),
          (e.prototype.ShowAndOrActivateChatRoomGroup = function(e, t, n) {
            return t.BIsCurrentUserAMember()
              ? this.ShowAndOrActivateTabByID(e, t.unique_id, n)
              : (console.log(
                  "Failed to activate",
                  t,
                  "- user is not a member."
                ),
                null);
          }),
          (e.prototype.ShowAndOrActivateChatRoomGroupWhenReady = function(
            e,
            t,
            n
          ) {
            this.ShowAndOrActivateChatRoomGroup(e, t, n);
          }),
          (e.prototype.ShowUnackedGroup = function(e) {
            this.m_bRestoredPopupState
              ? this.ShowAndOrActivateChatRoomGroup(qo, e, !1)
              : this.m_vecShowGroupsAfterRestorePopup.push(e);
          }),
          (e.prototype.ShowOrActivateBroadcast = function(e, t, n) {
            var o = "br" + t;
            return this.ShowAndOrActivateTabByID(e, o, n);
          }),
          (e.prototype.CloseTabByID = function(t, e) {
            var n = this;
            e
              ? this.CloseTabByIDInContext(e, t)
              : this.m_mapChatBrowserContexts.forEach(function(e) {
                  n.CloseTabByIDInContext(e.browser_context, t);
                });
          }),
          (e.prototype.ReplaceFriendChatWithGroup = function(e, t, n) {
            var o = this.GetPerContextChatData(e),
              i = this.GetTabSetByUniqueID(o, n.unique_id);
            i ||
              (this.ShowAndOrActivateChatRoomGroup(e, n, !0),
              (i = this.GetTabSetByUniqueID(o, n.unique_id))),
              AssertMsg(i, "Failed to find group tab");
            var r = this.GetTabSetByUniqueID(o, t.chat.unique_id);
            if (r) {
              var a = i.tab,
                s = r.tabSet;
              i.tabSet != s && (i.tabSet.RemoveTab(a), s.AddTab(a)),
                s.MoveTabAfter(a, t),
                this.CloseTab(e, t),
                this.ShowAndOrActivateChatRoomGroup(e, n, !0);
            }
          }),
          (e.prototype.ForEachTabSet = function(e, t) {
            e.IsFriendsListSingleWindow() &&
              0 < e.default_tabset.tabCount &&
              t(e.default_tabset);
            for (var n = 0, o = Array.from(e.popup_list); n < o.length; n++) {
              t(o[n].tab_set);
            }
          }),
          (e.prototype.CloseTab = function(t, n, o) {
            void 0 === o && (o = !1);
            var i = this.GetPerContextChatData(t);
            this.ForEachTabSet(i, function(e) {
              e.BHasTab(n) &&
                (o || e.RemoveTab(n),
                n.IsVoiceActive() &&
                  Yo.ShowCloseActiveVoiceConfirmation(
                    t,
                    i.GetPopupForTabSet(e)
                  ));
            }),
              this.BroadcastCloseTabToAllBrowserContexts(t, n.GetUniqueID()),
              n.OnTabClosed(),
              i.IsFriendsListSingleWindow() &&
                0 == i.default_tabset.tabCount &&
                (i.responsive_window_state.SetActiveView($n.FriendsList),
                this.SetTheaterMode(!1),
                i.SetFriendsListCollapsed(!1));
          }),
          (e.prototype.GetResponsiveWindowState = function(e) {
            return this.GetPerContextChatData(e).responsive_window_state;
          }),
          (e.prototype.CloseTabByIDInContext = function(e, t) {
            var n = this.GetPerContextChatData(e),
              o = this.GetTabSetByUniqueID(n, t);
            o &&
              (o.tabSet.RemoveTab(o.tab),
              o.tab.OnTabClosed(),
              this.BroadcastCloseTabToAllBrowserContexts(e, t));
          }),
          (e.prototype.ShowAndOrActivateTabByID = function(e, t, n) {
            void 0 === n && (n = !0);
            var o,
              i = this.GetPerContextChatData(e),
              r = this.GetTabSetByUniqueID(i, t);
            if (r) n && r.tabSet.ActivateTab(r.tab), (o = r.tab);
            else {
              var a = Yo.SettingsStore.BAlwaysShowChatsInNewWindow();
              if (!i.BUsePopups() || (!a && i.default_tabset.is_popup_active))
                o = this.CreateNewTabFromUniqueID(i.default_tabset, t, n);
              else {
                var s = void 0;
                if (
                  ((s =
                    a && 0 != i.default_tabset.tabCount
                      ? new ce(e)
                      : i.default_tabset),
                  !(o = this.CreateNewTabFromUniqueID(s, t, n)))
                )
                  return null;
                var c = s == i.default_tabset;
                if (c && i.IsFriendsListSingleWindow())
                  Yo.ShowPopupFriendsList(e, !n, n);
                else if (
                  !c ||
                  (!i.IsFriendsListSingleWindow() && !s.is_popup_active)
                ) {
                  var l = Yo.CreateChatPopup(
                    e,
                    this.GetNextChatPopupID(),
                    s,
                    void 0,
                    void 0,
                    !n
                  );
                  l.Show(n), i.AddPopup(s, l), this.SerializePopupState();
                }
              }
            }
            return (
              o && n && i.responsive_window_state.SetActiveView($n.Chat), o
            );
          }),
          (e.prototype.GetTabSetByUniqueID = function(e, t) {
            if (!e) return null;
            var n = e.GetTabSetForId(t);
            return n ? { tabSet: n, tab: n.GetTabByUniqueID(t) } : null;
          }),
          (e.prototype.BIsTabSetActive = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext());
            if (t) return t.BIsTabSetActive(e);
          }),
          (e.prototype.BIsTabSetVisible = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext());
            if (t) return t.BIsTabSetVisible(e);
          }),
          (e.prototype.BIsTabSetFocused = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext());
            if (t) return t.BIsTabSetFocused(e);
          }),
          (e.prototype.GetAppContainerForChat = function(e) {
            var t = this.GetRootChatPerContextData(),
              n = null;
            if (e instanceof Tt) {
              var o = this.m_chatStore.GetChatRoomGroup(e.GetParentGroupID());
              o && (n = this.GetTabSetByUniqueID(t, o.unique_id));
            } else n = this.GetTabSetByUniqueID(t, e.unique_id);
            if (!n || !n.tabSet) return null;
            var i = t.GetPopupForTabSet(n.tabSet);
            return i
              ? i.popup ? i.popup.container : null
              : t.IsTabSetInFriendListWindow(n.tabSet)
                ? t.friends_list_window
                : null;
          }),
          (e.prototype.FlashChatWindow = function(e) {
            var t = this.GetAppContainerForChat(e);
            t && !t.BIsClosed() && t.FlashWindow();
          }),
          (e.prototype.GetPerContextChatData = function(e) {
            AssertMsg(
              Yo.ready_to_render || this.m_bRestoringPopups,
              "GetPerContextChatData called before ready",
              e
            );
            var t = this.m_mapChatBrowserContexts.get(e.m_unPID);
            if (!t) {
              var n = Yo.BIsValidBrowserContext(e);
              (t = new lo(e)),
                n
                  ? this.m_mapChatBrowserContexts.set(e.m_unPID, t)
                  : AssertMsg(
                      !1,
                      "Had to prevent instance being added back" + e.m_unPID
                    );
            }
            return t;
          }),
          (e.prototype.GetDefaultTabSetForContext = function(e) {
            return this.GetPerContextChatData(e).default_tabset;
          }),
          (e.prototype.OnOverlayBrowserCreated = function(e, t, n) {
            var i = this,
              r = this.GetPerContextChatData(e);
            if (r) {
              r.SetScreenInfo(t, n);
              var o = this.GetRootChatPerContextData();
              o &&
                this.ForEachTabSet(o, function(n) {
                  var o = new ce(r.browser_context);
                  n.tabs.forEach(function(e) {
                    var t = n.activeTab == e;
                    i.CreateNewTabFromUniqueID(o, e.GetUniqueID(), t);
                  });
                  var e = Yo.CreateChatPopup(
                    r.browser_context,
                    i.GetNextChatPopupID(),
                    o,
                    void 0,
                    void 0,
                    !1
                  );
                  e.Show(!1), r.AddPopup(o, e);
                });
            }
          }),
          (e.prototype.OnOverlayBrowserChanged = function(e, t, n) {
            var o = this.GetPerContextChatData(e);
            o && o.SetScreenInfo(t, n);
          }),
          (e.prototype.OnOverlayBrowserClosed = function(e) {
            var t = this.m_mapChatBrowserContexts.get(e.m_unPID);
            t &&
              (AssertMsg(
                e.m_nBrowserID == t.browser_context.m_nBrowserID,
                "Mismatch found in OnOverlayBrowserClosed"
              ),
              this.m_mapChatBrowserContexts.delete(e.m_unPID));
          }),
          (e.prototype.SetSuppressBrowserContextBroadcasting = function(e) {
            this.m_bSuppressBrowserContextBroadcasting = e;
          }),
          (e.prototype.BroadcastNewTabToAllBrowserContexts = function(n, o) {
            var i = this;
            this.m_bSuppressBrowserContextBroadcasting ||
              ((this.m_bSuppressBrowserContextBroadcasting = !0),
              this.m_mapChatBrowserContexts.forEach(function(e) {
                if (!zo(e.browser_context, n)) {
                  var t = e.browser_context != qo;
                  i.ShowAndOrActivateTabByID(e.browser_context, o, t);
                }
              }),
              (this.m_bSuppressBrowserContextBroadcasting = !1));
          }),
          (e.prototype.BroadcastCloseTabToAllBrowserContexts = function(e, t) {
            if (!this.m_bSuppressBrowserContextBroadcasting)
              if (zo(e, qo))
                this.BroadcastCloseTabToAllBrowserContexts_Internal(e, t);
              else {
                var n = this.m_mapChatBrowserContexts.get(e.m_unPID);
                n &&
                  zo(e, n.browser_context) &&
                  this.BroadcastCloseTabToAllBrowserContexts_Internal(e, t);
              }
          }),
          (e.prototype.BroadcastCloseTabToAllBrowserContexts_Internal = function(
            t,
            n
          ) {
            var o = this;
            this.m_bSuppressBrowserContextBroadcasting ||
              ((this.m_bSuppressBrowserContextBroadcasting = !0),
              this.m_mapChatBrowserContexts.forEach(function(e) {
                zo(e.browser_context, t) ||
                  o.CloseTabByIDInContext(e.browser_context, n);
              }),
              (this.m_bSuppressBrowserContextBroadcasting = !1));
          }),
          (e.prototype.CreateNewTabFromUniqueID = function(e, t, n, o) {
            void 0 === o && (o = !1);
            var i = null,
              r = t.match(/^f(\d+)$/);
            if (r && r[1]) {
              var a = parseInt(r[1]),
                s = Yo.FriendStore.GetPlayer(a);
              if (s && !s.is_blocked) {
                var c = this.m_chatStore.GetFriendChat(a);
                c &&
                  ((i = new Xt(e, c)),
                  !o ||
                    s.is_friend ||
                    Yo.FriendStore.BApprovedNonFriendMessages(a) ||
                    c.SetShowNonFriendWarning(!0));
              }
            }
            if (!i) {
              var l = t.match(/^cg(\d+)$/);
              if (l && l[1]) {
                var p = this.m_chatStore.GetChatRoomGroup(l[1]);
                p &&
                  (this.m_chatStore.IncRefActiveChatRoomGroup(
                    p.GetGroupID(),
                    !this.m_bRestoringPopups
                  ),
                  (i = new Pt(e, p)));
              }
            }
            if (!i && IsFeatureBroadcastEnabled()) {
              var u = t.match(/^br(\d+)$/);
              if (u && u[1]) {
                var m = parseInt(u[1]);
                i = new no(e, m);
              }
            }
            return i
              ? (e.AddTab(i),
                this.BroadcastNewTabToAllBrowserContexts(
                  e.GetBrowserContext(),
                  t
                ),
                n && e.ActivateTab(i),
                i)
              : null;
          }),
          (e.prototype.GetNextChatPopupID = function() {
            return "ChatWindow_" + this.m_iLastChatPopupID++;
          }),
          (e.prototype.BIsFriendsListSingleWindow = function(e) {
            var t = this.GetPerContextChatData(e);
            return !t.BUsePopups() || t.IsFriendsListSingleWindow();
          }),
          (e.prototype.SetFriendsListSingleWindowMode = function(e, t) {
            var n = this.GetPerContextChatData(e);
            n.BUsePopups() &&
              n.IsFriendsListSingleWindow() != t &&
              (t
                ? Yo.UIStore.ConvertDefaultTabSetToEmbedded(n.browser_context)
                : Yo.UIStore.ConvertDefaultTabSetToPopup(n.browser_context),
              n.SetFriendsListSingleWindowMode(t));
          }),
          (e.prototype.BIsFriendsListCollapsed = function(e) {
            var t = this.GetPerContextChatData(e);
            return t.IsFriendsListSingleWindow() && t.IsFriendsListCollapsed();
          }),
          (e.prototype.SetFriendsListCollapsed = function(e, t) {
            this.GetPerContextChatData(e).SetFriendsListCollapsed(t);
          }),
          (e.prototype.ConvertDefaultTabSetToPopup = function(e) {
            var t = this.GetPerContextChatData(e);
            if (t.default_tabset.tabCount) {
              var n = t.GetPopupForTabSet(t.default_tabset);
              return (
                n ||
                ((n = Yo.CreateChatPopup(
                  e,
                  this.GetNextChatPopupID(),
                  t.default_tabset,
                  t.cached_popup_window_restore_details,
                  void 0,
                  !1
                )).Show(!0),
                t.AddPopup(t.default_tabset, n),
                this.SerializePopupState(),
                t.friends_list_window &&
                  (t.friends_list_window.BringToFront(),
                  (t.friends_list_window.title = Object(re.b)(
                    "#WindowTitle_FriendsList"
                  ))),
                n)
              );
            }
            return null;
          }),
          (e.prototype.ConvertDefaultTabSetToEmbedded = function(e) {
            var t = this.GetPerContextChatData(e),
              n = t.GetPopupForTabSet(t.default_tabset);
            n &&
              (n.popup.GetWindowRestoreDetails().then(function(e) {
                t.SetCachedDefaultPopupDimensions(e);
              }),
              t.RemovePopupForTabSet(t.default_tabset),
              this.SerializePopupState(),
              n.ClearTabSet(),
              n.popup.Close());
          }),
          (e.prototype.OnTabSetResized = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext());
            if (e == t.default_tabset && !t.IsFriendsListSingleWindow()) {
              var n = t.GetPopupForTabSet(e);
              n &&
                n.popup.GetWindowRestoreDetails().then(function(e) {
                  t.SetCachedDefaultPopupDimensions(e);
                });
            }
          }),
          (e.prototype.CloseTabSet = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext()),
              n = t.GetPopupForTabSet(e);
            n && n.popup.Close(),
              t.RemovePopupForTabSet(e),
              this.SerializePopupState();
          }),
          (e.prototype.OnTabSetClosed = function(e) {
            this.GetPerContextChatData(
              e.GetBrowserContext()
            ).RemovePopupForTabSet(e),
              this.SerializePopupState();
          }),
          (e.prototype.FocusTabSet = function(e) {
            var t = this.GetPerContextChatData(e.GetBrowserContext()),
              n = t.GetPopupForTabSet(e);
            n && n.popup && !n.popup.container.BIsClosed()
              ? n.popup.container.BringToFront()
              : t.IsTabSetInFriendListWindow(e) &&
                t.IsFriendsListSingleWindow() &&
                (t.BUsePopups()
                  ? Yo.ShowPopupFriendsList(t.browser_context, !1, !0)
                  : t.friends_list_window &&
                    t.friends_list_window.BringToFront());
          }),
          (e.prototype.MoveTabToNewPopup = function(e, t, n, o) {
            AssertMsg(e, "browserContext");
            var i = this.GetPerContextChatData(e);
            this.ForEachTabSet(i, function(e) {
              return e.RemoveTab(t);
            });
            var r = new ce(e);
            r.AddTab(t);
            var a = Yo.CreateChatPopup(
              e,
              this.GetNextChatPopupID(),
              r,
              o,
              n,
              !1
            );
            if ((a.Show(!0), o)) {
              var s = a.popup.GetWindow();
              try {
                s.SteamClient.Window.PositionWindowRelative(
                  o,
                  n.left,
                  n.top,
                  n.width,
                  n.height
                );
              } catch (e) {
                console.error(e);
              }
            }
            i.AddPopup(r, a), this.SerializePopupState();
          }),
          (e.prototype.SerializePopupState = function(e) {
            if (
              (void 0 === e && (e = !1),
              this.m_bRestoredPopupState &&
                Yo.SettingsStore.BReady() &&
                !this.m_bShuttingDown)
            ) {
              var t = this.SerializePopupStateToObject(e);
              Yo.SettingsStore.StoreObjectInLocalStorage(oo, t);
            }
          }),
          (e.prototype.SerializePopupStateToObject = function(e) {
            var t = this.GetPerContextChatData(qo),
              n = {
                window_restore_details: t.cached_popup_window_restore_details,
                defaultTabs: void 0,
                popupTabs: void 0,
                bFriendsListVisible: !1,
                always_restore: e,
                bFriendsListSingleWindow: t.IsFriendsListSingleWindow(),
                bFriendsListCollapsed: t.IsFriendsListCollapsed()
              };
            t.default_tabset &&
              0 < t.default_tabset.tabCount &&
              (n.defaultTabs = t.default_tabset.Serialize());
            for (
              var o = [], i = 0, r = Array.from(t.popup_list);
              i < r.length;
              i++
            ) {
              var a = r[i];
              a.tab_set != t.default_tabset && o.push(a.tab_set.Serialize());
            }
            return (
              0 < o.length && (n.popupTabs = o),
              (n.bFriendsListVisible = !!t.friends_list_window),
              n
            );
          }),
          (e.prototype.BRestorePopups = function() {
            return Yo.SettingsStore.BAlwaysShowChatsInNewWindow();
          }),
          (e.prototype.BRestoreOpenChats = function() {
            return Yo.SettingsStore.FriendsSettings.bRememberOpenChats;
          }),
          (e.prototype.DeserializeIntoTabSet = function(e, t) {
            if (t.tabs && Array.isArray(t.tabs))
              for (var n = 0, o = t.tabs; n < o.length; n++) {
                var i = o[n];
                i.startsWith("br") ||
                  this.CreateNewTabFromUniqueID(e, i, i == t.active_tab, !0);
              }
          }),
          (e.prototype.SetStateToRestoreFrom = function(e) {
            this.m_stateToRestoreFrom = e;
          }),
          (e.prototype.RestorePopupState = function() {
            return R.b(this, void 0, void 0, function() {
              var t, n;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      AssertMsg(
                        !this.m_bRestoredPopupState,
                        "Second restore popup state"
                      ),
                      AssertMsg(
                        !this.m_bRestoringPopups,
                        "RestorePopupState called while already restoring"
                      ),
                      Yo.ParentalStore.BIsFriendsBlocked()
                        ? [2]
                        : ((this.m_bRestoringPopups = !0),
                          this.m_stateToRestoreFrom
                            ? (this.RestoreFromStateObject(
                                this.m_stateToRestoreFrom,
                                !1
                              ),
                              (this.m_stateToRestoreFrom = void 0),
                              (this.m_bRestoringPopups = !1),
                              [2])
                            : [
                                4,
                                Yo.SettingsStore.GetObjectFromLocalStorageWhenReady(
                                  oo
                                )
                              ])
                    );
                  case 1:
                    return (
                      (t = e.sent()),
                      (n = !1),
                      "undefined" != typeof SteamClient &&
                      SteamClient.WebChat &&
                      SteamClient.WebChat.BSuppressPopupsInRestore
                        ? [4, SteamClient.WebChat.BSuppressPopupsInRestore()]
                        : [3, 3]
                    );
                  case 2:
                    (n = e.sent()), (e.label = 3);
                  case 3:
                    return (
                      this.RestoreFromStateObject(t, n),
                      (this.m_bRestoringPopups = !1),
                      [2]
                    );
                }
              });
            });
          }),
          (e.prototype.RestoreFromStateObject = function(e, t) {
            var n = this.GetPerContextChatData(qo);
            if (
              (AssertMsg(n.BIsEmpty(), "Restoring to non-empty context", n),
              n.BIsEmpty())
            ) {
              if (
                (e.window_restore_details &&
                  n.SetCachedDefaultPopupDimensions(e.window_restore_details),
                n.SetFriendsListSingleWindowMode(!!e.bFriendsListSingleWindow),
                n.SetFriendsListCollapsed(!!e.bFriendsListCollapsed),
                !t && (e.always_restore || this.BRestoreOpenChats()))
              ) {
                if (e.defaultTabs) {
                  var o = n.default_tabset;
                  if (
                    (this.DeserializeIntoTabSet(o, e.defaultTabs),
                    0 < o.tabCount && !n.IsFriendsListSingleWindow())
                  ) {
                    var i = Yo.CreateChatPopup(
                      Yo.GetDefaultBrowserContext(),
                      this.GetNextChatPopupID(),
                      o,
                      void 0,
                      void 0,
                      !1
                    );
                    n.AddPopup(o, i), i.Show(!1);
                  }
                }
                if (e.popupTabs)
                  for (var r = 0, a = e.popupTabs; r < a.length; r++) {
                    var s = a[r];
                    o = new ce(qo);
                    if ((this.DeserializeIntoTabSet(o, s), 0 < o.tabCount)) {
                      i = Yo.CreateChatPopup(
                        Yo.GetDefaultBrowserContext(),
                        this.GetNextChatPopupID(),
                        o,
                        void 0,
                        void 0,
                        !1
                      );
                      n.AddPopup(o, i), i.Show(!1);
                    }
                  }
              }
              if (!t) {
                var c =
                  !e ||
                  void 0 === e.bFriendsListVisible ||
                  e.bFriendsListVisible;
                n.BUsePopups() && Yo.ShowPopupFriendsListAtStartup(c);
                for (
                  var l = 0, p = this.m_vecShowGroupsAfterRestorePopup;
                  l < p.length;
                  l++
                ) {
                  var u = p[l];
                  this.ShowAndOrActivateChatRoomGroup(qo, u, !1);
                }
              }
              (this.m_vecShowGroupsAfterRestorePopup = []),
                (this.m_bRestoredPopupState = !0),
                this.m_chatStore.OnRestorePopupsComplete();
            }
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            var t = this.GetPerContextChatData(qo);
            e.ui_state().set_friends_list_docked(t.IsFriendsListSingleWindow()),
              e
                .ui_state()
                .set_friends_list_visible(
                  t.friends_list_window && !t.friends_list_window.BIsClosed()
                ),
              e
                .ui_state()
                .set_chat_popups_opened(Array.from(t.popup_list).length),
              e
                .ui_state()
                .set_friends_list_collapsed(t.IsFriendsListCollapsed());
            var n = 0,
              o = 0;
            (n += w.b(t.default_tabset.tabs, function(e) {
              return e.IsChatRoom();
            })),
              (o += w.b(t.default_tabset.tabs, function(e) {
                return e.IsFriendChat();
              }));
            for (var i = 0, r = Array.from(t.popup_list); i < r.length; i++) {
              var a = r[i];
              a.tab_set != t.default_tabset &&
                ((n += w.b(a.tab_set.tabs, function(e) {
                  return e.IsChatRoom();
                })),
                (o += w.b(a.tab_set.tabs, function(e) {
                  return e.IsFriendChat();
                })));
            }
            e.ui_state().set_group_chat_tabs_opened(n),
              e.ui_state().set_friend_chat_tabs_opened(o);
          }),
          R.c([m.observable], e.prototype, "m_bTheaterMode", void 0),
          R.c([m.action], e.prototype, "OnFriendsParentalLockChanged", null),
          R.c([jo], e.prototype, "ShowFriendChatDialogWhenReady", null),
          R.c(
            [jo],
            e.prototype,
            "ShowAndOrActivateChatRoomGroupWhenReady",
            null
          ),
          R.c([M.a], e.prototype, "SerializePopupState", null),
          e
        );
      })(),
      ro = (function() {
        function e(e, t) {
          (this.m_bShown = !1), (this.m_popup = e), (this.m_chatPopup = t);
        }
        return (
          (e.prototype.Show = function(e) {
            this.m_popup.Show(e), this.m_bShown || (this.m_bShown = !0);
          }),
          Object.defineProperty(e.prototype, "popup", {
            get: function() {
              return this.m_popup;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "tab_set", {
            get: function() {
              return this.m_chatPopup.tab_set;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClearTabSet = function() {
            this.m_chatPopup.ClearTabSet();
          }),
          (e.prototype.IsSameBrowserContext = function(e) {
            var t = this.m_popup.GetBrowserContext() || qo;
            return e.m_nBrowserID == t.m_nBrowserID && e.m_unPID == t.m_unPID;
          }),
          e
        );
      })();
    ((eo = $n || ($n = {}))[(eo.FriendsList = 0)] = "FriendsList"),
      (eo[(eo.Chat = 1)] = "Chat");
    var ao,
      so,
      co = (function() {
        function e() {
          this.m_eActiveView = $n.FriendsList;
        }
        return (
          (e.prototype.GetActiveView = function() {
            return this.m_eActiveView;
          }),
          (e.prototype.SetActiveView = function(e) {
            this.m_eActiveView = e;
          }),
          R.c([m.observable], e.prototype, "m_eActiveView", void 0),
          e
        );
      })(),
      lo = (function() {
        function e(e) {
          (this.m_browserContext = e),
            (this.m_DefaultTabSet = new ce(e)),
            (this.m_FriendsListWindow = void 0),
            (this.m_PopupWindowRestoreDetails = void 0),
            (this.m_mapTabSetToPopup = new Map()),
            (this.m_ResponsiveWindowState = new co()),
            this.SetFriendsListSingleWindowMode(!1),
            (this.m_bFriendsListCollapsed = G.a.STEAM_TV);
        }
        return (
          (e.prototype.BIsEmpty = function() {
            return (
              0 == this.m_DefaultTabSet.tabCount &&
              (!G.a.IN_CLIENT || null == this.m_FriendsListWindow) &&
              0 == this.m_mapTabSetToPopup.size
            );
          }),
          (e.prototype.BUsePopups = function() {
            return G.a.USE_POPUPS;
          }),
          (e.prototype.IsFriendsListSingleWindow = function() {
            return this.m_bFriendsListSingleWindow;
          }),
          (e.prototype.SetFriendsListSingleWindowMode = function(e) {
            this.BUsePopups()
              ? (this.m_bFriendsListSingleWindow = e)
              : (this.m_bFriendsListSingleWindow = !0);
          }),
          (e.prototype.IsFriendsListCollapsed = function() {
            return this.m_bFriendsListCollapsed;
          }),
          (e.prototype.SetFriendsListCollapsed = function(e) {
            this.m_bFriendsListCollapsed = e;
          }),
          Object.defineProperty(e.prototype, "browser_context", {
            get: function() {
              return this.m_browserContext;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "default_tabset", {
            get: function() {
              return (
                AssertMsg(
                  this.m_DefaultTabSet,
                  "Context has no default chat target"
                ),
                this.m_DefaultTabSet
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "friends_list_window", {
            get: function() {
              return this.m_FriendsListWindow;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetFriendsListWindow = function(e) {
            (this.m_FriendsListWindow = e || void 0),
              !e &&
                this.IsFriendsListSingleWindow() &&
                this.m_DefaultTabSet.CloseAllTabs();
          }),
          Object.defineProperty(e.prototype, "popup_list", {
            get: function() {
              return this.m_mapTabSetToPopup.values();
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "responsive_window_state", {
            get: function() {
              return this.m_ResponsiveWindowState;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(
            e.prototype,
            "cached_popup_window_restore_details",
            {
              get: function() {
                return this.m_PopupWindowRestoreDetails;
              },
              enumerable: !0,
              configurable: !0
            }
          ),
          Object.defineProperty(e.prototype, "screen_info", {
            get: function() {
              return this.m_ScreenInfo;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetScreenInfo = function(e, t) {
            this.m_ScreenInfo = { width: e, height: t };
          }),
          (e.prototype.SetCachedDefaultPopupDimensions = function(e) {
            this.m_PopupWindowRestoreDetails = e;
          }),
          (e.prototype.GetTabSetForId = function(e) {
            if (this.m_DefaultTabSet.GetTabByUniqueID(e))
              return this.m_DefaultTabSet;
            for (
              var t = 0, n = Array.from(this.m_mapTabSetToPopup.keys());
              t < n.length;
              t++
            ) {
              var o = n[t];
              if (o.GetTabByUniqueID(e)) return o;
            }
            return null;
          }),
          (e.prototype.RemovePopupForTabSet = function(e) {
            this.m_mapTabSetToPopup.delete(e);
          }),
          (e.prototype.AddPopup = function(e, t) {
            AssertMsg(
              !this.m_mapTabSetToPopup.has(e),
              "Added popup for tabset twice"
            ),
              this.m_mapTabSetToPopup.set(e, t);
          }),
          (e.prototype.GetPopupForTabSet = function(e) {
            return this.m_mapTabSetToPopup.get(e);
          }),
          (e.prototype.IsTabSetInFriendListWindow = function(e) {
            return e == this.default_tabset && this.IsFriendsListSingleWindow();
          }),
          (e.prototype.BIsTabSetActive = function(e) {
            var t = this.GetPopupForTabSet(e);
            return t
              ? !t.popup.container.BIsClosed()
              : this.IsTabSetInFriendListWindow(e) &&
                  this.friends_list_window &&
                  !this.friends_list_window.BIsClosed();
          }),
          (e.prototype.BIsTabSetVisible = function(e) {
            var t = this.GetPopupForTabSet(e);
            return t
              ? t.popup.container.BIsVisible()
              : this.IsTabSetInFriendListWindow(e) &&
                  this.friends_list_window &&
                  this.friends_list_window.BIsVisible();
          }),
          (e.prototype.BIsTabSetFocused = function(e) {
            var t = this.GetPopupForTabSet(e);
            return t
              ? t.popup.container.BIsFocused()
              : this.IsTabSetInFriendListWindow(e) &&
                  this.friends_list_window &&
                  this.friends_list_window.BIsFocused();
          }),
          (e.prototype.CloseAllPopups = function() {
            for (
              var e = 0, t = Array.from(this.popup_list);
              e < t.length;
              e++
            ) {
              t[e].popup.Close();
            }
            this.m_mapTabSetToPopup.clear(),
              this.friends_list_window && this.m_FriendsListWindow.Close(),
              (this.m_DefaultTabSet = new ce(this.m_browserContext));
          }),
          R.c(
            [m.observable],
            e.prototype,
            "m_bFriendsListSingleWindow",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_bFriendsListCollapsed", void 0),
          e
        );
      })(),
      po = (function() {
        function e(e) {
          var t = this;
          (this.m_bReady = !1),
            (this.m_unTimerUploadCommunityPreferences = void 0),
            (this.m_rgOnReadyCallbacks = []),
            (this.m_bFriendSettingsReady = !1),
            (this.m_CommunityPreferencesChangedHandler = _(
              Xe.j.NotifyCommunityPreferencesChangedHandler,
              function(e) {
                return t.UpdateCommunityPreferences(e.Body().preferences()), 1;
              }
            )),
            (this.m_Storage = e),
            G.a.IN_CLIENT
              ? (this.m_iFriendSettingsStore = new mo(
                  this,
                  this.OnFriendSettingsChanged.bind(this)
                ))
              : (this.m_iFriendSettingsStore = new ho(
                  this,
                  this.OnFriendSettingsChanged.bind(this)
                )),
            (this.m_CommunityPreferences = new cn());
          var n = new Xe.b();
          (this.m_CommunityPreferences.bHideAdultContentViolence = n.hide_adult_content_violence()),
            (this.m_CommunityPreferences.bHideAdultContentSex = n.hide_adult_content_sex()),
            (this.m_CommunityPreferences.bParenthesizeNicknames = n.parenthesize_nicknames()),
            (this.m_ServerCommunityPreferences = void 0);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_CM = e),
              this.m_CM.AddOnLogonCallback(function() {
                t.m_bReady ||
                  (t.m_iFriendSettingsStore.InternalInit(), t.SetReady());
                var e = u.Init(Xe.c);
                return Xe.k
                  .GetCommunityPreferences(t.m_CM.GetServiceTransport(), e)
                  .then(function(e) {
                    return t.UpdateCommunityPreferences(e.Body().preferences());
                  });
              });
          }),
          (e.prototype.BReady = function() {
            return this.m_bReady;
          }),
          Object.defineProperty(e.prototype, "FriendsSettings", {
            get: function() {
              return this.m_FriendsSettings;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BUpdateFriendsSettings = function(e) {
            return (
              !!this.m_iFriendSettingsStore.BUpdateSettings(e) &&
              ((this.m_FriendsSettings = e), !0)
            );
          }),
          (e.prototype.BClientHasFeatureOrOnWeb = function(e) {
            return (
              !G.a.IN_CLIENT ||
              (!!this.BReady() &&
                ("object" == typeof this.m_FriendsSettings.featuresEnabled &&
                  (!!this.m_FriendsSettings.featuresEnabled.hasOwnProperty(e) &&
                    this.m_FriendsSettings.featuresEnabled[e])))
            );
          }),
          (e.prototype.BAlwaysShowChatsInNewWindow = function() {
            return this.m_FriendsSettings.bAlwaysNewChatWindow;
          }),
          (e.prototype.BForceAlphabeticFriendSorting = function() {
            return this.m_FriendsSettings.bForceAlphabeticFriendSorting;
          }),
          (e.prototype.RunOnReady = function(e) {
            this.m_bReady ? e() : this.m_rgOnReadyCallbacks.push(e);
          }),
          (e.prototype.GetAccountSpecificLocalStorageKey = function(e) {
            return (
              AssertMsg(
                this.m_CM.steamid.BIsValid(),
                "CM has never been logged on, can't construct local storage key"
              ),
              this.m_CM.steamid.BIsValid()
                ? e + "_" + this.m_CM.steamid.GetAccountID()
                : null
            );
          }),
          (e.prototype.GetObjectFromLocalStorageWhenReady = function(n, o) {
            var i = this;
            return this.m_bReady
              ? Promise.resolve(this.GetObjectFromLocalStorage(n, o))
              : new Promise(function(e, t) {
                  i.RunOnReady(function() {
                    e(i.GetObjectFromLocalStorage(n, o));
                  });
                });
          }),
          (e.prototype.GetObjectFromLocalStorage = function(e, o) {
            var t = this.GetAccountSpecificLocalStorageKey(e);
            return t
              ? this.m_Storage.GetObject(t).then(function(e) {
                  var t = Object.assign({}, o, e);
                  if (o && "object" == typeof o)
                    for (var n in o)
                      "object" == typeof o[n] &&
                        e &&
                        (t[n] = Object.assign({}, o[n], e[n]));
                  return t;
                })
              : Promise.reject("Storage not ready");
          }),
          (e.prototype.StoreObjectInLocalStorage = function(e, t) {
            var n = this.GetAccountSpecificLocalStorageKey(e);
            return !!n && (this.m_Storage.StoreObject(n, t), !0);
          }),
          (e.prototype.GetFlagFromLocalStorageWhenReady = function(n) {
            var o = this;
            return this.m_bReady
              ? Promise.resolve(this.GetFlagFromLocalStorage(n))
              : new Promise(function(e, t) {
                  o.RunOnReady(function() {
                    e(o.GetFlagFromLocalStorage(n));
                  });
                });
          }),
          (e.prototype.GetFlagFromLocalStorage = function(e) {
            var t = this.GetAccountSpecificLocalStorageKey(e);
            return t
              ? this.m_Storage.GetString(t).then(function(e) {
                  return "true" === e;
                })
              : Promise.reject("Storage not ready");
          }),
          (e.prototype.SetFlagInLocalStorage = function(e, t) {
            var n = this.GetAccountSpecificLocalStorageKey(e);
            return (
              !!n &&
              (t
                ? this.m_Storage.StoreString(n, "true")
                : this.m_Storage.RemoveObject(n),
              !0)
            );
          }),
          (e.prototype.SetReady = function() {
            if (this.m_bFriendSettingsReady && this.m_CM.steamid.BIsValid()) {
              this.m_bReady = !0;
              for (
                var e = 0, t = this.m_rgOnReadyCallbacks;
                e < t.length;
                e++
              ) {
                (0, t[e])();
              }
              this.m_rgOnReadyCallbacks = [];
            }
          }),
          (e.prototype.OnFriendSettingsChanged = function(e) {
            (this.m_FriendsSettings = e),
              (this.m_bFriendSettingsReady = !0),
              this.SetReady();
          }),
          Object.defineProperty(e.prototype, "CommunityPreferences", {
            get: function() {
              return this.m_CommunityPreferences;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.UpdateCommunityPreferences = function(e) {
            var t = R.a({}, this.m_CommunityPreferences);
            void 0 !== e.hide_adult_content_violence() &&
              (t.bHideAdultContentViolence = e.hide_adult_content_violence()),
              void 0 !== e.hide_adult_content_sex() &&
                (t.bHideAdultContentSex = e.hide_adult_content_sex()),
              void 0 !== e.parenthesize_nicknames() &&
                (t.bParenthesizeNicknames = e.parenthesize_nicknames()),
              (this.m_ServerCommunityPreferences = R.a({}, t)),
              (this.m_CommunityPreferences = t);
          }),
          (e.prototype.CommunityPreferencesToMessage = function(e) {
            var t = new Xe.b();
            return (
              t.set_hide_adult_content_violence(e.bHideAdultContentViolence),
              t.set_hide_adult_content_sex(e.bHideAdultContentSex),
              t.set_parenthesize_nicknames(e.bParenthesizeNicknames),
              t
            );
          }),
          (e.prototype.SetCommunityPreferences = function(e) {
            var t = this;
            (this.m_CommunityPreferences = e),
              this.m_unTimerUploadCommunityPreferences &&
                clearTimeout(this.m_unTimerUploadCommunityPreferences),
              (this.m_unTimerUploadCommunityPreferences = SetBackgroundTimeout(
                function() {
                  (t.m_unTimerUploadCommunityPreferences = void 0),
                    t.UploadCommunityPreferences();
                },
                5e3
              ));
          }),
          (e.prototype.UploadCommunityPreferences = function() {
            var e = !1;
            if (void 0 === this.m_ServerCommunityPreferences) e = !0;
            else
              for (
                var t = 0, n = Object.keys(this.m_ServerCommunityPreferences);
                t < n.length;
                t++
              ) {
                var o = n[t];
                if (
                  this.m_ServerCommunityPreferences[o] !==
                  this.CommunityPreferences[o]
                ) {
                  e = !0;
                  break;
                }
              }
            if (e) {
              var i = u.Init(Xe.h);
              i
                .Body()
                .set_preferences(
                  this.CommunityPreferencesToMessage(this.CommunityPreferences)
                ),
                Xe.k
                  .SetCommunityPreferences(this.m_CM.GetServiceTransport(), i)
                  .then(function(e) {});
            }
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            var t = e.settings(),
              n = this.FriendsSettings;
            t.set_notifications_show_ingame(n.bNotifications_ShowIngame),
              t.set_notifications_show_online(n.bNotifications_ShowOnline),
              t.set_notifications_show_message(n.bNotifications_ShowMessage),
              t.set_notifications_events_and_announcements(
                n.bNotifications_EventsAndAnnouncements
              ),
              t.set_sounds_play_ingame(n.bSounds_PlayIngame),
              t.set_sounds_play_online(n.bSounds_PlayOnline),
              t.set_sounds_play_message(n.bSounds_PlayMessage),
              t.set_sounds_events_and_announcements(
                n.bSounds_EventsAndAnnouncements
              ),
              t.set_always_new_chat_window(n.bAlwaysNewChatWindow),
              t.set_force_alphabetic_friend_sorting(
                n.bForceAlphabeticFriendSorting
              ),
              t.set_chat_flash_mode(n.nChatFlashMode),
              t.set_remember_open_chats(n.bRememberOpenChats),
              t.set_compact_quick_access(n.bCompactQuickAccess),
              t.set_compact_friends_list(n.bCompactFriendsList),
              t.set_notifications_show_chat_room_notification(
                n.bNotifications_ShowChatRoomNotification
              ),
              t.set_sounds_play_chat_room_notification(
                n.bSounds_PlayChatRoomNotification
              ),
              t.set_hide_offline_friends_in_tag_groups(
                n.bHideOfflineFriendsInTagGroups
              ),
              t.set_hide_categorized_friends(n.bHideCategorizedFriends),
              t.set_categorize_in_game_friends_by_game(
                n.bCategorizeInGameFriendsByGame
              ),
              t.set_chat_font_size(n.nChatFontSize),
              t.set_use24hour_clock(n.b24HourClock),
              t.set_do_not_disturb_mode(n.bDoNotDisturbMode),
              t.set_disable_embed_inlining(n.bDisableEmbedInlining),
              t.set_sign_into_friends(n.bSignIntoFriends);
          }),
          R.c([m.observable], e.prototype, "m_bReady", void 0),
          R.c([m.observable], e.prototype, "m_FriendsSettings", void 0),
          R.c([m.observable], e.prototype, "m_CommunityPreferences", void 0),
          R.c([m.action], e.prototype, "BUpdateFriendsSettings", null),
          R.c([m.action], e.prototype, "UpdateCommunityPreferences", null),
          R.c([m.action], e.prototype, "SetCommunityPreferences", null),
          e
        );
      })(),
      uo = (function() {
        return function(e, t) {
          (this.m_SettingsStore = e), (this.m_fnFriendSettingsChanged = t);
        };
      })(),
      mo = (function(o) {
        function e(e, t) {
          var n = o.call(this, e, t) || this;
          return (n.m_bClientInitComplete = !1), n.InternalInit(), n;
        }
        return (
          R.d(e, o),
          (e.prototype.InternalInit = function() {
            this.m_bClientInitComplete ||
              (SteamClient &&
              SteamClient.FriendSettings &&
              SteamClient.FriendSettings.RegisterForSettingsChanges
                ? (SteamClient.FriendSettings.RegisterForSettingsChanges(
                    this.OnClientSettingsChange.bind(this)
                  ),
                  (this.m_bClientInitComplete = !0))
                : AssertMsg(!1, "Can't initialize settings from client"));
          }),
          (e.prototype.OnClientSettingsChange = function(e) {
            var t,
              n = en.DefaultFriendsSettings();
            if ("string" != typeof e) {
              if (
                ((t = e.FriendsSettings),
                SteamClient.FriendSettings &&
                  SteamClient.FriendSettings.SetFriendSettings)
              )
                return void this.BUpdateSettings(t);
            } else
              t = JSON.parse(e, function(e, t) {
                return "b" == e.substring(0, 1) && "number" == typeof t
                  ? 0 != t
                  : t;
              });
            Object.assign(n, t), this.m_fnFriendSettingsChanged(n);
          }),
          (e.prototype.BUpdateSettings = function(e) {
            if (
              SteamClient.FriendSettings &&
              SteamClient.FriendSettings.SetFriendSettings
            ) {
              var t = JSON.stringify(e);
              SteamClient.FriendSettings.SetFriendSettings(t);
            } else
              for (var n = 0, o = Object.keys(e); n < o.length; n++) {
                var i = o[n];
                if (e[i] != this.m_SettingsStore.FriendsSettings[i])
                  if ("nChatFlashMode" == i)
                    SteamClient.FriendSettings.SetChatFlashMode(e[i]);
                  else {
                    if ("nChatFontSize" == i) continue;
                    SteamClient.FriendSettings.SetSettingsValueBool(i, e[i]);
                  }
              }
            return !0;
          }),
          e
        );
      })(uo),
      ho = (function(e) {
        function n() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(n, e),
          (n.prototype.InternalInit = function() {
            var t = this;
            this.m_SettingsStore
              .GetObjectFromLocalStorage(
                n.k_strLocalStorageKeyPrefix,
                this.GetDefaultSettings()
              )
              .then(function(e) {
                t.m_fnFriendSettingsChanged(e.friendsSettings);
              });
          }),
          (n.prototype.GetDefaultSettings = function() {
            return { friendsSettings: en.DefaultFriendsSettings() };
          }),
          (n.prototype.BUpdateSettings = function(e) {
            var t = { friendsSettings: e };
            return this.m_SettingsStore.StoreObjectInLocalStorage(
              n.k_strLocalStorageKeyPrefix,
              t
            );
          }),
          (n.k_strLocalStorageKeyPrefix = "LocalStorageFriendsSettings"),
          n
        );
      })(uo),
      _o = n("fGPn"),
      fo = n("k9Bf"),
      go = n("y8NB"),
      bo = (function() {
        function r(e, t) {
          if (!(e instanceof BaseAudioContext))
            throw "Not a valid audio context.";
          t || (t = {});
          var n = t.numberOfChannels || 1;
          if (2 < n) throw "The maximum supported number of channels is two.";
          this.context_ = e;
          var o = t.bufferSize || 0;
          (this.attack = t.attack || 0), (this.release = t.release || 0);
          var i = void 0 === t.timeConstant ? 0.0025 : t.timeConstant;
          (this.threshold = void 0 === t.threshold ? -100 : t.threshold),
            (this.alpha_ = this.getAlphaFromTimeConstant_(
              i,
              this.context_.sampleRate
            )),
            (this.noiseGateKernel_ = this.context_.createScriptProcessor(
              o,
              n,
              n
            )),
            (this.noiseGateKernel_.onaudioprocess = this.onaudioprocess_.bind(
              this
            )),
            (this.input = new GainNode(this.context_)),
            (this.output = new GainNode(this.context_)),
            this.input.connect(this.noiseGateKernel_).connect(this.output),
            (this.previousLevel_ = 0),
            (this.previousWeight_ = 1),
            (this.channel_ = new Float32Array(
              this.noiseGateKernel_.bufferSize
            )),
            (this.envelope_ = new Float32Array(
              this.noiseGateKernel_.bufferSize
            )),
            (this.weights_ = new Float32Array(
              this.noiseGateKernel_.bufferSize
            ));
        }
        return (
          (r.prototype.onaudioprocess_ = function(e) {
            var t = e.inputBuffer,
              n = t.getChannelData(0);
            if (2 === t.numberOfChannels)
              for (var o = t.getChannelData(1), i = 0; i < o.length; i++)
                this.channel_[i] = (n[i] + o[i]) / 2;
            else this.channel_ = n;
            var r = this.detectLevel_(this.channel_),
              a = this.computeWeights_(r);
            for (i = 0; i < t.numberOfChannels; i++)
              for (
                var s = t.getChannelData(i),
                  c = e.outputBuffer.getChannelData(i),
                  l = 0;
                l < s.length;
                l++
              )
                c[l] = a[l] * s[l];
          }),
          (r.prototype.detectLevel_ = function(e) {
            this.envelope_[0] =
              this.alpha_ * this.previousLevel_ +
              (1 - this.alpha_) * Math.pow(e[0], 2);
            for (var t = 1; t < e.length; t++)
              this.envelope_[t] =
                this.alpha_ * this.envelope_[t - 1] +
                (1 - this.alpha_) * Math.pow(e[t], 2);
            return (
              (this.previousLevel_ = this.envelope_[this.envelope_.length - 1]),
              this.envelope_
            );
          }),
          (r.prototype.computeWeights_ = function(e) {
            var t = 1,
              n = 1;
            0 < this.attack &&
              (t = 1 / Math.ceil(this.context_.sampleRate * this.attack)),
              0 < this.release &&
                (n = 1 / Math.ceil(this.context_.sampleRate * this.release));
            for (var o = 0; o < e.length; o++) {
              if (r.toDecibel(2 * e[o]) < this.threshold) {
                var i = this.previousWeight_ - t;
                this.weights_[o] = Math.max(i, 0);
              } else {
                i = this.previousWeight_ + n;
                this.weights_[o] = Math.min(i, 1);
              }
              this.previousWeight_ = this.weights_[o];
            }
            return this.weights_;
          }),
          (r.prototype.getAlphaFromTimeConstant_ = function(e, t) {
            return Math.exp(-1 / (t * e));
          }),
          (r.toDecibel = function(e) {
            return 10 * Math.log10(e);
          }),
          r
        );
      })(),
      vo = (function() {
        function e(e, t) {
          (this.m_Analyser = void 0),
            (this.m_rgInputNode = []),
            (this.m_hUpdateInterval = 0),
            (this.m_buffer = void 0),
            (this.m_lastTimeNonZero = 0),
            (this.m_flVolume = 0),
            (this.m_flRoundedVolume = 0),
            (this.m_flAveraging = 0.6),
            (this.m_Analyser = t.createAnalyser()),
            (this.m_Analyser.fftSize = 128),
            (this.m_buffer = new Float32Array(this.m_Analyser.fftSize)),
            this.m_rgInputNode.push(e),
            e.connect(this.m_Analyser),
            this.StartUpdating();
        }
        return (
          (e.prototype.GetLastTimeNonZero = function() {
            return this.m_lastTimeNonZero;
          }),
          (e.prototype.StartUpdating = function() {
            this.StopUpdating(),
              (this.m_hUpdateInterval = SetBackgroundInterval(
                this.UpdateVolume,
                60
              ));
          }),
          (e.prototype.StopUpdating = function() {
            0 != this.m_hUpdateInterval &&
              ClearBackgroundInterval(this.m_hUpdateInterval),
              (this.m_hUpdateInterval = 0);
          }),
          (e.prototype.UpdateVolume = function() {
            this.m_Analyser.getFloatTimeDomainData(this.m_buffer);
            for (var e = 0, t = 0; t < this.m_buffer.length; ++t) {
              var n = this.m_buffer[t];
              e += n * n;
            }
            var o = Math.sqrt(e / this.m_buffer.length);
            this.m_flVolume =
              1.2 * Math.max(o, this.m_flVolume * this.m_flAveraging);
            var i = Math.round(100 * this.m_flVolume) / 100;
            i != this.m_flRoundedVolume && (this.m_flRoundedVolume = i),
              0 < this.m_flRoundedVolume &&
                (this.m_lastTimeNonZero = performance.now());
          }),
          (e.prototype.stop = function() {
            this.StopUpdating(), this.DisconnectAll();
          }),
          (e.prototype.Connect = function(e) {
            this.m_rgInputNode.push(e),
              null != this.m_Analyser && e.connect(this.m_Analyser);
          }),
          (e.prototype.DisconnectAll = function() {
            for (var e = 0; e < this.m_rgInputNode.length; ++e) {
              if (this.m_Analyser)
                try {
                  this.m_rgInputNode[e].disconnect(this.m_Analyser);
                } catch (e) {}
              this.m_rgInputNode[e] = void 0;
            }
            this.m_rgInputNode = [];
          }),
          Object.defineProperty(e.prototype, "rounded_volume", {
            get: function() {
              return this.m_flRoundedVolume;
            },
            enumerable: !0,
            configurable: !0
          }),
          R.c([m.observable], e.prototype, "m_lastTimeNonZero", void 0),
          R.c([m.observable], e.prototype, "m_flVolume", void 0),
          R.c([m.observable], e.prototype, "m_flRoundedVolume", void 0),
          R.c([m.action.bound], e.prototype, "UpdateVolume", null),
          R.c([m.action.bound], e.prototype, "stop", null),
          e
        );
      })(),
      So = n("K4CH"),
      yo = n.n(So);
    ((so = ao || (ao = {}))[(so.k_EAudioStreamType_Microphone = 1)] =
      "k_EAudioStreamType_Microphone"),
      (so[(so.k_EAudioStreamType_IncomingStream = 2)] =
        "k_EAudioStreamType_IncomingStream");
    var Co,
      Io,
      Oo,
      Eo,
      wo = (function() {
        function e() {
          (this.destination_node = void 0),
            (this.source_node = void 0),
            (this.elem = void 0),
            (this.output_gain_node = void 0),
            (this.muted = !1),
            (this.volume_meter = void 0);
        }
        return (
          R.c([m.observable], e.prototype, "muted", void 0),
          R.c([m.observable], e.prototype, "volume_meter", void 0),
          e
        );
      })();
    function Mo(e) {
      switch (e) {
        case Oo.k_EVoiceCallState_None:
          return "None";
        case Oo.k_EVoiceCallState_ScheduledInitiate:
          return "ScheduledInitiate";
        case Oo.k_EVoiceCallState_RequestedMicAccess:
          return "RequestedMicAccess";
        case Oo.k_EVoiceCallState_LocalMicOnly:
          return "LocalMicOnly";
        case Oo.k_EVoiceCallState_CreatePeerConnection:
          return "CreatePeerConnection";
        case Oo.k_EVoiceCallState_InitatedWebRTCSession:
          return "InitiatedWebRTCSession";
        case Oo.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected:
          return "WaitingOnICEConnected";
        case Oo.k_EVoiceCallState_RequestedPermission:
          return "RequestedPermission";
        case Oo.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession:
          return "NotifyingVoiceChatOfWebRTCSession";
        case Oo.k_EVoiceCallState_Connected:
          return "Connected";
      }
    }
    ((Io = Co || (Co = {}))[(Io.k_ENoiseGateLevel_Off = 0)] =
      "k_ENoiseGateLevel_Off"),
      (Io[(Io.k_ENoiseGateLevel_Low = 1)] = "k_ENoiseGateLevel_Low"),
      (Io[(Io.k_ENoiseGateLevel_Medium = 2)] = "k_ENoiseGateLevel_Medium"),
      (Io[(Io.k_ENoiseGateLevel_High = 3)] = "k_ENoiseGateLevel_High"),
      ((Eo = Oo || (Oo = {}))[(Eo.k_EVoiceCallState_None = 0)] =
        "k_EVoiceCallState_None"),
      (Eo[(Eo.k_EVoiceCallState_ScheduledInitiate = 1)] =
        "k_EVoiceCallState_ScheduledInitiate"),
      (Eo[(Eo.k_EVoiceCallState_RequestedMicAccess = 2)] =
        "k_EVoiceCallState_RequestedMicAccess"),
      (Eo[(Eo.k_EVoiceCallState_LocalMicOnly = 3)] =
        "k_EVoiceCallState_LocalMicOnly"),
      (Eo[(Eo.k_EVoiceCallState_CreatePeerConnection = 4)] =
        "k_EVoiceCallState_CreatePeerConnection"),
      (Eo[(Eo.k_EVoiceCallState_InitatedWebRTCSession = 5)] =
        "k_EVoiceCallState_InitatedWebRTCSession"),
      (Eo[(Eo.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected = 6)] =
        "k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected"),
      (Eo[(Eo.k_EVoiceCallState_RequestedPermission = 7)] =
        "k_EVoiceCallState_RequestedPermission"),
      (Eo[(Eo.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession = 8)] =
        "k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession"),
      (Eo[(Eo.k_EVoiceCallState_Connected = 9)] =
        "k_EVoiceCallState_Connected");
    var Do = (function() {
        function e() {
          (this.m_eState = Oo.k_EVoiceCallState_None),
            (this.m_targetAccountID = 0),
            (this.m_bInitiatedOneOnOneCall = !1),
            (this.m_bWaitingOnOneOnOneRejoin = !1),
            (this.m_bPostedOneOnOneEndedMsg = !1),
            (this.m_voiceChatID = ""),
            (this.m_webRTCConnectedNotification = void 0),
            (this.m_webRTCServerIP = 0),
            (this.m_webRTCServerPort = 0),
            (this.m_webRTCClientIP = 0),
            (this.m_webRTCClientPort = 0),
            (this.m_nFailuresThisInitiate = 0),
            (this.m_bOfferUpdateInProgress = !1),
            (this.m_msgPendingRemoteDescriptionUpdate = void 0),
            (this.m_bIsConnectionAttemptOverTwoSeconds = !1),
            (this.m_nMostRecentRemoteDescriptionVersion = "0");
        }
        return (
          (e.prototype.BMatchingCall = function(e, t) {
            return (
              (0 != e && this.m_targetAccountID == e) ||
              !(
                !this.m_chatRoom ||
                !t ||
                this.m_chatRoom.chatID != t.chatID ||
                this.m_chatRoom.groupID != t.groupID
              )
            );
          }),
          (e.prototype.BCallActiveForGroup = function(e) {
            return this.m_chatRoom && this.m_chatRoom.groupID == e;
          }),
          R.c([m.observable], e.prototype, "m_eState", void 0),
          R.c([m.observable], e.prototype, "m_targetAccountID", void 0),
          R.c([m.observable], e.prototype, "m_bInitiatedOneOnOneCall", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bWaitingOnOneOnOneRejoin",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_bPostedOneOnOneEndedMsg", void 0),
          R.c([m.observable], e.prototype, "m_chatRoom", void 0),
          R.c([m.observable], e.prototype, "m_voiceChatID", void 0),
          R.c([m.observable], e.prototype, "m_nFailuresThisInitiate", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bIsConnectionAttemptOverTwoSeconds",
            void 0
          ),
          e
        );
      })(),
      To = (function() {
        return function() {
          (this.m_SSRC = 0),
            (this.m_MostRecentDelayEstimateMs = 0),
            (this.m_MostRecentJitterReceivedMs = 0),
            (this.m_CurrentJitterBufferMs = 0),
            (this.m_PacketsReceived = 0),
            (this.m_PacketsLost = 0),
            (this.m_PacketsSent = 0),
            (this.m_BytesSent = 0),
            (this.m_googRTT = 0),
            (this.m_BytesReceived = 0),
            (this.m_DecodingThroughNetEQ = 0),
            (this.m_DecodingPacketLossCorrection = 0),
            (this.m_DecodingPacketLossFadeNoiseGeneration = 0),
            (this.m_DecodingComfortNoiseGeneration = 0),
            (this.m_DecodingNormal = 0),
            (this.m_DecodingSilenceGenerator = 0),
            (this.m_DecodingMuted = 0);
        };
      })(),
      Go = "SteamVoiceSettings",
      Ro = (function() {
        function e(e) {
          (this.m_VoiceInputGain = 1),
            (this.m_VoiceOutputGain = 1),
            (this.m_NoiseGateLevel = Co.k_ENoiseGateLevel_Medium),
            (this.m_VoiceUseEchoCancellation = !0),
            (this.m_VoiceUseNoiseCancellation = !0),
            (this.m_VoiceUseAutoGainControl = !0),
            (this.m_SelectedMicID = "default"),
            (this.m_SelectedOutputID = "default"),
            (this.m_bPlayPTTSounds = !0),
            (this.m_bSettingsLoaded = !1),
            (this.m_bHasResetOpenMicHotkey = !1),
            (this.m_SettingsStore = e);
        }
        return (
          (e.prototype.SaveToLocalStorage = function() {
            this.m_SettingsStore.StoreObjectInLocalStorage(Go, {
              inputGain: this.m_VoiceInputGain,
              outputGain: this.m_VoiceOutputGain,
              noiseGateLevel: this.m_NoiseGateLevel,
              noiseCancellation: this.m_VoiceUseNoiseCancellation,
              echoCancellation: this.m_VoiceUseEchoCancellation,
              autoGainControl: this.m_VoiceUseAutoGainControl,
              selectedMic: this.m_SelectedMicID,
              selectedOutput: this.m_SelectedOutputID,
              pttSoundsEnabled: this.m_bPlayPTTSounds,
              hasResetOpenMicHotKey: this.m_bHasResetOpenMicHotkey
            });
          }),
          (e.prototype.LoadFromLocalStorage = function(t) {
            var n = this;
            this.m_SettingsStore
              .GetObjectFromLocalStorageWhenReady(Go, void 0)
              .then(function(e) {
                null != e &&
                  (null != e.inputGain && (n.m_VoiceInputGain = e.inputGain),
                  null != e.outputGain && (n.m_VoiceOutputGain = e.outputGain),
                  null != e.noiseGateLevel &&
                    (n.m_NoiseGateLevel = e.noiseGateLevel),
                  null != e.noiseCancellation &&
                    (n.m_VoiceUseNoiseCancellation = e.noiseCancellation),
                  null != e.autoGainControl &&
                    (n.m_VoiceUseAutoGainControl = e.autoGainControl),
                  null != e.echoCancellation &&
                    (n.m_VoiceUseEchoCancellation = e.echoCancellation),
                  null != e.selectedMic && (n.m_SelectedMicID = e.selectedMic),
                  null != e.selectedOutput &&
                    (n.m_SelectedOutputID = e.selectedOutput),
                  null != e.pttSoundsEnabled &&
                    (n.m_bPlayPTTSounds = e.pttSoundsEnabled),
                  null != e.hasResetOpenMicHotKey &&
                    (n.m_bHasResetOpenMicHotkey = e.hasResetOpenMicHotKey)),
                  (n.m_bSettingsLoaded = !0),
                  t.LogMsg("(VoiceChat) Settings loaded from local storage"),
                  t.RefreshPushToTalkKeySettings();
              });
          }),
          R.c([m.observable], e.prototype, "m_VoiceInputGain", void 0),
          R.c([m.observable], e.prototype, "m_VoiceOutputGain", void 0),
          R.c([m.observable], e.prototype, "m_NoiseGateLevel", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_VoiceUseEchoCancellation",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_VoiceUseNoiseCancellation",
            void 0
          ),
          R.c([m.observable], e.prototype, "m_VoiceUseAutoGainControl", void 0),
          R.c([m.observable], e.prototype, "m_SelectedMicID", void 0),
          R.c([m.observable], e.prototype, "m_SelectedOutputID", void 0),
          R.c([m.observable], e.prototype, "m_bPlayPTTSounds", void 0),
          R.c([m.observable], e.prototype, "m_bSettingsLoaded", void 0),
          R.c([m.observable], e.prototype, "m_bHasResetOpenMicHotkey", void 0),
          e
        );
      })(),
      No = (function() {
        function e() {
          (this.muted = !1), (this.gain = 1);
        }
        return (
          R.c([m.observable], e.prototype, "muted", void 0),
          R.c([m.observable], e.prototype, "gain", void 0),
          e
        );
      })(),
      Lo = (function() {
        function e() {
          (this.mic_muted_locally = !1),
            (this.output_muted_locally = !1),
            (this.has_no_mic_for_session = !1);
        }
        return (
          R.c([m.observable], e.prototype, "mic_muted_locally", void 0),
          R.c([m.observable], e.prototype, "output_muted_locally", void 0),
          R.c([m.observable], e.prototype, "has_no_mic_for_session", void 0),
          e
        );
      })(),
      ko = (function() {
        function e() {
          (this.partner_accountid = 0),
            (this.voice_chatid = ""),
            (this.previously_joined = !1),
            (this.audio_repeat = 0),
            (this.audio_buffer = void 0);
        }
        return (
          (e.prototype.ClearAudioRepeats = function() {
            0 != this.audio_repeat &&
              (ClearBackgroundTimeout(this.audio_repeat),
              (this.audio_repeat = 0)),
              null != this.audio_buffer &&
                (this.audio_buffer.StopPlayback(),
                (this.audio_buffer = void 0));
          }),
          R.c([m.observable], e.prototype, "partner_accountid", void 0),
          R.c([m.observable], e.prototype, "voice_chatid", void 0),
          R.c([m.observable], e.prototype, "previously_joined", void 0),
          e
        );
      })(),
      Ao = (function() {
        function o(e) {
          var l = this;
          (this.m_VoiceCallState = new Do()),
            (this.m_mapOneOnOneCallsWaitingJoinOrAccept = m.observable.map()),
            (this.m_hRegisterForPushToTalkStateChange = null),
            (this.m_bPushToTalkEnabled = !1),
            (this.m_bPushToMuteEnabled = !1),
            (this.m_bVoicePTTStateEnabled = !1),
            (this.m_VKPushToTalkHotKey = 0),
            (this.m_strPushToTalkDisplayString = ""),
            (this.m_hPushToTalkReleaseTimeout = 0),
            (this.m_ConnectionCheck = 0),
            (this.m_ScheduledInitiate = 0),
            (this.m_ScheduledVoiceLogsUpload = 0),
            (this.m_bClientSideLogsUploadInProgress = !1),
            (this.m_nLastLogLineUploaded = 0),
            (this.m_StatsTimeout = 0),
            (this.m_bUserHasDeniedMicPermissions = !1),
            (this.m_bOutputMuted = !1),
            (this.m_AudioContext = void 0),
            (this.m_rgAudioStreams = Object(m.observable)([])),
            (this.m_MicVolumeMeter = void 0),
            (this.m_MicNoiseGate = void 0),
            (this.m_MicInputGainNode = void 0),
            (this.m_rgLogLines = []),
            (this.m_mapSSRCToAccountID = new Map()),
            (this.m_mapAccountIDToStats = new Map()),
            (this.m_mapPerUserOutputGain = m.observable.map()),
            (this.m_mapUserVoiceStatus = m.observable.map()),
            (this.m_LogVoiceChatDetails = !1),
            (this.m_VoiceEchoLocalMic = !1),
            (this.m_bLocalMicEchoStateBeforeMicTest = !1),
            (this.m_bLocalMicTestActive = !1),
            (this.m_bForceConnectingStatus = !1),
            (this.m_bForceReconnectingStatus = !1),
            (this.m_OnWebRTCUpdateRemoteDescriptionHandler = h(
              go.c.NotifyWebRTCUpdateRemoteDescriptionHandler,
              function(e) {
                return l.m_VoiceCallState.m_eState <
                  Oo.k_EVoiceCallState_InitatedWebRTCSession
                  ? (l.LogMsg(
                      "(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler in wrong state " +
                        l.m_VoiceCallState.m_eState
                    ),
                    2)
                  : (l.m_VoiceCallState.m_bOfferUpdateInProgress
                      ? (l.LogMsg(
                          "(WebRTC) Hit NotifyWebRTCUpdateRemoteDescriptionHandler while already updating, queing work"
                        ),
                        (l.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate = e.Body()))
                      : l.ProcessUpdatedRemoteDescription(e.Body()),
                    1);
              }
            )),
            (this.m_OnWebRTCConnectionHandler = h(
              go.c.NotifyWebRTCSessionConnectedHandler,
              function(e) {
                return l.m_VoiceCallState.m_eState <
                  Oo.k_EVoiceCallState_InitatedWebRTCSession
                  ? (l.LogMsg(
                      "(WebRTC) Hit NotifyWebRTCSessionConnectedHandler in wrong state " +
                        l.m_VoiceCallState.m_eState
                    ),
                    2)
                  : ((l.m_VoiceCallState.m_webRTCConnectedNotification = e.Body()),
                    (l.m_VoiceCallState.m_webRTCServerIP = l.m_VoiceCallState.m_webRTCConnectedNotification.server_ip()),
                    (l.m_VoiceCallState.m_webRTCServerPort = l.m_VoiceCallState.m_webRTCConnectedNotification.server_port()),
                    (l.m_VoiceCallState.m_webRTCClientIP = l.m_VoiceCallState.m_webRTCConnectedNotification.client_ip()),
                    (l.m_VoiceCallState.m_webRTCClientPort = l.m_VoiceCallState.m_webRTCConnectedNotification.client_port()),
                    "completed" == l.m_PeerConnection.iceConnectionState ||
                    "connected" == l.m_PeerConnection.iceConnectionState
                      ? (l.LogMsg(
                          "(VoiceChat) ICE state is already connected after successful SetRemoteDescription, joining voice chat immediately"
                        ),
                        l.JoinVoiceChatOrAskForOneOnOneChatNow())
                      : (l.LogMsg(
                          "(VoiceChat) ICE state is not connected after successful SetRemoteDescription, waiting for UDP connetivity"
                        ),
                        (l.m_VoiceCallState.m_eState =
                          Oo.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected)),
                    1);
              }
            )),
            (this.m_OnVoiceAllUsersStatusUpdate = h(
              fo.h.NotifyAllUsersVoiceStatusHandler,
              function(e) {
                if (l.m_VoiceCallState.m_voiceChatID != e.Body().voice_chatid())
                  return 1;
                for (var t = 0; t < e.Body().users().length; ++t) {
                  var n = e.Body().users()[t];
                  l.UpdateUserVoiceStatus(n);
                }
                return 1;
              }
            )),
            (this.m_OnVoiceStatusUpdate = h(
              fo.h.NotifyUserVoiceStatusHandler,
              function(e) {
                return l.UpdateUserVoiceStatus(e.Body()), 1;
              }
            )),
            (this.m_VoiceChatResponseHandler = h(
              fo.h.NotifyOneOnOneChatResponseHandler,
              function(e) {
                if (
                  l.m_VoiceCallState.m_eState >=
                  Oo.k_EVoiceCallState_RequestedPermission
                ) {
                  var t = new E.a(e.Body().steamid_partner());
                  if (
                    e.Body().voicechat_id() != l.m_VoiceCallState.m_voiceChatID
                  )
                    l.LogMsg(
                      "(VoiceChat) Got response from " +
                        t.GetAccountID() +
                        " but for different voice chat than we are in, ignoring. "
                    );
                  else if (
                    t.GetAccountID() == l.m_VoiceCallState.m_targetAccountID &&
                    1 == e.Body().accepted_request()
                  )
                    l.LogMsg(
                      "(VoiceChat) Got acceptance from " +
                        t.GetAccountID() +
                        " " +
                        e.Hdr().steamid()
                    ),
                      Yo.AudioPlaybackManager.PlayAudioURL(
                        G.a.COMMUNITY_CDN_URL +
                          "public/sounds/webui/steam_voice_channel_enter.m4a?v=1"
                      ),
                      l.OnVoiceChatAccepted(!0);
                  else {
                    l.LogMsg("(VoiceChat) Rejected by " + t.GetAccountID());
                    var n = Yo.ChatStore.GetFriendChat(t.GetAccountID(), !1),
                      o = Yo.FriendStore.GetFriend(t.GetAccountID());
                    null != n &&
                      null != o &&
                      ((l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !0),
                      n.AddVoiceChannelInviteMsg(
                        t.GetAccountID(),
                        Yo.GetServerRTime32(),
                        Object(re.b)(
                          "#FriendMsg_VoiceChannelEndedExplicit",
                          o.display_name
                        )
                      )),
                      l.DeleteOneOnOneCallWaitingJoinOrAccept(t.GetAccountID()),
                      Yo.AudioPlaybackManager.PlayAudioURL(
                        G.a.COMMUNITY_CDN_URL +
                          "public/sounds/webui/steam_voice_channel_exit.m4a?v=1"
                      ),
                      l.OnVoiceChatAccepted(!1);
                  }
                }
                return 1;
              }
            )),
            (this.m_IncomingVoiceChatRequestHandler = h(
              fo.h.NotifyOneOnOneChatRequestedHandler,
              function(e) {
                var t = new E.a(e.Body().steamid_partner()),
                  n = e.Body().voice_chatid(),
                  o = Yo.FriendStore.GetFriend(t.GetAccountID());
                if (
                  null == o ||
                  o.is_blocked ||
                  Yo.FriendStore.BIsInvisibleMode() ||
                  Yo.FriendStore.GetUserDoNotDisturb()
                )
                  return (
                    l.LogMsg(
                      "(VoiceChat) Rejecting one-on-one voice chat request because partner is not a friend, is blocked, we are invisible, or we are DND"
                    ),
                    l.OnRejectOneOnOneVoiceChat(t, e.Body().voice_chatid()),
                    1
                  );
                var i = new ko();
                (i.partner_accountid = l.m_CMInterface.steamid.GetAccountID()),
                  (i.voice_chatid = n),
                  (i.previously_joined = !1);
                var r = l;
                if (
                  ((i.audio_repeat = SetBackgroundTimeout(function() {
                    (i.audio_repeat = 0), r.PlayRingSound(t.GetAccountID());
                  }, 2e4)),
                  l.m_mapOneOnOneCallsWaitingJoinOrAccept.set(
                    t.GetAccountID(),
                    i
                  ),
                  l.LogMsg(
                    "(VoiceChat) voice chat request from " + t.GetAccountID()
                  ),
                  l.LogMsg(
                    "(VoiceChat) current state " + l.m_VoiceCallState.m_eState
                  ),
                  l.m_VoiceCallState.m_targetAccountID == t.GetAccountID())
                )
                  return (
                    l.LogMsg(
                      "(VoiceChat) We are already trying to one on one chat this user, just auto-acceptting to re-sync."
                    ),
                    l.OnAcceptOneOnOneVoiceChat(t, n),
                    1
                  );
                Yo.NotificationManager.DisplayNotificationFromFriend(o, {
                  title: o.display_name,
                  body: Object(re.b)(
                    "#Friend_RequestingOneOnOneChat",
                    o.display_name
                  ),
                  tag: "state_" + o.accountid,
                  steamid: o.persona.m_steamid.ConvertTo64BitString()
                });
                var a = Yo.ChatStore.GetFriendChat(t.GetAccountID(), !0);
                return (
                  null != a &&
                    (a.AddVoiceChannelInviteMsg(
                      t.GetAccountID(),
                      Yo.GetServerRTime32(),
                      Object(re.b)(
                        "#FriendMsg_VoiceChannelInvite",
                        o.display_name,
                        a.self.display_name
                      )
                    ),
                    Yo.UIStore.ShowAndOrActivateChat(
                      Yo.GetDefaultBrowserContext(),
                      a,
                      !1
                    )),
                  l.PlayRingSound(o.accountid),
                  1
                );
              }
            )),
            (this.m_VoiceChatEndedHandler = h(
              fo.h.NotifyVoiceChatEndedHandler,
              function(e) {
                for (
                  var t = e.Body().voice_chatid(),
                    n = 0,
                    o = Array.from(
                      l.m_mapOneOnOneCallsWaitingJoinOrAccept.keys()
                    );
                  n < o.length;
                  n++
                ) {
                  var i = o[n],
                    r = l.m_mapOneOnOneCallsWaitingJoinOrAccept.get(i);
                  if (null != r && r.voice_chatid == t) {
                    l.LogMsg(
                      "(VoiceChat) OneOnOne VoiceChat we were invited too with " +
                        i +
                        " has ended and is no longer joinable."
                    ),
                      Yo.AudioPlaybackManager.PlayAudioURL(
                        G.a.COMMUNITY_CDN_URL +
                          "public/sounds/webui/steam_voice_channel_exit.m4a?v=1"
                      );
                    var a = Number(i);
                    l.DeleteOneOnOneCallWaitingJoinOrAccept(a);
                    var s = Yo.ChatStore.GetFriendChat(a, !1),
                      c = Yo.FriendStore.GetFriend(a);
                    null != s &&
                      (c
                        ? s.AddVoiceChannelInviteMsg(
                            c.accountid,
                            Yo.GetServerRTime32(),
                            Object(re.b)(
                              "#FriendMsg_VoiceChannelEndedExplicit",
                              c.display_name
                            )
                          )
                        : s.AddVoiceChannelInviteMsg(
                            l.m_CMInterface.steamid.GetAccountID(),
                            Yo.GetServerRTime32(),
                            Object(re.b)("#FriendMsg_VoiceChannelEnded")
                          ),
                      l.m_VoiceCallState.m_targetAccountID == Number(i) &&
                        (l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !0));
                  }
                }
                if (t == l.m_VoiceCallState.m_voiceChatID) {
                  if (0 != l.m_VoiceCallState.m_targetAccountID)
                    null ==
                      (s = Yo.ChatStore.GetFriendChat(
                        l.m_VoiceCallState.m_targetAccountID,
                        !1
                      )) ||
                      l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg ||
                      ((l.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !0),
                      s.AddVoiceChannelInviteMsg(
                        l.m_CMInterface.steamid.GetAccountID(),
                        Yo.GetServerRTime32(),
                        Object(re.b)("#FriendMsg_VoiceChannelEnded")
                      ));
                  0 != l.m_VoiceCallState.m_targetAccountID &&
                    l.m_VoiceCallState.m_eState >
                      Oo.k_EVoiceCallState_RequestedPermission &&
                    Yo.AudioPlaybackManager.PlayAudioURL(
                      G.a.COMMUNITY_CDN_URL +
                        "public/sounds/webui/steam_voice_channel_exit.m4a?v=1"
                    ),
                    l.LogMsg(
                      "(VoiceChat) Got voice chat end notification from server for active chatid"
                    ),
                    l.EndVoiceChatInternal(!1);
                }
                return 1;
              }
            )),
            (this.m_VoiceChatEnteredNotification = h(
              fo.h.NotifyUserJoinedVoiceChatHandler,
              function(e) {
                if (
                  e.Body().voice_chatid() == l.m_VoiceCallState.m_voiceChatID
                ) {
                  var t = new E.a(e.Body().user_steamid());
                  l.LogMsg(
                    "(VoiceChat) User " +
                      t.Render() +
                      " has just JOINED our active voice chat"
                  ),
                    0 != l.m_VoiceCallState.m_targetAccountID &&
                      l.m_VoiceCallState.m_targetAccountID ==
                        t.GetAccountID() &&
                      (l.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin = !1);
                }
                return 1;
              }
            )),
            (this.m_VoiceChatLeftNotification = h(
              fo.h.NotifyUserLeftVoiceChatHandler,
              function(e) {
                if (
                  e.Body().voice_chatid() == l.m_VoiceCallState.m_voiceChatID
                ) {
                  var t = new E.a(e.Body().user_steamid());
                  l.LogMsg(
                    "(VoiceChat) User " +
                      t.Render() +
                      " has just LEFT our active voice chat"
                  ),
                    0 != l.m_VoiceCallState.m_targetAccountID &&
                      l.m_VoiceCallState.m_targetAccountID ==
                        t.GetAccountID() &&
                      (l.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin = !0);
                }
                return 1;
              }
            )),
            (this.m_ShouldRejoinChatRoomVoiceChatHandler = h(
              ie.U.NotifyShouldRejoinChatRoomVoiceChatHandler,
              function(e) {
                var t = {
                  groupID: e.Body().chat_group_id(),
                  chatID: e.Body().chat_id()
                };
                return (
                  l.m_VoiceCallState.m_eState >
                    Oo.k_EVoiceCallState_ScheduledInitiate &&
                    l.m_VoiceCallState.BMatchingCall(0, t) &&
                    (l.LogMsg(
                      "(ChatRoom) Notified that we need to rejoin new voicechat session for chat room... doing so now..."
                    ),
                    l.EndVoiceChatInternal(!0),
                    l.InitiateVoiceChat(0, t)),
                  1
                );
              }
            )),
            (this.m_Settings = new Ro(e)),
            this.m_Settings.LoadFromLocalStorage(this),
            "undefined" != typeof SteamClient &&
              (null != SteamClient &&
                null != SteamClient.WebChat &&
                null != SteamClient.WebChat.RegisterForPushToTalkStateChange &&
                (this.m_hRegisterForPushToTalkStateChange = SteamClient.WebChat.RegisterForPushToTalkStateChange(
                  this.OnPushToTalkStateChange
                )),
              null != window.SteamClient.WebChat.SetVoiceChatActive &&
                window.SteamClient.WebChat.SetVoiceChatActive(!1));
        }
        return (
          (o.prototype.Init = function(e) {
            (this.m_CMInterface = e),
              (window.SetVoiceEchoLocalMic = this.SetVoiceEchoLocalMic),
              (window.SetVoiceLogDetails = this.SetVoiceLogDetails),
              (window.SetVoiceForceReconnectingStatus = this.ForceReconnectingStatus),
              (window.SetVoiceForceConnectingStatus = this.ForceConnectingStatus);
          }),
          (o.prototype.RefreshPushToTalkKeySettings = function() {
            var t = this;
            "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.GetPushToTalkEnabled &&
              SteamClient.WebChat.GetPushToTalkEnabled().then(function(e) {
                (t.m_bPushToTalkEnabled = e.bEnabled),
                  (t.m_VKPushToTalkHotKey = e.vkHotKey),
                  e.bPushToMute &&
                    ((t.m_bPushToMuteEnabled = e.bEnabled),
                    (t.m_bPushToTalkEnabled = !1)),
                  (t.m_strPushToTalkDisplayString = e.strKeyName),
                  t.m_bPushToTalkEnabled ||
                    t.m_bPushToMuteEnabled ||
                    (null != SteamClient.WebChat &&
                      null != SteamClient.WebChat.SetPushToTalkHotKey &&
                      (AssertMsg(
                        t.m_Settings.m_bSettingsLoaded,
                        "Settings not loaded but RefreshPushToTalkKeySettings hit"
                      ),
                      t.m_Settings.m_bHasResetOpenMicHotkey ||
                        ((t.m_Settings.m_bHasResetOpenMicHotkey = !0),
                        t.m_Settings.SaveToLocalStorage(),
                        console.log(
                          "Reset Open Mic hotkey to None on first run of new client in open mic mode"
                        ),
                        SteamClient.WebChat.SetPushToTalkHotKey(0),
                        t.RefreshPushToTalkKeySettings())));
              });
          }),
          (o.prototype.InitiateFriendChat = function(e) {
            this.BPartnerHasRequestedAndIsInOneOnOneChat(e)
              ? this.AcceptPartnersOneOnOneChatRequest(e)
              : (this.InitiateVoiceChat(e, null),
                Yo.AudioPlaybackManager.PlayAudioURL(
                  G.a.COMMUNITY_CDN_URL +
                    "public/sounds/webui/steam_phonecall.m4a?v=1"
                ));
          }),
          (o.prototype.InitiateRoomChat = function(e, t) {
            this.InitiateVoiceChat(0, { groupID: e, chatID: t });
          }),
          (o.prototype.EndLocalMicTest = function() {
            (this.m_bLocalMicTestActive = !1),
              this.m_VoiceCallState.m_eState ==
                Oo.k_EVoiceCallState_LocalMicOnly &&
                this.EndVoiceChatInternal(!1),
              this.SetVoiceEchoLocalMic(this.m_bLocalMicEchoStateBeforeMicTest);
          }),
          (o.prototype.IsLocalMicTestActive = function() {
            return this.m_bLocalMicTestActive;
          }),
          (o.prototype.InitiateLocalMicTest = function() {
            (this.m_bLocalMicTestActive = !0),
              (this.m_bLocalMicEchoStateBeforeMicTest = this.m_VoiceEchoLocalMic),
              this.SetVoiceEchoLocalMic(!0),
              this.m_VoiceCallState.m_eState == Oo.k_EVoiceCallState_None &&
                this.InitiateVoiceChat(0, null);
          }),
          (o.prototype.AcceptPartnersOneOnOneChatRequest = function(e) {
            var t = this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);
            if (null == t) return !1;
            t.ClearAudioRepeats();
            var n = E.a.InitFromAccountID(e);
            return this.OnAcceptOneOnOneVoiceChat(n, t.voice_chatid), !0;
          }),
          (o.prototype.OnRejectOneOnOneVoiceChatForPartner = function(e) {
            var t = this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);
            if (null == t) return !1;
            t.ClearAudioRepeats();
            var n = E.a.InitFromAccountID(e);
            this.OnRejectOneOnOneVoiceChat(n, t.voice_chatid),
              this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e);
            var o = Yo.ChatStore.GetFriendChat(e, !1),
              i = Yo.FriendStore.self;
            return (
              null != o &&
                null != i &&
                ((this.m_VoiceCallState.m_targetAccountID == e &&
                  this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg) ||
                  o.AddVoiceChannelInviteMsg(
                    i.accountid,
                    Yo.GetServerRTime32(),
                    Object(re.b)(
                      "#FriendMsg_VoiceChannelEndedExplicit",
                      i.display_name
                    )
                  ),
                this.m_VoiceCallState.m_targetAccountID == e &&
                  (this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !0)),
              !0
            );
          }),
          (o.prototype.OnUserLeaveOneOnOneVoiceChat = function() {
            0 != this.m_VoiceCallState.m_targetAccountID ||
            this.m_VoiceCallState.m_eState == Oo.k_EVoiceCallState_None
              ? (this.LogMsg(
                  "(VoiceChat) User asking to leave but not end one-on-one chat with: " +
                    this.m_VoiceCallState.m_targetAccountID
                ),
                this.EndVoiceChatInternal(!1))
              : this.LogMsg(
                  "(VoiceChat) OnUserLeaveOneOnOneVoiceChat called when in a group not one-on-one chat!"
                );
          }),
          (o.prototype.OnUserEndVoiceChat = function() {
            var t = this;
            if (
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None &&
              0 != this.m_VoiceCallState.m_targetAccountID
            ) {
              if (!this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg) {
                var e = Yo.ChatStore.GetFriendChat(
                    this.m_VoiceCallState.m_targetAccountID,
                    !1
                  ),
                  n = Yo.FriendStore.self;
                null != e &&
                  null != n &&
                  ((this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !0),
                  e.AddVoiceChannelInviteMsg(
                    Yo.CMInterface.steamid.GetAccountID(),
                    Yo.GetServerRTime32(),
                    Object(re.b)(
                      "#FriendMsg_VoiceChannelEndedExplicit",
                      n.display_name
                    )
                  ));
              }
              var o = this.m_VoiceCallState.m_targetAccountID;
              this.m_VoiceCallState.m_targetAccountID = 0;
              var i = u.Init(fo.b);
              i
                .Body()
                .set_steamid_partner(
                  E.a.InitFromAccountID(o).ConvertTo64BitString()
                ),
                this.DeleteOneOnOneCallWaitingJoinOrAccept(o),
                fo.i
                  .EndOneOnOneChat(this.m_CMInterface.GetServiceTransport(), i)
                  .then(function(e) {
                    1 == e.GetEResult()
                      ? t.LogMsg("(VoiceChat) Ended voice chat with " + o)
                      : t.LogMsg(
                          "(VoiceChat) Failed ending voice chat with " + o
                        );
                  });
            }
            0 != this.m_VoiceCallState.m_targetAccountID &&
              this.DeleteOneOnOneCallWaitingJoinOrAccept(
                this.m_VoiceCallState.m_targetAccountID
              ),
              this.EndVoiceChatInternal(!1);
          }),
          (o.prototype.SetSelectedMic = function(e) {
            e != this.m_Settings.m_SelectedMicID &&
              (this.LogMsg("(VoiceChat) Set selected mic " + e),
              (this.m_Settings.m_SelectedMicID = e),
              this.m_Settings.SaveToLocalStorage(),
              this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.SetSelectedOutput = function(e) {
            e != this.m_Settings.m_SelectedOutputID &&
              (this.LogMsg("(VoiceChat) Set selected output " + e),
              (this.m_Settings.m_SelectedOutputID = e),
              this.m_Settings.SaveToLocalStorage(),
              this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.GetAudioWorkletSupport = function() {
            return Yo.AudioPlaybackManager.supports_audio_worklets;
          }),
          (o.prototype.GetUserDeniedMicAccess = function() {
            return this.m_bUserHasDeniedMicPermissions;
          }),
          (o.prototype.GetSelectedMic = function() {
            return this.m_Settings.m_SelectedMicID;
          }),
          (o.prototype.GetSelectedOutputDevice = function() {
            return this.m_Settings.m_SelectedOutputID;
          }),
          (o.prototype.SetUseEchoCancellation = function(e) {
            e != this.m_Settings.m_VoiceUseEchoCancellation &&
              ((this.m_Settings.m_VoiceUseEchoCancellation = e),
              this.m_Settings.SaveToLocalStorage(),
              this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.GetUseEchoCancellation = function() {
            return this.m_Settings.m_VoiceUseEchoCancellation;
          }),
          (o.prototype.SetUseNoiseCancellation = function(e) {
            e != this.m_Settings.m_VoiceUseNoiseCancellation &&
              ((this.m_Settings.m_VoiceUseNoiseCancellation = e),
              this.m_Settings.SaveToLocalStorage(),
              this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.GetUseNoiseCancellation = function() {
            return this.m_Settings.m_VoiceUseNoiseCancellation;
          }),
          (o.prototype.SetUseAutoGainControl = function(e) {
            e != this.m_Settings.m_VoiceUseAutoGainControl &&
              ((this.m_Settings.m_VoiceUseAutoGainControl = e),
              this.m_Settings.SaveToLocalStorage(),
              this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.GetUseAutoGainControl = function() {
            return this.m_Settings.m_VoiceUseAutoGainControl;
          }),
          (o.prototype.SetVoiceEchoLocalMic = function(e) {
            (this.m_VoiceEchoLocalMic = e), this.UpdateNoiseGateOnActiveMic();
          }),
          (o.prototype.GetVoiceEchoLocalMic = function() {
            return this.m_VoiceEchoLocalMic;
          }),
          (o.prototype.GetPushToTalkOrMuteSoundsEnabled = function() {
            return this.m_Settings.m_bPlayPTTSounds;
          }),
          (o.prototype.SetPushToTalkOrMuteSoundsEnabled = function(e) {
            this.m_Settings.m_bPlayPTTSounds != e &&
              ((this.m_Settings.m_bPlayPTTSounds = e),
              this.m_Settings.SaveToLocalStorage());
          }),
          (o.prototype.SetPushToTalkEnabled = function(e) {
            (this.m_bPushToTalkEnabled = e), (this.m_bPushToMuteEnabled = !1);
          }),
          (o.prototype.GetPushToTalkEnabled = function() {
            return this.m_bPushToTalkEnabled;
          }),
          (o.prototype.SetPushToMuteEnabled = function(e) {
            (this.m_bPushToMuteEnabled = e), (this.m_bPushToTalkEnabled = !1);
          }),
          (o.prototype.GetPushToMuteEnabled = function() {
            return this.m_bPushToMuteEnabled;
          }),
          (o.prototype.GetPushToTalkVoiceStateEnabled = function() {
            return this.m_bVoicePTTStateEnabled;
          }),
          (o.prototype.GetPushToTalkHotKeyVK = function() {
            return this.m_VKPushToTalkHotKey;
          }),
          (o.prototype.GetPushToTalkHotKeyDisplayString = function() {
            return this.m_strPushToTalkDisplayString;
          }),
          (o.prototype.SetVoiceLogDetails = function(e) {
            this.m_LogVoiceChatDetails = e;
          }),
          (o.prototype.GetVoiceLogDetails = function() {
            return this.m_LogVoiceChatDetails;
          }),
          (o.prototype.SetUseNoiseGateLevel = function(e) {
            e != this.m_Settings.m_NoiseGateLevel &&
              (this.LogMsg("(VoiceChat) Nose Gate Level: " + e),
              (this.m_Settings.m_NoiseGateLevel = e),
              this.m_Settings.SaveToLocalStorage(),
              this.UpdateNoiseGateOnActiveMic());
          }),
          (o.prototype.GetUseNoiseGateLevel = function() {
            return this.m_Settings.m_NoiseGateLevel;
          }),
          (o.prototype.SetVoiceInputGain = function(e) {
            this.m_Settings.m_VoiceInputGain != e &&
              ((this.m_Settings.m_VoiceInputGain = Math.max(
                0,
                Math.min(e, o.k_MaxInputOutputGainValue)
              )),
              this.LogMsg(
                "(VoiceChat) New mic Input Gain value is " +
                  this.m_Settings.m_VoiceInputGain
              ),
              null != this.m_MicInputGainNode &&
                this.m_MicInputGainNode.gain.setValueAtTime(
                  this.GetCurrentVoiceInputGainTarget(),
                  this.m_AudioContext.currentTime
                ),
              this.m_Settings.SaveToLocalStorage());
          }),
          (o.prototype.GetVoiceInputGain = function() {
            return this.m_Settings.m_VoiceInputGain;
          }),
          (o.prototype.SetVoiceOutputGain = function(e) {
            if (this.m_Settings.m_VoiceOutputGain != e) {
              (this.m_Settings.m_VoiceOutputGain = Math.max(
                0,
                Math.min(e, o.k_MaxInputOutputGainValue)
              )),
                this.LogMsg(
                  "(VoiceChat) New global OutputGain value is " +
                    this.m_Settings.m_VoiceOutputGain
                ),
                this.m_Settings.SaveToLocalStorage();
              for (var t = 0; t < this.m_rgAudioStreams.length; ++t) {
                var n = this.m_rgAudioStreams[t];
                n.output_gain_node &&
                  (n.type == ao.k_EAudioStreamType_Microphone
                    ? n.output_gain_node.gain.setValueAtTime(
                        this.m_Settings.m_VoiceOutputGain,
                        this.m_AudioContext.currentTime
                      )
                    : n.output_gain_node.gain.setValueAtTime(
                        this.m_Settings.m_VoiceOutputGain *
                          this.GetPerUserGainLevel(n.accountid),
                        this.m_AudioContext.currentTime
                      ));
              }
            }
          }),
          (o.prototype.GetVoiceOutputGain = function() {
            return this.m_Settings.m_VoiceOutputGain;
          }),
          (o.prototype.GetUserMutedRemotely = function(e) {
            var t = this.m_mapUserVoiceStatus.get(e);
            return (
              null == t &&
                ((t = new Lo()), this.m_mapUserVoiceStatus.set(e, t)),
              t.mic_muted_locally
            );
          }),
          (o.prototype.GetOutputMutedRemotely = function(e) {
            var t = this.m_mapUserVoiceStatus.get(e);
            return (
              null == t &&
                ((t = new Lo()), this.m_mapUserVoiceStatus.set(e, t)),
              t.output_muted_locally
            );
          }),
          (o.prototype.GetUserHasNoMicForSession = function(e) {
            var t = this.m_mapUserVoiceStatus.get(e);
            return (
              null == t &&
                ((t = new Lo()), this.m_mapUserVoiceStatus.set(e, t)),
              t.has_no_mic_for_session
            );
          }),
          (o.prototype.ConvertSliderToGainValue = function(e, t) {
            return (e = e <= 50 ? e / 50 * 1 : 1 + t * ((e - 50) / 50));
          }),
          (o.prototype.ConvertGainValueToSliderValue = function(e, t) {
            return e <= 1 ? 50 * e : 50 + (e - 1) / t * 50;
          }),
          (o.prototype.ForceReconnectingStatus = function(e) {
            this.m_bForceReconnectingStatus = !0;
          }),
          (o.prototype.ForceConnectingStatus = function(e) {
            this.m_bForceConnectingStatus = !0;
          }),
          (o.prototype.GetActiveChatRoomGroupID = function() {
            return this.m_VoiceCallState.m_eState == Oo.k_EVoiceCallState_None
              ? ""
              : this.m_VoiceCallState.m_chatRoom
                ? this.m_VoiceCallState.m_chatRoom.groupID
                : "";
          }),
          (o.prototype.GetActiveVoiceChatID = function() {
            return this.m_VoiceCallState.m_eState == Oo.k_EVoiceCallState_None
              ? ""
              : this.m_VoiceCallState.m_chatRoom
                ? this.m_VoiceCallState.m_chatRoom.chatID
                : "";
          }),
          (o.prototype.BInitiatedOneOnOneChat = function(e) {
            return (
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None &&
              (this.m_VoiceCallState.m_targetAccountID == e &&
                this.m_VoiceCallState.m_bInitiatedOneOnOneCall)
            );
          }),
          (o.prototype.ToggleMicMuting = function() {
            for (var e = 0; e < this.m_rgAudioStreams.length; ++e) {
              var t = this.m_rgAudioStreams[e];
              if (t.type == ao.k_EAudioStreamType_Microphone) {
                t.muted = !t.muted;
                for (var n = t.stream.getTracks(), o = 0; o < n.length; o++)
                  n[o].enabled = !t.muted;
                t.muted
                  ? this.m_MicInputGainNode.gain.setValueAtTime(
                      0,
                      this.m_AudioContext.currentTime + 0.2
                    )
                  : this.m_MicInputGainNode.gain.setValueAtTime(
                      this.GetCurrentVoiceInputGainTarget(),
                      this.m_AudioContext.currentTime
                    );
              }
            }
            this.SendVoiceStatusUpdate();
          }),
          (o.prototype.BHasSampleRateTooHighInBrowser = function() {
            return (
              !G.a.IN_CLIENT &&
              48e3 < Yo.AudioPlaybackManager.GetLastObservedSampleRate()
            );
          }),
          (o.prototype.BNoMicAvailableForSession = function() {
            if (
              this.m_VoiceCallState.m_eState <=
              Oo.k_EVoiceCallState_RequestedMicAccess
            )
              return !1;
            if (this.BHasSampleRateTooHighInBrowser()) return !0;
            for (var e = 0; e < this.m_rgAudioStreams.length; ++e)
              if (
                this.m_rgAudioStreams[e].type ==
                ao.k_EAudioStreamType_Microphone
              )
                return !1;
            return !0;
          }),
          (o.prototype.IsMicMuted = function() {
            for (var e = 0; e < this.m_rgAudioStreams.length; ++e)
              if (
                this.m_rgAudioStreams[e].type ==
                ao.k_EAudioStreamType_Microphone
              )
                return this.m_rgAudioStreams[e].muted;
            return !1;
          }),
          (o.prototype.ToggleOutputMuting = function() {
            this.m_bOutputMuted = !this.m_bOutputMuted;
            for (var e = 0; e < this.m_rgAudioStreams.length; ++e) {
              var t = this.m_rgAudioStreams[e];
              if (t.type == ao.k_EAudioStreamType_IncomingStream) {
                t.muted =
                  this.m_bOutputMuted || this.GetPerUserMuting(t.accountid);
                for (var n = t.stream.getTracks(), o = 0; o < n.length; o++)
                  n[o].enabled = !this.m_bOutputMuted;
              }
            }
            this.SendVoiceStatusUpdate();
          }),
          (o.prototype.IsOutputMuted = function() {
            return this.m_bOutputMuted;
          }),
          (o.prototype.GetActiveOneOnOneVoiceChatAccountID = function() {
            return this.m_VoiceCallState.m_eState == Oo.k_EVoiceCallState_None
              ? 0
              : this.m_VoiceCallState.m_targetAccountID;
          }),
          Object.defineProperty(o.prototype, "audio_streams", {
            get: function() {
              return this.m_rgAudioStreams;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "mic_volume", {
            get: function() {
              return this.m_MicVolumeMeter;
            },
            enumerable: !0,
            configurable: !0
          }),
          (o.prototype.get_volume = function(e) {
            if (e == this.m_CMInterface.steamid.GetAccountID()) {
              if (
                this.IsMicMuted() ||
                (this.m_VoiceCallState.m_eState !=
                  Oo.k_EVoiceCallState_Connected &&
                  this.m_VoiceCallState.m_eState !=
                    Oo.k_EVoiceCallState_LocalMicOnly)
              )
                return 0;
            } else if (
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_Connected
            )
              return 0;
            for (var t = 0, n = 0; n < this.m_rgAudioStreams.length; ++n) {
              var o = this.m_rgAudioStreams[n];
              o.accountid == e &&
                null != o.volume_meter &&
                (t = Math.max(t, o.volume_meter.rounded_volume));
            }
            return t;
          }),
          (o.prototype.GetPerUserGainLevel = function(e) {
            var t = this.m_mapPerUserOutputGain.get(e);
            return null == t ? 1 : t.gain;
          }),
          (o.prototype.GetPerUserMuting = function(e) {
            var t = this.m_mapPerUserOutputGain.get(e);
            return null != t && t.muted;
          }),
          (o.prototype.SetPerUserMuting = function(e, t) {
            var n = this.m_mapPerUserOutputGain.get(e);
            null == n && (n = new No()),
              (n.muted = t || this.m_bOutputMuted),
              this.m_mapPerUserOutputGain.set(e, n),
              this.UpdateStreamsForPerUseGainChange(e);
          }),
          (o.prototype.SetPerUserGainLevel = function(e, t) {
            var n = Math.max(0, Math.min(4, t)),
              o = this.m_mapPerUserOutputGain.get(e);
            null == o && (o = new No()),
              (o.gain = n),
              o.gain < 0.001 ? (o.muted = !0) : (o.muted = !1),
              this.m_mapPerUserOutputGain.set(e, o),
              this.UpdateStreamsForPerUseGainChange(e);
          }),
          (o.prototype.UpdateStreamsForPerUseGainChange = function(e) {
            var t = this.m_mapPerUserOutputGain.get(e);
            null == t && (t = new No());
            for (var n = 0; n < this.m_rgAudioStreams.length; ++n) {
              var o = this.m_rgAudioStreams[n];
              if (o.accountid == e && null != o.output_gain_node) {
                (o.muted = t.muted),
                  o.output_gain_node.gain.setValueAtTime(
                    this.m_Settings.m_VoiceOutputGain * t.gain,
                    this.m_AudioContext.currentTime
                  );
                for (var i = o.stream.getTracks(), r = 0; r < i.length; r++)
                  i[r].enabled = !o.muted;
              }
            }
          }),
          (o.prototype.OnUserLeftChatRoomVoiceChat = function(e, t, n, o) {
            var i = { groupID: e, chatID: t };
            this.m_VoiceCallState.m_eState >
              Oo.k_EVoiceCallState_RequestedPermission &&
              this.m_VoiceCallState.BMatchingCall(0, i) &&
              (n != this.m_CMInterface.steamid.GetAccountID() ||
                o ||
                (this.LogMsg(
                  "(ChatRoom) We were told that we left chat " +
                    t +
                    " but we hadn't initiated that, trying to reconnect..."
                ),
                this.RestartVoiceChatIfConnected()));
          }),
          (o.prototype.IsMicTestActive = function() {
            return (
              this.m_VoiceCallState.m_eState ==
              Oo.k_EVoiceCallState_LocalMicOnly
            );
          }),
          (o.prototype.IsAnyVoiceActive = function() {
            return (
              !(
                this.m_VoiceCallState.m_eState <=
                  Oo.k_EVoiceCallState_LocalMicOnly &&
                0 == this.m_VoiceCallState.m_targetAccountID &&
                null == this.m_VoiceCallState.m_chatRoom
              ) &&
              (this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None ||
                0 != this.m_ScheduledInitiate)
            );
          }),
          (o.prototype.BSelfHasAcceptedOrInitiatedOneOnOneChat = function(e) {
            return (
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None &&
              this.m_VoiceCallState.m_targetAccountID == e &&
              (!!this.m_VoiceCallState.m_bInitiatedOneOnOneCall ||
                this.m_VoiceCallState.m_eState >=
                  Oo.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession)
            );
          }),
          (o.prototype.BSelfHadPreviouslyJoinedOneOnOneChat = function(e) {
            var t = this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);
            if (null == t) {
              var n = new ko();
              return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e, n), !1;
            }
            if (
              t.partner_accountid != this.m_CMInterface.steamid.GetAccountID()
            )
              return !1;
            var o = t.voice_chatid;
            return t.previously_joined && "" != o;
          }),
          (o.prototype.BPartnerHasAcceptedOrInitiatedOneOnOneChat = function(
            e
          ) {
            return (
              !(
                this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None ||
                this.m_VoiceCallState.m_bInitiatedOneOnOneCall ||
                !this.BPartnerHasRequestedAndIsInOneOnOneChat(e)
              ) ||
              (this.m_VoiceCallState.m_eState >
                Oo.k_EVoiceCallState_RequestedPermission &&
                !this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin)
            );
          }),
          (o.prototype.BPartnerHasRequestedAndIsInOneOnOneChat = function(e) {
            var t = this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);
            if (null == t) {
              var n = new ko();
              return this.m_mapOneOnOneCallsWaitingJoinOrAccept.set(e, n), !1;
            }
            return (
              t.partner_accountid ==
                this.m_CMInterface.steamid.GetAccountID() &&
              "" != t.voice_chatid
            );
          }),
          (o.prototype.IsAttemptingInitialConnection = function() {
            return (
              (0 == this.m_VoiceCallState.m_targetAccountID ||
                this.m_VoiceCallState.m_eState !=
                  Oo.k_EVoiceCallState_RequestedPermission) &&
              (this.m_VoiceCallState.m_eState !=
                Oo.k_EVoiceCallState_LocalMicOnly &&
                (this.IsAnyVoiceActive() &&
                  0 == this.m_VoiceCallState.m_nFailuresThisInitiate &&
                  this.m_VoiceCallState.m_eState !=
                    Oo.k_EVoiceCallState_Connected))
            );
          }),
          (o.prototype.HasBeenAttemptingOverTwoSeconds = function() {
            var e = this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds,
              t = this.IsAttemptingInitialConnection();
            return !!this.m_bForceConnectingStatus || (e && t);
          }),
          (o.prototype.IsAttemptingReconnect = function() {
            var e = this.IsAnyVoiceActive(),
              t = this.m_VoiceCallState.m_nFailuresThisInitiate,
              n = this.m_VoiceCallState.m_eState;
            return (
              !!this.m_bForceReconnectingStatus ||
              (e && 0 < t && n != Oo.k_EVoiceCallState_Connected)
            );
          }),
          (o.prototype.IsVoiceActiveForFriend = function(e) {
            return this.IsVoiceActive(e, null);
          }),
          (o.prototype.IsVoiceActiveForRoom = function(e, t) {
            return this.IsVoiceActive(0, { groupID: e, chatID: t });
          }),
          (o.prototype.IsVoiceActiveForGroup = function(e) {
            return (
              !!this.m_VoiceCallState.BCallActiveForGroup(e) &&
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None
            );
          }),
          (o.prototype.LogMsg = function(e) {
            this.m_rgLogLines.push(e),
              this.m_LogVoiceChatDetails && console.log(e);
          }),
          (o.prototype.GetVoiceLogs = function() {
            return this.m_rgLogLines.join("\r\n");
          }),
          (o.prototype.OnPushToTalkReleased = function() {
            this.m_bPushToTalkEnabled &&
            null != this.m_MicInputGainNode &&
            !this.m_bVoicePTTStateEnabled
              ? this.m_MicInputGainNode.gain.setValueAtTime(
                  this.GetCurrentVoiceInputGainTarget(),
                  this.m_AudioContext.currentTime + 0.2
                )
              : this.m_bPushToMuteEnabled &&
                null != this.m_MicInputGainNode &&
                this.m_bVoicePTTStateEnabled &&
                this.m_MicInputGainNode.gain.setValueAtTime(
                  this.GetCurrentVoiceInputGainTarget(),
                  this.m_AudioContext.currentTime + 0.2
                );
          }),
          (o.prototype.DebouncedToggleMicMuting = function() {
            this.ToggleMicMuting(),
              this.GetPushToTalkOrMuteSoundsEnabled() &&
                (this.IsMicMuted()
                  ? Yo.AudioPlaybackManager.PlayAudioURL(
                      G.a.COMMUNITY_CDN_URL +
                        "public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"
                    )
                  : Yo.AudioPlaybackManager.PlayAudioURL(
                      G.a.COMMUNITY_CDN_URL +
                        "public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"
                    ));
          }),
          (o.prototype.OnPushToTalkStateChange = function(e) {
            var t = e,
              n = !1;
            Yo.SettingsStore.BClientHasFeatureOrOnWeb("NewVoiceHotKeyState") &&
              ((n = !0), this.m_bPushToMuteEnabled && (t = !e)),
              !n || this.m_bPushToTalkEnabled || this.m_bPushToMuteEnabled
                ? t != this.m_bVoicePTTStateEnabled &&
                  ((this.m_bVoicePTTStateEnabled = t),
                  (this.m_bPushToTalkEnabled || this.m_bPushToMuteEnabled) &&
                    null != this.m_MicInputGainNode &&
                    (this.m_bVoicePTTStateEnabled
                      ? (this.GetPushToTalkOrMuteSoundsEnabled() &&
                          Yo.AudioPlaybackManager.PlayAudioURL(
                            G.a.COMMUNITY_CDN_URL +
                              "public/sounds/webui/steam_ui_ptt_short_01_quiet.m4a"
                          ),
                        this.m_bPushToMuteEnabled
                          ? (this.m_hPushToTalkReleaseTimeout = SetBackgroundTimeout(
                              this.OnPushToTalkReleased,
                              100
                            ))
                          : (this.m_MicInputGainNode.gain.setValueAtTime(
                              this.GetCurrentVoiceInputGainTarget(),
                              this.m_AudioContext.currentTime
                            ),
                            0 != this.m_hPushToTalkReleaseTimeout &&
                              ClearBackgroundTimeout(
                                this.m_hPushToTalkReleaseTimeout
                              )))
                      : (this.GetPushToTalkOrMuteSoundsEnabled() &&
                          Yo.AudioPlaybackManager.PlayAudioURL(
                            G.a.COMMUNITY_CDN_URL +
                              "public/sounds/webui/steam_ui_ptt_short_02_quiet.m4a"
                          ),
                        this.m_bPushToMuteEnabled
                          ? (this.m_MicInputGainNode.gain.setValueAtTime(
                              this.GetCurrentVoiceInputGainTarget(),
                              this.m_AudioContext.currentTime
                            ),
                            0 != this.m_hPushToTalkReleaseTimeout &&
                              ClearBackgroundTimeout(
                                this.m_hPushToTalkReleaseTimeout
                              ))
                          : (this.m_hPushToTalkReleaseTimeout = SetBackgroundTimeout(
                              this.OnPushToTalkReleased,
                              100
                            )))))
                : e &&
                  null != this.m_MicInputGainNode &&
                  this.DebouncedToggleMicMuting();
          }),
          (o.prototype.GetCurrentVoiceInputGainTarget = function() {
            return this.m_bPushToTalkEnabled && !this.m_bVoicePTTStateEnabled
              ? 0
              : this.m_bPushToMuteEnabled && !this.m_bVoicePTTStateEnabled
                ? 0
                : this.m_Settings.m_VoiceInputGain;
          }),
          (o.prototype.RestartVoiceChatIfConnected = function() {
            if (
              this.m_VoiceCallState.m_eState >
              Oo.k_EVoiceCallState_ScheduledInitiate
            ) {
              var e = this.m_VoiceCallState.m_targetAccountID,
                t = this.m_VoiceCallState.m_chatRoom;
              this.LogMsg(
                "(WebRTC) Ending then auto-re-initiating voice chat - without leave of chatroom if joined as attempt is quick rejoin"
              ),
                this.EndVoiceChatInternal(!0),
                this.InitiateVoiceChat(e, t);
            }
          }),
          (o.prototype.GetNoiseGateOptions = function() {
            var e = {
              attack: 2,
              release: 0.01,
              threshold: -80,
              bufferSize: 1024
            };
            switch (this.m_Settings.m_NoiseGateLevel) {
              case Co.k_ENoiseGateLevel_Off:
                break;
              case Co.k_ENoiseGateLevel_Low:
                e = {
                  attack: 0.8,
                  release: 0.06,
                  threshold: -48,
                  bufferSize: 1024
                };
                break;
              case Co.k_ENoiseGateLevel_Medium:
                e = {
                  attack: 0.8,
                  release: 0.06,
                  threshold: -36,
                  bufferSize: 1024
                };
                break;
              case Co.k_ENoiseGateLevel_High:
                e = {
                  attack: 0.8,
                  release: 0.09,
                  threshold: -22,
                  bufferSize: 1024
                };
            }
            return e;
          }),
          (o.prototype.DeleteOneOnOneCallWaitingJoinOrAccept = function(e) {
            var t = this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(e);
            null != t &&
              (t.ClearAudioRepeats(),
              this.m_mapOneOnOneCallsWaitingJoinOrAccept.delete(e));
          }),
          (o.prototype.UpdateNoiseGateOnActiveMic = function() {
            if (null != this.m_MicInputGainNode) {
              for (
                var e = void 0, t = 0;
                t < this.m_rgAudioStreams.length;
                ++t
              ) {
                var n = this.m_rgAudioStreams[t];
                if (n.type == ao.k_EAudioStreamType_Microphone) {
                  e = n;
                  break;
                }
              }
              if (null != e) {
                if (null != this.m_MicNoiseGate)
                  this.m_MicInputGainNode.disconnect(this.m_MicNoiseGate.input),
                    this.m_MicNoiseGate.input
                      ? (this.m_MicNoiseGate.input.disconnect(),
                        this.m_MicNoiseGate.output.disconnect(),
                        this.m_MicNoiseGate.noiseGateKernel_.disconnect())
                      : this.m_MicNoiseGate.disconnect(),
                    (this.m_MicNoiseGate = void 0);
                else {
                  this.m_MicInputGainNode.disconnect(e.destination_node);
                  try {
                    this.m_MicInputGainNode.disconnect(e.output_gain_node);
                  } catch (e) {}
                }
                this.m_MicVolumeMeter.stop(),
                  (this.m_MicVolumeMeter = void 0),
                  null != e.volume_meter &&
                    (e.volume_meter.stop(), (e.volume_meter = void 0)),
                  this.m_Settings.m_NoiseGateLevel != Co.k_ENoiseGateLevel_Off
                    ? this.SetupNoiseGateOnMic(e.destination_node)
                    : this.m_MicInputGainNode.connect(e.destination_node);
                var o = e.source_node;
                this.m_MicNoiseGate &&
                  (o = this.m_MicNoiseGate.output
                    ? this.m_MicNoiseGate.output
                    : this.m_MicNoiseGate),
                  (this.m_MicVolumeMeter = new vo(o, this.m_AudioContext)),
                  (e.volume_meter = this.m_MicVolumeMeter),
                  this.m_VoiceEchoLocalMic && null == this.m_MicNoiseGate
                    ? this.m_MicInputGainNode.connect(e.output_gain_node)
                    : this.m_VoiceEchoLocalMic &&
                      (this.m_MicNoiseGate.output
                        ? this.m_MicNoiseGate.output.connect(e.output_gain_node)
                        : this.m_MicNoiseGate.connect(e.output_gain_node));
              }
            }
          }),
          (o.prototype.OnAudioContextStateChange = function() {
            null != this.m_AudioContext &&
              this.LogMsg(
                "(WebAudio) Audio context state changed: " +
                  this.m_AudioContext.state
              );
          }),
          (o.prototype.OnIceCandidate = function(e) {
            this.LogMsg(
              "(ICE) Local candidate: " + JSON.stringify(e.candidate)
            );
          }),
          (o.prototype.AddRemoteIceCandidate = function(e, t) {
            var n = this.LogMsg;
            n("(ICE) Candidate from remote peer: " + JSON.stringify(t)),
              e
                .addIceCandidate(t)
                .then(function() {})
                .catch(function(e) {
                  n("addIceCandidate error: " + e + " " + e.name);
                });
          }),
          (o.prototype.OnSignalingStateChange = function(e, t) {
            this.LogMsg("(WebRTC) OnSignalingStateChange: " + e.signalingState);
          }),
          (o.prototype.OnIceConnectionStateChange = function(e, t) {
            this.LogMsg(
              "(ICE) OnIceConnectionStateChange: " + e.iceConnectionState
            ),
              "failed" == e.iceConnectionState &&
              this.m_VoiceCallState.m_eState >
                Oo.k_EVoiceCallState_CreatePeerConnection
                ? this.BackOffAndRetryInitiateVoiceChat()
                : ("completed" != e.iceConnectionState &&
                    "connected" != e.iceConnectionState) ||
                  this.m_VoiceCallState.m_eState !=
                    Oo.k_EVoiceCallState_WebRTCConnectedWaitingOnIceConnected ||
                  (this.LogMsg(
                    "(VoiceChat) ICE connection state now 'completed' or 'connected', proceeding to join voice chat"
                  ),
                  this.JoinVoiceChatOrAskForOneOnOneChatNow());
          }),
          (o.prototype.OnIceGatheringStateChange = function(e, t) {
            this.LogMsg(
              "(ICE) OnIceGatheringStateChange: " + e.iceGatheringState
            );
          }),
          (o.prototype.RemoveStreamToOutput = function(e) {
            this.LogMsg(
              "(WebRTC) RemoveStreamToOutput - " +
                e.id +
                " - " +
                e.getTracks().length
            );
            for (var t = 0; t < this.m_rgAudioStreams.length; ++t) {
              var n = this.m_rgAudioStreams[t];
              if (n.unique_id == e.id) {
                if (
                  (n.elem.pause(),
                  (n.elem.srcObject = void 0),
                  (n.elem.src = void 0),
                  (n.elem = void 0),
                  null != n.volume_meter &&
                    (n.volume_meter.stop(), (n.volume_meter = void 0)),
                  null != n.output_gain_node &&
                    (n.output_gain_node.disconnect(),
                    (n.output_gain_node = void 0)),
                  null != n.source_node)
                ) {
                  try {
                    n.source_node.disconnect();
                  } catch (e) {}
                  n.source_node = void 0;
                }
                return void this.m_rgAudioStreams.splice(t, 1);
              }
            }
          }),
          (o.prototype.OnRemoveRemoteStream = function(e) {
            this.RemoveStreamToOutput(e.stream);
          }),
          (o.prototype.SetupAudioStreamElementAndCreateSourceNode = function(
            e,
            t
          ) {
            var n =
              -1 !=
              this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...");
            null != e.source_node &&
              (e.source_node.disconnect(), (e.source_node = void 0)),
              null == e.elem
                ? (e.elem = document.createElement("audio"))
                : (e.elem.srcObject = void 0),
              (e.elem.srcObject = t),
              n
                ? (e.elem.play(),
                  (e.source_node = this.m_AudioContext.createMediaElementSource(
                    e.elem
                  )))
                : (e.source_node = this.m_AudioContext.createMediaStreamSource(
                    t
                  ));
          }),
          (o.prototype.AddStreamToOutput = function(e) {
            var t = new wo();
            this.SetupAudioStreamElementAndCreateSourceNode(t, e),
              (t.unique_id = e.id),
              (t.stream = e),
              (t.type = ao.k_EAudioStreamType_IncomingStream);
            var n = e.id.match(/Peer-(\d+)-(\d+)-/);
            if (
              (n && 3 == n.length
                ? (t.accountid = Number(n[2]))
                : (t.accountid = 0),
              this.LogMsg(
                "(VoiceChat) AddStreamToOutput " +
                  t.accountid +
                  " " +
                  t.unique_id
              ),
              (t.muted =
                this.m_bOutputMuted || this.GetPerUserMuting(t.accountid)),
              t.muted)
            )
              for (var o = t.stream.getTracks(), i = 0; i < o.length; i++)
                o[i].enabled = !t.muted;
            this.m_rgAudioStreams.push(t),
              (t.output_gain_node = this.m_AudioContext.createGain()),
              t.output_gain_node.gain.setValueAtTime(
                this.m_Settings.m_VoiceOutputGain *
                  this.GetPerUserGainLevel(t.accountid),
                this.m_AudioContext.currentTime
              ),
              t.output_gain_node.connect(
                Yo.AudioPlaybackManager.GetActiveDestination()
              ),
              t.source_node.connect(t.output_gain_node),
              (t.volume_meter = new vo(t.source_node, this.m_AudioContext)),
              t.volume_meter.Connect(t.source_node);
          }),
          (o.prototype.OnAddTrack = function(e, t) {
            for (var n = 0; n < this.m_rgAudioStreams.length; ++n) {
              var o = this.m_rgAudioStreams[n];
              if (
                o.unique_id == e.id &&
                (this.LogMsg(
                  "(VoiceChat) OnAddTrack to existing stream " +
                    o.accountid +
                    " " +
                    o.unique_id
                ),
                o.volume_meter.DisconnectAll(),
                this.SetupAudioStreamElementAndCreateSourceNode(o, e),
                o.volume_meter.Connect(o.source_node),
                o.source_node.connect(o.output_gain_node),
                o.muted)
              )
                for (var i = o.stream.getTracks(), r = 0; r < i.length; r++)
                  i[r].enabled = !o.muted;
            }
          }),
          (o.prototype.OnAddRemoteStream = function(e) {
            if (
              (this.LogMsg(
                "(WebRTC) OnAddRemoteStream - " +
                  e.stream.id +
                  " - " +
                  e.stream.getTracks().length
              ),
              null != this.m_AudioContext)
            ) {
              if (null != e.stream && null != this.m_AudioContext) {
                this.AddStreamToOutput(e.stream);
                var t = this;
                e.stream.onaddtrack = function(e) {
                  t.OnAddTrack(this, e);
                };
              }
            } else
              this.LogMsg(
                "(WebRTC)Got OnAddRemoteStream when we don't have audio context... stopped chat?"
              );
          }),
          (o.prototype.ModifyLocalSDPBeforeSetting = function(e) {
            for (
              var t = /a=rtpmap:(\d+)\sopus(.*)/,
                n = /a=fmtp:(\d+)\s(.*)/,
                o = e.sdp.split("\r\n"),
                i = -1 != e.sdp.indexOf("mozilla..."),
                r = !1,
                a = 0;
              a < o.length;
              ++a
            ) {
              var s = o[a];
              if ("m=" == s.substr(0, 2) && a + 1 < o.length) {
                for (var c = "0", l = a + 1; l < o.length; ++l) {
                  if ("m=" == (s = o[l]).substr(0, 2)) {
                    a = l - 1;
                    break;
                  }
                  if ((p = s.match(t))) {
                    c = p[1];
                    break;
                  }
                }
                if ("0" != c)
                  for (l = a + 1; l < o.length; ++l) {
                    if ("m=" == (s = o[l]).substr(0, 2)) {
                      a = l - 1;
                      break;
                    }
                    var p;
                    if ((p = s.match(n)) && p[1] == c) {
                      i ||
                        (o[l] =
                          "a=fmtp:" +
                          p[1] +
                          " minptime=10;useinbandfec=1;usedtx=1"),
                        (r = !0);
                      break;
                    }
                  }
              }
            }
            return r && (e.sdp = o.join("\r\n")), e;
          }),
          (o.prototype.OnCreateOfferSuccess = function(e, t) {
            if (
              this.m_VoiceCallState.m_eState ==
              Oo.k_EVoiceCallState_CreatePeerConnection
            ) {
              this.LogMsg("(WebRTC) OnCreateOfferSuccess");
              var n = this;
              (t = this.ModifyLocalSDPBeforeSetting(t)),
                e
                  .setLocalDescription(t)
                  .then(function() {
                    var e = u.Init(go.b);
                    e.Body().set_sdp(JSON.stringify(t)),
                      n.LogMsg(
                        "(WebRTC) Offer (Local Description): " + e.Body().sdp()
                      ),
                      (n.m_VoiceCallState.m_eState =
                        Oo.k_EVoiceCallState_InitatedWebRTCSession),
                      go.d
                        .InitiateWebRTCConnection(
                          n.m_CMInterface.GetServiceTransport(),
                          e
                        )
                        .then(function(e) {
                          if (null == n.m_PeerConnection)
                            n.LogMsg(
                              "(WebRTC) Got response to InitiateWebRTCConnection with no local peer connection"
                            ),
                              n.EndVoiceChatInternal(!1);
                          else if (1 == e.GetEResult()) {
                            var t = JSON.parse(e.Body().remote_description());
                            n.m_PeerConnection
                              .setRemoteDescription(
                                new RTCSessionDescription(t)
                              )
                              .then(function() {
                                n.LogMsg(
                                  "(WebRTC) Remote Description: " + t.sdp
                                ),
                                  "offer" == t.type
                                    ? (n.LogMsg(
                                        "(WebRTC) !! received 'offer' rather than 'answer' from InitiateWebRTCConnection, unexpected."
                                      ),
                                      n.EndVoiceChatInternal(!1))
                                    : "answer" == t.type &&
                                      n.LogMsg(
                                        "(WebRTC) setRemoteDescription success"
                                      );
                              })
                              .catch(function(e) {
                                n.LogMsg(
                                  "(WebRTC) setRemoteDescription error: " + e
                                ),
                                  n.LogMsg(
                                    "(VoiceChat) Fatal error, ending chat"
                                  ),
                                  n.EndVoiceChatInternal(!1);
                              });
                          } else
                            n.LogMsg(
                              "(WebRTC) Got failure (" +
                                e.GetEResult() +
                                ") response from InitiateWebRTCConnection"
                            ),
                              n.BackOffAndRetryInitiateVoiceChat();
                        })
                        .catch(function(e) {
                          n.LogMsg(
                            "(WebRTC) Failure in WebRTCClientService.InitiateWebRTCConnection"
                          ),
                            n.BackOffAndRetryInitiateVoiceChat();
                        });
                  })
                  .catch(function(e) {
                    n.LogMsg("(WebRTC) setLocalDescription error: " + e),
                      n.LogMsg("(VoiceChat) Fatal error, ending voice chat"),
                      n.EndVoiceChatInternal(!1);
                  });
            } else
              this.LogMsg(
                "(WebRTC) Hit OnCreateOfferSuccess in wrong state " +
                  this.m_VoiceCallState.m_eState
              );
          }),
          (o.prototype.OnCreateOfferError = function(e) {
            this.LogMsg("(WebRTC) OnCreateOfferError: " + e),
              this.LogMsg("(VoiceChat) Fatal Error, ending chat attempt"),
              this.EndVoiceChatInternal(!1);
          }),
          (o.prototype.CreatePeerConnection = function(e) {
            var t = this,
              n = new RTCPeerConnection({});
            return (
              (n.onicecandidate = function(e) {
                t.OnIceCandidate(e);
              }),
              (n.onaddstream = this.OnAddRemoteStream),
              (n.onremovestream = this.OnRemoveRemoteStream),
              (n.oniceconnectionstatechange = function(e) {
                t.OnIceConnectionStateChange(n, e);
              }),
              (n.onicegatheringstatechange = function(e) {
                t.OnIceGatheringStateChange(n, e);
              }),
              (n.onsignalingstatechange = function(e) {
                t.OnSignalingStateChange(n, e);
              }),
              null != e && n.addStream(e),
              (this.m_PeerConnection = n),
              this.m_PeerConnection
            );
          }),
          (o.prototype.OnMicStreamInactive = function(e, t) {
            this.LogMsg("(WebRTC) Mic Stream went inactive: " + t.type),
              this.m_VoiceCallState.m_eState >
                Oo.k_EVoiceCallState_RequestedMicAccess &&
                (this.LogMsg(
                  "(WebRTC) Ending then auto-re-initiating voice chat without mic"
                ),
                this.RestartVoiceChatIfConnected());
          }),
          (o.prototype.OnNoiseGateMessage = function(e) {
            this.LogMsg("(VoiceChat) " + e.data);
          }),
          (o.prototype.SetupNoiseGateOnMic = function(e) {
            var t = this.GetNoiseGateOptions();
            if (Yo.AudioPlaybackManager.supports_audio_worklets) {
              this.LogMsg(
                "(VoiceChat) Audio Worklets supported - high performance mic noisegate in use!"
              );
              var n = window;
              (this.m_MicNoiseGate = new n.AudioWorkletNode(
                this.m_AudioContext,
                "noisegate-processor"
              )),
                (this.m_MicNoiseGate.port.onmessage = this.OnNoiseGateMessage),
                this.m_MicInputGainNode.connect(this.m_MicNoiseGate).connect(e),
                this.m_MicNoiseGate.parameters
                  .get("threshold")
                  .setValueAtTime(t.threshold, this.m_AudioContext.currentTime),
                this.m_MicNoiseGate.parameters
                  .get("attack")
                  .setValueAtTime(t.attack, this.m_AudioContext.currentTime),
                this.m_MicNoiseGate.parameters
                  .get("release")
                  .setValueAtTime(t.release, this.m_AudioContext.currentTime),
                this.m_MicNoiseGate.parameters
                  .get("sampleRate")
                  .setValueAtTime(
                    this.m_AudioContext.sampleRate,
                    this.m_AudioContext.currentTime
                  );
            } else
              this.LogMsg(
                "(VoiceChat) Browser doesn't support audio worklets, mic perf will suffer and may stutter/echo during repaint/high CPU usage"
              ),
                (this.m_MicNoiseGate = new bo(this.m_AudioContext, t)),
                this.m_MicInputGainNode.connect(this.m_MicNoiseGate.input),
                this.m_MicNoiseGate.output.connect(e);
          }),
          (o.prototype.OnGetUserMediaSuccess = function(e) {
            if (
              this.m_VoiceCallState.m_eState ==
              Oo.k_EVoiceCallState_RequestedMicAccess
            ) {
              if (
                ((this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_CreatePeerConnection),
                null != e)
              ) {
                e.id;
                var t = this.m_AudioContext.createMediaStreamSource(e),
                  n = this;
                (e.oninactive = function(e) {
                  n.OnMicStreamInactive(this, e);
                }),
                  (this.m_MicInputGainNode = this.m_AudioContext.createGain()),
                  this.m_MicInputGainNode.gain.setValueAtTime(
                    this.GetCurrentVoiceInputGainTarget(),
                    this.m_AudioContext.currentTime
                  ),
                  t.connect(this.m_MicInputGainNode);
                var o = void 0;
                if (
                  this.m_Settings.m_NoiseGateLevel != Co.k_ENoiseGateLevel_Off
                )
                  (o = this.m_AudioContext.createMediaStreamDestination()),
                    this.SetupNoiseGateOnMic(o),
                    (e = o.stream);
                else
                  (o = this.m_AudioContext.createMediaStreamDestination()),
                    this.m_MicInputGainNode.connect(o),
                    (e = o.stream);
                var i = new wo();
                (i.unique_id = e.id),
                  (i.destination_node = o),
                  (i.stream = e),
                  (i.source_node = t),
                  (i.type = ao.k_EAudioStreamType_Microphone),
                  (i.accountid = this.m_CMInterface.steamid.GetAccountID()),
                  (i.muted = !1),
                  (i.elem = void 0),
                  (i.output_gain_node = this.m_AudioContext.createGain()),
                  i.output_gain_node.gain.setValueAtTime(
                    this.m_Settings.m_VoiceOutputGain,
                    this.m_AudioContext.currentTime
                  ),
                  i.output_gain_node.connect(
                    Yo.AudioPlaybackManager.GetActiveDestination()
                  ),
                  this.m_rgAudioStreams.push(i);
                var r = t;
                this.m_MicNoiseGate &&
                  (r =
                    null != this.m_MicNoiseGate.output
                      ? this.m_MicNoiseGate.output
                      : this.m_MicNoiseGate),
                  (this.m_MicVolumeMeter = void 0),
                  (this.m_MicVolumeMeter = new vo(r, this.m_AudioContext)),
                  (i.volume_meter = this.m_MicVolumeMeter),
                  this.m_VoiceEchoLocalMic && null == this.m_MicNoiseGate
                    ? this.m_MicInputGainNode.connect(i.output_gain_node)
                    : this.m_VoiceEchoLocalMic &&
                      (this.m_MicNoiseGate.output
                        ? this.m_MicNoiseGate.output.connect(i.output_gain_node)
                        : this.m_MicNoiseGate.connect(i.output_gain_node));
              }
              if (
                0 != this.m_VoiceCallState.m_targetAccountID ||
                null != this.m_VoiceCallState.m_chatRoom
              ) {
                var a = this.CreatePeerConnection(e),
                  s = this;
                a
                  .createOffer({
                    offerToReceiveAudio: 1,
                    offerToReceiveVideo: 0,
                    voiceActivityDetection: !0
                  })
                  .then(function(e) {
                    s.OnCreateOfferSuccess(a, e);
                  })
                  .catch(function(e) {
                    s.OnCreateOfferError(e);
                  });
              } else
                (this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_LocalMicOnly),
                  (this.m_VoiceCallState.m_timeFinishedConnecting = performance.now());
            } else {
              for (var c = 0, l = e.getTracks(); c < l.length; c++) {
                l[c].stop();
              }
              this.LogMsg(
                "(VoiceChat) Hit OnGetUserMediaSuccess in wrong state " +
                  this.m_VoiceCallState.m_eState
              );
            }
          }),
          (o.prototype.OnGetUserMediaFailure = function(e) {
            if (
              !(
                this.m_VoiceCallState.m_eState <=
                Oo.k_EVoiceCallState_ScheduledInitiate
              )
            ) {
              var t = this,
                n = navigator;
              n.permissions &&
                n.permissions.query({ name: "microphone" }).then(function(e) {
                  "granted" == e.stat ||
                    ("denied" == e.state
                      ? (t.m_bUserHasDeniedMicPermissions = !0)
                      : e.state);
                }),
                this.LogMsg(
                  "(WebAudio) The following error occured getting audio stream: " +
                    e.name
                ),
                this.OnGetUserMediaSuccess(void 0);
            }
          }),
          (o.prototype.InitiateChatRoomVoice = function() {
            this.m_VoiceCallState.m_eState >
            Oo.k_EVoiceCallState_ScheduledInitiate
              ? this.LogMsg(
                  "(VoiceChat) Hit InitiateChatRoomVoice in wrong state " +
                    this.m_VoiceCallState.m_eState
                )
              : Yo.AudioPlaybackManager.SetVoiceActive(
                  this.OnRequestMicrophoneAccess
                );
          }),
          (o.prototype.JoinVoiceChatOrAskForOneOnOneChatNow = function() {
            var e,
              o = this;
            0 == this.m_VoiceCallState.m_targetAccountID
              ? ((this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_RequestedPermission),
                (e = u.Init(ie.w))
                  .Body()
                  .set_chat_group_id(this.m_VoiceCallState.m_chatRoom.groupID),
                e.Body().set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID),
                this.LogMsg(
                  "(VoiceChat) InitiateChatRoomVoice request to group: " +
                    this.m_VoiceCallState.m_chatRoom.groupID +
                    ", room: " +
                    this.m_VoiceCallState.m_chatRoom.chatID
                ),
                ie.V.JoinVoiceChat(this.m_CMInterface.GetServiceTransport(), e)
                  .then(function(e) {
                    1 == e.GetEResult()
                      ? ((o.m_VoiceCallState.m_voiceChatID = e
                          .Body()
                          .voice_chatid()),
                        o.OnVoiceChatAccepted(!0))
                      : 2 == e.GetEResult()
                        ? o.BackOffAndRetryInitiateVoiceChat()
                        : o.OnVoiceChatAccepted(!1);
                  })
                  .catch(function(e) {
                    o.BackOffAndRetryInitiateVoiceChat();
                  }))
              : ((this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_RequestedPermission),
                "" == this.m_VoiceCallState.m_voiceChatID
                  ? ((e = u.Init(fo.d))
                      .Body()
                      .set_steamid_partner(
                        E.a
                          .InitFromAccountID(
                            this.m_VoiceCallState.m_targetAccountID
                          )
                          .ConvertTo64BitString()
                      ),
                    this.LogMsg(
                      "(VoiceChat) InitiateOneOnOneVoiceChat request to " +
                        this.m_VoiceCallState.m_targetAccountID
                    ),
                    fo.i
                      .RequestOneOnOneChat(
                        this.m_CMInterface.GetServiceTransport(),
                        e
                      )
                      .then(function(e) {
                        if (1 == e.GetEResult()) {
                          o.LogMsg(
                            "(VoiceChat) Waiting on acceptance from " +
                              o.m_VoiceCallState.m_targetAccountID
                          ),
                            (o.m_VoiceCallState.m_voiceChatID = e
                              .Body()
                              .voice_chatid());
                          var t = Yo.FriendStore.self,
                            n = Yo.ChatStore.GetFriendChat(
                              o.m_VoiceCallState.m_targetAccountID,
                              !1
                            );
                          null != t &&
                            null != n &&
                            n.AddVoiceChannelInviteMsg(
                              o.m_CMInterface.steamid.GetAccountID(),
                              Yo.GetServerRTime32(),
                              Object(re.b)(
                                "#FriendMsg_VoiceChannelInvite",
                                t.display_name,
                                n.chat_partner.display_name
                              )
                            );
                        } else o.LogMsg("(VoiceChat) Initiating voice chat to " + o.m_VoiceCallState.m_targetAccountID + " has failed."), o.EndVoiceChatInternal(!1);
                      }))
                  : this.OnVoiceChatAccepted(!0));
          }),
          (o.prototype.OnVoiceChatAccepted = function(e) {
            this.m_VoiceCallState.m_eState <
            Oo.k_EVoiceCallState_RequestedPermission
              ? this.LogMsg(
                  "(VoiceChat) Hit OnVoiceChatAccepted in wrong state " +
                    this.m_VoiceCallState.m_eState
                )
              : null != this.m_VoiceCallState.m_webRTCConnectedNotification
                ? e
                  ? (this.m_VoiceCallState.m_targetAccountID
                      ? ((this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds = !1),
                        (this.m_VoiceCallState.m_timeStartedConnecting = performance.now()),
                        this.LogMsg(
                          "(VoiceChat) Call accepted to individual " +
                            this.m_VoiceCallState.m_targetAccountID
                        ))
                      : this.m_VoiceCallState.m_chatRoom &&
                        this.LogMsg(
                          "(VoiceChat) Call accepted to room " +
                            this.m_VoiceCallState.m_chatRoom.chatID
                        ),
                    this.OnWebRTCConnectedAndVoiceChatConnected())
                  : this.m_VoiceCallState.m_targetAccountID
                    ? (this.LogMsg(
                        "(VoiceChat) Call rejected to individual " +
                          this.m_VoiceCallState.m_targetAccountID
                      ),
                      this.OnUserEndVoiceChat())
                    : this.m_VoiceCallState.m_chatRoom &&
                      (this.LogMsg(
                        "(VoiceChat) Call rejected to room " +
                          this.m_VoiceCallState.m_chatRoom.chatID
                      ),
                      this.EndVoiceChatInternal(!1))
                : this.LogMsg(
                    "(VoiceChat) Hit OnVoiceChatAccepted without WebRTC connected"
                  );
          }),
          (o.prototype.InitiateOneOnOneVoiceChat = function(e) {
            this.m_VoiceCallState.m_eState >
            Oo.k_EVoiceCallState_ScheduledInitiate
              ? this.LogMsg(
                  "(VoiceChat) Hit InitiateOneOnOneVoiceChat in wrong state " +
                    this.m_VoiceCallState.m_eState
                )
              : Yo.AudioPlaybackManager.SetVoiceActive(
                  this.OnRequestMicrophoneAccess
                );
          }),
          (o.prototype.IPIntToString = function(e) {
            return (
              (e >>> 24) +
              "." +
              ((e >> 16) & 255) +
              "." +
              ((e >> 8) & 255) +
              "." +
              (255 & e)
            );
          }),
          (o.prototype.OnSetUpdatedLocalDescriptionSuccess = function() {
            this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionSuccess");
            var e = u.Init(go.a);
            e
              .Body()
              .set_ip_webrtc_server(this.m_VoiceCallState.m_webRTCServerIP),
              e
                .Body()
                .set_port_webrtc_server(
                  this.m_VoiceCallState.m_webRTCServerPort
                ),
              e
                .Body()
                .set_ip_webrtc_session_client(
                  this.m_VoiceCallState.m_webRTCClientIP
                ),
              e
                .Body()
                .set_port_webrtc_session_client(
                  this.m_VoiceCallState.m_webRTCClientPort
                ),
              e
                .Body()
                .set_remote_description_version(
                  this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion
                ),
              go.d
                .AcknowledgeUpdatedRemoteDescription(
                  this.m_CMInterface.GetServiceTransport(),
                  e
                )
                .then(function(e) {});
          }),
          (o.prototype.OnSetUpdatedLocalDescriptionFailure = function(e) {
            this.LogMsg("(WebRTC) OnSetUpdatedLocalDescriptionFailure: " + e),
              this.EndVoiceChatInternal(!1);
          }),
          (o.prototype.OnCreateAnswerSuccess = function(e) {
            this.LogMsg("(WebRTC) OnCreateAnswerSuccess: " + JSON.stringify(e));
            var t = this;
            if (
              (this.m_PeerConnection
                .setLocalDescription(e)
                .then(function() {
                  t.OnSetUpdatedLocalDescriptionSuccess();
                })
                .catch(function(e) {
                  t.OnSetUpdatedLocalDescriptionFailure(e);
                }),
              (this.m_VoiceCallState.m_bOfferUpdateInProgress = !1),
              null != this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate)
            ) {
              var n = this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate;
              (this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate = void 0),
                this.ProcessUpdatedRemoteDescription(n);
            }
          }),
          (o.prototype.OnCreateAnswerError = function(e) {
            this.LogMsg("(WebRTC) OnCreateAnswerError: " + e),
              this.EndVoiceChatInternal(!1);
          }),
          (o.prototype.ProcessUpdatedRemoteDescription = function(e) {
            (this.m_VoiceCallState.m_bOfferUpdateInProgress = !0),
              this.m_mapSSRCToAccountID.clear();
            for (var t = e.ssrcs_to_accountids(), n = 0; n < t.length; ++n) {
              var o = t[n];
              this.m_mapSSRCToAccountID.set(o.ssrc(), o.accountid());
            }
            var i = this,
              r = JSON.parse(e.remote_description());
            return (
              this.m_PeerConnection
                .setRemoteDescription(new RTCSessionDescription(r))
                .then(function() {
                  i.LogMsg("(WebRTC) Updated Remote Description: " + r.sdp),
                    "offer" == r.type
                      ? (i.LogMsg(
                          "(WebRTC) setRemoteDescription success with new offer"
                        ),
                        i.m_PeerConnection
                          .createAnswer()
                          .then(function(e) {
                            i.OnCreateAnswerSuccess(e);
                          })
                          .catch(function(e) {
                            i.OnCreateAnswerError(e);
                          }),
                        (i.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion = e.remote_description_version()))
                      : "answer" == r.type &&
                        (i.LogMsg("(WebRTC) setRemoteDescription success"),
                        (i.m_VoiceCallState.m_bOfferUpdateInProgress = !1));
                })
                .catch(function(e) {
                  i.LogMsg("(WebRTC) setRemoteDescription error: " + e),
                    i.LogMsg("(VoiceChat) Fatal error, ending chat"),
                    i.EndVoiceChatInternal(!1);
                }),
              1
            );
          }),
          (o.prototype.SendVoiceStatusUpdate = function() {
            var e = u.Init(fo.g);
            e
              .Body()
              .set_user_steamid(
                this.m_CMInterface.steamid.ConvertTo64BitString()
              ),
              e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),
              e.Body().set_user_muted_mic_locally(this.IsMicMuted()),
              e.Body().set_user_muted_output_locally(this.IsOutputMuted()),
              e
                .Body()
                .set_user_has_no_mic_for_session(
                  this.BNoMicAvailableForSession()
                ),
              e
                .Body()
                .set_user_webaudio_sample_rate(
                  Yo.AudioPlaybackManager.GetLastObservedSampleRate()
                ),
              fo.i.NotifyUserVoiceStatus(
                this.m_CMInterface.GetServiceTransport(),
                e
              );
          }),
          (o.prototype.UpdateUserVoiceStatus = function(e) {
            if (this.m_VoiceCallState.m_voiceChatID == e.voice_chatid()) {
              var t = new E.a(e.user_steamid()),
                n = this.m_mapUserVoiceStatus.get(t.GetAccountID());
              null == n && (n = new Lo()),
                (n.mic_muted_locally = e.user_muted_mic_locally()),
                (n.output_muted_locally = e.user_muted_output_locally()),
                (n.has_no_mic_for_session = e.user_has_no_mic_for_session());
              var o = Yo.FriendStore.GetPlayerIfCached(t.GetAccountID()),
                i = "[U:1:" + t.GetAccountID() + "]",
                r = "";
              null != o && (r = o.display_name + " ");
              var a = "";
              (a = n.has_no_mic_for_session
                ? "nomic"
                : n.mic_muted_locally ? "muted" : "on"),
                this.LogMsg(
                  "(VoiceChat) User " +
                    r +
                    i +
                    " status now: mic(" +
                    a +
                    ") output(" +
                    (n.output_muted_locally ? "muted" : "on") +
                    ")"
                ),
                this.m_mapUserVoiceStatus.set(t.GetAccountID(), n);
            }
          }),
          (o.prototype.OnWebRTCConnectedAndVoiceChatConnected = function() {
            var t = this,
              e = this.m_VoiceCallState.m_webRTCConnectedNotification;
            (this.m_VoiceCallState.m_eState =
              Oo.k_EVoiceCallState_NotifyingVoiceChatOfWebRTCSession),
              this.LogMsg(
                "(WebRTC) WebRTC session connected " +
                  this.IPIntToString(e.client_ip()) +
                  ":" +
                  e.client_port() +
                  " => " +
                  this.IPIntToString(e.server_ip()) +
                  ":" +
                  e.server_port()
              ),
              "" == this.m_VoiceCallState.m_voiceChatID &&
                (this.LogMsg(
                  "(VoiceChat) Reached OnWebRTCConnectedAndVoiceChatConnected without voice chat id? Failing."
                ),
                this.EndVoiceChatInternal(!1));
            var n = u.Init(fo.e);
            n.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID),
              n.Body().set_ssrc_my_sending_stream(e.ssrc()),
              n.Body().set_ip_webrtc_client(e.client_ip()),
              n.Body().set_port_webrtc_client(e.client_port()),
              n.Body().set_ip_webrtc_server(e.server_ip()),
              n.Body().set_port_webrtc_server(e.server_port()),
              n
                .Body()
                .set_has_audio_worklets_support(
                  Yo.AudioPlaybackManager.supports_audio_worklets
                ),
              n.Body().set_user_agent(navigator.userAgent),
              fo.i
                .UpdateVoiceChatWebRTCData(
                  this.m_CMInterface.GetServiceTransport(),
                  n
                )
                .then(function(e) {
                  1 == e.GetEResult()
                    ? ((t.m_VoiceCallState.m_eState =
                        Oo.k_EVoiceCallState_Connected),
                      (t.m_VoiceCallState.m_timeFinishedConnecting = performance.now()),
                      t.SendVoiceStatusUpdate(),
                      t.LogMsg(
                        "(WebRTC) Updated voice session with WebRTC session data " +
                          t.m_VoiceCallState.m_voiceChatID
                      ),
                      e.Body().send_client_voice_logs() &&
                        t.ScheduleClientVoiceLogsUpload(2),
                      t.CheckConnection())
                    : (t.LogMsg(
                        "(WebRTC) Error updating voice session with WebRTC session data " +
                          t.m_VoiceCallState.m_voiceChatID
                      ),
                      t.BackOffAndRetryInitiateVoiceChat());
                })
                .catch(function(e) {
                  t.LogMsg(
                    "(WebRTC) Error updating voice session with WebRTC session data " +
                      t.m_VoiceCallState.m_voiceChatID
                  ),
                    t.BackOffAndRetryInitiateVoiceChat();
                });
          }),
          (o.prototype.OnAcceptOneOnOneVoiceChat = function(t, e) {
            var n = this;
            this.m_VoiceCallState.m_targetAccountID != t.GetAccountID() &&
              this.EndVoiceChatInternal(!1),
              (this.m_VoiceCallState.m_eState = Oo.k_EVoiceCallState_None),
              (this.m_VoiceCallState.m_targetAccountID = t.GetAccountID()),
              (this.m_VoiceCallState.m_bInitiatedOneOnOneCall = !1),
              (this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin = !1),
              (this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !1),
              (this.m_VoiceCallState.m_chatRoom = null),
              (this.m_VoiceCallState.m_voiceChatID = e);
            var o = u.Init(fo.a);
            o.Body().set_steamid_partner(t.ConvertTo64BitString()),
              o.Body().set_accepted_request(!0),
              o.Body().set_voice_chatid(e),
              fo.i
                .AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(), o)
                .then(function(e) {
                  1 == e.GetEResult()
                    ? n.InitiateOneOnOneVoiceChat(t.GetAccountID())
                    : (n.LogMsg(
                        "(VoiceChat) Failed responding to voice chat from " +
                          t.GetAccountID()
                      ),
                      n.EndVoiceChatInternal(!1));
                });
          }),
          (o.prototype.OnRejectOneOnOneVoiceChat = function(t, e) {
            var n = this,
              o = u.Init(fo.a);
            o.Body().set_steamid_partner(t.ConvertTo64BitString()),
              o.Body().set_accepted_request(!1),
              o.Body().set_voice_chatid(e),
              fo.i
                .AnswerOneOnOneChat(this.m_CMInterface.GetServiceTransport(), o)
                .then(function(e) {
                  1 == e.GetEResult() ||
                    n.LogMsg(
                      "(VoiceChat) Failed responding to voice chat from " +
                        t.GetAccountID()
                    );
                });
          }),
          (o.prototype.PlayRingSound = function(e) {
            this.m_mapOneOnOneCallsWaitingJoinOrAccept.get(
              e
            ).audio_buffer = Yo.AudioPlaybackManager.PlayAudioURLWithRepeats(
              G.a.COMMUNITY_CDN_URL +
                "public/sounds/webui/steam_phonecall.m4a?v=1",
              1
            );
          }),
          (o.prototype.IsVoiceActive = function(e, t) {
            return (
              !!this.m_VoiceCallState.BMatchingCall(e, t) &&
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None
            );
          }),
          (o.prototype.CheckVoiceSnoozeTiemout = function() {
            if (3600 < Yo.IdleTracker.GetUserIdleTime()) {
              var e = this.m_MicVolumeMeter.GetLastTimeNonZero();
              36e5 < performance.now() - e &&
                (this.OnUserEndVoiceChat(),
                Yo.ShowAlert(
                  Object(re.b)("#Voice_LeftIdleVoiceChat_Title"),
                  Object(re.b)("#Voice_LeftIdleVoiceChat_Body"),
                  Object(re.b)("#Voice_LeftIdleVoiceChat_OK")
                )
                  .then(function() {})
                  .catch(function() {
                    return !0;
                  }));
            }
          }),
          (o.prototype.ProcessStatsReport = function() {
            if (
              (this.CheckVoiceSnoozeTiemout(), null != this.m_PeerConnection) &&
              ((this.m_StatsTimeout = SetBackgroundTimeout(
                this.ProcessStatsReport,
                1e4
              )),
              G.a.IN_CLIENT && _o.b.BClientConnected().then(function() {}),
              !(
                -1 !=
                this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...")
              ))
            ) {
              var e = new Date(),
                d = this,
                t = this.m_PeerConnection;
              d.LogMsg(
                "-----------------------------------------------------------"
              ),
                d.LogMsg(" Voice Report: " + e.toUTCString()),
                d.LogMsg(
                  "-----------------------------------------------------------"
                );
              var n = t.getSenders();
              if (0 < n.length) {
                this.LogMsg(
                  "(WebRTC) " +
                    this.PadOutput("(Sender SSRC)", 40) +
                    " " +
                    this.PadOutput("Audio Packets Sent", 20) +
                    " " +
                    this.PadOutput("Connection State", 20) +
                    " " +
                    this.PadOutput("Writable", 20) +
                    " " +
                    this.PadOutput("Track State", 20) +
                    " " +
                    this.PadOutput("Round Trip MS", 20) +
                    " " +
                    this.PadOutput("Transport Bytes Sent", 24) +
                    " " +
                    this.PadOutput("Transport Bytes Received", 24) +
                    " "
                );
                try {
                  for (var o = 0; o < n.length; ++o)
                    n[o].getStats().then(function(m) {
                      m.forEach(function(e) {
                        if (
                          "outbound-rtp" == e.type &&
                          "audio" == e.mediaType
                        ) {
                          var t = e.ssrc,
                            n = e.packetsSent,
                            o = "",
                            i = "",
                            r = 0,
                            a = 0,
                            s = 0,
                            c = "",
                            l = m.get(e.trackId);
                          null != l &&
                            "track" == l.type &&
                            "audio" == l.kind &&
                            (c =
                              l.ended && l.detached
                                ? "ended+detached"
                                : l.ended
                                  ? "ended"
                                  : l.detached ? "detached" : "active");
                          var p = m.get(e.transportId);
                          if (null != p && "transport" == p.type) {
                            var u = m.get(p.selectedCandidatePairId);
                            null != u &&
                              "candidate-pair" == u.type &&
                              ((o = u.state),
                              (i = u.writable ? "writable" : "not-writable"),
                              (r = 1e3 * u.currentRoundTripTime)),
                              (a = p.bytesSent),
                              (s = p.bytesReceived);
                          }
                          d.LogMsg(
                            "(WebRTC) " +
                              d.PadOutput(String(t), 40) +
                              " " +
                              d.PadOutput(String(n), 20) +
                              " " +
                              d.PadOutput(o, 20) +
                              " " +
                              d.PadOutput(i, 20) +
                              " " +
                              d.PadOutput(c, 20) +
                              " " +
                              d.PadOutput(String(r), 20) +
                              " " +
                              d.PadOutput(String(a), 24) +
                              " " +
                              d.PadOutput(String(s), 24)
                          );
                        }
                      });
                    });
                } catch (e) {
                  d.LogMsg("(WebRTC) Can't log sender stats on this browser");
                }
              }
              SetBackgroundTimeout(this.ProcessReceiverStatsReport, 100);
            }
          }),
          (o.prototype.ProcessReceiverStatsReport = function() {
            if (
              !(
                -1 !=
                this.m_PeerConnection.localDescription.sdp.indexOf("mozilla...")
              )
            ) {
              var r = this,
                e = this.m_PeerConnection;
              try {
                e.getStats(function(e) {
                  e.result().forEach(function(t) {
                    if ("ssrc" == t.type) {
                      var n = new To(),
                        e = t.names(),
                        o = e.indexOf("mediaType");
                      if (-1 != o && "audio" == t.stat(e[o])) {
                        t.names().forEach(function(e) {
                          "ssrc" == e
                            ? (n.m_SSRC = Number(t.stat(e)))
                            : "googCurrentDelayMs" == e
                              ? (n.m_MostRecentDelayEstimateMs = Number(
                                  t.stat(e)
                                ))
                              : "packetsLost" == e
                                ? (n.m_PacketsLost = Number(t.stat(e)))
                                : "packetsReceived" == e
                                  ? (n.m_PacketsReceived = Number(t.stat(e)))
                                  : "googJitterReceived" == e
                                    ? (n.m_MostRecentJitterReceivedMs = Number(
                                        t.stat(e)
                                      ))
                                    : "googJitterBufferMs" == e
                                      ? (n.m_CurrentJitterBufferMs = Number(
                                          t.stat(e)
                                        ))
                                      : "bytesReceived" == e
                                        ? (n.m_BytesReceived = Number(
                                            t.stat(e)
                                          ))
                                        : "googDecodingCTN" == e
                                          ? (n.m_DecodingThroughNetEQ = Number(
                                              t.stat(e)
                                            ))
                                          : "googDecodingPLC" == e
                                            ? (n.m_DecodingPacketLossCorrection = Number(
                                                t.stat(e)
                                              ))
                                            : "googDecodingCNG" == e
                                              ? (n.m_DecodingComfortNoiseGeneration = Number(
                                                  t.stat(e)
                                                ))
                                              : "googDecodingPLCCNG" == e
                                                ? (n.m_DecodingPacketLossFadeNoiseGeneration = Number(
                                                    t.stat(e)
                                                  ))
                                                : "googDecodingNormal" == e
                                                  ? (n.m_DecodingNormal = Number(
                                                      t.stat(e)
                                                    ))
                                                  : "googDecodingCTSG" == e
                                                    ? (n.m_DecodingSilenceGenerator = Number(
                                                        t.stat(e)
                                                      ))
                                                    : "googDecodingMuted" ==
                                                        e &&
                                                      (n.m_DecodingMuted = Number(
                                                        t.stat(e)
                                                      ));
                        });
                        var i = r.m_mapSSRCToAccountID.get(n.m_SSRC);
                        null != i && r.m_mapAccountIDToStats.set(i, n);
                      }
                    }
                  });
                }),
                  r.LogMsg(
                    "-----------------------------------------------------------"
                  ),
                  r.LogMsg(
                    "(WebRTC) " +
                      r.PadOutput("(Receiving)", 40) +
                      " " +
                      r.PadOutput("Packets Received", 20) +
                      " " +
                      r.PadOutput("Est. Delay MS", 20) +
                      " " +
                      r.PadOutput("Packets Lost", 20) +
                      " " +
                      r.PadOutput("Last Jitter MS", 20) +
                      " " +
                      r.PadOutput("Jitter Buffer MS", 20) +
                      " " +
                      r.PadOutput("Decoding Successes", 20) +
                      " " +
                      r.PadOutput("Decoding Errors", 20)
                  ),
                  r.m_mapAccountIDToStats.forEach(function(e, t) {
                    var n = Yo.FriendStore.GetPlayerIfCached(t),
                      o = "[unknown]";
                    null != n && (o = n.display_name),
                      r.LogMsg(
                        "(WebRTC) " +
                          r.PadOutput(o.substr(0, 40), 40) +
                          " " +
                          r.PadOutput(String(e.m_PacketsReceived), 20) +
                          " " +
                          r.PadOutput(
                            String(e.m_MostRecentDelayEstimateMs),
                            20
                          ) +
                          " " +
                          r.PadOutput(String(e.m_PacketsLost), 20) +
                          " " +
                          r.PadOutput(
                            String(e.m_MostRecentJitterReceivedMs),
                            20
                          ) +
                          " " +
                          r.PadOutput(String(e.m_CurrentJitterBufferMs), 20) +
                          " " +
                          r.PadOutput(
                            String(
                              e.m_DecodingNormal +
                                e.m_DecodingComfortNoiseGeneration
                            ),
                            20
                          ) +
                          " " +
                          r.PadOutput(
                            String(
                              e.m_DecodingPacketLossCorrection +
                                e.m_DecodingPacketLossFadeNoiseGeneration +
                                e.m_DecodingSilenceGenerator
                            ),
                            20
                          )
                      );
                  }),
                  r.LogMsg(
                    "-----------------------------------------------------------"
                  );
              } catch (e) {}
            }
          }),
          (o.prototype.PadOutput = function(e, t, n) {
            if ((void 0 === n && (n = void 0), Math.abs(t) <= e.length))
              return e;
            var o = Math.max(Math.abs(t) - e.length || 0, 0),
              i = Array(o + 1).join(String(n || " ").charAt(0));
            return t < 0 ? i + e : e + i;
          }),
          (o.prototype.CheckConnection = function() {
            if (
              this.m_VoiceCallState.m_eState ==
                Oo.k_EVoiceCallState_Connected ||
              this.m_VoiceCallState.m_eState ==
                Oo.k_EVoiceCallState_LocalMicOnly
            )
              this.LogMsg(
                "(VoiceChat) Succcess! Voice is fully connected took " +
                  (
                    this.m_VoiceCallState.m_timeFinishedConnecting -
                    this.m_VoiceCallState.m_timeStartedConnecting
                  ).toFixed(0) +
                  "ms to complete, " +
                  (this.m_VoiceCallState.m_nFailuresThisInitiate + 1) +
                  " attempts made before success."
              ),
                ClearBackgroundInterval(this.m_ConnectionCheck),
                (this.m_ConnectionCheck = 0),
                (this.m_VoiceCallState.m_nFailuresThisInitiate = 0),
                (this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds = !1),
                (this.m_StatsTimeout = SetBackgroundTimeout(
                  this.ProcessStatsReport,
                  1e4
                ));
            else {
              var e =
                performance.now() -
                this.m_VoiceCallState.m_timeStartedConnecting;
              this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds =
                2e3 < e;
              var t = 6e4;
              0 != this.m_VoiceCallState.m_targetAccountID &&
                this.m_VoiceCallState.m_eState ==
                  Oo.k_EVoiceCallState_RequestedPermission &&
                (t = 3e5),
                t < e &&
                  (this.LogMsg(
                    "(VoiceChat) Failure! Gave up after more than one minute trying to connect, last state was " +
                      Mo(this.m_VoiceCallState.m_eState) +
                      "(" +
                      this.m_VoiceCallState.m_eState +
                      ")"
                  ),
                  this.EndVoiceChatInternal(!1)),
                this.LogMsg(
                  "(VoiceChat) Still trying to connect to voice chat/webrtc " +
                    Mo(this.m_VoiceCallState.m_eState) +
                    "(" +
                    this.m_VoiceCallState.m_eState +
                    ") " +
                    (
                      performance.now() -
                      this.m_VoiceCallState.m_timeStartedConnecting
                    ).toFixed(0) +
                    "ms elapsed..."
                );
            }
          }),
          (o.prototype.BackOffAndRetryInitiateVoiceChat = function() {
            var e = this;
            if (this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None) {
              var t = this.m_VoiceCallState.m_nFailuresThisInitiate,
                n = this.m_VoiceCallState.m_targetAccountID,
                o = this.m_VoiceCallState.m_chatRoom;
              this.EndVoiceChatInternal(!0),
                (this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_ScheduledInitiate),
                (this.m_VoiceCallState.m_targetAccountID = n),
                (this.m_VoiceCallState.m_chatRoom = o),
                (this.m_VoiceCallState.m_nFailuresThisInitiate = t + 1);
              var i = 250;
              (i =
                t < 1
                  ? 250
                  : t < 3
                    ? 1e3
                    : t < 5 ? 5e3 : t < 10 ? 1e4 : t < 15 ? 3e4 : 6e4),
                this.LogMsg(
                  "(VoiceChat) Retrying InitiateVoiceChat in " +
                    i.toFixed(0) +
                    " milliseconds..."
                ),
                (this.m_ScheduledInitiate = SetBackgroundTimeout(function() {
                  e.ScheduledInitiate(n, o);
                }, i));
            }
          }),
          (o.prototype.ScheduledInitiate = function(e, t) {
            (this.m_ScheduledInitiate = 0), this.InitiateVoiceChat(e, t);
          }),
          (o.prototype.InitiateVoiceChat = function(e, t) {
            var n = this;
            _o.b.BClientConnected().then(function() {});
            var o = yo()(navigator.userAgent);
            if ("Chrome" != o.browser.name)
              return (
                this.LogMsg(
                  "(VoiceChat) Voice chat not supported in browser: " +
                    o.browser.name
                ),
                void Yo.ShowAlert(
                  Object(re.b)("#Voice_VoiceUnavailableInBrowser_Title"),
                  Object(re.b)(
                    "#Voice_VoiceUnavailableInBrowser_Body",
                    o.browser.name
                  ),
                  Object(re.b)("#Voice_VoiceUnavailableInBrowser_OK")
                )
                  .then(function() {})
                  .catch(function() {
                    return !0;
                  })
              );
            if (0 != e && t)
              this.LogMsg("Cant initiate voice chat for both friend & group");
            else {
              var i = this.m_VoiceCallState.BMatchingCall(e, t);
              !this.m_VoiceCallState.BMatchingCall(e, t) &&
                this.m_VoiceCallState.m_eState >
                  Oo.k_EVoiceCallState_ScheduledInitiate &&
                (this.LogMsg(
                  "(VoiceChat) InitiateVoiceChat called for new target account/room while already connected, ending prior session first"
                ),
                this.EndVoiceChatInternal(!1)),
                this.m_ScheduledInitiate &&
                  (ClearBackgroundTimeout(this.m_ScheduledInitiate),
                  (this.m_ScheduledInitiate = 0));
              var r = performance.now();
              if (
                this.m_VoiceCallState.m_eState <=
                  Oo.k_EVoiceCallState_ScheduledInitiate &&
                0 != this.m_VoiceCallState.m_timeEndedVoiceChat &&
                r - this.m_VoiceCallState.m_timeEndedVoiceChat < 100
              ) {
                (this.m_VoiceCallState.m_eState =
                  Oo.k_EVoiceCallState_ScheduledInitiate),
                  (this.m_VoiceCallState.m_targetAccountID = e),
                  (this.m_VoiceCallState.m_bInitiatedOneOnOneCall = !0),
                  (this.m_VoiceCallState.m_chatRoom = t);
                var a = 100 - (r - this.m_VoiceCallState.m_timeEndedVoiceChat);
                return (
                  this.LogMsg(
                    "(VoiceChat) Delaying requested InitiateChat for " +
                      a.toFixed(0) +
                      " milliseconds to let prior EndVoiceChat finish..."
                  ),
                  void (this.m_ScheduledInitiate = SetBackgroundTimeout(
                    function() {
                      n.ScheduledInitiate(e, t);
                    },
                    a
                  ))
                );
              }
              (!i ||
                this.m_VoiceCallState.m_eState <=
                  Oo.k_EVoiceCallState_ScheduledInitiate) &&
                (e
                  ? this.LogMsg(
                      "Resetting voice chat state and initiating to individual " +
                        e
                    )
                  : t
                    ? this.LogMsg(
                        "Resetting voice chat state and initiating to room " +
                          t.chatID
                      )
                    : (AssertMsg(
                        this.m_VoiceEchoLocalMic,
                        "Shouldn't hit local mic access only without echo local mic on"
                      ),
                      this.LogMsg(
                        "Resetting voice chat state and initiating local mic access only"
                      )),
                this.m_VoiceCallState.m_eState <=
                  Oo.k_EVoiceCallState_ScheduledInitiate &&
                  ((0 != e ||
                    (null != t &&
                      "undefined" != typeof SteamClient &&
                      null != window.SteamClient.WebChat.SetVoiceChatActive)) &&
                    window.SteamClient.WebChat.SetVoiceChatActive(!0),
                  (this.m_VoiceCallState.m_targetAccountID = e),
                  (this.m_VoiceCallState.m_bInitiatedOneOnOneCall = !0),
                  (this.m_VoiceCallState.m_chatRoom = t),
                  (this.m_VoiceCallState.m_timeStartedConnecting = performance.now()),
                  (this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion =
                    "0"),
                  (this.m_VoiceCallState.m_bIsConnectionAttemptOverTwoSeconds = !1),
                  (this.m_ConnectionCheck = SetBackgroundInterval(
                    this.CheckConnection,
                    2e3
                  )),
                  0 != e
                    ? this.InitiateOneOnOneVoiceChat(e)
                    : this.InitiateChatRoomVoice()));
            }
          }),
          (o.prototype.OnRequestMicrophoneAccess = function() {
            var t = this;
            if (
              this.m_VoiceCallState.m_eState >
              Oo.k_EVoiceCallState_ScheduledInitiate
            )
              return (
                this.LogMsg(
                  "(VoiceChat) Hit OnRequestMicrophoneAccess in wrong state " +
                    this.m_VoiceCallState.m_eState
                ),
                void this.EndVoiceChatInternal(!1)
              );
            null == this.m_AudioContext &&
              (this.m_AudioContext = Yo.AudioPlaybackManager.context);
            var e = {
              optional: [
                {
                  echoCancellation: this.m_Settings.m_VoiceUseEchoCancellation
                },
                {
                  googEchoCancellation: this.m_Settings
                    .m_VoiceUseEchoCancellation
                },
                {
                  googEchoCancellation2: this.m_Settings
                    .m_VoiceUseEchoCancellation
                },
                {
                  googNoiseSupression: this.m_Settings
                    .m_VoiceUseNoiseCancellation
                },
                {
                  googNoiseSupression2: this.m_Settings
                    .m_VoiceUseNoiseCancellation
                },
                {
                  mozNoiseSuppression: this.m_Settings
                    .m_VoiceUseNoiseCancellation
                },
                {
                  googTypingNoiseDetection: this.m_Settings
                    .m_VoiceUseNoiseCancellation
                },
                {
                  googAutoGainControl: this.m_Settings.m_VoiceUseAutoGainControl
                },
                {
                  googAutoGainControl2: this.m_Settings
                    .m_VoiceUseAutoGainControl
                },
                {
                  mozAutoGainControl: this.m_Settings.m_VoiceUseAutoGainControl
                },
                { googHighpassFilter: !0 },
                { googAudioMirroring: !1 }
              ]
            };
            "default" != this.m_Settings.m_SelectedMicID &&
              e.optional.push({ sourceId: this.m_Settings.m_SelectedMicID }),
              this.m_VoiceCallState.m_targetAccountID
                ? this.LogMsg(
                    "(VoiceChat) Call to individual " +
                      this.m_VoiceCallState.m_targetAccountID +
                      " now initating getUserMedia/WebRTC"
                  )
                : this.m_VoiceCallState.m_chatRoom &&
                  this.LogMsg(
                    "(VoiceChat) Call to room " +
                      this.m_VoiceCallState.m_chatRoom.chatID +
                      " now initating getUserMedia/WebRTC"
                  ),
              (this.m_VoiceCallState.m_eState =
                Oo.k_EVoiceCallState_RequestedMicAccess);
            var n = navigator;
            (this.m_bUserHasDeniedMicPermissions = !1),
              (n.getUserMedia =
                n.getUserMedia ||
                n.webkitGetUserMedia ||
                n.mozGetUserMedia ||
                n.msGetUserMedia),
              n.getUserMedia(
                { audio: e, video: !1 },
                function(e) {
                  t.OnGetUserMediaSuccess(e);
                },
                this.OnGetUserMediaFailure
              );
          }),
          (o.prototype.ScheduleClientVoiceLogsUpload = function(e) {
            if ("" != this.m_VoiceCallState.m_voiceChatID) {
              this.m_ScheduledVoiceLogsUpload &&
                (ClearBackgroundTimeout(this.m_ScheduledVoiceLogsUpload),
                (this.m_ScheduledVoiceLogsUpload = 0));
              this.m_ScheduledVoiceLogsUpload = SetBackgroundTimeout(
                this.UploadClientSideVoiceLogs,
                1e3 * e
              );
            }
          }),
          (o.prototype.UploadClientSideVoiceLogs = function() {
            var t = this;
            if ("" != this.m_VoiceCallState.m_voiceChatID)
              if (this.m_bClientSideLogsUploadInProgress)
                this.ScheduleClientVoiceLogsUpload(2);
              else {
                this.m_bClientSideLogsUploadInProgress = !0;
                var e = u.Init(fo.f);
                e.Body().set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);
                var n = this.m_rgLogLines.slice(this.m_nLastLogLineUploaded);
                e.Body().set_client_voice_logs_new_lines(n.join("\r\n"));
                var o = n.length;
                fo.i
                  .UploadClientVoiceChatLogs(
                    this.m_CMInterface.GetServiceTransport(),
                    e
                  )
                  .then(function(e) {
                    1 == e.GetEResult()
                      ? ((t.m_nLastLogLineUploaded += o),
                        t.LogMsg(
                          "(VoiceChat) Uploaded " +
                            o +
                            " new lines of voice chat log info to server"
                        ),
                        t.ScheduleClientVoiceLogsUpload(20))
                      : (t.LogMsg(
                          "(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"
                        ),
                        t.ScheduleClientVoiceLogsUpload(
                          10 + 10 * Math.random()
                        )),
                      (t.m_bClientSideLogsUploadInProgress = !1);
                  })
                  .catch(function(e) {
                    t.LogMsg(
                      "(VoiceChat) Error uploading client side logs to voice chat session, will retry soon"
                    ),
                      t.ScheduleClientVoiceLogsUpload(10 + 10 * Math.random()),
                      (t.m_bClientSideLogsUploadInProgress = !1);
                  });
              }
          }),
          (o.prototype.EndVoiceChatInternal = function(e) {
            var i = this;
            if (
              (this.m_ScheduledVoiceLogsUpload &&
                this.UploadClientSideVoiceLogs(),
              this.m_ScheduledInitiate &&
                (ClearBackgroundTimeout(this.m_ScheduledInitiate),
                (this.m_ScheduledInitiate = 0)),
              this.m_StatsTimeout &&
                (ClearBackgroundTimeout(this.m_StatsTimeout),
                (this.m_StatsTimeout = 0)),
              "undefined" != typeof SteamClient &&
                null != window.SteamClient.WebChat.SetVoiceChatActive &&
                window.SteamClient.WebChat.SetVoiceChatActive(!1),
              this.m_VoiceCallState.m_eState != Oo.k_EVoiceCallState_None)
            ) {
              if (!e) {
                if (this.m_VoiceCallState.m_targetAccountID) {
                  var r = this.m_VoiceCallState.m_targetAccountID;
                  this.m_VoiceCallState.m_targetAccountID = 0;
                  var a = this.m_VoiceCallState.m_voiceChatID;
                  (t = u.Init(fo.c))
                    .Body()
                    .set_steamid_partner(
                      E.a.InitFromAccountID(r).ConvertTo64BitString()
                    ),
                    t
                      .Body()
                      .set_voice_chatid(this.m_VoiceCallState.m_voiceChatID);
                  var s = this.m_VoiceCallState.m_eState;
                  fo.i
                    .LeaveOneOnOneChat(
                      this.m_CMInterface.GetServiceTransport(),
                      t
                    )
                    .then(function(e) {
                      if (1 == e.GetEResult())
                        if (
                          (i.LogMsg("(VoiceChat) Left voice chat with " + r),
                          s == Oo.k_EVoiceCallState_Connected)
                        ) {
                          var t = new ko();
                          (t.partner_accountid = i.m_CMInterface.steamid.GetAccountID()),
                            (t.voice_chatid = a),
                            (t.previously_joined = !0),
                            i.m_mapOneOnOneCallsWaitingJoinOrAccept.set(r, t);
                        } else {
                          var n = Yo.FriendStore.self,
                            o = Yo.ChatStore.GetFriendChat(r, !1);
                          o &&
                            n &&
                            o.AddVoiceChannelInviteMsg(
                              Yo.CMInterface.steamid.GetAccountID(),
                              Yo.GetServerRTime32(),
                              Object(re.b)(
                                "#FriendMsg_VoiceChannelEndedExplicit",
                                n.display_name
                              )
                            );
                        }
                      else
                        i.LogMsg(
                          "(VoiceChat) Failed leaving voice chat with " + r
                        );
                    });
                } else if (this.m_VoiceCallState.m_chatRoom) {
                  var t;
                  (t = u.Init(ie.z))
                    .Body()
                    .set_chat_group_id(
                      this.m_VoiceCallState.m_chatRoom.groupID
                    ),
                    t
                      .Body()
                      .set_chat_id(this.m_VoiceCallState.m_chatRoom.chatID);
                  var n = this.m_VoiceCallState.m_chatRoom.chatID;
                  ie.V.LeaveVoiceChat(
                    this.m_CMInterface.GetServiceTransport(),
                    t
                  ).then(function(e) {
                    1 == e.GetEResult()
                      ? i.LogMsg(
                          "(VoiceChat) Left chat room (" + n + ") voice chat"
                        )
                      : i.LogMsg(
                          "(VoiceChat) Failed leaving chat room (" +
                            n +
                            ") voice chat"
                        );
                  });
                }
                this.m_mapUserVoiceStatus.clear();
              }
              this.m_mapSSRCToAccountID.clear(),
                this.m_mapAccountIDToStats.clear();
              var o =
                this.m_VoiceCallState.m_eState >
                Oo.k_EVoiceCallState_RequestedPermission;
              (this.m_VoiceCallState.m_eState = Oo.k_EVoiceCallState_None),
                (this.m_VoiceCallState.m_targetAccountID = 0),
                (this.m_VoiceCallState.m_bInitiatedOneOnOneCall = !1),
                (this.m_VoiceCallState.m_bPostedOneOnOneEndedMsg = !1),
                (this.m_VoiceCallState.m_bWaitingOnOneOnOneRejoin = !1),
                (this.m_VoiceCallState.m_chatRoom = null),
                (e && o) || (this.m_VoiceCallState.m_voiceChatID = ""),
                (this.m_VoiceCallState.m_nMostRecentRemoteDescriptionVersion =
                  "0"),
                (this.m_VoiceCallState.m_nFailuresThisInitiate = 0),
                (this.m_VoiceCallState.m_timeEndedVoiceChat = performance.now()),
                (this.m_VoiceCallState.m_webRTCConnectedNotification = void 0),
                (this.m_VoiceCallState.m_bOfferUpdateInProgress = !1),
                (this.m_VoiceCallState.m_msgPendingRemoteDescriptionUpdate = void 0),
                this.m_ConnectionCheck &&
                  (ClearBackgroundInterval(this.m_ConnectionCheck),
                  (this.m_ConnectionCheck = 0));
              for (var c = this.m_rgAudioStreams.pop(); null != c; ) {
                null != c.elem &&
                  (c.elem.pause(),
                  (c.elem.src = void 0),
                  (c.elem.srcObject = void 0),
                  (c.elem = void 0)),
                  null != c.volume_meter &&
                    (c.volume_meter.stop(), (c.volume_meter = void 0)),
                  (c.stream.oninactive = void 0);
                for (var l = 0, p = c.stream.getTracks(); l < p.length; l++) {
                  p[l].stop();
                }
                if (null != this.m_AudioContext && c.source_node)
                  try {
                    c.source_node.disconnect();
                  } catch (e) {}
                c.output_gain_node &&
                  (c.output_gain_node.disconnect(),
                  (c.output_gain_node = void 0)),
                  (c = this.m_rgAudioStreams.pop());
              }
              null != this.m_MicVolumeMeter &&
                (this.m_MicVolumeMeter.stop(),
                (this.m_MicVolumeMeter = void 0)),
                null != this.m_MicNoiseGate &&
                  (this.m_MicNoiseGate.input
                    ? (this.m_MicNoiseGate.input.disconnect(),
                      this.m_MicNoiseGate.output.disconnect(),
                      this.m_MicNoiseGate.noiseGateKernel_.disconnect())
                    : this.m_MicNoiseGate.disconnect(),
                  (this.m_MicNoiseGate = void 0)),
                null != this.m_MicInputGainNode &&
                  (this.m_MicInputGainNode.disconnect(),
                  (this.m_MicInputGainNode = void 0)),
                null != this.m_AudioContext &&
                  (Yo.AudioPlaybackManager.SetVoiceNotActive(),
                  (this.m_AudioContext = void 0)),
                this.m_PeerConnection &&
                  ((this.m_PeerConnection.oniceconnectionstatechange = void 0),
                  (this.m_PeerConnection.onicegatheringstatechange = void 0),
                  (this.m_PeerConnection.onsignalingstatechange = void 0),
                  this.m_PeerConnection.close(),
                  (this.m_PeerConnection = void 0));
            }
          }),
          (o.prototype.FillInChatUsabilityMetrics = function(e) {
            var t = e.voice_settings();
            t.set_voice_input_gain(this.m_Settings.m_VoiceInputGain),
              t.set_voice_output_gain(this.m_Settings.m_VoiceOutputGain),
              t.set_noise_gate_level(
                Math.round(this.m_Settings.m_NoiseGateLevel)
              ),
              t.set_voice_use_echo_cancellation(
                this.m_Settings.m_VoiceUseEchoCancellation
              ),
              t.set_voice_use_noise_cancellation(
                this.m_Settings.m_VoiceUseNoiseCancellation
              ),
              t.set_voice_use_auto_gain_control(
                this.m_Settings.m_VoiceUseAutoGainControl
              ),
              t.set_selected_non_default_mic(
                "default" !== this.m_Settings.m_SelectedMicID
              ),
              t.set_selected_non_default_output(
                "default" !== this.m_Settings.m_SelectedOutputID
              ),
              t.set_push_to_talk_enabled(this.GetPushToTalkEnabled()),
              t.set_push_to_mute_enabled(this.GetPushToMuteEnabled()),
              t.set_play_ptt_sounds(this.m_Settings.m_bPlayPTTSounds),
              this.IsAnyVoiceActive() &&
                (this.m_VoiceCallState.m_targetAccountID
                  ? e.ui_state().set_in_one_on_one_voice_chat(!0)
                  : this.m_VoiceCallState.m_chatRoom &&
                    e.ui_state().set_in_group_voice_chat(!0));
          }),
          (o.k_MaxPerUserGainMultiplier = 2),
          (o.k_MaxInputOutputGainValue = 4),
          R.c([m.observable], o.prototype, "m_VoiceCallState", void 0),
          R.c([m.observable], o.prototype, "m_bPushToTalkEnabled", void 0),
          R.c([m.observable], o.prototype, "m_bPushToMuteEnabled", void 0),
          R.c([m.observable], o.prototype, "m_bVoicePTTStateEnabled", void 0),
          R.c([m.observable], o.prototype, "m_VKPushToTalkHotKey", void 0),
          R.c(
            [m.observable],
            o.prototype,
            "m_strPushToTalkDisplayString",
            void 0
          ),
          R.c(
            [m.observable],
            o.prototype,
            "m_bUserHasDeniedMicPermissions",
            void 0
          ),
          R.c([m.observable], o.prototype, "m_bOutputMuted", void 0),
          R.c([m.observable], o.prototype, "m_AudioContext", void 0),
          R.c([m.observable], o.prototype, "m_rgAudioStreams", void 0),
          R.c([m.observable], o.prototype, "m_MicVolumeMeter", void 0),
          R.c([m.observable], o.prototype, "m_MicNoiseGate", void 0),
          R.c([m.observable], o.prototype, "m_MicInputGainNode", void 0),
          R.c([m.observable], o.prototype, "m_PeerConnection", void 0),
          R.c([m.observable], o.prototype, "m_Settings", void 0),
          R.c([m.observable], o.prototype, "m_bLocalMicTestActive", void 0),
          R.c([m.observable], o.prototype, "m_bForceConnectingStatus", void 0),
          R.c(
            [m.observable],
            o.prototype,
            "m_bForceReconnectingStatus",
            void 0
          ),
          R.c([m.action.bound], o.prototype, "SetSelectedMic", null),
          R.c([m.action.bound], o.prototype, "SetSelectedOutput", null),
          R.c([m.action.bound], o.prototype, "SetUseEchoCancellation", null),
          R.c([m.action.bound], o.prototype, "SetUseNoiseCancellation", null),
          R.c([m.action.bound], o.prototype, "SetUseAutoGainControl", null),
          R.c([m.action.bound], o.prototype, "SetVoiceEchoLocalMic", null),
          R.c([m.action.bound], o.prototype, "SetVoiceLogDetails", null),
          R.c([m.action.bound], o.prototype, "GetVoiceLogDetails", null),
          R.c([m.action.bound], o.prototype, "SetUseNoiseGateLevel", null),
          R.c([m.action.bound], o.prototype, "SetVoiceInputGain", null),
          R.c([m.action.bound], o.prototype, "SetVoiceOutputGain", null),
          R.c([m.action.bound], o.prototype, "ForceReconnectingStatus", null),
          R.c([m.action.bound], o.prototype, "ForceConnectingStatus", null),
          R.c([m.action.bound], o.prototype, "LogMsg", null),
          R.c([m.action.bound], o.prototype, "GetVoiceLogs", null),
          R.c([m.action.bound], o.prototype, "OnPushToTalkReleased", null),
          R.c(
            [m.action.bound, Object(lt.a)(150)],
            o.prototype,
            "DebouncedToggleMicMuting",
            null
          ),
          R.c([m.action.bound], o.prototype, "OnPushToTalkStateChange", null),
          R.c(
            [m.action.bound],
            o.prototype,
            "UpdateNoiseGateOnActiveMic",
            null
          ),
          R.c([m.action.bound], o.prototype, "OnAudioContextStateChange", null),
          R.c([m.action.bound], o.prototype, "OnIceCandidate", null),
          R.c([m.action.bound], o.prototype, "AddRemoteIceCandidate", null),
          R.c([m.action.bound], o.prototype, "OnSignalingStateChange", null),
          R.c(
            [m.action.bound],
            o.prototype,
            "OnIceConnectionStateChange",
            null
          ),
          R.c([m.action.bound], o.prototype, "OnIceGatheringStateChange", null),
          R.c([m.action.bound], o.prototype, "OnRemoveRemoteStream", null),
          R.c([m.action.bound], o.prototype, "OnAddRemoteStream", null),
          R.c(
            [m.action.bound],
            o.prototype,
            "ModifyLocalSDPBeforeSetting",
            null
          ),
          R.c([m.action.bound], o.prototype, "OnCreateOfferSuccess", null),
          R.c([m.action.bound], o.prototype, "OnCreateOfferError", null),
          R.c([m.action.bound], o.prototype, "OnNoiseGateMessage", null),
          R.c([m.action.bound], o.prototype, "SetupNoiseGateOnMic", null),
          R.c([m.action.bound], o.prototype, "OnGetUserMediaSuccess", null),
          R.c([m.action.bound], o.prototype, "OnGetUserMediaFailure", null),
          R.c(
            [m.action.bound],
            o.prototype,
            "OnSetUpdatedLocalDescriptionSuccess",
            null
          ),
          R.c(
            [m.action.bound],
            o.prototype,
            "OnSetUpdatedLocalDescriptionFailure",
            null
          ),
          R.c([m.action.bound], o.prototype, "OnCreateAnswerSuccess", null),
          R.c([m.action.bound], o.prototype, "OnCreateAnswerError", null),
          R.c([m.action.bound], o.prototype, "OnAcceptOneOnOneVoiceChat", null),
          R.c([m.action.bound], o.prototype, "OnRejectOneOnOneVoiceChat", null),
          R.c([m.action.bound], o.prototype, "PlayRingSound", null),
          R.c([m.action.bound], o.prototype, "ProcessStatsReport", null),
          R.c(
            [m.action.bound],
            o.prototype,
            "ProcessReceiverStatsReport",
            null
          ),
          R.c([m.action.bound], o.prototype, "CheckConnection", null),
          R.c([m.action.bound], o.prototype, "ScheduledInitiate", null),
          R.c([m.action.bound], o.prototype, "OnRequestMicrophoneAccess", null),
          R.c([m.action.bound], o.prototype, "UploadClientSideVoiceLogs", null),
          o
        );
      })(),
      Po = n("jPkp"),
      Fo = (function() {
        function e() {
          var t = this;
          (this.m_ParentalState = new Qt()),
            (this.m_ParentalLockHandler = _(Po.d.NotifyLockHandler, function(
              e
            ) {
              return (
                G.a.SESSIONID == e.Body().sessionid() && t.SetLockState(!0), 1
              );
            })),
            (this.m_ParentalUnlockHandler = _(
              Po.d.NotifyUnlockHandler,
              function(e) {
                return (
                  G.a.SESSIONID == e.Body().sessionid() && t.SetLockState(!1), 1
                );
              }
            )),
            (this.m_ParentalSettingsChangeHandler = _(
              Po.d.NotifySettingsChangeHandler,
              function(e) {
                return 1;
              }
            ));
        }
        return (
          (e.prototype.SetParentalState = function(e) {
            this.m_ParentalState = e;
          }),
          (e.prototype.SetLockState = function(e) {
            this.m_ParentalState.locked = e;
          }),
          (e.prototype.Init = function(e) {
            var o = this;
            (this.m_CMInterface = e),
              this.m_CMInterface.RunWhenLoggedOn(function() {
                var e = u.Init(Po.a);
                e
                  .Body()
                  .set_steamid(o.m_CMInterface.steamid.ConvertTo64BitString()),
                  G.a.IN_CLIENT
                    ? SteamClient.Parental.RegisterForParentalSettingsChanges(
                        function(e) {
                          return o.UpdateParentalState(e);
                        }
                      )
                    : Po.e
                        .GetParentalSettings(
                          o.m_CMInterface.GetServiceTransport(),
                          e
                        )
                        .then(function(e) {
                          e
                            .Body()
                            .settings()
                            .enabled_features();
                          var t = e.Body().settings(),
                            n = o.MsgParentalSettingsToParentalState(t);
                          n.enabled
                            ? o.ValidateWebToken().then(function(e) {
                                (n.locked = e), o.SetParentalState(n);
                              })
                            : ((n.locked = !1), o.SetParentalState(n));
                        });
              });
          }),
          (e.prototype.MsgParentalSettingsToParentalState = function(e) {
            var t = new Qt();
            (t.enabled = e.is_enabled()),
              (t.features = e.enabled_features()),
              (t.baselist = {});
            for (var n = 0, o = e.applist_base(); n < o.length; n++) {
              var i = o[n];
              t.baselist["App_" + i.appid()] = i.is_allowed();
            }
            t.customlist = {};
            for (var r = 0, a = e.applist_custom(); r < a.length; r++) {
              i = a[r];
              t.customlist["App_" + i.appid()] = i.is_allowed();
            }
            return (t.locked = !0), t;
          }),
          (e.prototype.UpdateParentalState = function(e) {
            this.SetParentalState(e);
          }),
          (e.prototype.BIsFeatureBlocked = function(e) {
            return (
              this.m_ParentalState.locked &&
              0 != e &&
              0 == (this.m_ParentalState.features & (1 << e))
            );
          }),
          (e.prototype.BIsAppBlocked = function(e) {
            return (
              !!this.isLocked &&
              (!this.m_ParentalState.allowallapps &&
                (0 != e &&
                  (!(e >= S.d && e <= S.e) &&
                    (-1 === [S.j, S.f, S.g, S.i, S.h].indexOf(e) &&
                      (null != this.m_ParentalState.customlist &&
                      null != this.m_ParentalState.customlist["App_" + e]
                        ? !this.m_ParentalState.customlist["App_" + e]
                        : null == this.m_ParentalState.baselist ||
                          null == this.m_ParentalState.baselist["App_" + e] ||
                          !this.m_ParentalState.baselist["App_" + e])))))
            );
          }),
          Object.defineProperty(e.prototype, "isEnabled", {
            get: function() {
              return this.m_ParentalState.enabled;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "isLocked", {
            get: function() {
              return this.m_ParentalState.locked;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ValidateWebToken = function() {
            var n = this,
              e = G.a.SESSIONID,
              t = document.cookie.match("(^|; )steamparental=([^;]*)");
            if (!t || !t[2]) return Promise.resolve(!1);
            var o = t[2],
              i = o.split("||");
            o = 2 == i.length ? i[1] : i[0];
            var r = u.Init(Po.c);
            return (
              r.Body().set_unlock_token(e + "||" + o),
              new Promise(function(t, e) {
                Po.e
                  .ValidateToken(n.m_CMInterface.GetServiceTransport(), r)
                  .then(function(e) {
                    1 == e.GetEResult() ? t(!0) : t(!1);
                  });
              })
            );
          }),
          Object.defineProperty(e.prototype, "locked", {
            get: function() {
              return (
                console.log(
                  "ParentalState.locked",
                  this.m_ParentalState.locked
                ),
                this.m_ParentalState.locked
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsFriendsBlocked = function() {
            return this.BIsFeatureBlocked(4);
          }),
          (e.prototype.Unlock = function(n) {
            var t = this;
            if (G.a.IN_CLIENT)
              return new Promise(function(t, e) {
                SteamClient.Parental.UnlockParentalLock(n, !1).then(function(
                  e
                ) {
                  t(e);
                });
              });
            var o = u.Init(Po.b);
            return (
              o.Body().set_password(n),
              o.Body().set_session(G.a.SESSIONID),
              o.Body().set_send_unlock_on_success(!0),
              new Promise(function(n, e) {
                Po.e
                  .ValidatePassword(t.m_CMInterface.GetServiceTransport(), o)
                  .then(function(e) {
                    if (1 == e.GetEResult()) {
                      var t = Date.now().toString() + "||" + e.Body().token();
                      document.cookie =
                        "steamparental=" + encodeURIComponent(t) + "; path=/";
                    }
                    n(e.GetEResult());
                  });
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_ParentalState", void 0),
          R.c([m.action], e.prototype, "UpdateParentalState", null),
          R.c([m.computed], e.prototype, "isEnabled", null),
          R.c([m.computed], e.prototype, "isLocked", null),
          R.c([m.computed], e.prototype, "locked", null),
          e
        );
      })(),
      Bo = (function() {
        function e(e, t, n) {
          (this.m_id = e),
            (this.m_rgMembers = []),
            (this.m_fnSort = t),
            (this.m_fnOnUpdate = n);
        }
        return (
          Object.defineProperty(e.prototype, "id", {
            get: function() {
              return this.m_id;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "name", {
            get: function() {
              return -2 == this.m_id
                ? 1 == this.m_rgMembers.length
                  ? Object(re.b)("#FriendGroup_InGame")
                  : Object(re.b)("#FriendGroup_InGame_Others")
                : 0 == this.m_id
                  ? Object(re.b)("#Chat_MemberGroup_Online")
                  : this.m_strName
                    ? this.m_strName
                    : Yo.AppInfoStore.GetAppInfo(this.m_id).m_bInitialized
                      ? ((this.m_strName = Yo.AppInfoStore.GetAppInfo(
                          this.m_id
                        ).m_strName),
                        this.m_strName)
                      : (Yo.AppInfoStore.RegisterCallbackOnLoad(
                          this.OnAppInfoLoaded
                        ),
                        "");
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnAppInfoLoaded = function() {
            (this.m_strName = Yo.AppInfoStore.GetAppInfo(this.m_id).m_strName),
              this.m_fnOnUpdate();
          }),
          Object.defineProperty(e.prototype, "member_list", {
            get: function() {
              return this.m_rgMembers;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BReadyToDisplay = function() {
            return !this.BIsGameGroup() || !!this.name;
          }),
          (e.prototype.BIsGameGroup = function() {
            return 0 < this.m_id;
          }),
          (e.prototype.ClearMemberList = function() {
            this.m_rgMembers = [];
          }),
          (e.prototype.BHasMember = function(t) {
            return (
              0 <=
              this.m_rgMembers.findIndex(function(e) {
                return e.accountid === t;
              })
            );
          }),
          (e.prototype.SetMembers = function(e) {
            (this.m_rgMembers = e), this.Sort();
          }),
          (e.prototype.SortedInsert = function(e) {
            AssertMsg(
              !this.BHasMember(e.accountid),
              "Double insert into bucket for accountid",
              e.accountid
            ),
              w.h(this.m_rgMembers, e, this.m_fnSort);
          }),
          (e.prototype.Remove = function(t) {
            return w.d(this.m_rgMembers, function(e) {
              return e.accountid === t;
            });
          }),
          (e.prototype.Sort = function() {
            this.m_rgMembers.sort(this.m_fnSort);
          }),
          R.c([M.a], e.prototype, "OnAppInfoLoaded", null),
          e
        );
      })(),
      Vo = (function() {
        return function(e, t) {
          (this.rgRegistered = []),
            (this.bFlatList = void 0),
            (this.mapBuckets = new Map()),
            (this.nLastUpdate = 0),
            (this.msSpentSorting = 0),
            (this.groupSingletons = new Bo(-2, e, t));
        };
      })(),
      xo = (function() {
        function e() {
          (this.m_mapGroupBuckets = new Map()),
            (this.m_bShowMembersInGameGroups = void 0),
            (this.LOG = Te.create(function() {
              return "CGroupMemberStore";
            }, !1));
        }
        return (
          (e.prototype.Init = function() {
            (this.m_disposePersonaStateChanged = Yo.FriendStore.AddPersonaStateChangedCallback(
              this.OnPersonaStateChanged
            )),
              (this.m_disposePlayerGameChanged = Yo.FriendStore.AddPlayerGameChangedCallback(
                this.OnPlayerGameChanged
              )),
              Yo.SettingsStore.RunOnReady(this.ListenForSettingsChanges);
          }),
          (e.prototype.ListenForSettingsChanges = function() {
            var n = this;
            (this.m_bShowMembersInGameGroups =
              Yo.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame),
              Object(m.when)(
                function() {
                  return (
                    Yo.SettingsStore.FriendsSettings
                      .bCategorizeInGameFriendsByGame !==
                    n.m_bShowMembersInGameGroups
                  );
                },
                function() {
                  n.m_mapGroupBuckets.forEach(function(e, t) {
                    (e.bFlatList = void 0),
                      n.PerformInitialPopulate(t),
                      n.FireMemberListChanged(e);
                  }),
                    n.ListenForSettingsChanges();
                }
              );
          }),
          (e.prototype.RegisterForGroupMemberList = function(e, t) {
            var n = this;
            return (
              this.m_mapGroupBuckets.has(t) ||
                (this.m_mapGroupBuckets.set(
                  t,
                  new Vo(this.FriendSortFunc, function() {
                    n.OnGroupUpdate(t);
                  })
                ),
                this.PerformInitialPopulate(t)),
              this.m_mapGroupBuckets.get(t).rgRegistered.push(e),
              {
                unregister: function() {
                  return n.UnregisterForGroupMemberList(e, t);
                }
              }
            );
          }),
          (e.prototype.OnGroupUpdate = function(e) {
            var t = this.m_mapGroupBuckets.get(e);
            t && this.FireMemberListChanged(t);
          }),
          (e.prototype.UnregisterForGroupMemberList = function(e, t) {
            var n = this.m_mapGroupBuckets.get(t);
            n &&
              (w.c(n.rgRegistered, e),
              0 == n.rgRegistered.length && this.m_mapGroupBuckets.delete(t));
          }),
          (e.prototype.GroupSortFunc = function(e, t) {
            return e.id <= 0 && t.id <= 0
              ? e.id - t.id
              : e.id <= 0 && 0 < t.id
                ? 1
                : t.id <= 0 && 0 < e.id
                  ? -1
                  : t.member_list.length == e.member_list.length &&
                    t.name &&
                    e.name
                    ? t.name.localeCompare(e.name)
                    : t.member_list.length - e.member_list.length;
          }),
          (e.prototype.GetGroupMemberList = function(e) {
            var t = this.m_mapGroupBuckets.get(e);
            if (t.bFlatList)
              return (
                AssertMsg(
                  1 == t.mapBuckets.size,
                  "Flat list has too many buckets"
                ),
                [t.mapBuckets.get(0)]
              );
            var n = [];
            return (
              t.mapBuckets.forEach(function(e) {
                e.BReadyToDisplay() && 1 < e.member_list.length && n.push(e);
              }),
              0 < t.groupSingletons.member_list.length &&
                (t.groupSingletons.Sort(), n.push(t.groupSingletons)),
              n.sort(this.GroupSortFunc)
            );
          }),
          (e.prototype.SetGroupListFlat = function(e, t) {
            var n = this.m_mapGroupBuckets.get(e);
            n &&
              n.bFlatList != t &&
              ((n.bFlatList = t),
              this.PerformInitialPopulate(e),
              this.FireMemberListChanged(n));
          }),
          (e.prototype.ScheduledFireMemberListChanged = function(e) {
            (e.hDelayUpdate = void 0), this.FireMemberListChanged(e);
          }),
          (e.prototype.FireMemberListChanged = function(e) {
            var t = this;
            if (!e.hDelayUpdate) {
              var n = performance.now();
              if (n - e.nLastUpdate < 1e3)
                return (
                  (e.hDelayUpdate = SetBackgroundTimeout(function() {
                    return t.ScheduledFireMemberListChanged(e);
                  }, 1e3)),
                  void this.LOG("DELAY UPDATE")
                );
              e.nLastUpdate = n;
              for (var o = 0, i = e.rgRegistered; o < i.length; o++) {
                (0, i[o])();
              }
            }
          }),
          (e.prototype.OnPlayerGameChanged = function(a, s, c) {
            var l = this;
            this.m_mapGroupBuckets.forEach(function(e, t) {
              if (Yo.ChatStore.GetChatRoomGroup(t).BHasMember(a)) {
                var n = Yo.FriendStore.GetPlayer(a);
                n.persona.is_appinfo_ready;
                var o = s == _t ? e.groupSingletons : e.mapBuckets.get(s),
                  i = c == _t ? e.groupSingletons : e.mapBuckets.get(c);
                if (
                  (l.LOG(
                    "OnPlayerGameChanged",
                    n.display_name,
                    o ? o.id : "none",
                    i ? i.id : "none"
                  ),
                  e.bFlatList && o != i)
                )
                  return (
                    e.mapBuckets.get(0).Remove(a),
                    e.mapBuckets
                      .get(0)
                      .SortedInsert(Yo.FriendStore.GetPlayer(a)),
                    void l.FireMemberListChanged(e)
                  );
                if ((o && i && s == c) || (i && i.BHasMember(a)))
                  return void l.UpdatePersonaForGroup(t, n);
                var r = !1;
                o &&
                  o.BHasMember(a) &&
                  (l.RemoveMemberFromBucket(e, o.id, a), (r = !0)),
                  i &&
                    (l.AddMemberToBucketID(
                      e,
                      i.id,
                      Yo.FriendStore.GetPlayer(a)
                    ),
                    (r = !0)),
                  r && l.FireMemberListChanged(e);
              }
            });
          }),
          (e.prototype.OnPersonaStateChanged = function(o) {
            var i = this;
            this.m_mapGroupBuckets.forEach(function(e, t) {
              var n = Yo.ChatStore.GetChatRoomGroup(t);
              if (n.BHasMember(o.accountid)) {
                if (
                  (i.LOG(
                    "CGroupMemberStore - persona state",
                    t,
                    o.display_name
                  ),
                  e.bReSortPending)
                )
                  return (
                    i.LOG(o.display_name, "not ready"),
                    void o.persona.is_appinfo_ready
                  );
                o.persona.is_appinfo_ready
                  ? i.UpdatePersonaForGroup(n.GetGroupID(), o)
                  : (i.LOG("Delay sorting player " + o.accountid),
                    Yo.AppInfoStore.RegisterCallbackOnLoad(
                      i.UpdatePersonaForGroup.bind(i, t, o)
                    ));
              }
            });
          }),
          (e.prototype.UpdatePersonaForGroup = function(e, t) {
            var n = this.m_mapGroupBuckets.get(e);
            if (n) {
              var o = performance.now(),
                i = !1;
              if (n.bFlatList)
                AssertMsg(1 == n.mapBuckets.size, "Flat map is too large"),
                  n.mapBuckets.get(0).Remove(t.accountid),
                  n.mapBuckets.get(0).SortedInsert(t),
                  (i = !0);
              else {
                var r = this.FindBucketForMember(n, t.accountid);
                if (void 0 !== r) {
                  var a = void 0;
                  -2 == r
                    ? (a = n.groupSingletons)
                    : 1 == (a = n.mapBuckets.get(r)).member_list.length &&
                      (a = n.groupSingletons),
                    1 < a.member_list.length &&
                      (this.LOG(
                        "Resorting user",
                        t.display_name,
                        "in bucket",
                        r
                      ),
                      a.Remove(t.accountid),
                      a.SortedInsert(t),
                      (i = !0));
                }
              }
              var s = performance.now();
              (n.msSpentSorting += s - o),
                this.LOG(
                  e +
                    ": Resort user " +
                    t.display_name +
                    " took " +
                    (s - o) +
                    "ms (total " +
                    n.msSpentSorting +
                    "ms)"
                ),
                i && this.FireMemberListChanged(n);
            }
          }),
          (e.prototype.ReSortGroup = function(e) {
            var t = this.m_mapGroupBuckets.get(e);
            if (t) {
              if (t.bFlatList) {
                AssertMsg(
                  1 == t.mapBuckets.size,
                  "Flat list has too many buckets"
                );
                var n = performance.now(),
                  o = t.mapBuckets.get(0);
                o.Sort();
                var i = performance.now();
                (t.msSpentSorting += i - n),
                  this.LOG(
                    e +
                      ": List ReSort took " +
                      (i - n) +
                      "ms (total " +
                      t.msSpentSorting +
                      "ms) for " +
                      o.member_list.length +
                      " members"
                  );
              } else t.mapBuckets.get(0).Sort(), t.groupSingletons.Sort();
              (t.bReSortPending = !1), this.FireMemberListChanged(t);
            }
          }),
          (e.prototype.FriendSortFunc = function(e, t) {
            var n = ut.FriendSortStatusComparator(e, t);
            if (0 != n) return n;
            if (e.persona.is_ingame && t.persona.is_ingame) {
              if (e.persona.is_in_nonsteam_game) {
                if (!t.persona.is_in_nonsteam_game) return 1;
              } else if (t.persona.is_in_nonsteam_game) return -1;
              var o = e.persona.current_game_name,
                i = t.persona.current_game_name;
              if (o) {
                if (!i) return -1;
                if (o != i) return o < i ? -1 : 1;
              } else if (i) return 1;
            }
            return e.display_name.localeCompare(t.display_name);
          }),
          (e.prototype.PerformInitialPopulate = function(e) {
            var t = this,
              n = this.m_mapGroupBuckets.get(e);
            n.mapBuckets.clear(),
              n.groupSingletons.ClearMemberList(),
              AssertMsg(n, "PerformInitialPopulate didn't find group");
            var o = performance.now(),
              i = Yo.ChatStore.GetChatRoomGroup(
                e
              ).memberList.member_list_unsorted.slice();
            if (
              (void 0 === n.bFlatList &&
                (n.bFlatList =
                  100 < i.length ||
                  !Yo.SettingsStore.FriendsSettings
                    .bCategorizeInGameFriendsByGame),
              n.bFlatList)
            ) {
              i.forEach(function(e) {
                e.persona.is_appinfo_ready;
              });
              var r = new Bo(0, this.FriendSortFunc, function() {
                t.FireMemberListChanged(n);
              });
              r.SetMembers(i), n.mapBuckets.set(0, r);
            } else
              for (var a = 0, s = i; a < s.length; a++) {
                var c = s[a],
                  l = this.GetBucketIdForPlayer(n, c);
                this.AddMemberToBucketID(n, l, c);
              }
            Yo.AppInfoStore.BHavePendingAppInfoRequests() &&
              ((n.bReSortPending = !0),
              Yo.AppInfoStore.RegisterCallbackOnLoad(
                this.ReSortGroup.bind(this, e)
              ));
            var p = performance.now();
            (n.msSpentSorting += p - o),
              this.LOG(
                "List sort took " +
                  (p - o) +
                  " ms for " +
                  i.length +
                  " members of group " +
                  e
              );
          }),
          (e.prototype.FindBucketForMember = function(e, t) {
            var n = void 0;
            return (
              e.mapBuckets.forEach(function(e) {
                e.BHasMember(t) && (n = e.id);
              }),
              void 0 !== n ? n : e.groupSingletons.BHasMember(t) ? -2 : void 0
            );
          }),
          (e.prototype.BIsMemberInAnyBucket = function(e, t) {
            return void 0 !== this.FindBucketForMember(e, t);
          }),
          (e.prototype.AddMemberToBucketID = function(e, t, n) {
            var o = this;
            if (
              (AssertMsg(
                !this.BIsMemberInAnyBucket(e, n.accountid),
                "Trying to double add accountid",
                n.accountid,
                "which is already in bucket",
                this.FindBucketForMember(e, n.accountid)
              ),
              AssertMsg(
                !e.bFlatList || 0 == t,
                "Trying to add to non-default bucket in flat list"
              ),
              -2 != t)
            )
              if (e.mapBuckets.has(t)) {
                if (!e.bFlatList)
                  1 == (i = e.mapBuckets.get(t)).member_list.length &&
                    this.RemoveFromSingletons(e, i.member_list[0].accountid);
                e.mapBuckets.get(t).SortedInsert(n);
              } else {
                var i;
                (i = new Bo(t, this.FriendSortFunc, function() {
                  o.FireMemberListChanged(e);
                })).SortedInsert(n),
                  e.mapBuckets.set(t, i),
                  e.bFlatList || this.AddToSingletons(e, n);
              }
            else this.AddToSingletons(e, n);
          }),
          (e.prototype.AddToSingletons = function(e, t) {
            AssertMsg(!e.bFlatList, "Adding to singletons in flat list"),
              e.groupSingletons.SortedInsert(t);
          }),
          (e.prototype.RemoveFromSingletons = function(e, t) {
            return (
              AssertMsg(!e.bFlatList, "Removing from singletons in flat list"),
              e.groupSingletons.Remove(t)
            );
          }),
          (e.prototype.GetBucketIdForPlayer = function(e, t) {
            return e.bFlatList
              ? 0
              : t.persona.is_ingame
                ? t.persona.is_in_nonsteam_game
                  ? -2
                  : t.persona.m_unGamePlayedAppID
                : 0;
          }),
          (e.prototype.RemoveMemberFromBucket = function(e, t, n) {
            if (-2 == t) return this.RemoveFromSingletons(e, n), !0;
            var o = e.mapBuckets.get(t);
            return (
              !!o.Remove(n) &&
              (0 == o.member_list.length
                ? (this.RemoveFromSingletons(e, n),
                  this.LOG("Deleting bucket", t),
                  e.mapBuckets.delete(t))
                : 1 != o.member_list.length ||
                  e.bFlatList ||
                  (this.LOG(
                    "Removing member, adding",
                    o.member_list[0].accountid,
                    "to singletons"
                  ),
                  this.AddToSingletons(e, o.member_list[0])),
              !0)
            );
          }),
          (e.prototype.AddUserAndFireCallback = function(e, t) {
            var n = Yo.FriendStore.GetPlayer(t),
              o = this.GetBucketIdForPlayer(e, n);
            this.AddMemberToBucketID(e, o, n), this.FireMemberListChanged(e);
          }),
          (e.prototype.OnMemberAdded = function(e, t) {
            var n = this.m_mapGroupBuckets.get(e);
            n && this.AddUserAndFireCallback(n, t);
          }),
          (e.prototype.OnMemberRemoved = function(e, t) {
            var n = this.m_mapGroupBuckets.get(e);
            if (n) {
              for (
                var o = 0, i = Array.from(n.mapBuckets.keys());
                o < i.length;
                o++
              ) {
                var r = i[o];
                if (this.RemoveMemberFromBucket(n, r, t))
                  return void this.FireMemberListChanged(n);
              }
              this.RemoveMemberFromBucket(n, -2, t) &&
                this.FireMemberListChanged(n);
            }
          }),
          R.c([M.a], e.prototype, "ListenForSettingsChanges", null),
          R.c([M.a], e.prototype, "OnPlayerGameChanged", null),
          R.c([M.a], e.prototype, "OnPersonaStateChanged", null),
          e
        );
      })();
    function Uo(o, e) {
      return function() {
        for (var e = this, t = [], n = 0; n < arguments.length; n++)
          t[n] = arguments[n];
        Yo.ready_to_render
          ? o.apply(this, t)
          : Object(m.when)(
              function() {
                return Yo.ready_to_render;
              },
              function() {
                o.apply(e, t);
              }
            );
      };
    }
    function jo(e, t, n) {
      return { value: Uo(n.value) };
    }
    var Ho = (function() {
        return function() {};
      })(),
      Wo = (function() {
        return function() {};
      })();
    function zo(e, t) {
      return e.m_unPID == t.m_unPID && e.m_nBrowserID == t.m_nBrowserID;
    }
    var qo = { m_unPID: 0, m_nBrowserID: -1 },
      Ko = (function() {
        function o(e) {
          (this.m_BrowserContextDefaultTarget = qo),
            (this.m_FriendStore = new ht()),
            (this.m_ChatStore = new Jt(this.m_FriendStore)),
            (this.m_UIStore = new io(this.m_ChatStore)),
            (this.m_AppInfoStore = new oe()),
            (this.m_EconomyStore = new Re()),
            (this.m_ParentalStore = new Fo()),
            (this.m_BroadcastStore = new to()),
            (this.m_GroupMemberStore = new xo()),
            (this.m_bReadyToRender = !1),
            (this.m_bShuttingDown = !1),
            AssertMsg(!Yo, "FriendsUIApp already initialized"),
            (Yo = this),
            ((window.g_FriendsUIApp = this).m_Storage = e),
            (this.m_SettingsStore = new po(e)),
            (this.m_VoiceChatStore = new Ao(this.m_SettingsStore));
        }
        return (
          (o.prototype.InitInternal = function(e, t, n) {
            var o = this;
            void 0 === n && (n = []),
              (this.m_CMInterface = e),
              (this.m_NotificationManager = t);
            var i = this.m_FriendStore.Init(e),
              r = this.m_ChatStore.Init(e, this.m_VoiceChatStore),
              a = this.InitAdjustClockDriftFromServer();
            this.m_VoiceChatStore.Init(e),
              this.m_SettingsStore.Init(e),
              this.m_AppInfoStore.Init(e),
              this.m_UIStore.Init(),
              this.m_EconomyStore.Init(e),
              this.m_ParentalStore.Init(e),
              this.m_BroadcastStore.Init(e),
              this.m_GroupMemberStore.Init();
            var s = function() {
              o.SetReadyToRender();
            };
            Promise.all([i, r, a].concat(n)).then(s, s);
          }),
          Object.defineProperty(o.prototype, "CMInterface", {
            get: function() {
              return this.m_CMInterface;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "FriendStore", {
            get: function() {
              return this.m_FriendStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "ChatStore", {
            get: function() {
              return this.m_ChatStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "VoiceStore", {
            get: function() {
              return this.m_VoiceChatStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "UIStore", {
            get: function() {
              return this.m_UIStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "SettingsStore", {
            get: function() {
              return this.m_SettingsStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "AppInfoStore", {
            get: function() {
              return this.m_AppInfoStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "Storage", {
            get: function() {
              return this.m_Storage;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "NotificationManager", {
            get: function() {
              return this.m_NotificationManager;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "EconomyStore", {
            get: function() {
              return this.m_EconomyStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "ParentalStore", {
            get: function() {
              return this.m_ParentalStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "BroadcastStore", {
            get: function() {
              return this.m_BroadcastStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(o.prototype, "GroupMemberStore", {
            get: function() {
              return this.m_GroupMemberStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          (o.prototype.SetReadyToRender = function() {
            return R.b(this, void 0, void 0, function() {
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return this.m_bReadyToRender
                      ? [3, 2]
                      : ((this.m_bReadyToRender = !0),
                        [4, this.OnReadyToRender()]);
                  case 1:
                    e.sent(), (e.label = 2);
                  case 2:
                    return [2];
                }
              });
            });
          }),
          Object.defineProperty(o.prototype, "ready_to_render", {
            get: function() {
              return this.m_bReadyToRender;
            },
            enumerable: !0,
            configurable: !0
          }),
          (o.prototype.GetStartupTime = function() {
            return o.sm_msStartup;
          }),
          (o.prototype.ShowFriendChatDialog = function(e, t, n) {
            return (
              void 0 === n && (n = !0),
              this.UIStore.ShowFriendChatDialog(e, t, n, n)
            );
          }),
          (o.prototype.GetDefaultBrowserContext = function() {
            return this.m_BrowserContextDefaultTarget;
          }),
          (o.prototype.SetDefaultPopupContext = function(e) {
            console.log("Set default popup context: " + e.m_unPID),
              (this.m_BrowserContextDefaultTarget = e);
          }),
          (o.prototype.InitAdjustClockDriftFromServer = function() {
            return R.b(this, void 0, void 0, function() {
              var t = this;
              return R.e(this, function(e) {
                return [
                  2,
                  new Promise(function(n, o) {
                    t.m_CMInterface.RunWhenLoggedOn(function() {
                      return R.b(t, void 0, void 0, function() {
                        var t = this;
                        return R.e(this, function(e) {
                          switch (e.label) {
                            case 0:
                              return (
                                e.trys.push([0, 2, , 3]),
                                [
                                  4,
                                  Object(m.when)(
                                    function() {
                                      return t.m_CMInterface.BPerformedInitialClockAdjustment();
                                    },
                                    { timeout: 1e3 }
                                  )
                                ]
                              );
                            case 1:
                              return e.sent(), n(), [3, 3];
                            case 2:
                              return (
                                e.sent(),
                                console.warn(
                                  "Timed out waiting for initial server clock drift adjustment"
                                ),
                                o(),
                                [3, 3]
                              );
                            case 3:
                              return [2];
                          }
                        });
                      });
                    });
                  })
                ];
              });
            });
          }),
          (o.prototype.GetServerTimeMS = function() {
            return this.m_CMInterface.GetServerTimeMS();
          }),
          (o.prototype.GetServerRTime32 = function() {
            return this.m_CMInterface.GetServerRTime32();
          }),
          (o.prototype.RTime32ToDate = function(e) {
            return this.m_CMInterface.RTime32ToDate(e);
          }),
          (o.prototype.GetLocalMidnightInRTime32 = function(e) {
            void 0 === o.sm_tzOffset &&
              ((o.sm_tzOffset = 60 * new Date().getTimezoneOffset()),
              AssertMsg(
                o.sm_tzOffset || 0 === o.sm_tzOffset,
                "Computed invalid timezone offset " + o.sm_tzOffset
              ));
            var t = o.sm_tzOffset || 0,
              n = (e || this.m_CMInterface.GetServerRTime32()) - t;
            return 86400 * Math.floor(n / 86400) + t;
          }),
          (o.prototype.IsInBeta = function() {
            return G.a.FRIENDSUI_BETA;
          }),
          (o.prototype.BIsValidBrowserContext = function(e) {
            return zo(e, qo);
          }),
          (o.prototype.ShowCloseActiveVoiceConfirmation = function(e, t) {}),
          (o.sm_msStartup = performance.now()),
          R.c([m.observable], o.prototype, "m_bReadyToRender", void 0),
          R.c([m.computed], o.prototype, "ready_to_render", null),
          o
        );
      })(),
      Yo = void 0,
      Jo = n("Si88"),
      Xo = n("UnXY"),
      Qo = n("e2SU"),
      Zo = n("8o0Y"),
      $o = n("G+3Z");
    function ei(e) {
      return e.children;
    }
    var ti = (function(t) {
      function e() {
        var e = (null !== t && t.apply(this, arguments)) || this;
        return (e.m_coordinator = new oi()), e;
      }
      return (
        R.d(e, t),
        (e.prototype.OnDrop = function(e, t) {
          e < t && t--, t != e && this.props.onReorder(e, t);
        }),
        (e.prototype.render = function() {
          var o = this,
            i = [];
          return (
            i.push(
              ve.createElement(si, {
                coordinator: this.m_coordinator,
                key: "dropregion_top",
                index: 0,
                onDrop: this.OnDrop
              })
            ),
            ve.Children.forEach(this.props.children, function(e, t) {
              var n = e.props.id || "__list_" + t;
              i.push(
                ve.createElement(
                  ii,
                  { coordinator: o.m_coordinator, data: t, key: n },
                  e
                )
              ),
                i.push(
                  ve.createElement(si, {
                    coordinator: o.m_coordinator,
                    key: "dropregion_" + n,
                    index: t + 1,
                    onDrop: o.OnDrop
                  })
                );
            }),
            ve.createElement("div", { className: "DialogReorderableList" }, i)
          );
        }),
        R.c([M.a], e.prototype, "OnDrop", null),
        e
      );
    })(ve.Component);
    function ni(e) {
      if ("touches" in e) {
        var t = e;
        return [t.touches[0].clientX, t.touches[0].clientY];
      }
      var n = e;
      return [n.clientX, n.clientY];
    }
    var oi = (function() {
        function e() {
          (this.m_embeddedElement = new $o.a("DragGhosts")),
            (this.m_rgDropRegions = []),
            (this.m_rgActiveDropRegions = []);
        }
        return (
          (e.prototype.RegisterDropRegion = function(e) {
            this.m_rgDropRegions.push(e);
          }),
          (e.prototype.UnregisterDropRegion = function(e) {
            w.c(this.m_rgDropRegions, e);
          }),
          (e.prototype.OnDragGhostRef = function(e) {
            this.m_dragGhost = e;
          }),
          (e.prototype.OnDragStart = function(e) {
            (this.m_activeDraggable = e), (this.m_rgActiveDropRegions = []);
            for (var t = 0, n = this.m_rgDropRegions; t < n.length; t++) {
              var o = n[t];
              o.BAcceptDraggable(e) &&
                (o.OnDragStarted(e), this.m_rgActiveDropRegions.push(o));
            }
            this.m_embeddedElement.ShowElement(
              e.GetDragDocument(),
              ve.cloneElement(e.renderDragGhost(), {
                ref: this.OnDragGhostRef
              }),
              e
            );
          }),
          (e.prototype.EndDrag = function() {
            if (this.m_activeDraggable) {
              this.m_embeddedElement.HideElement(
                this.m_activeDraggable.GetDragDocument(),
                this.m_activeDraggable
              ),
                this.m_activeDropRegion &&
                  this.m_activeDropRegion.OnDrop(this.m_activeDraggable);
              for (
                var e = 0, t = this.m_rgActiveDropRegions;
                e < t.length;
                e++
              ) {
                t[e].OnDragEnded(this.m_activeDraggable);
              }
              (this.m_activeDraggable = void 0),
                (this.m_dropGhost = void 0),
                (this.m_rgActiveDropRegions = []);
            }
          }),
          (e.prototype.OnDrag = function(e, t) {
            var n = ni(t),
              o = n[0],
              i = n[1];
            if (
              this.m_activeDropRegion &&
              this.m_activeDropRegion.BDraggableInRegion(
                o,
                i,
                this.m_activeDraggable
              )
            )
              this.m_activeDropRegion.OnDragMove(o, i, this.m_activeDraggable);
            else {
              this.m_activeDropRegion &&
                (this.m_activeDropRegion.OnDragLeave(this.m_activeDraggable),
                (this.m_activeDropRegion = void 0));
              for (
                var r = 0, a = this.m_rgActiveDropRegions;
                r < a.length;
                r++
              ) {
                var s = a[r];
                if (s.BDraggableInRegion(o, i, this.m_activeDraggable))
                  return (
                    (this.m_activeDropRegion = s),
                    this.m_dragGhost &&
                      this.m_dragGhost.state.bVisible &&
                      this.m_dragGhost.setState({ bVisible: !1 }),
                    this.m_dropGhost ||
                      (this.m_dropGhost = this.m_activeDraggable.renderDropGhost()),
                    void this.m_activeDropRegion.OnDragEnter(
                      this.m_activeDraggable,
                      this.m_dropGhost
                    )
                  );
              }
              this.m_dragGhost &&
                this.m_dragGhost.setState({
                  clientX: o,
                  clientY: i,
                  bVisible: !0
                });
            }
          }),
          R.c([M.a], e.prototype, "OnDragGhostRef", null),
          e
        );
      })(),
      ii = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_DragInfo = {
              bStarted: !1,
              startClientX: void 0,
              startClientY: void 0,
              startOffsetX: void 0,
              startOffsetY: void 0,
              startWidth: void 0,
              startHeight: void 0,
              ownerWin: void 0
            }),
            (t.state = { bInDrag: !1 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.GetDragDocument = function() {
            return (
              this.m_DragInfo.ownerWin && this.m_DragInfo.ownerWin.document
            );
          }),
          (e.prototype.RecordDragStart = function(e, t, n) {
            (this.m_DragInfo.startClientX = t),
              (this.m_DragInfo.startClientY = n);
            var o = e.getBoundingClientRect();
            (this.m_DragInfo.startOffsetX = t - o.left),
              (this.m_DragInfo.startOffsetY = n - o.top),
              (this.m_DragInfo.startWidth = o.width),
              (this.m_DragInfo.startHeight = o.height),
              (this.m_DragInfo.ownerWin = e.ownerDocument.defaultView);
          }),
          (e.prototype.ProcessDragMove = function(e) {
            if (this.m_DragInfo.bStarted)
              this.props.coordinator.OnDrag(this, e);
            else {
              var t = ni(e),
                n = t[0],
                o = t[1];
              25 <=
                Math.pow(n - this.m_DragInfo.startClientX, 2) +
                  Math.pow(o - this.m_DragInfo.startClientY, 2) &&
                ((this.m_DragInfo.bStarted = !0),
                this.forceUpdate(),
                this.props.coordinator.OnDragStart(this),
                this.props.coordinator.OnDrag(this, e));
            }
          }),
          (e.prototype.OnMouseDown = function(e) {
            this.m_DragInfo.bStarted ||
              (this.RecordDragStart(e.currentTarget, e.clientX, e.clientY),
              this.m_DragInfo.ownerWin.addEventListener(
                "mousemove",
                this.ProcessDragMove
              ),
              this.m_DragInfo.ownerWin.addEventListener(
                "mouseup",
                this.OnMouseUp
              ));
          }),
          (e.prototype.OnMouseUp = function(e) {
            this.m_DragInfo.ownerWin.removeEventListener(
              "mousemove",
              this.ProcessDragMove
            ),
              this.m_DragInfo.ownerWin.removeEventListener(
                "mouseup",
                this.OnMouseUp
              ),
              this.ResetDragState();
          }),
          (e.prototype.OnTouchStart = function(e) {
            this.m_DragInfo.bStarted ||
              (this.RecordDragStart(
                e.currentTarget,
                e.touches[0].clientX,
                e.touches[0].clientY
              ),
              this.m_DragInfo.ownerWin.addEventListener(
                "touchmove",
                this.ProcessDragMove
              ),
              this.m_DragInfo.ownerWin.addEventListener(
                "touchend",
                this.OnTouchEnd
              ));
          }),
          (e.prototype.OnTouchEnd = function(e) {
            this.m_DragInfo.ownerWin.removeEventListener(
              "touchmove",
              this.ProcessDragMove
            ),
              this.m_DragInfo.ownerWin.removeEventListener(
                "touchend",
                this.OnTouchEnd
              ),
              this.ResetDragState();
          }),
          (e.prototype.ResetDragState = function() {
            this.m_DragInfo.bStarted && this.props.coordinator.EndDrag(),
              (this.m_DragInfo.bStarted = !1),
              (this.m_DragInfo.startClientX = void 0),
              (this.m_DragInfo.startClientY = void 0),
              (this.m_DragInfo.startOffsetX = void 0),
              (this.m_DragInfo.startOffsetY = void 0),
              (this.m_DragInfo.ownerWin = void 0),
              this.forceUpdate();
          }),
          (e.prototype.render = function() {
            var e,
              t = "DialogDraggable";
            return (
              this.m_DragInfo.bStarted
                ? ((e = {}), (t += " DraggedOut"))
                : (e = {
                    onMouseDown: this.OnMouseDown,
                    onTouchStart: this.OnTouchStart
                  }),
              ve.createElement(
                "div",
                R.a({ className: t }, e),
                this.props.children
              )
            );
          }),
          (e.prototype.renderDropGhost = function() {
            return ve.createElement(ri, { elContent: this.GetClone() });
          }),
          (e.prototype.renderDragGhost = function() {
            return ve.createElement(ai, {
              elContent: this.GetClone(),
              offsetX: this.m_DragInfo.startOffsetX,
              offsetY: this.m_DragInfo.startOffsetY,
              width: this.m_DragInfo.startWidth,
              height: this.m_DragInfo.startHeight
            });
          }),
          (e.prototype.GetClone = function() {
            var e,
              t = W.findDOMNode(this);
            if (t && t.childElementCount)
              if (1 == t.childElementCount)
                e = t.firstElementChild.cloneNode(!0);
              else {
                e = document.createElement("div");
                for (var n = t.firstChild; n; n = n.nextSibling)
                  e.appendChild(n.cloneNode(!0));
              }
            return e;
          }),
          R.c([M.a], e.prototype, "ProcessDragMove", null),
          R.c([M.a], e.prototype, "OnMouseDown", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([M.a], e.prototype, "OnTouchStart", null),
          R.c([M.a], e.prototype, "OnTouchEnd", null),
          e
        );
      })(ve.Component),
      ri = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnRef = function(e) {
            e && e.appendChild(this.props.elContent);
          }),
          (t.prototype.render = function() {
            return ve.createElement("div", {
              className: "DialogDraggable_DropGhost",
              ref: this.OnRef
            });
          }),
          R.c([M.a], t.prototype, "OnRef", null),
          t
        );
      })(ve.Component),
      ai = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = { clientX: void 0, clientY: void 0, bVisible: !0 }), t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnRef = function(e) {
            e && e.appendChild(this.props.elContent);
          }),
          (e.prototype.render = function() {
            if (
              !this.state.bVisible ||
              void 0 === this.state.clientX ||
              void 0 === this.state.clientY
            )
              return ve.createElement("div", null);
            var e = {
              left: this.state.clientX - (this.props.offsetX || 0),
              top: this.state.clientY - (this.props.offsetY || 0),
              width: this.props.width || "auto",
              height: this.props.height || "auto"
            };
            return ve.createElement("div", {
              className: "DialogDraggable_DragGhost",
              style: e,
              ref: this.OnRef
            });
          }),
          R.c([M.a], e.prototype, "OnRef", null),
          e
        );
      })(ve.Component),
      si = (function(t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OnDrop = function(e) {
            t.prototype.OnDrop.call(this, e),
              this.props.onDrop(e.props.data, this.props.index);
          }),
          (e.prototype.BDraggableInRegion = function(e, t, n) {
            var o = this.GetClientRect();
            return (
              !!o &&
              (e >= o.left &&
                e <= o.right &&
                t >= o.top - 20 &&
                t <= o.bottom + 20)
            );
          }),
          (e.prototype.BAcceptDraggable = function(e) {
            return e.props.data != this.props.index;
          }),
          e
        );
      })(
        (function(n) {
          function e(e) {
            var t = n.call(this, e) || this;
            return (t.state = {}), t;
          }
          return (
            R.d(e, n),
            (e.prototype.componentDidMount = function() {
              this.props.coordinator.RegisterDropRegion(this);
            }),
            (e.prototype.componentWillUnmount = function() {
              this.props.coordinator.UnregisterDropRegion(this);
            }),
            (e.prototype.OnDragStarted = function(e) {
              this.setState({ bDraggableActive: !0 });
            }),
            (e.prototype.OnDragEnded = function(e) {
              this.setState({ bDraggableActive: !1 });
            }),
            (e.prototype.OnDragEnter = function(e, t) {
              this.setState({ dropGhost: t });
            }),
            (e.prototype.OnDragLeave = function(e) {
              this.setState({ dropGhost: void 0 });
            }),
            (e.prototype.OnDragMove = function(e, t, n) {}),
            (e.prototype.OnDrop = function(e) {
              this.setState({ dropGhost: void 0 });
            }),
            (e.prototype.BAcceptDraggable = function(e) {
              return !0;
            }),
            (e.prototype.BDraggableInRegion = function(e, t, n) {
              var o = this.GetClientRect();
              return (
                !!o &&
                (e >= o.left && e <= o.right && t >= o.top && t <= o.bottom)
              );
            }),
            (e.prototype.GetClientRect = function() {
              return (
                this.m_elDropRegion ||
                  (this.m_elDropRegion = W.findDOMNode(this)),
                this.m_elDropRegion &&
                  this.m_elDropRegion.getBoundingClientRect()
              );
            }),
            (e.prototype.render = function() {
              var e = "DialogDropRegion";
              return (
                this.state.bDraggableActive && (e += " Active"),
                ve.createElement("div", { className: e }, this.state.dropGhost)
              );
            }),
            e
          );
        })(ve.Component)
      ),
      ci = n("/IDK"),
      li = (function() {
        function e(e, t) {
          (this.m_bActive = !1),
            (this.m_fnBoundAnimationFunc = void 0),
            (this.m_window = e),
            (this.m_options = Object.assign({ timing: "sine" }, t));
        }
        return (
          (e.prototype.Start = function() {
            var e;
            switch (((this.m_msStart = performance.now()),
            (this.m_msEnd = this.m_msStart + this.m_options.msDuration),
            this.m_options.timing)) {
              case "linear":
                e = function(e) {
                  return e;
                };
                break;
              case "cubic-in-out":
                e = function(e) {
                  return e < 0.5
                    ? 4 * e * e * e
                    : (e - 1) * (2 * e - 2) * (2 * e - 2) + 1;
                };
                break;
              case "sine":
              default:
                e = function(e) {
                  return 0.5 - Math.cos(e * Math.PI) / 2;
                };
            }
            (this.m_bActive = !0),
              (this.m_fnBoundAnimationFunc = this.OnInterval.bind(this, e)),
              this.m_window.requestAnimationFrame(this.m_fnBoundAnimationFunc);
          }),
          (e.prototype.BIsActive = function() {
            return this.m_bActive;
          }),
          (e.prototype.End = function() {
            this.m_bActive &&
              (this.Update(1), this.ClearInterval(), this.FireOnComplete());
          }),
          (e.prototype.FireOnComplete = function() {
            this.m_options.onComplete && this.m_options.onComplete();
          }),
          (e.prototype.Cancel = function() {
            this.m_bActive = !1;
          }),
          (e.prototype.OnInterval = function(e) {
            if (this.m_bActive) {
              var t = performance.now() - this.m_msStart;
              if (t >= this.m_options.msDuration) this.End();
              else {
                var n = t / this.m_options.msDuration;
                this.Update(e(n)),
                  this.m_window.requestAnimationFrame(
                    this.m_fnBoundAnimationFunc
                  );
              }
            }
          }),
          (e.prototype.ClearInterval = function() {
            this.m_bActive = !1;
          }),
          e
        );
      })(),
      pi = (function(i) {
        function e(e, t, n) {
          var o = i.call(this, ci.k(e), n) || this;
          return (o.m_props = {}), (o.m_object = e), (o.m_propTargets = t), o;
        }
        return (
          R.d(e, i),
          (e.prototype.Start = function() {
            for (var e in ((this.m_props = {}), this.m_propTargets)) {
              var t = parseFloat(this.m_object[e]) || 0,
                n = this.m_propTargets[e];
              t != n && (this.m_props[e] = { start: t, end: n });
            }
            i.prototype.Start.call(this);
          }),
          (e.prototype.Update = function(e) {
            for (var t in this.m_props) {
              var n = this.m_props[t],
                o = n.start + (n.end - n.start) * e;
              this.m_object[t] = o;
            }
          }),
          e
        );
      })(li),
      ui = (function(i) {
        function e(e, t, n) {
          var o = i.call(this, ci.k(W.findDOMNode(e)), n) || this;
          return (
            (o.m_props = {}),
            (o.m_component = e),
            (o.m_propTargets = t),
            (o.m_setStateOnComplete = n.setStateOnComplete),
            o
          );
        }
        return (
          R.d(e, i),
          (e.prototype.Start = function() {
            for (var e in ((this.m_props = {}), this.m_propTargets)) {
              var t = parseFloat(this.m_component.state[e]) || 0,
                n = this.m_propTargets[e];
              t != n && (this.m_props[e] = { start: t, end: n });
            }
            i.prototype.Start.call(this);
          }),
          (e.prototype.Update = function(e) {
            var t = {};
            for (var n in this.m_props) {
              var o = this.m_props[n],
                i = o.start + (o.end - o.start) * e;
              t[n] = i;
            }
            this.m_component.setState(t);
          }),
          (e.prototype.FireOnComplete = function() {
            i.prototype.FireOnComplete.call(this),
              this.m_setStateOnComplete &&
                this.m_component.setState(this.m_setStateOnComplete);
          }),
          e
        );
      })(li),
      mi = Ui("DialogHeader"),
      di = Ui("DialogFooter"),
      hi = Ui("DialogLabel _DialogLayout"),
      _i = Ui("DialogBodyText"),
      fi = Ui("DialogBody"),
      gi = Ui("DialogInnerBody"),
      bi = Ui("DialogBodyNotificationBar"),
      vi = Ui("DialogTwoColLayout _DialogColLayout"),
      Si = Ui("DialogThreeColLayout _DialogColLayout"),
      yi = (Ui("DialogTwoThirdColLayout _DialogColLayout"),
      Ui("DialogColumn _DialogLayout"));
    function Ci(e) {
      var t = e.children,
        n = e.bCenterVertically,
        o = R.f(e, ["children", "bCenterVertically"]),
        i =
          "DialogContent _DialogLayout" +
          (e.className ? " " + e.className : "");
      return (
        n && (i += " _DialogCenterVertically"),
        ve.createElement(
          "div",
          R.a({}, o, { className: i }),
          ve.createElement("div", { className: "DialogContent_InnerWidth" }, t)
        )
      );
    }
    var Ii = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.OnSubmit = function(e) {
          e.preventDefault(), this.props.onSubmit && this.props.onSubmit(e);
        }),
        (t.prototype.render = function() {
          return ve.createElement(
            "form",
            R.a({}, this.props, { onSubmit: this.OnSubmit })
          );
        }),
        R.c([M.a], t.prototype, "OnSubmit", null),
        t
      );
    })(ve.Component);
    function Oi(e) {
      var t = e.classNameContent,
        n = e.bCenterVertically,
        o = R.f(e, ["classNameContent", "bCenterVertically"]);
      return ve.createElement(
        Ci,
        { className: t, bCenterVertically: n },
        ve.createElement(Ii, R.a({}, o))
      );
    }
    function Ei(e) {
      e.svgicon;
      var t,
        n = R.f(e, ["svgicon"]),
        o =
          "DialogButton _DialogLayout Primary" +
          (e.className ? " " + e.className : ""),
        i = void 0 !== e.svgicon;
      return (
        i && ((o += " hasSVGIcon"), (t = e.svgicon)),
        ve.createElement(
          "button",
          R.a({ type: e.onClick ? "button" : "submit" }, n, { className: o }),
          i && ve.createElement(t, null),
          e.children
        )
      );
    }
    function wi(e) {
      e.svgicon;
      var t,
        n = R.f(e, ["svgicon"]),
        o =
          "DialogButton _DialogLayout Secondary" +
          (e.className ? " " + e.className : ""),
        i = void 0 !== e.svgicon;
      return (
        i && ((o += " hasSVGIcon"), (t = e.svgicon)),
        ve.createElement(
          "button",
          R.a({ type: "button" }, n, { className: o }),
          i && ve.createElement(t, null),
          e.children
        )
      );
    }
    function Mi(e) {
      e.svgicon;
      var t,
        n = R.f(e, ["svgicon"]),
        o = "TextButton" + (e.className ? " " + e.className : ""),
        i = void 0 !== e.svgicon;
      return (
        i && ((o += " hasSVGIcon"), (t = e.svgicon)),
        ve.createElement(
          "button",
          R.a({ type: "button" }, n, { className: o }),
          i && ve.createElement(t, null),
          e.children
        )
      );
    }
    function Di(e) {
      var t = "DialogHBar" + (e.className ? " " + e.className : "");
      return ve.createElement("div", R.a({}, e, { className: t }));
    }
    function Ti(e) {
      return ve.createElement(
        vi,
        null,
        ve.createElement(
          Ei,
          { onClick: e.onOK, disabled: e.bOKDisabled },
          e.strOKText || Object(re.b)("#Button_Confirm"),
          " "
        ),
        ve.createElement(
          wi,
          { onClick: e.onCancel },
          e.strCancelText || Object(re.b)("#Button_Cancel")
        )
      );
    }
    var Gi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              m_CopiedYPos: 0,
              m_bPlayingCopiedAnimation: !1,
              m_bCompletedCopiedAnimation: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnInputRef = function(e) {
            this.m_elInput = e;
          }),
          Object.defineProperty(e.prototype, "element", {
            get: function() {
              return this.m_elInput;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "value", {
            get: function() {
              return this.m_elInput && this.m_elInput.value;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnCopyClick = function(e) {
            var t = this;
            if (this.m_elInput) {
              this.m_elInput.select();
              var n = this.m_elInput.ownerDocument;
              if (n.queryCommandEnabled("copy")) {
                n.execCommand("copy"),
                  e.currentTarget.focus(),
                  this.m_CopiedAnimation && this.m_CopiedAnimation.Cancel();
                this.state.m_bPlayingCopiedAnimation;
                this.setState({ m_bCompletedCopiedAnimation: !1 }),
                  this.setState({ m_CopiedYPos: -4 }, function() {
                    (t.m_CopiedAnimation = new ui(
                      t,
                      { m_CopiedYPos: -24 },
                      {
                        msDuration: 300,
                        timing: "sine",
                        setStateOnComplete: { m_bCompletedCopiedAnimation: !0 }
                      }
                    )),
                      t.m_CopiedAnimation.Start();
                  });
              }
            }
          }),
          (e.prototype.OnClearClick = function(e) {
            this.m_elInput &&
              this.m_elInput.value &&
              (Object.getOwnPropertyDescriptor(
                window.HTMLInputElement.prototype,
                "value"
              ).set.call(this.m_elInput, ""),
              this.m_elInput.dispatchEvent(
                new Event("input", { bubbles: !0 })
              ));
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            AssertMsg(
              !e.bShowClearAction || e.onChange,
              "In order for bShowClearAction to work correctly, you should be handling onChange and passing value to the Dialog.Input."
            );
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.label,
              n = e.explainer,
              o = e.bShowCopyAction,
              i = e.bShowClearAction,
              r = R.f(e, [
                "label",
                "explainer",
                "bShowCopyAction",
                "bShowClearAction"
              ]),
              a =
                "DialogInput DialogInputPlaceholder _DialogTextInputBase" +
                (r.className ? " " + r.className : ""),
              s = "copiedAnimation",
              c = this.state.m_bCompletedCopiedAnimation;
            this.m_CopiedAnimation && (s = "copiedAnimation animationPlaying"),
              c && (s = "copiedAnimation animationComplete");
            var l = {};
            void 0 !== this.state.m_CopiedYPos &&
              (l.transform = "translateY(" + this.state.m_CopiedYPos + "px)");
            var p = void 0;
            n &&
              (p = ve.createElement(
                "div",
                { className: "DialogLabelExplainer" },
                n
              ));
            var u = ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                "div",
                { className: "DialogInput_Wrapper _DialogLayout" },
                ve.createElement(
                  "input",
                  R.a({ type: "text" }, r, {
                    className: a,
                    ref: this.OnInputRef
                  })
                ),
                o &&
                  ve.createElement(
                    "div",
                    { className: "displayRow" },
                    ve.createElement(
                      wi,
                      {
                        className: "DialogInput_CopyAction Primary",
                        onClick: this.OnCopyClick
                      },
                      Object(re.b)("#Button_CopyLink")
                    ),
                    ve.createElement(
                      "div",
                      { style: l, className: s },
                      "Link Copied"
                    )
                  ),
                i &&
                  r.value &&
                  ve.createElement(
                    "div",
                    {
                      className: "DialogInput_ClearAction",
                      onClick: this.OnClearClick
                    },
                    ve.createElement(Qo.eb, null)
                  )
              ),
              p
            );
            return t
              ? ve.createElement(
                  "div",
                  { className: "DialogInputLabelGroup _DialogLayout " },
                  ve.createElement(
                    "label",
                    null,
                    ve.createElement(
                      "div",
                      { className: "DialogLabel" },
                      t,
                      " ",
                      ve.createElement(
                        "span",
                        { className: "DialogInputRequirementLabel" },
                        this.props.requiredLabel
                      ),
                      " "
                    ),
                    u
                  )
                )
              : u;
          }),
          R.c([M.a], e.prototype, "OnInputRef", null),
          R.c([M.a], e.prototype, "OnCopyClick", null),
          R.c([M.a], e.prototype, "OnClearClick", null),
          e
        );
      })(ve.PureComponent),
      Ri = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnBackgroundClick = function() {
            this.m_elInput && this.m_elInput.focus();
          }),
          (t.prototype.OnInputFocus = function(e) {
            this.m_bFocused || ((this.m_bFocused = !0), this.forceUpdate()),
              this.props.onFocus && this.props.onFocus(e);
          }),
          (t.prototype.OnInputBlur = function(e) {
            this.m_bFocused && ((this.m_bFocused = !1), this.forceUpdate()),
              this.props.onBlur && this.props.onBlur(e);
          }),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.label,
              n = e.explainer,
              o = e.children,
              i = (e.className,
              R.f(e, ["label", "explainer", "children", "className"]));
            return ve.createElement(
              "div",
              {
                className:
                  "DialogInputLabelGroup _DialogLayout DialogListBuilderInput"
              },
              ve.createElement(
                "label",
                null,
                t && ve.createElement("div", { className: "DialogLabel" }, t),
                ve.createElement(
                  "div",
                  {
                    className:
                      "_DialogInputContainer" +
                      (this.m_bFocused ? " Active" : ""),
                    onClick: this.OnBackgroundClick
                  },
                  ve.createElement(
                    "div",
                    { className: "DialogListBuilderInput_List" },
                    ve.Children.map(o, function(e, t) {
                      return ve.createElement(
                        "div",
                        {
                          className: "DialogListBuilderInput_ListItem",
                          key: t
                        },
                        e
                      );
                    }),
                    ve.createElement(
                      "input",
                      R.a({ type: "text" }, i, {
                        className:
                          "DialogListBuilderInput_Input DialogInputPlaceholder",
                        ref: this.OnInputRef,
                        onFocus: this.OnInputFocus,
                        onBlur: this.OnInputBlur,
                        size: 4
                      })
                    )
                  )
                ),
                this.props.explainer &&
                  ve.createElement(
                    "div",
                    { className: "DialogLabelExplainer" },
                    n
                  )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnBackgroundClick", null),
          R.c([M.a], t.prototype, "OnInputFocus", null),
          R.c([M.a], t.prototype, "OnInputBlur", null),
          t
        );
      })(Gi),
      Ni = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { checked: e.checked, disabled: e.disabled }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.checked != this.state.checked &&
              this.setState({ checked: e.checked }),
              e.disabled != this.state.disabled &&
                this.setState({ disabled: e.disabled });
          }),
          (e.prototype.shouldComponentUpdate = function(e, t) {
            return (
              e.label != this.props.label ||
              e.description != this.props.description ||
              e.onChange != this.props.onChange ||
              e.disabled != this.props.disabled ||
              e.checked != this.state.checked ||
              t.checked != this.state.checked
            );
          }),
          Object.defineProperty(e.prototype, "checked", {
            get: function() {
              return this.state.checked;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Toggle = function() {
            if (!this.props.disabled) {
              var e = !this.state.checked;
              this.setState({ checked: e }),
                this.props.onChange && this.props.onChange(e);
            }
          }),
          (e.prototype.KeyDown = function(e) {
            32 == e.keyCode &&
              (this.Toggle(), e.preventDefault(), e.stopPropagation());
          }),
          R.c([M.a], e.prototype, "Toggle", null),
          R.c([M.a], e.prototype, "KeyDown", null),
          e
        );
      })(ve.Component),
      Li = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = "DialogCheckbox" + (this.state.checked ? " Active" : "");
            return (
              1 == this.state.disabled && (e += " Disabled"),
              this.props.label
                ? ve.createElement(
                    "div",
                    {
                      className:
                        "DialogCheckbox_Container _DialogLayout " +
                        (this.props.classname ? this.props.classname : ""),
                      tabIndex: this.props.tabIndex || 0,
                      onClick: this.Toggle
                    },
                    ve.createElement(
                      "div",
                      { className: e },
                      ve.createElement(Qo.i, null)
                    ),
                    ve.createElement(
                      "div",
                      { className: "DialogToggle_Label" },
                      ve.createElement("span", null, this.props.label)
                    ),
                    ve.createElement("div", { style: { clear: "left" } }),
                    this.props.description &&
                      ve.createElement(
                        "div",
                        { className: "DialogToggle_Description" },
                        this.props.description
                      )
                  )
                : ve.createElement(
                    "div",
                    {
                      className: e,
                      onClick: this.Toggle,
                      tabIndex: this.props.tabIndex || 0
                    },
                    ve.createElement(Qo.i, null)
                  )
            );
          }),
          t
        );
      })(Ni),
      ki = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.state.checked ? " Active" : "";
            return ve.createElement(
              "div",
              { className: "DialogRoundCheckbox" },
              ve.createElement(
                "div",
                {
                  className: "DialogRoundCheckbox_Control" + e,
                  onClick: this.Toggle,
                  tabIndex: this.props.tabIndex || 0
                },
                ve.createElement(
                  "div",
                  { className: "DialogRoundCheckbox_OuterCircle" },
                  ve.createElement("div", {
                    className: "DialogRoundCheckbox_InnerCircle"
                  })
                )
              )
            );
          }),
          t
        );
      })(Ni),
      Ai = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnOffKeyDown = function(e) {
            (37 == e.keyCode && this.state.checked) ||
            (39 == e.keyCode && !this.state.checked)
              ? (this.Toggle(), e.preventDefault(), e.stopPropagation())
              : this.KeyDown(e);
          }),
          (t.prototype.render = function() {
            var e =
              "DialogOnOffToggle _DialogInputContainer _DialogLayout " +
              (this.props.classname ? this.props.classname : "");
            return (
              this.props.disabled && (e += " Disabled"),
              ve.createElement(
                "div",
                {
                  className: e,
                  tabIndex: this.props.tabIndex || 0,
                  onKeyDown: this.OnOffKeyDown
                },
                ve.createElement(
                  "div",
                  { className: "displayColumn alignSelfCenter" },
                  ve.createElement(
                    "div",
                    { className: "DialogToggle_Label" },
                    ve.createElement("span", null, this.props.label)
                  ),
                  this.props.description &&
                    ve.createElement(
                      "div",
                      { className: "DialogToggle_Description" },
                      this.props.description
                    ),
                  this.props.children
                ),
                ve.createElement(
                  "div",
                  {
                    className: "DialogOnOffToggle_Control",
                    onClick: this.Toggle
                  },
                  ve.createElement(
                    "div",
                    {
                      className:
                        "DialogOnOffToggle_Option Off" +
                        (this.state.checked ? "" : " Active")
                    },
                    Object(re.b)("#Dialog_Off")
                  ),
                  ve.createElement(
                    "div",
                    {
                      className:
                        "DialogOnOffToggle_Option On" +
                        (this.state.checked ? " Active" : "")
                    },
                    Object(re.b)("#Dialog_On")
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnOffKeyDown", null),
          t
        );
      })(Ni),
      Pi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { value: t.ClampValue(e.value) }), t;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "value", {
            get: function() {
              return this.state.value;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClampValue = function(e) {
            return void 0 === e || isNaN(e) || e < this.props.min
              ? this.props.min
              : e > this.props.max ? this.props.max : e;
          }),
          (e.prototype.BPropsValid = function() {
            return this.props.max > this.props.min;
          }),
          (e.prototype.shouldComponentUpdate = function(e, t) {
            return (
              t.value != this.state.value ||
              (e.max !== this.props.max ||
                e.min !== this.props.min ||
                (e.value !== this.state.value &&
                  e.value !== this.props.value) ||
                e.onChange !== this.props.onChange)
            );
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.value != this.props.value && this.setState({ value: e.value });
          }),
          (e.prototype.OnMouseDown = function(e) {
            (this.m_elSlider = e.currentTarget),
              (this.m_rectSlider = this.m_elSlider.getBoundingClientRect()),
              this.AdjustSliderForClientX(e.clientX),
              this.m_elSlider.ownerDocument.defaultView.addEventListener(
                "mousemove",
                this.OnMouseMove
              ),
              this.m_elSlider.ownerDocument.defaultView.addEventListener(
                "mouseup",
                this.OnMouseUp
              );
          }),
          (e.prototype.OnMouseMove = function(e) {
            this.AdjustSliderForClientX(e.clientX);
          }),
          (e.prototype.OnMouseUp = function(e) {
            this.m_elSlider.ownerDocument.defaultView.removeEventListener(
              "mousemove",
              this.OnMouseMove
            ),
              this.m_elSlider.ownerDocument.defaultView.removeEventListener(
                "mouseup",
                this.OnMouseUp
              );
          }),
          (e.prototype.OnTouchStart = function(e) {
            (this.m_elSlider = e.currentTarget),
              (this.m_rectSlider = this.m_elSlider.getBoundingClientRect()),
              this.AdjustSliderForClientX(e.touches[0].clientX),
              this.m_elSlider.ownerDocument.defaultView.addEventListener(
                "touchmove",
                this.OnTouchMove
              ),
              this.m_elSlider.ownerDocument.defaultView.addEventListener(
                "touchend",
                this.OnTouchEnd
              );
          }),
          (e.prototype.OnTouchMove = function(e) {
            this.AdjustSliderForClientX(e.touches[0].clientX);
          }),
          (e.prototype.OnTouchEnd = function(e) {
            this.m_elSlider.ownerDocument.defaultView.removeEventListener(
              "touchmove",
              this.OnTouchMove
            ),
              this.m_elSlider.ownerDocument.defaultView.removeEventListener(
                "touchend",
                this.OnTouchEnd
              );
          }),
          (e.prototype.OnKeyDown = function(e) {
            var t = 1;
            e.ctrlKey &&
              (t = Math.max(
                1,
                Math.floor(0.1 * (this.props.max - this.props.min) + 0.5)
              )),
              37 == e.keyCode
                ? (this.IncrementValue(-1 * t), e.preventDefault())
                : 39 == e.keyCode &&
                  (this.IncrementValue(1 * t), e.preventDefault());
          }),
          (e.prototype.AdjustSliderForClientX = function(e) {
            var t =
              (e - this.m_rectSlider.left) /
              (this.m_rectSlider.right - this.m_rectSlider.left) *
              (this.props.max - this.props.min);
            t = Math.floor(t + 0.5);
            var n = this.ClampValue(t);
            n != this.state.value &&
              (this.setState({ value: n }),
              this.props.onChange && this.props.onChange(n));
          }),
          (e.prototype.IncrementValue = function(e) {
            var t = this.ClampValue(this.state.value + e);
            t != this.state.value &&
              (this.setState({ value: t }),
              this.props.onChange && this.props.onChange(t));
          }),
          (e.prototype.render = function() {
            var e = {},
              t = {};
            if (this.BPropsValid()) {
              var n =
                100 *
                  (this.state.value - this.props.min) /
                  (this.props.max - this.props.min) +
                "%";
              (e.width = n), (t.left = n);
            }
            var o = this.props,
              i = o.label,
              r = o.explainer,
              a = (R.f(o, ["label", "explainer"]), void 0);
            return (
              r &&
                (a = ve.createElement(
                  "div",
                  { className: "DialogLabelExplainer" },
                  r
                )),
              ve.createElement(
                "div",
                {
                  className:
                    "DialogSlider_Container _DialogInputContainer _DialogLayout",
                  onKeyDown: this.OnKeyDown,
                  tabIndex: this.props.tabIndex || 0
                },
                i && ve.createElement("div", { className: "DialogLabel" }, i),
                ve.createElement(
                  "div",
                  {
                    className: "DialogSlider_Slider",
                    onMouseDown: this.OnMouseDown,
                    onTouchStart: this.OnTouchStart
                  },
                  ve.createElement("div", {
                    className: "DialogSlider_Value",
                    style: e
                  }),
                  ve.createElement("div", {
                    className: "DialogSlider_Grabber",
                    style: t
                  })
                ),
                a
              )
            );
          }),
          R.c([M.a], e.prototype, "OnMouseDown", null),
          R.c([M.a], e.prototype, "OnMouseMove", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([M.a], e.prototype, "OnTouchStart", null),
          R.c([M.a], e.prototype, "OnTouchMove", null),
          R.c([M.a], e.prototype, "OnTouchEnd", null),
          R.c([M.a], e.prototype, "OnKeyDown", null),
          e
        );
      })(ve.Component),
      Fi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              iSelectedOption: t.FindActiveOptionIndex(e.selectedOption),
              bOpened: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.FindAndSetActiveOption = function(e) {
            var t = this.FindActiveOptionIndex(e);
            t !== this.state.iSelectedOption &&
              this.setState({ iSelectedOption: t });
          }),
          (e.prototype.FindActiveOptionIndex = function(e) {
            for (var t = 0; t < this.props.rgOptions.length; t++)
              if (this.props.rgOptions[t].data === e) return t;
          }),
          Object.defineProperty(e.prototype, "value", {
            get: function() {
              return void 0 !== this.state.iSelectedOption
                ? this.props.rgOptions[this.state.iSelectedOption]
                : void 0;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetSelectedOption = function(e) {
            null != e
              ? this.FindAndSetActiveOption(e)
              : this.setState({ iSelectedOption: void 0 });
          }),
          (e.prototype.shouldComponentUpdate = function(e, t, n) {
            if (e.selectedOption != this.props.selectedOption) {
              this.FindActiveOptionIndex(e.selectedOption);
              if (this.state.iSelectedOption !== t.iSelectedOption) return !0;
            }
            if (
              t.bOpened !== this.state.bOpened ||
              t.iSelectedOption !== this.state.iSelectedOption
            )
              return !0;
            for (
              var o = 0,
                i = [
                  "label",
                  "selectedOption",
                  "tabIndex",
                  "onChange",
                  "strDefaultLabel"
                ];
              o < i.length;
              o++
            ) {
              var r = i[o];
              if (e[r] !== this.props[r]) return !0;
            }
            return !(
              !this.state.bOpened || !this.didOptionsChange(e.rgOptions)
            );
          }),
          (e.prototype.didOptionsChange = function(e) {
            if (e.length != this.props.rgOptions.length) return !0;
            for (var t = 0; t < e.length; t++)
              if (e[t].label !== this.props.rgOptions[t].label) return !0;
            return !1;
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.selectedOption !== this.props.selectedOption &&
              this.FindAndSetActiveOption(e.selectedOption),
              this.didOptionsChange(e.rgOptions) &&
                (this.HideMenu(), (this.m_iMenuInstance = void 0));
          }),
          (e.prototype.OnInputRef = function(e) {
            this.m_elInput = e;
          }),
          (e.prototype.ToggleMenu = function() {
            this.state.bOpened ? this.HideMenu() : this.ShowMenu();
          }),
          (e.prototype.OnItemSelected = function(e, t) {
            this.HideMenu(),
              this.setState({ iSelectedOption: e }),
              this.props.onChange &&
                this.props.onChange(
                  void 0 !== e ? this.props.rgOptions[e] : void 0,
                  this
                );
          }),
          (e.prototype.ShowMenu = function() {
            this.m_iMenuInstance
              ? this.m_iMenuInstance.Show()
              : ((this.m_iMenuInstance = Object(Zo.a)(
                  ve.createElement(Bi, {
                    rgOptions: this.props.rgOptions,
                    fnOnItemSelected: this.OnItemSelected
                  }),
                  this.m_elInput,
                  {
                    bOverlapHorizontal: !0,
                    bMatchWidth: !0,
                    bFitToWindow: !0,
                    strClassName: "DialogMenuPosition"
                  }
                )),
                this.m_iMenuInstance.SetOnHideCallback(this.HideMenu)),
              this.setState({ bOpened: !0 });
          }),
          (e.prototype.HideMenu = function() {
            this.m_iMenuInstance && this.m_iMenuInstance.Hide(),
              this.setState({ bOpened: !1 });
          }),
          (e.prototype.render = function() {
            var e =
                void 0 !== this.state.iSelectedOption &&
                this.props.rgOptions[this.state.iSelectedOption],
              t = e ? e.label : this.props.strDefaultLabel,
              n = "DialogDropDown _DialogInputContainer",
              o = "DialogInputLabelGroup _DialogLayout";
            return (
              this.state.bOpened && (n += " Active"),
              this.props.strClassName && (o += " " + this.props.strClassName),
              ve.createElement(
                "div",
                { className: o },
                this.props.label &&
                  ve.createElement(
                    "div",
                    { className: "DialogLabel" },
                    this.props.label
                  ),
                ve.createElement(
                  "div",
                  {
                    className: n,
                    tabIndex: this.props.tabIndex || 0,
                    onClick: this.ToggleMenu,
                    ref: this.OnInputRef
                  },
                  ve.createElement(
                    "div",
                    { className: "DialogDropDown_Arrow" },
                    ve.createElement(Qo.l, null)
                  ),
                  t
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnInputRef", null),
          R.c([M.a], e.prototype, "ToggleMenu", null),
          R.c([M.a], e.prototype, "OnItemSelected", null),
          R.c([M.a], e.prototype, "ShowMenu", null),
          R.c([M.a], e.prototype, "HideMenu", null),
          e
        );
      })(ve.Component),
      Bi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { iFocus: 0 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnItemClicked = function(e) {
            var t = parseInt(
              e.currentTarget.getAttribute("data-dropdown-index")
            );
            (t || 0 === t) &&
              0 <= t &&
              t < this.props.rgOptions.length &&
              this.props.fnOnItemSelected(t, this.props.rgOptions[t]);
          }),
          (e.prototype.render = function() {
            var n = this,
              e = this.props.rgOptions.map(function(e, t) {
                return ve.createElement(
                  "div",
                  {
                    className: "DialogDropDownMenu_Item",
                    key: t,
                    "data-dropdown-index": t,
                    onClick: n.OnItemClicked
                  },
                  e.label
                );
              });
            return ve.createElement(
              "div",
              { className: "DialogDropDownMenu _DialogInputContainer" },
              e
            );
          }),
          R.c([M.a], e.prototype, "OnItemClicked", null),
          e
        );
      })(ve.Component),
      Vi = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return R.d(t, e), t;
      })(ve.Component),
      xi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { activePage: -1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnActivePageRef = function(e) {
            e instanceof Vi
              ? (this.m_ActivePage = e)
              : (AssertMsg(
                  !e,
                  'PagedSettingsDialog page "' +
                    this.GetActivePage().title +
                    '" does not derive from PagedSettingsPageComponent'
                ),
                (this.m_ActivePage = null));
          }),
          (e.prototype.GetActivePage = function() {
            return this.state.activePage < 0 ||
              this.state.activePage >= this.props.pages.length
              ? this.props.pages[0]
              : this.props.pages[this.state.activePage];
          }),
          (e.prototype.SelectPage = function(e) {
            e != this.state.activePage &&
              ((this.m_ActivePage && !this.m_ActivePage.OKToSwitchAway()) ||
                this.setState({ activePage: e }));
          }),
          (e.prototype.render = function() {
            for (
              var s = this,
                c = this.GetActivePage(),
                l = [],
                e = function(e) {
                  var t = p.props.pages[e],
                    n = t == c,
                    o = t.className || "",
                    i =
                      t.click ||
                      function() {
                        s.SelectPage(e);
                      },
                    r = ["PagedSettingsDialog_PageListItem"],
                    a = !1;
                  "ChatRoomLeave" == t.className && (a = !0),
                    n && r.push("Active"),
                    r.push(o),
                    l.push(
                      ve.createElement(
                        "div",
                        { className: r.join(" "), key: t.title, onClick: i },
                        a && ve.createElement(Qo.cb, null),
                        t.title
                      )
                    );
                },
                p = this,
                t = 0;
              t < this.props.pages.length;
              t++
            )
              e(t);
            var n = c.hideTitle,
              o = "";
            c.uniqueName && (o = " Page_" + c.uniqueName.replace(/\s/g, ""));
            var i = !1 !== c.enabled;
            return (
              i || (o += " noPermission"),
              ve.createElement(
                "div",
                {
                  className:
                    (this.props.className ? this.props.className : "") +
                    " PagedSettingsDialog"
                },
                ve.createElement(
                  "div",
                  { className: "PagedSettingsDialog_PageListColumn" },
                  ve.createElement(
                    "div",
                    { className: "PagedSettingsDialog_Title" },
                    this.props.title
                  ),
                  ve.createElement(
                    "div",
                    { className: "PagedSettingsDialog_PageList" },
                    l
                  )
                ),
                ve.createElement(
                  Xo,
                  { className: "DialogContentTransition" },
                  c &&
                    ve.createElement(
                      Jo,
                      {
                        key: c.title,
                        classNames: "opacityfade-anim",
                        timeout: 300
                      },
                      ve.createElement(
                        Ci,
                        { className: "PagedSettingsDialog_PageContent" + o },
                        !n &&
                          ve.createElement(
                            mi,
                            null,
                            c.title,
                            !i &&
                              ve.createElement(
                                bi,
                                null,
                                ve.createElement(Qo.x, null),
                                Object(re.b)("#Chat_Settings_Permission_Denied")
                              )
                          ),
                        null != c.content &&
                          ve.cloneElement(c.content, {
                            ref: this.OnActivePageRef
                          })
                      )
                    )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnActivePageRef", null),
          e
        );
      })(ve.Component);
    function Ui(n) {
      return function(e) {
        var t = n + (e.className ? " " + e.className : "");
        return ve.createElement("div", R.a({}, e, { className: t }));
      };
    }
    var ji = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bAcceptDrag = !1),
            (t.m_deferredEnter = null),
            (t.m_divElement = null),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.BindDiv = function(e) {
            this.m_divElement = e;
          }),
          Object.defineProperty(e.prototype, "div", {
            get: function() {
              return this.m_divElement;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.DeliverDeferredDragEnter = function() {
            var e = Qu.DragDropManager.GetDragData();
            return this.props.fnDragEnter(e, this.m_deferredEnter.bFiles);
          }),
          (e.prototype.OnDragEnter = function(e) {
            if (!this.m_bAcceptDrag) {
              var t = Qu.DragDropManager.GetDragData(),
                n =
                  this.props.bAcceptsFiles &&
                  -1 != e.dataTransfer.types.indexOf("Files");
              t && -1 != this.props.rgAcceptedTypes.indexOf(t.type)
                ? (this.m_bAcceptDrag = !0)
                : (this.m_bAcceptDrag = !!n),
                this.m_bAcceptDrag &&
                  this.props.fnDragEnter &&
                  (this.m_deferredEnter = { bFiles: n }),
                this.m_bAcceptDrag && (e.preventDefault(), e.stopPropagation());
            }
          }),
          (e.prototype.OnDragLeave = function(e) {
            if (this.m_bAcceptDrag) {
              if (!Object(ci.c)(e)) return;
              (this.m_bAcceptDrag = !1),
                e.preventDefault(),
                e.stopPropagation(),
                this.props.fnDragLeave && this.props.fnDragLeave();
            }
          }),
          (e.prototype.OnDragOver = function(e) {
            if (this.m_bAcceptDrag) {
              if (this.m_deferredEnter) {
                var t = this.DeliverDeferredDragEnter();
                if (((this.m_deferredEnter = null), !t))
                  return void (this.m_bAcceptDrag = !1);
              }
              e.preventDefault(),
                e.stopPropagation(),
                this.props.fnDragOver && this.props.fnDragOver(e);
            }
          }),
          (e.prototype.OnDrop = function(e) {
            if (this.m_bAcceptDrag) {
              (this.m_bAcceptDrag = !1),
                e.preventDefault(),
                e.stopPropagation();
              var t = Qu.DragDropManager.GetDragData();
              t && -1 != this.props.rgAcceptedTypes.indexOf(t.type)
                ? this.props.fnDrop && this.props.fnDrop(t, e)
                : this.props.bAcceptsFiles &&
                  0 != e.dataTransfer.files.length &&
                  this.props.fnDrop &&
                  this.props.fnDrop(null, e);
            }
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = (e.rgAcceptedTypes,
              e.bAcceptsFiles,
              e.fnDragEnter,
              e.fnDragLeave,
              e.fnDragOver,
              e.fnDrop,
              R.f(e, [
                "rgAcceptedTypes",
                "bAcceptsFiles",
                "fnDragEnter",
                "fnDragLeave",
                "fnDragOver",
                "fnDrop"
              ]));
            return ve.createElement(
              "div",
              R.a({}, t, {
                ref: this.BindDiv,
                className: "DropTarget " + this.props.className,
                onDragEnter: this.OnDragEnter,
                onDragLeave: this.OnDragLeave,
                onDragOver: this.OnDragOver,
                onDrop: this.OnDrop
              }),
              this.props.children
            );
          }),
          R.c([M.a], e.prototype, "BindDiv", null),
          R.c([M.a], e.prototype, "DeliverDeferredDragEnter", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          e
        );
      })(ve.PureComponent),
      Hi = n("okNM"),
      Wi = n("JtU4"),
      zi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { maximized: t.BIsMaximized() }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.BIsMaximized = function() {
            var e =
                this.props.popup.screen.availWidth -
                this.props.popup.innerWidth,
              t =
                this.props.popup.screen.availHeight -
                this.props.popup.innerHeight;
            return 0 === e && 0 === t;
          }),
          (e.prototype.componentDidMount = function() {
            this.props.popup.addEventListener(
              "resize",
              this.UpdateMaximizeState
            );
          }),
          (e.prototype.componentWillUnmount = function() {
            this.props.popup.removeEventListener(
              "resize",
              this.UpdateMaximizeState
            );
          }),
          (e.prototype.UpdateMaximizeState = function() {
            var e = this.BIsMaximized();
            e != this.state.maximized && this.setState({ maximized: e });
          }),
          (e.prototype.render = function() {
            var e = this.props.popup,
              t = "title-area-icon";
            return (
              this.state.maximized
                ? (t += " restoreButton")
                : (t += " maximizeButton"),
              ve.createElement(
                "div",
                { className: "TitleBar title-area" },
                ve.createElement("div", { className: "title-area-highlight" }),
                ve.createElement(
                  "div",
                  { className: "title-area-children" },
                  this.props.children
                ),
                !this.props.hideActions &&
                  ve.createElement(
                    "div",
                    { className: "title-bar-actions" },
                    ve.createElement(
                      "div",
                      {
                        className: "title-area-icon closeButton",
                        onClick: function() {
                          e && e.close();
                        }
                      },
                      ve.createElement(Qo.fb, null)
                    ),
                    !this.props.hideMinMax &&
                      ve.createElement(
                        "div",
                        {
                          className: t,
                          onClick: function() {
                            e.SteamClient.Window.ToggleMaximize();
                          }
                        },
                        this.state.maximized && ve.createElement(Qo.L, null),
                        !this.state.maximized && ve.createElement(Qo.z, null)
                      ),
                    !this.props.hideMinMax &&
                      ve.createElement(
                        "div",
                        {
                          className: "title-area-icon minimizeButton",
                          onClick: function() {
                            e.SteamClient.Window.Minimize();
                          }
                        },
                        ve.createElement(Qo.C, null)
                      )
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "UpdateMaximizeState", null),
          e
        );
      })(ve.Component),
      qi = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { error: null }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidCatch = function(e, t) {
            var n = { error: e, info: t };
            this.setState({ error: n });
          }),
          (e.prototype.clearError = function() {
            this.setState({ error: null });
          }),
          (e.prototype.render = function() {
            var e = this.state.error;
            if (e) {
              var t = e.error ? e.error.stack : "Stack missing",
                n = e.info ? e.info.componentStack : "",
                o = (e.error && e.error.message) || "unknown error";
              return ve.createElement(
                "div",
                { style: { overflow: "auto" } },
                ve.createElement(
                  "h1",
                  {
                    style: {
                      marginTop: "15px",
                      marginLeft: "15px",
                      color: "white",
                      fontSize: "20px",
                      display: "inline-block"
                    }
                  },
                  'Error: "',
                  o,
                  '"'
                ),
                "",
                ve.createElement(
                  "span",
                  {
                    style: { textDecoration: "underline", cursor: "pointer" },
                    onClick: this.clearError
                  },
                  "(x) Dismiss"
                ),
                ve.createElement("br", null),
                ve.createElement(
                  "pre",
                  {
                    style: {
                      marginTop: "15px",
                      marginLeft: "15px",
                      color: "white",
                      fontSize: "16px"
                    }
                  },
                  t
                ),
                ve.createElement(
                  "pre",
                  {
                    style: {
                      marginTop: "15px",
                      marginLeft: "15px",
                      color: "white",
                      fontSize: "16px"
                    }
                  },
                  "The error occurred while rendering:",
                  n
                )
              );
            }
            return this.props.children;
          }),
          R.c([M.a], e.prototype, "clearError", null),
          e
        );
      })(ve.Component);
    function Ki(t) {
      var e,
        n = {};
      t.onEscKeypress &&
        ((n.tabIndex = 0),
        (n.onKeyDown = function(e) {
          27 == e.keyCode && t.onEscKeypress();
        }),
        (n.onClick = function(e) {
          e.currentTarget === e.target && t.onEscKeypress();
        }),
        (e = function(e) {
          e && (ci.e(e, e.ownerDocument.activeElement) || e.focus());
        }));
      var o = ["ModalPosition"];
      return (
        t.className && o.push(t.className),
        t.bDestructiveWarning && o.push("Destructive"),
        ve.createElement(
          "div",
          R.a({ className: o.join(" ") }, n, { ref: e }),
          ve.createElement(
            "div",
            { className: "ModalPosition_Content" },
            ve.createElement("div", { className: "ModalPosition_TopBar" }),
            t.onEscKeypress &&
              ve.createElement(
                "div",
                { className: "ModalPosition_Dismiss" },
                ve.createElement(
                  "div",
                  { className: "closeButton", onClick: t.onEscKeypress },
                  ve.createElement(Qo.fb, null)
                )
              ),
            ve.createElement(qi, null, t.children)
          )
        )
      );
    }
    var Yi = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.Cancel = function() {
          this.props.onCancel(), this.props.closeModal();
        }),
        (t.prototype.OK = function() {
          this.props.onOK(), this.props.closeModal();
        }),
        (t.prototype.componentDidMount = function() {
          var e = W.findDOMNode(this);
          if (e) {
            var t = e.querySelector("button[type=submit]");
            t && t.focus();
          }
        }),
        (t.prototype.render = function() {
          return ve.createElement(
            Ki,
            {
              onEscKeypress: this.Cancel,
              bDestructiveWarning: this.props.bDestructiveWarning
            },
            ve.createElement(
              Oi,
              {
                classNameContent: "GenericConfirmDialog",
                onSubmit: this.OK,
                bCenterVertically: !0
              },
              ve.createElement(mi, null, this.props.strTitle),
              ve.createElement(
                fi,
                null,
                ve.createElement(
                  _i,
                  null,
                  this.props.strDescription,
                  this.props.children
                )
              ),
              ve.createElement(
                di,
                null,
                !this.props.bAlertDialog &&
                  ve.createElement(Ti, {
                    onCancel: this.Cancel,
                    strOKText: this.props.strOKButtonText,
                    strCancelText: this.props.strCancelButtonText
                  }),
                this.props.bAlertDialog &&
                  ve.createElement(Ei, null, this.props.strOKButtonText)
              )
            )
          );
        }),
        R.c([M.a], t.prototype, "Cancel", null),
        R.c([M.a], t.prototype, "OK", null),
        t
      );
    })(ve.Component);
    function Ji(e, t, n, o) {
      var i,
        r = e.props.closeModal,
        a = ve.cloneElement(e, {
          closeModal: function() {
            i && i.Close(), r && r();
          }
        });
      if (Yo.UIStore.GetPerContextChatData(qu(t)).BUsePopups() && o && n) {
        var s = new Xi(t, qu(t), n, o, a);
        s.Show(), (i = s);
      } else i = Qu.GetModalManager(t).ShowModal(a);
      return i;
    }
    var Xi = (function(a) {
      function e(e, t, n, o, i) {
        var r =
          a.call(this, n, {
            title: o.strTitle,
            html_class: "client_chat_frame fullheight ModalDialogPopup",
            body_class: "fullheight",
            owner_window: void 0,
            replace_existing_popup: !0,
            target_browser: t != qo ? t : void 0,
            availscreenwidth: e.screen.availWidth,
            availscreenheight: e.screen.availHeight
          }) || this;
        return (
          (r.m_bModalInitiatedClose = !1),
          (r.m_windowOpener = e),
          (r.m_browserContext = t),
          (r.m_modalProps = o),
          (r.m_modalElement = i),
          r
        );
      }
      return (
        R.d(e, a),
        (e.prototype.Close = function() {
          (this.m_bModalInitiatedClose = !0), a.prototype.Close.call(this);
        }),
        (e.prototype.UpdateParamsBeforeShow = function(e) {
          var t = this.m_modalProps.popupWidth || 500,
            n = this.m_modalProps.popupHeight || 400,
            o = this.m_windowOpener.screen,
            i = (o.availWidth - t) / 2,
            r = (o.availHeight - n) / 2,
            a = o;
          return (
            void 0 !== a.availLeft &&
              void 0 !== a.availTop &&
              ((i += a.availLeft), (r += a.availTop)),
            R.a({}, e, { dimensions: { width: t, height: n, left: i, top: r } })
          );
        }),
        (e.prototype.OnLoad = function() {}),
        (e.prototype.OnResize = function() {}),
        (e.prototype.OnClose = function() {
          this.m_bModalInitiatedClose ||
            (this.m_modalProps.closeModal && this.m_modalProps.closeModal());
        }),
        (e.prototype.Render = function(e, t) {
          t.setAttribute("class", "fullheight popup_chat_frame"),
            this.m_modalElement &&
              W.render(
                ve.createElement(
                  Qi,
                  { popup: e, browserContext: this.m_browserContext },
                  this.m_modalElement
                ),
                t
              );
        }),
        e
      );
    })(Wi.a);
    function Qi(e) {
      return ve.createElement(
        "div",
        { className: "PopupFullWindow", onContextMenu: np },
        ve.createElement(zi, { hideMinMax: !0, popup: e.popup }),
        ve.createElement(ap, { ModalManager: Qu.GetModalManager(e.popup) }),
        e.children
      );
    }
    function Zi(n, o, e, t, i, r, a) {
      return (
        void 0 === i && (i = Object(re.b)("#Button_Cancel")),
        (s = function(e) {
          var t = tr(n, o);
          Ji(e, n, "alertdialog", t);
        }),
        (c = o),
        (l = e),
        (p = t),
        (u = i),
        (m = r),
        (d = a),
        new Promise(function(e, t) {
          s(
            ve.createElement(Yi, {
              strTitle: c,
              strDescription: l,
              strOKButtonText: p,
              strCancelButtonText: u,
              onOK: e,
              onCancel: t,
              bDestructiveWarning: m,
              children: d
            })
          );
        })
      );
      var s, c, l, p, u, m, d;
    }
    function $i(e, t, n, o, i, r, a) {
      return (
        void 0 === i && (i = Object(re.b)("#Button_Cancel")),
        Zi(e, t, n, o, i, r, a)
          .then(function() {
            return Promise.resolve(!0);
          })
          .catch(function() {
            return Promise.resolve(!1);
          })
      );
    }
    function er(n, o, e, t) {
      return (
        void 0 === t && (t = Object(re.b)("#Button_OK")),
        (i = function(e) {
          var t = tr(n, o);
          Ji(e, n, "alertdialog", t);
        }),
        (r = o),
        (a = e),
        (s = t),
        new Promise(function(e, t) {
          i(
            ve.createElement(Yi, {
              bAlertDialog: !0,
              strTitle: r,
              strDescription: a,
              strOKButtonText: s,
              onOK: e,
              onCancel: e
            })
          );
        })
      );
      var i, r, a, s;
    }
    function tr(e, t) {
      return Yo.UIStore.GetPerContextChatData(qu(e)).BUsePopups() &&
        e.innerWidth < 600
        ? { strTitle: t, popupWidth: 638, popupHeight: 300 }
        : null;
    }
    function nr(e, t, n) {
      Ji(ve.createElement(or, { player: t }), n, "NicknameDialog", {
        strTitle: Object(re.b)("#Friend_Menu_AddNickname"),
        popupWidth: 640,
        popupHeight: 400
      });
    }
    var or = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = { strCurrentNameEntry: t.props.player.nickname || "" }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.HandleTextEntry = function(e) {
            this.setState({ strCurrentNameEntry: e.currentTarget.value });
          }),
          (e.prototype.HandleSubmit = function(e) {
            var t = this;
            Yo.FriendStore.SetPlayerNickname(
              this.props.player,
              this.state.strCurrentNameEntry
            ).then(function(e) {
              1 == e && t.props.closeModal && t.props.closeModal();
            });
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.player != this.props.player &&
              this.setState({ strCurrentNameEntry: e.player.nickname });
          }),
          (e.prototype.render = function() {
            var e = "friend editNickname",
              t = this.props.player.has_nickname;
            return (
              this.props.player.persona.is_ingame
                ? (e += " ingame")
                : this.props.player.persona.is_online && (e += " online"),
              t && (e += " nickNamed"),
              ve.createElement(
                Ki,
                {
                  className: "Dialog_EditNickName",
                  onEscKeypress: this.props.closeModal
                },
                ve.createElement(
                  Oi,
                  {
                    classNameContent: "NicknameDialog",
                    onSubmit: this.HandleSubmit
                  },
                  ve.createElement(
                    mi,
                    null,
                    t
                      ? Object(re.b)("#Friend_Menu_ChangeNickname")
                      : Object(re.b)("#Friend_Menu_AddNickname")
                  ),
                  ve.createElement(
                    fi,
                    null,
                    ve.createElement(
                      _i,
                      null,
                      t
                        ? Object(re.b)("#Nickname_EditNickname")
                        : Object(re.b)("#Nickname_AddANickname")
                    ),
                    ve.createElement(
                      _i,
                      null,
                      ve.createElement(
                        "div",
                        { className: e },
                        ve.createElement("img", {
                          className: "avatarMedium",
                          src: this.props.player.persona.avatar_url_full
                        }),
                        ve.createElement(
                          "div",
                          { className: "labelHolder" },
                          ve.createElement(
                            "div",
                            { className: "mediumName" },
                            this.props.player.secondary_display_name
                          ),
                          ve.createElement(
                            "div",
                            { className: "nickNamedAs" },
                            Object(re.b)("#Nickname_NickNameAsDialog")
                          ),
                          ve.createElement(
                            "div",
                            { className: "mediumName asNickName" },
                            ve.createElement(Gi, {
                              placeholder: t
                                ? Object(re.b)("#Nickname_PlaceHolderNickName")
                                : Object(re.b)(
                                    "#Nickname_PlaceHolderNickNameFresh"
                                  ),
                              className: "nicknameInput",
                              value: this.state.strCurrentNameEntry,
                              onChange: this.HandleTextEntry,
                              autoFocus: !0,
                              bShowClearAction: !0
                            })
                          )
                        )
                      )
                    )
                  ),
                  ve.createElement(
                    di,
                    null,
                    ve.createElement(Ti, { onCancel: this.props.closeModal })
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "HandleTextEntry", null),
          R.c([M.a], e.prototype, "HandleSubmit", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ir = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_friendList = null),
            (t.m_rctChosenFriends = []),
            (t.state = { rgFriendsChosen: [], strInputValue: "" }),
            t
          );
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "selectedFriendCount", {
            get: function() {
              return this.state.rgFriendsChosen.length;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnTextInput = function(e) {
            this.setState({ strInputValue: e.currentTarget.value });
          }),
          (e.prototype.OnInputKeyDown = function(e) {
            var t = this;
            if (13 == e.keyCode) {
              if (
                e.currentTarget.value.trim().length ||
                this.m_friendList.BHasSelection()
              ) {
                e.preventDefault();
                var n = this.m_friendList.GetSelectedFriend();
                n && this.SelectFriendSuggestion(n);
              }
            } else if (
              8 == e.keyCode &&
              0 == e.currentTarget.selectionEnd &&
              this.state.rgFriendsChosen.length
            ) {
              e.preventDefault();
              var o = void 0;
              this.setState(
                function(e) {
                  return (
                    (o = e.rgFriendsChosen[e.rgFriendsChosen.length - 1]),
                    {
                      rgFriendsChosen: e.rgFriendsChosen.slice(
                        0,
                        e.rgFriendsChosen.length - 1
                      )
                    }
                  );
                },
                function() {
                  t.props.onFriendRemoved && t.props.onFriendRemoved(o);
                }
              );
            } else
              this.m_friendList.BHandleInputKeyPress(e) && e.preventDefault();
          }),
          (e.prototype.SelectFriendSuggestion = function(t) {
            var e = this;
            this.setState({ strInputValue: "" }),
              this.m_friendList.ClearSelection(),
              this.setState(
                function(e) {
                  return -1 == e.rgFriendsChosen.indexOf(t)
                    ? { rgFriendsChosen: e.rgFriendsChosen.concat([t]) }
                    : null;
                },
                function() {
                  e.props.onFriendSelected && e.props.onFriendSelected(t);
                }
              );
          }),
          (e.prototype.RemoveFriendFromList = function(t) {
            var e = this;
            this.setState(
              function(e) {
                return { rgFriendsChosen: w.a(e.rgFriendsChosen, t) };
              },
              function() {
                e.props.onFriendRemoved && e.props.onFriendRemoved(t);
              }
            );
          }),
          (e.prototype.OnFriendsListRef = function(e) {
            this.m_friendList = e;
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.rgSelectedFriends !== this.props.rgSelectedFriends &&
              void 0 !== e.rgSelectedFriends &&
              ((void 0 !== this.props.rgSelectedFriends &&
                w.f(e.rgSelectedFriends, this.props.rgSelectedFriends)) ||
                this.setState({
                  rgFriendsChosen: e.rgSelectedFriends.map(function(e) {
                    return Yo.FriendStore.GetFriend(e);
                  })
                }));
          }),
          (e.prototype.componentWillUpdate = function(e, t) {
            this.BuildChosenFriendList(t);
          }),
          (e.prototype.componentWillMount = function() {
            if (this.props.rgSelectedFriends) {
              var e = this.props.rgSelectedFriends.map(function(e) {
                return Yo.FriendStore.GetFriend(e);
              });
              (e = e.filter(function(e) {
                return null != e;
              })),
                this.setState({ rgFriendsChosen: e }),
                this.BuildChosenFriendList(
                  R.a({}, this.state, { rgFriendsChosen: e })
                );
            }
          }),
          (e.prototype.BuildChosenFriendList = function(e) {
            var t = this,
              n = !1;
            if (e.rgFriendsChosen.length != this.m_rctChosenFriends.length)
              n = !0;
            else
              for (var o = 0; o < e.rgFriendsChosen.length; o++)
                if (
                  e.rgFriendsChosen[o].accountid !=
                  this.m_rctChosenFriends[o].key
                ) {
                  n = !0;
                  break;
                }
            if (n) {
              var i = this.props.chosenFriendComponent || ar;
              this.m_rctChosenFriends = e.rgFriendsChosen.map(function(e) {
                return ve.createElement(i, {
                  friend: e,
                  key: e.accountid,
                  onClick: t.RemoveFriendFromList
                });
              });
            }
          }),
          (e.prototype.render = function() {
            var e = 0 < this.state.rgFriendsChosen.length,
              t = ["FriendPicker"];
            return (
              e && t.push("FriendPicker_FriendsChosen"),
              ve.createElement(
                "div",
                { className: t.join(" ") },
                ve.createElement(
                  Ri,
                  {
                    onChange: this.OnTextInput,
                    onKeyDown: this.OnInputKeyDown,
                    label: this.props.label,
                    value: this.state.strInputValue,
                    placeholder: e
                      ? ""
                      : Object(re.b)("#FriendPicker_StartTyping"),
                    autoFocus: this.props.autoFocus
                  },
                  this.m_rctChosenFriends
                ),
                1 == this.props.bDropInvite &&
                  ve.createElement(
                    "div",
                    { className: "DialogLabel" },
                    Object(re.b)("#Chat_InviteFriends_DropInvite")
                  ),
                ve.createElement(rr, {
                  ref: this.OnFriendsListRef,
                  eSort: this.props.eSort,
                  strInputValue: this.state.strInputValue,
                  setExcludedFriends: this.props.setExcludedFriends,
                  rgFriendsChosen: this.state.rgFriendsChosen,
                  fnSelectFriendSuggestion: this.SelectFriendSuggestion
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnTextInput", null),
          R.c([M.a], e.prototype, "OnInputKeyDown", null),
          R.c([M.a], e.prototype, "SelectFriendSuggestion", null),
          R.c([M.a], e.prototype, "RemoveFriendFromList", null),
          R.c([M.a], e.prototype, "OnFriendsListRef", null),
          e
        );
      })(ve.Component),
      rr = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e.m_iSelectedFriendIndex = -1), (e.m_rgFriendSuggestions = []), e
          );
        }
        return (
          R.d(e, t),
          (e.prototype.BuildFriendsList = function(t) {
            (this.m_rgFriendsList = Yo.FriendStore.all_friends),
              t.setExcludedFriends &&
                t.setExcludedFriends.size &&
                (this.m_rgFriendsList = this.m_rgFriendsList.filter(function(
                  e
                ) {
                  return !t.setExcludedFriends.has(e.accountid);
                }));
            var o = Yo.ChatStore.FriendChatStore;
            switch (this.props.eSort) {
              case 0:
                this.m_rgFriendsList.sort(function(e, t) {
                  var n =
                    o.GetFriendLastChatTime(t.accountid) -
                    o.GetFriendLastChatTime(e.accountid);
                  return 0 !== n ? n : ut.DefaultFriendSortComparator(e, t);
                });
                break;
              default:
              case 1:
                this.m_rgFriendsList.sort(function(e, t) {
                  return e.display_name.localeCompare(t.display_name);
                });
            }
            this.BuildFriendSuggestionList(t);
          }),
          (e.prototype.componentWillMount = function() {
            this.BuildFriendsList(this.props);
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.setExcludedFriends != this.props.setExcludedFriends &&
              this.BuildFriendsList(e);
          }),
          (e.prototype.ClearSelection = function() {
            this.m_iSelectedFriendIndex = -1;
          }),
          (e.prototype.BHasSelection = function() {
            return -1 !== this.m_iSelectedFriendIndex;
          }),
          (e.prototype.GetSelectedFriend = function() {
            return -1 !== this.m_iSelectedFriendIndex
              ? this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]
              : this.m_rgFriendSuggestions.length
                ? this.m_rgFriendSuggestions[0]
                : null;
          }),
          (e.prototype.BHandleInputKeyPress = function(e) {
            return (
              (38 == e.keyCode ||
                40 == e.keyCode ||
                34 == e.keyCode ||
                33 == e.keyCode) &&
              (this.m_rgFriendSuggestions.length &&
                (38 == e.keyCode
                  ? this.m_iSelectedFriendIndex--
                  : 33 == e.keyCode
                    ? (this.m_iSelectedFriendIndex = Math.max(
                        0,
                        this.m_iSelectedFriendIndex - 5
                      ))
                    : 34 == e.keyCode
                      ? (this.m_iSelectedFriendIndex = Math.min(
                          this.m_rgFriendSuggestions.length - 1,
                          this.m_iSelectedFriendIndex + 5
                        ))
                      : 40 == e.keyCode && this.m_iSelectedFriendIndex++,
                (this.m_iSelectedFriendIndex =
                  (this.m_iSelectedFriendIndex +
                    this.m_rgFriendSuggestions.length) %
                  this.m_rgFriendSuggestions.length),
                this.forceUpdate()),
              !0)
            );
          }),
          (e.prototype.OnFriendSuggestionClicked = function(e) {
            this.props.fnSelectFriendSuggestion(
              this.m_rgFriendSuggestions[this.GetIndex(e)]
            );
          }),
          (e.prototype.OnFriendSuggestionMouseEnter = function(e) {
            (this.m_iSelectedFriendIndex = this.GetIndex(e)),
              this.forceUpdate();
          }),
          (e.prototype.OnFriendSelected = function(e) {
            this.props.fnSelectFriendSuggestion(e);
          }),
          (e.prototype.OnFocusFriendRef = function(e) {
            e && Object(ci.m)(e, e.parentElement);
          }),
          (e.prototype.BuildFriendSuggestionList = function(e) {
            var t,
              n = void 0;
            -1 !== this.m_iSelectedFriendIndex &&
              (t = this.m_rgFriendSuggestions[this.m_iSelectedFriendIndex]);
            var o =
              e.strInputValue && e.strInputValue.trim().toLocaleLowerCase();
            this.m_rgFriendSuggestions = [];
            for (
              var i = 0;
              i < this.m_rgFriendsList.length &&
              this.m_rgFriendSuggestions.length < 100;
              i++
            ) {
              var r = this.m_rgFriendsList[i];
              -1 === e.rgFriendsChosen.indexOf(r) &&
                ((o && !r.BMatchesSearchString(o, !1)) ||
                  (r === t && (n = this.m_rgFriendSuggestions.length),
                  this.m_rgFriendSuggestions.push(r)));
            }
            -1 === this.m_iSelectedFriendIndex && o.length
              ? (this.m_iSelectedFriendIndex = 0)
              : void 0 !== n
                ? (this.m_iSelectedFriendIndex = n)
                : this.m_iSelectedFriendIndex >=
                    this.m_rgFriendSuggestions.length &&
                  (this.m_iSelectedFriendIndex =
                    this.m_rgFriendSuggestions.length - 1);
          }),
          (e.prototype.GetIndex = function(e) {
            return Math.max(
              0,
              Math.min(
                this.m_rgFriendSuggestions.length,
                parseInt(e.currentTarget.getAttribute("data-index"))
              )
            );
          }),
          (e.prototype.componentWillUpdate = function(e, t) {
            this.BuildFriendSuggestionList(e);
          }),
          (e.prototype.render = function() {
            var e,
              i = this,
              t = this.m_rgFriendSuggestions.map(function(e, t) {
                var n = "FriendPicker_SuggestedFriend",
                  o = t === i.m_iSelectedFriendIndex;
                return (
                  o && (n += " Focus"),
                  ve.createElement(
                    "div",
                    {
                      className: n,
                      onClick: i.OnFriendSuggestionClicked,
                      onMouseEnter: i.OnFriendSuggestionMouseEnter,
                      key: e.accountid,
                      ref: o ? i.OnFocusFriendRef : null,
                      "data-index": t
                    },
                    ve.createElement(Qs, {
                      noActions: !0,
                      friend: e,
                      context: null
                    })
                  )
                );
              });
            if (
              "" != this.props.strInputValue ||
              1 == this.props.eSort ||
              0 == this.props.eSort
            )
              e = ve.createElement(ve.Fragment, null, t);
            else {
              for (
                var n = new Set(this.props.setExcludedFriends),
                  o = 0,
                  r = this.props.rgFriendsChosen;
                o < r.length;
                o++
              ) {
                var a = r[o];
                a && !n.has(a.accountid) && n.add(a.accountid);
              }
              var s = { bSingleClickActivate: !0, disableContextMenu: !0 },
                c = 0,
                l = Yo.FriendStore.FavoritesStore.favorites.map(function(e) {
                  return e.friend && !n.has(e.friend.accountid)
                    ? (c++,
                      ve.createElement(
                        Qs,
                        R.a(
                          {
                            friend: e.friend,
                            key: e.friend.accountid,
                            className: "",
                            context: {},
                            action: i.OnFriendSelected
                          },
                          s,
                          { bFriendsListEntry: !0 }
                        )
                      ))
                    : null;
                }),
                p = ve.createElement(zs, {
                  group: Yo.FriendStore.FriendGroupStore.ingame_group,
                  key: Yo.FriendStore.FriendGroupStore.ingame_group.id,
                  collapsed: !1,
                  searchString: this.props.strInputValue,
                  fnOnSearchSelection: function() {},
                  friendSelectAction: this.OnFriendSelected,
                  setExcludedFriends: n,
                  friendProps: s
                }),
                u = Yo.FriendStore.FriendGroupStore.default_groups.map(function(
                  e
                ) {
                  return ve.createElement(zs, {
                    group: e,
                    key: e.id,
                    collapsed: !1,
                    searchString: i.props.strInputValue,
                    fnOnSearchSelection: function() {},
                    friendSelectAction: i.OnFriendSelected,
                    setExcludedFriends: n,
                    friendProps: s
                  });
                });
              e = ve.createElement(
                ve.Fragment,
                null,
                0 < c &&
                  ve.createElement(
                    "div",
                    { className: "friendGroup" },
                    ve.createElement(
                      "div",
                      { className: "groupName" },
                      Object(re.b)("#FriendGroup_Favorites")
                    ),
                    l
                  ),
                p,
                u
              );
            }
            return ve.createElement(
              "div",
              { className: "FriendPicker_Suggestions CompactFriendsList" },
              ve.createElement("div", {
                className: "insetShadow verticalInsetShadow"
              }),
              ve.createElement(
                "div",
                { className: "FriendPicker_Suggestions_List" },
                e
              )
            );
          }),
          R.c([M.a], e.prototype, "OnFriendSuggestionClicked", null),
          R.c([M.a], e.prototype, "OnFriendSuggestionMouseEnter", null),
          R.c([M.a], e.prototype, "OnFriendSelected", null),
          R.c([M.a], e.prototype, "OnFocusFriendRef", null),
          e
        );
      })(ve.Component);
    function ar(e) {
      return ve.createElement(
        Xs,
        { friend: e.friend, context: null },
        ve.createElement(
          "div",
          {
            className: "FriendPicker_ChosenFriend",
            onClick: function() {
              e.onClick(e.friend);
            }
          },
          ve.createElement("span", null, e.friend.display_name),
          ve.createElement(Qo.fb, null)
        )
      );
    }
    function sr(e, t, n) {
      var o = n ? [n.accountid] : [];
      Ji(
        ve.createElement(cr, { browserContext: e, rgPreSelectedFriends: o }),
        t,
        "CreateFriendCategoryDialog",
        {
          strTitle: Object(re.b)("#FriendGroup_Menu_CreateGroup"),
          popupWidth: 664,
          popupHeight: 700
        }
      );
    }
    var cr = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              strNameEntry: e.group ? e.group.name : "",
              strError: null
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.HandleTextEntry = function(e) {
            this.setState({ strNameEntry: e.target.value, strError: null });
          }),
          (e.prototype.HandleSubmit = function(e) {
            var t = this,
              n = this.m_friendPicker.state.rgFriendsChosen,
              o = this.state.strNameEntry;
            if (this.props.group) {
              for (
                var i = new Set(this.props.group.GetCurrentMemberSet()),
                  r = [],
                  a = [],
                  s = 0,
                  c = n;
                s < c.length;
                s++
              ) {
                var l = c[s];
                i.has(l.accountid)
                  ? i.delete(l.accountid)
                  : r.push(l.persona.m_steamid.ConvertTo64BitString());
              }
              i.forEach(function(e) {
                a.push(E.a.InitFromAccountID(e).ConvertTo64BitString());
              }),
                Yo.FriendStore.FriendGroupStore.ManageGroup(
                  this.props.group,
                  o,
                  r,
                  a
                ).then(function(e) {
                  e
                    ? t.props.closeModal && t.props.closeModal()
                    : t.setState({
                        strError: Object(re.b)(
                          "#FriendGroup_ManageGroup_ErrorFailed"
                        )
                      });
                });
            } else {
              if (!o)
                return void this.setState({
                  strError: Object(re.b)(
                    "#FriendGroup_CreateGroup_ErrorNeedName"
                  )
                });
              var p = n.map(function(e) {
                return e.persona.m_steamid.ConvertTo64BitString();
              });
              Yo.FriendStore.FriendGroupStore.CreateGroup(o, p).then(function(
                e
              ) {
                e
                  ? t.props.closeModal && t.props.closeModal()
                  : t.setState({
                      strError: Object(re.b)(
                        "#FriendGroup_CreateGroup_ErrorFailed"
                      )
                    });
              });
            }
          }),
          (e.prototype.OnFriendPickerRef = function(e) {
            this.m_friendPicker = e;
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Oi,
                {
                  classNameContent: "ManageGroupDialog",
                  onSubmit: this.HandleSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  this.props.group
                    ? Object(re.b)("#FriendGroup_Menu_Manage")
                    : Object(re.b)("#FriendGroup_Menu_CreateGroup")
                ),
                ve.createElement(
                  fi,
                  null,
                  this.state.strError &&
                    ve.createElement(
                      _i,
                      { className: "nicknameError" },
                      this.state.strError
                    ),
                  ve.createElement(Gi, {
                    type: "text",
                    label: Object(re.b)("#FriendGroup_CategoryName"),
                    className: "nicknameInput",
                    value: this.state.strNameEntry,
                    onChange: this.HandleTextEntry,
                    autoFocus: !0
                  }),
                  ve.createElement(ir, {
                    ref: this.OnFriendPickerRef,
                    label: Object(re.b)("#FriendGroup_CategoryMembers"),
                    eSort: 1,
                    rgSelectedFriends: this.props.rgPreSelectedFriends
                  })
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "HandleTextEntry", null),
          R.c([M.a], e.prototype, "HandleSubmit", null),
          R.c([M.a], e.prototype, "OnFriendPickerRef", null),
          e
        );
      })(ve.Component),
      lr = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_mapCategoryChecks = m.observable.map()),
            (t.state = { strError: null }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.friend != this.props.friend && this.m_mapCategoryChecks.clear();
          }),
          (e.prototype.HandleSubmit = function(e) {
            var a = this,
              o = [];
            Yo.FriendStore.FriendGroupStore.user_groups.forEach(function(e) {
              if (a.m_mapCategoryChecks.has(e.unique_id)) {
                var t = void 0,
                  n = void 0;
                a.m_mapCategoryChecks.get(e.unique_id) ? (n = e) : (t = e),
                  o.push(
                    Yo.FriendStore.FriendGroupStore.TransferFriendFromToGroup(
                      a.props.friend,
                      t,
                      n
                    )
                  );
              }
            }),
              Promise.all(o).then(function(e) {
                for (var t = !1, n = 0, o = e; n < o.length; n++)
                  for (var i = 0, r = o[n]; i < r.length; i++) {
                    r[i] || (t = !0);
                  }
                t
                  ? a.setState({
                      strError: Object(re.b)(
                        "#FriendGroup_ManageGroup_ErrorFailed"
                      )
                    })
                  : a.props.closeModal();
              });
          }),
          (e.prototype.CreateNew = function(e) {
            sr(zu(this, e), Yu(e), this.props.friend);
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Oi,
                {
                  classNameContent: "AssignCategoriesDialog",
                  onSubmit: this.HandleSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)("#FriendGroup_Categorize_Title")
                ),
                ve.createElement(
                  fi,
                  null,
                  this.state.strError &&
                    ve.createElement(
                      _i,
                      { className: "nicknameError" },
                      this.state.strError
                    ),
                  ve.createElement(
                    vi,
                    null,
                    ve.createElement(
                      yi,
                      null,
                      ve.createElement(Qs, {
                        friend: this.props.friend,
                        className: "AssignCategoriesDialog_Friend",
                        noActions: !0,
                        context: null
                      })
                    )
                  ),
                  ve.createElement(pr, {
                    friend: this.props.friend,
                    mapChecks: this.m_mapCategoryChecks
                  }),
                  ve.createElement(
                    vi,
                    { className: "AssignCategoriesDialog_AddNewButton" },
                    ve.createElement(
                      wi,
                      { onClick: this.CreateNew },
                      Object(re.b)("#FriendGroup_Categorize_AddNew")
                    )
                  )
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "HandleSubmit", null),
          R.c([M.a], e.prototype, "CreateNew", null),
          e
        );
      })(ve.Component),
      pr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var t = this,
              e = Yo.FriendStore.FriendGroupStore.user_groups.map(function(e) {
                return ve.createElement(ur, {
                  friend: t.props.friend,
                  group: e,
                  key: e.unique_id,
                  mapChecks: t.props.mapChecks
                });
              });
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                hi,
                null,
                Object(re.b)("#FriendGroup_Categorize_Categories")
              ),
              ve.createElement(
                "div",
                { className: "FriendCategoryCheckboxes_List" },
                e
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ur = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnToggle = function(e) {
            e != this.props.group.HasMember(this.props.friend.accountid)
              ? this.props.mapChecks.set(this.props.group.unique_id, e)
              : this.props.mapChecks.delete(this.props.group.unique_id);
          }),
          (t.prototype.OnContextMenu = function(e) {
            Pr(zu(this, e), this.props.group, e);
          }),
          (t.prototype.render = function() {
            var e,
              t = this.props.group,
              n = this.props.friend;
            return (
              (e = this.props.mapChecks.has(t.unique_id)
                ? this.props.mapChecks.get(t.unique_id)
                : t.HasMember(n.accountid)),
              ve.createElement(
                "div",
                { onContextMenu: this.OnContextMenu },
                ve.createElement(Li, {
                  label: t.name,
                  checked: e,
                  onChange: this.OnToggle
                })
              )
            );
          }),
          R.c([M.a], t.prototype, "OnToggle", null),
          R.c([M.a], t.prototype, "OnContextMenu", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      mr = n("EGkk"),
      dr = {
        TimeOfDay: new Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          hour: "numeric",
          minute: "numeric"
        }),
        TimeOfDayWithSecs: new Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          hour: "numeric",
          minute: "numeric",
          second: "numeric"
        }),
        TimeInWeek: Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          weekday: "long",
          hour: "numeric",
          minute: "numeric"
        }),
        FullTimestamp: Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          weekday: "long",
          year: "numeric",
          month: "numeric",
          day: "numeric",
          hour: "numeric",
          minute: "numeric"
        }),
        FullTimestampNoWeekday: Intl.DateTimeFormat(
          re.a.GetPreferredLocales(),
          {
            year: "numeric",
            month: "numeric",
            day: "numeric",
            hour: "numeric",
            minute: "numeric"
          }
        )
      },
      hr = {
        TimeOfDay: new Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          hour: "numeric",
          minute: "numeric",
          hour12: !1
        }),
        TimeOfDayWithSecs: new Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          hour: "numeric",
          minute: "numeric",
          second: "numeric",
          hour12: !1
        }),
        TimeInWeek: Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          weekday: "long",
          hour: "numeric",
          minute: "numeric",
          hour12: !1
        }),
        FullTimestamp: Intl.DateTimeFormat(re.a.GetPreferredLocales(), {
          weekday: "long",
          year: "numeric",
          month: "numeric",
          day: "numeric",
          hour: "numeric",
          minute: "numeric",
          hour12: !1
        }),
        FullTimestampNoWeekday: Intl.DateTimeFormat(
          re.a.GetPreferredLocales(),
          {
            year: "numeric",
            month: "numeric",
            day: "numeric",
            hour: "numeric",
            minute: "numeric",
            hour12: !1
          }
        )
      };
    function _r(e, t) {
      null == t.bIncludeWeekday && (t.bIncludeWeekday = !0),
        null == t.bRelativeDate && (t.bRelativeDate = !0);
      var n,
        o = Yo.RTime32ToDate(e),
        i = Yo.GetLocalMidnightInRTime32(),
        r = Yo.SettingsStore.FriendsSettings.b24HourClock ? hr : dr,
        a = t.Format;
      null == a &&
        (a =
          t.bTimeOnly || i - 86400 <= e
            ? t.bIncludeSeconds ? r.TimeOfDayWithSecs : r.TimeOfDay
            : t.bRelativeDate && i - 432e3 <= e
              ? r.TimeInWeek
              : t.bIncludeWeekday ? r.FullTimestamp : r.FullTimestampNoWeekday);
      try {
        n = a.format(o);
      } catch (e) {
        n = Object(re.b)("#ChatRoom_Timestamp_InvalidDate");
      }
      return (
        !t.bTimeOnly &&
          t.bRelativeDate &&
          i - 86400 <= e &&
          e < i &&
          (n = Object(re.b)("#ChatRoom_Timestamp_Yesterday", n)),
        n
      );
    }
    function fr(e) {
      var t =
          "undefined" != typeof SteamClient &&
          void 0 !== SteamClient.SharedConnection,
        n = e.bDisableContextMenu,
        o = e.href,
        i = R.f(e, ["bDisableContextMenu", "href"]);
      return (
        t && !o.startsWith("steam://") && (o = "steam://openurl/" + o),
        ve.createElement(
          "a",
          R.a({}, i, {
            href: o,
            target: "_blank",
            rel: "noopener noreferrer",
            onContextMenu: n ? null : br
          }),
          e.children
        )
      );
    }
    function gr(t) {
      return ve.createElement(
        ve.Fragment,
        null,
        ve.createElement(
          mr.d,
          {
            onSelected: function() {
              ci.i(t.strURL);
            }
          },
          Object(re.b)("#ContextMenu_CopyLinkURL")
        ),
        ve.createElement(
          mr.d,
          {
            onSelected: function(e) {
              yr(e, t.strURL);
            }
          },
          Object(re.b)("#ContextMenu_OpenLinkInNewWindow")
        )
      );
    }
    function br(e) {
      var t = e.currentTarget;
      return Object(Zo.a)(
        ve.createElement(mr.c, null, ve.createElement(gr, { strURL: t.href })),
        e
      );
    }
    function vr(e, t) {
      return Sr(e, e.currentTarget.src, t);
    }
    function Sr(e, t, n) {
      return Object(Zo.a)(
        ve.createElement(
          mr.c,
          null,
          n && ve.createElement(gr, { strURL: n }),
          ve.createElement(
            mr.d,
            {
              onSelected: function() {
                ci.i(t);
              }
            },
            Object(re.b)("#ContextMenu_CopyImageURL")
          ),
          ve.createElement(
            mr.d,
            {
              onSelected: function(e) {
                yr(e, t);
              }
            },
            Object(re.b)("#ContextMenu_OpenImageInNewWindow")
          )
        ),
        e
      );
    }
    function yr(e, t) {
      var n;
      if (
        ((n =
          "currentTarget" in e ? e.currentTarget.ownerDocument.defaultView : e),
        "undefined" != typeof SteamClient &&
          void 0 !== SteamClient.SharedConnection)
      ) {
        var o = qu(n);
        SteamClient.WebChat.OpenURLInClient(t, o.m_unPID);
      } else
        0 == t.indexOf("steam://")
          ? (n.location.href = t)
          : n.open(
              t,
              null,
              "menubar,location,resizable,scrollbars,status,noopener"
            );
    }
    var Cr = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.render = function() {
          return ve.createElement(
            ve.Fragment,
            null,
            _r(this.props.rtime, {
              bTimeOnly: this.props.bTimeOnly,
              bIncludeSeconds: this.props.bIncludeSeconds
            })
          );
        }),
        (t = R.c([Hi.observer], t))
      );
    })(ve.Component);
    var Ir = (function(o) {
      function e(e) {
        var t = o.call(this, e) || this,
          n = Yo.FriendStore.self;
        return (
          (t.state = {
            strCurrentNameEntry: n.primary_display_name,
            strError: ""
          }),
          t
        );
      }
      return (
        R.d(e, o),
        (e.prototype.HandleTextEntry = function(e) {
          this.setState({
            strCurrentNameEntry: e.currentTarget.value,
            strError: ""
          });
        }),
        (e.prototype.HandleSubmit = function(e) {
          this.SetPersonaName(this.state.strCurrentNameEntry);
        }),
        (e.prototype.DisplayError = function(e) {
          this.setState({ strError: e });
        }),
        (e.prototype.SetPersonaName = function(e) {
          var o = this;
          if (
            (this.setState({ strError: "" }),
            G.a.IN_CLIENT && SteamClient.WebChat.SetPersonaName)
          )
            SteamClient.WebChat.SetPersonaName(
              this.state.strCurrentNameEntry
            ).then(function(e) {
              e
                ? o.DisplayError(Object(re.b)(e))
                : o.props.closeModal && o.props.closeModal();
            });
          else {
            var t = new FormData();
            t.append("sessionid", G.a.SESSIONID), t.append("persona", e);
            var n = Yo.FriendStore.self,
              i =
                G.a.CHAT_BASE_URL +
                "profiles/" +
                n.steamid64 +
                "/ajaxsetpersonaname/";
            C.a
              .post(i, t)
              .then(function(e) {
                var t = e.data;
                if (t.success) o.props.closeModal && o.props.closeModal();
                else {
                  var n = t.message.replace("<br />", "");
                  o.DisplayError(n);
                }
              })
              .catch(function(e) {
                o.DisplayError(Object(re.b)("#Friends_NameChangeFailed_Info"));
              });
          }
        }),
        (e.prototype.render = function() {
          var e = Yo.FriendStore.self,
            t = "friend changePersonaName";
          e.persona.is_ingame
            ? (t += " ingame")
            : e.persona.is_online && (t += " online");
          var n = !1;
          return (
            this.state.strError && (n = !0),
            ve.createElement(
              Ki,
              {
                className: "Dialog_ChangePersonaName",
                onEscKeypress: this.props.closeModal
              },
              ve.createElement(
                Oi,
                {
                  classNameContent: "ChangePersonaNameDialog",
                  onSubmit: this.HandleSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)("#ChangePersona_Title")
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    _i,
                    null,
                    Object(re.b)("#ChangePersona_Description")
                  ),
                  ve.createElement(
                    _i,
                    null,
                    ve.createElement(
                      "div",
                      { className: t },
                      ve.createElement("img", {
                        className: "avatarMedium",
                        src: e.persona.avatar_url_full
                      }),
                      ve.createElement(
                        "div",
                        { className: "labelHolder" },
                        n &&
                          ve.createElement(
                            "div",
                            { className: "error" },
                            this.state.strError
                          ),
                        ve.createElement(
                          "div",
                          null,
                          ve.createElement(
                            "div",
                            null,
                            Object(re.b)("#ChangePersona_Change")
                          ),
                          ve.createElement(
                            "div",
                            { className: "mediumName" },
                            ve.createElement(Gi, {
                              placeholder: Object(re.b)(
                                "#ChangePersona_PlaceHolder"
                              ),
                              className: "changePersonaInput",
                              value: this.state.strCurrentNameEntry,
                              onChange: this.HandleTextEntry,
                              autoFocus: !0
                            })
                          )
                        )
                      )
                    )
                  )
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            )
          );
        }),
        R.c([M.a], e.prototype, "HandleTextEntry", null),
        R.c([M.a], e.prototype, "HandleSubmit", null),
        (e = R.c([Hi.observer], e))
      );
    })(ve.Component);
    var Or = (function(n) {
      function e(e) {
        var t = n.call(this, e) || this;
        return (
          (t.state = t.ComputeStateFromNotificationSettings(
            t.props.player.notification_settings
          )),
          t
        );
      }
      return (
        R.d(e, n),
        (e.prototype.ConvertENotificationSettingToBoolean = function(e) {
          return 1 == e;
        }),
        (e.prototype.ComputeStateFromNotificationSettings = function(e) {
          var t,
            n = !1,
            o = !1;
          for (var i in e) {
            if (0 != e[i]) {
              o = !0;
              break;
            }
          }
          return (
            o
              ? (((t = en.DefaultFriendsSettings()).bNotifications_ShowIngame = this.ConvertENotificationSettingToBoolean(
                  e.Notifications_ShowInGame
                )),
                (t.bNotifications_ShowMessage = this.ConvertENotificationSettingToBoolean(
                  e.Notifications_ShowMessage
                )),
                (t.bNotifications_ShowOnline = this.ConvertENotificationSettingToBoolean(
                  e.Notifications_ShowOnline
                )),
                (t.bSounds_PlayIngame = this.ConvertENotificationSettingToBoolean(
                  e.Sounds_PlayInGame
                )),
                (t.bSounds_PlayMessage = this.ConvertENotificationSettingToBoolean(
                  e.Sounds_PlayMessage
                )),
                (t.bSounds_PlayOnline = this.ConvertENotificationSettingToBoolean(
                  e.Sounds_PlayOnline
                )))
              : ((n = !0), (t = Yo.SettingsStore.FriendsSettings)),
            { settings: t, bUseDefaults: n }
          );
        }),
        (e.prototype.ConvertBooleanToENotificationSetting = function(e) {
          return e ? 1 : 2;
        }),
        (e.prototype.FriendSettingsToNotificationSettings = function(e) {
          var t = new pt();
          return (
            this.state.bUseDefaults ||
              ((t.Notifications_ShowInGame = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bNotifications_ShowIngame
              )),
              (t.Notifications_ShowMessage = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bNotifications_ShowMessage
              )),
              (t.Notifications_ShowOnline = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bNotifications_ShowOnline
              )),
              (t.Sounds_PlayInGame = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bSounds_PlayIngame
              )),
              (t.Sounds_PlayMessage = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bSounds_PlayMessage
              )),
              (t.Sounds_PlayOnline = this.ConvertBooleanToENotificationSetting(
                this.state.settings.bSounds_PlayOnline
              ))),
            t
          );
        }),
        (e.prototype.HandleSubmit = function(e) {
          var t = this;
          Yo.FriendStore.SetPlayerNotificationSettings(
            this.props.player,
            this.FriendSettingsToNotificationSettings(this.state.settings)
          ).then(function(e) {
            1 == e && t.props.closeModal && t.props.closeModal();
          });
        }),
        (e.prototype.componentWillReceiveProps = function(e) {
          e.player != this.props.player &&
            this.setState(
              this.ComputeStateFromNotificationSettings(
                e.player.notification_settings
              )
            );
        }),
        (e.prototype.OnSettingToggled = function(e, t) {
          var n;
          this.setState({
            settings: R.a({}, this.state.settings, ((n = {}), (n[e] = t), n))
          });
        }),
        (e.prototype.FriendsSettingsCheckbox = function(t) {
          var n = this;
          return ve.createElement(Li, {
            key: t.strName,
            disabled: this.state.bUseDefaults,
            onChange: function(e) {
              n.OnSettingToggled(t.strName, e);
            },
            checked: !!this.state.settings[t.strName]
          });
        }),
        (e.prototype.NotificationRow = function(e) {
          var t = this.FriendsSettingsCheckbox;
          return ve.createElement(
            "div",
            null,
            ve.createElement(
              "div",
              { className: "FriendsSettingsNotificationRow" },
              ve.createElement(
                "div",
                { className: "FriendsSettingsNotificationRow_Label" },
                e.strLabel
              ),
              ve.createElement(
                "div",
                { className: "FriendsSettingsNotificationRow_Checkbox" },
                ve.createElement(t, { strName: e.strNameShow })
              ),
              ve.createElement(
                "div",
                { className: "FriendsSettingsNotificationRow_Checkbox" },
                ve.createElement(t, { strName: e.strNameSound })
              )
            )
          );
        }),
        (e.prototype.OnDefaultToggled = function(e) {
          e
            ? this.setState({
                settings: Yo.SettingsStore.FriendsSettings,
                bUseDefaults: !0
              })
            : this.setState({ bUseDefaults: !1 });
        }),
        (e.prototype.render = function() {
          var t = this,
            e = this.NotificationRow,
            n = this.state.bUseDefaults,
            o = "friend editFriendNotifications";
          return (
            this.props.player.persona.is_ingame
              ? (o += " ingame")
              : this.props.player.persona.is_online && (o += " online"),
            this.props.player.persona.is_awayOrSnooze && (o += " awayOrSnooze"),
            ve.createElement(
              Ki,
              {
                className: "Dialog_FriendNotifications",
                onEscKeypress: this.props.closeModal
              },
              ve.createElement(
                Oi,
                {
                  classNameContent: "FriendNotificationsDialog",
                  onSubmit: this.HandleSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)("#Friend_Menu_NotificationsTitle")
                ),
                ve.createElement(
                  fi,
                  { className: n ? "useDefaults" : "" },
                  ve.createElement(
                    _i,
                    null,
                    Object(re.b)(
                      "#FriendNotifications_Instructions",
                      this.props.player.display_name
                    )
                  ),
                  ve.createElement(
                    _i,
                    null,
                    ve.createElement(
                      "div",
                      { className: o },
                      ve.createElement(
                        "div",
                        { className: "avatarHolder no-drag" },
                        ve.createElement("div", { className: "avatarStatus" }),
                        ve.createElement("img", {
                          className: "avatar",
                          src: this.props.player.persona.avatar_url_full
                        })
                      ),
                      ve.createElement(
                        "div",
                        { className: "labelHolder" },
                        this.props.player.primary_display_name,
                        !this.props.player.is_display_name_nickname &&
                          this.props.player.has_secondary_display_name &&
                          ve.createElement(
                            "span",
                            { className: "playerNickname" },
                            " (",
                            this.props.player.secondary_display_name,
                            ")"
                          ),
                        this.props.player.is_display_name_nickname &&
                          ve.createElement(
                            "span",
                            {
                              className: "playerNicknameBracket",
                              title: Object(re.b)("#isNickname")
                            },
                            "*"
                          )
                      )
                    )
                  ),
                  ve.createElement(Li, {
                    classname: "useDefaultsCheckBox",
                    label: Object(re.b)("#FriendNotifications_UseDefaults"),
                    onChange: function(e) {
                      t.OnDefaultToggled(e);
                    },
                    checked: this.state.bUseDefaults
                  }),
                  ve.createElement(
                    "div",
                    { className: "SettingsGroup" },
                    ve.createElement(
                      "div",
                      {
                        className:
                          "FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"
                      },
                      ve.createElement(
                        "div",
                        { className: "FriendsSettingsNotificationRow_Label" },
                        Object(re.b)("#FriendSettings_Notification_Table_Label")
                      ),
                      ve.createElement(
                        "div",
                        {
                          className: "FriendsSettingsNotificationRow_Checkbox"
                        },
                        Object(re.b)("#FriendSettings_Notification_Table_Show")
                      ),
                      ve.createElement(
                        "div",
                        {
                          className: "FriendsSettingsNotificationRow_Checkbox"
                        },
                        Object(re.b)("#FriendSettings_Notification_Table_Play")
                      )
                    ),
                    ve.createElement(e, {
                      strLabel: Object(re.b)(
                        "#FriendSettings_FriendNotification_FriendJoins"
                      ),
                      strNameShow: "bNotifications_ShowIngame",
                      strNameSound: "bSounds_PlayIngame"
                    }),
                    ve.createElement(e, {
                      strLabel: Object(re.b)(
                        "#FriendSettings_FriendNotification_FriendOnline"
                      ),
                      strNameShow: "bNotifications_ShowOnline",
                      strNameSound: "bSounds_PlayOnline"
                    }),
                    ve.createElement(e, {
                      strLabel: Object(re.b)(
                        "#FriendSettings_Notification_ChatMessage"
                      ),
                      strNameShow: "bNotifications_ShowMessage",
                      strNameSound: "bSounds_PlayMessage"
                    })
                  )
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            )
          );
        }),
        R.c([M.a], e.prototype, "HandleSubmit", null),
        R.c([M.a], e.prototype, "OnSettingToggled", null),
        R.c([M.a], e.prototype, "FriendsSettingsCheckbox", null),
        R.c([M.a], e.prototype, "NotificationRow", null),
        R.c([M.a], e.prototype, "OnDefaultToggled", null),
        (e = R.c([Hi.observer], e))
      );
    })(ve.Component);
    function Er(e, t, n, o) {
      return Object(Zo.a)(
        ve.createElement(Dr, {
          browserContext: e,
          context: t,
          friend: n,
          ownerWindow: o.currentTarget.ownerDocument.defaultView
        }),
        o
      );
    }
    var wr = Object(Hi.observer)(function(e) {
        var t = e.friend,
          n = [],
          o = t.persona_name_history,
          i = t.persona_name_history_loaded;
        if (i && 0 < o.length)
          for (var r = 0, a = 0, s = o; a < s.length; a++) {
            var c = s[a];
            n.push(
              ve.createElement(
                "div",
                { className: "recentName", key: "name_history_" + r },
                c
              )
            ),
              r++;
          }
        else
          i
            ? n.push(
                ve.createElement(
                  "div",
                  { className: "recentName", key: "name_history_none" },
                  Object(re.b)("#Friend_Menu_RecentAliases_None")
                )
              )
            : n.push(
                ve.createElement(
                  "div",
                  { className: "recentName", key: "name_history_loading" },
                  Object(re.b)("#Friend_Menu_RecentAliases_Loading")
                )
              );
        return ve.createElement(
          ve.Fragment,
          null,
          ve.createElement(
            mr.e,
            { label: Object(re.b)("#Friend_Menu_RecentAliases") },
            n
          )
        );
      }),
      Mr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnToggle = function(e) {
            this.props.group.ToggleMemberRoleState(
              this.props.friend.accountid,
              e
            );
          }),
          (t.prototype.render = function() {
            var i = this,
              r = this.props.group.DefaultRoleID(),
              a = this.props.group.GetMemberRoleIDs(
                this.props.friend.accountid
              ),
              e = this.props.group.BIsAccountIDOwner(
                this.props.friend.accountid
              ),
              s = this.props.group.BCanEditRoles(),
              t = this.props.group
                .GetRoles()
                .slice()
                .sort(function(e, t) {
                  return e.role_id == r
                    ? 1
                    : t.role_id == r
                      ? -1
                      : parseInt(e.role_id) - parseInt(t.role_id);
                })
                .map(function(t) {
                  var e =
                    -1 !=
                    a.findIndex(function(e) {
                      return e == t.role_id;
                    });
                  if (!e && !s) return null;
                  var n = t.name,
                    o = i.props.group.BCanIAssignRole(t.role_id);
                  return (
                    t.role_id == r
                      ? (n = Object(re.b)("#ChatRoomRole_Member"))
                      : n.startsWith("#ChatRoomRole_") && (n = Object(re.b)(n)),
                    ve.createElement(Gr, {
                      key: t.role_id,
                      friend: i.props.friend,
                      group: i.props.group,
                      roleName: n,
                      roleID: t.role_id,
                      bHasRole: e,
                      bEditable: o
                    })
                  );
                }),
              n =
                s && !e
                  ? Object(re.b)("#Friend_Menu_EditRoles")
                  : Object(re.b)("#Friend_Menu_ViewRoles");
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                mr.e,
                { label: n },
                e
                  ? ve.createElement(
                      mr.d,
                      {
                        className: "FriendMenuRoleCheckbox disabled",
                        key: "role",
                        onSelected: function() {},
                        bInteractableItem: !0
                      },
                      ve.createElement(Qo.h, null),
                      "Owner"
                    )
                  : t
              )
            );
          }),
          R.c([M.a], t.prototype, "OnToggle", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Dr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ShowFriendProfile = function(e) {
            yr(e, this.props.friend.GetCommunityProfileURL()),
              e.stopPropagation();
          }),
          (t.prototype.InviteFriend = function() {
            var t = this;
            Yo.FriendStore.SendFriendInvite(this.props.friend).then(function(
              e
            ) {
              er(
                t.props.ownerWindow,
                Object(re.b)("#Friend_Menu_AddToFriendsList"),
                4 == e
                  ? Object(re.b)("#Friend_InviteSent")
                  : 3 == e
                    ? Object(re.b)(
                        "#Friend_MutualInviteSent",
                        t.props.friend.display_name
                      )
                    : Object(re.b)(
                        "#Friend_InviteError",
                        t.props.friend.display_name
                      )
              );
            });
          }),
          (t.prototype.AcceptIncomingInvite = function() {
            var t = this;
            Yo.FriendStore.SendFriendInvite(this.props.friend).then(function(
              e
            ) {
              er(
                t.props.ownerWindow,
                Object(re.b)("#Friend_Menu_AddToFriendsList"),
                3 == e
                  ? Object(re.b)(
                      "#Friend_MutualInviteSent",
                      t.props.friend.display_name
                    )
                  : Object(re.b)(
                      "#Friend_InviteError",
                      t.props.friend.display_name
                    )
              );
            });
          }),
          (t.prototype.IgnoreIncomingInvite = function() {
            var t = this;
            Yo.FriendStore.RemoveFriend(this.props.friend).then(function(e) {
              er(
                t.props.ownerWindow,
                Object(re.b)("#Friend_Menu_IgnoreIncomingInvite"),
                1 == e
                  ? Object(re.b)(
                      "#Friend_IgnoreIncomingInvite_Success",
                      t.props.friend.display_name
                    )
                  : Object(re.b)(
                      "#Friend_IgnoreIncomingInvite_Error",
                      t.props.friend.display_name
                    )
              );
            });
          }),
          (t.prototype.RemoveFriend = function() {
            var t = this,
              e = 4 == this.props.friend.efriendrelationship,
              n = Object(re.b)(
                e
                  ? "#Friend_Menu_CancelInvitation"
                  : "#Friend_Menu_RemoveFromFriendsList"
              ),
              o = Object(re.b)(
                e
                  ? "#Friend_CancelInvitation_Confirm"
                  : "#Friend_RemoveFromFriendsList_Confirm",
                this.props.friend.display_name
              ),
              i = Object(re.b)(
                e ? "#Button_Confirm" : "#Friend_Menu_RemoveFromFriendsList"
              ),
              r = Object(re.b)(
                e
                  ? "#Friend_CancelInvitation_Error"
                  : "#Friend_RemoveFromFriendsList_Error"
              );
            Zi(
              this.props.ownerWindow,
              n,
              o,
              i,
              Object(re.b)("#Button_Cancel"),
              !0
            )
              .then(function() {
                Yo.FriendStore.RemoveFriend(t.props.friend).then(function(e) {
                  (3 != e && 6 != e) || er(t.props.ownerWindow, n, r);
                });
              })
              .catch(function() {});
          }),
          (t.prototype.BlockFriend = function() {
            var e = this;
            Zi(
              this.props.ownerWindow,
              Object(re.b)("#Friend_Menu_BlockAllCommunication"),
              Object(re.b)(
                "#Friend_Block_Confirm",
                this.props.friend.display_name
              ),
              Object(re.b)("#Friend_Menu_BlockAllCommunication")
            )
              .then(function() {
                Yo.FriendStore.BlockPlayer(e.props.friend);
              })
              .catch(function() {});
          }),
          (t.prototype.UnblockFriend = function() {
            var e = this;
            Zi(
              this.props.ownerWindow,
              Object(re.b)("#Friend_Menu_UnblockAllCommunication"),
              Object(re.b)(
                "#Friend_Unblock_Confirm",
                this.props.friend.display_name
              ),
              Object(re.b)("#Friend_Menu_UnblockAllCommunication")
            )
              .then(function() {
                Yo.FriendStore.BlockPlayer(e.props.friend, !0);
              })
              .catch(function() {});
          }),
          (t.prototype.InviteToGame = function(e) {
            Yo.FriendStore.InviteToGame(this.props.friend, e);
          }),
          (t.prototype.InviteToLobby = function(e, t) {
            Yo.FriendStore.InviteToLobby(this.props.friend, e, t);
          }),
          (t.prototype.InviteToWatch = function() {
            Yo.FriendStore.InviteToWatch(this.props.friend);
          }),
          (t.prototype.InviteToVoice = function(e, t) {
            Fl(
              { invitee: this.props.friend, invitedto: e },
              null,
              this.props.ownerWindow
            );
          }),
          (t.prototype.render = function() {
            var e,
              t = this,
              o = this.props,
              n = o.context || {},
              i = [],
              r = [],
              a = o.friend,
              s = Yo.FriendStore.FavoritesStore,
              c = Yo.FriendStore.self == a,
              l = "favorites" == n.chatContext,
              p = (l || "friendslist" == n.chatContext || n.chatContext,
              n.group);
            !p && n.chat instanceof Tt && (p = n.chat.GetGroup());
            var u = !1,
              m = Yo.ChatStore.GetActiveVoiceChat(),
              d = void 0,
              h = !1;
            null == m || m instanceof zt || ((h = !0), (d = m));
            var _ = a.is_friend,
              f = 2 == a.efriendrelationship,
              g = 4 == a.efriendrelationship,
              b = f || 4 == a.efriendrelationship,
              v = Yo.FriendStore.self.persona.m_unGamePlayedAppID,
              S = a.persona.m_unGamePlayedAppID;
            if (
              (n.chat &&
                (n.chat instanceof zt
                  ? (e = n.chat).BVoiceActive() && (u = !0)
                  : n.chat instanceof Tt && n.chat.BVoiceActive() && (u = !0)),
              _ ||
                f ||
                c ||
                i.push(
                  ve.createElement(
                    "div",
                    {
                      className: "contextMenuLabel contextMenuNotAFriend",
                      key: "header"
                    },
                    Object(re.b)("#Friend_Menu_NotAFriendLabel")
                  )
                ),
              u &&
                !c &&
                i.push(ve.createElement(Tr, { friend: this.props.friend })),
              n.tab &&
                i.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "closetab",
                      onSelected: function() {
                        Yo.UIStore.CloseTab(o.browserContext, n.tab);
                      }
                    },
                    Object(re.b)("#Chat_CloseTabAction")
                  )
                ),
              e ||
                n.tab ||
                f ||
                g ||
                c ||
                a.is_blocked ||
                i.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "chat",
                      className: _ ? "" : "notFriends",
                      onSelected: function() {
                        o.friend.OpenChatDialog(o.browserContext);
                      }
                    },
                    Object(re.b)("#Friend_Menu_SendMessage")
                  )
                ),
              !h ||
                !a.persona.is_online ||
                e ||
                f ||
                g ||
                c ||
                a.is_blocked ||
                i.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "voicechat",
                      className: "contextVoiceInvite",
                      onSelected: function() {
                        t.InviteToVoice(d, n);
                      }
                    },
                    ve.createElement(Qo.cb, null),
                    Object(re.b)("#Chat_Actions_InviteFriend_VoiceChat")
                  )
                ),
              i.push(
                ve.createElement(
                  mr.d,
                  { key: "viewprofile", onSelected: this.ShowFriendProfile },
                  Object(re.b)("#Friend_Menu_ViewProfile")
                )
              ),
              p &&
                i.push(
                  ve.createElement(Lr, {
                    key: "moderationoptions",
                    friend: a,
                    bIsSelf: c,
                    group: p,
                    ownerWindow: o.ownerWindow
                  })
                ),
              !c)
            ) {
              if (_) {
                if (
                  (r.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "setnickname",
                        onSelected: function() {
                          nr(o.browserContext, o.friend, o.ownerWindow);
                        }
                      },
                      Object(re.b)(
                        o.friend.has_nickname
                          ? "#Friend_Menu_ChangeNickname"
                          : "#Friend_Menu_AddNickname"
                      )
                    )
                  ),
                  s.BIsFavorited({ friend: a }))
                )
                  (l ? i : r).push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "quickaccess",
                        onSelected: function(e) {
                          Yo.FriendStore.FavoritesStore.RemoveFromFavorites({
                            friend: e
                          });
                        }.bind(null, a)
                      },
                      Object(re.b)("#Friend_Menu_RemoveFromQuickAccess")
                    )
                  );
                else
                  r.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "quickaccess",
                        onSelected: function(e) {
                          Yo.FriendStore.FavoritesStore.AddToFavorites({
                            friend: e
                          });
                        }.bind(null, a)
                      },
                      Object(re.b)("#Friend_Menu_AddToQuickAccess")
                    )
                  );
                if (
                  (r.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "managecategories",
                        onSelected: function() {
                          var e, t, n;
                          (e = o.browserContext),
                            (t = o.ownerWindow),
                            (n = o.friend),
                            0 ==
                            Yo.FriendStore.FriendGroupStore.user_groups.length
                              ? sr(e, t, n)
                              : Ji(
                                  ve.createElement(lr, {
                                    browserContext: e,
                                    friend: n
                                  }),
                                  t,
                                  "AssignFriendCategoryDialog",
                                  {
                                    strTitle: Object(re.b)(
                                      "#FriendGroup_Menu_CreateGroup"
                                    ),
                                    popupWidth: 664,
                                    popupHeight: 580
                                  }
                                );
                        }
                      },
                      Object(re.b)("#FriendGroup_Menu_Categorize")
                    )
                  ),
                  r.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "notifications",
                        onSelected: function() {
                          return (
                            o.browserContext,
                            (e = o.friend),
                            (t = o.ownerWindow),
                            void Ji(
                              ve.createElement(Or, { player: e }),
                              t,
                              "FriendNotificationsDialog",
                              {
                                strTitle: Object(re.b)(
                                  "#Friend_Menu_Notifications"
                                ),
                                popupWidth: 640,
                                popupHeight: 490
                              }
                            )
                          );
                          var e, t;
                        }
                      },
                      Object(re.b)("#Friend_Menu_Notifications")
                    )
                  ),
                  l ||
                    r.push(
                      ve.createElement(
                        mr.d,
                        { key: "removefriend", onSelected: this.RemoveFriend },
                        Object(re.b)("#Friend_Menu_RemoveFromFriendsList")
                      )
                    ),
                  r.push(ve.createElement(wr, { key: "aliases", friend: a })),
                  Yo.FriendStore.self.persona.is_ingame &&
                    Yo.BroadcastStore.is_broadcast_capable &&
                    i.push(
                      ve.createElement(
                        mr.d,
                        {
                          key: "invitetowatch",
                          onSelected: function() {
                            t.InviteToWatch();
                          }
                        },
                        Object(re.b)("#Friend_Menu_InviteToWatch")
                      )
                    ),
                  0 != v && "0" != Yo.FriendStore.self.persona.m_game_lobby_id)
                ) {
                  var y = Yo.AppInfoStore.GetAppInfo(v);
                  i.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "lobbyinvite",
                        onSelected: function() {
                          t.InviteToLobby(
                            v,
                            Yo.FriendStore.self.persona.m_game_lobby_id
                          );
                        }
                      },
                      Object(re.b)("#Friend_Menu_InviteToLobby"),
                      ve.createElement(
                        "div",
                        { className: "contextMenuSectionHeader" },
                        ve.createElement(
                          "div",
                          { className: "contextMenuGameIcon" },
                          ve.createElement("img", {
                            className: "GameIcon",
                            src: y.icon_url
                          })
                        ),
                        ve.createElement(
                          "div",
                          { className: "contextMenuGameName" },
                          y.name
                        )
                      )
                    )
                  );
                } else if (0 != v && v != S) {
                  y = Yo.AppInfoStore.GetAppInfo(v);
                  i.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "gameinvite",
                        onSelected: function() {
                          t.InviteToGame(v);
                        }
                      },
                      Object(re.b)("#Friend_Menu_InviteToGame"),
                      ve.createElement(
                        "div",
                        { className: "contextMenuSectionHeader" },
                        ve.createElement(
                          "div",
                          { className: "contextMenuGameIcon" },
                          ve.createElement("img", {
                            className: "GameIcon",
                            src: y.icon_url
                          })
                        ),
                        ve.createElement(
                          "div",
                          { className: "contextMenuGameName" },
                          y.name
                        )
                      )
                    )
                  );
                }
                i.push(ve.createElement(Rr, { key: "trading", friend: a }));
              } else
                f
                  ? (i.push(
                      ve.createElement(
                        mr.d,
                        {
                          key: "acceptincominginvite",
                          onSelected: this.AcceptIncomingInvite
                        },
                        Object(re.b)("#Friend_Menu_AcceptIncomingInvite")
                      )
                    ),
                    i.push(
                      ve.createElement(
                        mr.d,
                        {
                          key: "ignoreincominginvite",
                          onSelected: this.IgnoreIncomingInvite
                        },
                        Object(re.b)("#Friend_Menu_IgnoreIncomingInvite")
                      )
                    ),
                    i.push(ve.createElement(wr, { key: "aliases", friend: a })))
                  : g
                    ? i.push(
                        ve.createElement(
                          mr.d,
                          { key: "remove", onSelected: this.RemoveFriend },
                          Object(re.b)("#Friend_Menu_CancelInvitation")
                        )
                      )
                    : i.push(
                        ve.createElement(
                          mr.d,
                          { key: "invite", onSelected: this.InviteFriend },
                          Object(re.b)("#Friend_Menu_AddToFriendsList")
                        )
                      );
              b &&
                i.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "setnickname",
                      onSelected: function() {
                        nr(o.browserContext, o.friend, o.ownerWindow);
                      }
                    },
                    Object(re.b)(
                      o.friend.has_nickname
                        ? "#Friend_Menu_ChangeNickname"
                        : "#Friend_Menu_AddNickname"
                    )
                  )
                ),
                (l && !a.is_blocked) ||
                  r.push(
                    ve.createElement(
                      mr.d,
                      {
                        key: "block",
                        onSelected: a.is_blocked
                          ? this.UnblockFriend
                          : this.BlockFriend
                      },
                      Object(re.b)(
                        a.is_blocked
                          ? "#Friend_Menu_UnblockAllCommunication"
                          : "#Friend_Menu_BlockAllCommunication"
                      )
                    )
                  );
            }
            return i
              ? ve.createElement(
                  mr.c,
                  { className: "friendsContextMenu" },
                  i,
                  1 == r.length && r,
                  1 < r.length &&
                    ve.createElement(
                      mr.e,
                      { label: Object(re.b)("#Friend_Menu_Manage") },
                      r
                    ),
                  !!a.persona.m_broadcastAccountId &&
                    !c &&
                    IsFeatureBroadcastEnabled() &&
                    ve.createElement(Ar, {
                      friend: a,
                      ownerWindow: o.ownerWindow,
                      browserContext: o.browserContext
                    }),
                  !!a.persona.m_unGamePlayedAppID &&
                    !c &&
                    ve.createElement(kr, {
                      unAppID: a.persona.m_unGamePlayedAppID,
                      strGameName: a.persona.current_game_name,
                      ulGameID: a.persona.m_gameid,
                      friend: a
                    })
                )
              : null;
          }),
          R.c([M.a], t.prototype, "ShowFriendProfile", null),
          R.c([M.a], t.prototype, "InviteFriend", null),
          R.c([M.a], t.prototype, "AcceptIncomingInvite", null),
          R.c([M.a], t.prototype, "IgnoreIncomingInvite", null),
          R.c([M.a], t.prototype, "RemoveFriend", null),
          R.c([M.a], t.prototype, "BlockFriend", null),
          R.c([M.a], t.prototype, "UnblockFriend", null),
          R.c([M.a], t.prototype, "InviteToGame", null),
          R.c([M.a], t.prototype, "InviteToLobby", null),
          R.c([M.a], t.prototype, "InviteToWatch", null),
          R.c([M.a], t.prototype, "InviteToVoice", null),
          t
        );
      })(ve.PureComponent),
      Tr = (function(o) {
        function e(e) {
          var t = o.call(this, e) || this,
            n = Yo.VoiceStore.ConvertGainValueToSliderValue(
              Yo.VoiceStore.GetPerUserGainLevel(t.props.friend.accountid),
              Ao.k_MaxPerUserGainMultiplier
            );
          return (t.state = { volumeNumber: n }), t;
        }
        return (
          R.d(e, o),
          (e.prototype.OnFriendVolumeChanged = function(e) {
            Yo.VoiceStore.SetPerUserGainLevel(
              this.props.friend.accountid,
              Yo.VoiceStore.ConvertSliderToGainValue(
                e,
                Ao.k_MaxPerUserGainMultiplier
              )
            ),
              this.setState({ volumeNumber: e });
          }),
          (e.prototype.OnMutingClick = function(e) {
            var t = Yo.VoiceStore.GetPerUserMuting(this.props.friend.accountid);
            Yo.VoiceStore.SetPerUserMuting(this.props.friend.accountid, !t),
              this.forceUpdate();
          }),
          (e.prototype.OnInlineVolumeClick = function(e) {
            this.forceUpdate();
          }),
          (e.prototype.render = function() {
            var e = this.state.volumeNumber,
              t = "VolumeIcon",
              n = Yo.VoiceStore.GetPerUserMuting(this.props.friend.accountid);
            return (
              65 < e
                ? (t += " HighestVolume")
                : 45 < e
                  ? (t += " HighVolume")
                  : e < 46 && 24 < e
                    ? (t += " MedVolume")
                    : e < 25 && (t += " LowVolume"),
              ve.createElement(
                mr.d,
                {
                  key: "volume",
                  onSelected: function() {},
                  bInteractableItem: !0
                },
                ve.createElement(
                  "div",
                  {
                    className: "InlineVolume" + (n ? " Muted" : ""),
                    onClick: this.OnInlineVolumeClick
                  },
                  ve.createElement(
                    "button",
                    { className: t, onClick: this.OnMutingClick },
                    ve.createElement(Qo.db, null)
                  ),
                  ve.createElement(Pi, {
                    min: 0,
                    max: 100,
                    label: "",
                    value: e,
                    onChange: this.OnFriendVolumeChanged
                  }),
                  ve.createElement(
                    "div",
                    { className: "volumePercentage" },
                    2 * e,
                    "%"
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnFriendVolumeChanged", null),
          R.c([M.a], e.prototype, "OnMutingClick", null),
          R.c([M.a], e.prototype, "OnInlineVolumeClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Gr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnChange = function(e) {
            this.props.group.SetMemberRoleState(
              this.props.friend.accountid,
              this.props.roleID,
              e
            );
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              mr.d,
              {
                className:
                  "FriendMenuRoleCheckbox" +
                  (this.props.bEditable ? "" : " disabled"),
                key: "role",
                onSelected: function() {},
                bInteractableItem: !0
              },
              ve.createElement(Li, {
                label: this.props.roleName,
                checked: this.props.bHasRole,
                onChange: this.OnChange,
                disabled: !this.props.bEditable
              })
            );
          }),
          R.c([M.a], t.prototype, "OnChange", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Rr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.SendTradeOffer = function(e) {
            var t = "NewTradeOffer" + this.props.friend.accountid;
            Yu(e)
              .open(
                Yo.EconomyStore.GetDefaultTradeOfferURLForFriend(
                  this.props.friend.accountid
                ),
                t,
                "height=1120,width=1028,resize=yes,scrollbars=yes"
              )
              .focus();
          }),
          (t.prototype.InviteToTrade = function() {
            Yo.FriendStore.InviteToTrade(this.props.friend);
          }),
          (t.prototype.render = function() {
            var e = this.props.friend;
            return ve.createElement(
              mr.e,
              { label: Object(re.b)("#FriendMenu_Trading") },
              ve.createElement(Nr, { friend: e }),
              ve.createElement(
                mr.d,
                { onSelected: this.SendTradeOffer },
                Object(re.b)("#FriendMenu_SendTradeOffer")
              ),
              e.persona.is_online &&
                ve.createElement(
                  mr.d,
                  { onSelected: this.InviteToTrade },
                  Object(re.b)("#Friend_Menu_InviteToTrade")
                )
            );
          }),
          R.c([M.a], t.prototype, "SendTradeOffer", null),
          R.c([M.a], t.prototype, "InviteToTrade", null),
          t
        );
      })(ve.Component);
    function Nr(t) {
      return ve.createElement(
        mr.d,
        {
          onSelected: function(e) {
            yr(e, t.friend.GetCommunityProfileURL() + "inventory/");
          }
        },
        Object(re.b)("#FriendMenu_ViewInventory")
      );
    }
    var Lr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.BanFriend = function() {
            return R.b(this, void 0, void 0, function() {
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return [
                      4,
                      $i(
                        this.props.ownerWindow,
                        Object(re.b)("#Friend_Ban"),
                        Object(re.b)(
                          "#Friend_Ban_Confirm",
                          this.props.friend.display_name
                        ),
                        Object(re.b)("#Friend_Ban_Button"),
                        Object(re.b)("#Button_Cancel"),
                        !0
                      )
                    ];
                  case 1:
                    return (
                      e.sent() &&
                        this.props.group.SetUserBanState(
                          this.props.friend.accountid,
                          !0
                        ),
                      [2]
                    );
                }
              });
            });
          }),
          (t.prototype.OnKickFriend = function() {
            var o = this,
              e = this.props.group,
              i = Vr,
              r = this.props.ownerWindow;
            new Promise(function(e, t) {
              var n = tr(
                r,
                Object(re.b)("#Friend_Kick", o.props.friend.display_name)
              );
              Ji(
                ve.createElement(xr, {
                  OnOK: e,
                  OnCancel: t,
                  OnSet: function(e) {
                    i = e;
                  }
                }),
                r,
                "alertdialog",
                n
              );
            })
              .then(function() {
                return e.KickUser(
                  o.props.friend.accountid,
                  Math.floor(Date.now() / 1e3 + i)
                );
              })
              .catch(function() {});
          }),
          (t.prototype.render = function() {
            var e = [],
              t = this.props.friend,
              n = this.props.group;
            return (
              n.BHasMember(t.accountid)
                ? (!this.props.bIsSelf &&
                    n.BCanKick() &&
                    e.push(
                      ve.createElement(
                        mr.d,
                        {
                          disabled: !n.BCanKickMember(t.accountid),
                          key: "kick",
                          onSelected: this.OnKickFriend
                        },
                        Object(re.b)("#Friend_Menu_KickFromChatRoom")
                      )
                    ),
                  !this.props.bIsSelf &&
                    n.BCanBan() &&
                    e.push(
                      ve.createElement(
                        mr.d,
                        {
                          disabled: !n.BCanBanMember(t.accountid),
                          key: "ban",
                          onSelected: this.BanFriend
                        },
                        Object(re.b)("#Friend_Menu_Ban")
                      )
                    ),
                  n &&
                    e.push(
                      ve.createElement(Mr, {
                        key: "editroles",
                        friend: t,
                        group: n,
                        bEditable: n.BCanEditRoles()
                      })
                    ))
                : e.push(
                    ve.createElement(
                      mr.d,
                      { disabled: !0, key: "notmember", onSelected: null },
                      Object(re.b)("#Friend_Menu_HasLeftChat")
                    )
                  ),
              e
            );
          }),
          R.c([M.a], t.prototype, "BanFriend", null),
          R.c([M.a], t.prototype, "OnKickFriend", null),
          t
        );
      })(ve.Component),
      kr = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              bShowViewGameInfo: void 0,
              bIsSubscribedToApp: void 0
            }),
            _o.b.BIsSubscribedApp(t.props.unAppID).then(function(e) {
              t.setState({
                bShowViewGameInfo: _o.b.BClientSupportsMessage(
                  "ViewGameInfoForSteamID"
                ),
                bIsSubscribedToApp: e
              });
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.ShowStorePage = function(e) {
            yr(e, G.a.STORE_BASE_URL + "app/" + this.props.unAppID),
              e.stopPropagation();
          }),
          (e.prototype.ShowCommunityHub = function(e) {
            yr(e, G.a.COMMUNITY_BASE_URL + "app/" + this.props.unAppID),
              e.stopPropagation();
          }),
          (e.prototype.LaunchGame = function(e) {
            yr(
              e,
              "steam://rungameid/" + (this.props.ulGameID || this.props.unAppID)
            ),
              e.stopPropagation();
          }),
          (e.prototype.WatchGame = function(e) {
            if (
              "undefined" != typeof SteamClient &&
              void 0 !== SteamClient.WebChat
            ) {
              var t = "steam://broadcast/watch/" + this.props.friend.steamid64,
                n = zu(this, e);
              SteamClient.WebChat.OpenURLInClient(t, n.m_unPID);
            } else {
              yr(
                e,
                G.a.COMMUNITY_BASE_URL +
                  "broadcast/watch/" +
                  this.props.friend.steamid64
              ),
                e.stopPropagation();
            }
          }),
          (e.prototype.JoinGame = function(t) {
            var n = this,
              o = this.props.friend;
            o.persona.has_joinable_game_flag || o.persona.has_server_ip
              ? _o.b
                  .OpenJoinGameDialog(o.steamid64)
                  .then(function(e) {
                    e.success || n.JoinLobby(o, t);
                  })
                  .catch(function() {
                    n.JoinLobby(o, t);
                  })
              : this.JoinLobby(o, t);
          }),
          (e.prototype.ViewGameInfo = function(e) {
            var t = this.props.friend;
            _o.b.ViewGameInfoForSteamID(t.steamid64);
          }),
          (e.prototype.JoinLobby = function(e, t) {
            e.persona.is_in_valid_lobby
              ? yr(
                  t,
                  "steam://joinlobby/" +
                    e.persona.m_gameid +
                    "/" +
                    e.persona.m_game_lobby_id +
                    "/" +
                    e.steamid64
                )
              : this.LaunchGame(t);
          }),
          (e.prototype.ShowInSteam = function(e) {
            yr(e, "steam://store/" + this.props.unAppID), e.stopPropagation();
          }),
          (e.prototype.render = function() {
            if (!this.props.unAppID) return null;
            var e = [],
              t = void 0,
              n = this.props.friend,
              o = Yo.AppInfoStore.GetAppInfo(this.props.unAppID);
            if (!o.is_valid) return null;
            if (o.is_initialized)
              if (this.props.bShowLargeHeader)
                t = ve.createElement(
                  "div",
                  { className: "contextMenuGameHeader" },
                  ve.createElement("img", {
                    className: "GameHeader",
                    src: o.logo_url
                  })
                );
              else {
                var i = ve.createElement(
                  "span",
                  { className: "contextMenuGameName" },
                  Object(re.b)(
                    "#Friend_Menu_ViewGameStorePageGameName",
                    this.props.strGameName || o.name
                  )
                );
                t = ve.createElement(
                  "div",
                  { className: "contextMenuSectionHeader" },
                  ve.createElement(
                    "div",
                    { className: "contextMenuGameIcon" },
                    ve.createElement("img", {
                      className: "GameIcon",
                      src: o.icon_url
                    })
                  ),
                  i
                );
              }
            return (
              void 0 === this.state.bIsSubscribedToApp
                ? e.push(
                    ve.createElement(
                      mr.d,
                      {
                        className:
                          "contextMenuGameOptions contextMenuPlayButton",
                        key: "showinsteam",
                        onSelected: this.ShowInSteam
                      },
                      ve.createElement(Qo.G, null),
                      Object(re.b)("#Friend_Menu_ShowInSteam")
                    )
                  )
                : this.state.bIsSubscribedToApp &&
                  (n &&
                    (n.persona.is_in_joinable_game ||
                      n.persona.is_in_valid_lobby) &&
                    e.push(
                      ve.createElement(
                        mr.d,
                        {
                          className:
                            "contextMenuGameOptions contextMenuPlayButton",
                          key: "joingame",
                          onSelected: this.JoinGame
                        },
                        ve.createElement(Qo.G, null),
                        Object(re.b)("#Friend_Menu_JoinFriendGame")
                      )
                    ),
                  e.push(
                    ve.createElement(
                      mr.d,
                      {
                        className:
                          "contextMenuGameOptions contextMenuPlayButton",
                        key: "launchgame",
                        onSelected: this.LaunchGame
                      },
                      ve.createElement(Qo.G, null),
                      Object(re.b)("#Friend_Menu_LaunchFriendGame")
                    )
                  )),
              n &&
                e.push(
                  ve.createElement(
                    mr.d,
                    {
                      className: "contextMenuGameOptions",
                      key: "watchgame",
                      onSelected: this.WatchGame
                    },
                    Object(re.b)("#Friend_Menu_WatchFriendGame")
                  )
                ),
              n &&
                this.state.bShowViewGameInfo &&
                e.push(
                  ve.createElement(
                    mr.d,
                    {
                      className: "contextMenuGameOptions",
                      key: "viewgameinfo",
                      onSelected: this.ViewGameInfo
                    },
                    Object(re.b)("#Friend_Menu_ViewGameInfo")
                  )
                ),
              e.push(
                ve.createElement(
                  mr.d,
                  {
                    className: "contextMenuGameOptions",
                    key: "viewstorepage",
                    onSelected: this.ShowStorePage
                  },
                  Object(re.b)("#Friend_Menu_ViewGameStorePage")
                )
              ),
              e.push(
                ve.createElement(
                  mr.d,
                  {
                    className: "contextMenuGameOptions",
                    key: "viewcommunityhub",
                    onSelected: this.ShowCommunityHub
                  },
                  Object(re.b)("#Friend_Menu_ViewCommunityHub")
                )
              ),
              ve.createElement(
                ve.Fragment,
                null,
                ve.createElement(
                  mr.d,
                  {
                    className: "contextMenuGameTitle contextMenuUnselectable",
                    onSelected: null
                  },
                  t
                ),
                ve.createElement(
                  "div",
                  { className: "contextMenuSectionContent" },
                  e
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "ShowStorePage", null),
          R.c([M.a], e.prototype, "ShowCommunityHub", null),
          R.c([M.a], e.prototype, "LaunchGame", null),
          R.c([M.a], e.prototype, "WatchGame", null),
          R.c([M.a], e.prototype, "JoinGame", null),
          R.c([M.a], e.prototype, "ViewGameInfo", null),
          R.c([M.a], e.prototype, "ShowInSteam", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ar = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.WatchStream = function() {
            var e = this.props.browserContext,
              t = this.props.friend,
              n = t.persona.m_broadcastAccountId;
            Yo.UIStore.ShowOrActivateBroadcast(e, n, !0).ShowWatchPromptDialog(
              t
            );
          }),
          (t.prototype.render = function() {
            var e = this.props.friend;
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                mr.d,
                {
                  className: "contextMenuBroadcast contextMenuUnselectable",
                  onSelected: null
                },
                ve.createElement(
                  "div",
                  { className: "contextMenuBroadcastTitle" },
                  Object(re.b)("#Broadcast_Watching")
                ),
                ve.createElement(
                  "div",
                  { className: "contextMenuBroadcastSubtitle" },
                  e.GetBroadcastDescription()
                )
              ),
              ve.createElement(
                "div",
                { className: "contextMenuSectionContent" },
                ve.createElement(
                  mr.d,
                  {
                    className: "contextMenuGameOptions",
                    onSelected: this.WatchStream
                  },
                  Object(re.b)("#Broadcast_WatchStream")
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "WatchStream", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    function Pr(e, t, n) {
      return Object(Zo.a)(
        ve.createElement(Fr, {
          browserContext: e,
          group: t,
          ownerWindow: n.currentTarget.ownerDocument.defaultView
        }),
        n
      );
    }
    function Fr(o) {
      var e = [];
      return (
        o.group &&
          o.group.modifiable &&
          (e.push(
            ve.createElement(
              mr.d,
              {
                key: "managegroup",
                onSelected: function() {
                  var e, t, n;
                  (e = o.browserContext),
                    (t = o.group),
                    (n = o.ownerWindow),
                    Ji(
                      ve.createElement(cr, {
                        browserContext: e,
                        group: t,
                        rgPreSelectedFriends: t.member_accountid_list
                      }),
                      n,
                      "CreateFriendCategoryDialog",
                      {
                        strTitle: Object(re.b)("#FriendGroup_Menu_Manage"),
                        popupWidth: 664,
                        popupHeight: 700
                      }
                    );
                }
              },
              Object(re.b)("#FriendGroup_Menu_Manage")
            )
          ),
          e.push(
            ve.createElement(
              mr.d,
              {
                key: "removegroup",
                onSelected: function() {
                  Yo.FriendStore.FriendGroupStore.RemoveGroup(o.group);
                }
              },
              Object(re.b)("#FriendGroup_Menu_Remove")
            )
          )),
        ve.createElement(
          mr.c,
          { className: "friendsContextMenu" },
          e,
          ve.createElement(
            mr.d,
            {
              key: "creategroup",
              onSelected: function() {
                sr(o.browserContext, o.ownerWindow);
              }
            },
            Object(re.b)("#FriendGroup_Menu_CreateGroup")
          )
        )
      );
    }
    var Br = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.SetUserOnline = function() {
            Yo.FriendStore.SetUserPersonaState(1);
          }),
          (e.prototype.SetUserInvisible = function() {
            Yo.FriendStore.SetUserPersonaState(7);
          }),
          (e.prototype.SetUserAway = function() {
            Yo.FriendStore.SetUserPersonaState(3);
          }),
          (e.prototype.SetUserOffline = function() {
            Yo.SignOutOfFriends(this.props.browserContext);
          }),
          (e.prototype.ToggleUserDND = function() {
            Yo.FriendStore.SetUserDoNotDisturb(
              !Yo.FriendStore.GetUserDoNotDisturb()
            );
          }),
          (e.prototype.ShowUserProfile = function(e) {
            yr(e, Yo.FriendStore.self.GetCommunityProfileURL()),
              e.stopPropagation();
          }),
          (e.prototype.EditProfile = function(e) {
            yr(e, Yo.FriendStore.self.GetCommunityProfileURL() + "edit"),
              e.stopPropagation();
          }),
          (e.prototype.EditName = function(e) {
            var t;
            this.props.browserContext,
              (t = this.props.ownerWindow),
              Ji(ve.createElement(Ir, null), t, "ChangePersonaDialog", {
                strTitle: Object(re.b)("#Friend_Menu_AddNickname"),
                popupWidth: 640,
                popupHeight: 400
              });
          }),
          (e.prototype.render = function() {
            var e = [],
              t = [],
              n = 1 == Yo.FriendStore.self.persona.m_ePersonaState;
            e.push(
              ve.createElement(
                mr.b,
                {
                  key: "state_online",
                  bChecked: n,
                  onSelected: this.SetUserOnline
                },
                Object(re.b)("#PersonaStateOnline")
              )
            );
            var o = 3 == Yo.FriendStore.self.persona.m_ePersonaState;
            e.push(
              ve.createElement(
                mr.b,
                {
                  key: "state_away",
                  bChecked: o,
                  onSelected: this.SetUserAway
                },
                Object(re.b)("#PersonaStateAway")
              )
            );
            var i = 7 == Yo.FriendStore.self.persona.m_ePersonaState;
            if (
              (e.push(
                ve.createElement(
                  mr.b,
                  {
                    key: "state_invisible",
                    bChecked: i,
                    onSelected: this.SetUserInvisible
                  },
                  Object(re.b)("#PersonaStateInvisible"),
                  ve.createElement(
                    "div",
                    { className: "persona_menu_descriptor" },
                    Object(re.b)("#PersonaStateInvisibleDescriptor")
                  )
                )
              ),
              G.a.IN_CLIENT &&
                Yo.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb"))
            ) {
              var r = 0 == Yo.FriendStore.self.persona.m_ePersonaState;
              e.push(
                ve.createElement(
                  mr.b,
                  {
                    key: "state_offline",
                    bChecked: r,
                    onSelected: this.SetUserOffline
                  },
                  Object(re.b)("#PersonaStateOffline"),
                  ve.createElement(
                    "div",
                    { className: "persona_menu_descriptor" },
                    Object(re.b)("#PersonaStateOfflineDescriptor")
                  )
                )
              );
            }
            if (Yo.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")) {
              var a = Yo.FriendStore.GetUserDoNotDisturb();
              t.push(
                ve.createElement(
                  mr.b,
                  {
                    key: "do_not_disturb",
                    bChecked: !1,
                    onSelected: this.ToggleUserDND
                  },
                  ve.createElement(Li, {
                    key: "dnd_checkbox",
                    classname: "DNDCheckBox",
                    checked: a,
                    label: Object(re.b)("#User_ToggleDoNotDisturb")
                  }),
                  ve.createElement(
                    "div",
                    { className: "persona_menu_dnd_descriptor" },
                    Object(re.b)("#PersonaStateDoNotDisturbDescriptor")
                  )
                )
              );
            }
            return (
              t.push(
                ve.createElement(
                  mr.d,
                  { key: "editname", onSelected: this.EditName },
                  Object(re.b)("#Friend_Menu_ChangeMyName")
                )
              ),
              t
                ? ve.createElement(
                    mr.c,
                    { className: "friendsContextMenu currentUserContextMenu" },
                    ve.createElement(
                      "div",
                      { className: "contextMenuSectionContent" },
                      e
                    ),
                    t
                  )
                : null
            );
          }),
          R.c([M.a], e.prototype, "SetUserOnline", null),
          R.c([M.a], e.prototype, "SetUserInvisible", null),
          R.c([M.a], e.prototype, "SetUserAway", null),
          R.c([M.a], e.prototype, "SetUserOffline", null),
          R.c([M.a], e.prototype, "ToggleUserDND", null),
          R.c([M.a], e.prototype, "ShowUserProfile", null),
          R.c([M.a], e.prototype, "EditProfile", null),
          R.c([M.a], e.prototype, "EditName", null),
          e
        );
      })(ve.PureComponent),
      Vr = 3600,
      xr = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnCancel = function() {
            this.props.OnCancel(), this.props.closeModal();
          }),
          (t.prototype.OnOK = function() {
            this.props.OnOK(), this.props.closeModal();
          }),
          (t.prototype.OnDropDownChange = function(e, t) {
            this.props.OnSet(e.data);
          }),
          (t.prototype.render = function() {
            var e = [
              { label: Object(re.b)("#Friend_Kick_Hour"), data: Vr },
              { label: Object(re.b)("#Friend_Kick_Day"), data: 86400 },
              { label: Object(re.b)("#Friend_Kick_Week"), data: 604800 }
            ];
            return ve.createElement(
              Ki,
              { onEscKeypress: this.OnCancel },
              ve.createElement(
                Oi,
                {
                  classNameContent: "KickUserDialog",
                  onSubmit: this.OnOK,
                  bCenterVertically: !0
                },
                ve.createElement(
                  mi,
                  null,
                  " ",
                  Object(re.b)("#Friend_Kick"),
                  " "
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    _i,
                    null,
                    Object(re.b)("#Friend_Kick_How_Long")
                  ),
                  ve.createElement(Fi, {
                    strDefaultLabel: Object(re.b)("#Friend_Kick_Hour"),
                    rgOptions: e,
                    onChange: this.OnDropDownChange,
                    selectedOption: void 0
                  })
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, {
                    onCancel: this.OnCancel,
                    strOKText: Object(re.b)("#Friend_Kick_Button"),
                    strCancelText: Object(re.b)("#Button_Cancel")
                  })
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnCancel", null),
          R.c([M.a], t.prototype, "OnOK", null),
          R.c([M.a], t.prototype, "OnDropDownChange", null),
          t
        );
      })(ve.Component);
    function Ur(e, t, n, o, i) {
      jr(e, t, n, o, !1, i);
    }
    function jr(e, t, n, o, i, r) {
      Ji(
        ve.createElement(zr, {
          browserContext: e,
          chatRoomGroup: n,
          chatRoom: o,
          bIsDropInvite: i,
          vecInvitePlayers: r
        }),
        t,
        "ChatRoomGroupInviteDialog",
        {
          strTitle: Object(re.b)("#Chat_CreateChatRoom"),
          popupWidth: 664,
          popupHeight: 680
        }
      );
    }
    var Hr = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.componentDidMount = function() {
            var e = this.props.chat.lastChatLinkInfo;
            (!e || Date.now() >= e.rtExpires) && this.GenerateLink(86400);
          }),
          (e.prototype.GenerateLink = function(e) {
            this.props.chat.CreateInviteLink(e);
          }),
          (e.prototype.OnFocus = function(e) {
            e.target.select();
          }),
          (e.prototype.render = function() {
            var e = this.props.chat.lastChatLinkInfo,
              t = Object(re.b)("#Chat_Invite_Loading");
            return (
              this.props.disabled && ((e = void 0), (t = "")),
              ve.createElement(
                ve.Fragment,
                null,
                ve.createElement(Gi, {
                  label: Object(re.b)("#Chat_Invite_Linkheader"),
                  className: "InviteFriendToChatDialog_LinkInput",
                  type: "text",
                  value: e ? e.strInviteURL : t,
                  readOnly: !0,
                  bShowCopyAction: !!e,
                  onFocus: this.OnFocus,
                  onClick: this.OnFocus
                }),
                !this.props.disabled &&
                  ve.createElement(Wr, {
                    onGenerate: this.GenerateLink,
                    chat: this.props.chat
                  })
              )
            );
          }),
          R.c([M.a], e.prototype, "GenerateLink", null),
          R.c([M.a], e.prototype, "OnFocus", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Wr = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OnDropDownChange = function(e, t) {
            this.props.onGenerate(e.data), t.SetSelectedOption(void 0);
          }),
          (e.prototype.CreateExpiresText = function(e) {
            return 0 == e
              ? Object(re.b)("#InviteLink_ExpiresNever_Short")
              : 3600 < e - Yo.GetServerRTime32()
                ? Object(re.b)("#InviteLink_ExpiresDay_Short")
                : Object(re.b)("#InviteLink_ExpiresHour_Short");
          }),
          (e.prototype.render = function() {
            var e = this.props.chat.lastChatLinkInfo,
              t = [
                {
                  label: Object(re.b)("#InviteLink_ExpiresHour_Short"),
                  data: 3600
                },
                {
                  label: Object(re.b)("#InviteLink_ExpiresDay_Short"),
                  data: 86400
                },
                {
                  label: Object(re.b)("#InviteLink_ExpiresNever_Short"),
                  data: 0
                }
              ];
            return ve.createElement(
              "div",
              { className: "expireLinkInContainer" },
              ve.createElement(
                hi,
                null,
                Object(re.b)("#InviteLink_ExpireDropDownLabel")
              ),
              ve.createElement(Fi, {
                strClassName: "inviteLinkDropDown",
                rgOptions: t,
                strDefaultLabel: e
                  ? this.CreateExpiresText(e.rtExpires)
                  : ve.createElement("span", null, ""),
                onChange: this.OnDropDownChange,
                selectedOption: void 0
              })
            );
          }),
          R.c([M.a], e.prototype, "OnDropDownChange", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      zr = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              bShowSubmit: e.vecInvitePlayers && 0 < e.vecInvitePlayers.length,
              dropToInviteFriend: void 0,
              bHaveNonBetaFriendsSelected: !1
            }),
            t.BuildMemberOfGroupSet(e),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.chatRoomGroup != this.props.chatRoomGroup &&
              this.BuildMemberOfGroupSet(e),
              e.vecInvitePlayers &&
                0 < e.vecInvitePlayers.length &&
                this.setState({ bShowSubmit: !0 });
          }),
          (e.prototype.BuildMemberOfGroupSet = function(e) {
            var t = e.chatRoomGroup;
            this.m_setMembersOfGroup = t.memberList.GetCurrentMemberSet();
          }),
          (e.prototype.DismissDialog = function() {
            this.props.closeModal();
          }),
          (e.prototype.OnSubmit = function() {
            if (
              this.m_friendPicker &&
              this.m_friendPicker.state.rgFriendsChosen.length
            )
              for (
                var e = 0, t = this.m_friendPicker.state.rgFriendsChosen;
                e < t.length;
                e++
              ) {
                var n = t[e];
                this.props.chatRoomGroup.InviteFriend(
                  n.accountid,
                  this.props.chatRoom
                );
              }
            this.props.closeModal();
          }),
          (e.prototype.OnFriendPickerRef = function(e) {
            (this.m_friendPicker = e), this.OnFriendPickerChange();
          }),
          (e.prototype.OnFriendPickerChange = function() {
            var e = !1,
              t = !1;
            if (this.m_friendPicker) {
              e = 0 < this.m_friendPicker.selectedFriendCount;
              for (
                var n = function(e) {
                    if (!1 === e.is_in_beta) return (t = !0), "break";
                    void 0 === e.is_in_beta &&
                      Object(m.when)(function() {
                        return void 0 !== e.is_in_beta;
                      }, o.OnFriendPickerChange);
                  },
                  o = this,
                  i = 0,
                  r = this.m_friendPicker.state.rgFriendsChosen;
                i < r.length;
                i++
              ) {
                if ("break" === n(r[i])) break;
              }
            }
            var a = e;
            (a == this.state.bShowSubmit &&
              t == this.state.bHaveNonBetaFriendsSelected) ||
              this.setState({ bShowSubmit: a, bHaveNonBetaFriendsSelected: t });
          }),
          (e.prototype.OnDragEnter = function(e, t) {
            if (
              (AssertMsg(
                (e && "friend" == e.type) || t,
                "Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"
              ),
              e)
            ) {
              var n = e;
              n.friend &&
                (this.setState({ dropToInviteFriend: n.friend }),
                this.m_friendPicker &&
                  this.m_friendPicker.SelectFriendSuggestion(n.friend));
            }
            return !0;
          }),
          (e.prototype.OnDragLeave = function() {
            this.state.dropToInviteFriend &&
              (this.m_friendPicker &&
                this.m_friendPicker.RemoveFriendFromList(
                  this.state.dropToInviteFriend
                ),
              this.setState({ dropToInviteFriend: void 0 }));
          }),
          (e.prototype.OnDrop = function(e, t) {
            if (
              (AssertMsg(
                e && "friend" == e.type,
                "Invalid data type passed to ChatRoomGroupDialog.OnDrop"
              ),
              e && "friend" == e.type)
            ) {
              var n = e;
              n.friend &&
                (this.state.dropToInviteFriend &&
                  this.setState({ dropToInviteFriend: void 0 }),
                Qu.DragDropManager.SetDropConsumed(),
                this.m_friendPicker &&
                  this.m_friendPicker.SelectFriendSuggestion(n.friend));
            }
          }),
          (e.prototype.GetDragDropProps = function() {
            var e = { rgAcceptedTypes: ["friend"] };
            return (
              (e.fnDragEnter = this.OnDragEnter),
              (e.fnDragLeave = this.OnDragLeave),
              (e.fnDrop = this.OnDrop),
              e
            );
          }),
          (e.prototype.render = function() {
            var t = this,
              e = this.props.chatRoomGroup.GetDefaultChatRoom();
            this.props.chatRoom && (e = this.props.chatRoom);
            var n,
              o = this.props.chatRoomGroup.name,
              i = null != this.props.chatRoom,
              r = new Set([]),
              a = this.props.chatRoomGroup.BCanInvite();
            return (
              a
                ? this.props.chatRoom || (r = this.m_setMembersOfGroup)
                : this.props.chatRoom
                  ? Yo.FriendStore.all_friends.forEach(function(e) {
                      t.props.chatRoomGroup.BHasMember(e.accountid) ||
                        r.add(e.accountid);
                    })
                  : AssertMsg(
                      !1,
                      "User should not be able to invite to the group"
                    ),
              (n = this.props.bIsDropInvite
                ? Object(re.b)("#Chat_InviteFriends_DropInvite_Pre")
                : a
                  ? Object(re.b)("#Chat_InviteFriends")
                  : Object(re.b)("#Chat_InviteGroupMembers")),
              ve.createElement(
                Ki,
                { onEscKeypress: this.DismissDialog },
                ve.createElement(
                  Oi,
                  {
                    classNameContent:
                      "ChatRoomGroupInviteDialog" +
                      (this.props.bIsDropInvite ? " IsDropInvite" : ""),
                    onSubmit: this.OnSubmit
                  },
                  ve.createElement(
                    mi,
                    null,
                    i
                      ? ve.createElement(
                          "div",
                          null,
                          Object(re.b)("#Chat_Actions_InviteFriend_VoiceChat"),
                          ve.createElement(
                            "div",
                            {
                              className: "DialogHeaderSubtitle DialogHighlight"
                            },
                            '"',
                            this.props.chatRoom.name,
                            '"'
                          )
                        )
                      : Object(re.b)("#Chat_Actions_InviteFriend"),
                    ve.createElement(
                      "div",
                      { className: "displayRow" },
                      ve.createElement(ss, {
                        group: this.props.chatRoomGroup,
                        small: !0
                      }),
                      ve.createElement(
                        "div",
                        { className: "DialogHeaderSubtitle DialogHighlight" },
                        o
                      )
                    )
                  ),
                  ve.createElement(
                    fi,
                    null,
                    !this.props.bIsDropInvite &&
                      a &&
                      ve.createElement(
                        ve.Fragment,
                        null,
                        ve.createElement(
                          "div",
                          { className: "inviteLinkContainer" },
                          ve.createElement(Hr, { chat: e, disabled: !1 })
                        ),
                        ve.createElement(
                          "div",
                          { className: "OrSeparator" },
                          ve.createElement("div", { className: "HBar" }),
                          ve.createElement(
                            "div",
                            { className: "OrSeparatorLabel" },
                            Object(re.b)("#Chat_InviteFriends_OR_Separator")
                          ),
                          ve.createElement("div", { className: "HBar" })
                        )
                      ),
                    ve.createElement(
                      ji,
                      R.a({ className: "" }, this.GetDragDropProps()),
                      ve.createElement(
                        _i,
                        {
                          className:
                            "CreateChat_NonBetaFriendsWarning" +
                            (Yo.IsInBeta() ? "" : " Released") +
                            (this.state.bHaveNonBetaFriendsSelected
                              ? " Active"
                              : "")
                        },
                        ve.createElement(qr, null),
                        Object(re.b)(
                          Yo.IsInBeta()
                            ? "#Chat_InviteFriend_SomeUnavailable"
                            : "#Chat_InviteFriend_SomeUnavailable_Released"
                        )
                      ),
                      ve.createElement(ir, {
                        ref: this.OnFriendPickerRef,
                        label: n,
                        eSort: 1,
                        onFriendSelected: this.OnFriendPickerChange,
                        onFriendRemoved: this.OnFriendPickerChange,
                        setExcludedFriends: r,
                        rgSelectedFriends: this.props.vecInvitePlayers,
                        bDropInvite: this.props.bIsDropInvite,
                        chosenFriendComponent: Kr
                      })
                    )
                  ),
                  ve.createElement(
                    di,
                    null,
                    ve.createElement(
                      "div",
                      { className: "DialogTwoColLayout _DialogColLayout" },
                      ve.createElement(
                        Ei,
                        { disabled: !this.state.bShowSubmit },
                        Object(re.b)("#Chat_Invite")
                      ),
                      ve.createElement(
                        wi,
                        { onClick: this.DismissDialog },
                        Object(re.b)("#Button_Close")
                      )
                    )
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "DismissDialog", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "OnFriendPickerRef", null),
          R.c([M.a], e.prototype, "OnFriendPickerChange", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          e
        );
      })(ve.PureComponent);
    function qr() {
      return ve.createElement(
        "div",
        {
          className: "FriendPicker_InvitedFriend_NotInBetaWarning",
          title: Object(re.b)(
            Yo.IsInBeta()
              ? "#Chat_InviteFriend_SomeUnavailable"
              : "#Chat_InviteFriend_SomeUnavailable_Released"
          )
        },
        "!"
      );
    }
    var Kr = Object(Hi.observer)(function(e) {
      var t = e.friend.is_in_beta || void 0 === e.friend.is_in_beta;
      return ve.createElement(
        ve.Fragment,
        null,
        ve.createElement(
          Xs,
          { friend: e.friend, context: null },
          ve.createElement(
            "div",
            {
              className:
                "FriendPicker_ChosenFriend" +
                (t ? "" : " FriendPicker_InvitedFriendNotInBeta"),
              onClick: function() {
                e.onClick(e.friend);
              }
            },
            !t && ve.createElement(qr, null),
            ve.createElement("span", null, e.friend.display_name),
            ve.createElement(Qo.fb, null)
          )
        )
      );
    });
    function Yr(e, t, n) {
      var o,
        i = zu(null, e);
      return (
        t.BIsClanChatRoom() &&
          (o = Yo.FriendStore.ClanStore.GetClan(t.GetClanID())),
        Object(Zo.a)(
          ve.createElement(Jr, {
            browserContext: i,
            group: t,
            clan: o,
            context: n,
            ownerWindow: e.currentTarget.ownerDocument.defaultView
          }),
          e
        )
      );
    }
    var Jr = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.OpenChatWindow = function(e) {
          this.props.group
            ? Yo.UIStore.ShowAndOrActivateChatRoomGroup(
                this.props.browserContext,
                this.props.group,
                !0
              )
            : this.props.clan.OpenChatDialog(this.props.browserContext, !0);
        }),
        (t.prototype.ShowClanProfile = function(e) {
          var t;
          if (this.props.clan.BIsOGG())
            t = G.a.COMMUNITY_BASE_URL + "app/" + this.props.clan.GetOGGAppID();
          else {
            var n = this.props.clan.steamid;
            t = G.a.COMMUNITY_BASE_URL + "gid/" + n.ConvertTo64BitString();
          }
          yr(e, t), e.stopPropagation();
        }),
        (t.prototype.LeaveChatRoomGroup = function(e) {
          !(function(o, i) {
            R.b(this, void 0, void 0, function() {
              var t, n;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      (t = qu(o)),
                      (n = i.BIsClanChatRoom()
                        ? "#Chat_Actions_LeaveChatRoomGroup_ClanConfirm"
                        : i.BIsAccountIDOwner(
                            Yo.CMInterface.steamid.GetAccountID()
                          )
                          ? "#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm"
                          : "#Chat_Actions_LeaveChatRoomGroup_Confirm"),
                      [
                        4,
                        $i(
                          o,
                          Object(re.b)("#Chat_Actions_LeaveChatRoomGroup"),
                          Object(re.b)(n, i.name),
                          Object(re.b)("#Chat_Actions_LeaveChatRoomGroup")
                        )
                      ]
                    );
                  case 1:
                    return e.sent() && i.LeaveChatRoomGroup(t), [2];
                }
              });
            });
          })(e.currentTarget.ownerDocument.defaultView, this.props.group);
        }),
        (t.prototype.render = function() {
          var e = this,
            t = [],
            n = this.props.group,
            o = this.props.clan,
            i = this.props.context || {},
            r = Yo.FriendStore.FavoritesStore;
          i.tab
            ? t.push(
                ve.createElement(
                  mr.d,
                  {
                    key: "closetab",
                    onSelected: function() {
                      Yo.UIStore.CloseTab(e.props.browserContext, i.tab);
                    }
                  },
                  Object(re.b)("#Chat_CloseTabAction")
                )
              )
            : i.is_chat_window ||
              t.push(
                ve.createElement(
                  mr.d,
                  { key: "opentab", onSelected: this.OpenChatWindow },
                  Object(re.b)("#Chat_Actions_OpenChat")
                )
              ),
            o &&
              !o.BIsOGG() &&
              t.push(
                ve.createElement(
                  mr.d,
                  { key: "viewprofile", onSelected: this.ShowClanProfile },
                  Object(re.b)("#Friend_Menu_ViewProfile")
                )
              ),
            t.push(
              ve.createElement(
                mr.d,
                { key: "leavechatroom", onSelected: this.LeaveChatRoomGroup },
                Object(re.b)(
                  o
                    ? "#Chat_Actions_LeaveChatRoom"
                    : "#Chat_Actions_LeaveChatRoomGroup"
                )
              )
            );
          var a = o ? { clan: o } : { chat: n };
          return (
            Yo.FriendStore.FavoritesStore.BIsFavorited(a)
              ? i.is_favorites &&
                t.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "quickaccess",
                      onSelected: function() {
                        r.RemoveFromFavorites(a);
                      }
                    },
                    Object(re.b)("#Friend_Menu_RemoveFromQuickAccess")
                  )
                )
              : t.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "quickaccess",
                      onSelected: function() {
                        r.AddToFavorites(a);
                      }
                    },
                    Object(re.b)("#Friend_Menu_AddToQuickAccess")
                  )
                ),
            o &&
              o.BIsOGG() &&
              t.push(
                ve.createElement(kr, {
                  unAppID: o.GetOGGAppID(),
                  strGameName: o.name
                })
              ),
            ve.createElement(
              mr.c,
              { className: "chatRoomListItemContextMenu" },
              t
            )
          );
        }),
        R.c([M.a], t.prototype, "OpenChatWindow", null),
        R.c([M.a], t.prototype, "ShowClanProfile", null),
        R.c([M.a], t.prototype, "LeaveChatRoomGroup", null),
        t
      );
    })(ve.Component);
    function Xr(e, t, n, o, i) {
      return t.GetDefaultChatID() == n
        ? null
        : Qr.BIsMenuEmpty(t, n, !!i)
          ? null
          : Object(Zo.a)(
              ve.createElement(Qr, {
                browserContext: e,
                group: t,
                roomID: n,
                ownerWindow: o.currentTarget.ownerDocument.defaultView,
                onStartRoomRename: i
              }),
              o
            );
    }
    var Qr = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.ShowInviteDialog = function() {
          var e = this.props.group.GetChatRoom(this.props.roomID);
          Ur(
            this.props.browserContext,
            this.props.ownerWindow,
            this.props.group,
            e
          );
        }),
        (t.prototype.SaveVoiceRoom = function(e) {
          var t,
            n,
            o,
            i = Yu(e);
          (t = i),
            (n = this.props.group),
            (o = this.props.roomID),
            Ji(
              ve.createElement(Zr, { group: n, roomID: o }),
              t,
              "SaveVoiceRoomDialog",
              {
                strTitle: Object(re.b)("#Chat_SaveVoiceRoom"),
                popupWidth: 664,
                popupHeight: 380
              }
            );
        }),
        (t.prototype.RemoveRoom = function() {
          var n = this;
          Zi(
            this.props.ownerWindow,
            Object(re.b)("#Chat_Actions_RemoveRoom"),
            Object(re.b)("#Chat_Actions_RemoveRoom_Confirm"),
            Object(re.b)("#Chat_Actions_RemoveRoom_Action")
          )
            .then(function() {
              var e = n.props.group,
                t = n.props.roomID;
              e.DeleteChatRoom(t);
            })
            .catch(function() {});
        }),
        (t.prototype.ChangeRoomName = function() {
          this.props.onStartRoomRename(this.props.roomID);
        }),
        (t.BIsMenuEmpty = function(e, t, n) {
          var o = e.GetDefaultChatID() == t,
            i = e.BIsTempVoiceChannel(t),
            r = e.BCanAdminChannel();
          return (
            !e.BIsVoiceChannel(t) &&
            ((!i || !r) && (!(n && !o && !i && r) && !(!o && r)))
          );
        }),
        (t.prototype.render = function() {
          var e = [],
            t = this.props.group,
            n = this.props.roomID,
            o = t.GetDefaultChatID() == n,
            i = t.BIsTempVoiceChannel(n),
            r = t.BCanAdminChannel();
          t.BCanInvite();
          return (
            e.push(
              ve.createElement(
                mr.d,
                { key: "invitefriend", onSelected: this.ShowInviteDialog },
                Object(re.b)("#Chat_Actions_InviteFriendtoVoice")
              )
            ),
            i &&
              e.push(
                ve.createElement(
                  mr.d,
                  {
                    key: "savechannel",
                    className: r ? "" : "noPermission",
                    onSelected: this.SaveVoiceRoom
                  },
                  !r && ve.createElement(Qo.x, null),
                  Object(re.b)("#Chat_Actions_SaveChannel")
                )
              ),
            this.props.onStartRoomRename &&
              !o &&
              !i &&
              r &&
              e.push(
                ve.createElement(
                  mr.d,
                  { key: "renameroom", onSelected: this.ChangeRoomName },
                  Object(re.b)("#Chat_Actions_ChangeRoomName")
                )
              ),
            !o &&
              r &&
              e.push(
                ve.createElement(
                  mr.d,
                  { key: "removeroom", onSelected: this.RemoveRoom },
                  Object(re.b)("#Chat_Actions_RemoveRoom")
                )
              ),
            e.length < 1
              ? (console.log(
                  "warning: empty context menu. Did someone not update BIsMenuEmpty?"
                ),
                null)
              : ve.createElement(mr.c, { className: "friendsContextMenu" }, e)
          );
        }),
        R.c([M.a], t.prototype, "ShowInviteDialog", null),
        R.c([M.a], t.prototype, "SaveVoiceRoom", null),
        R.c([M.a], t.prototype, "RemoveRoom", null),
        R.c([M.a], t.prototype, "ChangeRoomName", null),
        t
      );
    })(ve.PureComponent);
    var Zr = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { strName: "", strError: void 0 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.HandleTextEntry = function(e) {
            this.setState({ strName: e.target.value });
          }),
          (e.prototype.HandleSubmit = function(e) {
            e && e.preventDefault();
            var t = this.state.strName;
            0 != t.length
              ? (this.props.group.RenameRoom(this.props.roomID, t),
                this.props.closeModal())
              : this.setState({
                  strError: Object(re.b)("#Chat_SaveVoiceRoom_Error_EmptyName")
                });
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Oi,
                {
                  classNameContent: "SaveVoiceRoomDialog",
                  onSubmit: this.HandleSubmit
                },
                ve.createElement(mi, null, Object(re.b)("#Chat_SaveVoiceRoom")),
                ve.createElement(
                  fi,
                  null,
                  this.state.strError &&
                    ve.createElement(
                      _i,
                      { className: "nicknameError" },
                      this.state.strError
                    ),
                  ve.createElement(
                    _i,
                    null,
                    Object(re.b)("#Chat_SaveVoiceRoom_Description")
                  ),
                  ve.createElement(Gi, {
                    type: "text",
                    label: Object(re.b)("#Chat_SaveVoiceRoom_Name"),
                    className: "nicknameInput",
                    value: this.state.strName,
                    onChange: this.HandleTextEntry,
                    autoFocus: !0
                  })
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "HandleTextEntry", null),
          R.c([M.a], e.prototype, "HandleSubmit", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      $r = n("1w3K"),
      ea = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { ulSelectedGroupID: "" }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.BindDiv = function(e) {
            this.m_elDiv = e;
          }),
          Object.defineProperty(e.prototype, "div", {
            get: function() {
              return this.m_elDiv;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "recommendedHeight", {
            get: function() {
              return this.m_elDiv.clientHeight;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "maximumHeight", {
            get: function() {
              return this.recommendedHeight;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "minimumHeight", {
            get: function() {
              return 0;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnGroupSelected = function(e) {
            e == this.state.ulSelectedGroupID
              ? this.setState({ ulSelectedGroupID: "" })
              : this.setState({ ulSelectedGroupID: e });
          }),
          (e.prototype.render = function() {
            var t = this,
              e = this.props.chats.currentChatRoomGroups.sort(function(e, t) {
                return t.time_last_activity - e.time_last_activity;
              });
            return ve.createElement(
              "div",
              {
                className: "ChatRoomList CompactFriendsList",
                ref: this.BindDiv
              },
              0 == e.length &&
                ve.createElement(
                  "div",
                  { className: "ChatRoomList_Empty" },
                  Object(re.b)("#Chat_ChatRoomList_Empty"),
                  ve.createElement("br", null),
                  ve.createElement("br", null),
                  Object(re.d)(
                    "#Chat_ChatRoomList_Empty_How",
                    ve.createElement(
                      fr,
                      { href: G.a.COMMUNITY_BASE_URL + "my/groups/" },
                      Object(re.b)("#Chat_ChatRoomList_Empty_HowLink")
                    )
                  )
                ),
              e.map(function(e) {
                return ve.createElement(ta, {
                  key: e.GetGroupID(),
                  group: e,
                  bExpanded: !1,
                  onSelect: t.OnGroupSelected
                });
              }),
              ve.createElement("div", { className: "disconnectBlocker" })
            );
          }),
          R.c([M.a], e.prototype, "BindDiv", null),
          R.c([M.a], e.prototype, "OnGroupSelected", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ta = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bAcceptDrag = !1),
            (t.state = {
              friendDrag: void 0,
              bStateExpanded: !1,
              bNonGroupHovered: !1,
              broadcastInfo:
                e.group.watching_broadcast_steamid &&
                Zn.StartInfo(
                  e.group.watching_broadcast_steamid.ConvertTo64BitString()
                )
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.GetDragDropProps = function(e) {
            void 0 === e && (e = !0);
            var t = {};
            return (
              e &&
                ((t.onDragEnter = this.OnDragEnter),
                (t.onDragOver = this.OnDragOver),
                (t.onDragLeave = this.OnDragLeave),
                (t.onDrop = this.OnDrop)),
              (t.draggable = !0),
              (t.onDragStart = this.OnDragStart),
              (t.onDragEnd = this.OnDragEnd),
              t
            );
          }),
          (e.prototype.OnDragStart = function(e) {
            var t = this.props.group;
            if (t.BIsClanChatRoom()) {
              var n = Yo.FriendStore.ClanStore.GetClan(t.GetClanID());
              Qu.DragDropManager.StartDrag({ type: "clan", clan: n });
            } else
              Qu.DragDropManager.StartDrag({ type: "chatroomgroup", group: t });
          }),
          (e.prototype.componentWillUnmount = function() {
            this.state.broadcastInfo && Zn.StopInfo(this.state.broadcastInfo);
          }),
          (e.prototype.OnDragEnd = function(e) {
            Qu.DragDropManager.EndDrag();
          }),
          (e.prototype.OnDragEnter = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            if (t && "friend" == t.type) {
              var n = t.friend;
              (this.m_bAcceptDrag = !0),
                e.preventDefault(),
                this.setState({ friendDrag: n });
            } else this.m_bAcceptDrag = !1;
            e &&
              (e.preventDefault(), this.m_bAcceptDrag && e.stopPropagation());
          }),
          (e.prototype.OnDragOver = function(e) {
            this.m_bAcceptDrag && (e.preventDefault(), e.stopPropagation());
          }),
          (e.prototype.OnDragLeave = function(e) {
            Object(ci.c)(e) &&
              ((this.m_bAcceptDrag = !1),
              this.state.friendDrag && this.setState({ friendDrag: void 0 }));
          }),
          (e.prototype.OnDrop = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            if (t && "friend" == t.type) {
              e.preventDefault(), e.stopPropagation();
              var n = this.props.group.memberList.member_list.slice(),
                o = t;
              if (null != o.friend && -1 != n.indexOf(o.friend)) return;
              Qu.DragDropManager.SetDropConsumed(),
                this.props.group.InviteFriend(o.friend.accountid),
                this.setState({ friendDrag: void 0 });
            }
          }),
          (e.prototype.OnClick = function(e) {
            Yo.UIStore.ShowAndOrActivateChatRoomGroup(
              zu(this),
              this.props.group,
              !0
            );
          }),
          (e.prototype.OnToggleSelected = function(e) {
            this.setState({ bStateExpanded: !this.state.bStateExpanded }),
              e.stopPropagation();
          }),
          (e.prototype.OnOpenGroup = function(e) {
            Yo.UIStore.ShowAndOrActivateChatRoomGroup(
              zu(this),
              this.props.group,
              !0
            ),
              e.stopPropagation();
          }),
          (e.prototype.OnContextMenu = function(e) {
            Yr(e, this.props.group);
          }),
          (e.prototype.OnMouseEnterNonTitle = function() {
            this.setState({ bNonGroupHovered: !0 });
          }),
          (e.prototype.OnMouseLeaveNonTitle = function() {
            this.setState({ bNonGroupHovered: !1 });
          }),
          (e.prototype.render = function() {
            var e = this.props.group,
              t = this.state.bStateExpanded,
              n = null !== e.watching_broadcast_steamid,
              o = n && new E.a(e.watching_broadcast_steamid),
              i =
                n && this.state.broadcastInfo
                  ? this.state.broadcastInfo.m_strTitle ||
                    this.state.broadcastInfo.m_strAppTitle ||
                    Object(re.b)(
                      "#PersonaStateWatchingBroadcast_Player",
                      Yo.FriendStore.GetPlayer(o.GetAccountID()).display_name
                    )
                  : void 0,
              r = ["ChatRoomListGroupItem"],
              a = this.props.group.hasVoiceRoom;
            return (
              a || r.push("NoChannels"),
              t && r.push("ShowAllChannels"),
              this.state.bNonGroupHovered && r.push("NonGroupHovered"),
              n && r.push("HasLinkedBroadcast"),
              ve.createElement(
                "div",
                R.a({ className: r.join(" ") }, this.GetDragDropProps(!0)),
                ve.createElement(
                  "div",
                  {
                    className: "ChatRoomListGroupItem_header",
                    onClick: this.OnClick,
                    onContextMenu: this.OnContextMenu
                  },
                  ve.createElement(ss, { group: e, small: !0 }),
                  n &&
                    ve.createElement(
                      "div",
                      { className: "steamTVSubtitle" },
                      ve.createElement(Qo.T, null),
                      ": ",
                      i,
                      " "
                    ),
                  ve.createElement(
                    "div",
                    { className: "groupNameStatusContainer" },
                    ve.createElement(
                      "div",
                      { className: "displayRow" },
                      ve.createElement(
                        "div",
                        { className: "chatRoomName" },
                        this.props.group.name
                      ),
                      ve.createElement(
                        "div",
                        {
                          className: "ContextMenuButton",
                          onClick: this.OnContextMenu,
                          onMouseEnter: this.OnMouseEnterNonTitle,
                          onMouseLeave: this.OnMouseLeaveNonTitle
                        },
                        ve.createElement(Qo.l, null)
                      )
                    ),
                    !t && a && ve.createElement(ra, { group: e })
                  ),
                  ve.createElement(na, { group: e }),
                  a &&
                    ve.createElement(
                      "div",
                      {
                        onMouseEnter: this.OnMouseEnterNonTitle,
                        onMouseLeave: this.OnMouseLeaveNonTitle
                      },
                      ve.createElement(oa, {
                        expanded: t,
                        onClick: this.OnToggleSelected
                      })
                    )
                ),
                a &&
                  ve.createElement(
                    "div",
                    { className: "detailsView" },
                    ve.createElement(
                      "div",
                      { className: "ChatRoomListGroupItemChatRooms" },
                      ve.createElement(ia, { group: e, expanded: t })
                    )
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnDragStart", null),
          R.c([M.a], e.prototype, "OnDragEnd", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          R.c([M.a], e.prototype, "OnClick", null),
          R.c([M.a], e.prototype, "OnToggleSelected", null),
          R.c([M.a], e.prototype, "OnOpenGroup", null),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "OnMouseEnterNonTitle", null),
          R.c([M.a], e.prototype, "OnMouseLeaveNonTitle", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      na = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.group,
              t = this.props.chat;
            if (
              (e && !e.HasUnreadChatMessage) ||
              (t && !t.has_any_unread_messages)
            )
              return null;
            var n =
              (this.props.className || "") + " ChatUnreadMessageIndicator";
            return (
              ((e && e.HasUnreadMention) || (t && t.has_unread_mention)) &&
                (n += " UnreadMention"),
              ve.createElement(
                "div",
                { className: n },
                ve.createElement("div", { className: "chatUnreadCircle" }, "@")
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    function oa(e) {
      var t = e.expanded
        ? Object(re.b)("#Chat_ChatRoomListO_OpenGroupCollapse")
        : Object(re.b)("#Chat_ChatRoomListO_OpenGroupExpand");
      return ve.createElement(
        "div",
        { className: "openGroupButton", title: t, onClick: e.onClick },
        ve.createElement(Qo.k, null)
      );
    }
    var ia = Object(Hi.observer)(function(e) {
        for (var t = [], n = 0, o = e.group.voiceRoomList; n < o.length; n++) {
          var i = o[n];
          (e.expanded || i.voice_active_contains_self) && t.push(i);
        }
        var r = null;
        return (
          t &&
            (r = t.map(function(e) {
              return ve.createElement(
                Jo,
                {
                  classNames: "heightcollapseandfade-anim",
                  timeout: 300,
                  key: e.unique_id
                },
                ve.createElement(ya, {
                  key: e.unique_id,
                  chat: e,
                  bRenameActive: !1,
                  context: "ChatRoomList",
                  onSelect: e.StartVoiceChat
                })
              );
            })),
          ve.createElement($r.TransitionGroup, null, r)
        );
      }),
      ra = Object(Hi.observer)(function(e) {
        for (var t = [], n = 0, o = e.group.voiceRoomList; n < o.length; n++) {
          var i = o[n];
          if (!i.voice_active_contains_self) {
            var r = i.voice_active_member_list;
            if (0 != r.member_count) {
              var a = r.member_list.filter(function(e) {
                return e.is_friend;
              });
              0 != a.length &&
                ((a = r.member_list.slice()).sort(
                  ut.FriendSortByFriendOrNotComparator
                ),
                t.push({ ulRoomID: i.unique_id, rgFriends: a }));
            }
          }
        }
        return t && 0 != t.length
          ? ve.createElement(
              "div",
              { className: "membersInVoice" },
              ve.createElement(
                "div",
                { className: "voiceChannelIcon" },
                ve.createElement(Qo.cb, null)
              ),
              t.map(function(e) {
                return ve.createElement(aa, {
                  key: e.ulRoomID,
                  friendsInRoom: e
                });
              })
            )
          : null;
      }),
      aa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.friendsInRoom;
            return ve.createElement(
              "span",
              { className: "voiceChatGroup" },
              e.rgFriends.map(function(e) {
                return ve.createElement(
                  Xs,
                  {
                    key: e.accountid,
                    friend: e,
                    context: {},
                    disableContextMenu: !1
                  },
                  ve.createElement("img", {
                    className:
                      "voiceFriendAvatar" + (e.is_friend ? "" : " isNotFriend"),
                    src: e.persona.avatar_url,
                    draggable: !1
                  })
                );
              })
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      sa = n("HDnS"),
      ca = n("uPpK"),
      la = (function() {
        function e() {
          (this.m_vecObjects = []),
            (this.OnUnload = this.OnUnload.bind(this)),
            Object({
              NODE_ENV: "production",
              STEAM_BUILD: "buildbot",
              VALVE_BUILD: "false"
            }).MOBILE_BUILD || window.addEventListener("unload", this.OnUnload);
        }
        return (
          (e.prototype.OnUnload = function() {
            for (var e = 0, t = this.m_vecObjects; e < t.length; e++) {
              t[e].DeleteObserver();
            }
            this.m_vecObjects = [];
          }),
          (e.prototype.CreateObserver = function(e, t) {
            var n = new pa(e, t);
            return this.m_vecObjects.push(n), n;
          }),
          (e.prototype.DeleteObserver = function(e) {
            if (e) {
              var t = e,
                n = this.m_vecObjects.indexOf(t);
              0 <= n && (t.DeleteObserver(), this.m_vecObjects.splice(n, 1));
            }
          }),
          e
        );
      })(),
      pa = (function() {
        function e(e, t) {
          this.m_resizeObserver = t
            ? new t.ResizeObserver(e)
            : new ResizeObserver(e);
        }
        return (
          (e.prototype.DeleteObserver = function() {
            this.m_resizeObserver &&
              (this.m_resizeObserver.disconnect(),
              delete this.m_resizeObserver);
          }),
          (e.prototype.observe = function(e) {
            this.m_resizeObserver && this.m_resizeObserver.observe(e);
          }),
          (e.prototype.unobserve = function(e) {
            this.m_resizeObserver && this.m_resizeObserver.unobserve(e);
          }),
          (e.prototype.disconnect = function() {
            this.m_resizeObserver && this.m_resizeObserver.disconnect();
          }),
          e
        );
      })(),
      ua = new la(),
      ma = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_elContainer = null),
            (t.m_resizeObserver = null),
            (t.state = { nWidth: 0, nHeight: 0 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            this.m_resizeObserver && ua.DeleteObserver(this.m_resizeObserver);
          }),
          (e.prototype.BindContainerRef = function(e) {
            this.m_resizeObserver &&
              (this.m_resizeObserver.disconnect(),
              (this.m_resizeObserver = null)),
              (this.m_elContainer = e),
              this.m_elContainer &&
                ((this.m_resizeObserver = ua.CreateObserver(
                  this.OnResize,
                  Object(ci.k)(this.m_elContainer)
                )),
                this.m_resizeObserver.observe(this.m_elContainer),
                this.UpdateDimensions(
                  this.m_elContainer.clientWidth,
                  this.m_elContainer.clientHeight
                ));
          }),
          (e.prototype.UpdateDimensions = function(e, t) {
            (this.state.nWidth == e && this.state.nHeight == t) ||
              this.setState({ nWidth: e, nHeight: t });
          }),
          (e.prototype.OnResize = function(e, t) {
            var n = 0,
              o = 0;
            if (0 < e.length) {
              var i = e[0].contentRect;
              (n = i.width), (o = i.height);
            }
            this.UpdateDimensions(n, o);
          }),
          (e.prototype.render = function() {
            var e = { width: this.state.nWidth, height: this.state.nHeight },
              t = this.props.children(e),
              n = this.props.className;
            return ve.createElement(
              "div",
              {
                className: n,
                style: {
                  position: "absolute",
                  top: 0,
                  right: 0,
                  bottom: 0,
                  left: 0
                },
                ref: this.BindContainerRef
              },
              t
            );
          }),
          R.c([M.a], e.prototype, "BindContainerRef", null),
          R.c([M.a], e.prototype, "OnResize", null),
          e
        );
      })(ve.Component);
    function da(e, t) {
      return e.filter(function(e) {
        return e.BMatchesSearchString(t, !1);
      });
    }
    var ha = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bCollapsed: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnRoomsContextMenu = function(e) {
            var t = this;
            if (this.props.groupView.GetGroup().BCanAdminChannel()) {
              var n = e.currentTarget.ownerDocument.defaultView;
              Object(Zo.a)(
                ve.createElement(
                  mr.c,
                  null,
                  ve.createElement(
                    mr.d,
                    {
                      onSelected: function() {
                        t.CreateTextChannel(n);
                      }
                    },
                    Object(re.b)("#GroupSettings_Channels_CreateText")
                  ),
                  ve.createElement(
                    mr.d,
                    {
                      onSelected: function() {
                        t.CreateVoiceChannel(n);
                      }
                    },
                    Object(re.b)("#GroupSettings_Channels_CreateVoice")
                  )
                ),
                e
              );
            }
          }),
          (e.prototype.CreateTextChannel = function(e) {
            Ji(
              ve.createElement(ga, {
                ownerWin: e,
                groupView: this.props.groupView,
                bVoiceChannel: !1,
                bJoinChannel: !0
              }),
              e
            );
          }),
          (e.prototype.CreateVoiceChannel = function(e) {
            Ji(
              ve.createElement(ga, {
                ownerWin: e,
                groupView: this.props.groupView,
                bVoiceChannel: !0,
                bJoinChannel: !0
              }),
              e
            );
          }),
          (e.prototype.render = function() {
            var e = this.props.groupView.GetGroup(),
              t = e.GetDefaultChatRoom(),
              n = e.IsNamedGroupChat(),
              o = !1,
              i = !1,
              r = "chatRoomGroupNavColumn",
              a = this.props.groupView.IsVoiceActive(),
              s = this.props.groupView.isChannelListCollapsed;
            return (
              e.voiceRoomList.length < 1 &&
                !n &&
                ((o = !0), (r += " defaultChatOnly")),
              (t && 0 != t.voice_active_member_list.member_count) ||
                !(e.voiceRoomList.length < 1) ||
                a ||
                ((i = !0), (r += " noActiveVoiceChannels")),
              s && (r += " chatRoomGroupNavCollapsed"),
              this.props.inactive || (i && o)
                ? ve.createElement("div", { className: r })
                : ve.createElement(
                    "div",
                    { className: r },
                    ve.createElement(
                      "div",
                      {
                        className: "chatRoomChannelGroups",
                        onContextMenu: this.OnRoomsContextMenu
                      },
                      n &&
                        ve.createElement(ba, {
                          groupView: this.props.groupView
                        }),
                      (!i || !o) &&
                        ve.createElement(Sa, {
                          groupView: this.props.groupView
                        })
                    ),
                    ve.createElement("div", { className: "disconnectBlocker" })
                  )
            );
          }),
          R.c([M.a], e.prototype, "OnRoomsContextMenu", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      _a = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.GetMembersMatchingSearch = function(e) {
            var t = da(
              this.props.groupView.GetGroup().memberList.member_list,
              e
            );
            return t.sort(ut.DefaultFriendSortComparator), t;
          }),
          (e.prototype.OnMemberListToggleViewClick = function(e) {
            this.props.groupView.SetMemberListCollapsed(
              this.props.groupView.isMemberListExpanded
            );
          }),
          (e.prototype.OnSearchInput = function(e) {
            this.props.groupView.SetMemberSearchEnabled(e.currentTarget.value);
          }),
          (e.prototype.OnSearchSubmit = function(e) {
            e.preventDefault();
            var t = this.props.groupView,
              n = t.normalizedMemberSearch;
            if (n && n.length) {
              var o = this.GetMembersMatchingSearch(n);
              o.length && o[0].OpenChatDialog(zu(this, e));
            }
            t.ClearMemberSearch();
          }),
          (e.prototype.OnSearchKeyDown = function(e) {
            27 == e.keyCode &&
              (e.preventDefault(),
              e.currentTarget.blur(),
              this.props.groupView.ClearMemberSearch());
          }),
          (e.prototype.OnClearSearch = function() {
            this.props.groupView.ClearMemberSearch();
          }),
          (e.prototype.OnSearchFocus = function() {
            this.props.groupView.SetMemberSearchEnabled();
          }),
          (e.prototype.OnSearchBlur = function() {
            0 == this.props.groupView.GetMemberSearch().length &&
              this.props.groupView.ClearMemberSearch();
          }),
          (e.prototype.render = function() {
            var e = this.props.groupView,
              t = e.isMemberListExpanded,
              n = e.GetMemberSearch(),
              o = "MemberListColumn",
              i = Object(re.b)("#Tooltip_MemberCollapse");
            t ||
              ((o += " MemberListViewCompact"),
              (i = Object(re.b)("#Tooltip_MemberExpand")));
            var r = "MemberListOptionsContainer";
            return (
              e.IsMemberSearchActive() && (r += " SearchActive"),
              ve.createElement(
                "div",
                { className: o },
                ve.createElement(
                  "div",
                  { className: r },
                  ve.createElement(
                    "div",
                    {
                      className:
                        "MemberListOption ToggleMemberListView" +
                        (0 < n.length ? " SearchActive" : ""),
                      onClick: this.OnMemberListToggleViewClick,
                      title: i
                    },
                    ve.createElement(Qo.k, null)
                  ),
                  ve.createElement(
                    "form",
                    {
                      className: "socialInputContainer",
                      name: "friendSearchForm",
                      onSubmit: this.OnSearchSubmit
                    },
                    ve.createElement(
                      "div",
                      { className: "inputContainer no-drag" },
                      ve.createElement("input", {
                        id: "memberListSearchInputID",
                        className: "friendSearchInput",
                        type: "text",
                        name: "memberlistSearch",
                        placeholder: Object(re.b)("#SearchFriends"),
                        value: n,
                        onInput: this.OnSearchInput,
                        onKeyDown: this.OnSearchKeyDown,
                        onFocus: this.OnSearchFocus,
                        onBlur: this.OnSearchBlur,
                        autoComplete: "off"
                      }),
                      ve.createElement(
                        "div",
                        {
                          className: "friendSearchClear",
                          onClick: this.OnClearSearch
                        },
                        ve.createElement(Qo.fb, null)
                      )
                    )
                  )
                ),
                ve.createElement(fa, {
                  groupView: this.props.groupView,
                  inactive: this.props.inactive
                }),
                ve.createElement("div", { className: "disconnectBlocker" })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnMemberListToggleViewClick", null),
          R.c([M.a], e.prototype, "OnSearchInput", null),
          R.c([M.a], e.prototype, "OnSearchSubmit", null),
          R.c([M.a], e.prototype, "OnSearchKeyDown", null),
          R.c([M.a], e.prototype, "OnClearSearch", null),
          R.c([M.a], e.prototype, "OnSearchFocus", null),
          R.c([M.a], e.prototype, "OnSearchBlur", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      fa = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_mapCollapsedBuckets = new Map()),
            (t.m_refList = ve.createRef()),
            (t.m_disposeGetMemberList = Yo.GroupMemberStore.RegisterForGroupMemberList(
              t.OnMemberListChanged,
              t.props.groupView.GetGroup().GetGroupID()
            )),
            (t.state = { nBucketChanges: 1 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            this.m_disposeGetMemberList.unregister();
          }),
          (e.prototype.GetFriendRenderContext = function() {
            var e = this.props.groupView.GetGroup();
            return (
              (this.m_renderContext && this.m_renderContext.group == e) ||
                (this.m_renderContext = {
                  group: e,
                  chatContext: "chatmemberlist"
                }),
              this.m_renderContext
            );
          }),
          (e.prototype.OnMemberListChanged = function() {
            var e = this.state.nBucketChanges + 1;
            this.setState({ nBucketChanges: e });
          }),
          (e.prototype.SortedPlayerSortFunc = function(e, t) {
            return e.display_name.localeCompare(t.display_name);
          }),
          (e.prototype.BuildFilteredBuckets = function(e, t) {
            for (var n = [], o = 0, i = e; o < i.length; o++) {
              var r = i[o],
                a = da(r.member_list, t);
              if (0 < a.length) {
                var s = new Bo(r.id, this.SortedPlayerSortFunc, function() {});
                s.SetMembers(a), n.push(s);
              }
            }
            return n;
          }),
          (e.prototype.GetListGroupForIndex = function(e, t) {
            for (var n = 0, o = e; n < o.length; n++) {
              var i = o[n];
              if (t < 0) break;
              var r = this.GetVisibleRowsForBucket(i);
              if (t < r) return { index: t, bucket: i };
              t -= r;
            }
            return null;
          }),
          (e.prototype.GetVisibleRowsForBucket = function(e) {
            return this.BIsBucketCollapsed(e) ? 1 : e.member_list.length + 1;
          }),
          (e.prototype.OnToggleBucketCollapsed = function(e) {
            1 < this.m_rgLastRenderBuckets.length &&
              (this.m_mapCollapsedBuckets.set(
                e.id,
                !this.BIsBucketCollapsed(e)
              ),
              this.OnMemberListChanged());
          }),
          (e.prototype.BIsBucketCollapsed = function(e) {
            return this.m_mapCollapsedBuckets.get(e.id);
          }),
          (e.prototype.GetRowHeight = function(e) {
            var t = this.m_rgLastRenderBuckets,
              n = this.GetListGroupForIndex(t, e.index);
            return n ? (0 == n.index ? 28 : 34) : 0;
          }),
          (e.prototype.RenderRow = function(e) {
            var t = this,
              n = e.index,
              o = (e.isScrolling, e.key, e.isVisible, e.style),
              i = this.m_rgLastRenderBuckets,
              r = this.GetListGroupForIndex(i, n);
            if (!r) return null;
            n = r.index;
            var a = r.bucket;
            if (0 == n)
              return ve.createElement(
                "div",
                { key: "group_" + a.id, style: o },
                ve.createElement(Ia, {
                  collapsible: 1 < this.m_rgLastRenderBuckets.length,
                  collapsed: this.BIsBucketCollapsed(a),
                  memberCount: a.member_list.length,
                  name: a.name,
                  onToggleCollapse: function() {
                    t.OnToggleBucketCollapsed(a);
                  }
                })
              );
            var s = a.BIsGameGroup();
            n--;
            var c = a.member_list[n];
            return ve.createElement(
              "div",
              { key: c.accountid, style: o },
              ve.createElement(Oa, {
                friend: c,
                bHideGameName: s,
                groupView: this.props.groupView,
                context: this.GetFriendRenderContext()
              })
            );
          }),
          (e.prototype.render = function() {
            var t = this;
            if (this.props.inactive) return null;
            var e = Yo.GroupMemberStore.GetGroupMemberList(
                this.props.groupView.GetGroup().GetGroupID()
              ),
              n = this.state.nBucketChanges;
            if (0 == e.length) return null;
            var o = this.props.groupView.normalizedMemberSearch;
            0 < o.length && (e = this.BuildFilteredBuckets(e, o)),
              (this.m_rgLastRenderBuckets = e);
            for (var i = 0, r = 0, a = e; r < a.length; r++) {
              var s = a[r];
              i += this.GetVisibleRowsForBucket(s);
            }
            var c,
              l = function(e) {
                return ve.createElement(sa.a, {
                  ref: t.m_refList,
                  className: "ChatRoomMemberScrollList_List",
                  width: e.width,
                  height: e.height,
                  rowCount: i,
                  rowHeight: t.GetRowHeight,
                  rowRenderer: t.RenderRow,
                  bucketChanges: n
                });
              };
            return (
              (c = G.a.IN_CLIENT
                ? ve.createElement(ma, { className: "friendGroup" }, l)
                : ve.createElement(ca.a, { className: "friendGroup" }, l)),
              ve.createElement(
                "div",
                {
                  className: "chatRoomMembers CompactFriendsList",
                  style: { position: "relative" }
                },
                c
              )
            );
          }),
          R.c([M.a], e.prototype, "OnMemberListChanged", null),
          R.c([M.a], e.prototype, "OnToggleBucketCollapsed", null),
          R.c([M.a], e.prototype, "GetRowHeight", null),
          R.c([M.a], e.prototype, "RenderRow", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ga = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnSubmit = function() {
            var t = this,
              e = this.m_refInput && this.m_refInput.value;
            e &&
              this.props.groupView
                .GetGroup()
                .CreateChatRoom(e, this.props.bVoiceChannel)
                .then(function(e) {
                  e &&
                    (t.props.closeModal(),
                    t.props.bJoinChannel &&
                      (t.props.bVoiceChannel
                        ? e.StartVoiceChat()
                        : t.props.groupView.SelectChat(e.GetRoomID())));
                })
                .catch(function(e) {
                  er(
                    t.props.ownerWin,
                    Object(re.b)("#Generic_Error"),
                    Object(re.b)("#Chat_CreateChatRoom_GenericError")
                  ),
                    t.props.closeModal();
                });
          }),
          (t.prototype.render = function() {
            var t = this;
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Oi,
                {
                  classNameContent: "CreateChatChannelDialog",
                  onSubmit: this.OnSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)(
                    this.props.bVoiceChannel
                      ? "#GroupSettings_Channels_CreateVoice"
                      : "#GroupSettings_Channels_CreateText"
                  )
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(Gi, {
                    ref: function(e) {
                      t.m_refInput = e;
                    },
                    autoFocus: !0,
                    label: Object(re.b)("#Chat_SaveVoiceRoom_Name")
                  })
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, { onCancel: this.props.closeModal })
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnSubmit", null),
          t
        );
      })(ve.Component);
    var ba = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnCreateNewTextChannel = function(e) {
            var t,
              n,
              o,
              i = Yu(e);
            this.props.groupView.GetGroup().BCanAdminChannel() &&
              ((t = i),
              (n = this.props.groupView),
              (o = !1),
              Ji(
                ve.createElement(ga, {
                  ownerWin: t,
                  groupView: n,
                  bVoiceChannel: o,
                  bJoinChannel: !0
                }),
                t,
                "CreateChatChannelDialog",
                {
                  strTitle: Object(re.b)("#GroupSettings_Channels_CreateText"),
                  popupWidth: 664,
                  popupHeight: 280
                }
              ));
          }),
          (t.prototype.OnStartChannelRename = function(e) {
            this.props.groupView.StartRoomRename(e);
          }),
          (t.prototype.OnChannelRename = function(e, t) {
            this.props.groupView.GetGroup().RenameRoom(e, t);
          }),
          (t.prototype.OnEndChannelRename = function() {
            this.props.groupView.EndRoomRename();
          }),
          (t.prototype.ToggleCollapseExpand = function() {
            var e = this.props.groupView;
            e.SetChannelListCollapsed(!e.isChannelListCollapsed);
          }),
          (t.prototype.render = function() {
            var t = this,
              n = this.props.groupView,
              e = n.GetGroup().textRoomList,
              o = n.GetGroup().BCanAdminChannel(),
              i = n.isChannelListCollapsed;
            return ve.createElement(
              "div",
              { className: "chatRoomTextChannelsGroup" },
              ve.createElement(
                "div",
                {
                  className: "ChannelTypeTitle",
                  title: Object(re.b)("#Tooltip_TextChannel")
                },
                ve.createElement(
                  "div",
                  {
                    className: "ChannelTypeLabel" + (o ? "" : " NoPermission"),
                    onClick: this.OnCreateNewTextChannel,
                    title: o
                      ? Object(re.b)("#Tooltip_TextChannelCreate")
                      : Object(re.b)("#Tooltip_NoPermissionChannelCreate")
                  },
                  o
                    ? Object(re.b)("#Chat_AddTextChat")
                    : Object(re.b)("#Chat_CreateTextChannel_DefaultName")
                ),
                ve.createElement(
                  "div",
                  {
                    className: "chatRoomGroupNavCollapseExpand",
                    title: i ? "Expand List" : "Minimize List",
                    onClick: this.ToggleCollapseExpand
                  },
                  ve.createElement(Qo.k, null)
                )
              ),
              e.map(function(e) {
                return ve.createElement(va, {
                  key: e.unique_id,
                  chat: e,
                  bRenameActive: n.IsRoomRenameActive(e.GetRoomID()),
                  bActiveChat: e == n.GetActiveChatView().chat,
                  bDefaultRoom: e == n.GetGroup().GetDefaultChatRoom(),
                  onStartRename: t.OnStartChannelRename,
                  onRename: t.OnChannelRename,
                  onEndRename: t.OnEndChannelRename
                });
              })
            );
          }),
          R.c([M.a], t.prototype, "OnCreateNewTextChannel", null),
          R.c([M.a], t.prototype, "OnStartChannelRename", null),
          R.c([M.a], t.prototype, "OnChannelRename", null),
          R.c([M.a], t.prototype, "OnEndChannelRename", null),
          R.c([M.a], t.prototype, "ToggleCollapseExpand", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      va = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ToggleTextChat = function() {
            if (!this.props.bRenameActive) {
              var e = Yo.UIStore.IsChatRoomGroupActive(
                  zu(this),
                  this.props.chat.GetGroup()
                ),
                t = Yo.UIStore.ShowAndOrActivateChatRoomGroup(
                  zu(this),
                  this.props.chat.GetGroup(),
                  !0
                ),
                n = t.GetPopoverChatView();
              e && n && n.chat && n.chat == this.props.chat
                ? t.ClosePopoverChat()
                : t.SelectChat(this.props.chat.GetRoomID());
            }
          }),
          (t.prototype.OnContextMenu = function(e) {
            this.props.bRenameActive ||
              Xr(
                zu(this, e),
                this.props.chat.GetGroup(),
                this.props.chat.GetRoomID(),
                e,
                this.props.onStartRename
              );
          }),
          (t.prototype.render = function() {
            var e = this.props.chat,
              t = "chatRoomTextChannel";
            this.props.bActiveChat && (t += " ActiveTextChannel");
            var n = "chatRoomTextChannelName";
            this.props.bDefaultRoom && (n += " IsCommonsChannel");
            var o =
              this.props.bRenameActive && !this.props.chat.GetVoiceAllowed();
            return ve.createElement(
              "div",
              {
                className: t,
                onClick: this.ToggleTextChat,
                onContextMenu: this.OnContextMenu
              },
              ve.createElement(na, { chat: e }),
              ve.createElement(
                "div",
                { className: "chatRoomTextChannelIcon" },
                ve.createElement(Qo.W, null)
              ),
              !o && ve.createElement("div", { className: n }, e.name),
              !this.props.bDefaultRoom &&
                o &&
                ve.createElement(Ca, {
                  chat: this.props.chat,
                  onRename: this.props.onRename,
                  onEndRename: this.props.onEndRename
                })
            );
          }),
          R.c([M.a], t.prototype, "ToggleTextChat", null),
          R.c([M.a], t.prototype, "OnContextMenu", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Sa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.CreateVoiceRoom = function() {
            this.props.groupView.GetGroup().CreateAndJoinTempVoiceRoom();
          }),
          (t.prototype.OnVoiceRoomSelected = function(e) {
            this.props.groupView.GetRenameRoomID() == e.GetRoomID() ||
              (Yo.ChatStore.VoiceChat.GetActiveVoiceChatID() == e.GetRoomID() ||
                (this.props.groupView.ClosePopoverChat(), e.StartVoiceChat()));
          }),
          (t.prototype.OnStartChannelRename = function(e) {
            this.props.groupView.StartRoomRename(e);
          }),
          (t.prototype.OnChannelRename = function(e, t) {
            this.props.groupView.GetGroup().RenameRoom(e, t);
          }),
          (t.prototype.OnEndChannelRename = function() {
            this.props.groupView.EndRoomRename();
          }),
          (t.prototype.render = function() {
            var t = this,
              n = this.props.groupView,
              e = n.GetGroup().voiceRoomList;
            return ve.createElement(
              "div",
              { className: "chatRoomVoiceChannelsGroup" },
              ve.createElement(
                "div",
                {
                  className: "ChannelTypeTitle",
                  title: Object(re.b)("#Tooltip_VoiceChannelCreate"),
                  onClick: this.CreateVoiceRoom
                },
                ve.createElement(
                  "div",
                  { className: "ChannelTypeLabel" },
                  Object(re.b)("#Chat_AddVoiceChat")
                ),
                ve.createElement(
                  "div",
                  {
                    className: "ChatRoomAddRoomBtn",
                    title: Object(re.b)("#Tooltip_VoiceChannelCreate")
                  },
                  ve.createElement(Qo.H, null)
                )
              ),
              e.map(function(e) {
                return ve.createElement(ya, {
                  key: e.unique_id,
                  context: "VoiceRoomsGroup",
                  chat: e,
                  bRenameActive: n.GetRenameRoomID() == e.GetRoomID(),
                  onSelect: function() {
                    t.OnVoiceRoomSelected(e);
                  },
                  onStartRename: t.OnStartChannelRename,
                  onRename: t.OnChannelRename,
                  onEndRename: t.OnEndChannelRename
                });
              })
            );
          }),
          R.c([M.a], t.prototype, "CreateVoiceRoom", null),
          R.c([M.a], t.prototype, "OnVoiceRoomSelected", null),
          R.c([M.a], t.prototype, "OnStartChannelRename", null),
          R.c([M.a], t.prototype, "OnChannelRename", null),
          R.c([M.a], t.prototype, "OnEndChannelRename", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ya = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              dropToInviteFriend: void 0,
              bDropConfirmationNotice: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnContextMenu = function(e) {
            this.props.bRenameActive ||
              Xr(
                zu(this, e),
                this.props.chat.GetGroup(),
                this.props.chat.GetRoomID(),
                e,
                this.props.onStartRename
              ),
              e.preventDefault(),
              e.stopPropagation();
          }),
          (e.prototype.InviteToChat = function(e) {
            Ur(
              zu(this, e),
              e.currentTarget.ownerDocument.defaultView,
              this.props.chat.GetGroup(),
              this.props.chat
            ),
              e.stopPropagation();
          }),
          (e.prototype.OnDragEnter = function(e, t) {
            if (
              (AssertMsg(
                e && "friend" == e.type,
                "Invalid type passed to VoiceRoom.OnDragEnter"
              ),
              e)
            ) {
              var n = e;
              n.friend && this.setState({ dropToInviteFriend: n.friend });
            }
            return !0;
          }),
          (e.prototype.OnDragLeave = function() {
            this.state.dropToInviteFriend &&
              this.setState({ dropToInviteFriend: void 0 });
          }),
          (e.prototype.OnDragOver = function(e) {
            e.dataTransfer.dropEffect = "move";
          }),
          (e.prototype.OnDrop = function(e, t) {
            var n = this;
            if (
              (AssertMsg(
                e && "friend" == e.type,
                "Invalid data type passed to ChatRoomGroupDialog.OnDrop"
              ),
              e && "friend" == e.type)
            ) {
              var o = e;
              if (o.friend && o.friend != Yo.FriendStore.self) {
                this.state.dropToInviteFriend &&
                  this.setState({ dropToInviteFriend: void 0 }),
                  Qu.DragDropManager.SetDropConsumed();
                var i = t.currentTarget.ownerDocument.defaultView;
                this.props.chat.GetGroup().BIsUserGroupMember(o.friend)
                  ? (this.props.chat
                      .GetGroup()
                      .InviteFriend(o.friend.accountid, this.props.chat),
                    this.setState({ bDropConfirmationNotice: !0 }),
                    (this.m_dropInviteInvitee = o.friend),
                    (this.m_dropConfirmationInterval = window.setInterval(
                      function() {
                        n.setState({ bDropConfirmationNotice: !1 }),
                          window.clearInterval(n.m_dropConfirmationInterval);
                      },
                      1200
                    )))
                  : Fl(
                      {
                        invitee: o.friend,
                        chatview: null,
                        invitedto: this.props.chat
                      },
                      zu(this, t),
                      i
                    );
              }
            }
          }),
          (e.prototype.GetDragDropProps = function() {
            var e = { rgAcceptedTypes: ["friend"] };
            return (
              (e.fnDragEnter = this.OnDragEnter),
              (e.fnDragOver = this.OnDragOver),
              (e.fnDragLeave = this.OnDragLeave),
              (e.fnDrop = this.OnDrop),
              e
            );
          }),
          (e.prototype.GetFriendContext = function() {
            var e =
              this.props.chat && this.props.chat.GetGroup().readyToRender
                ? this.props.chat
                : null;
            return (
              (this.m_FriendContext && this.m_FriendContext.chat == e) ||
                (this.m_FriendContext = { chat: e }),
              this.m_FriendContext
            );
          }),
          (e.prototype.render = function() {
            var t = this,
              e = this.props.chat.GetGroup(),
              n = this.props.chat == e.GetDefaultChatRoom(),
              o =
                Yo.ChatStore.VoiceChat.GetActiveVoiceChatID() ==
                this.props.chat.GetRoomID(),
              i = Yo.CMInterface.steamid.GetAccountID(),
              r = Yo.FriendStore.GetPlayer(i),
              a = this.props.chat.voice_active_contains_only_self,
              s = "emptyChannelNotice",
              c = this.props.chat.voice_active_member_list.member_list.map(
                function(e) {
                  return ve.createElement(
                    Jo,
                    {
                      key: e.accountid,
                      classNames: "friend-anim",
                      timeout: 320
                    },
                    ve.createElement(Qs, {
                      friend: e,
                      key: e.accountid,
                      context: t.GetFriendContext(),
                      showVoiceLevel: !0,
                      bInVoiceList: !0
                    })
                  );
                }
              ),
              l = this.props.chat.voice_active_contains_friends;
            o &&
              !this.props.chat.voice_active_contains_self &&
              (0 == c.length && (a = !0),
              (l = !0),
              c.push(
                ve.createElement(
                  Jo,
                  { key: i, classNames: "friend-anim", timeout: 320 },
                  ve.createElement(Qs, {
                    friend: r,
                    key: i,
                    context: this.GetFriendContext(),
                    showVoiceLevel: !0
                  })
                )
              ));
            var p = ["chatRoomVoiceChannel"];
            o && p.push("ActiveVoiceChannel"),
              l ||
                "ChatRoomList" != this.props.context ||
                p.push("MinimizeMemberList"),
              this.state.dropToInviteFriend && p.push("voiceRoomActiveDrop"),
              o && a && (s += " Visible");
            var u = this.props.chat.IsUnsavedVoiceChannel(),
              m = this.props.chat.name;
            return ve.createElement(
              ji,
              R.a(
                { className: p.join(" "), onClick: this.props.onSelect },
                this.GetDragDropProps()
              ),
              ve.createElement("div", {
                className: "chatRoomVoiceChannelIconGlow"
              }),
              ve.createElement(
                "div",
                {
                  className: "chatRoomVoiceChannelNameContainer",
                  onContextMenu: this.OnContextMenu
                },
                ve.createElement(
                  "div",
                  { className: "chatRoomVoiceChannelIcon" },
                  ve.createElement(Qo.cb, null)
                ),
                !this.props.bRenameActive &&
                  ve.createElement(
                    "div",
                    {
                      className:
                        "chatRoomVoiceChannelName" +
                        (u ? " unsavedVoiceChannel" : "")
                    },
                    m
                  ),
                this.props.bRenameActive &&
                  ve.createElement(Ca, {
                    chat: this.props.chat,
                    onRename: this.props.onRename,
                    onEndRename: this.props.onEndRename
                  }),
                !this.props.bRenameActive &&
                  ve.createElement(
                    ve.Fragment,
                    null,
                    ve.createElement(
                      "div",
                      {
                        onContextMenu: this.OnContextMenu,
                        onClick: this.OnContextMenu,
                        className: "VoiceControlPanelButton chatPinRoom",
                        title: "Channel Options"
                      },
                      ve.createElement(Qo.l, null)
                    )
                  )
              ),
              ve.createElement(
                "div",
                { className: "VoiceChannelParticipants CompactFriendsList" },
                !l && c,
                l && ve.createElement(Xo, { enter: !0, exit: !0 }, c)
              ),
              ve.createElement(
                "div",
                { className: s },
                Object(re.b)("#Chat_VoiceEmptyChannel")
              ),
              ve.createElement(Rs, {
                name: m,
                chat: this.props.chat,
                nostatus: !0
              }),
              !n &&
                ve.createElement(va, {
                  chat: this.props.chat,
                  bRenameActive: !1,
                  bActiveChat: !1,
                  bDefaultRoom: !1
                }),
              ve.createElement("div", { className: "ScratchPadConnect" }),
              this.state.bDropConfirmationNotice &&
                ve.createElement(
                  "div",
                  {
                    className:
                      "dropConfirmationNotice" +
                      (this.state.bDropConfirmationNotice ? " Active" : "")
                  },
                  ve.createElement(
                    "div",
                    { className: "dropConfirmationLabel" },
                    ve.createElement("img", {
                      className: "avatar",
                      src: this.m_dropInviteInvitee.persona.avatar_url_medium
                    })
                  )
                ),
              ve.createElement("div", { className: "dropTargetBox" })
            );
          }),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "InviteToChat", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ca = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.m_strValue = ""), (t.m_strValue = t.props.chat.name), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillReceiveProps = function(e) {
            this.props.chat != e.chat && (this.m_strValue = e.chat.name);
          }),
          (e.prototype.componentDidMount = function() {
            window.addEventListener("keydown", this.OnGlobalKeyDown, !1);
          }),
          (e.prototype.componentWillUnmount = function() {
            window.removeEventListener("keydown", this.OnGlobalKeyDown, !1);
          }),
          (e.prototype.BindInputRef = function(e) {
            e && e.focus();
          }),
          (e.prototype.OnChange = function(e) {
            this.m_strValue = e.target.value;
          }),
          (e.prototype.OnSubmit = function(e) {
            this.SubmitAndClose(), e.preventDefault();
          }),
          (e.prototype.OnGlobalKeyDown = function(e) {
            27 == e.keyCode && this.Close();
          }),
          (e.prototype.OnBlur = function(e) {
            this.SubmitAndClose();
          }),
          (e.prototype.SubmitAndClose = function() {
            this.props.onRename(this.props.chat.GetRoomID(), this.m_strValue),
              this.Close();
          }),
          (e.prototype.Close = function() {
            this.props.onEndRename();
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              "form",
              { className: "RenameChatRoomInline", onSubmit: this.OnSubmit },
              ve.createElement("input", {
                ref: this.BindInputRef,
                type: "text",
                value: this.m_strValue,
                onChange: this.OnChange,
                onBlur: this.OnBlur
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_strValue", void 0),
          R.c([M.a], e.prototype, "BindInputRef", null),
          R.c([M.a], e.prototype, "OnChange", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "OnGlobalKeyDown", null),
          R.c([M.a], e.prototype, "OnBlur", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ia = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnToggleCollapsed = function(e) {
            this.props.onToggleCollapse();
          }),
          (t.prototype.render = function() {
            var e = this.props.collapsed,
              t = this.props.memberCount,
              n = this.props.name,
              o = "groupName";
            return (
              e && (o += " Collapsed"),
              ve.createElement(
                "div",
                { className: o, onClick: this.OnToggleCollapsed },
                ve.createElement(
                  "div",
                  { className: "groupIcon" },
                  ve.createElement(Qo.r, null)
                ),
                this.props.collapsible &&
                  ve.createElement(
                    "div",
                    { className: "ExpandPlusMinus" },
                    ve.createElement(Qo.H, null)
                  ),
                ve.createElement(
                  "span",
                  { className: "groupCountCollapsed" },
                  t
                ),
                ve.createElement(
                  "div",
                  { className: "groupLabelsContainer" },
                  ve.createElement("span", { className: "groupNameLabel" }, n),
                  ve.createElement(
                    "span",
                    { className: "groupCount" },
                    "(",
                    t,
                    ")"
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnToggleCollapsed", null),
          t
        );
      })(ve.PureComponent),
      Oa = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OnFriendSelected = function() {
            this.props.friend.OpenChatDialog(zu(null)),
              this.props.groupView.ClearMemberSearch();
          }),
          (e.prototype.render = function() {
            var e = [],
              t = "",
              n = this.props.groupView,
              o = n.GetGroup(),
              i = n.isMemberListExpanded,
              r = o.GetMemberRank(this.props.friend.accountid),
              a = this.props.friend.efriendrelationship;
            switch (r) {
              default:
                break;
              case 30:
                t = "Moderator";
                break;
              case 40:
                t = "Officer";
                break;
              case 50:
                (t = "Owner"),
                  o.BIsClanChatRoom() ||
                    e.push(
                      ve.createElement(
                        "div",
                        {
                          key: "rankIcon",
                          className:
                            "rankIcon rankOwner" +
                            (this.props.friend.is_friend ? " isFriend" : "")
                        },
                        ve.createElement(Qo.h, null)
                      )
                    );
            }
            switch ((o.BIsClanChatRoom() &&
              (40 <= r
                ? e.push(
                    ve.createElement(
                      "div",
                      { key: "rankIcon", className: "rankIcon rankOwner" },
                      ve.createElement("img", {
                        src:
                          G.a.COMMUNITY_CDN_URL +
                          "public/images/skin_1/comment_modindicator_officer.png"
                      })
                    )
                  )
                : 30 <= r &&
                  e.push(
                    ve.createElement(
                      "div",
                      { key: "rankIcon", className: "rankIcon rankOwner" },
                      ve.createElement("img", {
                        src:
                          G.a.COMMUNITY_CDN_URL +
                          "public/images/skin_1/comment_modindicator_moderator.png"
                      })
                    )
                  )),
            a)) {
              case 3:
              case 6:
                e.push(
                  ve.createElement(
                    "div",
                    { key: "friendIcon", className: "chatMemberFriendIcon" },
                    ve.createElement(Qo.o, null)
                  )
                );
                break;
              case 2:
                e.push(
                  ve.createElement(
                    "div",
                    { key: "friendIcon", className: "chatMemberFriendIcon" },
                    ve.createElement(Qo.o, { bPending: !0 })
                  )
                );
            }
            var s = {
              friend: this.props.friend,
              context: this.props.context,
              className: t,
              action: this.OnFriendSelected,
              bHideGameName: this.props.bHideGameName
            };
            return i
              ? ve.createElement(Qs, R.a({}, s, { listStatusIndicatorLeft: e }))
              : ve.createElement($s, R.a({}, s), e);
          }),
          R.c([M.a], e.prototype, "OnFriendSelected", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ea = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.AddSizeClass = function(e) {
            "small" == this.props.size
              ? e.push("throbber_small")
              : "medium" == this.props.size
                ? e.push("throbber_medium")
                : "xlarge" == this.props.size
                  ? e.push("throbber_xlarge")
                  : e.push("throbber_large");
          }),
          (e.prototype.render = function() {
            var e = ["LoadingWrapper SteamLogoThrobber"];
            this.AddSizeClass(e),
              void 0 === this.props.string && e.push("noString"),
              this.props.className && e.push(this.props.className);
            var t = ve.createElement(
              "div",
              { className: e.join(" ") },
              ve.createElement(
                "div",
                { className: "Throbber" },
                ve.createElement(Qo.X, { className: "base" }),
                ve.createElement(Qo.X, { className: "blur" })
              )
            );
            return (
              "center" == this.props.position &&
                (t = ve.createElement(
                  "div",
                  { className: "throbber_center_wrapper" },
                  t,
                  ve.createElement(
                    "div",
                    { className: "ThrobberText" },
                    this.props.string
                  )
                )),
              t
            );
          }),
          e
        );
      })(ve.PureComponent);
    var wa,
      Ma,
      Da = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_inviteLinks = {
              loadingState: "pending",
              rgInviteLinks: null
            }),
            (t.m_bans = new Ft()),
            (t.m_invitedUsers = {
              loadingState: "pending",
              rgInvitedUsers: null
            }),
            (t.state = { strRoomName: t.props.groupView.GetGroup().name }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.DismissDialog = function() {
            this.props.closeModal();
          }),
          (e.prototype.CloseDialog = function() {
            this.props.closeModal();
          }),
          (e.prototype.OnLeave = function(e) {
            var t = this,
              n = e.currentTarget.ownerDocument.defaultView,
              o = zu(null, e),
              i = this.props.groupView.GetGroup(),
              r = i.BIsClanChatRoom()
                ? "#Chat_Actions_LeaveChatRoomGroup_ClanConfirm"
                : i.BIsAccountIDOwner(Yo.CMInterface.steamid.GetAccountID())
                  ? "#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm"
                  : "#Chat_Actions_LeaveChatRoomGroup_Confirm";
            Zi(
              n,
              Object(re.b)("#GroupSettings_Leave_Section"),
              Object(re.b)(r, i.name),
              Object(re.b)("#GroupSettings_Leave_Button")
            )
              .then(function() {
                i.LeaveChatRoomGroup(o);
              })
              .then(function() {
                t.props.closeModal();
              })
              .catch(function() {});
          }),
          (e.prototype.GetPageList = function() {
            var e = this.props.groupView.GetGroup(),
              t = [],
              n = (e.GetMyRank(), e.BCanAdminGroup()),
              o = e.BIsAccountIDOwner(Yo.CMInterface.steamid.GetAccountID()),
              i = e.BCanInvite(),
              r = e.BCanAdminChannel(),
              a = e.BCanBan();
            return (
              e.IsNamedGroupChat()
                ? (t.push({
                    title: Object(re.b)("#GroupSettings_General_Section"),
                    uniqueName: "GroupSettings_General",
                    content: ve.createElement(Ga, { group: e, enabled: n }),
                    enabled: n
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_Channels_Section"),
                    uniqueName: "GroupSettings_Channels",
                    content: ve.createElement(La, {
                      groupView: this.props.groupView,
                      enabled: r
                    }),
                    enabled: r
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_Permissions_Section"),
                    uniqueName: "GroupSettings_Permissions",
                    content: ve.createElement(Aa, { group: e, enabled: o }),
                    enabled: o,
                    hideTitle: !0
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_Invite_Section"),
                    uniqueName: "GroupSettings_Invite",
                    content: ve.createElement(Pa, {
                      group: e,
                      inviteLinks: this.m_inviteLinks,
                      enabled: i
                    }),
                    enabled: i
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_InvitedUsers_Section"),
                    uniqueName: "GroupSettings_InvitedUsers",
                    content: ve.createElement(Fa, {
                      group: e,
                      invitedUsers: this.m_invitedUsers,
                      enabled: i
                    }),
                    enabled: i
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_Bans_Section"),
                    uniqueName: "GroupSettings_Bans",
                    content: ve.createElement(Ba, {
                      group: e,
                      bans: this.m_bans,
                      enabled: a
                    }),
                    enabled: a
                  }))
                : (t.push({
                    title: Object(re.b)("#GroupSettings_Save_Section"),
                    uniqueName: "GroupSettings_Save",
                    content: ve.createElement(Ta, { group: e }),
                    enabled: !0
                  }),
                  t.push({
                    title: Object(re.b)("#GroupSettings_Invite_Section"),
                    uniqueName: "GroupSettings_Invite",
                    content: ve.createElement(Pa, {
                      group: e,
                      inviteLinks: this.m_inviteLinks,
                      enabled: i
                    }),
                    enabled: i
                  })),
              t.push({
                title: Object(re.b)("#GroupSettings_Leave_Section"),
                content: ve.createElement(Ra, { group: e }),
                className: "ChatRoomLeave",
                click: this.OnLeave
              }),
              t
            );
          }),
          (e.prototype.render = function() {
            var e = this.GetPageList();
            return ve.createElement(
              Ki,
              { onEscKeypress: this.DismissDialog },
              ve.createElement(xi, {
                title: Object(re.b)("#GroupSettings"),
                className: "ChatRoomSettingsDialog",
                pages: e
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_inviteLinks", void 0),
          R.c([m.observable], e.prototype, "m_invitedUsers", void 0),
          R.c([M.a], e.prototype, "DismissDialog", null),
          R.c([M.a], e.prototype, "CloseDialog", null),
          R.c([M.a], e.prototype, "OnLeave", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ta = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.m_bSaving = !1), (t.m_strError = ""), t;
        }
        return (
          R.d(e, n),
          (e.prototype.BindInputRef = function(e) {
            this.m_refInput = e;
          }),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.AnimateUpgrade_In = function() {
            document.getElementById("animUp");
          }),
          (e.prototype.AnimateUpgrade_Out = function() {
            document.getElementById("animDown");
          }),
          (e.prototype.SaveGroup = function() {
            var t = this,
              e = this.props.group;
            (this.m_bSaving = !1),
              (this.m_strError = ""),
              e.SaveChatRoomGroup(this.m_refInput.value).catch(function(e) {
                (t.m_bSaving = !1),
                  (t.m_strError =
                    12 == e
                      ? Object(re.b)("#GroupSettings_Save_NameError")
                      : Object(re.b)("#GroupSettings_Save_GenericError"));
              });
          }),
          (e.prototype.render = function() {
            var e = this.m_bSaving,
              t = this.m_strError;
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.SaveGroup },
              ve.createElement(
                _i,
                null,
                Object(re.b)("#GroupSettings_Save_Desc"),
                ve.createElement(
                  "div",
                  null,
                  ve.createElement(
                    "ul",
                    null,
                    ve.createElement(
                      "li",
                      null,
                      Object(re.b)("#GroupSettings_Save_Feature_1")
                    ),
                    ve.createElement(
                      "li",
                      null,
                      Object(re.b)("#GroupSettings_Save_Feature_2")
                    ),
                    ve.createElement(
                      "li",
                      null,
                      Object(re.b)("#GroupSettings_Save_Feature_3")
                    ),
                    ve.createElement(
                      "li",
                      null,
                      Object(re.b)("#GroupSettings_Save_Feature_4")
                    )
                  )
                )
              ),
              ve.createElement(Gi, {
                ref: this.BindInputRef,
                autoFocus: !0,
                label: Object(re.b)("#GroupSettings_Save_NameGroup"),
                disabled: e
              }),
              !e &&
                ve.createElement(
                  ve.Fragment,
                  null,
                  0 < t.length &&
                    ve.createElement(
                      "div",
                      { className: "ErrorWhileSaving" },
                      t
                    ),
                  ve.createElement(
                    Ei,
                    { className: "_FixedHeight" },
                    Object(re.b)("#GroupSettings_Save_Section")
                  )
                ),
              e && ve.createElement(Ea, null)
            );
          }),
          R.c([m.observable], e.prototype, "m_bSaving", void 0),
          R.c([m.observable], e.prototype, "m_strError", void 0),
          R.c([M.a], e.prototype, "BindInputRef", null),
          R.c([M.a], e.prototype, "AnimateUpgrade_In", null),
          R.c([M.a], e.prototype, "AnimateUpgrade_Out", null),
          R.c([M.a], e.prototype, "SaveGroup", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi),
      Ga = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_strRoomName = t.props.group.IsNamedGroupChat()
              ? t.props.group.name
              : ""),
            (t.m_strTagLine = t.props.group.tagline),
            (t.state = { bNameSubmitted: !1, bTaglineSubmitted: !1 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.AvatarUploadEResultToString = function(e) {
            var t = "#Chat_Settings_Error_Unknown";
            switch (e) {
              case 21:
                t = "#Chat_Settings_Error_NotLoggedOn";
                break;
              case 112:
                t = "#Chat_Settings_Error_LimitedUser";
                break;
              case 15:
                t = "#Chat_Settings_Error_AccessDenied";
                break;
              case 2:
                t = "#Chat_Settings_Error_FailedToUpload";
                break;
              case 25:
                t = "#Chat_Settings_Error_FileTooLarge";
                break;
              case 8:
                t = "#Chat_Settings_Error_InvalidImage";
                break;
              case 37:
                t = "#Chat_Settings_Error_ServerError";
            }
            return Object(re.b)(t);
          }),
          (e.prototype.SetChatRoomGroupAvatarEResultToString = function(e) {
            var t = "#Chat_Settings_Error_Unknown";
            switch (e) {
              case 10:
              case 8:
              case 32:
                t = "#Chat_Settings_Error_ServerError";
                break;
              case 15:
                t = "#Chat_Settings_Error_NotAdmin";
            }
            return Object(re.b)(t);
          }),
          (e.prototype.OnFileChange = function(e) {
            var n = this,
              t = e.target.files[0],
              o = this.props.group;
            e.preventDefault();
            var i = new FormData();
            i.set("sessionid", G.a.SESSIONID), i.set("avatar", t);
            C.a
              .post(G.a.CHAT_BASE_URL + "chat/avatarfileupload/", i, {
                headers: { "content-type": "multipart/form-data" }
              })
              .then(function(e) {
                1 == e.data.success &&
                  o.SetChatRoomGroupAvatar(e.data.sha).catch(function(e) {
                    var t = n.SetChatRoomGroupAvatarEResultToString(e);
                    er(window, Object(re.b)("#Generic_Error"), t);
                  });
              })
              .catch(function(e) {
                var t = n.AvatarUploadEResultToString(e.response.data.success);
                er(window, Object(re.b)("#Generic_Error"), t),
                  console.log(e.response);
              });
          }),
          (e.prototype.bindFileUploadControl = function(e) {
            this.m_fileInput = e;
          }),
          (e.prototype.OnNameChange = function(e) {
            (this.m_strRoomName = e.target.value),
              this.setState({ bNameSubmitted: !1 });
          }),
          (e.prototype.OnAvatarChange = function() {
            this.m_fileInput.click();
          }),
          (e.prototype.OnTagLineChange = function(e) {
            (this.m_strTagLine = e.target.value),
              this.setState({ bTaglineSubmitted: !1 });
          }),
          (e.prototype.OnNameBlur = function() {
            var e = this.props.group;
            (e.IsNamedGroupChat() || this.m_strRoomName) &&
              ((e.IsNamedGroupChat() && e.name == this.m_strRoomName) ||
                (e.RenameChatRoomGroup(this.m_strRoomName),
                document.getElementById("b1").blur(),
                this.setState({ bNameSubmitted: !0 })));
          }),
          (e.prototype.OnTagLineBlur = function() {
            var e = this.props.group;
            e.tagline != this.m_strTagLine &&
              (e.SetChatRoomGroupTagline(this.m_strTagLine),
              this.setState({ bTaglineSubmitted: !0 }),
              document.getElementById("b2").blur());
          }),
          (e.prototype.OnSubmitSent = function() {
            this.OnTagLineBlur(), this.OnNameBlur();
          }),
          (e.prototype.render = function() {
            var e;
            if (this.props.group.BIsClanChatRoom())
              e = ve.createElement("div", null);
            else if (null == this.props.group.GetOwnerAccountID())
              e = ve.createElement(
                "div",
                null,
                " ",
                Object(re.b)("#Chat_Settings_No_Owner"),
                " "
              );
            else {
              var t = Yo.FriendStore.GetPlayer(
                this.props.group.GetOwnerAccountID()
              );
              e = ve.createElement(
                "div",
                null,
                ve.createElement(
                  hi,
                  null,
                  " ",
                  Object(re.b)("#Chat_Settings_General_Owner")
                ),
                ve.createElement(Qs, {
                  className: "groupOwnerFriend",
                  friend: t,
                  context: null
                })
              );
            }
            return ve.createElement(
              Ii,
              { onSubmit: this.OnSubmitSent, className: "DialogBody" },
              ve.createElement(
                vi,
                null,
                ve.createElement(
                  "div",
                  { className: "AvatarAndUser" },
                  ve.createElement(
                    hi,
                    null,
                    Object(re.b)("#Chat_Settings_General_Icon")
                  ),
                  ve.createElement("img", {
                    className: "currentUserAvatar largeAvatar no-drag",
                    src: this.props.group.hasAvatar
                      ? this.props.group.avatar_url_full
                      : "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                  }),
                  !this.props.group.hasAvatar &&
                    ve.createElement(
                      "div",
                      { className: "noIconLabel" },
                      Object(re.b)("#Chat_Settings_General_NoIcon")
                    ),
                  ve.createElement("input", {
                    type: "file",
                    style: { display: "none" },
                    name: "fileupload",
                    accept: ".png, .jpg, .jpeg, .gif",
                    ref: this.bindFileUploadControl,
                    onChange: this.OnFileChange
                  }),
                  ve.createElement(
                    wi,
                    {
                      onClick: this.OnAvatarChange,
                      disabled: !this.props.enabled
                    },
                    Object(re.b)(
                      this.props.group.hasAvatar
                        ? "#Chat_Settings_General_ChangeIcon"
                        : "#Chat_Settings_General_AddIcon"
                    )
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "GeneralChatSettings" },
                  ve.createElement(Gi, {
                    autoComplete: "off",
                    id: "b1",
                    className: "groupChatName",
                    label: Object(re.b)("#Chat_Settings_General_Chat_Name"),
                    type: "text",
                    value: this.m_strRoomName,
                    onChange: this.OnNameChange,
                    onBlur: this.OnNameBlur,
                    autoFocus: !0,
                    disabled: !this.props.enabled
                  }),
                  ve.createElement("input", {
                    type: "submit",
                    style: { display: "none" }
                  }),
                  ve.createElement(Gi, {
                    autoComplete: "off",
                    id: "b2",
                    className: "groupChatTag",
                    label: Object(re.b)("#Chat_Settings_General_Tagline"),
                    type: "text",
                    value: this.m_strTagLine,
                    onChange: this.OnTagLineChange,
                    onBlur: this.OnTagLineBlur,
                    disabled: !this.props.enabled
                  }),
                  e
                )
              )
            );
          }),
          R.c([m.observable], e.prototype, "m_strRoomName", void 0),
          R.c([m.observable], e.prototype, "m_strTagLine", void 0),
          R.c([M.a], e.prototype, "OnFileChange", null),
          R.c([M.a], e.prototype, "bindFileUploadControl", null),
          R.c([M.a], e.prototype, "OnNameChange", null),
          R.c([M.a], e.prototype, "OnAvatarChange", null),
          R.c([M.a], e.prototype, "OnTagLineChange", null),
          R.c([M.a], e.prototype, "OnNameBlur", null),
          R.c([M.a], e.prototype, "OnTagLineBlur", null),
          R.c([M.a], e.prototype, "OnSubmitSent", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi),
      Ra = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnLeave = function(e) {
            var t = this,
              n = e.currentTarget.ownerDocument.defaultView,
              o = zu(null, e),
              i = this.props.group.BIsClanChatRoom()
                ? "#Chat_Actions_LeaveChatRoomGroup_ClanConfirm"
                : this.props.group.BIsAccountIDOwner(
                    Yo.CMInterface.steamid.GetAccountID()
                  )
                  ? "#Chat_Actions_OwnerLeaveChatRoomGroup_Confirm"
                  : "#Chat_Actions_LeaveChatRoomGroup_Confirm";
            Zi(
              n,
              Object(re.b)("#GroupSettings_Leave_Section"),
              Object(re.b)(i, this.props.group.name),
              Object(re.b)("#GroupSettings_Leave_Button")
            )
              .then(function() {
                t.props.group.LeaveChatRoomGroup(o);
              })
              .catch(function() {});
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              "div",
              null,
              Object(re.b)("#GroupSettings_Leave_Confirm"),
              ve.createElement(
                wi,
                { onClick: this.OnLeave },
                Object(re.b)("#GroupSettings_Leave_Button")
              )
            );
          }),
          R.c([M.a], e.prototype, "OnLeave", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi),
      Na = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this,
              t = this.props.roomList.indexOf(this.props.room);
            AssertMsg(-1 !== t, "Couldn't find CChatRoom inside of its list?");
            var n = t - 1,
              o = function() {
                e.props.room
                  .GetGroup()
                  .ReorderRoom(
                    e.props.roomList[n].GetRoomID(),
                    e.props.room.GetRoomID()
                  );
              },
              i = t + 1,
              r = function() {
                e.props.room
                  .GetGroup()
                  .ReorderRoom(
                    e.props.room.GetRoomID(),
                    e.props.roomList[i].GetRoomID()
                  );
              };
            return (
              (n < 0 || this.props.roomList[n].BIsDefaultRoom()) &&
                (o = void 0),
              i >= this.props.roomList.length && (r = void 0),
              this.props.room.BIsDefaultRoom() && (r = o = void 0),
              this.props.enabled || (r = o = void 0),
              void 0 === o && void 0 === r
                ? null
                : ve.createElement(
                    "div",
                    { className: "rolePriorityContainer" },
                    ve.createElement(
                      "div",
                      {
                        className:
                          "rolePriorityButton roleUp" +
                          (void 0 === o ? " Disabled" : ""),
                        onClick: o
                      },
                      ve.createElement(Qo.n, { angle: 0 })
                    ),
                    ve.createElement(
                      "div",
                      {
                        className:
                          "rolePriorityButton roleDown" +
                          (void 0 === r ? " Disabled" : ""),
                        onClick: r
                      },
                      ve.createElement(Qo.n, { angle: 180 })
                    )
                  )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      La = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnCreateNewTextChannel = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            Ji(
              ve.createElement(ga, {
                ownerWin: t,
                groupView: this.props.groupView,
                bVoiceChannel: !1,
                bJoinChannel: !1
              }),
              t
            );
          }),
          (e.prototype.OnCreateNewVoiceChannel = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            Ji(
              ve.createElement(ga, {
                ownerWin: t,
                groupView: this.props.groupView,
                bVoiceChannel: !0,
                bJoinChannel: !1
              }),
              t
            );
          }),
          (e.prototype.OnDeleteChannel = function(e, n) {
            Zi(
              e.currentTarget.ownerDocument.defaultView,
              Object(re.b)("#GroupSettings_Channels_DeleteChannel"),
              Object(re.b)("#GroupSettings_Channels_DeleteConfirm"),
              Object(re.b)("#GroupSettings_Channels_DeleteButtonLabel"),
              Object(re.b)("#Button_Cancel"),
              !0
            )
              .then(function() {
                var e = n.GetGroup(),
                  t = n.GetRoomID();
                e.DeleteChatRoom(t);
              })
              .catch(function() {});
          }),
          (e.prototype.render = function() {
            var o = this,
              i = this.props.groupView.GetGroup().textRoomList,
              r = this.props.groupView.GetGroup().voiceRoomList,
              t = function(t, e, n) {
                return ve.createElement(
                  "div",
                  {
                    key: t.GetRoomID(),
                    className: "ChatGroupSettingsChannels_Row"
                  },
                  ve.createElement(
                    "div",
                    { className: "_DialogRow _DialogRowBackground" },
                    ve.createElement(
                      "div",
                      { className: "_DialogRowLabel" },
                      n
                        ? ve.createElement(Qo.cb, null)
                        : ve.createElement(Qo.W, null),
                      ve.createElement(
                        "div",
                        {
                          className: t.IsDefaultRoomForGroup()
                            ? "HomeChannel"
                            : "",
                          style: { alignSelf: "center" }
                        },
                        t.name
                      )
                    ),
                    t.IsDefaultRoomForGroup() &&
                      ve.createElement(
                        "div",
                        { className: "_DialogRowSecondaryLabel" },
                        Object(re.b)(
                          "#GroupSettings_Channels_HomeChannelDeleteLabel"
                        )
                      ),
                    !t.IsDefaultRoomForGroup() &&
                      o.props.enabled &&
                      ve.createElement(
                        "div",
                        {
                          className: "ChannelDeleteButton",
                          onClick: function(e) {
                            return o.OnDeleteChannel(e, t);
                          }
                        },
                        Object(re.b)("#GroupSettings_Channels_Delete")
                      )
                  ),
                  ve.createElement(Na, {
                    room: t,
                    roomList: n ? r : i,
                    enabled: o.props.enabled
                  })
                );
              },
              e = i.map(function(e) {
                return t(e, name, !1);
              }),
              n = r.map(function(e) {
                return t(e, name, !0);
              });
            return ve.createElement(
              Ii,
              { className: "DialogBody" },
              ve.createElement(
                mi,
                null,
                ve.createElement(
                  vi,
                  null,
                  ve.createElement(
                    wi,
                    {
                      className: "DialogButtonTall",
                      svgicon: Qo.W,
                      onClick: this.OnCreateNewTextChannel,
                      disabled: !this.props.enabled
                    },
                    " ",
                    Object(re.b)("#GroupSettings_Channels_CreateText"),
                    " "
                  ),
                  ve.createElement(
                    wi,
                    {
                      className: "DialogButtonTall",
                      svgicon: function() {
                        return Qo.cb({});
                      },
                      onClick: this.OnCreateNewVoiceChannel,
                      disabled: !this.props.enabled
                    },
                    " ",
                    Object(re.b)("#GroupSettings_Channels_CreateVoice"),
                    " "
                  )
                )
              ),
              ve.createElement(
                gi,
                null,
                0 != e.length &&
                  ve.createElement(
                    "div",
                    {
                      className: "displayColumn flexShrinkNone",
                      style: { marginBottom: "32px" }
                    },
                    ve.createElement(
                      hi,
                      null,
                      Object(re.b)("#GroupSettings_Channels_TextChannels")
                    ),
                    ve.createElement(Di, null),
                    e
                  ),
                0 != n.length &&
                  ve.createElement(
                    "div",
                    { className: "displayColumn flexShrinkNone" },
                    ve.createElement(
                      hi,
                      null,
                      Object(re.b)("#GroupSettings_Channels_VoiceChannels")
                    ),
                    ve.createElement(Di, null),
                    n
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnCreateNewTextChannel", null),
          R.c([M.a], e.prototype, "OnCreateNewVoiceChannel", null),
          R.c([M.a], e.prototype, "OnDeleteChannel", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi),
      ka = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          Yo.FriendStore.self;
          return (t.state = { strRoleName: "" }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnSubmit = function() {
            var t = this,
              e = this.m_refInput && this.m_refInput.value.trim();
            e &&
              0 != e.length &&
              (this.props.closeModal(),
              this.props.group.CreateRole(e).catch(function(e) {
                er(
                  t.props.ownerWin,
                  Object(re.b)("#Generic_Error"),
                  Object(re.b)("#GroupSettings_CreateRole_GenericError")
                ),
                  t.props.closeModal();
              }));
          }),
          (e.prototype.HandleTextEntry = function(e) {
            this.setState({ strRoleName: e.target.value });
          }),
          (e.prototype.render = function() {
            var t = this,
              e = 0 < this.state.strRoleName.length;
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Oi,
                {
                  classNameContent: "CreateChatChannelDialog",
                  onSubmit: this.OnSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)("#GroupSettings_CreateRole_Title")
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(Gi, {
                    ref: function(e) {
                      t.m_refInput = e;
                    },
                    autoFocus: !0,
                    label: Object(re.b)(
                      "#GroupSettings_CreateRole_Description"
                    ),
                    value: this.state.strRoleName,
                    onChange: this.HandleTextEntry
                  })
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(Ti, {
                    onCancel: this.props.closeModal,
                    bOKDisabled: !e
                  })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "HandleTextEntry", null),
          e
        );
      })(ve.Component),
      Aa = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              editRoleID: void 0,
              editRoleName: void 0,
              editRoleActions: void 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnCreateRole = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            Ji(
              ve.createElement(ka, { ownerWin: t, group: this.props.group }),
              t
            );
          }),
          (e.prototype.BCanLocalUserEditRole = function(e) {
            return this.props.group.BCanIModifyRole(e);
          }),
          (e.prototype.BCanLocalUserAssignRole = function() {
            return this.props.group.BCanIAssignRoles();
          }),
          (e.prototype.EditRole = function(e) {
            var t = this.props.group.GetRoleName(e),
              n = this.props.group.GetRoleActions(e);
            t &&
              n &&
              this.setState({
                editRoleID: e,
                editRoleName: t,
                editRoleActions: n
              });
          }),
          (e.prototype.RenameRole = function(e, t) {
            var n = this;
            this.props.group.RenameRole(e, t).catch(function(e) {
              n.setState({
                editRoleName: n.props.group.GetRoleName(n.state.editRoleID)
              });
            });
          }),
          (e.prototype.DeleteRole = function(e, t) {
            var n = this,
              o = e.currentTarget.ownerDocument.defaultView;
            if (t != this.props.group.DefaultRoleID()) {
              var i = this.props.group.GetRoleName(t),
                r = ve.createElement(
                  "div",
                  { style: { marginTop: "8px", color: "white" } },
                  i
                );
              Zi(
                window,
                Object(re.b)("#GroupSettings_Permissions_ConfirmDeleteTitle"),
                Object(re.b)("#GroupSettings_Permissions_ConfirmDelete"),
                Object(re.b)("#GroupSettings_Permissions_ConfirmDeleteButton"),
                Object(re.b)("#Button_Cancel"),
                !0,
                r
              )
                .then(function() {
                  return n.props.group.DeleteRole(t);
                })
                .then(function() {
                  n.setState({ editRoleID: void 0 });
                })
                .catch(function(e) {
                  null != e &&
                    er(
                      o,
                      Object(re.b)("#Generic_Error"),
                      Object(re.b)("#GroupSettings_DeleteRole_GenericError")
                    );
                });
            }
          }),
          (e.prototype.OnEditRoleNameChange = function(e) {
            this.setState({ editRoleName: e.target.value });
          }),
          (e.prototype.OnEditRoleNameBlur = function() {
            this.RenameRole(this.state.editRoleID, this.state.editRoleName),
              document.getElementById("b1").blur();
          }),
          (e.prototype.DoesRoleGrantPermission = function(e, t) {
            return !0;
          }),
          (e.prototype.OnSettingToggled = function(e, t) {
            this.props.group.SetRoleAction(this.state.editRoleID, e, t);
          }),
          (e.prototype.PermissionToggleRow = function(t) {
            var n = this,
              e = !1,
              o = this.props.group.GetRoleActions(this.state.editRoleID);
            return (
              o && (e = o.BCanPerformAction(t.eAction)),
              ve.createElement(Ai, {
                key: t.eAction,
                onChange: function(e) {
                  n.OnSettingToggled(t.eAction, e);
                },
                label: t.strLabel,
                checked: e,
                disabled: t.disabled
              })
            );
          }),
          (e.prototype.MoveRoleUp = function(e) {
            var t = this,
              n = this.props.group.GetRoleOrdinal(e),
              o = Math.max(0, n - 1);
            this.props.group.ReorderRole(e, o).then(function(e) {
              t.forceUpdate();
            });
          }),
          (e.prototype.MoveRoleDown = function(e) {
            var t = this,
              n = this.props.group.GetRoleOrdinal(e) + 1;
            this.props.group.ReorderRole(e, n).then(function(e) {
              t.forceUpdate();
            });
          }),
          (e.prototype.render = function() {
            var a = this,
              s = this.props.group.BIsClanChatRoom();
            if (
              null != this.state.editRoleID &&
              this.props.group.GetRoleActions(this.state.editRoleID)
            ) {
              var e = this.PermissionToggleRow,
                t = this.state.editRoleID == this.props.group.DefaultRoleID(),
                n =
                  t && !s
                    ? Object(re.b)("#ChatRoomRole_Member")
                    : this.state.editRoleName,
                o = this.BCanLocalUserEditRole(this.state.editRoleID);
              return ve.createElement(
                Ii,
                { onSubmit: this.OnEditRoleNameBlur },
                ve.createElement(
                  "div",
                  null,
                  ve.createElement(
                    mi,
                    { style: { opacity: 0.25, marginBottom: 0 } },
                    Object(re.b)("#GroupSettings_Permissions_Section")
                  ),
                  ve.createElement(
                    Mi,
                    {
                      className: "backToPermissionsButton allCaps",
                      onClick: function() {
                        a.setState({ editRoleID: void 0 });
                      },
                      svgicon: Qo.V
                    },
                    Object(re.b)("#GroupSettings_Permissions_BackButton")
                  )
                ),
                ve.createElement(
                  mi,
                  { className: "permissionDetailsPage" },
                  !o &&
                    ve.createElement(
                      bi,
                      null,
                      ve.createElement(Qo.x, null),
                      Object(re.b)("#Chat_Settings_Permission_Denied")
                    ),
                  ve.createElement(
                    "div",
                    { className: "roleEditHeader" },
                    !s &&
                      ve.createElement(Gi, {
                        autoComplete: "off",
                        id: "b1",
                        className: "editRoleName",
                        label: Object(re.b)(
                          "#GroupSettings_Permissions_RoleName"
                        ),
                        type: "text",
                        value: n,
                        disabled: t || !o,
                        onChange: this.OnEditRoleNameChange,
                        onBlur: this.OnEditRoleNameBlur
                      }),
                    s && Object(re.b)(n)
                  )
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    "div",
                    { className: "SettingsGroup PermissionsGroup" },
                    ve.createElement(
                      hi,
                      { className: "PermissionsSectionHeader" },
                      Object(re.b)("#GroupSettings_Permissions_Heading_General")
                    ),
                    ve.createElement(e, {
                      eAction: 6,
                      strLabel: Object(re.b)("#GroupSettings_Permissions_Chat"),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 10,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_MentionAll"
                      ),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 11,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_SetWatchingBroadcast"
                      ),
                      disabled: !o
                    })
                  ),
                  ve.createElement(
                    "div",
                    { className: "SettingsGroup PermissionsGroup" },
                    ve.createElement(
                      hi,
                      { className: "PermissionsSectionHeader" },
                      Object(re.b)(
                        "#GroupSettings_Permissions_Heading_MembersAndRoles"
                      )
                    ),
                    ve.createElement(e, {
                      eAction: 2,
                      strLabel: Object(re.b)("#GroupSettings_Permissions_Kick"),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 3,
                      strLabel: Object(re.b)("#GroupSettings_Permissions_Ban"),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 4,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_Invite"
                      ),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 8,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_ChangeGroupRoles"
                      ),
                      disabled: !o || t
                    }),
                    !s &&
                      ve.createElement(e, {
                        eAction: 9,
                        strLabel: Object(re.b)(
                          "#GroupSettings_Permissions_ChangeUserRoles"
                        ),
                        disabled: !o || t
                      })
                  ),
                  ve.createElement(
                    "div",
                    { className: "SettingsGroup PermissionsGroup" },
                    ve.createElement(
                      hi,
                      { className: "PermissionsSectionHeader" },
                      Object(re.b)(
                        "#GroupSettings_Permissions_Heading_RoomManagement"
                      )
                    ),
                    ve.createElement(e, {
                      eAction: 5,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_ChangeTaglineAvatarName"
                      ),
                      disabled: !o
                    }),
                    ve.createElement(e, {
                      eAction: 1,
                      strLabel: Object(re.b)(
                        "#GroupSettings_Permissions_CreateRenameDeleteChannel"
                      ),
                      disabled: !o
                    })
                  )
                ),
                ve.createElement(
                  di,
                  null,
                  !s &&
                    !t &&
                    o &&
                    ve.createElement(
                      wi,
                      {
                        className: "deleteButton",
                        onClick: function(e) {
                          a.DeleteRole(e, a.state.editRoleID);
                        }
                      },
                      Object(re.b)(
                        "#GroupSettings_Permissions_DeleteRoleButton"
                      )
                    )
                )
              );
            }
            var c = this.props.group.DefaultRoleID(),
              l = this.props.group
                .GetRoles()
                .slice()
                .sort(function(e, t) {
                  return e.role_id == c
                    ? 1
                    : t.role_id == c ? -1 : e.ordinal - t.ordinal;
                }),
              i = this.props.group.GetHighestRankRoleIDForPermission(
                Yo.FriendStore.self.accountid,
                8
              ),
              p = i ? this.props.group.GetRoleOrdinal(i) : Number.MAX_VALUE - 1,
              u = this.props.group.BIsAccountIDOwner(
                Yo.FriendStore.self.accountid
              ),
              m = !1,
              r = this.BCanLocalUserAssignRole(),
              d = l.map(function(t, e) {
                var n = !1,
                  o = a.BCanLocalUserEditRole(t.role_id),
                  i = o && (u || t.ordinal > p + 1) && 0 < t.ordinal,
                  r = o && e < l.length - 2;
                return (
                  o && (m = !0),
                  t.role_id == c
                    ? (r = i = !(n = !0))
                    : a.props.group.BMemberHasRole(
                        Yo.FriendStore.self.accountid,
                        t.role_id
                      ) && (n = !0),
                  ve.createElement(
                    "div",
                    { className: "roleRow", key: t.role_id },
                    ve.createElement(
                      wi,
                      {
                        className:
                          "roleButton" + (n && !u ? " currentUserRole" : ""),
                        onClick: function(e) {
                          a.EditRole(t.role_id);
                        }
                      },
                      ve.createElement(Qo.i, null),
                      Object(re.b)(t.name),
                      ve.createElement(
                        "span",
                        { className: "roleSubtitle" },
                        o
                          ? Object(re.b)("#Generic_Edit")
                          : Object(re.b)("#Generic_View")
                      )
                    ),
                    !s &&
                      m &&
                      2 < l.length &&
                      (i || r) &&
                      ve.createElement(
                        "div",
                        { className: "rolePriorityContainer" },
                        ve.createElement(
                          "div",
                          {
                            className:
                              "rolePriorityButton roleUp" +
                              (i ? "" : " Disabled"),
                            onClick: function(e) {
                              a.MoveRoleUp(t.role_id), e.stopPropagation();
                            }
                          },
                          ve.createElement(Qo.n, { angle: 0 })
                        ),
                        ve.createElement(
                          "div",
                          {
                            className:
                              "rolePriorityButton roleDown" +
                              (r ? "" : " Disabled"),
                            onClick: function(e) {
                              a.MoveRoleDown(t.role_id), e.stopPropagation();
                            }
                          },
                          ve.createElement(Qo.n, { angle: 180 })
                        )
                      )
                  )
                );
              }),
              h = Object(re.b)("#ChatRoomRole_Description_NoEdit");
            if (s) {
              var _ = E.a.InitFromClanID(this.props.group.GetClanID()),
                f =
                  G.a.COMMUNITY_BASE_URL +
                  "gid/" +
                  _.ConvertTo64BitString() +
                  "/membersManage";
              h = Object(re.d)(
                "#ChatRoomRole_Description_Clan",
                ve.createElement(
                  fr,
                  { href: f },
                  Object(re.b)("#ChatRoomRole_Description_ClanLink")
                )
              );
            } else
              m && !u
                ? (h = Object(re.b)("#ChatRoomRole_Description"))
                : (r || u) &&
                  (h = Object(re.b)(
                    "#ChatRoomRole_Description_NoEditCanAssign"
                  ));
            return ve.createElement(
              "div",
              { className: "roleList" },
              ve.createElement(
                mi,
                null,
                Object(re.b)("#GroupSettings_Permissions_Section"),
                !this.props.enabled &&
                  !m &&
                  ve.createElement(
                    bi,
                    null,
                    ve.createElement(Qo.x, null),
                    Object(re.b)("#Chat_Settings_Permission_Denied_Permissions")
                  )
              ),
              ve.createElement(_i, null, h),
              ve.createElement(
                "div",
                { className: "roleEditHeader" },
                ve.createElement(
                  hi,
                  null,
                  Object(re.b)("#GroupSettings_Permissions_RolesTitle"),
                  " "
                ),
                !u &&
                  ve.createElement(
                    hi,
                    { className: "meKey" },
                    ve.createElement(Qo.i, null),
                    Object(re.b)("#GroupSettings_meKey_Desc")
                  ),
                u &&
                  ve.createElement(
                    hi,
                    { className: "meKey" },
                    ve.createElement(Qo.h, null),
                    Object(re.b)("#GroupSettings_meKey_Desc_Owner")
                  )
              ),
              ve.createElement(
                Ii,
                { className: "DialogBody" },
                ve.createElement(
                  wi,
                  {
                    disabled: !0,
                    className: "roleButton owner",
                    svgicon: Qo.h,
                    onClick: function() {}
                  },
                  Object(re.b)("#ChatRoomRole_Owner"),
                  ve.createElement(
                    "span",
                    { className: "roleSubtitle" },
                    Object(re.b)("#ChatRoomRole_OwnerSubtitle")
                  )
                ),
                d
              ),
              !s &&
                ve.createElement(
                  Ei,
                  {
                    className: "createNewRoleButton",
                    svgicon: Qo.H,
                    onClick: this.OnCreateRole,
                    disabled: !this.props.group.BCanICreateRoles()
                  },
                  Object(re.b)("#GroupSettings_Permissions_CreateNew")
                )
            );
          }),
          R.c([M.a], e.prototype, "OnCreateRole", null),
          R.c([M.a], e.prototype, "EditRole", null),
          R.c([M.a], e.prototype, "RenameRole", null),
          R.c([M.a], e.prototype, "DeleteRole", null),
          R.c([M.a], e.prototype, "OnEditRoleNameChange", null),
          R.c([M.a], e.prototype, "OnEditRoleNameBlur", null),
          R.c([M.a], e.prototype, "OnSettingToggled", null),
          R.c([M.a], e.prototype, "PermissionToggleRow", null),
          R.c([M.a], e.prototype, "MoveRoleUp", null),
          R.c([M.a], e.prototype, "MoveRoleDown", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi),
      Pa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (t.prototype.componentWillMount = function() {
            var t = this.props.inviteLinks;
            if ("loaded" != t.loadingState) {
              var e = this.props.group;
              this.props.enabled && "pending" == t.loadingState
                ? e.GetInviteLinksForGroup().then(function(e) {
                    setTimeout(function() {
                      "loaded" == e.loadingState &&
                        (t.rgInviteLinks = e.rgInviteLinks.sort(function(e, t) {
                          return e.time_expires() - t.time_expires();
                        })),
                        (t.loadingState = e.loadingState);
                    }, 500);
                  })
                : (this.props.inviteLinks.loadingState = "denied");
            }
          }),
          (t.prototype.OnDeleteLink = function(n) {
            var e = this,
              o = this.props.inviteLinks,
              t = ve.createElement(
                "div",
                { style: { marginTop: "5px", color: "#dee2e5" } },
                Object(le.a)(n.invite_code())
              );
            Zi(
              window,
              Object(re.b)("#GroupSettings_Invite_ConfirmDeleteTitle"),
              Object(re.b)("#GroupSettings_Invite_ConfirmDelete"),
              Object(re.b)("#GroupSettings_Invite_ConfirmDeleteButton"),
              Object(re.b)("#Button_Cancel"),
              !0,
              t
            )
              .then(function() {
                e.props.group
                  .DeleteInviteLink(n.invite_code())
                  .then(function(e) {
                    AssertMsg(
                      "loaded" == o.loadingState,
                      "somehow got a valid link to delete without links being loaded"
                    );
                    var t = o.rgInviteLinks.findIndex(function(e) {
                      return e.invite_code() == n.invite_code();
                    });
                    0 <= t &&
                      (o.rgInviteLinks.splice(t, 1),
                      console.log("removed link", o.rgInviteLinks));
                  });
              })
              .then(function() {})
              .catch(function() {});
          }),
          (t.prototype.FormatExpires = function(e) {
            return 2145916800 < e
              ? Object(re.b)("#GroupSettings_Invite_NeverExpires")
              : Yo.RTime32ToDate(e).toLocaleString([], {
                  year: "numeric",
                  month: "numeric",
                  day: "numeric",
                  hour: "numeric",
                  minute: "numeric"
                });
          }),
          (t.prototype.HandleFocus = function(e) {
            e.target.select();
          }),
          (t.prototype.render = function() {
            var n = this,
              e = this.props.inviteLinks,
              t = void 0;
            if ("pending" == e.loadingState)
              t = ve.createElement("div", null, ve.createElement(Ea, null));
            else if ("denied" == e.loadingState)
              t = ve.createElement(
                "div",
                null,
                Object(re.b)("#GroupSettings_Invite_Denied")
              );
            else if ("failed" == e.loadingState)
              t = ve.createElement(
                "div",
                null,
                Object(re.b)("#GroupSettings_Invite_Failed")
              );
            else if ("loaded" == e.loadingState) {
              var o;
              t =
                0 ==
                (o = e.rgInviteLinks.map(function(t) {
                  return ve.createElement(
                    "tr",
                    { key: t.invite_code() },
                    ve.createElement(
                      "td",
                      null,
                      " ",
                      ve.createElement(Gi, {
                        className: "inviteURLLink",
                        value: Object(le.a)(t.invite_code()),
                        readOnly: !0,
                        onClick: n.HandleFocus,
                        onFocus: n.HandleFocus
                      }),
                      " "
                    ),
                    ve.createElement(
                      "td",
                      { className: "dateCell allCaps" },
                      " ",
                      n.FormatExpires(t.time_expires()),
                      " "
                    ),
                    ve.createElement(
                      "td",
                      { className: "buttonCell" },
                      ve.createElement(
                        wi,
                        {
                          onClick: function(e) {
                            return n.OnDeleteLink(t);
                          },
                          disabled: !n.props.enabled
                        },
                        Object(re.b)("#GroupSettings_Invite_Delete")
                      )
                    )
                  );
                })).length
                  ? ve.createElement(
                      "div",
                      null,
                      Object(re.b)("#GroupSettings_Invite_NoInvites")
                    )
                  : ve.createElement(
                      "table",
                      { className: "DialogSpanningTable InviteLinksTable" },
                      ve.createElement(
                        "thead",
                        null,
                        ve.createElement(
                          "tr",
                          null,
                          ve.createElement(
                            "th",
                            { className: "inviteCodeColumn" },
                            " ",
                            Object(re.b)("#GroupSettings_Invite_Code"),
                            " "
                          ),
                          ve.createElement(
                            "th",
                            { className: "dateColumn" },
                            " ",
                            Object(re.b)("#GroupSettings_Invite_Expiration"),
                            " "
                          ),
                          ve.createElement(
                            "th",
                            { className: "buttonColumn" },
                            " "
                          )
                        )
                      ),
                      ve.createElement("tbody", null, o)
                    );
            }
            return ve.createElement(
              Ii,
              { className: "DialogBody" },
              this.props.enabled &&
                ve.createElement(
                  "div",
                  { className: "inviteLinkContainer" },
                  ve.createElement(Hr, {
                    chat: this.props.group.GetDefaultChatRoom(),
                    disabled: !this.props.enabled
                  })
                ),
              this.props.enabled &&
                ve.createElement(
                  "div",
                  { className: "OrSeparator" },
                  ve.createElement(Di, null)
                ),
              t
            );
          }),
          R.c([M.a], t.prototype, "OnDeleteLink", null),
          R.c([M.a], t.prototype, "HandleFocus", null),
          (t = R.c([Hi.observer], t))
        );
      })(Vi),
      Fa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (t.prototype.componentWillMount = function() {
            var t = this.props.invitedUsers;
            if ("loaded" != t.loadingState) {
              var e = this.props.group;
              "pending" == t.loadingState &&
                e.GetInvitedUsersForGroup().then(function(e) {
                  setTimeout(function() {
                    "loaded" == e.loadingState &&
                      (t.rgInvitedUsers = e.rgInvitedUsers.sort(function(e, t) {
                        return e.time_invited() - t.time_invited();
                      })),
                      (t.loadingState = e.loadingState);
                  }, 500);
                });
            }
          }),
          (t.prototype.RevokeInvite = function(e, t) {
            var n = this,
              o = Yo.FriendStore.GetPlayer(t),
              i = e.currentTarget.ownerDocument.defaultView,
              r = ve.createElement(Qs, {
                className: "friend",
                friend: o,
                context: null,
                disableContextMenu: !0
              });
            Zi(
              window,
              Object(re.b)("#GroupSettings_InvitedUsers_RevokeTitle"),
              Object(re.b)("#GroupSettings_InvitedUsers_RevokeBody"),
              Object(re.b)("#GroupSettings_InvitedUsers_RevokeConfirm"),
              Object(re.b)("#Button_Cancel"),
              !0,
              r
            )
              .then(function() {
                n.props.group
                  .RevokeInvite(t)
                  .then(function() {
                    w.d(n.props.invitedUsers.rgInvitedUsers, function(e) {
                      return e.accountid() === t;
                    });
                  })
                  .catch(function(e) {
                    er(
                      i,
                      Object(re.b)("#Generic_Error"),
                      Object(re.b)(
                        "#GroupSettings_InvitedUsers_RevokeGenericError"
                      )
                    );
                  });
              })
              .catch(function() {});
          }),
          (t.prototype.FormatDate = function(e) {
            return Yo.RTime32ToDate(e).toLocaleString([], {
              year: "numeric",
              month: "short",
              day: "numeric",
              hour: "numeric",
              minute: "numeric"
            });
          }),
          (t.prototype.render = function() {
            var n = this;
            if ("loaded" == this.props.invitedUsers.loadingState) {
              if (
                !this.props.invitedUsers.rgInvitedUsers ||
                0 == this.props.invitedUsers.rgInvitedUsers.length
              )
                return ve.createElement(
                  Ii,
                  null,
                  Object(re.b)("#GroupSettings_InvitedUsers_Noone")
                );
              var e = this.props.invitedUsers.rgInvitedUsers.map(function(t) {
                var e = Yo.FriendStore.GetPlayer(t.accountid());
                return ve.createElement(
                  "tr",
                  { className: "hoverRow", key: t.accountid() },
                  ve.createElement(
                    "td",
                    { className: "friendCell" },
                    " ",
                    ve.createElement(Qs, {
                      friend: e,
                      context: null,
                      bHideGameName: !0,
                      bHidePersona: !0
                    }),
                    " "
                  ),
                  ve.createElement(
                    "td",
                    { className: "dateCell" },
                    " ",
                    n.FormatDate(t.time_invited()),
                    " "
                  ),
                  ve.createElement(
                    "td",
                    { className: "buttonCell" },
                    ve.createElement(
                      wi,
                      {
                        onClick: function(e) {
                          return n.RevokeInvite(e, t.accountid());
                        },
                        disabled: !n.props.enabled
                      },
                      Object(re.b)("#GroupSettings_InvitedUsers_RevokeInvite")
                    )
                  )
                );
              });
              return ve.createElement(
                Ii,
                { className: "DialogBody" },
                ve.createElement(
                  "table",
                  { className: "DialogSpanningTable InvitedUsersTable" },
                  ve.createElement(
                    "thead",
                    null,
                    ve.createElement(
                      "tr",
                      { className: "headerRow" },
                      ve.createElement(
                        "th",
                        { className: "friendColumn" },
                        Object(re.b)(
                          "#GroupSettings_InvitedUsers_InvitedHeader"
                        ),
                        " "
                      ),
                      ve.createElement(
                        "th",
                        { className: "dateColumn" },
                        " ",
                        Object(re.b)("#GroupSettings_InvitedUsers_InvitedDate"),
                        " "
                      ),
                      ve.createElement("th", { className: "buttonColumn" }, " ")
                    )
                  ),
                  ve.createElement("tbody", null, e)
                )
              );
            }
            return ve.createElement(
              Ii,
              null,
              "pending" == this.props.invitedUsers.loadingState
                ? ve.createElement(Ea, { size: "medium" })
                : Object(re.b)("#GroupSettings_InvitedUsers_Failed")
            );
          }),
          R.c([M.a], t.prototype, "RevokeInvite", null),
          (t = R.c([Hi.observer], t))
        );
      })(Vi),
      Ba = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (t.prototype.componentWillMount = function() {
            var e = this.props.group,
              t = this.props.bans;
            "pending" == t.loadingState &&
              e.GetBanList().then(function(e) {
                setTimeout(function() {
                  (t.rgBans = e.rgBans), (t.loadingState = e.loadingState);
                }, 500);
              });
          }),
          (t.prototype.componentWillUnmount = function() {}),
          (t.prototype.OnClickUnban = function(e, t) {
            var n = this,
              o = Yo.FriendStore.GetPlayer(t),
              i = e.currentTarget.ownerDocument.defaultView,
              r = ve.createElement(Qs, {
                className: "friend",
                friend: o,
                context: null,
                disableContextMenu: !0
              });
            Zi(
              window,
              Object(re.b)("#GroupSettings_Bans_UnbanTitle"),
              Object(re.b)("#GroupSettings_Bans_UnbanBody", o.display_name),
              Object(re.b)("#GroupSettings_Bans_UnbanConfirm"),
              Object(re.b)("#Button_Cancel"),
              !0,
              r
            )
              .then(function() {
                n.props.group
                  .SetUserBanState(t, !1)
                  .then(function() {
                    w.d(n.props.bans.rgBans, function(e) {
                      return e.accountid() === t;
                    });
                  })
                  .catch(function(e) {
                    er(
                      i,
                      Object(re.b)("#Generic_Error"),
                      Object(re.b)("#GroupSettings_Bans_UnbanGenericError")
                    );
                  });
              })
              .catch(function() {});
          }),
          (t.prototype.FormatDate = function(e) {
            return Yo.RTime32ToDate(e).toLocaleString([], {
              year: "numeric",
              month: "short",
              day: "numeric",
              hour: "numeric",
              minute: "numeric"
            });
          }),
          (t.prototype.render = function() {
            var e,
              n = this;
            if ("loaded" == this.props.bans.loadingState)
              return 0 == this.props.bans.rgBans.length
                ? ve.createElement(
                    Ii,
                    null,
                    Object(re.b)("#GroupSettings_Bans_NoOneBanned")
                  )
                : ((e = this.props.bans.rgBans.map(function(t) {
                    var e = Yo.FriendStore.GetPlayer(t.accountid());
                    return ve.createElement(
                      "tr",
                      { className: "hoverRow", key: t.accountid() },
                      ve.createElement(
                        "td",
                        { className: "friendCell" },
                        " ",
                        ve.createElement(Qs, { friend: e, context: null }),
                        " "
                      ),
                      ve.createElement(
                        "td",
                        { className: "dateCell" },
                        " ",
                        n.FormatDate(t.time_banned()),
                        " "
                      ),
                      ve.createElement(
                        "td",
                        { className: "buttonCell" },
                        " ",
                        ve.createElement(
                          wi,
                          {
                            onClick: function(e) {
                              return n.OnClickUnban(e, t.accountid());
                            }
                          },
                          Object(re.b)("#GroupSettings_Bans_RevokeBan")
                        )
                      )
                    );
                  })),
                  ve.createElement(
                    Ii,
                    { className: "DialogBody" },
                    ve.createElement(
                      "table",
                      { className: "DialogSpanningTable BannedUsersTable" },
                      ve.createElement(
                        "thead",
                        null,
                        ve.createElement(
                          "tr",
                          { className: "headerRow" },
                          ve.createElement(
                            "th",
                            { className: "friendColumn" },
                            Object(re.b)("#GroupSettings_Bans_InvitedHeader"),
                            " "
                          ),
                          ve.createElement(
                            "th",
                            { className: "dateColumn" },
                            " ",
                            Object(re.b)("#GroupSettings_Bans_BannedDate"),
                            " "
                          ),
                          ve.createElement(
                            "th",
                            { className: "buttonColumn" },
                            " "
                          )
                        )
                      ),
                      ve.createElement("tbody", null, e)
                    )
                  ));
            var t = void 0;
            return (
              (t =
                "pending" == this.props.bans.loadingState
                  ? ve.createElement(Ea, { size: "medium" })
                  : "denied" == this.props.bans.loadingState
                    ? Object(re.b)("#GroupSettings_Bans_AccessDenied")
                    : Object(re.b)("#GroupSettings_Bans_Failed")),
              ve.createElement(Ii, { className: "DialogBody" }, t)
            );
          }),
          R.c([M.a], t.prototype, "OnClickUnban", null),
          (t = R.c([Hi.observer], t))
        );
      })(Vi),
      Va = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bSettingsChanged = !1),
            (t.m_bCommunityPreferencesChanged = !1),
            (t.state = {
              friendSettings: Object.assign({}, e.friendsSettingsInitial),
              communityPreferences: Object.assign(
                {},
                e.communityPreferencesInitial
              )
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillReceiveProps = function(e) {
            for (
              var t = {}, n = 0, o = Object.keys(e.friendsSettingsInitial);
              n < o.length;
              n++
            ) {
              var i = o[n];
              e.friendsSettingsInitial[i] !=
                this.props.friendsSettingsInitial[i] &&
                (t[i] = e.friendsSettingsInitial[i]);
            }
            for (
              var r = {}, a = 0, s = Object.keys(e.communityPreferencesInitial);
              a < s.length;
              a++
            ) {
              i = s[a];
              e.communityPreferencesInitial[i] !=
                this.props.communityPreferencesInitial[i] &&
                (r[i] = e.communityPreferencesInitial[i]);
            }
            this.setState({
              friendSettings: R.a({}, this.state.friendSettings, t),
              communityPreferences: R.a({}, this.state.communityPreferences, r)
            });
          }),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnSubmit = function() {
            this.props.onSubmit(
              this.state.friendSettings,
              this.state.communityPreferences
            ),
              (this.m_bSettingsChanged = !1),
              (this.m_bCommunityPreferencesChanged = !1);
          }),
          (e.prototype.HandleRadioChange = function(e) {
            this.setState({
              friendSettings: R.a({}, this.state.friendSettings, {
                nChatFlashMode: parseInt(e.currentTarget.value)
              })
            }),
              (this.m_bSettingsChanged = !0);
          }),
          (e.prototype.OnSettingToggled = function(e, t) {
            var n;
            this.setState({
              friendSettings: R.a(
                {},
                this.state.friendSettings,
                ((n = {}), (n[e] = t), n)
              )
            }),
              (this.m_bSettingsChanged = !0);
          }),
          (e.prototype.OnCommunityPreferenceToggled = function(e, t) {
            var n;
            this.setState({
              communityPreferences: R.a(
                {},
                this.state.communityPreferences,
                ((n = {}), (n[e] = t), n)
              )
            }),
              (this.m_bCommunityPreferencesChanged = !0);
          }),
          (e.prototype.componentDidUpdate = function(e, t) {
            this.props.bSubmitImmediate &&
              (this.m_bSettingsChanged ||
                this.m_bCommunityPreferencesChanged) &&
              this.props.onSubmit(
                this.state.friendSettings,
                this.state.communityPreferences
              ),
              (this.m_bSettingsChanged = !1),
              (this.m_bCommunityPreferencesChanged = !1);
          }),
          (e.prototype.FriendsSettingsToggleRow = function(t) {
            var n = this;
            return ve.createElement(Ai, {
              key: t.strName,
              onChange: function(e) {
                n.OnSettingToggled(t.strName, e);
              },
              label: t.strLabel,
              checked: !!this.state.friendSettings[t.strName],
              description: t.strDesc ? t.strDesc : ""
            });
          }),
          (e.prototype.FriendsSettingsCheckbox = function(t) {
            var n = this;
            return ve.createElement(Li, {
              key: t.strName,
              onChange: function(e) {
                n.OnSettingToggled(t.strName, e);
              },
              checked: !!this.state.friendSettings[t.strName]
            });
          }),
          (e.prototype.FriendsSettingsCommunityPreferenceToggleRow = function(
            t
          ) {
            var n = this;
            return ve.createElement(
              Ai,
              {
                key: "CommunityPreference" + t.strName,
                onChange: function(e) {
                  n.OnCommunityPreferenceToggled(t.strName, e);
                },
                label: t.strLabel,
                checked: !!this.state.communityPreferences[t.strName],
                description: t.strDesc ? t.strDesc : ""
              },
              t.children
            );
          }),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "HandleRadioChange", null),
          R.c([M.a], e.prototype, "OnSettingToggled", null),
          R.c([M.a], e.prototype, "OnCommunityPreferenceToggled", null),
          R.c([M.a], e.prototype, "FriendsSettingsToggleRow", null),
          R.c([M.a], e.prototype, "FriendsSettingsCheckbox", null),
          R.c(
            [M.a],
            e.prototype,
            "FriendsSettingsCommunityPreferenceToggleRow",
            null
          ),
          e
        );
      })(Vi);
    ((Ma = wa || (wa = {}))[(Ma.k_EChatFontSizeSmall = 1)] =
      "k_EChatFontSizeSmall"),
      (Ma[(Ma.k_EChatFontSizeDefault = 2)] = "k_EChatFontSizeDefault"),
      (Ma[(Ma.k_EChatFontSizeLarge = 3)] = "k_EChatFontSizeLarge");
    var xa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.bParenthesizeNicknames,
              t = Object(re.b)("#FriendSettings_ExampleFriend"),
              n = Object(re.b)("#FriendSettings_ExampleNickname"),
              o = ee($, "_full");
            return ve.createElement(
              "div",
              { className: "friend online friendSettingsFakeFriend" },
              ve.createElement(
                "div",
                { className: "avatarHolder no-drag" },
                ve.createElement("div", { className: "avatarStatus" }),
                ve.createElement("img", {
                  className: "avatar",
                  src: o,
                  draggable: !1
                })
              ),
              ve.createElement(
                "div",
                { className: "labelHolder twoLine NoContextMenu" },
                ve.createElement(
                  "div",
                  { className: "statusAndName" },
                  ve.createElement(
                    "div",
                    { className: "playerName" },
                    e ? t : n,
                    e &&
                      ve.createElement(
                        "span",
                        { className: "playerNickname" },
                        "(",
                        n,
                        ")"
                      )
                  ),
                  !e &&
                    ve.createElement(
                      "span",
                      {
                        className: "playerNicknameBracket",
                        title: Object(re.b)("#isNickname")
                      },
                      " *"
                    )
                ),
                ve.createElement(
                  "div",
                  { className: "richPresenceContainer" },
                  ve.createElement(
                    "div",
                    { className: "gameName richPresenceLabel no-drag" },
                    Object(re.b)("#PersonaStateOnline")
                  )
                )
              )
            );
          }),
          t
        );
      })(ve.Component),
      Ua = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.SetChatFontSize = function(e) {
            this.setState({
              friendSettings: R.a({}, this.state.friendSettings, {
                nChatFontSize: e
              })
            }),
              (this.m_bSettingsChanged = !0);
          }),
          (e.prototype.render = function() {
            var e = this,
              t = this.FriendsSettingsToggleRow,
              n = this.state.friendSettings.nChatFontSize;
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.OnSubmit },
              ve.createElement(
                "div",
                { className: "SettingsGroup" },
                ve.createElement(t, {
                  strName: "bCompactFriendsList",
                  strLabel: Object(re.b)(
                    "#FriendSettings_CompactFriendsAndChat"
                  )
                }),
                ve.createElement(t, {
                  strName: "bCompactQuickAccess",
                  strLabel: Object(re.b)("#FriendSettings_CompactQuickAccess")
                }),
                ve.createElement(
                  hi,
                  { className: "friendSettingsSubheader" },
                  Object(re.b)("#FriendSettings_ChatFontSize")
                ),
                ve.createElement(
                  Si,
                  { className: "FriendsSettingsChatFontSizeSection_ButtonRow" },
                  ve.createElement(
                    wi,
                    {
                      className:
                        "smallFontSetting " +
                        (n == wa.k_EChatFontSizeSmall ? "Primary" : "Off"),
                      onClick: function() {
                        return e.SetChatFontSize(wa.k_EChatFontSizeSmall);
                      }
                    },
                    Object(re.b)("#FriendSetting_ChatFontSmall")
                  ),
                  ve.createElement(
                    wi,
                    {
                      className:
                        "defaultFontSetting " +
                        (n == wa.k_EChatFontSizeDefault ? "Primary" : "Off"),
                      onClick: function() {
                        return e.SetChatFontSize(wa.k_EChatFontSizeDefault);
                      }
                    },
                    Object(re.b)("#FriendSetting_ChatFontDefault")
                  ),
                  ve.createElement(
                    wi,
                    {
                      className:
                        "largeFontSetting " +
                        (n == wa.k_EChatFontSizeLarge ? "Primary" : "Off"),
                      onClick: function() {
                        return e.SetChatFontSize(wa.k_EChatFontSizeLarge);
                      }
                    },
                    Object(re.b)("#FriendSetting_ChatFontLarge")
                  )
                )
              ),
              !this.props.bSubmitImmediate &&
                ve.createElement(Ti, { onCancel: this.props.onCancel })
            );
          }),
          R.c([M.a], e.prototype, "SetChatFontSize", null),
          (e = R.c([Hi.observer], e))
        );
      })(Va),
      ja = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = this.FriendsSettingsToggleRow,
              t = G.a.IN_CLIENT
                ? "#FriendSettings_RememberOpenChats_DescClient"
                : "#FriendSettings_RememberOpenChats_Desc";
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.OnSubmit },
              ve.createElement(
                "div",
                { className: "SettingsGroup" },
                this.props.bShowPopupOpts &&
                  ve.createElement(e, {
                    strName: "bAlwaysNewChatWindow",
                    strLabel: Object(re.b)(
                      "#FriendSettings_AlwaysNewChatWindow"
                    )
                  }),
                ve.createElement(e, {
                  strName: "bDisableEmbedInlining",
                  strLabel: Object(re.b)("#FriendSettings_DisableEmbedInlining")
                }),
                ve.createElement(e, {
                  strName: "bRememberOpenChats",
                  strLabel: Object(re.b)("#FriendSettings_RememberOpenChats"),
                  strDesc: Object(re.b)(t)
                }),
                ve.createElement(e, {
                  strName: "b24HourClock",
                  strLabel: Object(re.b)("#FriendSettings_AlwaysUse24HourClock")
                })
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(Va),
      Ha = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = this.FriendsSettingsToggleRow,
              t = this.FriendsSettingsCommunityPreferenceToggleRow;
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.OnSubmit },
              ve.createElement(
                "div",
                { className: "SettingsGroup" },
                ve.createElement(
                  t,
                  {
                    strName: "bParenthesizeNicknames",
                    strLabel: Object(re.b)(
                      "#FriendSettings_ParenthesizeNicknames"
                    )
                  },
                  ve.createElement(xa, {
                    bParenthesizeNicknames: this.state.communityPreferences
                      .bParenthesizeNicknames
                  })
                ),
                ve.createElement(e, {
                  strName: "bCategorizeInGameFriendsByGame",
                  strLabel: Object(re.b)(
                    "#FriendSettings_CategorizeInGameFriendsByGame"
                  )
                }),
                ve.createElement(e, {
                  strName: "bHideOfflineFriendsInTagGroups",
                  strLabel: Object(re.b)(
                    "#FriendSettings_HideOfflineFriendsInCategories"
                  )
                }),
                ve.createElement(e, {
                  strName: "bHideCategorizedFriends",
                  strLabel: Object(re.b)(
                    "#FriendSettings_HideCategorizedFriends"
                  )
                }),
                ve.createElement(e, {
                  strName: "bForceAlphabeticFriendSorting",
                  strLabel: Object(re.b)("#FriendSettings_SortFriendsByStatus")
                }),
                this.props.bDoNotDisturbSupported &&
                  ve.createElement(e, {
                    strName: "bSignIntoFriends",
                    strLabel: Object(re.b)("#FriendSettings_SignInToFriends")
                  })
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(Va),
      Wa = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_rgMicOptions = [{ label: "Default", data: "default" }]),
            (t.m_rgOutputOptions = [{ label: "Default", data: "default" }]),
            (t.state = {
              showAdvanced: !1,
              micOptionsReady: !1,
              outputOptionsReady: !1,
              hotkeyCapturing: !1
            }),
            navigator.mediaDevices
              .enumerateDevices()
              .then(t.gotMediaDevices)
              .catch(t.gotMediaDevicesError),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.gotMediaDevices = function(e) {
            for (var t = 0; t < e.length; ++t) {
              var n = e[t];
              "audioinput" == n.kind
                ? "default" != n.deviceId &&
                  this.m_rgMicOptions.push({ label: n.label, data: n.deviceId })
                : "audiooutput" == n.kind &&
                  "default" != n.deviceId &&
                  this.m_rgOutputOptions.push({
                    label: n.label,
                    data: n.deviceId
                  });
            }
            this.setState({ micOptionsReady: !0 }),
              this.setState({ outputOptionsReady: !0 });
          }),
          (e.prototype.gotMediaDevicesError = function() {
            this.setState({ micOptionsReady: !0 }),
              this.setState({ outputOptionsReady: !0 });
          }),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.onSubmit = function() {
            return !1;
          }),
          (e.prototype.VoiceSettingsRefMarker = function(e) {
            e &&
              e.ownerDocument &&
              ((this.m_elVoiceSettingsMarkerScroll = e),
              (this.m_window = e.ownerDocument.defaultView));
          }),
          (e.prototype.OnShowAdvancedSettings = function() {
            var e = this;
            this.setState({ showAdvanced: !this.state.showAdvanced }),
              (this.m_iTimeOutVoiceSettingsScroll = this.m_window.setTimeout(
                function() {
                  e.m_elVoiceSettingsMarkerScroll &&
                    e.state.showAdvanced &&
                    e.m_elVoiceSettingsMarkerScroll.scrollIntoView({
                      behavior: "smooth"
                    }),
                    e.m_window.clearTimeout(e.m_iTimeOutVoiceSettingsScroll);
                },
                200
              ));
          }),
          (e.prototype.OnMicDropdownChanged = function(e) {
            this.props.voiceStore.SetSelectedMic(e.data);
          }),
          (e.prototype.OnOutputDeviceDropdownChanged = function(e) {
            this.props.voiceStore.SetSelectedOutput(e.data);
          }),
          (e.prototype.OnInputGainChanged = function(e) {
            this.props.voiceStore.SetVoiceInputGain(
              this.props.voiceStore.ConvertSliderToGainValue(
                e,
                Ao.k_MaxInputOutputGainValue
              )
            );
          }),
          (e.prototype.OnOutputGainChanged = function(e) {
            this.props.voiceStore.SetVoiceOutputGain(
              this.props.voiceStore.ConvertSliderToGainValue(
                e,
                Ao.k_MaxInputOutputGainValue
              )
            );
          }),
          (e.prototype.OnToggleEchoCancellation = function(e) {
            this.props.voiceStore.SetUseEchoCancellation(e);
          }),
          (e.prototype.OnToggleNoiseCancellation = function(e) {
            this.props.voiceStore.SetUseNoiseCancellation(e);
          }),
          (e.prototype.OnToggleAutoGainControl = function(e) {
            this.props.voiceStore.SetUseAutoGainControl(e);
          }),
          (e.prototype.SetNoiseGateOff = function() {
            this.props.voiceStore.SetUseNoiseGateLevel(
              Co.k_ENoiseGateLevel_Off
            );
          }),
          (e.prototype.SetNoiseGateMedium = function() {
            this.props.voiceStore.SetUseNoiseGateLevel(
              Co.k_ENoiseGateLevel_Medium
            );
          }),
          (e.prototype.SetNoiseGateHigh = function() {
            this.props.voiceStore.SetUseNoiseGateLevel(
              Co.k_ENoiseGateLevel_High
            );
          }),
          (e.prototype.SetHotKeyCaptureState = function(e) {
            0 == e
              ? (null != SteamClient.WebChat &&
                  null != SteamClient.WebChat.UnregisterForMouseXButtonDown &&
                  SteamClient.WebChat.UnregisterForMouseXButtonDown(),
                this.setState({ hotkeyCapturing: !1 }))
              : (this.setState({ hotkeyCapturing: !0 }),
                null != SteamClient.WebChat &&
                  null != SteamClient.WebChat.RegisterForMouseXButtonDown &&
                  SteamClient.WebChat.RegisterForMouseXButtonDown(
                    this.OnXButtonDown
                  ));
          }),
          (e.prototype.OnXButtonDown = function(e) {
            0 < e &&
              this.state.hotkeyCapturing &&
              (null != SteamClient.WebChat &&
                null != SteamClient.WebChat.SetPushToTalkMouseButton &&
                (SteamClient.WebChat.SetPushToTalkMouseButton(e),
                Yo.VoiceStore.RefreshPushToTalkKeySettings()),
              this.SetHotKeyCaptureState(!1));
          }),
          (e.prototype.OnTogglePushToTalk = function() {
            if (
              "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.SetPushToTalkEnabled
            ) {
              var e = Yo.VoiceStore.GetPushToTalkEnabled();
              SteamClient.WebChat.SetPushToTalkEnabled(!e),
                Yo.VoiceStore.SetPushToTalkEnabled(!e);
            }
          }),
          (e.prototype.OnSetOpenMic = function() {
            "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.SetPushToTalkEnabled &&
              (SteamClient.WebChat.SetPushToTalkEnabled(!1),
              Yo.VoiceStore.SetPushToTalkEnabled(!1));
          }),
          (e.prototype.OnSetPushToTalk = function() {
            "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.SetPushToTalkEnabled &&
              (SteamClient.WebChat.SetPushToTalkEnabled(!0),
              Yo.VoiceStore.SetPushToTalkEnabled(!0));
          }),
          (e.prototype.OnSetPushToMute = function() {
            "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.SetPushToMuteEnabled &&
              (SteamClient.WebChat.SetPushToMuteEnabled(!0),
              Yo.VoiceStore.SetPushToMuteEnabled(!0));
          }),
          (e.prototype.AssignHotkey = function() {
            0 == this.state.hotkeyCapturing && this.SetHotKeyCaptureState(!0);
          }),
          (e.prototype.ClearHotKey = function() {
            "undefined" != typeof SteamClient &&
              null != SteamClient.WebChat &&
              null != SteamClient.WebChat.SetPushToTalkHotKey &&
              (SteamClient.WebChat.SetPushToTalkHotKey(0),
              Yo.VoiceStore.RefreshPushToTalkKeySettings());
          }),
          (e.prototype.onMouseDown = function(e) {
            0 != this.state.hotkeyCapturing && 0 != e.button && this.onClick(e);
          }),
          (e.prototype.onClick = function(e) {
            0 != this.state.hotkeyCapturing &&
              (null != SteamClient.WebChat &&
                null != SteamClient.WebChat.SetPushToTalkMouseButton &&
                (SteamClient.WebChat.SetPushToTalkMouseButton(e.button),
                Yo.VoiceStore.RefreshPushToTalkKeySettings()),
              this.SetHotKeyCaptureState(!1),
              e.preventDefault(),
              e.stopPropagation());
          }),
          (e.prototype.onContextMenu = function(e) {
            e.preventDefault(), e.stopPropagation();
          }),
          (e.prototype.onKeyDown = function(e) {
            0 != this.state.hotkeyCapturing &&
              (null != SteamClient.WebChat &&
                null != SteamClient.WebChat.SetPushToTalkHotKey &&
                (SteamClient.WebChat.SetPushToTalkHotKey(e.keyCode),
                Yo.VoiceStore.RefreshPushToTalkKeySettings()),
              this.SetHotKeyCaptureState(!1),
              e.preventDefault(),
              e.stopPropagation());
          }),
          (e.prototype.OnPPTSoundChecked = function(e) {
            Yo.VoiceStore.SetPushToTalkOrMuteSoundsEnabled(e);
          }),
          (e.prototype.CopyVoiceLogsToClipboard = function() {
            var e = Yo.ChatStore.VoiceChat.GetVoiceLogs(),
              t = document.createElement("textarea");
            (t.textContent = e),
              (t.style.position = "fixed"),
              document.body.appendChild(t),
              t.select();
            try {
              document.execCommand("copy");
            } catch (e) {
              console.warn("Copy voice logs to clipboard failed.", e);
            } finally {
              document.body.removeChild(t);
            }
          }),
          (e.prototype.componentWillUnmount = function() {
            Yo.VoiceStore.IsLocalMicTestActive() &&
              Yo.VoiceStore.EndLocalMicTest();
          }),
          (e.prototype.OnStartLocalMicTest = function() {
            Yo.VoiceStore.InitiateLocalMicTest();
          }),
          (e.prototype.OnStopLocalMicTest = function() {
            Yo.VoiceStore.EndLocalMicTest();
          }),
          (e.prototype.render = function() {
            var t = this,
              e = Yo.VoiceStore.GetPushToTalkEnabled(),
              n = Yo.VoiceStore.GetPushToMuteEnabled(),
              o = !1,
              i = (Yo.VoiceStore.GetPushToTalkHotKeyVK(),
              Yo.VoiceStore.GetPushToTalkHotKeyDisplayString()),
              r = Object(re.b)("#VoicePushToTalkAssigned"),
              a = Object(re.b)("#VoicePushToMuteAssigned"),
              s = Object(re.b)("#VoiceMuteToggleAssigned"),
              c = Yo.VoiceStore.GetPushToTalkOrMuteSoundsEnabled(),
              l = Yo.SettingsStore.BClientHasFeatureOrOnWeb(
                "NewVoiceHotKeyState"
              ),
              p = Yo.VoiceStore.IsLocalMicTestActive(),
              u = Yo.FriendStore.self;
            u.persona.online_state;
            u.persona.is_awayOrSnooze,
              "undefined" != typeof SteamClient &&
                null != SteamClient.WebChat &&
                null != SteamClient.WebChat.GetPushToTalkEnabled &&
                (o = !0),
              this.state.hotkeyCapturing &&
                (r = Object(re.b)("#VoicePushToTalkPressHotKey"));
            var m = this.props.voiceStore.GetUseNoiseGateLevel();
            return ve.createElement(
              Ii,
              {
                className: "DialogBody VoiceSettings",
                onContextMenu: this.onContextMenu,
                onSubmit: this.onSubmit,
                onMouseDown: this.onMouseDown,
                onClick: this.onClick,
                onKeyDown: this.onKeyDown
              },
              ve.createElement(
                "div",
                { className: "_FixedHeight" },
                ve.createElement(
                  "div",
                  { className: "voiceSelfHeader" },
                  ve.createElement(
                    "div",
                    { className: "DialogLabel" },
                    Object(re.b)("#VoiceSetupHeader")
                  ),
                  ve.createElement(
                    "div",
                    { className: "voiceMicTestContainer" },
                    ve.createElement(
                      "div",
                      {
                        className: "voiceSelfDirections",
                        title: Object(re.b)("#VoiceWhenMicIsWorking")
                      },
                      ve.createElement(Qs, {
                        friend: u,
                        key: u.accountid,
                        showVoiceLevel: !0,
                        context: void 0,
                        noActions: !0,
                        listStatusIndicator: ve.createElement("div", {
                          className: "connectionSpinner"
                        })
                      }),
                      ve.createElement(
                        wi,
                        {
                          className:
                            "LocalMicTestButton " + (p ? "Primary" : "Off"),
                          onClick: p
                            ? this.OnStopLocalMicTest
                            : this.OnStartLocalMicTest
                        },
                        p
                          ? Object(re.b)("#VoiceStopLocalMicTest")
                          : Object(re.b)("#VoiceStartLocalMicTest")
                      )
                    )
                  )
                ),
                this.state.micOptionsReady &&
                  ve.createElement(Fi, {
                    strClassName: "InputDevice",
                    label: Object(re.b)("#VoiceDevice"),
                    rgOptions: this.m_rgMicOptions,
                    strDefaultLabel: Object(re.b)("#DefaultMic"),
                    selectedOption: this.props.voiceStore.GetSelectedMic(),
                    onChange: this.OnMicDropdownChanged
                  }),
                !this.state.micOptionsReady &&
                  ve.createElement(Fi, {
                    label: Object(re.b)("#VoiceDevice"),
                    rgOptions: this.m_rgMicOptions,
                    strDefaultLabel: Object(re.b)("#MicLoading...")
                  }),
                this.state.outputOptionsReady &&
                  ve.createElement(Fi, {
                    label: Object(re.b)("#VoiceOutputDevice"),
                    rgOptions: this.m_rgOutputOptions,
                    strDefaultLabel: Object(re.b)("#DefaultOutputDevice"),
                    selectedOption: this.props.voiceStore.GetSelectedOutputDevice(),
                    onChange: this.OnOutputDeviceDropdownChanged
                  }),
                !this.state.outputOptionsReady &&
                  ve.createElement(Fi, {
                    label: Object(re.b)("#VoiceOutputDevice"),
                    rgOptions: this.m_rgOutputOptions,
                    strDefaultLabel: Object(re.b)("#OutputDeviceLoading...")
                  }),
                ve.createElement(hi, null, Object(re.b)("#VoiceVolume")),
                ve.createElement(
                  vi,
                  { className: "DialogLabelStrong" },
                  ve.createElement(Pi, {
                    min: 0,
                    max: 100,
                    label: Object(re.b)("#VoiceInputGain"),
                    explainer: Object(re.b)("#VoiceInputGainExplainer"),
                    value: this.props.voiceStore.ConvertGainValueToSliderValue(
                      this.props.voiceStore.GetVoiceInputGain(),
                      Ao.k_MaxInputOutputGainValue
                    ),
                    onChange: this.OnInputGainChanged
                  }),
                  ve.createElement(Pi, {
                    min: 0,
                    max: 100,
                    label: Object(re.b)("#VoiceOutputGain"),
                    explainer: Object(re.b)("#VoiceOutputGainExplainer"),
                    value: this.props.voiceStore.ConvertGainValueToSliderValue(
                      this.props.voiceStore.GetVoiceOutputGain(),
                      Ao.k_MaxInputOutputGainValue
                    ),
                    onChange: this.OnOutputGainChanged
                  })
                ),
                "undefined" != typeof SteamClient &&
                null != SteamClient.WebChat &&
                null != SteamClient.WebChat.SetPushToMuteEnabled
                  ? ve.createElement(
                      "div",
                      {
                        className:
                          "_DialogSection pushToTalkSection" +
                          (o ? "" : " disabled")
                      },
                      ve.createElement(
                        hi,
                        null,
                        Object(re.b)("#VoiceTransmissionType_Label"),
                        !o &&
                          ve.createElement(
                            "span",
                            { className: "disabledNotice" },
                            " (",
                            Object(re.b)("#VoiceTransmissionType_Disabled"),
                            ") "
                          )
                      ),
                      ve.createElement(
                        Si,
                        {
                          className:
                            "FriendsSettingsVoiceTransmissionType_ButtonRow"
                        },
                        ve.createElement(
                          wi,
                          {
                            className: e || n ? "Off" : "Primary",
                            onClick: this.OnSetOpenMic
                          },
                          Object(re.b)("#VoiceTransmissionType_OpenMic")
                        ),
                        ve.createElement(
                          wi,
                          {
                            className: e ? "Primary" : "Off",
                            disabled: !o,
                            onClick: this.OnSetPushToTalk
                          },
                          Object(re.b)("#VoiceTransmissionType_PushToTalk")
                        ),
                        ve.createElement(
                          wi,
                          {
                            className: n ? "Primary" : "Off",
                            disabled: !o,
                            onClick: this.OnSetPushToMute
                          },
                          Object(re.b)("#VoiceTransmissionType_PushToMute")
                        ),
                        ve.createElement(
                          "div",
                          {
                            className:
                              "pushToKeyAssignContainer displayColumn" +
                              (l || n || e ? " showPTTOptions" : "")
                          },
                          ve.createElement(
                            "div",
                            { className: "displayRow" },
                            ve.createElement(
                              hi,
                              { className: "DialogLabelExplainer" },
                              e ? r : n ? a : s
                            ),
                            ve.createElement(
                              wi,
                              {
                                disabled: !o,
                                className:
                                  this.state.hotkeyCapturing && "capturingKey",
                                onClick: this.AssignHotkey
                              },
                              i
                            ),
                            !e &&
                              !n &&
                              ve.createElement(
                                wi,
                                {
                                  className: "ClearHotKeyButton",
                                  onClick: this.ClearHotKey,
                                  title: Object(re.b)(
                                    "#VoiceClearHotKeyTooltip"
                                  )
                                },
                                ve.createElement(Qo.fb, null)
                              )
                          ),
                          ve.createElement(
                            "div",
                            {
                              className: "PPTSoundOption DialogLabelExplainer"
                            },
                            ve.createElement(Li, {
                              onChange: function(e) {
                                t.OnPPTSoundChecked(e);
                              },
                              label: Object(re.b)(
                                "#VoicePushToSomethingSoundOption"
                              ),
                              checked: c
                            })
                          )
                        )
                      )
                    )
                  : ve.createElement(
                      "div",
                      {
                        className:
                          "_DialogSection pushToTalkSection" +
                          (o ? "" : " disabled")
                      },
                      ve.createElement(
                        hi,
                        null,
                        Object(re.b)("#VoiceTransmissionType"),
                        !o &&
                          ve.createElement(
                            "span",
                            { className: "disabledNotice" },
                            " (",
                            Object(re.b)("#g_DisabledOnWeb"),
                            ") "
                          )
                      ),
                      ve.createElement(Ai, {
                        disabled: !o,
                        label: Object(re.b)("#VoiceTransmissionTypeExplainer"),
                        checked: e,
                        onChange: this.OnTogglePushToTalk
                      }),
                      e &&
                        ve.createElement(
                          "div",
                          {
                            className: "pushtoTalkKeyAssignContainer displayRow"
                          },
                          ve.createElement(
                            hi,
                            { className: "DialogLabelExplainer" },
                            r
                          ),
                          ve.createElement(
                            wi,
                            {
                              disabled: !o,
                              className:
                                this.state.hotkeyCapturing && "capturingKey",
                              onClick: this.AssignHotkey
                            },
                            i
                          )
                        )
                    ),
                ve.createElement(
                  "div",
                  { className: "_DialogSection" },
                  ve.createElement(
                    hi,
                    null,
                    Object(re.b)("#VoiceTransmisionThreshold")
                  ),
                  ve.createElement(
                    hi,
                    { className: "DialogLabelStrong" },
                    Object(re.b)("#VoiceTransmissionThresholdExplainer")
                  ),
                  ve.createElement(
                    Si,
                    { className: "FriendsSettingsFlashSection_ButtonRow" },
                    ve.createElement(
                      wi,
                      {
                        className:
                          m <= Co.k_ENoiseGateLevel_Low ? "Primary" : "Off",
                        onClick: this.SetNoiseGateOff
                      },
                      Object(re.b)("#VoiceTransmissionThresholdOff")
                    ),
                    ve.createElement(
                      wi,
                      {
                        className:
                          m == Co.k_ENoiseGateLevel_Medium ? "Primary" : "Off",
                        onClick: this.SetNoiseGateMedium
                      },
                      Object(re.b)("#VoiceTransmissionThresholdMedium")
                    ),
                    ve.createElement(
                      wi,
                      {
                        className:
                          m == Co.k_ENoiseGateLevel_High ? "Primary" : "Off",
                        onClick: this.SetNoiseGateHigh
                      },
                      Object(re.b)("#VoiceTransmissionThresholdHigh")
                    )
                  ),
                  ve.createElement(
                    hi,
                    { className: "DialogLabelExplainer" },
                    Object(re.b)("#VoiceTransmissionThresholdRecommended")
                  )
                ),
                ve.createElement(
                  wi,
                  {
                    className: "advancedSettingsButton",
                    onClick: this.OnShowAdvancedSettings
                  },
                  this.state.showAdvanced
                    ? Object(re.b)("#VoiceHideAdvancedSettings")
                    : Object(re.b)("#VoiceShowAdvancedSettings")
                ),
                ve.createElement(
                  "div",
                  {
                    className:
                      "advancedSettings" +
                      (this.state.showAdvanced ? " showAdvanced" : "")
                  },
                  ve.createElement(
                    hi,
                    null,
                    Object(re.b)("#VoiceAdvancedSettings")
                  ),
                  ve.createElement(
                    hi,
                    { className: "DialogLabelExplainer Left" },
                    Object(re.b)("#VoiceAdvancedSettingsExplainer")
                  ),
                  ve.createElement(Ai, {
                    label: Object(re.b)("#VoiceEchoCancellation"),
                    checked: this.props.voiceStore.GetUseEchoCancellation(),
                    onChange: this.OnToggleEchoCancellation
                  }),
                  ve.createElement(Ai, {
                    label: Object(re.b)("#VoiceNoiseCancellation"),
                    checked: this.props.voiceStore.GetUseNoiseCancellation(),
                    onChange: this.OnToggleNoiseCancellation
                  }),
                  ve.createElement(Ai, {
                    label: Object(re.b)("#VoiceAutoGainControl"),
                    checked: this.props.voiceStore.GetUseAutoGainControl(),
                    onChange: this.OnToggleAutoGainControl
                  }),
                  ve.createElement(
                    wi,
                    {
                      className: "copyVoiceLogsButton",
                      onClick: this.CopyVoiceLogsToClipboard
                    },
                    Object(re.b)("#CopyVoiceChatLogs")
                  )
                ),
                ve.createElement("div", {
                  className: "scrollToRef",
                  ref: this.VoiceSettingsRefMarker
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "gotMediaDevices", null),
          R.c([M.a], e.prototype, "gotMediaDevicesError", null),
          R.c([M.a], e.prototype, "onSubmit", null),
          R.c([M.a], e.prototype, "VoiceSettingsRefMarker", null),
          R.c([M.a], e.prototype, "OnShowAdvancedSettings", null),
          R.c([M.a], e.prototype, "OnMicDropdownChanged", null),
          R.c([M.a], e.prototype, "OnOutputDeviceDropdownChanged", null),
          R.c([M.a], e.prototype, "OnInputGainChanged", null),
          R.c([M.a], e.prototype, "OnOutputGainChanged", null),
          R.c([M.a], e.prototype, "OnToggleEchoCancellation", null),
          R.c([M.a], e.prototype, "OnToggleNoiseCancellation", null),
          R.c([M.a], e.prototype, "OnToggleAutoGainControl", null),
          R.c([M.a], e.prototype, "SetNoiseGateOff", null),
          R.c([M.a], e.prototype, "SetNoiseGateMedium", null),
          R.c([M.a], e.prototype, "SetNoiseGateHigh", null),
          R.c([M.a], e.prototype, "OnXButtonDown", null),
          R.c([M.a], e.prototype, "OnTogglePushToTalk", null),
          R.c([M.a], e.prototype, "OnSetOpenMic", null),
          R.c([M.a], e.prototype, "OnSetPushToTalk", null),
          R.c([M.a], e.prototype, "OnSetPushToMute", null),
          R.c([M.a], e.prototype, "AssignHotkey", null),
          R.c([M.a], e.prototype, "ClearHotKey", null),
          R.c([M.a], e.prototype, "onMouseDown", null),
          R.c([M.a], e.prototype, "onClick", null),
          R.c([M.a], e.prototype, "onContextMenu", null),
          R.c([M.a], e.prototype, "onKeyDown", null),
          R.c([M.a], e.prototype, "OnPPTSoundChecked", null),
          R.c([M.a], e.prototype, "CopyVoiceLogsToClipboard", null),
          R.c([M.a], e.prototype, "OnStartLocalMicTest", null),
          R.c([M.a], e.prototype, "OnStopLocalMicTest", null),
          (e = R.c([Hi.observer], e))
        );
      })(Vi);
    function za(e, t) {
      Ji(
        ve.createElement(qa, { browserContext: e }),
        t,
        Object(re.b)("#Settings"),
        {
          strTitle: Object(re.b)("#Settings"),
          popupWidth: 842,
          popupHeight: 720
        }
      );
    }
    var qa = (function(t) {
        function e(e) {
          return t.call(this, e, Object(re.b)("#Settings")) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.SaveFriendSettings = function(e, t) {
            Yo.SettingsStore.BUpdateFriendsSettings(e),
              Yo.SettingsStore.SetCommunityPreferences(t);
          }),
          (e.prototype.render = function() {
            var e = Yo.UIStore.GetPerContextChatData(this.props.browserContext),
              t = {
                friendsSettingsInitial: Yo.SettingsStore.FriendsSettings,
                communityPreferencesInitial:
                  Yo.SettingsStore.CommunityPreferences,
                onCancel: this.props.closeModal,
                onSubmit: this.SaveFriendSettings,
                bShowClientOpts: G.a.IN_CLIENT,
                bShowPopupOpts: e.BUsePopups(),
                bShowGroupOpts: !1,
                bSubmitImmediate: !0,
                bDoNotDisturbSupported:
                  G.a.IN_CLIENT &&
                  Yo.SettingsStore.BClientHasFeatureOrOnWeb("DoNotDisturb")
              },
              n = {
                title: Object(re.b)("#FriendSettings_Title"),
                className: "FriendSettingsContainer",
                pages: [
                  {
                    title: Object(re.b)("#FriendSettings_Friends"),
                    uniqueName: "FriendSettings_Friends",
                    content: ve.createElement(Ha, R.a({}, t))
                  },
                  {
                    title: Object(re.b)("#FriendSettings_Chat"),
                    uniqueName: "FriendSettings_Chat",
                    content: ve.createElement(ja, R.a({}, t))
                  },
                  {
                    title: Object(re.b)("#FriendSettings_SizeAndScaling"),
                    uniqueName: "FriendSettings_SizeAndScaling",
                    content: ve.createElement(Ua, R.a({}, t))
                  },
                  {
                    title: Object(re.b)("#FriendSettings_Notifications"),
                    uniqueName: "FriendSettings_Notifications",
                    content: ve.createElement(Ka, R.a({}, t))
                  },
                  {
                    title: Object(re.b)("#FriendSettings_Voice"),
                    uniqueName: "FriendSettings_Voice",
                    content: ve.createElement(Wa, {
                      onCancel: this.props.closeModal,
                      voiceStore: Yo.ChatStore.VoiceChat
                    })
                  }
                ]
              };
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(xi, R.a({}, n))
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ka = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.m_rgOptions = Ya(!1)), t;
        }
        return (
          R.d(e, n),
          (e.prototype.FriendsSettingsNotificationRow = function(e) {
            var t = this.FriendsSettingsCheckbox;
            return ve.createElement(
              "div",
              null,
              ve.createElement(
                "div",
                { className: "FriendsSettingsNotificationRow" },
                ve.createElement(
                  "div",
                  { className: "FriendsSettingsNotificationRow_Label" },
                  e.strLabel
                ),
                ve.createElement(
                  "div",
                  { className: "FriendsSettingsNotificationRow_Checkbox" },
                  ve.createElement(t, { strName: e.strNameShow })
                ),
                ve.createElement(
                  "div",
                  { className: "FriendsSettingsNotificationRow_Checkbox" },
                  ve.createElement(t, { strName: e.strNameSound })
                )
              )
            );
          }),
          (e.prototype.render = function() {
            var e = this.state.friendSettings,
              t = this.FriendsSettingsNotificationRow;
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.OnSubmit },
              ve.createElement(
                "div",
                { className: "SettingsGroup" },
                ve.createElement(
                  "div",
                  {
                    className:
                      "FriendsSettingsNotificationRow FriendsSettingsNotificationRow_Header"
                  },
                  ve.createElement(
                    "div",
                    { className: "FriendsSettingsNotificationRow_Label" },
                    Object(re.b)("#FriendSettings_Notification_Table_Label")
                  ),
                  ve.createElement(
                    "div",
                    { className: "FriendsSettingsNotificationRow_Checkbox" },
                    Object(re.b)("#FriendSettings_Notification_Table_Show")
                  ),
                  ve.createElement(
                    "div",
                    { className: "FriendsSettingsNotificationRow_Checkbox" },
                    Object(re.b)("#FriendSettings_Notification_Table_Play")
                  )
                ),
                ve.createElement(t, {
                  strLabel: Object(re.b)(
                    "#FriendSettings_Notification_FriendJoins"
                  ),
                  strNameShow: "bNotifications_ShowIngame",
                  strNameSound: "bSounds_PlayIngame"
                }),
                ve.createElement(t, {
                  strLabel: Object(re.b)(
                    "#FriendSettings_Notification_FriendOnline"
                  ),
                  strNameShow: "bNotifications_ShowOnline",
                  strNameSound: "bSounds_PlayOnline"
                }),
                ve.createElement(t, {
                  strLabel: Object(re.b)(
                    "#FriendSettings_Notification_ChatMessage"
                  ),
                  strNameShow: "bNotifications_ShowMessage",
                  strNameSound: "bSounds_PlayMessage"
                }),
                ve.createElement(t, {
                  strLabel: Object(re.b)(
                    "#FriendSettings_Notification_ChatRoomNotification"
                  ),
                  strNameShow: "bNotifications_ShowChatRoomNotification",
                  strNameSound: "bSounds_PlayChatRoomNotification"
                }),
                this.props.bShowGroupOpts &&
                  ve.createElement(t, {
                    strLabel: Object(re.b)(
                      "#FriendSettings_Notification_GroupEvent"
                    ),
                    strNameShow: "bNotifications_EventsAndAnnouncements",
                    strNameSound: "bSounds_EventsAndAnnouncements"
                  })
              ),
              this.props.bShowPopupOpts &&
                this.props.bShowClientOpts &&
                ve.createElement(
                  "div",
                  { className: "SettingsGroup" },
                  ve.createElement(
                    "div",
                    { className: "FriendsSettingsFlashSection" },
                    ve.createElement(
                      hi,
                      { className: "FriendsSettingsFlashSection_Header" },
                      Object(re.b)("#FriendSettings_Flash_Header")
                    ),
                    ve.createElement(
                      Si,
                      { className: "FriendsSettingsFlashSection_ButtonRow" },
                      ve.createElement(
                        wi,
                        {
                          className: 0 == e.nChatFlashMode ? "Primary" : "Off",
                          value: 0,
                          onClick: this.HandleRadioChange
                        },
                        Object(re.b)("#FriendSettings_Flash_Always")
                      ),
                      ve.createElement(
                        wi,
                        {
                          className: 1 == e.nChatFlashMode ? "Primary" : "Off",
                          value: 1,
                          onClick: this.HandleRadioChange
                        },
                        Object(re.b)("#FriendSettings_Flash_Minimized")
                      ),
                      ve.createElement(
                        wi,
                        {
                          className: 2 == e.nChatFlashMode ? "Primary" : "Off",
                          value: 2,
                          onClick: this.HandleRadioChange
                        },
                        Object(re.b)("#FriendSettings_Flash_Never")
                      )
                    )
                  )
                ),
              !this.props.bSubmitImmediate &&
                ve.createElement(Ti, { onCancel: this.props.onCancel })
            );
          }),
          R.c([M.a], e.prototype, "FriendsSettingsNotificationRow", null),
          (e = R.c([Hi.observer], e))
        );
      })(Va);
    ve.createElement(
      "div",
      { className: "notificationChimeAndToast FriendsSettingsNotificationRow" },
      ve.createElement(Li, null),
      ve.createElement(Li, null)
    );
    function Ya(e) {
      void 0 === e && (e = !0);
      var t = [];
      return (
        e &&
          (t = t.concat([
            {
              label: ve.createElement(
                "span",
                { className: "ChannelSpecificNotificationSettings_Inherit" },
                Object(re.b)("#NotificationSetting_Inherit")
              ),
              data: 0
            }
          ])),
        (t = t.concat([
          { label: Object(re.b)("#NotificationSetting_AllMessages"), data: 4 },
          {
            label: Object(re.b)(
              "#NotificationSetting_AnyMention",
              Yo.FriendStore.self.display_name
            ),
            data: 3
          },
          {
            label: Object(re.b)(
              "#NotificationSetting_DirectMention",
              Yo.FriendStore.self.display_name
            ),
            data: 2
          },
          { label: Object(re.b)("#NotificationSetting_None"), data: 1 }
        ]))
      );
    }
    var Ja = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_rgSelectOptions = Ya(!1)), (t.state = { cSavesInFlight: 0 }), t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.IncrementSavesInFlight = function() {
            this.setState(function(e) {
              return { cSavesInFlight: e.cSavesInFlight + 1 };
            });
          }),
          (e.prototype.DecrementSavesInFlight = function() {
            this.setState(function(e) {
              return (
                AssertMsg(
                  0 < e.cSavesInFlight,
                  "expected " + e.cSavesInFlight + " > 0"
                ),
                { cSavesInFlight: e.cSavesInFlight - 1 }
              );
            });
          }),
          (e.prototype.WrapSavePromise = function(e) {
            this.IncrementSavesInFlight(),
              e.then(this.DecrementSavesInFlight, this.DecrementSavesInFlight);
          }),
          (e.prototype.OnGroupNotificationLevelChanged = function(e) {
            this.WrapSavePromise(
              this.props.group.SetNotificationPreferences(e)
            );
          }),
          (e.prototype.OnShowUnreadIndicatorChanged = function(e) {
            this.WrapSavePromise(
              this.props.group.SetNotificationPreferences(void 0, void 0, e)
            );
          }),
          (e.prototype.DismissDialog = function() {
            this.props.closeModal();
          }),
          (e.prototype.OnFriendsSettingsClicked = function(e) {
            za(zu(this, e), e.currentTarget.ownerDocument.defaultView);
          }),
          (e.prototype.render = function() {
            var e,
              t = this,
              n = this.props.group,
              o = n.chatRoomList.filter(function(e) {
                return e.BShouldTrackUnreadMessages();
              }),
              i = 0 < o.length;
            if (
              (1 == o.length &&
                0 == o[0].GetDesktopNotificationLevelSetting() &&
                0 == o[0].GetMobileNotificationLevelsetting() &&
                (i = !1),
              i)
            ) {
              var r = o.map(function(e) {
                return ve.createElement(Xa, {
                  fnHandleSave: t.WrapSavePromise,
                  group: n,
                  chat: e,
                  key: e.unique_id
                });
              });
              e = ve.createElement(
                ve.Fragment,
                null,
                ve.createElement(
                  "div",
                  { className: "notificationsChannelListContainer\t" },
                  r
                )
              );
            }
            return ve.createElement(
              Ki,
              { onEscKeypress: this.DismissDialog },
              ve.createElement(
                Oi,
                { classNameContent: "ChatRoomNotificationSettingsDialog" },
                ve.createElement(
                  mi,
                  null,
                  Object(re.b)("#NotificationSettings_Title")
                ),
                ve.createElement(
                  hi,
                  null,
                  Object(re.d)(
                    "#NotificationSettings_SubTitle",
                    ve.createElement("span", { className: "whiteText" }, n.name)
                  )
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    hi,
                    {
                      className:
                        "NotificationSettingsSavingIndicator " +
                        (this.state.cSavesInFlight ? "Saving" : "")
                    },
                    "Saving ..."
                  ),
                  ve.createElement(Qa, {
                    drop_down_options: this.m_rgSelectOptions,
                    get_notification_level: function(e) {
                      return t.props.group.GetDesktopNotificationLevel(e);
                    },
                    set_notification_level: this
                      .OnGroupNotificationLevelChanged,
                    get_muted: function() {
                      return t.props.group.BIsUnreadIndicatorMuted();
                    },
                    set_muted: this.OnShowUnreadIndicatorChanged
                  }),
                  i &&
                    ve.createElement(
                      ve.Fragment,
                      null,
                      ve.createElement(Di, null),
                      ve.createElement(
                        vi,
                        { className: "notificationsChannelHeader" },
                        ve.createElement(
                          hi,
                          { className: "NotificationChannelNameLabel" },
                          Object(re.b)("#GroupSettings_Channels_TextChannels")
                        ),
                        ve.createElement(
                          hi,
                          { className: "OverrideChannelLabel" },
                          Object(re.b)("#NotificationSetting_ShortLabel")
                        )
                      ),
                      ve.createElement(
                        gi,
                        { className: "scrollMaskVertical" },
                        e
                      )
                    )
                ),
                ve.createElement(
                  di,
                  null,
                  Object(re.d)(
                    "#NotificationSetting_Footer_Desc",
                    ve.createElement(
                      "span",
                      {
                        className: "textLink",
                        onClick: this.OnFriendsSettingsClicked
                      },
                      Object(re.b)("#FriendSettings_Title")
                    )
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "IncrementSavesInFlight", null),
          R.c([M.a], e.prototype, "DecrementSavesInFlight", null),
          R.c([M.a], e.prototype, "WrapSavePromise", null),
          R.c([M.a], e.prototype, "OnGroupNotificationLevelChanged", null),
          R.c([M.a], e.prototype, "OnShowUnreadIndicatorChanged", null),
          R.c([M.a], e.prototype, "DismissDialog", null),
          R.c([M.a], e.prototype, "OnFriendsSettingsClicked", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Xa = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (e.m_rgSelectOptions = Ya()), e;
        }
        return (
          R.d(e, t),
          (e.prototype.OnChatNotificationLevelChanged = function(e) {
            this.props.fnHandleSave(
              this.props.chat.SetNotificationPreferences(e.data)
            );
          }),
          (e.prototype.render = function() {
            var e = this.props.chat;
            e.GetDesktopNotificationLevelSetting();
            return ve.createElement(
              Si,
              { className: "notificationsChannel" },
              ve.createElement(
                "div",
                { className: "NotificationChannelName" },
                e.name
              ),
              ve.createElement(Fi, {
                rgOptions: this.m_rgSelectOptions,
                selectedOption: e.GetDesktopNotificationLevelSetting(),
                onChange: this.OnChatNotificationLevelChanged
              })
            );
          }),
          R.c([M.a], e.prototype, "OnChatNotificationLevelChanged", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Qa = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnNotificationLevelChanged = function(e) {
            this.props.set_notification_level(e.data);
          }),
          (t.prototype.OnShowUnreadIndicatorChanged = function(e) {
            this.props.set_muted(!e);
          }),
          (t.prototype.render = function() {
            var e = this.props.get_notification_level(!0);
            this.props.bIsDefault && 0 == e && (e = 4);
            var t = this.props.get_notification_level();
            return (
              this.props.bIsDefault && 0 == t && (t = 4),
              ve.createElement(
                "div",
                { className: "ChatRoomNotificationSettingsDialog" },
                ve.createElement(
                  "div",
                  {
                    className:
                      "notificationGeneralHeader" +
                      (this.props.bIsDefault ? " isDefault" : "")
                  },
                  ve.createElement(
                    hi,
                    null,
                    this.props.bIsDefault
                      ? Object(re.b)("#NotificationSetting_DefaultLabel")
                      : Object(re.b)("#NotificationSetting_Label")
                  )
                ),
                ve.createElement(
                  "div",
                  { style: { marginBottom: 16 } },
                  ve.createElement(
                    "div",
                    { className: "notificationRow" },
                    ve.createElement(Fi, {
                      rgOptions: this.props.drop_down_options,
                      selectedOption: e,
                      onChange: this.OnNotificationLevelChanged
                    })
                  ),
                  4 != t &&
                    ve.createElement(
                      "div",
                      { className: "indicatorOptionContainer" },
                      ve.createElement(Ai, {
                        classname: "indicatorOption",
                        label: Object(re.b)("#NotificationSetting_Indicator"),
                        onChange: this.OnShowUnreadIndicatorChanged,
                        checked: !this.props.get_muted()
                      }),
                      ve.createElement(
                        "div",
                        {
                          className:
                            "ChatUnreadMessageIndicator" +
                            (this.props.get_muted() ? " Hidden" : "")
                        },
                        ve.createElement("div", {
                          className: "chatUnreadCircle"
                        })
                      )
                    )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnNotificationLevelChanged", null),
          R.c([M.a], t.prototype, "OnShowUnreadIndicatorChanged", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Za = function() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        return e.reduce(function(e, t) {
          return t
            ? "string" == typeof t
              ? e ? e + " " + t : t
              : "object" == typeof t ? (e ? e + " " + $a(t) : $a(t)) : e
            : e;
        }, "");
      };
    function $a(n) {
      return Object.keys(n).reduce(function(e, t) {
        return n[t] ? (e ? e + " " + t : t) : e;
      }, "");
    }
    var es = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.src,
              n = e.duration,
              o = e.className,
              i = R.f(e, ["src", "duration", "className"]),
              r = {
                backgroundImage: "url(" + t + ")",
                transitionDuration: n / 1e3 + "s"
              };
            return ve.createElement(
              $r.TransitionGroup,
              R.a({}, i, { className: Za("crossfade", o) }),
              ve.createElement(
                $r.CSSTransition,
                {
                  classNames: "crossfade-anim",
                  timeout: n || 500,
                  key: t,
                  style: r
                },
                ve.createElement("div", { className: "crossfade-img" })
              )
            );
          }),
          t
        );
      })(ve.Component),
      ts = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.InviteFriend = function(e) {
            Ur(
              zu(this, e),
              e.currentTarget.ownerDocument.defaultView,
              this.props.groupView.GetGroup()
            );
          }),
          (t.prototype.OpenSettings = function(e) {
            var t, n;
            (t = Yu(e)),
              (n = this.props.groupView),
              Ji(
                ve.createElement(Da, { groupView: n }),
                t,
                "ChatRoomGroupSettings",
                {
                  strTitle: Object(re.b)("#GroupSettings"),
                  popupWidth: 842,
                  popupHeight: 600
                }
              );
          }),
          (t.prototype.OpenNotificationPreferences = function(e) {
            !(function(e, t) {
              var n = t.GetGroup().textRoomList.length;
              7 < n && (n = 7);
              var o = 60 * n;
              n < 2 && (o -= 32),
                Ji(
                  ve.createElement(Ja, { group: t.GetGroup() }),
                  e,
                  "ChatRoomGroupNotificationSettings",
                  {
                    strTitle: Object(re.b)("#NotificationSettings_Title"),
                    popupWidth: 600,
                    popupHeight: 348 + o
                  }
                );
            })(Yu(e), this.props.groupView);
          }),
          (t.prototype.OnContextMenu = function(e) {
            Yr(e, this.props.groupView.GetGroup(), { is_chat_window: !0 });
          }),
          (t.prototype.render = function() {
            var e = this.props.groupView,
              t = e.GetGroup(),
              n = t.name,
              o = t.tagline,
              i = !1;
            t.readyToRender && (i = t.BCanInvite());
            var r =
              IsFeatureBroadcastEnabled() &&
              e.GetGroup().watching_broadcast_steamid &&
              !e.isBroadcastShown;
            return ve.createElement(
              "div",
              { className: "chatRoomHeader" },
              ve.createElement(
                "div",
                {
                  className:
                    "chatRoomGroupHeader" + (r ? " notifyBroadcast" : ""),
                  onContextMenu: this.OnContextMenu
                },
                ve.createElement(ss, { group: t }),
                ve.createElement(
                  "div",
                  { className: "chatRoomGroupHeaderNameandTag" },
                  ve.createElement(
                    "div",
                    { className: "chatRoomGroupHeaderName" },
                    n
                  ),
                  ve.createElement(
                    "div",
                    { className: "chatRoomGroupHeaderTagline" },
                    o
                  )
                ),
                ve.createElement("div", { className: "chatRoomGroupSpacer" }),
                t.readyToRender &&
                  ve.createElement(
                    ve.Fragment,
                    null,
                    r && this.RenderBroadcastPeek(),
                    ve.createElement(
                      "div",
                      { className: "chatRoomGroupControls" },
                      ve.createElement(
                        "div",
                        { className: "chatRoomOptions" },
                        ve.createElement(
                          "div",
                          {
                            className: "chatRoomButton ManageNotifications",
                            onClick: this.OpenNotificationPreferences,
                            title: Object(re.b)("#Tooltip_NotificationSettings")
                          },
                          ve.createElement(Qo.c, null)
                        ),
                        i &&
                          ve.createElement(
                            "div",
                            {
                              className: "chatRoomButton InviteToGroupChat",
                              onClick: this.InviteFriend,
                              title: Object(re.b)("#Tooltip_InviteToGroup")
                            },
                            ve.createElement(Qo.w, null)
                          ),
                        !i &&
                          ve.createElement(
                            "div",
                            {
                              className:
                                "chatRoomButton InviteToGroupChat Disabled",
                              onClick: function(e) {},
                              title: Object(re.b)(
                                "#Tooltip_InviteToGroup_Denied"
                              )
                            },
                            ve.createElement(Qo.w, null)
                          ),
                        ve.createElement(
                          "div",
                          {
                            className: "chatRoomButton GroupChatSettings",
                            onClick: this.OpenSettings,
                            title: Object(re.b)("#Tooltip_GroupChatSettings")
                          },
                          ve.createElement(Qo.e, null)
                        )
                      ),
                      ve.createElement(
                        "div",
                        { className: "chatRoomGroupStats" },
                        ve.createElement(os, { group: t }),
                        ve.createElement(rs, { group: t }),
                        ve.createElement(is, { group: t })
                      )
                    )
                  )
              )
            );
          }),
          (t.prototype.RenderBroadcastPeek = function() {
            var e = this.props,
              t = e.groupView,
              n = e.onBroadcastPreviewClick,
              o = t.GetGroup(),
              i = o.watching_broadcast_steamid.ConvertTo64BitString(),
              r = o.BCanIAssociateBroadcast()
                ? function() {
                    return Zi(
                      window,
                      Object(re.b)("#Broadcast_EndWatchParty"),
                      Object(re.b)("#Broadcast_EndWatchPartyPrompt"),
                      Object(re.b)("#Broadcast_EndWatchParty")
                    ).then(function() {
                      return o.SetChatRoomGroupWatchingBroadcast(void 0);
                    });
                  }
                : void 0;
            return ve.createElement(ns, {
              broadcastId: i,
              key: i,
              onClick: n,
              onRequestClose: r
            });
          }),
          R.c([M.a], t.prototype, "InviteFriend", null),
          R.c([M.a], t.prototype, "OpenSettings", null),
          R.c([M.a], t.prototype, "OpenNotificationPreferences", null),
          R.c([M.a], t.prototype, "OnContextMenu", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ns = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { info: Zn.StartInfo(e.broadcastId) }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            Zn.StopInfo(this.state.info);
          }),
          (e.prototype.OnCloseClick = function(e) {
            this.props.onRequestClose &&
              (e.stopPropagation(), this.props.onRequestClose());
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.onClick,
              n = e.onRequestClose,
              o = this.state.info,
              i = o.m_strAppTitle,
              r = o.m_strThumbnailUrl,
              a = o.m_strTitle,
              s = new E.a(this.props.broadcastId),
              c = a;
            return (
              a ||
                (c = Object(re.b)(
                  "#PersonaStateWatchingBroadcast_Player",
                  Yo.FriendStore.GetPlayer(s.GetAccountID()).display_name
                )),
              ve.createElement(
                "div",
                { className: "broadcastInfoContainer", onClick: t },
                ve.createElement(
                  "div",
                  { className: "broadcastDetails" },
                  ve.createElement(
                    "div",
                    { className: "nowWatching" },
                    Object(re.b)("#Broadcast_NowWatching")
                  ),
                  ve.createElement("div", { className: "gameTitle" }, i),
                  ve.createElement("div", { className: "broadcastTitle" }, c)
                ),
                ve.createElement(
                  "div",
                  { className: "thumbnail" },
                  r &&
                    ve.createElement(es, {
                      className: "thumbnailImg",
                      src: r,
                      duration: 2500
                    })
                ),
                n &&
                  ve.createElement(
                    "div",
                    { className: "actions", onClick: this.OnCloseClick },
                    ve.createElement(Qo.eb, null)
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnCloseClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      os = Object(Hi.observer)(function(e) {
        var t = e.group;
        return ve.createElement(
          "div",
          { className: "statMemberStat statMembersTotal" },
          ve.createElement("div", { className: "statCircle" }),
          Object(re.c)("#Chat_Members", t.memberCountTotal)
        );
      }),
      is = Object(Hi.observer)(function(e) {
        var t = e.group;
        return 0 == t.memberCountInGame
          ? null
          : ve.createElement(
              "div",
              {
                className: "statMemberStat statMembersInGame",
                title: Object(re.c)(
                  "#Chat_Members_InGame_Tooltip",
                  t.memberCountInGame
                )
              },
              ve.createElement("div", { className: "statCircle" }),
              t.memberCountInGame
            );
      }),
      rs = Object(Hi.observer)(function(e) {
        var t = e.group;
        return 0 == t.memberCountOnline
          ? null
          : ve.createElement(
              "div",
              {
                className: "statMemberStat statMembersOnline",
                title: Object(re.c)(
                  "#Chat_Members_Online_Tooltip",
                  t.memberCountOnline
                )
              },
              ve.createElement("div", { className: "statCircle" }),
              t.memberCountOnline
            );
      }),
      as = Object(Hi.observer)(function(e) {
        if (!e.small && !e.micro && e.clan.BIsOGG() && e.clan.GetOGGAppID()) {
          var t = Yo.AppInfoStore.GetAppInfo(e.clan.GetOGGAppID());
          return ve.createElement(
            "div",
            { className: "ChatRoomGroupOGGAvatar " + (e.large ? "Large" : "") },
            ve.createElement("img", {
              className: "OGGAvatar",
              src: t.header_image_url
            })
          );
        }
        var n = "";
        return (
          e.micro
            ? (n = "Micro")
            : e.small ? (n = "Small") : e.large && (n = "Large"),
          ve.createElement(
            "div",
            { className: "ChatRoomGroupAvatar " + n },
            ve.createElement("img", {
              className: "ChatRoomGroupAvatar_Avatar",
              src: e.large ? e.clan.avatar_url_full : e.clan.avatar_url_medium
            })
          )
        );
      }),
      ss = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var n = this,
              e = this.props.group;
            if (e && e.BIsClanChatRoom()) {
              var t = Yo.FriendStore.ClanStore.GetClan(e.GetClanID());
              return ve.createElement(as, {
                clan: t,
                micro: this.props.micro,
                small: this.props.small,
                large: this.props.large
              });
            }
            var o = "";
            if (
              (this.props.micro
                ? (o = "Micro")
                : this.props.small
                  ? (o = "Small")
                  : this.props.large && (o = "Large"),
              e && !e.IsNamedGroupChat())
            ) {
              var i = e.members_to_highlight,
                r = i.members,
                a = i.remaining_count;
              if (r.length) {
                var s = r.length + (a ? 1 : 0);
                return ve.createElement(
                  "div",
                  {
                    className:
                      "ChatRoomMultiFriendAvatar With" + s + "Items " + o
                  },
                  r.map(function(e, t) {
                    return ve.createElement("img", {
                      src: n.props.large
                        ? e.persona.avatar_url_medium
                        : e.persona.avatar_url,
                      key: t,
                      className: "MultiAvatar Index" + t
                    });
                  }),
                  0 < a &&
                    ve.createElement(
                      "div",
                      {
                        className: "ChatRoomMultiFriendMore MultiAvatar Index3"
                      },
                      "+",
                      a
                    )
                );
              }
            }
            if (e && e.hasAvatar)
              return ve.createElement(
                "div",
                { className: "ChatRoomGroupAvatar HasAvatar " + o },
                ve.createElement("img", {
                  className: "ChatRoomGroupAvatar_Avatar",
                  src: e.avatar_url_full
                })
              );
            var c = "";
            e ? (c = e.name) : this.props.name && (c = this.props.name);
            var l = (function(e) {
                if (e.length <= 2) return e;
                for (var t = e.charAt(1), n = Dn(t), o = 2; o < e.length; o++) {
                  var i = e.charAt(o);
                  if (n || !Dn(i)) {
                    if (" " == i) {
                      0 < (i = e.charAt(o + 1)).length && (t = i);
                      break;
                    }
                  } else (n = !0), (t = i);
                }
                return e.charAt(0) + t;
              })(c),
              p = "ChatRoomGroupAvatar " + o;
            return (
              Mn(l) && (p += " EmojiInitials"),
              ve.createElement(
                "div",
                { className: p },
                ve.createElement(
                  "div",
                  { className: "ChatRoomGroupAvatar_initials" },
                  l
                )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    var cs = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_iActiveDragIndex = void 0),
            (t.m_ActiveDrag = void 0),
            (t.m_ActiveDragOut = void 0),
            (t.m_bGhostIsDupe = !1),
            (t.m_rgFavoriteElementRefs = []),
            (t.m_bAcceptDrag = !1),
            (t.state = {
              bHintDismissed: Qu.UIDisplayPrefs.bFavoritesHintDismissed
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.DismissFavoritesHint = function() {
            this.setState({ bHintDismissed: !0 }),
              Qu.SetUIDisplayPref("bFavoritesHintDismissed", !0);
          }),
          (e.prototype.render = function() {
            var r = this,
              e = this.props.FavoritesStore.favorites,
              a = this.m_ActiveDrag,
              t = "quickAccessFriends emptyQuickAccess";
            if (
              (this.state.bHintDismissed && (t += " hintDismissed"),
              e.length || a)
            ) {
              var n = e,
                o = Yo.SettingsStore.FriendsSettings.bCompactQuickAccess;
              if (a) {
                if (
                  (this.m_bGhostIsDupe &&
                    n.findIndex(function(e) {
                      return it(e, a);
                    }),
                  void 0 === this.m_iActiveDragIndex ||
                    this.m_iActiveDragIndex >= n.length)
                )
                  n = n.concat([R.a({ isActiveDrag: !0 }, a)]);
                else {
                  this.m_iActiveDragIndex;
                  n = n
                    .slice(0, this.m_iActiveDragIndex)
                    .concat(
                      [R.a({ isActiveDrag: !0 }, a)],
                      n.slice(this.m_iActiveDragIndex)
                    );
                }
              }
              var i = n.map(function(e, t) {
                  var n;
                  if (e.friend) n = "f" + e.friend.accountid;
                  else if (e.clan) n = "cl" + e.clan.clanid;
                  else {
                    if (!e.chat) return null;
                    n = "cg" + e.chat.GetGroupID();
                  }
                  var o = r.m_bGhostIsDupe && !e.isActiveDrag && it(a, e),
                    i = e.isActiveDrag;
                  return (
                    i && (n += "dragGhost"),
                    ve.createElement(ls, {
                      favorite: e,
                      index: t,
                      friendRenderContext: r.GetFriendRenderContext(),
                      key: n,
                      bIsDragGhost: i,
                      bIsDragOutGhost: o,
                      ref: r.OnFavoriteElementRef.bind(r, t)
                    })
                  );
                }),
                s = "quickAccessFriends";
              return (
                o && (s += " compactQuickAccess"),
                ve.createElement(
                  ji,
                  R.a({ className: s }, this.GetDragDropProps()),
                  i,
                  ve.createElement("div", { className: "dropTargetBox" })
                )
              );
            }
            return ve.createElement(
              ji,
              R.a({ className: t }, this.GetDragDropProps()),
              ve.createElement(
                "div",
                { className: "quickAccessFriendsMessage" },
                Object(re.b)("#FriendsList_Favorites_Hint")
              ),
              !this.state.bHintDismissed &&
                ve.createElement(
                  "div",
                  {
                    className: "quickAccessFriendsMessageDismiss",
                    onClick: this.DismissFavoritesHint
                  },
                  Object(re.b)("#Generic_Got_It")
                ),
              ve.createElement("div", { className: "dropTargetBox" })
            );
          }),
          (e.prototype.OnFavoriteElementRef = function(e, t) {
            this.m_rgFavoriteElementRefs[e] = t;
          }),
          (e.prototype.GetFriendRenderContext = function() {
            return (
              this.m_FriendRenderContext ||
                (this.m_FriendRenderContext = { chatContext: "friendslist" }),
              this.m_FriendRenderContext
            );
          }),
          (e.prototype.GetDragDropProps = function() {
            var e = {
              rgAcceptedTypes: ["friend", "chattab", "chatroomgroup", "clan"]
            };
            return (
              (e.fnDragEnter = this.OnDragEnter),
              (e.fnDragOver = this.OnDragOver),
              (e.fnDragLeave = this.OnDragLeave),
              (e.fnDrop = this.OnDrop),
              (e.onDragStart = this.OnDragStart),
              (e.onDragEndCapture = this.OnDragEnd),
              e
            );
          }),
          (e.prototype.OnDragStart = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            !t ||
              ("friend" != t.type &&
                "chatroomgroup" != t.type &&
                "clan" != t.type) ||
              ((t.is_favorite = !0),
              (this.m_ActiveDragOut = this.FindItemFromDrag(t)));
          }),
          (e.prototype.OnDragEnd = function(e) {
            var t = Qu.DragDropManager.GetDragData(),
              n = this.FindItemFromDrag(t);
            if (
              n &&
              "is_favorite" in t &&
              t.is_favorite &&
              !Qu.DragDropManager.BWasDropConsumed()
            ) {
              var o = e.currentTarget.getBoundingClientRect();
              100 < Object(ci.j)(o, e.clientX, e.clientY) &&
                (this.props.FavoritesStore.RemoveFromFavorites(n),
                Qu.DragDropManager.EndDrag());
            }
            this.m_ActiveDragOut = void 0;
          }),
          (e.prototype.FindItemFromDrag = function(e) {
            var t, n, o, i;
            if ("friend" == e.type) n = e.friend;
            else if ("chattab" == e.type) {
              var r = e.tab;
              if (r instanceof Pt) {
                var a = r.GetGroup();
                a.BIsClanChatRoom() &&
                  (o = Yo.FriendStore.ClanStore.GetClan(a.GetClanID())),
                  (i = a);
              } else {
                n = r.GetChatView().chat.chat_partner;
              }
            } else
              "chatroomgroup" == e.type
                ? (i = e.group)
                : "clan" == e.type && (o = e.clan);
            return (
              n
                ? n.is_friend && (t = { friend: n })
                : o ? (t = { clan: o }) : i && (t = { chat: i }),
              t
            );
          }),
          (e.prototype.OnDragEnter = function(e, t) {
            var n = this.FindItemFromDrag(e);
            return (
              n &&
                !it(this.m_ActiveDrag, n) &&
                ((this.m_ActiveDrag = n),
                (this.m_bGhostIsDupe = this.props.FavoritesStore.BIsFavorited(
                  n
                ))),
              !0
            );
          }),
          (e.prototype.OnDragOver = function(e) {
            for (
              var t, n, o = 0, i = this.m_rgFavoriteElementRefs;
              o < i.length;
              o++
            ) {
              var r = i[o],
                a = r && r.GetBoundingClientRect();
              if (a) {
                var s = Object(ci.j)(a, e.clientX, e.clientY);
                (void 0 === n || s < n) && ((n = s), (t = r));
              }
            }
            t && (this.m_iActiveDragIndex = t.props.index),
              (e.dataTransfer.dropEffect = "copy");
          }),
          (e.prototype.ResetDragState = function() {
            (this.m_ActiveDrag = void 0),
              (this.m_ActiveDragOut = void 0),
              (this.m_iActiveDragIndex = void 0);
          }),
          (e.prototype.OnDragLeave = function() {
            this.m_ActiveDrag && this.ResetDragState();
          }),
          (e.prototype.OnDrop = function(e, t) {
            var n = this.FindItemFromDrag(e);
            this.m_ActiveDrag;
            n
              ? (Qu.DragDropManager.SetDropConsumed(),
                this.props.FavoritesStore.AddToFavorites(
                  n,
                  this.m_iActiveDragIndex
                ),
                this.ResetDragState())
              : this.m_ActiveDrag && this.ResetDragState();
          }),
          R.c([m.observable], e.prototype, "m_iActiveDragIndex", void 0),
          R.c([m.observable], e.prototype, "m_ActiveDrag", void 0),
          R.c([m.observable], e.prototype, "m_ActiveDragOut", void 0),
          R.c([M.a], e.prototype, "DismissFavoritesHint", null),
          R.c([M.a], e.prototype, "OnDragStart", null),
          R.c([M.a], e.prototype, "OnDragEnd", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ls = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetBoundingClientRect = function() {
            var e = W.findDOMNode(this);
            return e ? e.getBoundingClientRect() : null;
          }),
          (t.prototype.onFavoriteElementClick = function(e) {
            var t = this.props.favorite;
            if (t.friend)
              this.props.favorite.friend.OpenChatDialog(zu(null, e));
            else if (t.clan) t.clan.OpenChatDialog(zu(this, e));
            else {
              if (!t.chat) return;
              Yo.UIStore.ShowAndOrActivateChatRoomGroup(
                zu(this, e),
                t.chat,
                !0
              );
            }
            e.stopPropagation();
          }),
          (t.prototype.OnFavoriteElementContextMenu = function(e) {
            var t,
              n,
              o,
              i,
              r,
              a = this.props.favorite;
            if (a.friend)
              Er(zu(this, e), this.props.friendRenderContext, a.friend, e);
            else if (a.clan)
              (t = e),
                (n = a.clan),
                (o = { is_favorites: !0 }),
                (r = zu(null, t)),
                n.GetChatGroupIDIfLoaded() &&
                  (i = Yo.ChatStore.GetChatRoomGroup(
                    n.GetChatGroupIDIfLoaded()
                  )),
                Object(Zo.a)(
                  ve.createElement(Jr, {
                    browserContext: r,
                    group: i,
                    clan: n,
                    context: o,
                    ownerWindow: t.currentTarget.ownerDocument.defaultView
                  }),
                  t
                );
            else {
              if (!a.chat) return;
              Yr(e, a.chat, { is_favorites: !0 });
            }
            e.stopPropagation();
          }),
          (t.prototype.render = function() {
            var e,
              t,
              n = "quickAccessFriend",
              o = this.props.favorite;
            this.props.bIsDragGhost
              ? (n += " dropGhost")
              : this.props.bIsDragOutGhost && (n += " dragOriginGhost"),
              this.props.bIsDragOutGhost && (e = { display: "none" }),
              (t = o.friend
                ? ve.createElement(ps, {
                    key: o.friend.accountid,
                    friend: o.friend,
                    friendRenderContext: this.props.friendRenderContext,
                    className: n
                  })
                : o.clan
                  ? ve.createElement(us, {
                      key: o.clan.clanid,
                      clan: o.clan,
                      className: n
                    })
                  : o.chat
                    ? ve.createElement(ms, {
                        key: o.chat.GetGroupID(),
                        chat: o.chat,
                        className: n
                      })
                    : null);
            var i = ve.createElement(
              "div",
              {
                style: e,
                className: "favoriteElement",
                onClick: this.onFavoriteElementClick,
                onContextMenu: this.OnFavoriteElementContextMenu
              },
              t
            );
            return o.friend
              ? ve.createElement(
                  Xs,
                  { friend: o.friend, context: this.props.friendRenderContext },
                  i
                )
              : i;
          }),
          R.c([M.a], t.prototype, "onFavoriteElementClick", null),
          R.c([M.a], t.prototype, "OnFavoriteElementContextMenu", null),
          t
        );
      })(ve.Component),
      ps = Object(Hi.observer)(function(e) {
        var t = e.friend,
          n = Yo.SettingsStore.FriendsSettings.bCompactQuickAccess,
          o = null;
        t.persona.is_awayOrSnooze && (o = ve.createElement(Hs, null));
        var i = void 0;
        if (t.persona.is_ingame) {
          var r = Yo.AppInfoStore.GetAppInfo(t.persona.m_unGamePlayedAppID);
          r.is_valid &&
            (i = ve.createElement(
              "div",
              { className: "FavoriteFriend_GameIcon" },
              ve.createElement("img", {
                className: "gameIcon",
                src: r.icon_url,
                draggable: !1
              })
            ));
        }
        for (
          var a = !1,
            s = 0,
            c = Yo.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();
          s < c.length;
          s++
        ) {
          if (c[s].accountid_partner == t.accountid) {
            a = !0;
            break;
          }
        }
        var l = null;
        return (
          a &&
            (l = ve.createElement(
              "div",
              { className: "ChatUnreadMessageIndicator" },
              ve.createElement("div", { className: "chatUnreadCircle" })
            )),
          ve.createElement(
            Qs,
            {
              friend: t,
              key: t.accountid,
              className: e.className,
              context: e.friendRenderContext,
              bFriendsListEntry: !0,
              bSingleClickActivate: !0
            },
            ve.createElement(
              "div",
              null,
              ve.createElement(
                "div",
                { className: "avatarHolder no-drag" },
                ve.createElement("div", { className: "avatarStatus" }),
                ve.createElement("img", {
                  className: "avatar",
                  src: t.persona.avatar_url_medium,
                  draggable: !1
                }),
                i,
                o
              ),
              !n &&
                ve.createElement(
                  "div",
                  { className: "playerNameQuickAccessContainer" },
                  ve.createElement(
                    "div",
                    { className: "playerName" },
                    t.display_name
                  ),
                  t.is_display_name_nickname &&
                    ve.createElement(
                      "span",
                      {
                        className: "playerNicknameBracket",
                        title: Object(re.b)("#isNickname")
                      },
                      "*"
                    )
                ),
              l
            )
          )
        );
      }),
      us = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnDragStart = function(e) {
            Qu.DragDropManager.StartDrag({
              type: "clan",
              clan: this.props.clan
            });
          }),
          (t.prototype.OnDragEnd = function(e) {
            Qu.DragDropManager.EndDrag();
          }),
          (t.prototype.render = function() {
            var e = "QuickAccessFriend QuickAccessClan",
              t = Yo.SettingsStore.FriendsSettings.bCompactQuickAccess;
            this.props.className && (e += " " + this.props.className);
            var n = null,
              o = this.props.clan.GetChatGroupIDIfLoaded();
            if (o) {
              var i = Yo.ChatStore.GetChatRoomGroup(o);
              i && (n = ve.createElement(na, { group: i }));
            }
            return ve.createElement(
              "div",
              {
                className: e,
                draggable: !0,
                onDragStart: this.OnDragStart,
                onDragEnd: this.OnDragEnd
              },
              ve.createElement(as, { clan: this.props.clan, small: !0 }),
              !t &&
                ve.createElement(
                  "div",
                  { className: "clanName" },
                  this.props.clan.name
                ),
              n
            );
          }),
          R.c([M.a], t.prototype, "OnDragStart", null),
          R.c([M.a], t.prototype, "OnDragEnd", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ms = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnDragStart = function(e) {
            Qu.DragDropManager.StartDrag({
              type: "chatroomgroup",
              group: this.props.chat
            });
          }),
          (t.prototype.OnDragEnd = function(e) {
            Qu.DragDropManager.EndDrag();
          }),
          (t.prototype.render = function() {
            var e = "QuickAccessChat",
              t = null,
              n = Yo.SettingsStore.FriendsSettings.bCompactQuickAccess;
            return (
              this.props.chat.HasUnreadChatMessage &&
                (t = ve.createElement(na, { group: this.props.chat })),
              this.props.className && (e += " " + this.props.className),
              ve.createElement(
                "div",
                {
                  className: e,
                  draggable: !0,
                  onDragStart: this.OnDragStart,
                  onDragEnd: this.OnDragEnd
                },
                ve.createElement(ss, { group: this.props.chat }),
                !n &&
                  ve.createElement(
                    "div",
                    { className: "clanName" },
                    this.props.chat.name
                  ),
                t
              )
            );
          }),
          R.c([M.a], t.prototype, "OnDragStart", null),
          R.c([M.a], t.prototype, "OnDragEnd", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    function ds(e, t, n, o, i) {
      void 0 === o && (o = !1),
        Ji(
          ve.createElement(_s, {
            browserContext: e,
            chatViewToReplace: n,
            bHideChatNameEntry: o,
            vecInvitePlayers: i
          }),
          t,
          "CreateChatDialog",
          {
            strTitle: Object(re.b)("#Chat_CreateChatRoom"),
            popupWidth: 664,
            popupHeight: 580
          }
        );
    }
    function hs(e, n, t, o) {
      var i = qu(e),
        r = Yo.ChatStore.FindNamelessChatGroupWithFriends(t);
      r
        ? Yo.UIStore.ReplaceFriendChatWithGroup(i, n, r)
        : Yo.ChatStore.CreateChatRoomGroup(i, "", t, o)
            .then(function(e) {
              Yo.UIStore.GetPerContextChatData(i);
              var t = Yo.ChatStore.GetChatRoomGroup(e);
              t && Yo.UIStore.ReplaceFriendChatWithGroup(i, n, t);
            })
            .catch(function() {
              er(
                e,
                Object(re.b)("#Generic_Error"),
                Object(re.b)("#Chat_CreateChatRoom_GenericError")
              );
            });
    }
    var _s = (function(n) {
      function e(e) {
        var t = n.call(this, e) || this;
        Yo.FriendStore.self;
        return (
          (t.state = {
            strCurrentNameEntry: "",
            strError: void 0,
            bHaveAnyFriendsSelected:
              e.vecInvitePlayers && 0 < e.vecInvitePlayers.length,
            bHaveNonBetaFriendsSelected: !1,
            bCreateInFlight: !1
          }),
          t
        );
      }
      return (
        R.d(e, n),
        (e.prototype.HandleTextEntry = function(e) {
          this.setState({ strCurrentNameEntry: e.target.value });
        }),
        (e.prototype.OnFriendPickerRef = function(e) {
          this.m_friendPicker = e;
        }),
        (e.prototype.OnFriendListSelectionChanged = function() {
          var e = !1,
            t = !1;
          if (this.m_friendPicker) {
            e = 0 < this.m_friendPicker.selectedFriendCount;
            for (
              var n = function(e) {
                  if (!1 === e.is_in_beta) return (t = !0), "break";
                  void 0 === e.is_in_beta &&
                    Object(m.when)(function() {
                      return void 0 !== e.is_in_beta;
                    }, o.OnFriendListSelectionChanged);
                },
                o = this,
                i = 0,
                r = this.m_friendPicker.state.rgFriendsChosen;
              i < r.length;
              i++
            ) {
              if ("break" === n(r[i])) break;
            }
          }
          (e == this.state.bHaveAnyFriendsSelected &&
            t == this.state.bHaveNonBetaFriendsSelected) ||
            this.setState({
              bHaveAnyFriendsSelected: e,
              bHaveNonBetaFriendsSelected: t
            });
        }),
        (e.prototype.HandleSubmit = function(e) {
          var t = this;
          if ((e && e.preventDefault(), !this.state.bCreateInFlight)) {
            var n = Yu(e);
            this.setState(function(e) {
              return (
                e.bCreateInFlight || t.InternalDoSubmit(n),
                { bCreateInFlight: !0 }
              );
            });
          }
        }),
        (e.prototype.InternalDoSubmit = function(e) {
          var t = this,
            n = [];
          this.m_friendPicker &&
            (n = this.m_friendPicker.state.rgFriendsChosen.map(function(e) {
              return e.persona.m_steamid.ConvertTo64BitString();
            }));
          var o = this.props.chatViewToReplace;
          if (o) {
            var i = new ut(this.props.chatViewToReplace.chat.accountid_partner);
            return (
              n.push(i.persona.m_steamid.ConvertTo64BitString()),
              hs(e, o, n),
              void this.props.closeModal()
            );
          }
          var r = this.props.bHideChatNameEntry
            ? ""
            : this.state.strCurrentNameEntry;
          Yo.ChatStore.CreateChatRoomGroup(
            this.props.browserContext,
            r,
            n,
            this.props.creationOptions
          )
            .then(function(e) {
              t.props.closeModal();
            })
            .catch(function() {
              t.setState({
                strError: Object(re.b)("#Chat_CreateChatRoom_GenericError"),
                bCreateInFlight: !1
              });
            });
        }),
        (e.prototype.IsChatRoomNameValid = function() {
          return 0 < this.state.strCurrentNameEntry.length;
        }),
        (e.prototype.render = function() {
          var e = this.props.chatViewToReplace
              ? this.props.chatViewToReplace.chat.chat_partner
              : null,
            t = Object(re.b)("#Chat_CreateChatRoom_Button"),
            n = new Set();
          this.props.chatViewToReplace &&
            n.add(this.props.chatViewToReplace.chat.accountid_partner);
          var o = !1;
          this.state.bCreateInFlight
            ? ((o = !1),
              (t = Object(re.b)("#GroupSettings_Permissions_Saving")))
            : e
              ? (o = this.state.bHaveAnyFriendsSelected)
              : ((o =
                  this.IsChatRoomNameValid() ||
                  this.state.bHaveAnyFriendsSelected),
                this.IsChatRoomNameValid() &&
                !this.state.bHaveAnyFriendsSelected
                  ? (t = Object(re.b)("#Chat_CreateChatRoom_Button"))
                  : this.state.bHaveAnyFriendsSelected &&
                    !this.IsChatRoomNameValid()
                    ? (t = Object(re.b)("#Chat_CreateChatRoom_InviteFriends"))
                    : this.state.bHaveAnyFriendsSelected &&
                      this.IsChatRoomNameValid() &&
                      (t = Object(re.b)(
                        "#Chat_CreateChatRoom_Button_wFriends"
                      )));
          var i =
            this.props.strTitle ||
            (e
              ? Object(re.b)("#Chat_CreateChatRoom_InviteFriends")
              : Object(re.b)("#Chat_CreateChatRoom"));
          return ve.createElement(
            Ki,
            { onEscKeypress: this.props.closeModal },
            ve.createElement(
              Oi,
              {
                classNameContent: "CreateChatDialog",
                onSubmit: this.HandleSubmit
              },
              ve.createElement(mi, null, i),
              ve.createElement(
                fi,
                null,
                e &&
                  ve.createElement(
                    _i,
                    null,
                    ve.createElement(
                      "span",
                      null,
                      Object(re.b)("#Chat_CreateChatRoom_With"),
                      ve.createElement(
                        "span",
                        { className: "DialogHighlight" },
                        Object(re.b)("#Chat_CreateChatRoom_You")
                      ),
                      Object(re.b)("#Chat_CreateChatRoom_And"),
                      ve.createElement(
                        "span",
                        { className: "DialogHighlight" },
                        e.display_name
                      )
                    )
                  ),
                this.state.strError &&
                  ve.createElement(
                    _i,
                    { className: "nicknameError" },
                    this.state.strError
                  ),
                !this.props.bHideChatNameEntry &&
                  ve.createElement(Gi, {
                    type: "text",
                    label: Object(re.b)("#Chat_Settings_Room_Name"),
                    className: "nicknameInput",
                    value: this.state.strCurrentNameEntry,
                    onChange: this.HandleTextEntry,
                    autoFocus: !0
                  }),
                ve.createElement(
                  _i,
                  {
                    className:
                      "CreateChat_NonBetaFriendsWarning " +
                      (Yo.IsInBeta() ? "" : " Released") +
                      (this.state.bHaveNonBetaFriendsSelected ? " Active" : "")
                  },
                  ve.createElement(fs, null),
                  Object(re.b)(
                    Yo.IsInBeta()
                      ? "#Chat_InviteFriend_SomeUnavailable"
                      : "#Chat_InviteFriend_SomeUnavailable_Released"
                  )
                ),
                ve.createElement(ir, {
                  ref: this.OnFriendPickerRef,
                  label: Object(re.b)("#Chat_DropToInviteGroup"),
                  eSort: 1,
                  setExcludedFriends: n,
                  autoFocus: this.props.bHideChatNameEntry,
                  onFriendSelected: this.OnFriendListSelectionChanged,
                  onFriendRemoved: this.OnFriendListSelectionChanged,
                  rgSelectedFriends: this.props.vecInvitePlayers,
                  chosenFriendComponent: gs
                })
              ),
              ve.createElement(
                di,
                null,
                ve.createElement(Ti, {
                  strOKText: t,
                  onCancel: this.props.closeModal,
                  bOKDisabled: !o
                })
              )
            )
          );
        }),
        R.c([M.a], e.prototype, "HandleTextEntry", null),
        R.c([M.a], e.prototype, "OnFriendPickerRef", null),
        R.c([M.a], e.prototype, "OnFriendListSelectionChanged", null),
        R.c([M.a], e.prototype, "HandleSubmit", null),
        (e = R.c([Hi.observer], e))
      );
    })(ve.Component);
    function fs() {
      return ve.createElement(
        "div",
        {
          className: "FriendPicker_InvitedFriend_NotInBetaWarning",
          title: Object(re.b)(
            Yo.IsInBeta()
              ? "#Chat_InviteFriend_SomeUnavailable"
              : "#Chat_InviteFriend_SomeUnavailable_Released"
          )
        },
        "!"
      );
    }
    var gs = Object(Hi.observer)(function(e) {
        var t = e.friend.is_in_beta || void 0 === e.friend.is_in_beta;
        return ve.createElement(
          ve.Fragment,
          null,
          ve.createElement(
            Xs,
            { friend: e.friend, context: null },
            ve.createElement(
              "div",
              {
                className:
                  "FriendPicker_ChosenFriend" +
                  (t ? "" : " FriendPicker_InvitedFriendNotInBeta"),
                onClick: function() {
                  e.onClick(e.friend);
                }
              },
              !t && ve.createElement(fs, null),
              ve.createElement("span", null, e.friend.display_name),
              ve.createElement(Qo.fb, null)
            )
          )
        );
      }),
      bs = (function() {
        function e() {
          this.m_mapHovers = new WeakMap();
        }
        return (
          (e.prototype.GetHover = function(e) {
            var t = this.m_mapHovers.get(e);
            return t || ((t = new Ss(e)), this.m_mapHovers.set(e, t)), t;
          }),
          e
        );
      })(),
      vs = (function() {
        function e() {}
        return R.c([m.observable], e.prototype, "visible", void 0), e;
      })(),
      Ss = (function() {
        function p(e) {
          (this.m_bLoadingData = !1), (this.m_friend = e);
        }
        return (
          Object.defineProperty(p.prototype, "friend", {
            get: function() {
              return this.m_friend;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(p.prototype, "persona", {
            get: function() {
              return this.m_friend.persona;
            },
            enumerable: !0,
            configurable: !0
          }),
          (p.prototype.GetInstance = function(e, t) {
            if ((void 0 === t && (t = !1), this.m_rgInstances))
              for (var n = 0, o = this.m_rgInstances; n < o.length; n++) {
                if ((i = o[n]).m_OwningElement == e) return i;
              }
            var i;
            return t
              ? (((i = new vs()).m_OwningElement = e),
                (i.visible = !1),
                (i.hover = this).m_rgInstances
                  ? this.m_rgInstances.push(i)
                  : (this.m_rgInstances = [i]),
                i)
              : null;
          }),
          (p.prototype.ShowPopup = function(e, t, n) {
            var o = this;
            (t.visible = !0),
              t.m_OwningElement.ownerDocument.defaultView.setTimeout(
                function() {
                  t.visible &&
                    (t.popupWindow || (t.popupWindow = new ac(e, t, n)),
                    t.popupWindow.Show());
                },
                250
              ),
              (t.m_BlurHandler = function() {
                o.HideByElement(t.m_OwningElement);
              }),
              t.m_OwningElement.ownerDocument.defaultView.addEventListener(
                "blur",
                t.m_BlurHandler
              ),
              (t.m_VisibilityHandler = function(e) {
                "hidden" === e.target.visibilityState &&
                  o.HideByElement(t.m_OwningElement);
              }),
              t.m_OwningElement.ownerDocument.addEventListener(
                "visibilitychange",
                t.m_VisibilityHandler
              );
          }),
          (p.prototype.Show = function(e, t) {
            var n = this,
              o = e.currentTarget.ownerDocument.defaultView.innerWidth < 500;
            if ((!o || G.a.IN_CLIENT) && !Qu.DragDropManager.BInDrag()) {
              this.EnsureCommunityDataLoaded();
              var i = e.currentTarget,
                r = zu(null, e),
                a = this.GetInstance(i, !0);
              a.context = t;
              var s = !1;
              if (G.a.IN_CLIENT) {
                var c = Yo.UIStore.GetPerContextChatData(r);
                s = c.BUsePopups();
              }
              if (o && s) this.ShowPopup(i, a, r);
              else {
                var l = ve.createElement(ic, {
                  hoverInstance: a,
                  target: i,
                  onNoSpace: function() {
                    s && n.ShowPopup(i, a, r);
                  }
                });
                p.m_embeddedElements
                  .ShowElementDelayed(i.ownerDocument, 250, l, a)
                  .then(function() {
                    a.visible = !0;
                  });
              }
            }
          }),
          (p.prototype.Hide = function(e) {
            this.HideByElement(e.currentTarget);
          }),
          (p.prototype.HideByElement = function(e) {
            var t = this.GetInstance(e);
            if (t) {
              if (
                ((t.visible = !1),
                t.m_BlurHandler &&
                  (e.ownerDocument.defaultView.removeEventListener(
                    "blur",
                    t.m_BlurHandler
                  ),
                  (t.m_BlurHandler = null)),
                t.m_VisibilityHandler &&
                  (e.ownerDocument.removeEventListener(
                    "visibilitychange",
                    t.m_VisibilityHandler
                  ),
                  (t.m_VisibilityHandler = null)),
                t.popupWindow && !t.popupWindow.BIsClosed())
              ) {
                var n = t.popupWindow,
                  o = function() {
                    n.BIsClosed() || n.Close();
                  };
                e.ownerDocument.defaultView.addEventListener("unload", o),
                  e.ownerDocument.defaultView.setTimeout(function() {
                    e.ownerDocument.defaultView.removeEventListener(
                      "unload",
                      o
                    ),
                      o();
                  }, 100);
              } else
                p.m_embeddedElements.HideElement(
                  t.m_OwningElement.ownerDocument,
                  t,
                  500
                );
              w.c(this.m_rgInstances, t);
            }
          }),
          (p.prototype.OnContextMenu = function(e, t) {
            var n = Er(zu(null, t), e, this.m_friend, t);
            return this.Hide(t), n;
          }),
          (p.prototype.HideAllInstances = function() {
            for (var e = 0, t = this.m_rgInstances.slice(); e < t.length; e++) {
              var n = t[e];
              this.HideByElement(n.m_OwningElement);
            }
          }),
          Object.defineProperty(p.prototype, "community_data_ready", {
            get: function() {
              return void 0 !== this.m_communityData;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(p.prototype, "player_level", {
            get: function() {
              return this.m_communityData && this.m_communityData.level;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(p.prototype, "player_level_class", {
            get: function() {
              return this.m_communityData && this.m_communityData.level_class;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(p.prototype, "player_badge", {
            get: function() {
              return (
                this.m_communityData && this.m_communityData.favorite_badge
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(p.prototype, "player_in_game", {
            get: function() {
              return this.m_communityData && this.m_communityData.in_game;
            },
            enumerable: !0,
            configurable: !0
          }),
          (p.prototype.EnsureCommunityDataLoaded = function() {
            var n = this;
            void 0 !== this.m_communityData ||
              this.m_bLoadingData ||
              ((this.m_bLoadingData = !0),
              C.a
                .get(
                  G.a.CHAT_BASE_URL +
                    "miniprofile/" +
                    this.m_friend.accountid +
                    "/json"
                )
                .then(function(e) {
                  var t = e.data;
                  t.level && t.level_class && (n.m_communityData = t),
                    (n.m_bLoadingData = !1);
                })
                .catch(function(e) {
                  n.m_bLoadingData = !1;
                }));
          }),
          (p.m_embeddedElements = new $o.a("CFriendHoverContainer")),
          R.c([m.observable], p.prototype, "m_communityData", void 0),
          R.c([M.a], p.prototype, "Show", null),
          R.c([M.a], p.prototype, "Hide", null),
          R.c([M.a], p.prototype, "OnContextMenu", null),
          p
        );
      })();
    ve.Component;
    var ys = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_rgSelectOptions = [
              { label: "Option #1", data: 1 },
              { label: "Option #2", data: 2 },
              {
                label: ve.createElement(
                  "span",
                  null,
                  "Option ",
                  ve.createElement("u", null, "#3")
                ),
                data: 3
              }
            ]),
            (t.state = {
              inputText: "Input text",
              checkboxChecked: !0,
              selectedOption: void 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnInputChanged = function(e) {
            this.setState({ inputText: e.currentTarget.value });
          }),
          (e.prototype.OnToggled = function(e) {
            this.setState({ checkboxChecked: e });
          }),
          (e.prototype.OnSelectDropDownChanged = function(e) {
            this.setState({ selectedOption: e.data });
          }),
          (e.prototype.OnSubmit = function() {
            alert(JSON.stringify(this.state));
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                Ii,
                { className: "DialogBody", onSubmit: this.OnSubmit },
                ve.createElement(
                  "div",
                  { className: "_FixedHeight" },
                  ve.createElement(_i, null, "Text input"),
                  ve.createElement(Gi, {
                    label: "INPUT TITLE",
                    value: this.state.inputText,
                    onChange: this.OnInputChanged
                  }),
                  ve.createElement(Gi, {
                    label: "READ ONLY",
                    value: "You can't change this",
                    disabled: !0
                  }),
                  ve.createElement(Fi, {
                    label: "Drop down",
                    rgOptions: this.m_rgSelectOptions,
                    strDefaultLabel: "Select one...",
                    selectedOption: this.state.selectedOption,
                    onChange: this.OnSelectDropDownChanged
                  }),
                  ve.createElement(Ai, {
                    label: "On Off Toggle",
                    checked: this.state.checkboxChecked,
                    onChange: this.OnToggled
                  }),
                  ve.createElement(
                    "div",
                    { style: { marginBottom: "20px" } },
                    ve.createElement("span", null, "Checkbox:"),
                    ve.createElement(
                      "div",
                      {
                        style: {
                          display: "inline-block",
                          marginLeft: "20px",
                          verticalAlign: "middle"
                        }
                      },
                      ve.createElement(Li, null)
                    )
                  ),
                  ve.createElement(
                    "div",
                    { style: { marginBottom: "20px" } },
                    ve.createElement("span", null, "Round checkbox:"),
                    ve.createElement(
                      "div",
                      {
                        style: {
                          display: "inline-block",
                          marginLeft: "20px",
                          verticalAlign: "middle"
                        }
                      },
                      ve.createElement(ki, null)
                    )
                  ),
                  ve.createElement(Pi, { min: 0, max: 100, value: 25 }),
                  ve.createElement(
                    "div",
                    { style: { marginBottom: "20px" } },
                    ve.createElement(
                      Si,
                      null,
                      ve.createElement(Ei, null, "PrimaryButton"),
                      ve.createElement(Mi, null, "TextButton"),
                      ve.createElement(wi, { svgicon: Qo.h }, "Button w/ Icon")
                    )
                  ),
                  ve.createElement(
                    vi,
                    null,
                    ve.createElement(Gi, {
                      label: "Left input",
                      placeholder: "Placeholder"
                    }),
                    ve.createElement(Gi, {
                      label: "Right input",
                      placeholder: "Placeholder"
                    })
                  ),
                  ve.createElement(Ai, {
                    label: "Another toggle",
                    description:
                      "This one has a longer description with more details."
                  })
                )
              ),
              ve.createElement(
                di,
                null,
                ve.createElement(Ti, { onCancel: this.props.onCancel })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnInputChanged", null),
          R.c([M.a], e.prototype, "OnToggled", null),
          R.c([M.a], e.prototype, "OnSelectDropDownChanged", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          e
        );
      })(Vi),
      Cs = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e.rgDragDropOptions = [
              ve.createElement(
                ei,
                { key: "key1", id: "key1" },
                ve.createElement(Ai, { label: "Draggable toggle #1" })
              ),
              ve.createElement(
                ei,
                { key: "key2", id: "key2" },
                ve.createElement(Ai, {
                  ref: e.RefTest,
                  label: "Draggable toggle #2"
                })
              ),
              ve.createElement(
                ei,
                { key: "key3", id: "key3" },
                ve.createElement(Ai, { label: "Draggable toggle #3" })
              ),
              ve.createElement(
                ei,
                { key: "keyz", id: "keyz" },
                ve.createElement(Is, null)
              ),
              ve.createElement(
                ei,
                { key: "key4", id: "key4" },
                ve.createElement(Ai, { label: "Draggable toggle #4" })
              )
            ]),
            e
          );
        }
        return (
          R.d(e, t),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnSubmit = function() {
            alert(JSON.stringify(this.state));
          }),
          (e.prototype.RefTest = function(e) {
            console.log("Got ref", e);
          }),
          (e.prototype.OnListReordered = function(e, t) {
            w.e(this.rgDragDropOptions, e, t), this.forceUpdate();
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              Ii,
              { className: "DialogBody", onSubmit: this.OnSubmit },
              ve.createElement(
                ti,
                { onReorder: this.OnListReordered },
                this.rgDragDropOptions
              )
            );
          }),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "RefTest", null),
          R.c([M.a], e.prototype, "OnListReordered", null),
          e
        );
      })(Vi),
      Is = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { cSeconds: 0 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidMount = function() {
            var e = this;
            this.m_iInterval = window.setInterval(function() {
              e.setState(function(e) {
                return { cSeconds: e.cSeconds + 1 };
              });
            }, 1e3);
          }),
          (e.prototype.componentWillUnmount = function() {
            window.clearInterval(this.m_iInterval);
          }),
          (e.prototype.render = function() {
            return ve.createElement(Gi, {
              value: this.state.cSeconds,
              disabled: !0,
              label: "COUNTER"
            });
          }),
          e
        );
      })(ve.Component),
      Os = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnCMToggled = function(e) {
            e
              ? window.localStorage.setItem(L, "true")
              : window.localStorage.removeItem(L),
              this.forceUpdate();
          }),
          (t.prototype.OnStickyContextMenuToggle = function(e) {
            Object(mr.i)(e), this.forceUpdate();
          }),
          (t.prototype.OnMobxDevToolsToggle = function(e) {
            !(function(e) {
              e
                ? window.sessionStorage.setItem(lp, "true")
                : window.sessionStorage.removeItem(lp);
              pp.bEnabled = e;
            })(e),
              this.forceUpdate();
          }),
          (t.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                fi,
                null,
                ve.createElement(Ai, {
                  label: '"Sticky" Context Menus',
                  description:
                    "Context menus will stay open to allow inspecting CSS",
                  checked: Object(mr.h)(),
                  onChange: this.OnStickyContextMenuToggle
                }),
                ve.createElement(Ai, {
                  label: "Enable Mobx Dev Tools",
                  description:
                    "Display mobx devtools in the top right of each window",
                  checked: up(),
                  onChange: this.OnMobxDevToolsToggle
                }),
                ve.createElement(Ai, {
                  label: "Log all CM Traffic",
                  description:
                    "All messages to and from the steam servers will be logged to the browser console (F12)",
                  checked:
                    window.localStorage &&
                    "true" == window.localStorage.getItem(L),
                  onChange: this.OnCMToggled
                })
              )
            );
          }),
          R.c([M.a], t.prototype, "OnCMToggled", null),
          R.c([M.a], t.prototype, "OnStickyContextMenuToggle", null),
          R.c([M.a], t.prototype, "OnMobxDevToolsToggle", null),
          t
        );
      })(Vi),
      Es = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { searchString: "" }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OKToSwitchAway = function() {
            return !0;
          }),
          (e.prototype.OnSearchInput = function(e) {
            e.currentTarget.value != this.state.searchString &&
              this.setState({ searchString: e.currentTarget.value });
          }),
          (e.prototype.render = function() {
            var e,
              t = new vs();
            e =
              "" == this.state.searchString
                ? Yo.FriendStore.self.steamid.GetAccountID()
                : this.state.searchString;
            var n = new Ss(Yo.FriendStore.GetPlayer(+e));
            return (
              (t.hover = n),
              (t.visible = !0),
              n.EnsureCommunityDataLoaded(),
              ve.createElement(
                Ii,
                { className: "DialogBody" },
                ve.createElement(
                  vi,
                  null,
                  ve.createElement(
                    "div",
                    { className: "throbberHalf" },
                    ve.createElement(hi, null, "Old Throbber"),
                    ve.createElement(
                      "div",
                      { className: "LoadingWrapper" },
                      ve.createElement(
                        "div",
                        { className: "LoadingThrobber" },
                        ve.createElement("div", { className: "Bar Bar1" }),
                        ve.createElement("div", { className: "Bar Bar2" }),
                        ve.createElement("div", { className: "Bar Bar3" })
                      ),
                      ve.createElement("div", { className: "LoadingText" })
                    )
                  ),
                  ve.createElement(
                    "div",
                    { className: "throbberHalf" },
                    ve.createElement(hi, null, "New Throbber (W.I.P.)"),
                    ve.createElement(
                      "div",
                      { className: "displayRow" },
                      ve.createElement(Ea, { size: "large", string: "Large" }),
                      ve.createElement(Ea, {
                        size: "medium",
                        string: "Medium"
                      }),
                      ve.createElement(Ea, { size: "small", string: "Small" })
                    )
                  )
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(hi, null, "Miniprofile Tester:"),
                  ve.createElement(
                    "form",
                    null,
                    ve.createElement("input", {
                      className: "friendSearchInput",
                      type: "text",
                      name: "memberlistSearch",
                      placeholder: "Enter SteamID",
                      value: this.state.searchString,
                      onInput: this.OnSearchInput,
                      autoComplete: "off"
                    })
                  ),
                  ve.createElement(
                    "div",
                    { className: "fakeMiniProfile" },
                    ve.createElement(rc, { hoverInstance: t })
                  ),
                  ve.createElement(Qs, {
                    friend: Yo.FriendStore.GetPlayer(+e),
                    context: null
                  })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnSearchInput", null),
          e
        );
      })(Vi);
    function ws(e) {
      var t = "offline";
      return (
        e.is_ingame
          ? (t = "ingame")
          : e.m_broadcastAccountId && IsFeatureBroadcastEnabled()
            ? (t = "watchingbroadcast")
            : e.is_online && (t = "online"),
        e.is_awayOrSnooze && (t += " awayOrSnooze"),
        t
      );
    }
    var Ms = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.PostDate = function(e) {
            return Yo.RTime32ToDate(e).toLocaleDateString(
              re.a.GetPreferredLocales(),
              {
                weekday: "long",
                year: "numeric",
                month: "long",
                day: "numeric",
                hour: "numeric",
                minute: "numeric"
              }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1532044800)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.d)(
                    "#changeLog_UpdateItem71",
                    ve.createElement("b", null, Object(re.b)("#changeLog_Note"))
                  )
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1531443600)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem68")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem69")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem70")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1531263600)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem47")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem58")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem59")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem60")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem48")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem49")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem63")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem50")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem51")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem53")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem52")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem61")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem62")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem64")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem65")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem66")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem67")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1531162800)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem54")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem55")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1530298800)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem56")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem57")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1530126e3)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItemSubHeader" },
                  Object(re.b)("#changeLog_UpdateItem_Permissions")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem39")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem40")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem41")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItemSubHeader" },
                  Object(re.b)("#changeLog_UpdateSubHeader_General")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem45")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem30"),
                  ve.createElement(
                    "div",
                    { style: { marginTop: "4px" } },
                    ve.createElement(
                      "span",
                      { style: { fontWeight: "bold", fontStyle: "italic" } },
                      Object(re.b)("#changeLog_Note")
                    ),
                    ve.createElement(
                      "span",
                      { style: { fontStyle: "italic" } },
                      Object(re.b)("#changeLog_UpdateItem30_Note")
                    )
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem29")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem25")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem26")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem38")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem31")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem42")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem28")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem27")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem33")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem32")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem34"),
                  ve.createElement(
                    "div",
                    { style: { marginTop: "4px" } },
                    ve.createElement(
                      "span",
                      { style: { fontWeight: "bold", fontStyle: "italic" } },
                      Object(re.b)("#changeLog_Note")
                    ),
                    ve.createElement(
                      "span",
                      { style: { fontStyle: "italic" } },
                      Object(re.b)("#changeLog_UpdateItem34_Note")
                    )
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem35")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem36")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem37")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem43")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem44")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1529528400)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem20")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem21")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem22")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem23")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem24")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1529456400)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem17")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem18")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem15")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem16")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem12")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem13")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem14")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem19")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1529017200)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItemSubHeader" },
                  Object(re.b)("#changeLog_UpdateSubHeader_General")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem11")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItemSubHeader" },
                  Object(re.b)("#changeLog_UpdateSubHeader_Linux")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem10")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem09")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle"),
                " - #2"
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1528938e3)
              ),
              ve.createElement(
                "div",
                { className: "changeLogExtra" },
                Object(re.b)("#changeLog_UpdateExtraInfo01")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem02")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem03")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem04")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem05")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem06")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem07")
                ),
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem08")
                )
              ),
              ve.createElement(
                "div",
                { className: "changeLogTitle" },
                Object(re.b)("#changeLog_GenericUpdateTitle")
              ),
              ve.createElement(
                "div",
                { className: "changeLogDate" },
                this.PostDate(1528923600)
              ),
              ve.createElement(
                "div",
                { className: "changeLogDescription" },
                ve.createElement(
                  "div",
                  { className: "changeLogItem" },
                  Object(re.b)("#changeLog_UpdateItem01")
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "PostDate", null),
          e
        );
      })(ve.Component),
      Ds = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            return ve.createElement(
              Ki,
              { onEscKeypress: this.props.closeModal },
              ve.createElement(
                Ci,
                { className: "changeLogPage" },
                ve.createElement(mi, null, Object(re.b)("#changeLog_Title")),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    _i,
                    null,
                    Object(re.b)("#changeLog_SubTitle")
                  ),
                  ve.createElement(
                    gi,
                    { className: "changeLogDetails" },
                    ve.createElement(Ms, null)
                  )
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(
                    Ei,
                    { onClick: this.props.closeModal },
                    Object(re.b)("#Button_Close")
                  )
                )
              )
            );
          }),
          e
        );
      })(ve.Component),
      Ts = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = this.props.chat.VoiceChatStore.HasBeenAttemptingOverTwoSeconds(),
              t = this.props.chat.VoiceChatStore.IsAttemptingReconnect();
            return ve.createElement(
              "div",
              { className: "connectionStatusLabels" },
              e &&
                ve.createElement(
                  "div",
                  { className: "connectionStatus" },
                  ve.createElement(
                    "a",
                    {
                      title: Object(re.b)("#VoiceChatConnectingHelp"),
                      className: "connectionStatus",
                      target: "_blank",
                      href:
                        "https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"
                    },
                    Object(re.b)("#VoiceChatConnecting")
                  )
                ),
              t &&
                ve.createElement(
                  "div",
                  { className: "connectionStatus" },
                  ve.createElement(
                    "a",
                    {
                      className: "connectionStatus",
                      target: "_blank",
                      href:
                        "https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"
                    },
                    Object(re.b)("#VoiceChatReconnecting")
                  )
                )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Gs = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.chats.GetActiveVoiceChat();
            return this.props.chats.VoiceChat.IsAnyVoiceActive() && e
              ? ve.createElement(Rs, {
                  chat: e,
                  name: this.props.chats.GetActiveVoiceChannelName(),
                  nostatus: !1
                })
              : ve.createElement(
                  "div",
                  { className: "activeVoiceControls" },
                  ve.createElement(
                    "div",
                    { className: "buttonsContainer" },
                    ve.createElement(
                      "div",
                      { className: "activeVoiceFlexBox" },
                      ve.createElement(
                        "div",
                        { className: "activeVoiceLabels" },
                        ve.createElement(
                          "div",
                          { className: "activeVoiceHeader" },
                          Object(re.b)("#ActiveVoiceChat")
                        ),
                        ve.createElement("div", {
                          className: "activeVoiceName"
                        })
                      ),
                      ve.createElement(
                        "div",
                        { className: "activeVoiceButtons" },
                        ve.createElement(Ns, null),
                        ve.createElement(Ls, null),
                        ve.createElement("div", {
                          className: "activeVoiceButtonsSpacer"
                        }),
                        ve.createElement(ks, null),
                        ve.createElement("div", {
                          className: "activeVoiceButtonsSpacerAfter"
                        })
                      )
                    )
                  )
                );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Rs = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.ActivateActiveVoiceChat = function(e) {
            if (this.props.chat instanceof Tt) {
              var t = Yo.ChatStore.GetChatRoomGroup(
                this.props.chat.GetParentGroupID()
              );
              if (t)
                return void Yo.UIStore.ShowAndOrActivateChatRoomGroup(
                  zu(this, e),
                  t,
                  !0
                );
            }
            Yo.UIStore.ShowAndOrActivateChat(zu(this, e), this.props.chat, !0);
          }),
          (e.prototype.render = function() {
            var e = Yo.VoiceStore.GetPushToTalkEnabled(),
              t = Yo.VoiceStore.GetPushToMuteEnabled(),
              n = Yo.VoiceStore.GetPushToTalkVoiceStateEnabled(),
              o = Yo.VoiceStore.GetPushToTalkHotKeyDisplayString(),
              i = "";
            return (
              (e || t) && (i += " pushToTalkEnabled"),
              n && (i += " pushToTalkKeyDown"),
              ve.createElement(
                "div",
                { className: "activeVoiceControls" + i },
                ve.createElement(
                  "div",
                  { className: "buttonsContainer" },
                  ve.createElement(
                    "div",
                    { className: "activeVoiceFlexBox" },
                    ve.createElement(
                      "div",
                      { className: "activeVoiceLabels" },
                      ve.createElement(
                        "div",
                        { className: "activeVoiceHeader" },
                        Object(re.b)("#ActiveVoiceChat")
                      ),
                      ve.createElement(
                        "div",
                        {
                          className: "activeVoiceName",
                          onClick: this.ActivateActiveVoiceChat
                        },
                        this.props.name
                      )
                    ),
                    ve.createElement(
                      "div",
                      { className: "activeVoiceButtons" },
                      ve.createElement(Ns, null),
                      ve.createElement(Ls, null),
                      ve.createElement("div", {
                        className: "activeVoiceButtonsSpacer"
                      }),
                      ve.createElement(ks, null),
                      ve.createElement("div", {
                        className: "activeVoiceButtonsSpacerAfter"
                      })
                    )
                  ),
                  !this.props.nostatus &&
                    ve.createElement(Ts, { chat: this.props.chat })
                ),
                (e || t) &&
                  ve.createElement(
                    "div",
                    { className: "activeVoicePushToTalk" + i },
                    Object(re.b)(
                      t ? "#ActiveVoicePushToMute" : "#ActiveVoicePushToTalk",
                      o
                    )
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "ActivateActiveVoiceChat", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ns = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ToggleMicrophone = function(e) {
            Yo.VoiceStore.IsMicMuted() &&
              Yo.VoiceStore.IsOutputMuted() &&
              Yo.VoiceStore.ToggleOutputMuting(),
              Yo.VoiceStore.ToggleMicMuting(),
              e.stopPropagation();
          }),
          (t.prototype.render = function() {
            var e = Yo.VoiceStore.BNoMicAvailableForSession(),
              t = Yo.VoiceStore.BHasSampleRateTooHighInBrowser(),
              n = Yo.VoiceStore.IsMicMuted(),
              o = "VoiceControlPanelButton ToggleMicrophoneButton",
              i = "";
            return (
              (i = n
                ? Object(re.b)("#VoiceChat_UnmuteMic")
                : Object(re.b)("#VoiceChat_MuteMic")),
              e &&
                ((o += " NoMicrophone"),
                (i = t
                  ? Object(re.b)(
                      "#VoiceChat_ChromeSampleRateTooHighMicExplainer"
                    )
                  : Object(re.b)("#VoiceChat_DeniedMicrophoneAccess"))),
              n && (o += " disabled"),
              ve.createElement(
                "button",
                { className: o, onClick: this.ToggleMicrophone, title: i },
                ve.createElement(Qo.B, null),
                ve.createElement(Qo.B, { className: "SVGIcon_Shadow" })
              )
            );
          }),
          R.c([M.a], t.prototype, "ToggleMicrophone", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Ls = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ToggleVoiceOutput = function(e) {
            Yo.VoiceStore.IsOutputMuted() == Yo.VoiceStore.IsMicMuted() &&
              Yo.VoiceStore.ToggleMicMuting(),
              Yo.VoiceStore.ToggleOutputMuting(),
              e.stopPropagation();
          }),
          (t.prototype.render = function() {
            var e = Yo.VoiceStore.IsOutputMuted(),
              t = "VoiceControlPanelButton ToggleVoiceOutputButton";
            e && (t += " disabled");
            var n = "";
            return (
              (n = e
                ? Object(re.b)("#VoiceChat_UnmuteSpeaker")
                : Object(re.b)("#VoiceChat_MuteSpeaker")),
              ve.createElement(
                "button",
                { className: t, onClick: this.ToggleVoiceOutput, title: n },
                ve.createElement(Qo.s, null),
                ve.createElement(Qo.s, { className: "SVGIcon_Shadow" })
              )
            );
          }),
          R.c([M.a], t.prototype, "ToggleVoiceOutput", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ks = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.EndVoiceChat = function(e) {
            Yo.VoiceStore.OnUserEndVoiceChat(), e.stopPropagation();
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              "button",
              {
                className: "VoiceControlPanelButton chatEndVoiceChat",
                onClick: this.EndVoiceChat,
                title: Object(re.b)("#VoiceChat_Leave")
              },
              ve.createElement(Qo.cb, null)
            );
          }),
          R.c([M.a], t.prototype, "EndVoiceChat", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      As = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              searchString: "",
              bFriendTabSearch: !1,
              bViewingIncomingInvites: !1,
              tabLabelWidth: 0
            }),
            (t.m_tabLabelWidth = -1),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnSearchInputRef = function(e) {
            this.m_refSearchInput = e;
          }),
          (e.prototype.StartSearchOnKeyPress = function(e) {
            var t = this.state.bFriendTabSearch;
            this.setState({ bFriendTabSearch: !0 }),
              t && this.m_refSearchInput && this.m_refSearchInput.focus();
          }),
          (e.prototype.OnSearchInput = function(e) {
            e.currentTarget.value != this.state.searchString &&
              this.setState({ searchString: e.currentTarget.value });
          }),
          (e.prototype.OnSearchSubmit = function(e) {
            e.preventDefault();
            var t = this.GetNormalizedSearchString();
            if (t && t.length) {
              var n = this.props.friends.FriendGroupStore.all_friends.GetMembersMatchingSearch(
                t
              );
              n.length && n[0].OpenChatDialog(zu(this, e));
            }
            this.setState({ searchString: "" });
          }),
          (e.prototype.OnSearchSelection = function() {
            this.setState({ searchString: "" });
          }),
          (e.prototype.OnSearchKeyDown = function(e) {
            27 == e.keyCode &&
              (this.setState({ searchString: "" }),
              e.preventDefault(),
              e.currentTarget.blur(),
              this.setState({ bFriendTabSearch: !1 }),
              this.CollapseTabLabel());
          }),
          (e.prototype.OnClearSearch = function() {
            this.setState({ searchString: "" }), this.OnTabSearchClick();
          }),
          (e.prototype.OnSettingsClick = function(e) {
            za(zu(this, e), e.currentTarget.ownerDocument.defaultView);
          }),
          (e.prototype.ToggleCollapseExpand = function(e) {
            Yo.UIStore.SetFriendsListCollapsed(
              zu(this, e),
              !this.props.collapsed
            );
          }),
          (e.prototype.OnDoFriendsListUpdate = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView,
              n = Qu.GetSecondsOutOfDate(),
              o = Object(re.e)(n, !0);
            Zi(
              t,
              Object(re.b)("#Friends_ConfirmUpdate_Title"),
              Object(re.b)("#Friends_ConfirmUpdate_Body", o),
              Object(re.b)("#Friends_ConfirmUpdate_Ok")
            )
              .then(function() {
                Qu.PerformFriendsUIUpdate();
              })
              .catch(function() {});
          }),
          (e.prototype.BindTabLabel = function(e) {
            (this.m_elTabLabel = e), this.UpdateWindowIcon();
          }),
          (e.prototype.UpdateWindowIcon = function() {
            if (
              this.m_elTabLabel &&
              void 0 !== this.m_elTabLabel.ownerDocument.defaultView.SteamClient
            ) {
              var e = !1;
              this.props.chats.VoiceChat.IsAnyVoiceActive() && (e = !0);
              var t =
                0 <
                this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(
                  this.props.browserContext
                ).length;
              if (
                this.m_elTabLabel &&
                null !=
                  this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window
                    .SetWindowIcon
              )
                try {
                  e
                    ? this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon(
                        "voice"
                      )
                    : t
                      ? this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon(
                          "messages"
                        )
                      : this.m_elTabLabel.ownerDocument.defaultView.SteamClient.Window.SetWindowIcon(
                          "steam"
                        );
                } catch (e) {}
            }
          }),
          (e.prototype.CollapseTabLabel = function() {
            var e = this;
            if (
              (this.m_animationTabLabelCollapse &&
                this.m_animationTabLabelCollapse.Cancel(),
              this.state.bFriendTabSearch)
            ) {
              n = 1;
              var t = this.m_tabLabelWidth;
              this.setState({ tabLabelWidth: n }, function() {
                (e.m_animationTabLabelCollapse = new ui(
                  e,
                  { tabLabelWidth: t },
                  { msDuration: 300, timing: "sine" }
                )),
                  e.m_animationTabLabelCollapse.Start();
              });
            } else {
              var n = this.m_tabLabelWidth;
              this.setState({ tabLabelWidth: n }, function() {
                (e.m_animationTabLabelCollapse = new ui(
                  e,
                  { tabLabelWidth: 1 },
                  { msDuration: 300, timing: "sine" }
                )),
                  e.m_animationTabLabelCollapse.Start();
              });
            }
          }),
          (e.prototype.OnTabSearchClick = function() {
            this.m_tabLabelWidth < 0 &&
              (this.m_tabLabelWidth = this.m_elTabLabel.clientWidth),
              this.setState({ bFriendTabSearch: !this.state.bFriendTabSearch }),
              this.CollapseTabLabel();
          }),
          (e.prototype.GetNormalizedSearchString = function() {
            return (
              this.state.searchString &&
              this.state.searchString.trim().toLocaleLowerCase()
            );
          }),
          (e.prototype.ToggleViewingIncomingInvites = function() {
            var e = this;
            this.setState(
              { bViewingIncomingInvites: !this.state.bViewingIncomingInvites },
              function() {
                e.state.bViewingIncomingInvites &&
                  (Yo.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),
                  Yo.FriendStore.ClanStore.EnsureInitialStateForClanInvites());
              }
            );
          }),
          (e.prototype.componentWillUpdate = function() {
            var e =
                0 <
                Yo.FriendStore.FriendGroupStore.incoming_invites_group
                  .member_count,
              t = 0 < Yo.FriendStore.ClanStore.clan_invites.length,
              n =
                0 <
                Yo.FriendStore.FriendGroupStore.outgoing_invites_group
                  .member_count;
            e ||
              t ||
              n ||
              !this.state.bViewingIncomingInvites ||
              this.setState({ bViewingIncomingInvites: !1 });
          }),
          (e.prototype.render = function() {
            var e = this.props.friends.self,
              t = this.GetNormalizedSearchString(),
              n =
                0 <
                Yo.FriendStore.FriendGroupStore.incoming_invites_group
                  .member_count,
              o = 0 < Yo.FriendStore.ClanStore.clan_invites.length,
              i =
                0 <
                Yo.FriendStore.FriendGroupStore.outgoing_invites_group
                  .member_count,
              r =
                Yo.FriendStore.FriendGroupStore.incoming_invites_group
                  .member_count + Yo.FriendStore.ClanStore.clan_invites.length,
              a = "friendRequestButton";
            this.state.bViewingIncomingInvites &&
              (a += " friendRequestViewActive"),
              i && 0 == r && (a += " friendRequestOutgoingOnly");
            var s = this.state.bFriendTabSearch,
              c = "friendTab socialListTab activeTab";
            s && (c += " TabSearchActive");
            var l = {};
            0 < this.state.tabLabelWidth &&
              (l.width = this.state.tabLabelWidth + "px");
            var p = !1;
            this.props.popup && (p = qu(this.props.popup) != qo);
            var u = !1,
              m = 0,
              d = !1,
              h =
                "friendListButton friendSettingsButton friendsListNeedsUpdate no-drag";
            null != Qu &&
              ((u = Qu.BNeedsUpdate()),
              (m = Qu.GetSecondsOutOfDate()) < 432e3
                ? (u = !1)
                : 604800 < m && ((h += " friendsListVeryOutOfDate"), (d = !0)));
            var _ = this.props.chats.GetActiveVoiceChat(),
              f = !1;
            (this.props.chats.VoiceChat.IsAnyVoiceActive() || _) && (f = !0),
              this.UpdateWindowIcon();
            var g = Yo.SettingsStore.FriendsSettings.bCompactFriendsList,
              b = this.props.collapsed,
              v = "friendlist";
            return (
              g && (v += " compactView"),
              u && (v += " needsUpdate"),
              b && this.props.collapsible && (v += " collapsed"),
              ve.createElement(
                "div",
                { className: v },
                ve.createElement(
                  "div",
                  { className: "friendListHeaderContainer titleBarContainer" },
                  this.props.popup &&
                    G.a.IN_CLIENT &&
                    ve.createElement(zi, {
                      hideMinMax: p,
                      popup: this.props.popup
                    }),
                  this.props.collapsible &&
                    ve.createElement(
                      "div",
                      { className: "friendListCollapse no-drag" },
                      ve.createElement(
                        "div",
                        {
                          className:
                            "friendListButton friendCollapseButton no-drag " +
                            (b ? "Collapsed" : ""),
                          onClick: this.ToggleCollapseExpand
                        },
                        ve.createElement(Qo.k, null)
                      )
                    ),
                  ve.createElement(Vs, {
                    popup: this.props.popup && this.props.popup,
                    currentUser: e
                  }),
                  ve.createElement(
                    "div",
                    { className: "friendListButtons" },
                    u &&
                      ve.createElement(
                        "div",
                        {
                          className: h,
                          onClick: this.OnDoFriendsListUpdate,
                          title: d
                            ? Object(re.b)("#Tooltip_FriendsListUpdate_VeryOld")
                            : Object(re.b)("#Tooltip_FriendsListUpdate")
                        },
                        ve.createElement(Qo.J, null)
                      ),
                    ve.createElement(
                      "div",
                      {
                        className:
                          "friendListButton friendSettingsButton no-drag",
                        onClick: this.OnSettingsClick,
                        title: Object(re.b)("#Tooltip_Settings")
                      },
                      ve.createElement(Qo.P, null)
                    )
                  ),
                  ve.createElement(
                    Xo,
                    null,
                    f &&
                      ve.createElement(
                        Jo,
                        {
                          key: "activeVoiceControls1",
                          classNames: "activevoice-anim",
                          timeout: 500
                        },
                        ve.createElement(Gs, { chats: this.props.chats })
                      )
                  ),
                  ve.createElement(cs, {
                    FavoritesStore: this.props.friends.FavoritesStore
                  }),
                  ve.createElement(
                    "div",
                    { className: "socialTabSearchContainer" },
                    ve.createElement(
                      "div",
                      { className: "socialTabContainer" },
                      ve.createElement(
                        "div",
                        { className: c },
                        ve.createElement(
                          "div",
                          {
                            className: "tabLabel",
                            style: l,
                            ref: this.BindTabLabel
                          },
                          Object(re.b)("#tab_friends")
                        ),
                        ve.createElement(
                          "div",
                          { className: "friendsTabButtonsContainer" },
                          ve.createElement(
                            "div",
                            {
                              className: "TabSearchButton",
                              onClick: s ? null : this.OnTabSearchClick
                            },
                            ve.createElement(
                              Xo,
                              { className: "tabSearchTransitionGroup" },
                              s &&
                                ve.createElement(
                                  Jo,
                                  {
                                    className: "tabSearchTransition",
                                    key: "tabSearch",
                                    classNames: "tab-search-anim",
                                    timeout: 500
                                  },
                                  ve.createElement(
                                    "div",
                                    { className: "socialSearchContainer" },
                                    ve.createElement(
                                      "form",
                                      {
                                        className:
                                          "socialInputContainer" +
                                          (s ? " SearchActive" : ""),
                                        name: "friendSearchForm",
                                        onSubmit: this.OnSearchSubmit
                                      },
                                      ve.createElement(
                                        "div",
                                        { className: "inputContainer no-drag" },
                                        ve.createElement("input", {
                                          id: "friendSearchInputID",
                                          className: "friendSearchInput",
                                          autoFocus: !0,
                                          type: "text",
                                          name: "friendSearch",
                                          placeholder: Object(re.b)(
                                            "#SearchFriends"
                                          ),
                                          value: this.state.searchString,
                                          onInput: this.OnSearchInput,
                                          onKeyDown: this.OnSearchKeyDown,
                                          autoComplete: "off",
                                          ref: this.OnSearchInputRef
                                        }),
                                        ve.createElement(
                                          "div",
                                          {
                                            className: "friendSearchClear",
                                            onClick: this.OnClearSearch
                                          },
                                          ve.createElement(Qo.fb, null)
                                        )
                                      )
                                    )
                                  )
                                )
                            ),
                            ve.createElement(
                              "div",
                              {
                                className: "searchIconButton",
                                onClick: this.OnTabSearchClick,
                                title: Object(re.b)("#Tooltip_SearchFriends")
                              },
                              ve.createElement(Qo.y, null)
                            )
                          ),
                          (n || o || i) &&
                            ve.createElement(
                              "div",
                              {
                                className: a,
                                onClick: this.ToggleViewingIncomingInvites,
                                title: Object(re.c)("#Tooltip_FriendRequest", r)
                              },
                              ve.createElement(Qo.p, null),
                              0 < r &&
                                ve.createElement(
                                  "div",
                                  { className: "requestsNumber" },
                                  r
                                )
                            ),
                          ve.createElement(
                            fr,
                            { href: G.a.COMMUNITY_BASE_URL + "friends/add" },
                            ve.createElement(
                              "div",
                              {
                                className:
                                  "friendListButton addFriendButton no-drag",
                                title: Object(re.b)("#Tooltip_AddFriend")
                              },
                              ve.createElement(Qo.a, null)
                            )
                          )
                        )
                      )
                    )
                  ),
                  ve.createElement("div", { className: "disconnectBlocker" })
                ),
                ve.createElement(xs, {
                  friends: this.props.friends,
                  chats: this.props.chats,
                  searchString: t,
                  fnOnSearchSelection: this.OnSearchSelection,
                  onStartSearch: this.StartSearchOnKeyPress,
                  browserContext: this.props.browserContext,
                  bViewingIncomingInvites: this.state.bViewingIncomingInvites,
                  onClose: this.ToggleViewingIncomingInvites
                }),
                ve.createElement(
                  "div",
                  { className: "friendListFooter" },
                  ve.createElement(Bs, null)
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnSearchInputRef", null),
          R.c([M.a], e.prototype, "StartSearchOnKeyPress", null),
          R.c([M.a], e.prototype, "OnSearchInput", null),
          R.c([M.a], e.prototype, "OnSearchSubmit", null),
          R.c([M.a], e.prototype, "OnSearchSelection", null),
          R.c([M.a], e.prototype, "OnSearchKeyDown", null),
          R.c([M.a], e.prototype, "OnClearSearch", null),
          R.c([M.a], e.prototype, "OnSettingsClick", null),
          R.c([M.a], e.prototype, "ToggleCollapseExpand", null),
          R.c([M.a], e.prototype, "OnDoFriendsListUpdate", null),
          R.c([M.a], e.prototype, "BindTabLabel", null),
          R.c([M.a], e.prototype, "CollapseTabLabel", null),
          R.c([M.a], e.prototype, "OnTabSearchClick", null),
          R.c([M.a], e.prototype, "ToggleViewingIncomingInvites", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ps = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e =
              G.a.COMMUNITY_BASE_URL + "groups/SteamClientBeta/discussions/3/";
            return Yo.IsInBeta()
              ? ve.createElement(
                  "div",
                  { className: "betaFeedbackLabel" },
                  Object(re.d)(
                    "#GiveFeedbackToSteam_Desc",
                    ve.createElement(
                      fr,
                      { href: e, className: "betaFeedbackAnchor" },
                      " ",
                      Object(re.b)("#GiveFeedbackToSteam_URL"),
                      " "
                    )
                  )
                )
              : null;
          }),
          t
        );
      })(ve.Component),
      Fs = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bChangeLogVersion = 8),
            (t.state = {
              bShowChangeLogViolator:
                Qu.UIDisplayPrefs.nChangeLogDismissed < t.m_bChangeLogVersion
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OpenChangeLog = function(e) {
            var t;
            Qu.SetUIDisplayPref(
              "nChangeLogDismissed",
              this.m_bChangeLogVersion
            ),
              this.setState({ bShowChangeLogViolator: !1 }),
              (t = e.currentTarget.ownerDocument.defaultView),
              Ji(ve.createElement(Ds, null), t, "ChangeLog", {
                strTitle: Object(re.b)("#changeLog_Title"),
                popupWidth: 640,
                popupHeight: 680
              });
          }),
          (e.prototype.render = function() {
            if (!Yo.IsInBeta()) return null;
            var e = this.state.bShowChangeLogViolator,
              t = 0;
            return (
              e &&
                (t =
                  this.m_bChangeLogVersion -
                  (Qu.UIDisplayPrefs.nChangeLogDismissed || 7)),
              ve.createElement(
                "div",
                {
                  className: "changeLog" + (e ? " showViolator" : ""),
                  onClick: this.OpenChangeLog,
                  title: e
                    ? Object(re.b)("#changeLog_Value_Button", t)
                    : Object(re.b)("#changeLog_Button")
                },
                ve.createElement(Qo.O, null),
                e &&
                  ve.createElement("div", { className: "changeLogViolator" }, t)
              )
            );
          }),
          R.c([M.a], e.prototype, "OpenChangeLog", null),
          e
        );
      })(ve.Component),
      Bs = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OnSettingsZooClick = function(e) {
            0;
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              ve.Fragment,
              null,
              ve.createElement(
                "div",
                { className: "flexRowCentered" },
                !1,
                ve.createElement(Ps, null),
                ve.createElement(Fs, null)
              )
            );
          }),
          R.c([M.a], e.prototype, "OnSettingsZooClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Vs = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnShowContextMenu = function(e) {
            return (
              (t = zu(this, e)),
              (n = e),
              Object(Zo.a)(
                ve.createElement(Br, {
                  browserContext: t,
                  ownerWindow: n.currentTarget.ownerDocument.defaultView
                }),
                n
              )
            );
            var t, n;
          }),
          (t.prototype.ToggleSingleWindowToggle = function() {
            Qu.ToggleSingleWindowToggle(this.props.popup);
          }),
          (t.prototype.ShowCurrentUserProfile = function(e) {
            yr(e, this.props.currentUser.GetCommunityProfileURL()),
              e.stopPropagation();
          }),
          (t.prototype.render = function() {
            var e = this.props.currentUser,
              t = "currentUserContainer " + ws(e.persona);
            Yo.FriendStore.GetUserDoNotDisturb() && (t += " userDoNotDisturb");
            var n = null;
            Yo.FriendStore.BIsInvisibleMode() &&
              (n = Object(re.b)("#PersonaStateInvisible"));
            var o = !1;
            this.props.popup && (o = qu(this.props.popup) != qo);
            return ve.createElement(
              "div",
              { className: t },
              ve.createElement(
                "svg",
                {
                  className: "statusHeaderGlow",
                  width: "100%",
                  height: "132",
                  xmlns: "http://www.w3.org/2000/svg"
                },
                ve.createElement(
                  "defs",
                  null,
                  ve.createElement(
                    "radialGradient",
                    {
                      id: "exampleGradient",
                      cx: "50%",
                      cy: "50%",
                      r: "50%",
                      fx: "35%",
                      fy: "30%"
                    },
                    ve.createElement("stop", {
                      offset: "10%",
                      stopColor: "gold"
                    }),
                    ve.createElement("stop", {
                      offset: "95%",
                      stopColor: "green"
                    })
                  )
                ),
                ve.createElement("ellipse", {
                  cx: "5%",
                  cy: "28%",
                  rx: "65%",
                  ry: "60%",
                  fill: "url(#exampleGradient)"
                })
              ),
              ve.createElement(
                Xs,
                {
                  friend: e,
                  context: { chatContext: "friendslist" },
                  onContextMenu: this.OnShowContextMenu
                },
                ve.createElement(
                  "div",
                  {
                    className: "AvatarAndUser",
                    onContextMenu: this.OnShowContextMenu
                  },
                  ve.createElement("img", {
                    className: "currentUserAvatar",
                    src: e.persona.avatar_url_medium,
                    onClick: this.ShowCurrentUserProfile
                  }),
                  ve.createElement(ec, {
                    friend: e,
                    strOverrideStatus: n,
                    onShowContextMenu: this.OnShowContextMenu,
                    bDNDSet: Yo.FriendStore.GetUserDoNotDisturb()
                  })
                )
              ),
              this.props.popup &&
                G.a.IN_CLIENT &&
                ve.createElement(
                  "div",
                  {
                    className:
                      "title-area-icon singleWindowToggle" +
                      (o ? " inOverlay" : ""),
                    title: Object(re.b)(
                      "#FriendsList_TitleArea_SingleWindowButton"
                    ),
                    onClick: this.ToggleSingleWindowToggle
                  },
                  ve.createElement(Qo.R, null)
                )
            );
          }),
          R.c([M.a], t.prototype, "OnShowContextMenu", null),
          R.c([M.a], t.prototype, "ToggleSingleWindowToggle", null),
          R.c([M.a], t.prototype, "ShowCurrentUserProfile", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      xs = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bScrolledFromTop: !1 }), t;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "frame", {
            get: function() {
              return this.m_elFriendsListContent;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnContextMenu = function(e) {
            var t =
              this.props.searchString && 0 < this.props.searchString.length;
            this.props.bViewingIncomingInvites || t || Pr(zu(this, e), null, e);
          }),
          (e.prototype.BindFriendsListContent = function(e) {
            this.m_elFriendsListContent = e;
          }),
          (e.prototype.OnFriendsListKeyDown = function(e) {
            e.ctrlKey ||
              e.altKey ||
              e.metaKey ||
              1 < e.key.length ||
              this.props.onStartSearch(e);
          }),
          (e.prototype.OnFriendsListScrollRef = function(e) {
            this.m_elFriendsListScroll = e;
          }),
          (e.prototype.ScrollToTop = function() {
            this.m_elFriendsListScroll &&
              (this.m_elFriendsListScroll.scrollTop = 0);
          }),
          (e.prototype.OnScrollFriendsList = function(e) {
            var t = 10 < e.currentTarget.scrollTop;
            t != this.state.bScrolledFromTop &&
              this.setState({ bScrolledFromTop: t });
          }),
          (e.prototype.OnAcceptClanInvite = function(e, t) {
            var n = e.currentTarget.ownerDocument.defaultView;
            Yo.FriendStore.ClanStore.RespondToClanInvite(t, !0).then(function(
              e
            ) {
              e ||
                er(
                  n,
                  Object(re.b)("#Friend_AcceptClanInvite"),
                  Object(re.b)("#Friend_AcceptClanInvite_Error")
                );
            });
          }),
          (e.prototype.OnDeclineClanInvite = function(e, t) {
            var n = e.currentTarget.ownerDocument.defaultView;
            Yo.FriendStore.ClanStore.RespondToClanInvite(t, !1).then(function(
              e
            ) {
              e ||
                er(
                  n,
                  Object(re.b)("#Friend_DeclineClanInvite"),
                  Object(re.b)("#Friend_DeclineClanInvite_Error")
                );
            });
          }),
          (e.prototype.render = function() {
            var e,
              o = this,
              t = this.props.searchString && 0 < this.props.searchString.length,
              n = this.props.bViewingIncomingInvites,
              i = {
                searchString: this.props.searchString,
                fnOnSearchSelection: this.props.fnOnSearchSelection
              };
            if (this.props.friends.self.is_ready)
              if (n) {
                var r = Yo.FriendStore.ClanStore.clan_invites.length,
                  a = (E.a.InitFromAccountID(Yo.FriendStore.self.accountid),
                  []);
                if (r)
                  for (
                    var s = function(e) {
                        var t = e.steamid,
                          n = void 0;
                        (n = e.BIsOGG()
                          ? G.a.COMMUNITY_BASE_URL + "app/" + e.GetOGGAppID()
                          : G.a.COMMUNITY_BASE_URL +
                            "gid/" +
                            t.ConvertTo64BitString()),
                          a.push(
                            ve.createElement(
                              "div",
                              {
                                className: "clanInviteContainer",
                                key: "clan_invite_" + t.GetAccountID()
                              },
                              ve.createElement(
                                fr,
                                { href: n },
                                ve.createElement(
                                  "div",
                                  { className: "clanAvatar" },
                                  ve.createElement("img", {
                                    className: "clanAvatarIcon",
                                    src: e.avatar_url_medium
                                  })
                                ),
                                ve.createElement(
                                  "div",
                                  { className: "clanName" },
                                  e.name,
                                  ve.createElement(
                                    "div",
                                    { className: "clanDetails displayRow" },
                                    ve.createElement(
                                      "div",
                                      {
                                        className: "displayRow statMembersTotal"
                                      },
                                      ve.createElement("div", {
                                        className: "statCircle"
                                      }),
                                      e.member_count,
                                      " Members"
                                    ),
                                    0 < e.users_online &&
                                      ve.createElement(
                                        "div",
                                        {
                                          className:
                                            "displayRow statMembersOnline",
                                          title: Object(re.c)(
                                            "#Chat_Members_Online_Tooltip",
                                            e.users_online
                                          )
                                        },
                                        ve.createElement("div", {
                                          className: "statCircle"
                                        }),
                                        e.users_online
                                      ),
                                    0 < e.users_ingame &&
                                      ve.createElement(
                                        "div",
                                        {
                                          className:
                                            "displayRow statMembersInGame",
                                          title: Object(re.c)(
                                            "#Chat_Members_InGame_Tooltip",
                                            e.users_ingame
                                          )
                                        },
                                        ve.createElement("div", {
                                          className: "statCircle"
                                        }),
                                        e.users_ingame
                                      )
                                  )
                                )
                              ),
                              ve.createElement(
                                "div",
                                { className: "clanActionButtons" },
                                ve.createElement(
                                  "div",
                                  {
                                    className: "displayColumn",
                                    title: Object(re.b)(
                                      "#FriendGroup_Tip_Accept_Invite"
                                    )
                                  },
                                  ve.createElement(
                                    Mi,
                                    {
                                      onClick: function(e) {
                                        o.OnAcceptClanInvite(e, t);
                                      }
                                    },
                                    "Accept"
                                  )
                                ),
                                ve.createElement(
                                  "div",
                                  {
                                    className: "displayColumn",
                                    title: Object(re.b)(
                                      "#FriendGroup_Tip_Decline_Invite"
                                    )
                                  },
                                  ve.createElement(
                                    Mi,
                                    {
                                      onClick: function(e) {
                                        o.OnDeclineClanInvite(e, t);
                                      }
                                    },
                                    "Ignore"
                                  )
                                )
                              )
                            )
                          );
                      },
                      c = 0,
                      l = Yo.FriendStore.ClanStore.clan_invites;
                    c < l.length;
                    c++
                  ) {
                    s(l[c]);
                  }
                e = ve.createElement(
                  ve.Fragment,
                  null,
                  0 < r &&
                    !t &&
                    ve.createElement(
                      ve.Fragment,
                      null,
                      ve.createElement(
                        "div",
                        { className: "clanInvitesGroupContainer" },
                        ve.createElement(
                          "div",
                          { className: "clanInviteTitle" },
                          Object(re.b)("#Friend_PendingClanInvites")
                        ),
                        a
                      )
                    ),
                  ve.createElement(
                    zs,
                    R.a(
                      {
                        group: this.props.friends.FriendGroupStore
                          .incoming_invites_group,
                        collapsed: !1
                      },
                      i,
                      { onClose: this.props.onClose }
                    )
                  ),
                  ve.createElement(
                    zs,
                    R.a(
                      {
                        group: this.props.friends.FriendGroupStore
                          .outgoing_invites_group,
                        collapsed: !1
                      },
                      i,
                      { onClose: this.props.onClose }
                    )
                  )
                );
              } else if (t)
                e = ve.createElement(
                  zs,
                  R.a(
                    {
                      group: this.props.friends.FriendGroupStore.all_friends,
                      collapsed: !1
                    },
                    i
                  )
                );
              else {
                var p = this.props.friends.FriendGroupStore.user_groups.map(
                    function(e) {
                      return ve.createElement(
                        zs,
                        R.a(
                          {
                            group: e,
                            key: e.id,
                            groupDisplayPrefs:
                              o.props.friends.FriendGroupStore.groupDisplayPrefs
                          },
                          i
                        )
                      );
                    }
                  ),
                  u = this.props.friends.FriendGroupStore.default_groups.map(
                    function(e) {
                      return ve.createElement(
                        zs,
                        R.a(
                          {
                            group: e,
                            key: e.id,
                            groupDisplayPrefs:
                              o.props.friends.FriendGroupStore.groupDisplayPrefs
                          },
                          i
                        )
                      );
                    }
                  ),
                  m = !1;
                this.props.chats.FriendChatStore.GetFriendsWithUnreadMessages(
                  this.props.browserContext
                ).length && (m = !0),
                  (e = ve.createElement(
                    ve.Fragment,
                    null,
                    m &&
                      ve.createElement(
                        "div",
                        { className: "recentChatsGroup unreadChatsGroup" },
                        ve.createElement(nc, {
                          friendChatStore: this.props.chats.FriendChatStore,
                          browserContext: this.props.browserContext
                        }),
                        !1
                      ),
                    ve.createElement(Ws, null),
                    p,
                    u
                  ));
              }
            else e = void 0;
            var d = Yo.SettingsStore.FriendsSettings.bCompactFriendsList;
            return ve.createElement(
              "div",
              {
                className:
                  "FriendsListContent" + (d ? " CompactFriendsList" : ""),
                ref: this.BindFriendsListContent
              },
              ve.createElement(
                "div",
                { className: "friendsListInsetShadowCtn" },
                ve.createElement("div", {
                  className: "friendListInsetShadowTop"
                })
              ),
              ve.createElement(tc, {
                browserContext: this.props.browserContext,
                bScrolledFromTop: this.state.bScrolledFromTop && !t,
                onClick: this.ScrollToTop
              }),
              ve.createElement(
                "div",
                {
                  className: "friendlistListContainer",
                  onContextMenu: this.OnContextMenu,
                  tabIndex: 0,
                  onKeyDown: this.OnFriendsListKeyDown,
                  ref: this.OnFriendsListScrollRef,
                  onScroll: this.OnScrollFriendsList
                },
                ve.createElement(
                  "div",
                  { className: "listContentContainer" },
                  e,
                  ve.createElement("div", { className: "disconnectBlocker" })
                )
              ),
              ve.createElement(
                "div",
                { className: "friendsListInsetShadowCtn" },
                ve.createElement("div", {
                  className: "friendListInsetShadowBottom"
                })
              ),
              ve.createElement(Us, {
                friends: this.props.friends,
                chats: this.props.chats,
                parent: this
              })
            );
          }),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "BindFriendsListContent", null),
          R.c([M.a], e.prototype, "OnFriendsListKeyDown", null),
          R.c([M.a], e.prototype, "OnFriendsListScrollRef", null),
          R.c([M.a], e.prototype, "ScrollToTop", null),
          R.c([M.a], e.prototype, "OnScrollFriendsList", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Us = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bMouseOver = !1),
            (t.state = {
              nChatRoomListContainerHeight:
                Qu.UIDisplayPrefs.nChatRoomListHeightPx,
              nChatRoomListContainerMaxHeight:
                Qu.UIDisplayPrefs.nChatRoomListHeightPx,
              bChatRoomListCollapsed: Qu.UIDisplayPrefs.bChatRoomListCollapsed,
              nChatRoomListPreCollapseHeight:
                Qu.UIDisplayPrefs.nChatRoomListHeightPx,
              bChatRoomListResizing: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.UpdateChatSectionSize = function() {
            var e = this;
            if (
              (AssertMsg(
                this.m_elChatSection,
                "m_elChatRoomListContainer not set"
              ),
              this.m_bMouseOver)
            )
              return (
                this.m_iTimeoutUpdateChatSectionSize &&
                  this.m_window.clearTimeout(
                    this.m_iTimeoutUpdateChatSectionSize
                  ),
                void (this.m_iTimeoutUpdateChatSectionSize = this.m_window.setTimeout(
                  function() {
                    (e.m_iTimeoutUpdateChatSectionSize = void 0),
                      e.UpdateChatSectionSize();
                  },
                  500
                ))
              );
            var t = this.m_elChatSection.maximumHeight,
              n = this.m_elChatSection.minimumHeight;
            if (
              ((this.m_elChatRoomListContainer.style.minHeight = n + "px"),
              this.state.nChatRoomListContainerMaxHeight > t)
            ) {
              this.m_animationChatSectionShrink &&
                this.m_animationChatSectionShrink.Cancel();
              var o = this.state.nChatRoomListContainerMaxHeight,
                i = t;
              this.setState({ nChatRoomListContainerMaxHeight: o }, function() {
                (e.m_animationChatSectionShrink = new ui(
                  e,
                  {
                    nChatRoomListContainerHeight: ln(
                      e.state.nChatRoomListContainerHeight,
                      n,
                      t
                    ),
                    nChatRoomListContainerMaxHeight: i
                  },
                  { msDuration: 300, timing: "sine" }
                )),
                  e.m_animationChatSectionShrink.Start();
              });
            } else this.setState({ nChatRoomListContainerMaxHeight: t });
          }),
          (e.prototype.OnChatSectionMutation = function(e, t) {
            var n = this;
            this.m_iTimeoutUpdateChatSectionSize &&
              this.m_window.clearTimeout(this.m_iTimeoutUpdateChatSectionSize),
              (this.m_iTimeoutUpdateChatSectionSize = this.m_window.setTimeout(
                function() {
                  (n.m_iTimeoutUpdateChatSectionSize = void 0),
                    n.UpdateChatSectionSize();
                },
                1e3
              ));
          }),
          (e.prototype.BindChatRoomTitleContainer = function(e) {
            this.m_elChatRoomTitleContainer = e;
          }),
          (e.prototype.BindChatRoomListContainer = function(e) {
            e &&
              ((this.m_elChatRoomListContainer = e),
              this.UpdateChatSectionSize());
          }),
          (e.prototype.BindChatSection = function(e) {
            this.m_observerChatSection &&
              (this.m_observerChatSection.disconnect(),
              (this.m_observerChatSection = null)),
              e &&
                ((this.m_elChatSection = e),
                (this.m_window = e.div.ownerDocument.defaultView),
                (this.m_observerChatSection = new MutationObserver(
                  this.OnChatSectionMutation
                )),
                this.m_observerChatSection.observe(e.div, {
                  childList: !0,
                  subtree: !0
                }));
          }),
          (e.prototype.OnGrabberMouseDown = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            (this.m_iGrabberBarInitialGrabOffset =
              e.clientY -
              this.m_elChatRoomTitleContainer.getBoundingClientRect().top),
              this.setState({
                nChatRoomListPreCollapseHeight:
                  Qu.UIDisplayPrefs.nChatRoomListHeightPx
              }),
              t.addEventListener("mousemove", this.HandleMouseMove),
              t.addEventListener(
                "mouseup",
                this.UnregisterChatRoomListDragEvents
              );
          }),
          (e.prototype.OnGrabberTouchStart = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            (this.m_iGrabberBarInitialGrabOffset =
              e.touches[0].clientY -
              this.m_elChatRoomTitleContainer.getBoundingClientRect().top),
              t.addEventListener("touchmove", this.HandleTouchMove),
              t.addEventListener(
                "touchend",
                this.UnregisterChatRoomListDragEvents
              );
          }),
          (e.prototype.HandleTouchMove = function(e) {
            1 <= e.touches.length &&
              this.InternalAdjustChatRoomListContainerOnDrag(
                e.touches[0].clientY
              );
          }),
          (e.prototype.HandleMouseMove = function(e) {
            this.InternalAdjustChatRoomListContainerOnDrag(e.clientY);
          }),
          (e.prototype.OnMouseEnter = function(e) {
            this.m_bMouseOver = !0;
          }),
          (e.prototype.OnMouseLeave = function(e) {
            this.m_bMouseOver = !1;
          }),
          (e.prototype.InternalAdjustChatRoomListContainerOnDrag = function(e) {
            if (this.props.parent && this.props.parent.frame) {
              var t = this.props.parent.frame.getBoundingClientRect(),
                n = t.top,
                o = this.m_iGrabberBarInitialGrabOffset,
                i =
                  t.height -
                  (this.m_elChatRoomTitleContainer.getBoundingClientRect()
                    .height -
                    o),
                r = e - n;
              r < 0 ? (r = 0) : i < r && (r = i);
              var a = i - r;
              (a = ln(
                a,
                this.m_elChatSection.minimumHeight,
                this.m_elChatSection.maximumHeight
              )),
                this.setState({ nChatRoomListContainerHeight: a }),
                this.setState({
                  bChatRoomListCollapsed: !(
                    0 < this.state.nChatRoomListContainerHeight
                  )
                }),
                Qu.SetUIDisplayPref(
                  "bChatRoomListCollapsed",
                  !(0 < this.state.nChatRoomListContainerHeight)
                ),
                this.setState({ bChatRoomListResizing: !0 });
            }
          }),
          (e.prototype.ToggleChatsList = function() {
            this.state.bChatRoomListCollapsed &&
              this.setState({
                nChatRoomListContainerHeight: this.state
                  .nChatRoomListPreCollapseHeight
              }),
              this.setState({
                bChatRoomListCollapsed: !this.state.bChatRoomListCollapsed
              }),
              Qu.SetUIDisplayPref(
                "bChatRoomListCollapsed",
                !this.state.bChatRoomListCollapsed
              );
          }),
          (e.prototype.UnregisterChatRoomListDragEvents = function(e) {
            e.view.removeEventListener("mousemove", this.HandleMouseMove),
              e.view.removeEventListener("touchmove", this.HandleTouchMove),
              e.view.removeEventListener(
                "mouseup",
                this.UnregisterChatRoomListDragEvents
              ),
              e.view.removeEventListener(
                "touchend",
                this.UnregisterChatRoomListDragEvents
              ),
              this.state.nChatRoomListContainerHeight < 1
                ? Qu.SetUIDisplayPref(
                    "nChatRoomListHeightPx",
                    this.state.nChatRoomListPreCollapseHeight
                  )
                : (this.setState({
                    nChatRoomListPreCollapseHeight: this.state
                      .nChatRoomListContainerHeight
                  }),
                  Qu.SetUIDisplayPref(
                    "nChatRoomListHeightPx",
                    this.state.nChatRoomListContainerHeight
                  )),
              (this.m_iGrabberBarInitialGrabOffset = null),
              this.setState({ bChatRoomListResizing: !1 });
          }),
          (e.prototype.OnCreateChatRoom = function(e) {
            ds(zu(this, e), e.currentTarget.ownerDocument.defaultView);
          }),
          (e.prototype.render = function() {
            var e = {
                height: this.state.bChatRoomListCollapsed
                  ? 0
                  : this.state.nChatRoomListContainerHeight + "px",
                maxHeight: this.state.bChatRoomListCollapsed
                  ? 0
                  : this.state.nChatRoomListContainerMaxHeight + "px"
              },
              t = this.props.chats.currentChatRoomGroups,
              n = !1,
              o = "FriendsListChatSection ChatRoomListContainerParent";
            if (this.props.chats.chat_group_list_ready)
              for (var i = 0, r = t; i < r.length; i++) {
                r[i].HasUnreadChatMessage && (0, (n = !0));
              }
            return (
              this.state.bChatRoomListCollapsed && (o += " Collapsed"),
              this.state.bChatRoomListResizing && (o += " ChatListResizing"),
              n && (o += " HasUnreadChats"),
              ve.createElement(
                "div",
                {
                  className: o,
                  onMouseEnter: this.OnMouseEnter,
                  onMouseLeave: this.OnMouseLeave
                },
                ve.createElement(
                  "div",
                  {
                    className: "friendsListSectionTitle chatSectionTitle",
                    ref: this.BindChatRoomTitleContainer
                  },
                  this.state.bChatRoomListCollapsed &&
                    n &&
                    ve.createElement(na, null),
                  ve.createElement(
                    "div",
                    {
                      className: "ToggleGroupChatList",
                      onClick: this.ToggleChatsList,
                      title: this.state.bChatRoomListCollapsed
                        ? Object(re.b)("#Tooltip_ChatsExpand")
                        : Object(re.b)("#Tooltip_ChatsCollapse")
                    },
                    ve.createElement(Qo.k, { angle: -90 })
                  ),
                  ve.createElement(
                    "div",
                    {
                      className: "voiceRoomDragBar",
                      onMouseDown: this.OnGrabberMouseDown,
                      onTouchStart: this.OnGrabberTouchStart
                    },
                    ve.createElement(
                      "div",
                      { className: "groupChatSectionTitle" },
                      Object(re.b)("#tab_chats")
                    )
                  ),
                  ve.createElement(
                    "button",
                    {
                      className: "createChatRoomButton",
                      onClick: this.OnCreateChatRoom,
                      title: Object(re.b)("#Tooltip_CreateGroupChat")
                    },
                    ve.createElement(Qo.D, null)
                  ),
                  ve.createElement("div", { className: "disconnectBlocker" })
                ),
                ve.createElement(
                  "div",
                  { className: "friendsListInsetShadowCtn" },
                  ve.createElement("div", {
                    className: "friendListInsetShadowTop"
                  })
                ),
                ve.createElement(
                  "div",
                  {
                    className: "chatRoomListContainer",
                    style: e,
                    ref: this.BindChatRoomListContainer
                  },
                  ve.createElement(ea, {
                    friends: this.props.friends,
                    chats: this.props.chats,
                    ref: this.BindChatSection
                  })
                ),
                ve.createElement(
                  "div",
                  { className: "friendsListInsetShadowCtn" },
                  ve.createElement("div", {
                    className: "friendListInsetShadowBottom"
                  })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "UpdateChatSectionSize", null),
          R.c([M.a], e.prototype, "OnChatSectionMutation", null),
          R.c([M.a], e.prototype, "BindChatRoomTitleContainer", null),
          R.c([M.a], e.prototype, "BindChatRoomListContainer", null),
          R.c([M.a], e.prototype, "BindChatSection", null),
          R.c([M.a], e.prototype, "OnGrabberMouseDown", null),
          R.c([M.a], e.prototype, "OnGrabberTouchStart", null),
          R.c([M.a], e.prototype, "HandleTouchMove", null),
          R.c([M.a], e.prototype, "HandleMouseMove", null),
          R.c([M.a], e.prototype, "OnMouseEnter", null),
          R.c([M.a], e.prototype, "OnMouseLeave", null),
          R.c([M.a], e.prototype, "ToggleChatsList", null),
          R.c([M.a], e.prototype, "UnregisterChatRoomListDragEvents", null),
          R.c([M.a], e.prototype, "OnCreateChatRoom", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      js = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetDragDropProps = function(e) {
            void 0 === e && (e = !0);
            var t = { rgAcceptedTypes: [] };
            return (
              e &&
                ((t.fnDragEnter = this.OnDragEnter),
                (t.fnDragLeave = this.OnDragLeave),
                (t.fnDrop = this.OnDrop),
                (t.rgAcceptedTypes = ["friend"])),
              (t.onDragStart = this.OnDragStart),
              (t.onDragEnd = this.OnDragEnd),
              t
            );
          }),
          (t.prototype.OnDragStart = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            if (t && "friend" == t.type) {
              var n = t;
              (n.group = this.GetGroup()),
                this.setState({ friendDraggedOut: n.friend });
            }
          }),
          (t.prototype.OnDragEnd = function(e) {
            this.state.friendDraggedOut &&
              this.setState({ friendDraggedOut: null });
          }),
          (t.prototype.OnDragEnter = function(e, t) {
            AssertMsg(
              e && "friend" == e.type,
              "Invalid data type passed to FriendGroupDragDrop.OnDragEnter"
            );
            var n = e,
              o = n.friend,
              i = n.group,
              r = this.GetGroup();
            return (
              (!r ||
                i == r ||
                !this.GetGroup().HasMember(o.accountid) ||
                n.is_favorite ||
                (this.GetGroup().accepts_group_removals && i.modifiable)) &&
                o.is_friend &&
                this.state.friendDrag != o &&
                this.setState({ friendDrag: o }),
              !0
            );
          }),
          (t.prototype.ResetDragState = function() {
            this.setState({ friendDrag: null });
          }),
          (t.prototype.OnDragLeave = function() {
            this.state.friendDrag && this.ResetDragState();
          }),
          (t.prototype.OnDrop = function(e, t) {
            var n = this;
            AssertMsg(
              e && "friend" == e.type,
              "Invalid data type passed to FriendGroupDragDrop.OnDrop"
            );
            var o = e;
            if (o.group == this.GetGroup())
              this.setState({ friendDraggedOut: null });
            else {
              var i = this.state.friendDrag,
                r = function() {
                  n.state.friendDrag &&
                    n.state.friendDrag == i &&
                    n.ResetDragState();
                };
              this.PerformDropAction(o)
                .then(r)
                .catch(r);
            }
          }),
          R.c([M.a], t.prototype, "OnDragStart", null),
          R.c([M.a], t.prototype, "OnDragEnd", null),
          R.c([M.a], t.prototype, "OnDragEnter", null),
          R.c([M.a], t.prototype, "OnDragLeave", null),
          R.c([M.a], t.prototype, "OnDrop", null),
          t
        );
      })(ve.Component);
    function Hs() {
      return ve.createElement(
        "div",
        { className: "SnoozeContainer" },
        ve.createElement("div", { className: "SnoozeBackground" }),
        ve.createElement(
          "div",
          { "data-text": "Z", className: "SnoozeZ Z1" },
          "Z"
        ),
        ve.createElement(
          "div",
          { "data-text": "Z", className: "SnoozeZ Z2" },
          "Z"
        ),
        ve.createElement(
          "div",
          { "data-text": "Z", className: "SnoozeZ Z3" },
          "Z"
        )
      );
    }
    var Ws = Object(Hi.observer)(function(e) {
        if (!Yo.SettingsStore.FriendsSettings.bCategorizeInGameFriendsByGame)
          return null;
        var t = Yo.FriendStore.FriendGroupStore.game_groups,
          n = t.map(function(e) {
            return ve.createElement(Ys, {
              key: e.id,
              group: e,
              bSingletonGroup: !1,
              bOtherGroups: !0,
              groupDisplayPrefs:
                Yo.FriendStore.FriendGroupStore.groupDisplayPrefs
            });
          }),
          o = Yo.FriendStore.FriendGroupStore.singleton_game_group;
        return (
          o &&
            n.push(
              ve.createElement(Ys, {
                key: "singleton",
                group: o,
                bSingletonGroup: !0,
                bOtherGroups: 0 < t.length,
                groupDisplayPrefs:
                  Yo.FriendStore.FriendGroupStore.groupDisplayPrefs
              })
            ),
          ve.createElement(ve.Fragment, null, n)
        );
      }),
      zs = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_actions = m.observable.map()),
            (t.state = {
              bLocalCollapsed: t.props.collapsed,
              bSortOfflineByRecent: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.GetGroup = function() {
            return this.props.group;
          }),
          (e.prototype.PerformDropAction = function(e) {
            var t = e.friend,
              n = e.group,
              o = this.props.group;
            return (
              e.is_favorite || Qu.DragDropManager.SetDropConsumed(),
              Yo.FriendStore.FriendGroupStore.TransferFriendFromToGroup(t, n, o)
            );
          }),
          (e.prototype.ToggleCollapsed = function() {
            this.props.groupDisplayPrefs
              ? this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(
                  this.props.group.unique_id
                )
              : this.setState({ bLocalCollapsed: !this.state.bLocalCollapsed });
          }),
          (e.prototype.IsCollapsed = function() {
            return this.props.groupDisplayPrefs
              ? this.props.groupDisplayPrefs.GetUserGroupCollapsed(
                  this.props.group.unique_id
                )
              : this.state.bLocalCollapsed;
          }),
          (e.prototype.IsInviteGroup = function() {
            return this.props.group.m_eDisplayType == rt.eIncomingInvites;
          }),
          (e.prototype.OnContextMenu = function(e) {
            (this.props.group.modifiable ||
              this.props.group.accepts_group_removals) &&
              Pr(zu(this, e), this.props.group, e);
          }),
          (e.prototype.OnFriendSelected = function(e) {
            this.props.friendSelectAction
              ? this.props.friendSelectAction(e)
              : (e.OpenChatDialog(zu(this)),
                this.props.fnOnSearchSelection &&
                  this.props.fnOnSearchSelection());
          }),
          (e.prototype.OnAcceptInvite = function(e, t) {
            AssertMsg(
              this.IsInviteGroup(),
              "accept invite on non-invite group"
            );
            var n = this.m_actions.get(t.accountid);
            n && "accept" == n.action
              ? this.m_actions.delete(t.accountid)
              : this.m_actions.set(t.accountid, {
                  friend: t,
                  action: "accept"
                });
          }),
          (e.prototype.OnDeclineInvite = function(e, t) {
            AssertMsg(
              this.IsInviteGroup(),
              "decline invite on non-invite group"
            );
            var n = this.m_actions.get(t.accountid);
            !n || ("decline" != n.action && "block" != n.action)
              ? this.m_actions.set(t.accountid, {
                  friend: t,
                  action: "decline"
                })
              : this.m_actions.delete(t.accountid);
          }),
          (e.prototype.OnBlockInvite = function(e, t) {
            AssertMsg(this.IsInviteGroup(), "block invite on non-invite group"),
              e
                ? this.m_actions.set(t.accountid, {
                    friend: t,
                    action: "block"
                  })
                : this.m_actions.set(t.accountid, {
                    friend: t,
                    action: "decline"
                  });
          }),
          (e.prototype.AcceptInvite = function(t, n) {
            Yo.FriendStore.SendFriendInvite(n).then(function(e) {
              3 != e &&
                er(
                  t,
                  Object(re.b)("#Friend_Menu_AddToFriendsList"),
                  Object(re.b)("#Friend_InviteError", n.display_name)
                );
            });
          }),
          (e.prototype.DeclineInvite = function(t, n) {
            Yo.FriendStore.RemoveFriend(n).then(function(e) {
              1 != e &&
                er(
                  t,
                  Object(re.b)("#Friend_Menu_IgnoreIncomingInvite"),
                  Object(re.b)(
                    "#Friend_IgnoreIncomingInvite_Error",
                    n.display_name
                  )
                );
            });
          }),
          (e.prototype.BlockInvite = function(t, n) {
            Yo.FriendStore.BlockPlayer(n).then(function(e) {
              5 != e &&
                er(
                  t,
                  Object(re.b)("#Friend_Menu_BlockIncomingInvite"),
                  Object(re.b)(
                    "#Friend_BlockIncomingInvite_Error",
                    n.display_name
                  )
                );
            });
          }),
          (e.prototype.OnConfirmChanges = function(e) {
            var t = this;
            AssertMsg(
              this.IsInviteGroup(),
              "confirm changes on non-invite group"
            );
            var n = e.currentTarget.ownerDocument.defaultView;
            this.m_actions.forEach(function(e) {
              "accept" == e.action
                ? t.AcceptInvite(n, e.friend)
                : "decline" == e.action
                  ? t.DeclineInvite(n, e.friend)
                  : "block" == e.action
                    ? t.BlockInvite(n, e.friend)
                    : console.log("unknown action " + e.action);
            });
          }),
          (e.prototype.OnIgnoreAllInvites = function(e) {
            var o = this;
            AssertMsg(
              this.IsInviteGroup(),
              "ignore all invites on non-invite group"
            );
            var i = e.currentTarget.ownerDocument.defaultView;
            Zi(
              i,
              Object(re.b)("#FriendGroup_ConfirmAllIgnore_Title"),
              Object(re.b)("#FriendGroup_ConfirmAllIgnore_Body"),
              Object(re.b)("#FriendGroup_ConfirmAllIgnore_OK")
            )
              .then(function() {
                for (
                  var e = 0, t = o.props.group.member_list;
                  e < t.length;
                  e++
                ) {
                  var n = t[e];
                  o.DeclineInvite(i, n);
                }
              })
              .catch(function() {});
          }),
          (e.prototype.OnCloseInvites = function() {
            AssertMsg(
              this.IsInviteGroup(),
              "close invites on non-invite group"
            ),
              this.props.onClose();
          }),
          (e.prototype.ToggleOfflineSortMethod = function() {
            this.setState({
              bSortOfflineByRecent: !this.state.bSortOfflineByRecent
            });
          }),
          (e.prototype.GetFriendRenderContext = function() {
            return (
              (this.m_FriendRenderContext &&
                this.m_FriendRenderContext.friendGroup == this.props.group) ||
                (this.m_FriendRenderContext = {
                  friendGroup: this.props.group,
                  chatContext: "friendslist"
                }),
              this.m_FriendRenderContext
            );
          }),
          (e.prototype.render = function() {
            var s = this,
              e = this.props.searchString && 0 < this.props.searchString.length,
              t = e,
              n = this.IsCollapsed() && !e && !this.state.friendDrag,
              c = [],
              l = this.IsInviteGroup(),
              o = this.props.group.m_eDisplayType == rt.eOfflineOnly,
              i = !1;
            if (!n) {
              var p = !1,
                r = void 0;
              if (
                ((r =
                  this.props.searchString && this.props.searchString.length
                    ? this.props.group.GetMembersMatchingSearch(
                        this.props.searchString
                      )
                    : this.props.group.member_list),
                this.state.friendDrag &&
                  (this.props.group.HasMember(this.state.friendDrag.accountid)
                    ? (p = !0)
                    : (r = r
                        .concat(this.state.friendDrag)
                        .sort(ut.DefaultFriendSortComparator))),
                o &&
                  this.state.bSortOfflineByRecent &&
                  ((r = this.props.group.member_list_unsorted
                    .slice()
                    .sort(ut.FriendSortByLastSeenComparator)),
                  (i = !0)),
                l)
              ) {
                var a = Yo.FriendStore.FriendGroupStore.incoming_invites_group;
                r = r.slice().sort(function(e, t) {
                  var n = a.map_steamid_to_mutual_friends.get(e.steamid64),
                    o = a.map_steamid_to_mutual_friends.get(t.steamid64),
                    i = (n ? n.size : 0) - (o ? o.size : 0);
                  return 0 < i || (0 == i && e.accountid > t.accountid)
                    ? -1
                    : 1;
                });
              }
              var u = null;
              !e &&
                this.props.group.should_filter_categorized_friends &&
                (u = Yo.FriendStore.FriendGroupStore.categorized_friend_set);
              for (
                var m = function(t) {
                    if (
                      d.props.setExcludedFriends &&
                      d.props.setExcludedFriends.has(t.accountid)
                    )
                      return "continue";
                    if (u && u.has(t.accountid)) return "continue";
                    var e = 4 == t.efriendrelationship,
                      n = d.state.friendDrag != t || p ? "" : "dropGhost";
                    d.state.friendDraggedOut == t &&
                      d.state.friendDrag != t &&
                      (n += " dragOriginGhost");
                    var o = void 0,
                      i = void 0,
                      r = void 0;
                    if (l) {
                      var a = d.m_actions.get(t.accountid);
                      (o = a && "accept" == a.action ? "bright" : "dim"),
                        (i =
                          !a || ("decline" != a.action && "block" != a.action)
                            ? "dim"
                            : "bright"),
                        (r =
                          !a || ("decline" != a.action && "block" != a.action)
                            ? ""
                            : " declined"),
                        a && "accept" == a.action
                          ? (n += "bright")
                          : !a ||
                            ("decline" != a.action && "block" != a.action) ||
                            (n += "dim");
                    }
                    c.push(
                      ve.createElement(
                        Jo,
                        {
                          className: l
                            ? "friendInviteContainer" + r
                            : "friendCategoryContainer",
                          key: t.accountid,
                          classNames: "friend-anim",
                          timeout: 320
                        },
                        ve.createElement(
                          "div",
                          null,
                          ve.createElement(
                            Qs,
                            R.a(
                              {
                                friend: t,
                                key: t.accountid,
                                className: n,
                                context: d.GetFriendRenderContext(),
                                action: e ? function() {} : d.OnFriendSelected
                              },
                              d.props.friendProps,
                              { bFriendsListEntry: !0 }
                            )
                          ),
                          l &&
                            ve.createElement(
                              "div",
                              { className: "friendInviteButtons" },
                              ve.createElement(
                                "div",
                                {
                                  className:
                                    "friendInviteButton acceptFriendInvite " +
                                    o,
                                  onClick: function(e) {
                                    return s.OnAcceptInvite(e, t);
                                  },
                                  title: Object(re.b)("#FriendGroup_Tip_Accept")
                                },
                                ve.createElement(Qo.f, null)
                              ),
                              ve.createElement(
                                "div",
                                {
                                  className:
                                    "friendInviteButton declineFriendInvite " +
                                    i,
                                  onClick: function(e) {
                                    return s.OnDeclineInvite(e, t);
                                  },
                                  title: Object(re.b)(
                                    "#FriendGroup_Tip_Decline"
                                  )
                                },
                                ve.createElement(Qo.fb, null)
                              )
                            ),
                          l &&
                            ve.createElement(
                              "div",
                              { className: "friendInviteBlockContainer" },
                              ve.createElement(Li, {
                                onChange: function(e) {
                                  return s.OnBlockInvite(e, t);
                                }
                              }),
                              ve.createElement(
                                "div",
                                { className: "displayColumn" },
                                ve.createElement(
                                  "div",
                                  { className: "blockCommunicationLabel" },
                                  Object(re.b)(
                                    "#FriendGroup_IncomingInvites_Block"
                                  )
                                ),
                                ve.createElement(
                                  "div",
                                  {
                                    className:
                                      "blockCommunicationLabel subtitle"
                                  },
                                  Object(re.b)(
                                    "#FriendGroup_IncomingInvites_Block_desc"
                                  )
                                )
                              )
                            )
                        )
                      )
                    );
                  },
                  d = this,
                  h = 0,
                  _ = r;
                h < _.length;
                h++
              ) {
                m(_[h]);
              }
            }
            var f = "friendGroup",
              g = !1,
              b = !1;
            if (
              (t && (f += " noTransitions"),
              this.props.group.modifiable
                ? ((f += " taggedGroup "), (g = !0))
                : this.props.group.m_eDisplayType == rt.eOnlineOnlyNotInGame
                  ? ((f += " onlineFriends "), !0)
                  : this.props.group.m_eDisplayType == rt.eOfflineOnly
                    ? ((f += " offlineFriends "), (b = !0))
                    : this.IsInviteGroup() && (f += " friendRequests "),
              e && (!c || !c.length))
            )
              return null;
            if (0 == c.length && !this.IsCollapsed()) return null;
            var v = 0 != this.m_actions.size,
              S = "SortByRecent";
            return (
              i && (S += " Recent"),
              n && (S += " Collapsed"),
              ve.createElement(
                ji,
                R.a(
                  { className: f },
                  this.GetDragDropProps(
                    this.props.group.modifiable ||
                      this.props.group.accepts_group_removals
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "groupHeaderContainer" },
                  !e &&
                    ve.createElement(
                      "div",
                      {
                        className: "groupName" + (n ? " Collapsed" : ""),
                        onClick: this.ToggleCollapsed,
                        onContextMenu: this.OnContextMenu
                      },
                      ve.createElement(
                        "div",
                        { className: "ExpandPlusMinus" },
                        ve.createElement(Qo.H, null)
                      ),
                      this.props.group.icon_url &&
                        ve.createElement("img", {
                          className: "groupIcon",
                          src: this.props.group.icon_url
                        }),
                      this.props.group.name,
                      !e &&
                        ve.createElement(
                          "span",
                          {
                            className: this.IsCollapsed()
                              ? "groupCount collapsed"
                              : "groupCount"
                          },
                          "(",
                          this.props.group.member_count,
                          ")"
                        ),
                      g && ve.createElement("hr", null)
                    ),
                  b &&
                    ve.createElement(
                      "div",
                      {
                        className: S,
                        onClick: this.ToggleOfflineSortMethod,
                        title: i
                          ? Object(re.b)("#FriendGroup_Tip_SortByRecent")
                          : Object(re.b)("#FriendGroup_Tip_SortByAlphabet")
                      },
                      ve.createElement(Qo.S, null)
                    )
                ),
                ve.createElement(
                  Xo,
                  { className: "groupList", enter: !t, exit: !t },
                  c,
                  l &&
                    ve.createElement(
                      Jo,
                      {
                        key: "inviteButtons",
                        classNames: "opacityfade-anim",
                        timeout: 320
                      },
                      ve.createElement(
                        "div",
                        { className: "confirmInviteRequestContainer" },
                        ve.createElement(
                          "div",
                          { className: "confirmInviteRequestActions" },
                          v
                            ? ve.createElement(
                                "div",
                                {
                                  className:
                                    "confirmInviteButton confirmInvites",
                                  onClick: this.OnConfirmChanges
                                },
                                Object(re.b)("#FriendGroup_ConfirmInvites")
                              )
                            : ve.createElement(
                                "div",
                                {
                                  className:
                                    "confirmInviteButton confirmInvites dim"
                                },
                                Object(re.b)("#FriendGroup_ConfirmInvites")
                              ),
                          ve.createElement(
                            "div",
                            {
                              className:
                                "confirmInviteButton ignoreAllRequests",
                              onClick: this.OnIgnoreAllInvites
                            },
                            Object(re.b)("#FriendGroup_AllIgnore")
                          )
                        ),
                        ve.createElement(
                          "div",
                          {
                            className: "cancelAddFriends",
                            onClick: this.OnCloseInvites,
                            title: Object(re.b)("#FriendGroup_Close")
                          },
                          ve.createElement(Qo.b, { angle: -90 })
                        )
                      )
                    )
                ),
                g && ve.createElement("div", { className: "dropTargetBox" })
              )
            );
          }),
          R.c([M.a], e.prototype, "ToggleCollapsed", null),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "OnFriendSelected", null),
          R.c([M.a], e.prototype, "OnAcceptInvite", null),
          R.c([M.a], e.prototype, "OnDeclineInvite", null),
          R.c([M.a], e.prototype, "OnBlockInvite", null),
          R.c([M.a], e.prototype, "OnConfirmChanges", null),
          R.c([M.a], e.prototype, "OnIgnoreAllInvites", null),
          R.c([M.a], e.prototype, "OnCloseInvites", null),
          R.c([M.a], e.prototype, "ToggleOfflineSortMethod", null),
          (e = R.c([Hi.observer], e))
        );
      })(js);
    function qs(e, t, n) {
      return Object(Zo.a)(
        ve.createElement(Ks, {
          browserContext: e,
          appid: t,
          ownerWindow: n.currentTarget.ownerDocument.defaultView
        }),
        n
      );
    }
    var Ks = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(
              mr.c,
              null,
              ve.createElement(kr, {
                unAppID: this.props.appid,
                bShowLargeHeader: !0
              })
            );
          }),
          t
        );
      })(ve.PureComponent),
      Ys = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bLocalCollapsed: t.props.collapsed }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.GetGroup = function() {
            return this.props.group;
          }),
          (e.prototype.PerformDropAction = function(e) {
            return Promise.reject("FriendGameGroups do not accept drops");
          }),
          (e.prototype.ToggleCollapsed = function() {
            this.props.groupDisplayPrefs
              ? this.props.groupDisplayPrefs.ToggleUserGroupCollapsed(
                  this.props.group.unique_id
                )
              : this.setState({ bLocalCollapsed: !this.state.bLocalCollapsed });
          }),
          (e.prototype.IsCollapsed = function() {
            return this.props.groupDisplayPrefs
              ? this.props.groupDisplayPrefs.GetUserGroupCollapsed(
                  this.props.group.unique_id
                )
              : this.state.bLocalCollapsed;
          }),
          (e.prototype.GetFriendRenderContext = function() {
            return (
              (this.m_FriendRenderContext &&
                this.m_FriendRenderContext.friendGroup == this.props.group) ||
                (this.m_FriendRenderContext = {
                  friendGroup: this.props.group,
                  chatContext: "friendslist"
                }),
              this.m_FriendRenderContext
            );
          }),
          (e.prototype.OnShowHeaderContextMenu = function(e) {
            var t = this.props.group.id;
            t &&
              (Yo.AppInfoStore.GetAppInfo(t).is_valid && qs(zu(this, e), t, e));
          }),
          (e.prototype.render = function() {
            if (
              this.props.bSingletonGroup &&
              0 == this.props.group.unfiltered_count
            )
              return null;
            var e = [];
            if (!this.IsCollapsed()) {
              var t = this.props.group.member_list,
                n = new Map(),
                o = new Map(),
                i = new Map();
              if (!this.props.bSingletonGroup) {
                for (var r = "", a = null, s = 0, c = t; s < c.length; s++) {
                  var l = c[s];
                  a &&
                    l.persona.player_group != r &&
                    n.set(a.accountid, "lastInGroup"),
                    l.persona.player_group &&
                      (i.set(
                        l.persona.player_group,
                        l.persona.player_group_size
                      ),
                      o.has(l.persona.player_group)
                        ? o.set(
                            l.persona.player_group,
                            o.get(l.persona.player_group) + 1
                          )
                        : o.set(l.persona.player_group, 1),
                      l.persona.player_group != r
                        ? (n.set(l.accountid, "firstInGroup"),
                          (r = l.persona.player_group))
                        : n.set(l.accountid, "inGroup"),
                      (a = l));
                }
                a && n.set(a.accountid, "lastInGroup");
              }
              for (
                var p =
                    !this.props.bSingletonGroup && this.props.group.id != _t,
                  u = null,
                  m = 0,
                  d = t;
                m < d.length;
                m++
              ) {
                l = d[m];
                var h = "";
                this.state.friendDraggedOut == l &&
                  this.state.friendDrag != l &&
                  (h += " dragOriginGhost");
                var _ = !1;
                if (n.has(l.accountid)) {
                  _ = !0;
                  var f = n.get(l.accountid);
                  if ("lastInGroup" == f) {
                    var g = o.get(l.persona.player_group),
                      b = i.get(l.persona.player_group);
                    if (b <= 1 && 1 == g) f = "";
                    else if (b && g < b) {
                      var v = !1;
                      Yo.FriendStore.self.persona.player_group ==
                        l.persona.player_group && (v = !0);
                      var S = b - g,
                        y = b - g - (v ? 1 : 0),
                        C = "oneDigit";
                      10 <= S && S < 100
                        ? (C = "twoDigits")
                        : 100 <= S && (C = "manyDigits");
                      var I =
                        1 == y
                          ? "#FriendGroup_PlayerGroupFooter_Label_Singular"
                          : "#FriendGroup_PlayerGroupFooter_Label";
                      v &&
                        (I =
                          0 == y
                            ? "#FriendGroup_PlayerGroupFooter_Label_PlusYouOnly"
                            : 1 == y
                              ? "#FriendGroup_PlayerGroupFooter_Label_PlusYou_Singular"
                              : "#FriendGroup_PlayerGroupFooter_Label_PlusYou"),
                        (f = 1 == g ? "firstInGroup" : "inGroup"),
                        (u = ve.createElement(
                          Jo,
                          {
                            key: l.persona.player_group + "_footer",
                            classNames: "friend-anim",
                            timeout: 320
                          },
                          ve.createElement(
                            "div",
                            {
                              className: "SteamPlayerGroupFooter lastInGroup",
                              draggable: !1
                            },
                            ve.createElement("div", {
                              className: "SteamPlayerGroupLines"
                            }),
                            ve.createElement(
                              "div",
                              { className: "SteamPlayerGroupFooterCount " + C },
                              ve.createElement(
                                "div",
                                { className: "count" },
                                "+",
                                S
                              )
                            ),
                            ve.createElement(
                              "div",
                              { className: "SteamPlayerGroupFooterLabel" },
                              Object(re.b)(I, y)
                            )
                          )
                        ));
                    }
                  }
                  h += " " + f;
                }
                var O = void 0;
                this.props.bSingletonGroup &&
                  (O = ve.createElement(Js, {
                    appid: l.persona.m_unGamePlayedAppID
                  })),
                  e.push(
                    ve.createElement(
                      Jo,
                      {
                        key: l.accountid,
                        classNames: "friend-anim",
                        timeout: 320
                      },
                      ve.createElement(Qs, {
                        friend: l,
                        key: l.accountid,
                        bHideGameName: p,
                        className: h,
                        context: this.GetFriendRenderContext(),
                        bInGroup: _,
                        bFriendsListEntry: !0,
                        listStatusIndicatorLeft: O
                      })
                    )
                  ),
                  u && e.push(u);
              }
            }
            var E = "friendGroup gameGroup",
              w = this.props.group.name,
              M = null;
            return (
              this.props.bSingletonGroup &&
                ((E += " OtherGamesGroup"),
                (M = this.props.bOtherGroups
                  ? Object(re.b)("#FriendGroup_InGame_Others")
                  : Object(re.b)("#FriendGroup_InGame"))),
              ve.createElement(
                ji,
                R.a(
                  { className: E },
                  this.GetDragDropProps(
                    this.props.group.modifiable ||
                      this.props.group.accepts_group_removals
                  )
                ),
                ve.createElement(
                  "div",
                  {
                    className:
                      "groupName" + (this.IsCollapsed() ? " Collapsed" : ""),
                    onClick: this.ToggleCollapsed,
                    onContextMenu: this.OnShowHeaderContextMenu
                  },
                  ve.createElement(
                    "div",
                    { className: "gameGroupContainer" },
                    ve.createElement(
                      "div",
                      { className: "ExpandPlusMinus" },
                      ve.createElement(Qo.H, null)
                    ),
                    M,
                    this.props.group.icon_url &&
                      ve.createElement("img", {
                        className: "groupIcon",
                        src: this.props.group.icon_url
                      })
                  ),
                  w,
                  ve.createElement(
                    "span",
                    {
                      className: this.IsCollapsed()
                        ? "groupCount collapsed"
                        : "groupCount"
                    },
                    "(",
                    this.props.group.member_count,
                    ")"
                  ),
                  ve.createElement("hr", null)
                ),
                ve.createElement(
                  Xo,
                  {
                    className: this.IsCollapsed()
                      ? "friendsContainer groupCollapsed"
                      : "friendsContainer"
                  },
                  e
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "ToggleCollapsed", null),
          R.c([M.a], e.prototype, "OnShowHeaderContextMenu", null),
          (e = R.c([Hi.observer], e))
        );
      })(js),
      Js = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnShowGameIconContextMenu = function(e) {
            qs(zu(this, e), this.props.appid, e);
          }),
          (t.prototype.render = function() {
            var e = Yo.AppInfoStore.GetAppInfo(this.props.appid);
            return e.is_valid
              ? ve.createElement(
                  "div",
                  {
                    className: "FriendInGameIcon",
                    onContextMenu: this.OnShowGameIconContextMenu
                  },
                  ve.createElement("img", {
                    className: "gameIcon",
                    alt: "",
                    src: e.icon_url
                  })
                )
              : ve.createElement(
                  "div",
                  { className: "FriendInGameIcon" },
                  ve.createElement(
                    "div",
                    { className: "FriendInGameIcon_NA" },
                    "N/A"
                  )
                );
          }),
          R.c([M.a], t.prototype, "OnShowGameIconContextMenu", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Xs = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnContextMenu = function(e) {
            if (!this.props.disableContextMenu) {
              var t = void 0;
              if (this.props.onContextMenu) t = this.props.onContextMenu(e);
              else
                t = Qu.FriendHoverStore.GetHover(
                  this.props.friend
                ).OnContextMenu(this.props.context, e);
              t &&
                this.props.onContextMenuShown &&
                this.props.onContextMenuShown(t);
            }
          }),
          (t.prototype.componentWillUnmount = function() {
            Qu.FriendHoverStore.GetHover(this.props.friend).HideByElement(
              W.findDOMNode(this)
            );
          }),
          (t.prototype.render = function() {
            var e = ve.Children.only(this.props.children);
            if (e) {
              var t = this.props,
                n = Qu.FriendHoverStore.GetHover(t.friend);
              return ve.cloneElement(e, {
                onMouseEnter: function(e) {
                  return n.Show(e, t.context);
                },
                onMouseLeave: n.Hide,
                onContextMenu: this.OnContextMenu
              });
            }
            return this.props.children;
          }),
          R.c([M.a], t.prototype, "OnContextMenu", null),
          t
        );
      })(ve.Component),
      Qs = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bActive: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnDoubleClick = function(e) {
            this.RunAction(!0, e);
          }),
          (e.prototype.OnClick = function(e) {
            this.RunAction(!1, e);
          }),
          (e.prototype.RunAction = function(e, t) {
            !this.props.bSingleClickActivate == e &&
              (this.props.action
                ? this.props.action(this.props.friend)
                : this.props.noActions ||
                  this.props.friend.OpenChatDialog(zu(this, t)));
          }),
          (e.prototype.OnDragStart = function(e) {
            e.dataTransfer.setData(
              "text/plain",
              this.props.friend.persona.m_strPlayerName
            ),
              e.dataTransfer.setData(
                "text/steamid",
                this.props.friend.persona.m_steamid.ConvertTo64BitString()
              ),
              this.props.friend.is_friend
                ? Qu.DragDropManager.StartDrag({
                    type: "friend",
                    source: this.props.context.chatContext,
                    friend: this.props.friend,
                    sourceContext: this.props.context
                  })
                : Qu.DragDropManager.StartDrag({
                    type: "nonfriend",
                    source: this.props.context.chatContext,
                    friend: this.props.friend,
                    sourceContext: this.props.context
                  }),
              Qu.FriendHoverStore.GetHover(
                this.props.friend
              ).HideAllInstances();
          }),
          (e.prototype.OnDragEnd = function(e) {
            Qu.DragDropManager.EndDrag();
          }),
          (e.prototype.OnShowContextMenu = function(e) {
            var t = Er(zu(this, e), this.props.context, this.props.friend, e);
            t && this.OnContextMenuShown(t);
          }),
          (e.prototype.OnContextMenuShown = function(e) {
            var t = this;
            this.setState({ bActive: !0 }),
              e.SetOnHideCallback(function() {
                t.setState({ bActive: !1 });
              });
          }),
          (e.prototype.render = function() {
            var e = this.props.friend;
            if ((e.LoadIfNecessary(), !e.is_ready))
              return ve.createElement("div", null);
            var t = Yo.CMInterface.steamid.GetAccountID() == e.accountid,
              n = "",
              o = (this.props.avatarQualityFull, 0);
            this.props.showVoiceLevel &&
              (o = Yo.VoiceStore.get_volume(e.accountid));
            var i = { className: "friend " + ws(e.persona) };
            this.props.className && (i.className += " " + this.props.className),
              this.props.bFriendsListEntry &&
                (i.className += " friendStatusHover");
            var r,
              a = "",
              s = "";
            if (t) {
              var c = Yo.VoiceStore.IsAttemptingInitialConnection(),
                l = Yo.VoiceStore.HasBeenAttemptingOverTwoSeconds(),
                p = Yo.VoiceStore.IsAttemptingReconnect();
              l
                ? ((n = Object(re.b)("#VoiceChatConnecting")),
                  t &&
                    ((a =
                      "https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"),
                    (s = Object(re.b)("#VoiceChatConnectingHelp"))))
                : p &&
                  ((n = Object(re.b)("#VoiceChatReconnecting")),
                  t &&
                    ((a =
                      "https://support.steampowered.com/kb_article.php?ref=2598-RTZB-6114"),
                    (s = Object(re.b)("#VoiceChatConnectingHelp"))));
              var u = "";
              c && (u += " connecting"),
                l && (u += " slowconnecting"),
                p && (u += " reconnecting"),
                (i.className += u);
            }
            if (
              ((this.props.noActions && !this.props.action) ||
                ((i.onDoubleClick = this.OnDoubleClick),
                (i.onClick = this.OnClick)),
              this.props.noActions ||
                this.props.notDraggable ||
                ((i.onDragStart = this.OnDragStart),
                (i.onDragEnd = this.OnDragEnd),
                (i.draggable = !0)),
              this.props.children)
            )
              r = ve.createElement("div", R.a({}, i), this.props.children);
            else {
              var m = {};
              if (this.props.showVoiceLevel && 1 != o) {
                var d = Math.min(3.2 * o, 1),
                  h = Math.max(0, 100 * d);
                (h = Math.round(10 * h) / 10),
                  (m.height = h + "%"),
                  (m.top = "auto"),
                  1 < h && (i.className += " speaking");
              }
              0,
                this.state.bActive &&
                  (i.className += " Friend_ContextMenuActive");
              var _ = Yo.VoiceStore.GetPerUserMuting(e.accountid);
              r = ve.createElement(
                "div",
                R.a({}, i),
                this.props.bInGroup &&
                  ve.createElement("div", {
                    className: "SteamPlayerGroupLines"
                  }),
                this.props.bInVoiceList && ve.createElement(Zs, { friend: e }),
                this.props.listStatusIndicatorLeft,
                ve.createElement(
                  "div",
                  { className: "avatarHolder no-drag" },
                  ve.createElement("div", {
                    className: "avatarStatus",
                    style: m
                  }),
                  ve.createElement("img", {
                    className: "avatar",
                    src: this.props.avatarQualityFull
                      ? e.persona.avatar_url_full
                      : e.persona.avatar_url_medium,
                    draggable: !1
                  }),
                  this.props.bInVoiceList && _ && ve.createElement(Qo.db, null)
                ),
                ve.createElement(ec, {
                  friend: e,
                  strOverrideStatus: n,
                  strStatusURL: a,
                  strStatusURLTitle: s,
                  bHideGameName: this.props.bHideGameName,
                  bForcePersonaNameDisplay: this.props.bForcePersonaNameDisplay,
                  onShowContextMenu:
                    !this.props.noActions &&
                    !this.props.disableContextMenu &&
                    this.OnShowContextMenu,
                  bHidePersona: this.props.bHidePersona,
                  bHideCustomPendingStatus:
                    this.props.context &&
                    "chatmemberlist" == this.props.context.chatContext
                }),
                null,
                this.props.listStatusIndicator
              );
            }
            return this.props.noActions
              ? r
              : ve.createElement(
                  Xs,
                  {
                    friend: e,
                    context: this.props.context,
                    disableContextMenu: this.props.disableContextMenu,
                    onContextMenuShown: this.OnContextMenuShown
                  },
                  r
                );
          }),
          R.c([M.a], e.prototype, "OnDoubleClick", null),
          R.c([M.a], e.prototype, "OnClick", null),
          R.c([M.a], e.prototype, "OnDragStart", null),
          R.c([M.a], e.prototype, "OnDragEnd", null),
          R.c([M.a], e.prototype, "OnShowContextMenu", null),
          R.c([M.a], e.prototype, "OnContextMenuShown", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Zs = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.friend,
              t = Yo.CMInterface.steamid.GetAccountID() == e.accountid,
              n = "voiceStatusIconsContainer",
              o = "",
              i = "",
              r = !1,
              a = !1,
              s = !1,
              c = Yo.VoiceStore.GetPerUserMuting(e.accountid),
              l = Yo.VoiceStore.GetUserMutedRemotely(e.accountid),
              p = Yo.VoiceStore.GetOutputMutedRemotely(e.accountid);
            return (
              t
                ? ((r = Yo.VoiceStore.IsMicMuted()),
                  (a = Yo.VoiceStore.IsOutputMuted()),
                  (s = Yo.VoiceStore.BNoMicAvailableForSession()),
                  r && (n += " mic_muted_self"),
                  a && (n += " output_muted_self"))
                : (s = Yo.VoiceStore.GetUserHasNoMicForSession(e.accountid)),
              c && (n += " muted_locally"),
              l && (n += " mic_muted_remotely"),
              p && (n += " output_muted_remotely"),
              s && (n += " no_mic_for_session"),
              s
                ? (o = Object(re.b)("#Tooltip_MicStatus_NoMic"))
                : l
                  ? (o = Object(re.b)("#Tooltip_RemoteMicStatus_Muted"))
                  : r && (o = Object(re.b)("#Tooltip_YourMicStatus_Muted")),
              p
                ? (i = Object(re.b)("#Tooltip_RemoteOutputStatus_Muted"))
                : a && (i = Object(re.b)("#Tooltip_YourOutputStatus_Muted")),
              ve.createElement(
                "div",
                { className: n },
                ve.createElement(
                  "div",
                  {
                    className: "voicestatusIcon voiceStatusMic disabled",
                    title: o
                  },
                  ve.createElement(Qo.B, null)
                ),
                ve.createElement(
                  "div",
                  {
                    className: "voicestatusIcon voiceStatusOutput disabled",
                    title: i
                  },
                  ve.createElement(Qo.s, null)
                )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      $s = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.friend,
              t = { className: "friend FriendAvatar " + ws(e.persona) };
            this.props.bLarge && (t.className += " FriendAvatar_Large"),
              this.props.className &&
                (t.className += " " + this.props.className);
            var n = ve.createElement(
              "div",
              R.a({}, t),
              this.props.children,
              ve.createElement(
                "div",
                {
                  className:
                    "avatarHolder" + (this.props.bLarge ? " Large" : "")
                },
                ve.createElement("div", { className: "avatarStatus" }),
                ve.createElement("img", {
                  className: "avatar",
                  src: this.props.bLarge
                    ? e.persona.avatar_url_full
                    : e.persona.avatar_url_medium
                })
              )
            );
            return ve.createElement(
              Xs,
              { friend: e, context: this.props.context },
              n
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ec = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.friend,
              t = null,
              n = null,
              o = null,
              i = 2 == e.efriendrelationship,
              r = null,
              a = null,
              s = "labelHolder";
            if (this.props.strOverrideStatus) o = this.props.strOverrideStatus;
            else if (i && !this.props.bHideCustomPendingStatus)
              void 0 ===
              (r = Yo.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(
                e.steamid64
              ))
                ? (Yo.FriendStore.FriendGroupStore.EnsureMutualFriendsForIncomingInvites(),
                  (o = Object(re.b)("#FriendGroup_NoMutualFriends")),
                  (s += " noMutualFriends"))
                : ((o = Object(re.c)("#FriendGroup_YesMutualFriends", r.size)),
                  (a = r.size));
            else if (e.is_blocked)
              (o = Object(re.b)("#PersonaStateBlocked")),
                (s += " StatusLabel_Blocked");
            else if (e.persona.is_ingame) {
              o = e.persona.current_game_name;
              var c = Yo.FriendStore.self == e;
              c || this.props.bHidePersona
                ? c &&
                  e.persona.is_awayOrSnooze &&
                  (n = Object(re.b)("#PersonaStateAway"))
                : (n = e.persona.current_game_rich_presence);
            } else if (
              e.persona.m_broadcastAccountId &&
              IsFeatureBroadcastEnabled()
            ) {
              var l = e.GetBroadcastDescription();
              l &&
                ((o = Object(re.b)("#PersonaStateWatchingBroadcast")), (n = l));
            }
            o || (o = e.localized_online_status),
              e.persona.is_awayOrSnooze &&
                !this.props.bHidePersona &&
                (t = ve.createElement(Hs, null)),
              (!this.props.bHideGameName && n) || (s += " twoLine");
            var p = null;
            this.props.onShowContextMenu
              ? (p = ve.createElement(
                  "div",
                  {
                    className: "ContextMenuButton",
                    onClick: this.props.onShowContextMenu
                  },
                  ve.createElement(Qo.l, null)
                ))
              : (s += " NoContextMenu"),
              this.props.bHidePersona && (s += " HidePersona");
            var u = null;
            return (
              (u = i
                ? ve.createElement(
                    "div",
                    { className: "gameName richPresenceLabel no-drag" },
                    ve.createElement(
                      "span",
                      { className: "mutualFriendNumber" },
                      a && a + ""
                    ),
                    o
                  )
                : null != this.props.strStatusURL &&
                  "" != this.props.strStatusURL
                  ? ve.createElement(
                      "div",
                      { className: "gameName richPresenceLabel no-drag" },
                      ve.createElement(
                        "a",
                        {
                          target: "_blank",
                          title: this.props.strStatusURLTitle
                            ? this.props.strStatusURLTitle
                            : "",
                          href: this.props.strStatusURL
                        },
                        o
                      )
                    )
                  : ve.createElement(
                      "div",
                      { className: "gameName richPresenceLabel no-drag" },
                      o
                    )),
              ve.createElement(
                "div",
                { className: s },
                ve.createElement(
                  "div",
                  { className: "statusAndName" },
                  ve.createElement(
                    "div",
                    { className: "playerName" },
                    e.primary_display_name || "",
                    !e.is_display_name_nickname &&
                      e.has_secondary_display_name &&
                      ve.createElement(
                        "span",
                        { className: "playerNickname" },
                        "(",
                        e.secondary_display_name,
                        ")"
                      )
                  ),
                  this.props.bDNDSet &&
                    ve.createElement(
                      "div",
                      {
                        className: "DNDContainer",
                        title: Object(re.b)("#User_ToggleDoNotDisturb")
                      },
                      ve.createElement(Qo.j, null)
                    ),
                  e.is_display_name_nickname &&
                    ve.createElement(
                      "span",
                      {
                        className: "playerNicknameBracket",
                        title: Object(re.b)("#isNickname")
                      },
                      " *"
                    ),
                  t,
                  p
                ),
                !this.props.bHidePersona &&
                  ve.createElement(
                    "div",
                    { className: "richPresenceContainer" },
                    (!this.props.bHideGameName || !n) && u,
                    n &&
                      ve.createElement(
                        "div",
                        { className: "richPresenceLabel no-drag" },
                        n
                      )
                  )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      tc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e,
              t = Yo.ChatStore.FriendChatStore.GetUnreadFriendMessageCount(
                this.props.browserContext
              );
            return (
              this.props.bScrolledFromTop &&
                0 < t &&
                (e = ve.createElement(
                  Jo,
                  { classNames: "unread-messages-anim", timeout: 320 },
                  ve.createElement(
                    "div",
                    {
                      className: "unreadMessageViolator",
                      onClick: this.props.onClick
                    },
                    1 == t &&
                      Object(re.b)("#FriendGroup_UnreadMessagesViolator"),
                    1 < t &&
                      Object(re.b)(
                        "#FriendGroup_UnreadMessagesViolatorPlural",
                        t
                      )
                  )
                )),
              ve.createElement(Xo, null, e)
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      nc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { collapsed: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnHeaderClick = function(e) {
            this.setState({ collapsed: !this.state.collapsed });
          }),
          (e.prototype.render = function() {
            var e = this.props.friendChatStore.GetFriendsWithUnreadMessages(
              this.props.browserContext
            );
            if (!e.length) return null;
            var t = this.state.collapsed,
              n = t
                ? null
                : e.map(function(e) {
                    var t = e.unread_message_count,
                      n = e.chat_partner,
                      o = ve.createElement(
                        "div",
                        { className: "FriendMessageCount" },
                        t
                      );
                    return ve.createElement(
                      Jo,
                      {
                        key: n.accountid,
                        classNames: "friend-anim",
                        timeout: 320
                      },
                      ve.createElement(
                        "div",
                        { className: "unreadFriend" },
                        ve.createElement(Qs, {
                          friend: n,
                          key: n.accountid,
                          context: { chat: e },
                          bFriendsListEntry: !0
                        }),
                        o
                      )
                    );
                  });
            return ve.createElement(
              "div",
              { className: "friendGroup" },
              ve.createElement(
                "div",
                {
                  className: "groupName" + (t ? " Collapsed" : ""),
                  onClick: this.OnHeaderClick
                },
                ve.createElement(
                  "div",
                  { className: "ExpandPlusMinus" },
                  ve.createElement(Qo.H, null)
                ),
                Object(re.b)("#FriendGroup_UnreadMessages"),
                ve.createElement(
                  "span",
                  { className: "groupCount" },
                  "(",
                  e.length,
                  ")"
                ),
                ve.createElement("hr", null)
              ),
              ve.createElement(Xo, null, n)
            );
          }),
          R.c([M.a], e.prototype, "OnHeaderClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component);
    ve.Component;
    var oc = (function(n) {
      function e(e) {
        var t = n.call(this, e) || this;
        return (
          (t.m_bNoSpace = !1),
          (t.state = { x: void 0, y: void 0, hoverPositionReady: !1 }),
          t
        );
      }
      return (
        R.d(e, n),
        (e.prototype.bindHover = function(e) {
          (this.m_elHover = e || void 0), this.positionHover();
        }),
        (e.prototype.componentDidUpdate = function() {
          this.positionHover();
        }),
        (e.prototype.render = function() {
          var e = Object.assign(
              { left: this.state.x, top: this.state.y },
              this.props.style
            ),
            t =
              !this.props.visibilityObserver ||
              this.props.visibilityObserver.visible,
            n =
              (this.props.className || "") +
              " HoverPosition" +
              (t && this.state.hoverPositionReady ? " ready" : "") +
              (this.m_bNoSpace ? " nospace" : "");
          return ve.createElement(
            "div",
            { className: n, style: e, ref: this.bindHover },
            this.props.children
          );
        }),
        (e.prototype.positionHover = function() {
          var e = this.m_elHover,
            t = this.props.target;
          if (
            e &&
            t &&
            (!this.state.hoverPositionReady ||
              !this.props.visibilityObserver ||
              this.props.visibilityObserver.visible)
          ) {
            var n = t.ownerDocument.defaultView;
            if (n && !n.closed) {
              var o = e.querySelector(".hover_arrow.left"),
                i = e.querySelector(".hover_arrow.right"),
                r = i,
                a = t.getBoundingClientRect(),
                s = e.getBoundingClientRect(),
                c = a.left,
                l = a.top,
                p = a.right + s.width + 14,
                u = n.innerWidth - p,
                m = a.left - s.width;
              if (u < 14 && u < m) {
                if ((c = a.left - s.width + 2 + 3) < -10)
                  return (
                    e.setAttribute("style", "display: none;"),
                    (this.m_bNoSpace = !0),
                    void (this.props.onNoSpace && this.props.onNoSpace())
                  );
                o && o.setAttribute("style", "display: none;"),
                  i && i.setAttribute("style", "");
              } else {
                if ((c = a.left + a.width - 2) + s.width - 10 > n.innerWidth)
                  return (
                    e.setAttribute("style", "display: none;"),
                    (this.m_bNoSpace = !0),
                    void (this.props.onNoSpace && this.props.onNoSpace())
                  );
                (r = o) && o.setAttribute("style", ""),
                  i && i.setAttribute("style", "display: none;");
              }
              var d = 0;
              if (
                (a.height < 48 && (d = Math.floor(a.height / 2) - 24),
                (l = a.top - 15 + d),
                a.top + s.height + 35 > n.innerHeight)
              ) {
                var h = s.height + 35 - (n.innerHeight - a.top),
                  _ = null != e.querySelector(".miniprofile_ingame") ? 78 : 24;
                h = Math.min(s.height - _, h);
                var f = a.top - h;
                r && r.setAttribute("style", "top: " + (30 + l - f) + "px"),
                  (l = f);
              }
              c != this.state.x && this.setState({ x: c }),
                l != this.state.y && this.setState({ y: l }),
                this.state.hoverPositionReady ||
                  this.setState({ hoverPositionReady: !0 });
            }
          }
        }),
        R.c([M.a], e.prototype, "bindHover", null),
        (e = R.c([Hi.observer], e))
      );
    })(ve.Component);
    function ic(e) {
      return ve.createElement(
        oc,
        {
          target: e.target,
          className: "friendHover miniProfileHover",
          visibilityObserver: e.hoverInstance,
          onNoSpace: e.onNoSpace
        },
        ve.createElement(rc, { hoverInstance: e.hoverInstance })
      );
    }
    var rc = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = this.props.hoverInstance.hover,
              t = e.persona,
              n = (e.community_data_ready, void 0);
            e.community_data_ready &&
              (n = ve.createElement(
                "div",
                { className: "miniProfileFeaturedContainer" },
                ve.createElement(
                  "div",
                  { className: e.player_level_class },
                  ve.createElement(
                    "span",
                    { className: "friendPlayerLevelNum" },
                    e.player_level
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "featuredLabels" },
                  ve.createElement(
                    "div",
                    { className: "featuredTitle" },
                    Object(re.b)("#Hover_SteamLevel") + " "
                  )
                )
              ));
            var o = e.player_badge,
              i = void 0;
            o &&
              (i = ve.createElement(
                "div",
                { className: "miniProfileFeaturedContainer" },
                ve.createElement(
                  "div",
                  { className: "favoriteBadgeIcon" },
                  ve.createElement("img", {
                    src: o.icon,
                    className: "badgeIcon"
                  })
                ),
                ve.createElement(
                  "div",
                  { className: "featuredLabels favoriteBadgeDescription" },
                  ve.createElement(
                    "div",
                    { className: "featuredTitle" },
                    o.name
                  ),
                  ve.createElement(
                    "div",
                    { className: "featuredSubTitle" },
                    Object(re.b)("#Hover_BadgeXP", o.xp)
                  )
                )
              ));
            var r = void 0,
              a = "miniProfileContent";
            if (t.is_ingame) {
              var s = "";
              if (t.m_unGamePlayedAppID) {
                var c = Yo.AppInfoStore.GetAppInfo(t.m_unGamePlayedAppID);
                c && (s = c.logo_url);
              }
              r = ve.createElement(
                "div",
                { className: "miniProfileGameContainer" },
                s && ve.createElement("img", { className: "gameLogo", src: s }),
                ve.createElement(
                  "div",
                  { className: "gameContent persona in-game ellipsis" },
                  ve.createElement(
                    "div",
                    { className: "gameState" },
                    Object(re.b)(
                      t.is_in_nonsteam_game
                        ? "#PersonaStateInNonSteamGame"
                        : "#PersonaStateInGame"
                    )
                  ),
                  t.current_game_name,
                  t.current_game_rich_presence &&
                    ve.createElement(
                      "div",
                      { className: "richPresence" },
                      t.current_game_rich_presence
                    )
                )
              );
            } else a += " notInGame";
            var l = !0,
              p = !1,
              u = !1;
            e.friend.is_friend ||
              e.friend == Yo.FriendStore.self ||
              ((a += " notFriends"), (l = !1)),
              e.friend.is_blocked && ((a += " communicationBlocked"), (u = !0));
            var m = e.friend.has_nickname,
              d = void 0,
              h = null,
              _ = !1;
            t.is_awayOrSnooze && ((h = ve.createElement(Hs, null)), (_ = !0));
            var f = ve.createElement("div", null),
              g = this.props.hoverInstance.context;
            if (
              g &&
              g.friendGroup &&
              g.friendGroup.m_eDisplayType == rt.eIncomingInvites
            ) {
              var b = Yo.FriendStore.FriendGroupStore.incoming_invites_group.map_steamid_to_mutual_friends.get(
                e.friend.steamid64
              );
              if (null != b) {
                f = ve.createElement(
                  "div",
                  { className: "mutualFriendTitle" },
                  " ",
                  Object(re.b)("#FriendGroup_MutualFriends_Title"),
                  " "
                );
                for (
                  var v = [], S = Array.from(b), y = 0;
                  y < S.length && y < 10;
                  y++
                ) {
                  var C = Yo.FriendStore.GetFriend(S[y]);
                  v.push(
                    ve.createElement(
                      "div",
                      { className: "mutualFriend" },
                      ve.createElement("img", {
                        className: "mutualFriendAvatar",
                        src: C.persona.avatar_url_medium
                      }),
                      ve.createElement(
                        "div",
                        { className: "mutualFriendLabel" },
                        C.display_name
                      )
                    )
                  );
                }
                10 <= S.length &&
                  v.push(
                    ve.createElement(
                      "div",
                      { className: "mutualFriend" },
                      ve.createElement(
                        "div",
                        { className: "mutualFriendLabel plusOthersLabel" },
                        Object(re.c)(
                          "#FriendGroup_MutualFriends_Others",
                          S.length - 10
                        )
                      )
                    )
                  ),
                  (f = ve.createElement(
                    "div",
                    { className: "mutualFriendsContainer" },
                    " ",
                    f,
                    " ",
                    ve.createElement("div", null, " ", v, " "),
                    " "
                  ));
              }
            }
            d = m
              ? ve.createElement(
                  "div",
                  { className: "personaName hasNickname" },
                  "(",
                  ve.createElement(
                    "div",
                    { className: "personaNameLabel" },
                    t.m_strPlayerName
                  ),
                  ")"
                )
              : ve.createElement(
                  "div",
                  { className: "personaName" },
                  ve.createElement(
                    "div",
                    { className: "personaNameLabel" },
                    t.m_strPlayerName
                  )
                );
            var I = "miniProfilePlayer " + t.online_state;
            return (
              _ && (I += " isAway"),
              2 == e.friend.efriendrelationship && (p = !0),
              ve.createElement(
                ve.Fragment,
                null,
                ve.createElement(
                  "div",
                  { className: "miniProfileHoverInner" },
                  ve.createElement(
                    "div",
                    { className: a },
                    ve.createElement(
                      "div",
                      { className: "miniProfileBackground" },
                      ve.createElement("img", {
                        className: "miniProfileBackgroundBlur",
                        src: t.avatar_url
                      })
                    ),
                    ve.createElement(
                      "div",
                      { className: "miniProfileHeader" },
                      ve.createElement(
                        "div",
                        { className: I },
                        ve.createElement(
                          "div",
                          { className: "playerAvatar" },
                          ve.createElement("img", { src: t.avatar_url_full }),
                          ve.createElement("div", {
                            className: "avatarStatus miniProfileAvatarStatus"
                          })
                        ),
                        h,
                        ve.createElement(
                          "div",
                          { className: "playerContent" },
                          ve.createElement(
                            "div",
                            { className: "playerName" },
                            ve.createElement(
                              "div",
                              { className: "persona" },
                              m &&
                                ve.createElement(
                                  "div",
                                  { className: "personaName nickName" },
                                  ve.createElement(
                                    "div",
                                    { className: "personaNameLabel" },
                                    e.friend.nickname
                                  ),
                                  ve.createElement(
                                    "div",
                                    {
                                      className: "playerNicknameBracket",
                                      title: Object(re.b)("#isNickname")
                                    },
                                    "*"
                                  )
                                ),
                              d,
                              _ &&
                                ve.createElement(
                                  "div",
                                  { className: "awayStatusLabel" },
                                  Object(re.b)("#PersonaStateAway")
                                ),
                              "offline" == t.online_state &&
                                ve.createElement(
                                  "div",
                                  { className: "awayStatusLabel" },
                                  e.friend.localized_online_status
                                ),
                              "online" == t.online_state &&
                                !_ &&
                                ve.createElement(
                                  "div",
                                  { className: "awayStatusLabel" },
                                  Object(re.b)("#PersonaStateOnline")
                                ),
                              !l &&
                                ve.createElement(
                                  "div",
                                  { className: "miniProfileNotFriends" },
                                  p
                                    ? Object(re.b)(
                                        "#Friend_Menu_NotAFriendRequesting"
                                      )
                                    : Object(re.b)(
                                        "#Friend_Menu_NotAFriendLabel"
                                      )
                                ),
                              u &&
                                ve.createElement(
                                  "div",
                                  { className: "miniProfileBlocked" },
                                  Object(re.b)("#PersonaStateBlocked")
                                )
                            )
                          )
                        )
                      )
                    ),
                    r,
                    ve.createElement(
                      "div",
                      { className: "miniProfileBottom" },
                      i,
                      n
                    ),
                    ve.createElement(
                      "div",
                      { className: "mutualFriends" },
                      " ",
                      f,
                      " "
                    )
                  )
                )
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ac = (function(i) {
        function e(e, t, n) {
          var o =
            i.call(
              this,
              {
                target: e,
                visibilityObserver: t,
                className: "friendHover miniProfileHover"
              },
              n
            ) || this;
          return (o.m_instance = t), o;
        }
        return (
          R.d(e, i),
          (e.prototype.OnLoad = function() {}),
          (e.prototype.OnResize = function() {}),
          (e.prototype.OnClose = function() {}),
          (e.prototype.InternalRender = function() {
            return ve.createElement(rc, { hoverInstance: this.m_instance });
          }),
          e
        );
      })(
        (function(o) {
          function e(e, t) {
            var n =
              o.call(this, "hoverpopup", {
                title: "hover",
                html_class: "HoverPopup client_chat_frame",
                body_class: "HoverPopupBody Hover" + e.className,
                replace_existing_popup: !0,
                target_browser: t,
                eCreationFlags: Wi.c.Tooltip
              }) || this;
            return (n.m_hoverProps = e), n;
          }
          return (
            R.d(e, o),
            (e.prototype.UpdateParamsBeforeShow = function(e) {
              var t = ci.h(
                this.m_hoverProps.target.ownerDocument.defaultView,
                this.m_hoverProps.target.getBoundingClientRect()
              );
              return (
                (e.dimensions = {
                  left: t.right,
                  top: t.top,
                  width: 1,
                  height: 1
                }),
                (e.availscreenwidth = this.m_hoverProps.target.ownerDocument.defaultView.screen.availWidth),
                (e.availscreenheight = this.m_hoverProps.target.ownerDocument.defaultView.screen.availHeight),
                e
              );
            }),
            (e.prototype.Render = function(e, t) {
              var n = this.InternalRender();
              W.render(
                ve.createElement(
                  sc,
                  R.a({}, this.m_hoverProps, { popup: e }),
                  n
                ),
                t
              );
            }),
            e
          );
        })(Wi.a)
      ),
      sc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bNoSpace = !1),
            (t.state = {
              x: void 0,
              y: void 0,
              width: void 0,
              height: void 0,
              hoverPositionReady: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.bindHover = function(e) {
            (this.m_elHover = e || void 0), this.positionHover();
          }),
          (e.prototype.componentDidUpdate = function() {
            this.positionHover();
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            this.setState({ hoverPositionReady: !1 });
          }),
          (e.prototype.render = function() {
            var o = this,
              e =
                !this.props.visibilityObserver ||
                this.props.visibilityObserver.visible;
            this.props.className,
              e && this.state.hoverPositionReady,
              this.m_bNoSpace;
            return (
              void 0 !== this.state.x &&
                this.props.target.ownerDocument.defaultView.SteamClient.Window.GetWindowRestoreDetails(
                  function(e) {
                    var t =
                        o.state.x -
                        o.props.target.ownerDocument.defaultView.screenX,
                      n =
                        o.state.y -
                        o.props.target.ownerDocument.defaultView.screenY;
                    try {
                      o.props.popup.SteamClient.Window.PositionWindowRelative(
                        e,
                        t,
                        n,
                        o.state.width,
                        o.state.height
                      );
                    } catch (e) {
                      console.error(e);
                    }
                  }
                ),
              ve.createElement(
                "div",
                { className: "HoverPositionPopup", ref: this.bindHover },
                this.props.children
              )
            );
          }),
          (e.prototype.positionHover = function() {
            var e = this.m_elHover,
              t = this.props.target;
            if (
              e &&
              t &&
              (!this.state.hoverPositionReady ||
                !this.props.visibilityObserver ||
                this.props.visibilityObserver.visible)
            ) {
              var n = this.props.popup,
                o = t.ownerDocument.defaultView;
              if (n && !n.closed) {
                var i = ci.h(o, t.getBoundingClientRect()),
                  r = ci.h(n, e.getBoundingClientRect()),
                  a = i.left,
                  s = i.top,
                  c = n.screen,
                  l = 0;
                c.availLeft && (l = c.availLeft);
                var p = i.right + r.width + 2,
                  u = n.screen.availWidth + l - p,
                  m = i.left - r.width - l;
                a =
                  u < 2 && u < m
                    ? i.left - r.width - 3 + 3
                    : i.left + i.width - -3;
                var d = 0;
                i.height < 48 && (d = Math.floor(i.height / 2) - 24),
                  (s = i.top - 15 + d);
                if (i.top + r.height + 0 > n.screen.availHeight) {
                  var h = r.height + 0 - (n.screen.availHeight - i.top),
                    _ =
                      null != e.querySelector(".miniprofile_ingame") ? 78 : 24;
                  (h = Math.min(r.height - _, h)), (s = i.top - h);
                }
                (a = Math.floor(a)), (s = Math.floor(s));
                var f = Math.ceil(r.width),
                  g = Math.ceil(r.height);
                a != this.state.x && this.setState({ x: a }),
                  s != this.state.y && this.setState({ y: s }),
                  f != this.state.width && this.setState({ width: f }),
                  g != this.state.height && this.setState({ height: g }),
                  this.state.hoverPositionReady ||
                    this.setState({ hoverPositionReady: !0 });
              }
            }
          }),
          R.c([M.a], e.prototype, "bindHover", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      cc = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            if (null == this.props.text)
              return ve.createElement(ve.Fragment, null, this.props.children);
            var e;
            if (
              ((e =
                this.props.text instanceof Array
                  ? this.props.text
                      .map(function(e) {
                        return e ? e.toString() : "";
                      })
                      .filter(function(e) {
                        return 0 < e.length;
                      })
                      .join("\n")
                  : this.props.text.toString()),
              1 == ve.Children.count(this.props.children))
            ) {
              var t = ve.Children.only(this.props.children);
              return ve.cloneElement(t, {
                "data-copystyle": this.props.style,
                "data-copytext": e
              });
            }
            return (
              console.log(
                "Error: CopyableText must be the parent of exactly one child:\n\tcopystyle=" +
                  this.props.style +
                  " copytext=" +
                  e
              ),
              ve.createElement(ve.Fragment, null, this.props.children)
            );
          }),
          (e.defaultProps = { text: "" }),
          e
        );
      })(ve.Component),
      lc = (function(e) {
        function n() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(n, e),
          (n.OnMouseEnter = function(e) {
            Qu.EmoticonHoverStore.GetEmoticonHover(
              e.currentTarget.getAttribute("data-emoticon")
            ).Show(e);
          }),
          (n.OnMouseLeave = function(e) {
            Qu.EmoticonHoverStore.GetEmoticonHover(
              e.currentTarget.getAttribute("data-emoticon")
            ).Hide(e);
          }),
          (n.prototype.render = function() {
            var e = "emoticon";
            this.props.large && (e += " large");
            var t = ":" + this.props.emoticon + ":";
            return ve.createElement(
              cc,
              { text: t },
              ve.createElement("img", {
                src: jt.GetEmoticonURL(this.props.emoticon, this.props.large),
                alt: t,
                className: e,
                "data-emoticon": this.props.emoticon,
                onMouseEnter: n.OnMouseEnter,
                onMouseLeave: n.OnMouseLeave
              })
            );
          }),
          n
        );
      })(ve.PureComponent),
      pc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(
              oc,
              {
                visibilityObserver: this.props.hover,
                target: this.props.target,
                className: "emoticon_hover FriendsUIEmoticonHover"
              },
              ve.createElement("div", {
                className: "emoticon_hover_content",
                dangerouslySetInnerHTML: {
                  __html: this.props.hover.emoticon_html
                }
              }),
              ve.createElement("div", {
                className: "hover_arrow left emoticon_hover_arrow"
              }),
              ve.createElement("div", {
                className: "hover_arrow right emoticon_hover_arrow"
              })
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      uc = (function(o) {
        function e(e) {
          var t = o.call(this, e) || this;
          (t.m_ScrollCoordinator = new ci.f(40)),
            (t.state = { strSearchText: "" });
          var n = Yo.ChatStore.EmoticonStore;
          return (
            n.is_initialized ||
              (n.emoticon_list,
              (t.m_disposeEmoticonStore = Object(m.when)(
                function() {
                  return n.is_initialized;
                },
                function() {
                  return t.forceUpdate();
                }
              ))),
            t
          );
        }
        return (
          R.d(e, o),
          (e.prototype.componentWillUnmount = function() {
            this.m_disposeEmoticonStore && this.m_disposeEmoticonStore();
          }),
          (e.prototype.OnClick = function(e) {
            var t = e.currentTarget.getAttribute("data-emoticon");
            this.props.OnSelected(t, e.shiftKey),
              Qu.EmoticonHoverStore.GetEmoticonHover(t).Hide(e);
          }),
          (e.prototype.OnSearchInput = function(e) {
            var t = e.currentTarget.value;
            this.setState({ strSearchText: t });
          }),
          (e.prototype.OnSubmit = function(e) {
            e.preventDefault(),
              this.m_strFirstEmoticon &&
                this.props.OnSelected(this.m_strFirstEmoticon, !1);
          }),
          (e.prototype.RenderEmoticon = function(e, t) {
            var n = t.name;
            return (
              e && (n = e + t.name),
              ve.createElement(dc, {
                key: n,
                emoticon: t,
                onClick: this.OnClick,
                coordinator: this.m_ScrollCoordinator
              })
            );
          }),
          (e.prototype.OnScrollRef = function(e) {
            this.m_ScrollCoordinator.SetParent(e);
          }),
          (e.prototype.OnScroll = function(e) {
            this.m_ScrollCoordinator.RecomputeVisibility();
          }),
          (e.prototype.componentDidUpdate = function() {
            this.m_ScrollCoordinator.InvalidateOffsetsAndRecompute();
          }),
          (e.prototype.render = function() {
            var e = Yo.ChatStore.EmoticonStore,
              t = [],
              n = [],
              o = !1;
            if (e.is_initialized) {
              var i = this.state.strSearchText.trim();
              if (0 < i.length)
                (o = !0),
                  (n = (t = e.SearchEmoticons(i, 50, !1)).map(
                    this.RenderEmoticon.bind(this, "")
                  )),
                  (this.m_strFirstEmoticon = t.length ? t[0].name : null);
              else {
                var r = e.recent_emoticons,
                  a = e.emoticon_list,
                  s = Math.ceil(a.length / 9);
                if (s <= 2) r = [];
                else {
                  var c = Math.floor(s / 2);
                  9 < (r = r.slice(0, 9 * c)).length &&
                    r.length % 9 <= 2 &&
                    (r = r.slice(0, 9 * Math.floor(r.length / 9)));
                }
                r.length &&
                  (n = r.map(this.RenderEmoticon.bind(this, "recent_"))).push(
                    ve.createElement(
                      "div",
                      {
                        key: "__recent_all_separator",
                        className: "EmoticonSelector_Separator"
                      },
                      ve.createElement("div", {
                        className: "EmoticonSelector_SeparatorBackground"
                      })
                    )
                  ),
                  1e3 < a.length && (a = a.slice(0, 1e3)),
                  32 <= a.length && (o = !0),
                  n.push.apply(n, a.map(this.RenderEmoticon.bind(this, ""))),
                  (this.m_strFirstEmoticon = null);
              }
            }
            return ve.createElement(
              mr.c,
              null,
              ve.createElement(
                "div",
                { className: "EmoticonSelector" },
                ve.createElement(
                  "div",
                  {
                    className: "EmoticonSelector_Emoticons",
                    ref: this.OnScrollRef,
                    onScroll: this.OnScroll
                  },
                  n
                ),
                o &&
                  ve.createElement(
                    "div",
                    { className: "EmoticonSelector_Controls" },
                    ve.createElement(
                      "form",
                      { onSubmit: this.OnSubmit },
                      ve.createElement("input", {
                        type: "text",
                        placeholder: Object(re.b)("#Emoticon_Search"),
                        value: this.state.strSearchText,
                        onChange: this.OnSearchInput,
                        className: "ContextMenuAutoFocus friendSearchInput"
                      })
                    )
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnClick", null),
          R.c([M.a], e.prototype, "OnSearchInput", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "OnScrollRef", null),
          R.c([M.a], e.prototype, "OnScroll", null),
          e
        );
      })(ve.Component);
    function mc() {
      return ve.createElement(
        "div",
        { className: "NewEmoticonIndicator" },
        ve.createElement("div", { className: "NewEmoticonCircle" })
      );
    }
    var dc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { visible: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.SetVisible = function(e) {
            e && !this.state.visible && this.setState({ visible: !0 });
          }),
          (e.prototype.componentDidMount = function() {
            this.props.coordinator.RegisterChild(
              W.findDOMNode(this),
              this.SetVisible
            );
          }),
          (e.prototype.componentWillUnmount = function() {
            this.props.coordinator.UnregisterChild(W.findDOMNode(this));
          }),
          (e.prototype.render = function() {
            var e = this.props.emoticon,
              t = "EmoticonSelector_Item",
              n = !1;
            return (
              !e.last_used &&
                e.time_received &&
                ((t += " EmoticonSelector_Item_New"), (n = !0)),
              ve.createElement(
                "div",
                {
                  className: t,
                  "data-emoticon": e.name,
                  onClick: this.props.onClick
                },
                this.state.visible &&
                  ve.createElement(lc, { emoticon: e.name }),
                n && ve.createElement(mc, null)
              )
            );
          }),
          R.c([M.a], e.prototype, "SetVisible", null),
          e
        );
      })(ve.Component),
      hc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_refTextInput = ve.createRef()),
            (t.m_refFileInput = ve.createRef()),
            (t.m_textFocusCallback = null),
            (t.state = {
              messageInput: "",
              submitEnabled: !1,
              mentionSearch: void 0,
              activeSuggestSearchType: void 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.BindMentionDialog = function(e) {
            this.m_MentionDialog = e;
          }),
          (e.prototype.SetMessageInput = function(e, t) {
            this.setState(
              { messageInput: e, submitEnabled: 0 < e.trim().length },
              t
            ),
              (this.props.chatView.text_entry = e) &&
                e.length &&
                this.props.chatView.chat.OnTyping();
          }),
          (e.prototype.OnSubmit = function(e) {
            e && e.preventDefault(),
              this.props.chatView &&
                this.props.chatView.file_upload &&
                this.props.chatView.UploadFile(),
              this.state.messageInput.trim().length &&
                this.props.chatView &&
                this.props.chatView.chat.SendChatMessage(
                  this.state.messageInput
                ) &&
                ((this.m_iMentionSearchCancelledOffset = void 0),
                this.ClearMentionSearchState(),
                this.setState({ submitEnabled: !1 }),
                this.SetMessageInput(""),
                (this.props.chatView.is_scrolled_to_bottom = !0),
                this.FocusTextInput());
          }),
          (e.prototype.OnTextAreaChange = function(e) {
            this.SetMessageInput(e.target.value);
          }),
          (e.prototype.OnFocus = function(e) {
            this.UpdateMentionSearchState();
          }),
          (e.prototype.OnBlur = function(e) {
            if (
              !e.relatedTarget ||
              !ci.e(W.findDOMNode(this), e.relatedTarget)
            ) {
              if (Object(mr.h)()) return;
              (this.m_iMentionSearchCancelledOffset = void 0),
                this.ClearMentionSearchState();
            }
          }),
          (e.prototype.OnKeyDown = function(e) {
            this.state.activeSuggestSearchType &&
            this.m_MentionDialog &&
            !e.shiftKey &&
            !e.ctrlKey &&
            this.m_MentionDialog.BHandleKeyPress(e.keyCode)
              ? e.preventDefault()
              : 8 == e.keyCode || 46 == e.keyCode
                ? (this.m_iMentionSearchCancelledOffset = void 0)
                : 13 != e.keyCode || e.shiftKey || e.ctrlKey
                  ? 13 == e.keyCode &&
                    e.ctrlKey &&
                    (e.preventDefault(), this.InsertAtCursor("\n"))
                  : (e.preventDefault(), this.OnSubmit());
          }),
          (e.prototype.OnPaste = function(e) {
            if (
              e &&
              (0 != e.clipboardData.files.length &&
                !e.clipboardData.types.some(function(e) {
                  return "text" == e || e.startsWith("text/");
                }))
            ) {
              var t = e.clipboardData.files[0];
              this.props.chatView.SetFileToUpload(t),
                e.preventDefault(),
                e.stopPropagation();
            }
          }),
          (e.prototype.OnFileInputChange = function(e) {
            var t = e.currentTarget;
            t.files.length &&
              (this.props.chatView.SetFileToUpload(t.files[0]), (t.value = ""));
          }),
          (e.prototype.OnEmbedClick = function(e) {
            Object(Zo.a)(
              ve.createElement(Ec, {
                chatView: this.props.chatView,
                refFileInput: this.m_refFileInput.current,
                fnInsertText: this.InsertAtCursor.bind(this)
              }),
              e.currentTarget,
              { bOverlapHorizontal: !0, bPreferPopLeft: !0, bPreferPopTop: !0 }
            );
          }),
          (e.prototype.OnEmoticonSelected = function(e, t) {
            void 0 === t && (t = !1),
              t || this.m_refTextInput.current.focus(),
              this.InsertAtCursor(":" + e + ":");
          }),
          (e.prototype.InsertAtCursor = function(e) {
            var t = this.m_refTextInput.current,
              n = t.value,
              o = n.substr(0, t.selectionStart) + e + n.substr(t.selectionEnd),
              i = t.selectionStart + e.length;
            this.SetMessageInput(o, function() {
              t.selectionStart = t.selectionEnd = i;
            });
          }),
          (e.prototype.OnKeyPress = function(e) {
            this.UpdateMentionSearchState();
          }),
          (e.prototype.OnClick = function(e) {
            this.UpdateMentionSearchState();
          }),
          (e.prototype.OnContextMenu = function(e) {
            G.a.IN_CLIENT || e.stopPropagation();
          }),
          (e.prototype.ClearMentionSearchState = function() {
            (this.m_iMentionSearchStartOffset = void 0),
              this.state.activeSuggestSearchType &&
                this.setState({
                  activeSuggestSearchType: void 0,
                  mentionSearch: void 0
                });
          }),
          (e.prototype.FindMatchOpener = function(e, t, n) {
            for (var o = n - 1; 0 <= o; o--) {
              if (t[o] == e) return o;
              if (" " == t[o]) break;
            }
          }),
          (e.prototype.UpdateMentionSearchState = function() {
            var e = this.m_refTextInput.current;
            if (e) {
              var t =
                (this.props.chatView && this.props.chatView.chat) instanceof Tt;
              if (e.selectionStart == e.selectionEnd && e.selectionStart) {
                for (
                  var n = e.selectionStart,
                    o = e.value,
                    i = void 0,
                    r = void 0,
                    a = n - 1;
                  0 <= a;
                  a--
                ) {
                  var s = 0 < a ? o[a - 1] : void 0;
                  if (("@" == o[a] || "" == o[a]) && t) {
                    (s && " " != s && "\n" != s) || ((i = a), (r = "Mention"));
                    break;
                  }
                  if (":" == o[a]) {
                    (s && " " != s && "\n" != s && ":" != s) ||
                      ((i = a), (r = "Emoticon"));
                    break;
                  }
                  if ("/" == o[a] && 0 == a) {
                    (i = a), (r = "SlashCommand");
                    break;
                  }
                  if (" " == o[a] || "\n" == o[a]) break;
                }
                if (
                  void 0 !== i &&
                  i !== this.m_iMentionSearchCancelledOffset
                ) {
                  var c = o.substr(i + 1, n - i - 1);
                  (this.m_iMentionSearchStartOffset = i),
                    this.setState({
                      activeSuggestSearchType: r,
                      mentionSearch: c
                    });
                } else this.ClearMentionSearchState();
              } else this.ClearMentionSearchState();
            }
          }),
          (e.prototype.ReplaceSuggestedText = function(e, t, n) {
            var o = this.m_refTextInput.current.selectionStart,
              i = this.m_refTextInput.current.value,
              r = this.FindMatchOpener(e, i, o);
            if (
              (void 0 === r &&
                "@" == e &&
                (r = this.FindMatchOpener("", i, o)),
              void 0 !== r)
            ) {
              var a = i.substr(0, r);
              (a += t), (o >= i.length || " " != i[o]) && (a += " ");
              var s = a.length;
              (a += i.substr(o)),
                this.SetMessageInput(a, n),
                (this.m_refTextInput.current.value = a),
                (this.m_refTextInput.current.selectionStart = this.m_refTextInput.current.selectionEnd = s),
                this.FocusTextInput();
            }
          }),
          (e.prototype.OnMentionSuggestionSelected = function(e, t) {
            var n;
            if (
              (t instanceof ut ? (n = t.persona.m_strPlayerName) : t && (n = t),
              !n)
            )
              return (
                (this.m_iMentionSearchCancelledOffset = this.m_iMentionSearchStartOffset),
                void this.ClearMentionSearchState()
              );
            var o = n;
            -1 !== o.lastIndexOf("#") && (o = o.substr(0, o.lastIndexOf("#"))),
              1 < this.props.chatView.chat.SearchMembers(o, 2, !0).length &&
                (n += t instanceof ut ? "#" + t.accountid.toString(36) : "#0"),
              this.ReplaceSuggestedText("@", "@" + n),
              this.ClearMentionSearchState();
          }),
          (e.prototype.OnEmoticonSuggestionSelected = function(e, t) {
            if (!t)
              return (
                (this.m_iMentionSearchCancelledOffset = this.m_iMentionSearchStartOffset),
                void this.ClearMentionSearchState()
              );
            this.ReplaceSuggestedText(":", ":" + t + ":"),
              this.ClearMentionSearchState();
          }),
          (e.prototype.OnSlashCommandSuggestionSelected = function(e, t) {
            var n = this;
            if (!t)
              return (
                (this.m_iMentionSearchCancelledOffset = this.m_iMentionSearchStartOffset),
                void this.ClearMentionSearchState()
              );
            this.ReplaceSuggestedText("/", t, function() {
              0 === xe(t).unExpectedArguments && n.OnSubmit();
            }),
              this.ClearMentionSearchState();
          }),
          (e.prototype.FocusTextInput = function() {
            this.m_refTextInput.current && this.m_refTextInput.current.focus();
          }),
          (e.prototype.InitForChatView = function(e) {
            this.m_textFocusCallback &&
              (this.m_textFocusCallback.Unregister(),
              (this.m_textFocusCallback = null));
            var t = e.text_entry;
            t != this.state.messageInput && this.setState({ messageInput: t }),
              (this.m_textFocusCallback = e.RegisterForTextEntryFocus(
                this.FocusTextInput
              ));
          }),
          (e.prototype.componentWillMount = function() {
            this.InitForChatView(this.props.chatView);
          }),
          (e.prototype.componentDidMount = function() {
            this.FocusTextInput();
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_textFocusCallback && this.m_textFocusCallback.Unregister(),
              (this.m_textFocusCallback = null);
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            var t = this;
            e.chatView != this.props.chatView &&
              this.InitForChatView(e.chatView),
              e.isActive &&
                !this.props.isActive &&
                setTimeout(function() {
                  t.FocusTextInput();
                }, 0);
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.chatView,
              n = e.disabled,
              o = void 0,
              i = t && t.chat,
              r = void 0;
            switch (this.state.activeSuggestSearchType) {
              case "Mention":
                r = ve.createElement(Cc, {
                  chat: i,
                  strSearch: this.state.mentionSearch,
                  onSuggestionSelected: this.OnMentionSuggestionSelected,
                  ref: this.BindMentionDialog
                });
                break;
              case "Emoticon":
                r = ve.createElement(Ic, {
                  emoticonStore: Yo.ChatStore.EmoticonStore,
                  strSearch: this.state.mentionSearch,
                  nMinimumSearchLengthBeforeAutoSelection: 2,
                  onSuggestionSelected: this.OnEmoticonSuggestionSelected,
                  ref: this.BindMentionDialog
                });
                break;
              case "SlashCommand":
                r = ve.createElement(Oc, {
                  strSearch: this.state.mentionSearch,
                  onSuggestionSelected: this.OnSlashCommandSuggestionSelected,
                  ref: this.BindMentionDialog
                });
            }
            var a = t.chat.file_upload_props;
            t.file_upload_data_url
              ? (o = ve.createElement(gc, { chatView: t }))
              : 2 == a.eUploadState ||
                4 == a.eUploadState ||
                3 == a.eUploadState
                ? (o = ve.createElement(vc, { chatView: t }))
                : 0 != a.eUploadState &&
                  (o = ve.createElement(bc, { chat: t.chat }));
            var s = Yo.SettingsStore.FriendsSettings.bCompactFriendsList,
              c = Yo.SettingsStore.FriendsSettings.nChatFontSize,
              l = "";
            return (
              c == wa.k_EChatFontSizeSmall
                ? (l = " smallChatFont")
                : c == wa.k_EChatFontSizeLarge && (l = " largeChatFont"),
              ve.createElement(
                "div",
                { className: "chatEntry" + (s ? " compactView" : "") + l },
                o,
                ve.createElement(
                  "form",
                  {
                    className: "chatEntryControls compactableHeight",
                    onSubmit: this.OnSubmit,
                    onBlur: this.OnBlur
                  },
                  r,
                  ve.createElement("textarea", {
                    className: "chatTextarea",
                    value: this.state.messageInput,
                    onPaste: this.OnPaste,
                    onContextMenu: this.OnContextMenu,
                    ref: this.m_refTextInput,
                    onChange: this.OnTextAreaChange,
                    onKeyDown: this.OnKeyDown,
                    onKeyUp: this.OnKeyPress,
                    onClick: this.OnClick,
                    onFocus: this.OnFocus,
                    disabled: n || Yo.CMInterface.BDisconnected(),
                    maxLength: 5e3
                  }),
                  ve.createElement(
                    "button",
                    {
                      className:
                        "chatSubmitButton" +
                        (this.state.submitEnabled ? "" : " disabled"),
                      type: "submit",
                      disabled: !this.state.submitEnabled,
                      title: Object(re.b)("#ChatEntryButton_Submit")
                    },
                    ve.createElement(Qo.U, null)
                  ),
                  ve.createElement("input", {
                    type: "file",
                    style: { display: "none" },
                    name: "fileupload",
                    ref: this.m_refFileInput,
                    onChange: this.OnFileInputChange
                  })
                ),
                ve.createElement(
                  "div",
                  { className: "chatEntryActionsContainer compactableHeight" },
                  ve.createElement(
                    "div",
                    { className: "chatEntryActionsGroup" },
                    ve.createElement(_c, {
                      disabled: n,
                      OnEmoticonSelected: this.OnEmoticonSelected
                    }),
                    ve.createElement(
                      "button",
                      {
                        className:
                          "chatSubmitButton EmbedButton" +
                          (n ? " disabled" : ""),
                        type: "button",
                        onClick: this.OnEmbedClick,
                        title: Object(re.b)("#ChatEntryButton_SendEmbed"),
                        disabled: n
                      },
                      ve.createElement(Qo.E, null)
                    )
                  ),
                  ve.createElement(fc, { chat: i })
                ),
                ve.createElement("div", {
                  className: "disconnectBlocker compactableHeight"
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "BindMentionDialog", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "OnTextAreaChange", null),
          R.c([M.a], e.prototype, "OnFocus", null),
          R.c([M.a], e.prototype, "OnBlur", null),
          R.c([M.a], e.prototype, "OnKeyDown", null),
          R.c([M.a], e.prototype, "OnPaste", null),
          R.c([M.a], e.prototype, "OnFileInputChange", null),
          R.c([M.a], e.prototype, "OnEmbedClick", null),
          R.c([M.a], e.prototype, "OnEmoticonSelected", null),
          R.c([M.a], e.prototype, "OnKeyPress", null),
          R.c([M.a], e.prototype, "OnClick", null),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "OnMentionSuggestionSelected", null),
          R.c([M.a], e.prototype, "OnEmoticonSuggestionSelected", null),
          R.c([M.a], e.prototype, "OnSlashCommandSuggestionSelected", null),
          R.c([M.a], e.prototype, "FocusTextInput", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      _c = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnEmoticonClick = function(e) {
            Object(Zo.a)(
              ve.createElement(uc, {
                OnSelected: this.props.OnEmoticonSelected
              }),
              e.currentTarget,
              { bOverlapHorizontal: !0, bPreferPopLeft: !0, bPreferPopTop: !0 }
            ),
              this.BHaveUnseenEmoticons() &&
                Qu.SetUIDisplayPref(
                  "rtLastAckedNewEmoticons",
                  Yo.ChatStore.EmoticonStore.GetTimeReceivedNewestEmoticon()
                );
          }),
          (t.prototype.BHaveUnseenEmoticons = function() {
            var e = Qu.UIDisplayPrefs.rtLastAckedNewEmoticons,
              t = Yo.ChatStore.EmoticonStore.GetTimeReceivedNewestEmoticon();
            return t && (!e || e < t);
          }),
          (t.prototype.render = function() {
            var e = this.props.disabled,
              t = "chatSubmitButton EmoticonPickerButton",
              n = !1;
            return (
              e
                ? (t += " disabled")
                : this.BHaveUnseenEmoticons() &&
                  ((t += " EmoticonButton_NewEmoticons"), (n = !0)),
              ve.createElement(
                "button",
                {
                  className: t,
                  type: "button",
                  onClick: this.OnEmoticonClick,
                  title: Object(re.b)("#ChatEntryButton_Emoticon"),
                  disabled: e
                },
                ve.createElement(Qo.m, null),
                n && ve.createElement(mc, null)
              )
            );
          }),
          R.c([M.a], t.prototype, "OnEmoticonClick", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      fc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.HandleStartVoice = function(e) {
            var t = this.props.chat;
            if (t instanceof zt) t.ToggleVoiceChat();
            else if (this.IsVoiceActiveForButton())
              Yo.VoiceStore.OnUserEndVoiceChat();
            else if (t instanceof Tt) {
              var n = t.GetGroup();
              if (n) {
                var o = n.voiceRoomList;
                if (0 != o.length)
                  if (1 != o.length) {
                    var i = ve.createElement(wc, { group: n });
                    Object(Zo.a)(i, e.currentTarget, {
                      bOverlapHorizontal: !0,
                      bPreferPopLeft: !0,
                      bPreferPopTop: !0
                    });
                  } else {
                    var r = o[0];
                    Yo.VoiceStore.InitiateRoomChat(
                      n.GetGroupID(),
                      r.GetRoomID()
                    );
                  }
                else n.CreateAndJoinTempVoiceRoom();
              }
            }
          }),
          (t.prototype.IsVoiceActiveForButton = function() {
            var e = this.props.chat,
              t = !1;
            if (e instanceof zt) t = e.BVoiceActive();
            else if (e instanceof Tt) {
              var n = e.GetGroup();
              t = Yo.VoiceStore.IsVoiceActiveForGroup(n.GetGroupID());
            }
            return t;
          }),
          (t.prototype.render = function() {
            var e = this.IsVoiceActiveForButton(),
              t = ["VoiceToggle"],
              n = "",
              o = this.props.chat;
            e
              ? (t.push("Active"),
                Yo.VoiceStore.BNoMicAvailableForSession() &&
                  t.push("NoMicrophone"),
                Yo.VoiceStore.IsMicMuted() && t.push("MicMuted"))
              : t.push(" Inactive");
            var i = !o.BIsVoiceAllowed();
            if (i) t.push(" Disabled"), (n = o.GetVoiceNotAllowedReason());
            else if (o instanceof zt)
              n = e
                ? "#Tooltip_VoiceControlButton_1v1_active"
                : "#Tooltip_VoiceControlButton_1v1_inactive";
            else if (o instanceof Tt)
              if (this.IsVoiceActiveForButton())
                n = "#Tooltip_VoiceControlButton_group_leave";
              else {
                var r = o.GetGroup();
                r && 0 == r.voiceRoomList.length
                  ? (n = "#Tooltip_VoiceControlButton_group_create")
                  : r && 1 == r.voiceRoomList.length
                    ? (n = "#Tooltip_VoiceControlButton_group_joinsingle")
                    : r &&
                      (n = "#Tooltip_VoiceControlButton_group_joinmultiple");
              }
            var a = Yo.VoiceStore.GetPushToTalkEnabled(),
              s = Yo.VoiceStore.GetPushToMuteEnabled(),
              c = Yo.VoiceStore.GetPushToTalkVoiceStateEnabled(),
              l = Yo.VoiceStore.GetPushToTalkHotKeyDisplayString(),
              p = "";
            return (
              (a || s) && (p += " pushToTalkEnabled"),
              c && (p += " pushToTalkKeyDown"),
              ve.createElement(
                "div",
                {
                  className:
                    "ChatMessageEntryVoice" +
                    p +
                    (e ? " Active" : " Inactive") +
                    (i ? " Disabled" : "")
                },
                ve.createElement(
                  "div",
                  { className: "buttonsContainer" },
                  ve.createElement(
                    "button",
                    {
                      disabled: i,
                      className: t.join(" "),
                      onClick: this.HandleStartVoice,
                      title: Object(re.b)(n)
                    },
                    ve.createElement(
                      "div",
                      { className: "VoiceToggleIconCtn" },
                      ve.createElement(Qo.cb, null)
                    )
                  ),
                  ve.createElement(
                    "div",
                    { className: "activeVoiceControls" },
                    ve.createElement(
                      "div",
                      { className: "activeVoiceFlexBox" },
                      ve.createElement(
                        "div",
                        { className: "activeVoiceButtons" },
                        ve.createElement(Ns, null),
                        ve.createElement(Ls, null)
                      )
                    )
                  )
                ),
                (a || s) &&
                  this.IsVoiceActiveForButton() &&
                  ve.createElement(
                    "div",
                    {
                      className: "activeVoicePushToTalk" + p,
                      title: Object(re.b)(
                        s ? "#ActiveVoicePushToMute" : "#ActiveVoicePushToTalk",
                        l
                      )
                    },
                    l
                  )
              )
            );
          }),
          R.c([M.a], t.prototype, "HandleStartVoice", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      gc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bSpoilerChecked: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnCancelClick = function(e) {
            this.props.chatView.SetFileToUpload(null);
          }),
          (e.prototype.OnUploadClick = function() {
            this.props.chatView.UploadFile(this.state.bSpoilerChecked);
          }),
          (e.prototype.OnDialogChecked = function() {
            this.setState({ bSpoilerChecked: !this.state.bSpoilerChecked });
          }),
          (e.prototype.render = function() {
            var e = void 0;
            return (
              -1 != this.props.chatView.file_upload.type.indexOf("image")
                ? (e = ve.createElement("img", {
                    className: "chatFileUploadPreview",
                    src: this.props.chatView.file_upload_data_url
                  }))
                : -1 != this.props.chatView.file_upload.type.indexOf("video") &&
                  (e = ve.createElement(Qo.ab, null)),
              ve.createElement(
                "div",
                { className: "chatFileUploadPreviewContainer" },
                e,
                ve.createElement(
                  "div",
                  { className: "chatFileUploadFileName" },
                  "'",
                  this.props.chatView.file_upload.name,
                  "'"
                ),
                ve.createElement(
                  "div",
                  {
                    className: "chatFileUploadCancel",
                    onClick: this.OnCancelClick
                  },
                  ve.createElement(Qo.fb, null)
                ),
                ve.createElement(
                  "button",
                  {
                    className: "DialogButton Primary chatFileUploadBtn",
                    type: "button",
                    onClick: this.OnUploadClick
                  },
                  Object(re.b)("#Chat_Upload")
                ),
                ve.createElement(Li, {
                  classname: "spoilerCheckBox",
                  label: "Tag as Spoiler",
                  checked: this.state.bSpoilerChecked,
                  onChange: this.OnDialogChecked
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnCancelClick", null),
          R.c([M.a], e.prototype, "OnUploadClick", null),
          R.c([M.a], e.prototype, "OnDialogChecked", null),
          e
        );
      })(ve.Component),
      bc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.chat.file_upload_props,
              t = e.file
                ? Object(re.b)("#Chat_Uploading", e.displayFileName)
                : "",
              n = { width: e.uploadProgress + "%" };
            return ve.createElement(
              "div",
              { className: "chatFileUploadProgressContainer" },
              ve.createElement(
                "div",
                { className: "chatFileUploadProgressName" },
                t
              ),
              ve.createElement(
                "div",
                {
                  className:
                    "chatFileUploadProgressBarContainer DialogProgressBar_ProgressBarContainer"
                },
                ve.createElement("div", {
                  className: "DialogProgressBar_Value",
                  style: n
                })
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      vc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ClearErrorState = function() {
            this.props.chatView.chat.ClearFileUploadError();
          }),
          (t.prototype.OnRetryClick = function() {
            var e = this.props.chatView.chat.file_upload_props;
            this.props.chatView.chat.BeginFileUpload(
              e.file,
              e.imageWidth,
              e.imageHeight,
              e.spoilerTag
            );
          }),
          (t.prototype.render = function() {
            var e = this.props.chatView.chat.file_upload_props,
              t = e.displayFileName
                ? Object(re.b)("#Chat_Uploading", e.displayFileName)
                : "",
              n = (e.strErrorDescription ||
                Object(re.b)("#Chat_Settings_Error_Unknown"),
              void 0);
            return (
              2 == e.eUploadState &&
                (n = ve.createElement(
                  Ei,
                  { onClick: this.OnRetryClick },
                  Object(re.b)("#Chat_Upload_ErrorAction_Retry")
                )),
              ve.createElement(
                "div",
                { className: "chatFileUploadProgressContainer" },
                ve.createElement(
                  "div",
                  { className: "chatFileUploadProgressName" },
                  t
                ),
                ve.createElement(
                  "div",
                  { className: "chatFileUploadErrorDescription" },
                  e.strErrorDescription
                ),
                ve.createElement(
                  "div",
                  { className: "chatFileUploadActions" },
                  ve.createElement(
                    vi,
                    { className: "DialogLayout_NoMinWidth" },
                    n,
                    ve.createElement(
                      wi,
                      { onClick: this.ClearErrorState },
                      Object(re.b)("#Chat_Upload_ErrorAction_Close")
                    )
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "ClearErrorState", null),
          R.c([M.a], t.prototype, "OnRetryClick", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Sc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_rgCurrentMatches = []),
            (t.m_mapMatchByKey = new Map()),
            (t.state = { selectedIndex: void 0 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnKeyDown = function(e) {
            this.BHandleKeyPress(e.keyCode) && e.preventDefault();
          }),
          (e.prototype.BHandleKeyPress = function(e) {
            switch (e) {
              case 38:
                this.SetSelectedIndexDelta(-1);
                break;
              case 40:
                this.SetSelectedIndexDelta(1);
                break;
              case 36:
                this.SetSelectedIndex(0);
                break;
              case 33:
                this.SetSelectedIndexDelta(-this.GetPageSize());
                break;
              case 35:
                this.SetSelectedIndex(-1);
                break;
              case 34:
                this.SetSelectedIndexDelta(this.GetPageSize());
                break;
              case 13:
              case 9:
                if (void 0 === this.state.selectedIndex)
                  return (
                    this.props.onSuggestionSelected(this.props.strSearch), !1
                  );
                this.ChooseSuggestion(
                  this.m_rgCurrentMatches[this.state.selectedIndex]
                );
                break;
              case 27:
                this.props.onSuggestionSelected(this.props.strSearch);
                break;
              default:
                return !1;
            }
            return !0;
          }),
          (e.prototype.GetPageSize = function() {
            var e = W.findDOMNode(this),
              t = e && e.firstElementChild,
              n = this.m_rgCurrentMatches.length;
            if (
              (n > this.getMaxMatches() && (n = this.getMaxMatches()), t && n)
            ) {
              var o = t.scrollHeight / n,
                i = t.clientHeight / o;
              return Math.max(1, Math.floor(i));
            }
            return 5;
          }),
          (e.prototype.ChooseSuggestion = function(e) {
            this.props.onSuggestionSelected(
              this.props.strSearch,
              e ? this.getSelection(e) : void 0
            );
          }),
          (e.prototype.SetSelectedIndexDelta = function(e) {
            void 0 !== this.state.selectedIndex
              ? this.SetSelectedIndex(this.state.selectedIndex + e)
              : this.SetSelectedIndex(e);
          }),
          (e.prototype.SetSelectedIndex = function(e) {
            if (this.m_rgCurrentMatches.length) {
              var t = this.m_rgCurrentMatches.length;
              t > this.getMaxMatches() && (t = this.getMaxMatches()),
                (e %= t) < 0 && (e += t),
                this.setState({ selectedIndex: e });
            }
          }),
          (e.prototype.FindKeyIndex = function(e) {
            if (!this.m_mapMatchByKey.size && this.m_rgCurrentMatches.length)
              for (var t = 0; t < this.m_rgCurrentMatches.length; t++)
                this.m_mapMatchByKey.set(
                  this.getKey(this.m_rgCurrentMatches[t]),
                  t
                );
            return this.m_mapMatchByKey.get(e);
          }),
          (e.prototype.OnClickSuggestion = function(e) {
            var t = this.FindKeyIndex(e);
            void 0 !== t && this.ChooseSuggestion(this.m_rgCurrentMatches[t]);
          }),
          (e.prototype.OnMouseOverSuggestion = function(e) {
            var t = this.FindKeyIndex(e);
            void 0 !== t && this.SetSelectedIndex(t);
          }),
          (e.prototype.BindSelectedElement = function(e) {
            var t = W.findDOMNode(this),
              n = W.findDOMNode(e),
              o = t && t.firstElementChild;
            n &&
              o &&
              (o.scrollTop + o.clientHeight < n.offsetTop ||
                n.offsetTop < o.scrollTop) &&
              n.scrollIntoView();
          }),
          (e.prototype.UpdateSearchResults = function(e) {
            (this.m_rgCurrentMatches = this.performSearch(e)),
              (this.m_strLastSearch = e),
              this.m_mapMatchByKey.clear(),
              this.m_rgCurrentMatches.length
                ? this.state && void 0 !== this.state.selectedIndex
                  ? this.state.selectedIndex >=
                      this.m_rgCurrentMatches.length &&
                    this.setState({ selectedIndex: 0 })
                  : (void 0 ===
                      this.props.nMinimumSearchLengthBeforeAutoSelection ||
                      e.length >=
                        this.props.nMinimumSearchLengthBeforeAutoSelection) &&
                    this.setState({ selectedIndex: 0 })
                : this.state &&
                  void 0 !== this.state.selectedIndex &&
                  this.setState({ selectedIndex: void 0 });
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_hMobxSearchDisposer &&
              (this.m_hMobxSearchDisposer(),
              (this.m_hMobxSearchDisposer = void 0));
          }),
          (e.prototype.componentWillMount = function() {
            var e = this;
            this.m_hMobxSearchDisposer = Object(m.autorun)(function() {
              e.UpdateSearchResults(e.props.strSearch), e.forceUpdate();
            });
          }),
          (e.prototype.componentWillUpdate = function(e) {
            this.m_strLastSearch != e.strSearch &&
              this.UpdateSearchResults(e.strSearch);
          }),
          (e.prototype.render = function() {
            var e = [];
            if (this.m_rgCurrentMatches.length) {
              for (
                var t = this.getMaxMatches(), n = 0;
                n < Math.min(t, this.m_rgCurrentMatches.length);
                n++
              ) {
                var o = this.m_rgCurrentMatches[n],
                  i = this.getKey(o),
                  r = n === this.state.selectedIndex;
                e.push(
                  ve.createElement(
                    yc,
                    {
                      key: i,
                      matchKey: i,
                      fnOnClick: this.OnClickSuggestion,
                      fnOnMouseOver: this.OnMouseOverSuggestion,
                      bIsSelected: r,
                      ref: r ? this.BindSelectedElement : void 0
                    },
                    this.renderMatch(o)
                  )
                );
              }
              this.m_rgCurrentMatches.length > t &&
                e.push(
                  this.renderTooManyMatchesMessage(
                    this.m_rgCurrentMatches.length - t
                  )
                );
            } else {
              var a = this.renderNoMatchMessage();
              if (!a) return null;
              e.push(a);
            }
            return ve.createElement(
              "div",
              { className: "mentionDialogPosition" },
              ve.createElement(
                "div",
                {
                  className: "mentionDialog",
                  tabIndex: 0,
                  onKeyDown: this.OnKeyDown
                },
                this.renderHeader(),
                e
              )
            );
          }),
          R.c([M.a], e.prototype, "OnKeyDown", null),
          R.c([M.a], e.prototype, "OnClickSuggestion", null),
          R.c([M.a], e.prototype, "OnMouseOverSuggestion", null),
          R.c([M.a], e.prototype, "BindSelectedElement", null),
          e
        );
      })(ve.Component),
      yc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnMouseOver = function(e) {
            this.props.fnOnMouseOver(this.props.matchKey);
          }),
          (t.prototype.OnClick = function(e) {
            this.props.fnOnClick(this.props.matchKey);
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              "div",
              {
                className:
                  "suggestOption mentionSearchOption" +
                  (this.props.bIsSelected ? " selected" : ""),
                onMouseEnter: this.OnMouseOver,
                onClick: this.OnClick
              },
              this.props.children
            );
          }),
          R.c([M.a], t.prototype, "OnMouseOver", null),
          R.c([M.a], t.prototype, "OnClick", null),
          t
        );
      })(ve.PureComponent),
      Cc = (function(t) {
        function e() {
          return (null !== t && t.apply(this, arguments)) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.performSearch = function(e) {
            return this.props.chat.SearchMembers(e, Number.MAX_VALUE);
          }),
          (e.prototype.ChooseSuggestion = function(e) {
            (e && e.strNotSelectable) ||
              t.prototype.ChooseSuggestion.call(this, e);
          }),
          (e.prototype.getSelection = function(e) {
            return e.friend ? e.friend : e.meta_mention;
          }),
          (e.prototype.getKey = function(e) {
            return "" + (e.friend ? e.friend.accountid : e.meta_mention);
          }),
          (e.prototype.renderMatch = function(e) {
            var t,
              n,
              o = e.friend,
              i = e.iMatchOffset,
              r = e.bNicknameMatch,
              a = this.props.strSearch.length,
              s = null;
            return (
              o
                ? ((t = o.persona.m_strPlayerName),
                  (n = o.has_nickname && o.nickname),
                  o.persona.avatar_url_medium &&
                    (s = o.persona.avatar_url_medium))
                : ((t = "@" + e.meta_mention), (n = null), i++),
              r
                ? ve.createElement(
                    "span",
                    { className: "mentionSuggestion" },
                    s &&
                      ve.createElement("img", {
                        className: "mentionAvatar",
                        src: o.persona.avatar_url_medium,
                        draggable: !1
                      }),
                    t,
                    ve.createElement(
                      "span",
                      { className: "nickname" },
                      "(",
                      n.substr(0, i).replace(/ /g, ""),
                      ve.createElement(
                        "span",
                        { className: "mentionSearchMatch" },
                        n.substr(i, a).replace(/ /g, "")
                      ),
                      n.substr(i + a).replace(/ /g, ""),
                      ")"
                    )
                  )
                : ve.createElement(
                    "span",
                    { className: "mentionSuggestion" },
                    t.substr(0, i).replace(/ /g, ""),
                    s &&
                      ve.createElement("img", {
                        className: "mentionAvatar",
                        src: o.persona.avatar_url_medium,
                        draggable: !1
                      }),
                    ve.createElement(
                      "span",
                      { className: "mentionSearchMatch" },
                      t.substr(i, a).replace(/ /g, "")
                    ),
                    t.substr(i + a).replace(/ /g, ""),
                    e.strNotSelectable &&
                      ve.createElement(
                        "span",
                        { className: "notSelectable" },
                        " ",
                        ": " + e.strNotSelectable,
                        " "
                      ),
                    n &&
                      ve.createElement(
                        "span",
                        { className: "nickname" },
                        "(",
                        n,
                        ")"
                      )
                  )
            );
          }),
          (e.prototype.renderNoMatchMessage = function() {
            return ve.createElement(
              "div",
              {
                key: "nomatches",
                className: "suggestOption mentionSearchOption noMatches"
              },
              Object(re.b)("#ChatMentionSuggest_NoMatches")
            );
          }),
          (e.prototype.renderTooManyMatchesMessage = function(e) {
            var t =
              e <= 1
                ? "#ChatMentionSuggest_ManyMatches"
                : "#ChatMentionSuggest_ManyMatchesPlural";
            return ve.createElement(
              "div",
              {
                key: "manymatches",
                className: "suggestOption mentionSearchOption manyMatches"
              },
              Object(re.b)(t, e)
            );
          }),
          (e.prototype.renderHeader = function() {
            return ve.createElement(
              "div",
              { className: "mentionSearchText" },
              Object(re.b)(
                "#ChatMentionSuggest_MembersMatching",
                this.props.strSearch
              )
            );
          }),
          (e.prototype.getMaxMatches = function() {
            return e.nMaxMatches;
          }),
          (e.nMaxMatches = 12),
          e
        );
      })(Sc),
      Ic = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.performSearch = function(e) {
            return this.props.emoticonStore.SearchEmoticons(e, 10);
          }),
          (t.prototype.getSelection = function(e) {
            return e.name;
          }),
          (t.prototype.getKey = function(e) {
            return e.name;
          }),
          (t.prototype.renderMatch = function(e) {
            return ve.createElement(
              "div",
              { className: "EmoticonSuggestion" + (e.recent ? " Recent" : "") },
              ve.createElement(
                "div",
                { className: "EmoticonSuggestion_Emoticon" },
                ve.createElement(lc, { emoticon: e.name }),
                e.new && ve.createElement(mc, null)
              ),
              ":",
              e.name,
              ":"
            );
          }),
          (t.prototype.renderNoMatchMessage = function() {
            return null;
          }),
          (t.prototype.renderTooManyMatchesMessage = function(e) {
            return null;
          }),
          (t.prototype.renderHeader = function() {
            return null;
          }),
          (t.prototype.getMaxMatches = function() {
            return Number.MAX_VALUE;
          }),
          t
        );
      })(Sc),
      Oc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.performSearch = function(e) {
            var t = "/" + e;
            return Object.keys(Ve).filter(function(e) {
              return e.startsWith(t);
            });
          }),
          (t.prototype.getSelection = function(e) {
            return e;
          }),
          (t.prototype.getKey = function(e) {
            return e;
          }),
          (t.prototype.renderMatch = function(e) {
            var t = xe(e);
            if (!t) return null;
            var n = Object(re.b)(t.strDescriptionToken);
            return ve.createElement(
              "span",
              { className: "SlashCommandSuggestion" },
              ve.createElement(
                "span",
                { className: "SlashCommandSuggestion_SlashCommand" },
                e
              ),
              ": ",
              ve.createElement(
                "span",
                { className: "SlashCommandSuggestion_SlashCommandDescription" },
                n
              )
            );
          }),
          (t.prototype.renderNoMatchMessage = function() {
            return null;
          }),
          (t.prototype.renderTooManyMatchesMessage = function(e) {
            return null;
          }),
          (t.prototype.renderHeader = function() {
            return null;
          }),
          (t.prototype.getMaxMatches = function() {
            return Number.MAX_VALUE;
          }),
          t
        );
      })(Sc);
    function Ec(t) {
      var e = [];
      t.refFileInput &&
        e.push(
          ve.createElement(
            mr.d,
            {
              key: "upload",
              onSelected: function() {
                t.refFileInput.click();
              }
            },
            Object(re.b)("#ChatEntry_UploadImage")
          )
        );
      return (
        e.push(
          ve.createElement(
            mr.d,
            {
              key: "tradeoffer",
              onSelected: function() {
                Yo.EconomyStore.GetTradeOfferURL().then(function(e) {
                  t.fnInsertText(e);
                });
              }
            },
            Object(re.b)("#ChatEntry_SendTradeURL")
          )
        ),
        ve.createElement(mr.c, null, e)
      );
    }
    function wc(e) {
      var t = e.group.GetGroupID(),
        n = e.group.voiceRoomList.map(function(e) {
          return ve.createElement(
            mr.d,
            {
              key: e.GetRoomID(),
              onSelected: function() {
                Yo.VoiceStore.InitiateRoomChat(t, e.GetRoomID());
              }
            },
            e.name
          );
        });
      return ve.createElement(mr.c, null, n);
    }
    var Mc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              nCalculatedHeightPx: void 0,
              bLeftSliderVisible: !1,
              bRightSliderVisible: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnRef = function(e) {
            this.UnbindWindowHandlers(),
              e &&
                ((this.m_elScroll = e).ownerDocument.defaultView &&
                  this.m_elScroll.ownerDocument.defaultView.addEventListener(
                    "resize",
                    this.CheckScrollPosition
                  ),
                this.CheckScrollPosition());
          }),
          (e.prototype.CheckScrollPosition = function() {
            if (
              !(
                !this.m_elScroll ||
                (this.m_animation && this.m_animation.BIsActive())
              )
            ) {
              for (
                var e = 0, t = this.m_elScroll.firstElementChild;
                t;
                t = t.nextElementSibling
              )
                e = Math.max(e, t.getBoundingClientRect().height);
              e != this.state.nCalculatedHeightPx &&
                this.setState({ nCalculatedHeightPx: e }),
                this.UpdateSliderControlsForScrollOffset(
                  this.m_elScroll.scrollLeft
                );
            }
          }),
          (e.prototype.UpdateSliderControlsForScrollOffset = function(e) {
            var t = 1 < e,
              n =
                e + this.m_elScroll.getBoundingClientRect().width <
                this.m_elScroll.scrollWidth - 1;
            t != this.state.bLeftSliderVisible &&
              this.setState({ bLeftSliderVisible: t }),
              n != this.state.bRightSliderVisible &&
                this.setState({ bRightSliderVisible: n });
          }),
          (e.prototype.AnimateScrollLeftTo = function(e) {
            this.m_animation && this.m_animation.Cancel(),
              (this.m_animation = new pi(
                this.m_elScroll,
                { scrollLeft: e },
                {
                  msDuration: 500,
                  onComplete: this.CheckScrollPosition,
                  timing: "cubic-in-out"
                }
              )),
              this.m_animation.Start(),
              this.UpdateSliderControlsForScrollOffset(e);
          }),
          (e.prototype.OnSlideLeftClick = function() {
            (this.m_animation && this.m_animation.BIsActive()) ||
              (this.m_elScroll &&
                this.AnimateScrollLeftTo(
                  Math.max(
                    0,
                    this.m_elScroll.scrollLeft -
                      this.m_elScroll.getBoundingClientRect().width
                  )
                ));
          }),
          (e.prototype.OnSlideRightClick = function() {
            (this.m_animation && this.m_animation.BIsActive()) ||
              (this.m_elScroll &&
                this.AnimateScrollLeftTo(
                  Math.min(
                    this.m_elScroll.scrollWidth -
                      this.m_elScroll.getBoundingClientRect().width,
                    this.m_elScroll.scrollLeft +
                      this.m_elScroll.getBoundingClientRect().width
                  )
                ));
          }),
          (e.prototype.OnWheel = function(e) {
            e &&
              e.nativeEvent &&
              (0 < e.nativeEvent.wheelDelta
                ? this.OnSlideLeftClick()
                : this.OnSlideRightClick());
          }),
          (e.prototype.GetScrollRef = function() {
            return this.m_elScroll;
          }),
          (e.prototype.componentWillUnmount = function() {
            this.UnbindWindowHandlers(),
              this.m_animation && this.m_animation.Cancel();
          }),
          (e.prototype.componentDidUpdate = function() {
            this.CheckScrollPosition();
          }),
          (e.prototype.UnbindWindowHandlers = function() {
            this.m_elScroll &&
              (this.m_elScroll.ownerDocument.defaultView &&
                this.m_elScroll.ownerDocument.defaultView.removeEventListener(
                  "resize",
                  this.CheckScrollPosition
                ),
              (this.m_elScroll = void 0));
          }),
          (e.prototype.render = function() {
            var e = "auto";
            return (
              this.state.nCalculatedHeightPx &&
                (e = this.state.nCalculatedHeightPx + "px"),
              ve.createElement(
                "div",
                {
                  onWheel: this.OnWheel,
                  className: "HorizontalMiniSlider",
                  style: { height: e }
                },
                ve.createElement(
                  "div",
                  {
                    onClick: this.OnSlideLeftClick,
                    className:
                      "HorizontalMiniSliderArrow Left" +
                      (this.state.bLeftSliderVisible ? " Visible" : "")
                  },
                  ve.createElement(Qo.k, null)
                ),
                ve.createElement(
                  "div",
                  {
                    onClick: this.OnSlideRightClick,
                    className:
                      "HorizontalMiniSliderArrow Right" +
                      (this.state.bRightSliderVisible ? " Visible" : "")
                  },
                  ve.createElement(Qo.k, null)
                ),
                ve.createElement(
                  "div",
                  {
                    className:
                      "HorizontalMiniSliderScroll " + this.props.className,
                    onScroll: this.CheckScrollPosition,
                    ref: this.OnRef
                  },
                  this.props.children
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnRef", null),
          R.c([M.a], e.prototype, "CheckScrollPosition", null),
          R.c([M.a], e.prototype, "OnSlideLeftClick", null),
          R.c([M.a], e.prototype, "OnSlideRightClick", null),
          R.c([M.a], e.prototype, "OnWheel", null),
          e
        );
      })(ve.Component),
      Dc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_mapTabs = new Map()),
            (t.m_rgOrderedRenderedTabs = []),
            (t.m_bUsePopups = !1),
            (t.m_nInitialTabDragOffset = -1),
            (t.m_nTheaterTopHoverHeight = 12),
            (t.m_fnUnregisterDropComplete = void 0),
            (t.state = {
              tabDrag: void 0,
              iDragIndex: 0,
              windowWidth: 0,
              bTheaterModeTopHovered: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidUpdate = function() {
            this.FixScrollLocation();
          }),
          (e.prototype.componentDidMount = function() {
            var e = this.props.popup ? this.props.popup.window : window;
            e && e.addEventListener("resize", this.OnWindowResizeEvent),
              this.m_elchatTabDiv &&
                (this.setState({
                  windowWidth: this.m_elchatTabDiv.clientWidth
                }),
                this.UpdateWindowIcon());
          }),
          (e.prototype.componentWillUnmount = function() {
            var e = this.props.popup ? this.props.popup.window : window;
            e && e.removeEventListener("resize", this.OnWindowResizeEvent);
          }),
          (e.prototype.OnWindowResizeEvent = function() {
            this.setState({ windowWidth: this.m_elchatTabDiv.clientWidth });
          }),
          (e.prototype.SetDragTab = function(e) {
            void 0 !== e
              ? (this.m_fnUnregisterDropComplete = Qu.DragDropManager.RegisterForDropComplete(
                  this.HandleDropComplete
                ))
              : this.m_fnUnregisterDropComplete &&
                (this.m_fnUnregisterDropComplete.Unregister(),
                (this.m_fnUnregisterDropComplete = void 0)),
              this.setState({ tabDrag: e }),
              (this.m_nInitialTabDragOffset = -1);
          }),
          (e.prototype.GetDragTab = function() {
            return this.state.tabDrag;
          }),
          (e.prototype.HandleDropComplete = function(e) {
            (this.m_fnUnregisterDropComplete = void 0),
              this.setState({ tabDrag: void 0 });
          }),
          (e.prototype.FixScrollLocation = function() {
            if (this.m_elScroll && this.props.activeTab) {
              var e = this.m_mapTabs.get(this.props.activeTab.GetUniqueID());
              if (e) {
                var t = e.GetChatTabRef();
                if (t) {
                  var n = t.offsetLeft,
                    o = t.offsetLeft + t.scrollWidth,
                    i =
                      this.m_elScroll.scrollLeft + this.m_elScroll.clientWidth;
                  if (n < i && i < o) {
                    var r =
                      n - this.m_elScroll.clientWidth + t.scrollWidth + 40;
                    this.SetScrollLeft(r);
                  } else if (
                    n < this.m_elScroll.scrollLeft + 40 ||
                    o > this.m_elScroll.scrollLeft + this.m_elScroll.clientWidth
                  ) {
                    0 != (r = n) && (r -= 40), this.SetScrollLeft(r);
                  }
                }
              }
            }
          }),
          (e.prototype.SetScrollLeft = function(e) {
            this.m_elScroll.scrollLeft != e &&
              (this.m_animation && this.m_animation.Cancel(),
              (this.m_animation = new pi(
                this.m_elScroll,
                { scrollLeft: e },
                { msDuration: 300, timing: "sine", onComplete: function() {} }
              )),
              this.m_animation.Start());
          }),
          (e.prototype.UpdateDragOffset = function(e) {
            var t,
              n = e.clientX;
            for (t = 0; t < this.m_rgOrderedRenderedTabs.length; t++) {
              var o = this.m_rgOrderedRenderedTabs[t],
                i = this.m_mapTabs.get(o.GetUniqueID()),
                r = i && i.GetBoundingClientRect();
              if (
                i &&
                r &&
                (n - r.left < r.width &&
                  (this.m_nInitialTabDragOffset < 0 &&
                    (this.m_nInitialTabDragOffset = n - r.left),
                  n - this.m_nInitialTabDragOffset < r.left + r.width / 2))
              )
                break;
            }
            this.state.iDragIndex != t && this.setState({ iDragIndex: t });
          }),
          (e.prototype.OnTabRef = function(e, t) {
            t ? this.m_mapTabs.set(e, t) : this.m_mapTabs.delete(e),
              this.UpdateWindowIcon();
          }),
          (e.prototype.OnScrollRef = function(e) {
            this.m_elScroll = e ? e.GetScrollRef() : null;
          }),
          (e.prototype.SelectTab = function(e) {
            this.props.tabSet.ActivateTab(e);
          }),
          (e.prototype.OnDragStart = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            t && "chattab" == t.type && (t.tabSet = this.props.tabSet);
          }),
          (e.prototype.OnChatTabContianerRef = function(e) {
            this.m_elchatTabDiv = e;
          }),
          (e.prototype.OnDragEnd = function() {
            this.setState({ tabDrag: void 0 });
          }),
          (e.prototype.OnBackClick = function(e) {
            this.props.ResponsiveWindowState.SetActiveView($n.FriendsList);
          }),
          (e.prototype.ToggleSingleWindowToggle = function() {
            Qu.ToggleSingleWindowToggle(this.props.popup);
          }),
          (e.prototype.ShowFriendsList = function(e) {
            Yo.UIStore.SetTheaterMode(!1),
              Yo.UIStore.SetFriendsListCollapsed(zu(this, e), !1);
          }),
          (e.prototype.StartTopbarEventListener = function() {
            this.m_elchatTabDiv.ownerDocument.defaultView.addEventListener(
              "mousemove",
              this.OnTopbarHovered
            );
          }),
          (e.prototype.OnTopbarHovered = function(e) {
            var t = e.clientY;
            Yo.UIStore.GetTheaterMode() ||
              this.m_elchatTabDiv.ownerDocument.defaultView.removeEventListener(
                "mousemove",
                this.OnTopbarHovered
              ),
              t > this.m_nTheaterTopHoverHeight
                ? this.state.bTheaterModeTopHovered &&
                  (this.setState({ bTheaterModeTopHovered: !1 }),
                  (this.m_nTheaterTopHoverHeight = 12))
                : this.state.bTheaterModeTopHovered ||
                  ((this.m_nTheaterTopHoverHeight = 50),
                  this.setState({ bTheaterModeTopHovered: !0 }));
          }),
          (e.prototype.OnTabSelectorClick = function(e) {
            var t =
              33 * this.m_mapTabs.size +
                (e.currentTarget.offsetTop + e.currentTarget.clientHeight) +
                16 >
              e.currentTarget.ownerDocument.defaultView.innerHeight;
            Object(Zo.a)(
              ve.createElement(this.ChatTabSelectorContextMenu, null),
              e.currentTarget,
              {
                bOverlapHorizontal: !0,
                bPreferPopLeft: !1,
                bPreferPopTop: !1,
                bForcePopup: t
              }
            );
          }),
          (e.prototype.ChatTabSelectorContextMenu = function() {
            for (
              var e = [], t = 0, n = this.props.tabSet.tabs;
              t < n.length;
              t++
            ) {
              var o = n[t],
                i = ve.createElement(Tc, {
                  tab: o,
                  active: !0,
                  selectTab: this.SelectTab,
                  fnOnDragEnd: null,
                  bDisableContextMenu: !0
                });
              e.push(
                ve.createElement(
                  mr.d,
                  { key: o.GetUniqueID(), onSelected: null },
                  i
                )
              );
            }
            return ve.createElement(
              mr.c,
              { className: "ChatTabs compactView CompactFriendsList" },
              e
            );
          }),
          (e.prototype.UpdateWindowIcon = function() {
            if (
              this.props.popup &&
              this.props.popup.window &&
              void 0 !== this.props.popup.window.SteamClient &&
              null != this.props.popup.window.SteamClient.Window.SetWindowIcon
            ) {
              for (
                var e = !1, t = !1, n = 0, o = this.props.tabSet.tabs;
                n < o.length;
                n++
              ) {
                var i = o[n];
                0 < i.GetUnreadMessageCount() && (e = !0),
                  i.IsVoiceActive() && (t = !0);
              }
              try {
                t
                  ? this.props.popup.window.SteamClient.Window.SetWindowIcon(
                      "voice"
                    )
                  : e
                    ? this.props.popup.window.SteamClient.Window.SetWindowIcon(
                        "messages"
                      )
                    : this.props.popup.window.SteamClient.Window.SetWindowIcon(
                        "steam"
                      );
              } catch (e) {}
            }
          }),
          (e.prototype.render = function() {
            var o = this,
              e = Yo.UIStore.GetTheaterMode();
            if (
              (this.UpdateWindowIcon(),
              this.props.tabSet.tabCount <= 0 && !this.props.popup)
            )
              return null;
            var t,
              n = this.props.tabSet.tabs,
              i = this.props.activeTab,
              r = !1,
              a = !1;
            i instanceof Pt
              ? (r = i.isBroadcastShown)
              : i instanceof no && (r = !0);
            for (var s = 0, c = n; s < c.length; s++) {
              if (0 < c[s].GetUnreadMessageCount()) {
                a = !0;
                break;
              }
            }
            if (this.state.tabDrag) {
              var l = n.indexOf(this.state.tabDrag);
              -1 != l
                ? l != this.state.iDragIndex &&
                  ((t = n.slice()),
                  Object(w.e)(
                    t,
                    l,
                    Math.min(this.state.iDragIndex, n.length - 1)
                  ))
                : this.state.iDragIndex < n.length
                  ? (t = n.slice()).splice(
                      this.state.iDragIndex,
                      0,
                      this.state.tabDrag
                    )
                  : (t = n.concat(this.state.tabDrag));
            }
            (n = t || n), (this.m_rgOrderedRenderedTabs = n);
            var p,
              u = "ChatTabs titleBarContainer";
            this.props.popup && (u += " HasWindowControls"),
              1 == n.length
                ? (u += " OneTab")
                : this.state.windowWidth < 180 * n.length + 180 &&
                  (u += " HasTabs"),
              Yo.SettingsStore.FriendsSettings.bCompactFriendsList &&
                (u += " compactView"),
              this.state.bTheaterModeTopHovered && (u += " TheaterTopHovered"),
              this.props.ResponsiveWindowState &&
                (p = ve.createElement(
                  "div",
                  {
                    className: "ChatTabsBackButton",
                    onClick: this.OnBackClick
                  },
                  "<<"
                )),
              r && (u += " activeTabHasBroadcast");
            var m,
              d = !1,
              h = !0;
            this.props.popup &&
              ((m = qu(this.props.popup)),
              (h = Yo.UIStore.BIsFriendsListSingleWindow(m)),
              (d = m != qo)),
              e && this.m_elchatTabDiv && this.StartTopbarEventListener();
            var _ =
              (this.m_elchatTabDiv &&
                180 * this.props.tabSet.tabCount + (G.a.IN_CLIENT ? 168 : 48) >
                  this.m_elchatTabDiv.clientWidth) ||
              !1;
            return ve.createElement(
              "div",
              {
                className: u,
                onDragStart: this.OnDragStart,
                ref: this.OnChatTabContianerRef
              },
              this.props.popup &&
                ve.createElement(
                  zi,
                  { hideMinMax: d, popup: this.props.popup },
                  " "
                ),
              p,
              ((e && h) || this.props.showOpenFriendsList) &&
                ve.createElement(
                  "div",
                  {
                    className: "chatTabOpenFriendsList",
                    onClick: this.ShowFriendsList
                  },
                  ve.createElement(Qo.r, null),
                  Object(re.b)("#FriendsList_ExpandButton")
                ),
              0 < this.props.tabSet.tabCount &&
                ve.createElement(
                  "div",
                  {
                    className:
                      "chatTabSetContainer" + (_ ? " showTabSelector" : "")
                  },
                  ve.createElement(
                    Mc,
                    { className: "chatTabList", ref: this.OnScrollRef },
                    ve.createElement(
                      Xo,
                      { className: "chatTabTransitionGroup" },
                      n.map(function(t, e) {
                        var n = o.props.activeTab == t;
                        return ve.createElement(
                          Jo,
                          {
                            className: "ChatTabTranstionContainer",
                            classNames: "ChatTabTransiton",
                            key: t.GetUniqueID(),
                            timeout: 350
                          },
                          ve.createElement(Tc, {
                            tab: t,
                            active: n,
                            selectTab: o.SelectTab,
                            ref: function(e) {
                              return o.OnTabRef(t.GetUniqueID(), e);
                            },
                            fnOnDragEnd: o.OnDragEnd
                          })
                        );
                      })
                    )
                  ),
                  _ &&
                    ve.createElement(
                      "div",
                      {
                        className:
                          "chatTabSelector" + (a ? " UnreadMessages" : ""),
                        onClick: this.OnTabSelectorClick
                      },
                      ve.createElement(Qo.l, null),
                      a &&
                        ve.createElement("div", {
                          className: "ChatUnreadMessageIndicator"
                        })
                    ),
                  G.a.IN_CLIENT &&
                    ve.createElement(
                      ve.Fragment,
                      null,
                      ve.createElement("div", {
                        className: "chatTabDraggableSpace"
                      }),
                      ve.createElement("div", {
                        className: "chatTabDraggableSpace ChromeClearance"
                      })
                    )
                ),
              this.props.popup &&
                G.a.IN_CLIENT &&
                ve.createElement(
                  "div",
                  {
                    className:
                      "title-area-icon singleWindowToggle" +
                      (d ? " inOverlay" : ""),
                    title: Object(re.b)(
                      "#FriendsList_TitleArea_SingleWindowButton"
                    ),
                    onClick: this.ToggleSingleWindowToggle
                  },
                  ve.createElement(Qo.R, null)
                ),
              ve.createElement("div", { className: "dropTargetBox" }),
              e &&
                ve.createElement(
                  "div",
                  {
                    className:
                      "theaterModeHoverSpace" + (a ? " hasUnreadMessages" : "")
                  },
                  a &&
                    ve.createElement(
                      "div",
                      { className: "ChatUnreadMessageIndicator" },
                      ve.createElement("div", { className: "chatUnreadCircle" })
                    )
                )
            );
          }),
          R.c([m.observable], e.prototype, "m_nTheaterTopHoverHeight", void 0),
          R.c([M.a], e.prototype, "OnWindowResizeEvent", null),
          R.c([M.a], e.prototype, "HandleDropComplete", null),
          R.c([M.a], e.prototype, "OnTabRef", null),
          R.c([M.a], e.prototype, "OnScrollRef", null),
          R.c([M.a], e.prototype, "SelectTab", null),
          R.c([M.a], e.prototype, "OnDragStart", null),
          R.c([M.a], e.prototype, "OnChatTabContianerRef", null),
          R.c([M.a], e.prototype, "OnDragEnd", null),
          R.c([M.a], e.prototype, "OnBackClick", null),
          R.c([M.a], e.prototype, "ToggleSingleWindowToggle", null),
          R.c([M.a], e.prototype, "ShowFriendsList", null),
          R.c([M.a], e.prototype, "StartTopbarEventListener", null),
          R.c([M.a], e.prototype, "OnTopbarHovered", null),
          R.c([M.a], e.prototype, "OnTabSelectorClick", null),
          R.c([M.a], e.prototype, "ChatTabSelectorContextMenu", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Tc = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (e.m_bMiddleMouseDown = !1), e;
        }
        return (
          R.d(e, t),
          (e.prototype.BindChatTab = function(e) {
            this.m_elChatTab = e;
          }),
          (e.prototype.GetBoundingClientRect = function() {
            return this.m_elChatTab
              ? this.m_elChatTab.getBoundingClientRect()
              : void 0;
          }),
          (e.prototype.GetChatTabRef = function() {
            return this.m_elChatTab;
          }),
          (e.prototype.OnDragStart = function(e) {
            var t = e.clientX - e.currentTarget.getBoundingClientRect().left,
              n = e.clientY - e.currentTarget.getBoundingClientRect().top;
            Qu.DragDropManager.StartDrag({
              type: "chattab",
              tab: this.props.tab,
              offsetX: t,
              offsetY: n
            });
          }),
          (e.prototype.OnDragEnd = function(e) {
            var t = Qu.DragDropManager.GetDragData();
            if (t && "chattab" == t.type) {
              var n = t,
                o = !1;
              if (n.tabSet)
                o = Yo.UIStore.GetPerContextChatData(
                  n.tabSet.GetBrowserContext()
                ).BUsePopups();
              if (
                !Qu.DragDropManager.BWasDropConsumed() &&
                n.tabSet &&
                1 < n.tabSet.tabCount &&
                o
              ) {
                var i = e.currentTarget.getBoundingClientRect(),
                  r = i.left - e.clientX,
                  a = i.top - e.clientY;
                if (1e4 < r * r + a * a) {
                  var s = e.currentTarget.ownerDocument.defaultView,
                    c = {
                      left: Math.max(0, e.screenX - n.offsetX),
                      top: Math.max(0, e.screenY - n.offsetY),
                      width: s.innerWidth,
                      height: s.innerHeight
                    };
                  if ((this.props.fnOnDragEnd(), o)) {
                    var l = zu(this, e);
                    e.currentTarget.ownerDocument.defaultView.SteamClient.Window.GetMousePositionDetails(
                      function(e) {
                        e && ((c.left = -n.offsetX), (c.top = -n.offsetY)),
                          Yo.UIStore.MoveTabToNewPopup(l, n.tab, c, e);
                      }
                    );
                  } else Yo.UIStore.MoveTabToNewPopup(zu(this, e), n.tab, c);
                }
              }
            }
            Qu.DragDropManager.EndDrag();
          }),
          (e.prototype.OnMouseDown = function(e) {
            0 == e.button
              ? this.props.selectTab(this.props.tab)
              : 1 == e.button &&
                (e.preventDefault(), (this.m_bMiddleMouseDown = !0));
          }),
          (e.prototype.OnMouseUp = function(e) {
            1 == e.button &&
              this.m_bMiddleMouseDown &&
              (Yo.UIStore.CloseTab(zu(this, e), this.props.tab),
              e.preventDefault(),
              (this.m_bMiddleMouseDown = !1));
          }),
          (e.prototype.OnMouseLeave = function(e) {
            this.m_bMiddleMouseDown = !1;
          }),
          (e.prototype.OnCloseClick = function(e) {
            Yo.UIStore.CloseTab(zu(this, e), this.props.tab),
              e.stopPropagation();
          }),
          (e.prototype.OnContextMenu = function(e) {
            if (!this.props.bDisableContextMenu) {
              var t = this.props.tab;
              if (t.IsChatRoom()) {
                if (t instanceof Pt) {
                  Yr(e, (n = t).GetGroup(), { tab: t });
                }
              } else {
                var n = this.props.tab.GetChatView();
                Er(
                  zu(this, e),
                  { tab: this.props.tab },
                  n.chat.chat_partner,
                  e
                );
              }
            }
          }),
          (e.prototype.render = function() {
            var e = this.props.tab,
              t = "chatTab no-drag";
            return (
              this.props.active && (t += " active"),
              e.IsChatRoom() && (t += " chatRoom"),
              e.IsVoiceActive() &&
                ((t += " VoiceActive"),
                Yo.ChatStore.VoiceChat.IsMicMuted() && (t += " MicMuted")),
              ve.createElement(
                "div",
                {
                  className: t,
                  ref: this.BindChatTab,
                  draggable: !0,
                  onMouseDown: this.OnMouseDown,
                  onMouseUp: this.OnMouseUp,
                  onMouseLeave: this.OnMouseLeave,
                  onDragStart: this.OnDragStart,
                  onDragEnd: this.OnDragEnd,
                  onContextMenu: this.OnContextMenu
                },
                ve.createElement("div", { className: "chatTabHighlight" }),
                e.IsVoiceActive() &&
                  ve.createElement(
                    "div",
                    {
                      className: "MicStatus",
                      title: Yo.ChatStore.VoiceChat.IsMicMuted()
                        ? Object(re.b)("#Tooltip_MicStatus_Muted")
                        : Object(re.b)("#Tooltip_MicStatus_Active")
                    },
                    ve.createElement(Qo.B, null)
                  ),
                ve.createElement(
                  qi,
                  null,
                  ve.createElement(Rc, { tab: this.props.tab })
                ),
                ve.createElement(
                  "div",
                  { className: "TabRightContainer" },
                  ve.createElement(
                    "div",
                    {
                      title: Object(re.b)("#Chat_CloseTooltip"),
                      className: "chatTabClose closeButton",
                      onClick: this.OnCloseClick
                    },
                    ve.createElement(Qo.fb, null)
                  ),
                  ve.createElement(Gc, { tab: this.props.tab })
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "BindChatTab", null),
          R.c([M.a], e.prototype, "OnDragStart", null),
          R.c([M.a], e.prototype, "OnDragEnd", null),
          R.c([M.a], e.prototype, "OnMouseDown", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([M.a], e.prototype, "OnMouseLeave", null),
          R.c([M.a], e.prototype, "OnCloseClick", null),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Gc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.tab;
            if (e.IsChatRoom() && e instanceof Pt) {
              var t = e;
              return t.GetGroup().HasUnreadChatMessage
                ? ve.createElement(
                    ve.Fragment,
                    null,
                    ve.createElement(na, {
                      group: t.GetGroup(),
                      className: "ChatTabUnread"
                    }),
                    ve.createElement("div", { className: "UnreadGlow" })
                  )
                : null;
            }
            return e.GetUnreadMessageCount()
              ? ve.createElement(
                  ve.Fragment,
                  null,
                  ve.createElement(
                    "div",
                    { className: "chatTabUnreadBadge" },
                    e.GetUnreadMessageCount()
                  ),
                  ve.createElement("div", { className: "UnreadGlow" })
                )
              : null;
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Rc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.tab.GetChatView();
            if (e && e.chat instanceof zt)
              return ve.createElement(
                "div",
                { className: "ChatTabContent" },
                ve.createElement(Qs, {
                  friend: e.chat.chat_partner,
                  noActions: !0,
                  context: { chat: e.chat }
                })
              );
            if (e && e.chat instanceof Tt) {
              var t = this.props.tab.GetGroup();
              return ve.createElement(
                "div",
                { className: "ChatTabContent ChatRoom" },
                ve.createElement(ss, { group: t, small: !0 }),
                ve.createElement(
                  "div",
                  { className: "chatTabGroupName" },
                  this.props.tab.GetTabName()
                )
              );
            }
            if (this.props.tab instanceof no) {
              var n = this.props.tab.GetTabName(),
                o =
                  G.a.CHAT_BASE_URL +
                  "public/images/webui/broadcast/quake_logo.jpg";
              return ve.createElement(
                "div",
                { className: "ChatTabContent ChatRoom" },
                ve.createElement(
                  "div",
                  { className: "ChatRoomGroupAvatar HasAvatar Small" },
                  ve.createElement("img", {
                    className: "ChatRoomGroupAvatar_Avatar",
                    src: o
                  })
                ),
                ve.createElement("div", { className: "chatTabGroupName" }, n)
              );
            }
            return null;
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    var Nc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = { bDontShowChecked: !1, strChatName: "" }),
            (t.m_strChannelName = ""),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.DismissDialog = function() {
            this.props.closeModal();
          }),
          (e.prototype.OnSubmit = function() {
            Qu.SetUIDisplayPref(
              "bDontShowVoiceAlert",
              this.state.bDontShowChecked
            ),
              this.props.closeModal();
          }),
          (e.prototype.OnDialogChecked = function() {
            this.setState({ bDontShowChecked: !this.state.bDontShowChecked });
          }),
          (e.prototype.OnManualVoiceChatExit = function() {
            Yo.VoiceStore.OnUserEndVoiceChat(), this.OnSubmit();
          }),
          (e.prototype.componentDidMount = function() {
            this.setState({
              strChatName: Yo.ChatStore.GetActiveVoiceChat().name
            });
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              Ki,
              { onEscKeypress: this.DismissDialog },
              ve.createElement(
                Oi,
                {
                  classNameContent: "CloseActiveVoiceWindowConfirmation",
                  onSubmit: this.OnSubmit
                },
                ve.createElement(
                  mi,
                  null,
                  ve.createElement(
                    "div",
                    null,
                    Object(re.b)("#Chat_StillInVoiceDialog_Title")
                  )
                ),
                ve.createElement(
                  fi,
                  null,
                  ve.createElement(
                    "div",
                    { className: "activeVoiceDetails" },
                    Object(re.b)("#Chat_StillInVoiceDialog_Desc1")
                  ),
                  ve.createElement(
                    "div",
                    { className: "activeVoiceDetails" },
                    Object(re.b)("#Chat_StillInVoiceDialog_Desc2")
                  ),
                  ve.createElement(
                    "div",
                    { className: "voiceControlsExample" },
                    ve.createElement(Rs, {
                      name: this.state.strChatName,
                      chat: Yo.ChatStore.GetActiveVoiceChat(),
                      nostatus: !0
                    }),
                    ve.createElement("div", {
                      className: "circleHighlight voiceExit"
                    })
                  ),
                  !1
                ),
                ve.createElement(
                  di,
                  null,
                  ve.createElement(
                    "div",
                    { className: "_DialogColLayout" },
                    ve.createElement(
                      Ei,
                      { onClick: this.OnSubmit },
                      Object(re.b)("#Chat_StillInVoiceDialog_KeepChatting")
                    )
                  ),
                  ve.createElement(
                    "div",
                    {
                      className: "dontShowConfirmation",
                      onClick: this.OnDialogChecked
                    },
                    ve.createElement(Li, {
                      checked: this.state.bDontShowChecked,
                      onChange: this.OnDialogChecked
                    }),
                    Object(re.b)("#Dialog_DontShowMeAgain")
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "DismissDialog", null),
          R.c([M.a], e.prototype, "OnSubmit", null),
          R.c([M.a], e.prototype, "OnDialogChecked", null),
          R.c([M.a], e.prototype, "OnManualVoiceChatExit", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Lc = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.HideStats = function() {
            this.props.closeStats && this.props.closeStats();
          }),
          (e.prototype.render = function() {
            var e = this.props.stats;
            return ve.createElement(
              "div",
              { className: "dash_video_stats" },
              ve.createElement(
                "button",
                {
                  className: "dash_stat_close_button",
                  onClick: this.HideStats
                },
                ve.createElement(Qo.fb, null)
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_BufferingResolution"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetBufferingResolutionToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_PlaybackResolution"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetPlaybackResolutionToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_HtmlResolution"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetHTMLVideoResolutionToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_ContentServer"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetContentServerToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_StallEvents"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetStalledEventsToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_FailedDownloads"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetFailedDownloadsToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_TimeToFirstFrame"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetTimeToFirstFrameToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_PlaybackRate"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetPlaybackRateForDisplay()
                )
              ),
              ve.createElement(kc, { stats: e })
            );
          }),
          R.c([M.a], e.prototype, "HideStats", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      kc = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.createBufferedRange = function(e) {
            var t = this.props.stats,
              n = [],
              o = e ? "vidbuf" : "audbuf",
              i = e
                ? t.GetNumBufferedVideoRanges()
                : t.GetNumBufferedAudioRanges();
            if (0 < i)
              for (var r = 0; r < i; ++r) {
                var a = Object(re.b)(
                    e
                      ? "#DASHPlayerStats_VideoBufferRange"
                      : "#DASHPlayerStats_AudioBufferRange",
                    r
                  ),
                  s = e
                    ? t.GetBufferedVideoSegmentForDisplay(r)
                    : t.GetBufferedAudioSegmentForDisplay(r);
                n.push(
                  ve.createElement(
                    "div",
                    { key: o + r },
                    a,
                    " ",
                    ve.createElement(
                      "span",
                      { className: "videoStatsValue" },
                      s
                    )
                  )
                );
              }
            else {
              a = Object(re.b)(
                e
                  ? "#DASHPlayerStats_VideoNoRangeInformation"
                  : "#DASHPlayerStats_AudioNoRangeInformation"
              );
              n.push(ve.createElement("div", { key: o + "none" }, a));
            }
            return n;
          }),
          (e.prototype.render = function() {
            var e = this.props.stats;
            return ve.createElement(
              "div",
              { className: "dash_video_quick_stats" },
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_BytesReceived"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetBytesReceivedToDisplay()
                )
              ),
              this.props.stats.BHasFrameInformation() &&
                ve.createElement(
                  "div",
                  null,
                  Object(re.b)("#DASHPlayerStats_DroppedFrames"),
                  " ",
                  ve.createElement(
                    "span",
                    { className: "videoStatsValue" },
                    e.GetDroppedFramesToDisplay()
                  )
                ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_VideoBuffered"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetVideoBufferedToDisplay(),
                  " "
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_AudioBuffered"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetAudioBufferedToDisplay(),
                  " "
                )
              ),
              this.createBufferedRange(!0),
              this.createBufferedRange(!1),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_BandwidthRequired"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetBandwidthRequiredToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_BandwidthVideo"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetBandwithVideoToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_BandwidthNums"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetBandwidthStatsToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_DownloadNums"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetDownloadTimeStatsToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_ActiveDownloads"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetActiveDownloadsToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_VideoDownloadProgress"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetVideoDownloadProgressToDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_DroppingFrames"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetPersistentFrameDropsForDisplay()
                )
              ),
              ve.createElement(
                "div",
                null,
                Object(re.b)("#DASHPlayerStats_CurrentFPS"),
                " ",
                ve.createElement(
                  "span",
                  { className: "videoStatsValue" },
                  e.GetCurrentFPSForDisplay()
                )
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component);
    function Ac(e, t) {
      var n;
      if (
        ((n =
          "currentTarget" in e ? e.currentTarget.ownerDocument.defaultView : e),
        "undefined" != typeof SteamClient &&
          void 0 !== SteamClient.SharedConnection)
      ) {
        var o = qu(n);
        SteamClient.WebChat.OpenURLInClient(t, o.m_unPID);
      } else
        0 == t.indexOf("steam://")
          ? (n.location.href = t)
          : n.open(
              t,
              null,
              "menubar,location,resizable,scrollbars,status,noopener"
            );
    }
    var Pc = "broadcastplayercontextmenu",
      Fc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_schHideControls = new T()),
            (t.m_schUnmountControls = new T()),
            (t.m_elBroadcastPlayer = null),
            (t.m_bMouseDown = !1),
            (t.m_elMouseDown = null),
            (t.m_listeners = new N()),
            (t.m_strContextMenuLeft = "0px"),
            (t.m_strContextMenuTop = "0px"),
            console.log(t.props.steamID),
            (t.state = {
              bMountControls: !1,
              bControlsVisible: !1,
              bShowStats: !1,
              video: null,
              nResizedHeight: null,
              bFullscreen: !1,
              bShowContextMenu: !1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.StopVideo = function() {
            var e = this.state.video;
            e && (Zn.StopVideo(e), this.setState({ video: null }));
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_listeners.Unregister(),
              this.m_schHideControls.Cancel(),
              this.m_schUnmountControls.Cancel(),
              this.StopVideo();
          }),
          (e.prototype.BindBroadcastPlayerRef = function(e) {
            this.m_listeners.Unregister(),
              (this.m_elBroadcastPlayer = e) &&
                (this.m_listeners.AddEventListener(
                  e,
                  "fullscreenchange",
                  this.OnFullscreenChange
                ),
                this.m_listeners.AddEventListener(
                  e,
                  "mozfullscreenchange",
                  this.OnFullscreenChange
                ),
                this.m_listeners.AddEventListener(
                  e,
                  "webkitfullscreenchange",
                  this.OnFullscreenChange
                ),
                this.m_listeners.AddEventListener(
                  e,
                  "msfullscreenchange",
                  this.OnFullscreenChange
                ));
          }),
          (e.prototype.BindVideoRef = function(e) {
            if ((this.StopVideo(), e)) {
              var t = Zn.StartVideo(
                e,
                this.props.steamID,
                this.props.watchLocation
              );
              this.setState({ video: t });
            }
            this.m_elVideo = e;
          }),
          (e.prototype.OnMouseDown = function(e) {
            (this.m_bMouseDown = !0),
              (this.m_elMouseDown = e.currentTarget),
              this.m_elMouseDown.ownerDocument.defaultView.addEventListener(
                "mouseup",
                this.OnMouseUp
              );
          }),
          (e.prototype.OnMouseUp = function(e) {
            (this.m_bMouseDown = !1),
              this.m_elMouseDown.ownerDocument.defaultView.removeEventListener(
                "mouseup",
                this.OnMouseUp
              ),
              this.m_schHideControls.Schedule(3200, this.HideControls),
              !this.state.bShowContextMenu ||
                (e.srcElement &&
                  e.srcElement.parentElement &&
                  e.srcElement.parentElement.id == Pc) ||
                this.setState({ bShowContextMenu: !1 });
          }),
          (e.prototype.OnMouseMove = function(e) {
            this.m_schHideControls.Cancel(),
              this.m_schUnmountControls.Cancel(),
              this.state.bMountControls
                ? this.state.bControlsVisible ||
                  this.setState({ bControlsVisible: !0 })
                : this.setState({ bMountControls: !0 }),
              this.m_schHideControls.Schedule(3200, this.HideControls);
          }),
          (e.prototype.OnMouseLeave = function(e) {
            this.HideControls();
          }),
          (e.prototype.HideControls = function() {
            this.state.bControlsVisible &&
              !this.m_bMouseDown &&
              this.setState({ bControlsVisible: !1, bShowContextMenu: !1 });
          }),
          (e.prototype.UmountControls = function() {
            this.setState(function(e) {
              if (!e.bControlsVisible && e.bMountControls)
                return { bMountControls: !1 };
            });
          }),
          (e.prototype.componentDidUpdate = function(e, t) {
            var n = this;
            !t.bMountControls && this.state.bMountControls
              ? setTimeout(function() {
                  n.setState(function(e) {
                    return { bControlsVisible: e.bMountControls };
                  });
                }, 15)
              : t.bControlsVisible &&
                !this.state.bControlsVisible &&
                this.m_schUnmountControls.Schedule(2e3, this.UmountControls);
          }),
          (e.prototype.ShowStatsView = function() {
            var e = this.state.video;
            e &&
              (this.state.bShowStats ||
                (this.setState({ bShowStats: !0 }),
                e.SetStatsViewIsVisible(!0)));
          }),
          (e.prototype.OnContextMenu = function(e) {
            if (!this.state.bShowContextMenu) {
              var t = this.m_elVideo.parentElement.getBoundingClientRect();
              (this.m_strContextMenuLeft = e.clientX - t.left + "px"),
                (this.m_strContextMenuTop = e.clientY - t.top + "px"),
                this.setState({ bShowContextMenu: !0 });
            }
          }),
          (e.prototype.ToggleStatsView = function(e) {
            var t = !this.state.bShowStats;
            this.setState({ bShowStats: t });
            var n = this.state.video;
            n && n.SetStatsViewIsVisible(t);
          }),
          (e.prototype.ShowStorePage = function(e) {
            var t = this.state.video;
            if (t) {
              var n = t.GetBroadcastInfo();
              if (n)
                Ac(e, G.a.STORE_BASE_URL + "app/" + n.m_strAppId),
                  e.stopPropagation();
            }
          }),
          (e.prototype.GetContextMenuItems = function() {
            var t = this,
              e = [],
              n = this.state.video;
            if (!n) return e;
            var o = n.GetBroadcastInfo();
            return (
              e.push(
                ve.createElement(
                  mr.b,
                  {
                    key: "togglestats",
                    bChecked: this.state.bShowStats,
                    onSelected: function(e) {
                      t.ToggleStatsView(e),
                        t.setState({ bShowContextMenu: !1 });
                    }
                  },
                  Object(re.b)("#Broadcast_VideoContext_ToggleStats")
                )
              ),
              o &&
                "0" != o.m_strAppId &&
                "7" != o.m_strAppId &&
                e.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "visitstore",
                      onSelected: function(e) {
                        t.ShowStorePage(e),
                          t.setState({ bShowContextMenu: !1 });
                      }
                    },
                    Object(re.b)("#Broadcast_VideoContext_OpenStore")
                  )
                ),
              e
            );
          }),
          (e.prototype.CloseStats = function() {
            var e = this.state.video;
            e &&
              this.state.bShowStats &&
              (this.setState({ bShowStats: !1 }), e.SetStatsViewIsVisible(!1));
          }),
          (e.prototype.OnToggleFullscreen = function() {
            this.m_elBroadcastPlayer &&
              (Object(ci.b)(this.m_elBroadcastPlayer)
                ? Object(ci.g)(this.m_elBroadcastPlayer)
                : Object(ci.l)(this.m_elBroadcastPlayer));
          }),
          (e.prototype.OnFullscreenChange = function(e) {
            if (this.m_elBroadcastPlayer) {
              var t = Object(ci.b)(this.m_elBroadcastPlayer);
              this.setState({ bFullscreen: t });
            }
          }),
          (e.prototype.BHideVideoControls = function() {
            var e = this.state.video;
            return (
              !e ||
              (!!e.GetUserInputNeeded() ||
                Zn.GetBroadcastState(e.GetBroadcastSteamID()) == Un.Error)
            );
          }),
          (e.prototype.render = function() {
            var e = this.state.video,
              t = e && e.BHasDASHStats() && this.state.bShowStats,
              n = this.state.bMountControls,
              o = this.state.bControlsVisible,
              i = e && e.GetUserInputNeeded(),
              r = e && e.GetBroadcastInfo(),
              a = "videoContainer";
            o || (a += " HidePlayerControls"),
              this.state.bFullscreen && (a += " fullscreenVideo");
            var s = [];
            !this.state.bFullscreen &&
              this.props.actions &&
              (s = s.concat(this.props.actions)),
              this.state.bFullscreen ||
                s.push(
                  ve.createElement("div", {
                    key: "ChatPosToggle ChatTheaterToggle",
                    onClick: this.props.onTheaterMode,
                    title: Object(re.b)("#Broadcast_View_Theater"),
                    className: "BroadcastTheaterToggle"
                  })
                ),
              s.push(
                ve.createElement("div", {
                  key: "FullscreenToggle",
                  title: Object(re.b)("#Broadcast_View_Fullscreen"),
                  onClick: this.OnToggleFullscreen,
                  className: "BroadcastFullscreenToggle"
                })
              );
            var c = this.state.bShowContextMenu,
              l = n && !this.BHideVideoControls(),
              p = n && !this.state.bFullscreen;
            return ve.createElement(
              "div",
              {
                ref: this.BindBroadcastPlayerRef,
                className: a,
                onMouseMove: this.OnMouseMove,
                onClick: this.OnMouseMove,
                onMouseLeave: this.OnMouseLeave,
                onContextMenu: this.OnContextMenu,
                onMouseDown: this.OnMouseDown
              },
              r &&
                ve.createElement(es, {
                  className: "videoBackground",
                  src: r.m_strThumbnailUrl,
                  draggable: !1,
                  duration: 2500
                }),
              ve.createElement("video", {
                className: "videoSrc",
                ref: this.BindVideoRef,
                muted: !0,
                autoPlay: !0,
                playsInline: !0,
                controls: !1
              }),
              l && ve.createElement(xc, { video: e, actions: s }),
              p && ve.createElement(Uc, { onClick: this.props.onRequestClose }),
              t &&
                ve.createElement(Lc, {
                  stats: e.GetDASHPlayerStats(),
                  closeStats: this.CloseStats
                }),
              ve.createElement(Bc, { video: e }),
              i && ve.createElement(Vc, { video: e }),
              c &&
                ve.createElement(
                  "div",
                  {
                    className: "STV_BroadcastContextMenuPanel",
                    style: {
                      left: this.m_strContextMenuLeft,
                      top: this.m_strContextMenuTop
                    }
                  },
                  ve.createElement(
                    "div",
                    { id: Pc, className: "STV_BroadcastSettingsMenuItems" },
                    this.GetContextMenuItems()
                  )
                )
            );
          }),
          R.c([M.a], e.prototype, "BindBroadcastPlayerRef", null),
          R.c([M.a], e.prototype, "BindVideoRef", null),
          R.c([M.a], e.prototype, "OnMouseDown", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([M.a], e.prototype, "OnMouseMove", null),
          R.c([M.a], e.prototype, "OnMouseLeave", null),
          R.c([M.a], e.prototype, "HideControls", null),
          R.c([M.a], e.prototype, "UmountControls", null),
          R.c([M.a], e.prototype, "ShowStatsView", null),
          R.c([M.a], e.prototype, "OnContextMenu", null),
          R.c([M.a], e.prototype, "ToggleStatsView", null),
          R.c([M.a], e.prototype, "ShowStorePage", null),
          R.c([M.a], e.prototype, "CloseStats", null),
          R.c([M.a], e.prototype, "OnToggleFullscreen", null),
          R.c([M.a], e.prototype, "OnFullscreenChange", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Bc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.video;
            if (e && e.GetUserInputNeeded()) return null;
            var t = Un.Loading,
              n = "";
            if (e) {
              (t = Zn.GetBroadcastState(e.GetBroadcastSteamID())),
                (n = Zn.GetBroadcastStateDescription(e.GetBroadcastSteamID()));
              var o = e.IsBuffering();
              t == Un.Ready && o && ((t = Un.Loading), (n = ""));
            }
            if (t == Un.Ready) return null;
            var i = t == Un.Loading;
            return ve.createElement(
              "div",
              { className: "BroadcastVideoWatchState" },
              i && ve.createElement(Ea, null),
              !i &&
                ve.createElement(
                  "div",
                  { className: "BroadcastVideoWatchState_Text" },
                  n
                )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Vc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnClick = function() {
            Zn.UserInputClickVideo(this.props.video);
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              "div",
              {
                className: "BroadcastVideoUserInputNeeded",
                onClick: this.OnClick
              },
              ve.createElement(Qo.G, null),
              ve.createElement(
                "span",
                null,
                Object(re.b)("#DASHPlayerControls_ClickToPlay")
              )
            );
          }),
          R.c([M.a], t.prototype, "OnClick", null),
          t
        );
      })(ve.Component),
      xc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.video;
            if (!e) return null;
            var t = e.has_segments;
            return ve.createElement(
              "div",
              { className: "videoControls" },
              ve.createElement($c, {
                steamID: this.props.video.GetBroadcastSteamID(),
                bHideThumbnail: !0
              }),
              ve.createElement(
                "div",
                { className: "videoControlsBottom" + (t ? "" : " noSegments") },
                ve.createElement(Zc, { video: e }),
                ve.createElement(
                  "div",
                  { className: "STV_BroadcastController" },
                  ve.createElement("div", {
                    className: "videoControlsButtons LeftSpacer"
                  }),
                  ve.createElement(jc, { video: e }),
                  ve.createElement(Hc, { video: e }),
                  ve.createElement(Kc, {
                    video: e,
                    actions: this.props.actions
                  })
                )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Uc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return this.props.onClick
              ? ve.createElement(
                  "div",
                  {
                    className: "STV_BroadcastClose",
                    onClick: this.props.onClick
                  },
                  ve.createElement(Qo.fb, null)
                )
              : null;
          }),
          t
        );
      })(ve.PureComponent),
      jc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnJumpBackward = function() {
            this.props.video.JumpTime(-15);
          }),
          (t.prototype.OnJumpForward = function() {
            this.props.video.JumpTime(15);
          }),
          (t.prototype.render = function() {
            var e = this.props.video;
            return ve.createElement(
              "div",
              { className: "videoControlsButtons PlayControls" },
              ve.createElement(zc, { video: e }),
              ve.createElement(
                "div",
                {
                  className: "videoControlButton videoControlJump controlFlip",
                  onClick: this.OnJumpBackward
                },
                ve.createElement(Qo.A, {
                  bHidePostArrow: !0,
                  bHidePreArrow: !0,
                  bShowJumpAheadBox: !0,
                  bFlipHorizontal: !0
                }),
                ve.createElement("div", { className: "jumpAheadValue" }, 15)
              ),
              ve.createElement(Wc, { video: e }),
              ve.createElement(
                "div",
                {
                  className: "videoControlButton videoControlJump",
                  onClick: this.OnJumpForward
                },
                ve.createElement(Qo.A, {
                  bHidePostArrow: !0,
                  bHidePreArrow: !0,
                  bShowJumpAheadBox: !0,
                  bFlipHorizontal: !1
                }),
                ve.createElement("div", { className: "jumpAheadValue" }, 15)
              ),
              ve.createElement(qc, { video: e })
            );
          }),
          R.c([M.a], t.prototype, "OnJumpBackward", null),
          R.c([M.a], t.prototype, "OnJumpForward", null),
          t
        );
      })(ve.Component),
      Hc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnGoLiveClicked = function(e) {
            this.props.video.JumpToLiveEdge();
          }),
          (t.prototype.render = function() {
            var e = this.props.video.IsOnLiveEdge();
            return ve.createElement(
              "div",
              { className: "videoControlsButtons GoLive" },
              ve.createElement(
                "div",
                {
                  className:
                    "videoControlButton videoControlGoLive" +
                    (e ? " isLiveEdge" : ""),
                  onClick: e ? null : this.OnGoLiveClicked
                },
                ve.createElement(Qo.A, {
                  bHidePreArrow: !0,
                  bHidePostArrow: !0,
                  bFlipHorizontal: !1
                }),
                ve.createElement(
                  "div",
                  { className: "jumpGoLive" },
                  e
                    ? Object(re.b)("#DASHPlayerControls_IsLive")
                    : Object(re.b)("#DASHPlayerControls_GoLive")
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnGoLiveClicked", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Wc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnTogglePlayPause = function() {
            this.props.video.TogglePlayPause();
          }),
          (t.prototype.render = function() {
            var e = this.props.video.IsPaused();
            return ve.createElement(
              "div",
              {
                className: "videoControlButton buttonPlayPause",
                onClick: this.OnTogglePlayPause
              },
              e ? ve.createElement(Qo.G, null) : ve.createElement(Qo.F, null)
            );
          }),
          R.c([M.a], t.prototype, "OnTogglePlayPause", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      zc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          Object.defineProperty(t.prototype, "has_previous_marker", {
            get: function() {
              return void 0 !== this.GetPreviousMarkerTime();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.GetPreviousMarkerTime = function() {
            if (this.props.video.has_markers)
              for (
                var e = this.props.video.GetTimelineMarkers(),
                  t = this.props.video.GetPlaybackTime(),
                  n = e.length - 1;
                0 <= n;
                n--
              )
                if (!(e[n].nTime >= t)) return e[n].nTime;
          }),
          (t.prototype.OnJumpToPreviousMarkerClicked = function(e) {
            var t = this.GetPreviousMarkerTime();
            void 0 !== t && this.props.video.Seek(t - 0.2);
          }),
          (t.prototype.render = function() {
            var e = this.props.video.BHasMarkersOrSegments();
            return ve.createElement(
              "div",
              {
                className:
                  "videoControlButton jumpToMarker controlFlip" +
                  (e ? "" : " noMarkersOrSegments") +
                  (this.has_previous_marker ? "" : " noMarkersInDirection"),
                onClick: this.OnJumpToPreviousMarkerClicked
              },
              ve.createElement(Qo.A, {
                bHidePostArrow: !0,
                bFlipHorizontal: !0
              })
            );
          }),
          R.c([m.computed], t.prototype, "has_previous_marker", null),
          R.c([M.a], t.prototype, "OnJumpToPreviousMarkerClicked", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      qc = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          Object.defineProperty(t.prototype, "has_next_marker", {
            get: function() {
              return void 0 !== this.GetNextMarkerTime();
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.GetNextMarkerTime = function() {
            if (this.props.video.has_markers)
              for (
                var e = this.props.video.GetTimelineMarkers(),
                  t = this.props.video.GetPlaybackTime(),
                  n = 0;
                n < e.length;
                n++
              )
                if (!(e[n].nTime <= t)) return e[n].nTime;
          }),
          (t.prototype.OnJumpToNextMarkerClicked = function(e) {
            var t = this.GetNextMarkerTime();
            void 0 !== t && this.props.video.Seek(t);
          }),
          (t.prototype.render = function() {
            var e = this.props.video.BHasMarkersOrSegments();
            return ve.createElement(
              "div",
              {
                className:
                  "videoControlButton jumpToMarker" +
                  (e ? "" : " noMarkersOrSegments") +
                  (this.has_next_marker ? "" : " noMarkersInDirection"),
                onClick: this.OnJumpToNextMarkerClicked
              },
              ve.createElement(Qo.A, {
                bHidePostArrow: !0,
                bFlipHorizontal: !1
              })
            );
          }),
          R.c([m.computed], t.prototype, "has_next_marker", null),
          R.c([M.a], t.prototype, "OnJumpToNextMarkerClicked", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Kc = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bSettingsOpen: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnVideoControlClick = function(e) {
            this.setState({ bSettingsOpen: !this.state.bSettingsOpen }),
              (this.m_SettingsButtonPos = [
                this.m_elSettingsButton.offsetLeft,
                this.m_elSettingsButton.offsetTop
              ]),
              (this.m_elClickListener =
                e.currentTarget.ownerDocument.defaultView),
              this.m_elClickListener.addEventListener(
                "mouseup",
                this.OnMouseUp,
                !0
              );
          }),
          (e.prototype.OnMouseUp = function(e) {
            this.m_elClickListener.removeEventListener(
              "mouseup",
              this.OnMouseUp,
              !0
            ),
              Object(ci.e)(this.m_elSettingsPanel, e.target) ||
                this.setState({ bSettingsOpen: !1 });
          }),
          (e.prototype.bindSettingsButton = function(e) {
            this.m_elSettingsButton = e;
          }),
          (e.prototype.BindSettingsPanel = function(e) {
            this.m_elSettingsPanel = e;
          }),
          (e.prototype.render = function() {
            var e,
              t = this,
              n = !1,
              o = this.props,
              i = o.video,
              r = o.actions,
              a = 0;
            if (this.state.bSettingsOpen) {
              n = !0;
              a =
                0 -
                (21 *
                  (e = this.props.video
                    .GetVideoRepresentations()
                    .map(function(e) {
                      return ve.createElement(
                        mr.b,
                        {
                          key: e.id,
                          onSelected: function() {
                            t.props.video.SetVideoRepresentation(e),
                              t.setState({
                                bSettingsOpen: !t.state.bSettingsOpen
                              });
                          },
                          bChecked: e.selected
                        },
                        e.displayName
                      );
                    })).length +
                  32);
            }
            return ve.createElement(
              "div",
              { className: "STV_BroadcastSettings" },
              ve.createElement(
                "div",
                {
                  className:
                    "videoControlButton" + (n ? " VideoSettingsOpen" : ""),
                  onClick: this.OnVideoControlClick,
                  ref: this.bindSettingsButton
                },
                ve.createElement(Qo.P, null)
              ),
              ve.createElement(Yc, { video: i }),
              r &&
                r.map(function(e) {
                  return ve.createElement(
                    "div",
                    { key: e.key, className: "videoControlButton" },
                    e
                  );
                }),
              n &&
                ve.createElement(
                  "div",
                  {
                    ref: this.BindSettingsPanel,
                    className: "STV_BroadcastSettingsPanel",
                    style: {
                      left: this.m_SettingsButtonPos[0],
                      top: this.m_SettingsButtonPos[1],
                      marginTop: a
                    }
                  },
                  ve.createElement(
                    "div",
                    { className: "STV_BroadcastSettingsMenuItems" },
                    e
                  )
                )
            );
          }),
          R.c([M.a], e.prototype, "OnVideoControlClick", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([M.a], e.prototype, "bindSettingsButton", null),
          R.c([M.a], e.prototype, "BindSettingsPanel", null),
          e
        );
      })(ve.Component),
      Yc = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (
            (e.k_nHideSliderTimeout = 1500),
            (e.m_bShowSlider = !0),
            (e.m_schHideSlider = new T()),
            (e.m_bChildDragging = !1),
            (e.m_bMouseOver = !1),
            e
          );
        }
        return (
          R.d(e, t),
          (e.prototype.componentWillUnmount = function() {
            this.m_schHideSlider.Cancel();
          }),
          (e.prototype.ToggleMute = function() {
            var e = this.props.video,
              t = e.IsMuted();
            e.SetMute(!t), e.GetVolume() < 0.01 && e.SetVolume(0.5);
          }),
          (e.prototype.OnMouseEnter = function(e) {
            (this.m_bShowSlider = !0),
              (this.m_bMouseOver = !0),
              this.m_schHideSlider.Cancel();
          }),
          (e.prototype.OnMouseLeave = function(e) {
            (this.m_bMouseOver = !1), this.ScheduleHide();
          }),
          (e.prototype.OnChildDrag = function(e) {
            (this.m_bChildDragging = e), this.ScheduleHide();
          }),
          (e.prototype.ScheduleHide = function() {
            var e = this;
            this.m_bMouseOver ||
              this.m_bChildDragging ||
              this.m_schHideSlider.Schedule(
                this.k_nHideSliderTimeout,
                function() {
                  return (e.m_bShowSlider = !0);
                }
              );
          }),
          (e.prototype.render = function() {
            var e = this.props.video,
              t = e.IsMuted(),
              n = 100 * e.GetVolume(),
              o = "videoControlButton";
            65 < n
              ? (o += " HighestVolume")
              : 45 < n
                ? (o += " HighVolume")
                : n < 46 && 24 < n
                  ? (o += " MedVolume")
                  : n < 25 && (o += " LowVolume");
            var i = "BroadcastVolumeControl";
            return (
              this.m_bShowSlider && (i += " ShowVolumeSlider"),
              t && (i += " muted"),
              ve.createElement(
                "div",
                {
                  className: i,
                  onMouseEnter: this.OnMouseEnter,
                  onMouseLeave: this.OnMouseLeave
                },
                ve.createElement(
                  "div",
                  { className: "BroadcastVolumeControl_FixedLayout" },
                  ve.createElement(
                    "div",
                    { className: o, onClick: this.ToggleMute },
                    ve.createElement(Qo.db, null)
                  ),
                  ve.createElement(Jc, { video: e, onDrag: this.OnChildDrag })
                )
              )
            );
          }),
          R.c([m.observable], e.prototype, "m_bShowSlider", void 0),
          R.c([M.a], e.prototype, "ToggleMute", null),
          R.c([M.a], e.prototype, "OnMouseEnter", null),
          R.c([M.a], e.prototype, "OnMouseLeave", null),
          R.c([M.a], e.prototype, "OnChildDrag", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Jc = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (e.m_elSlider = null), (e.m_nVolumeStartOfDrag = 0), e;
        }
        return (
          R.d(e, t),
          (e.prototype.OnMouseDown = function(e) {
            var t = e.currentTarget;
            (this.m_elSlider = t),
              (this.m_nVolumeStartOfDrag = this.props.video.GetVolume()),
              this.SetVolumeWithCoord(t, e.clientX),
              t.ownerDocument.defaultView.addEventListener(
                "mousemove",
                this.OnMouseMove
              ),
              t.ownerDocument.defaultView.addEventListener(
                "mouseup",
                this.OnMouseUp
              ),
              this.props.onDrag(!0);
          }),
          (e.prototype.OnMouseMove = function(e) {
            this.m_elSlider &&
              this.SetVolumeWithCoord(this.m_elSlider, e.clientX);
          }),
          (e.prototype.OnMouseUp = function(e) {
            if (this.m_elSlider) {
              this.SetVolumeWithCoord(this.m_elSlider, e.clientX);
              var t = this.props.video;
              t.IsMuted() && t.SetVolume(this.m_nVolumeStartOfDrag),
                this.m_elSlider.ownerDocument.defaultView.removeEventListener(
                  "mousemove",
                  this.OnMouseMove
                ),
                this.m_elSlider.ownerDocument.defaultView.removeEventListener(
                  "mouseup",
                  this.OnMouseUp
                ),
                (this.m_nVolumeStartOfDrag = 0),
                (this.m_elSlider = null),
                this.props.onDrag(!1);
            }
          }),
          (e.prototype.SetVolumeWithCoord = function(e, t) {
            var n = e.getBoundingClientRect(),
              o = pn(t, n.left, n.right, 0, 1),
              i = ln(o, 0, 1),
              r = this.props.video;
            r.SetMute(o < 0.01), r.SetVolume(i);
          }),
          (e.prototype.render = function() {
            var e = this.props.video,
              t = 100 * e.GetVolume();
            e.IsMuted() && (t = 0);
            var n = { left: t + "%" },
              o = { width: t + "%" };
            return ve.createElement(
              "div",
              {
                className: "BroadcastVolumeSlider",
                onMouseDown: this.OnMouseDown
              },
              ve.createElement("div", {
                className: "BroadcastVolumeSlider_Track"
              }),
              ve.createElement("div", {
                className: "BroadcastVolumeSlider_Fill",
                style: o
              }),
              ve.createElement("div", {
                className: "BroadcastVolumeSlider_Thumb",
                style: n
              })
            );
          }),
          R.c([M.a], e.prototype, "OnMouseDown", null),
          R.c([M.a], e.prototype, "OnMouseMove", null),
          R.c([M.a], e.prototype, "OnMouseUp", null),
          R.c([m.action], e.prototype, "SetVolumeWithCoord", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component);
    function Xc(e) {
      return ve.createElement(
        "div",
        {
          className: "timelineMarker",
          title: e.label,
          style: { left: e.pos + "%" },
          onMouseEnter: function() {
            return e.onMouseEnter(e.pos);
          },
          onMouseLeave: e.onMouseLeave
        },
        ve.createElement(
          "div",
          { className: "timelineMarkerIcon" },
          ve.createElement(Qo.N, null)
        )
      );
    }
    function Qc(e) {
      var t = e.startPos,
        n = e.endPos,
        o = "",
        i = 1;
      return (
        t < 0 && ((i = (n - t) / 10), (t = 0), (o = " hideFront")),
        ve.createElement(
          "div",
          {
            className: "STV_timelineSegment" + o,
            style: { left: t + "%", width: n - t + "%", opacity: i },
            onClick: e.onClick
          },
          ve.createElement("div", {
            className: "STV_timelineSegmentFrontFill",
            style: { borderColor: "rgb(" + e.color + ")" }
          }),
          ve.createElement(
            "div",
            {
              className: "STV_timelineSegmentLabel",
              style: { color: "rgb(" + e.color + ")" }
            },
            e.label
          ),
          ve.createElement("div", {
            className: "STV_timelineSegmentBackFill",
            style: { borderColor: "rgb(" + e.color + ")" }
          })
        )
      );
    }
    var Zc = (function(n) {
      function e(e) {
        var t = n.call(this, e) || this;
        return (
          (t.state = {
            nGrabberMouseDownTime: 0,
            bGrabberMouseDown: !1,
            nHoverValue: void 0
          }),
          t
        );
      }
      return (
        R.d(e, n),
        (e.prototype.OnMouseDown = function(e) {
          (this.m_elSlider = e.currentTarget),
            (this.m_rectSlider = this.m_elSlider.getBoundingClientRect()),
            this.AdjustSliderForClientX(e.clientX),
            this.setState({ bGrabberMouseDown: !0 }),
            this.m_elSlider.ownerDocument.defaultView.addEventListener(
              "mousemove",
              this.OnMouseMove
            ),
            this.m_elSlider.ownerDocument.defaultView.addEventListener(
              "mouseup",
              this.OnMouseUp
            );
        }),
        (e.prototype.OnMouseMove = function(e) {
          this.AdjustSliderForClientX(e.clientX);
        }),
        (e.prototype.OnMouseUp = function(e) {
          this.props.video.Seek(this.state.nGrabberMouseDownTime),
            this.setState({
              bGrabberMouseDown: !1,
              nHoverValue: void 0,
              nGrabberMouseDownTime: 0
            }),
            this.m_elSlider.ownerDocument.defaultView.removeEventListener(
              "mousemove",
              this.OnMouseMove
            ),
            this.m_elSlider.ownerDocument.defaultView.removeEventListener(
              "mouseup",
              this.OnMouseUp
            );
        }),
        (e.prototype.OnKeyDown = function(e) {}),
        (e.prototype.AdjustSliderForClientX = function(e) {
          var t = this.props.video,
            n = t.GetTimelineStartPos(),
            o = t.GetTimelineStartPos() + t.GetTimelineDuration(),
            i = t.GetTimeAtMousePosition(e, this.m_rectSlider, n, o);
          i != this.state.nGrabberMouseDownTime &&
            this.setState({ nGrabberMouseDownTime: i, nHoverValue: i });
        }),
        (e.prototype.OnSegmentClick = function(e) {
          this.props.video.Seek(e);
        }),
        (e.prototype.OnMarkerMouseEnter = function(e) {
          this.setState({ nHoverValue: e });
        }),
        (e.prototype.OnMarkerMouseLeave = function() {
          this.setState({ nHoverValue: void 0 });
        }),
        (e.prototype.render = function() {
          var i = this,
            r = this.props.video,
            e = this.state.bGrabberMouseDown,
            t = void 0 !== this.state.nHoverValue,
            n = r.GetPercentOffsetFromTime(
              this.state.nGrabberMouseDownTime,
              zn.Timeline
            ),
            o = r.GetPercentOffsetFromTime(r.GetPlaybackTime(), zn.Timeline),
            a = r.GetPercentOffsetFromTime(
              r.GetVideoAvailableStartTime(),
              zn.Timeline
            );
          a < 0.05 && (a = 0);
          var s = ln(n, 0, 100).toFixed(1) + "%",
            c = ln(o, 0, 100).toFixed(1) + "%",
            l = ln(a, 0, 100).toFixed(1) + "%",
            p = {},
            u = {},
            m = {},
            d = {},
            h = {};
          e
            ? ((d.left = s),
              (p.width = s),
              (u.width = c),
              (m.width = l),
              (h.left = s))
            : ((d.left = c),
              (u.width = c),
              (m.width = l),
              t && (h.left = this.state.nHoverValue + "%"));
          var _ = mn(r.GetPlaybackTime()),
            f = mn(this.state.nGrabberMouseDownTime);
          e || (f = _);
          var g = "STV_timelineContainer";
          this.state.bGrabberMouseDown && (g += " grabberDown"),
            r.IsTimelineMapActive() && (g += " minimapActive");
          var b = "";
          100 < (n = e ? n : o)
            ? (b = " grabberOffScreenRight grabberOffscreen")
            : n < 0 && (b = " grabberOffScreenLeft grabberOffscreen");
          var v = [];
          r.GetTimelineMarkers().forEach(function(e, t) {
            var n = r.GetPercentOffsetFromTime(e.nTime, zn.Timeline);
            n < 0 ||
              100 < n ||
              v.push(
                ve.createElement(Xc, {
                  key: t,
                  pos: n,
                  label: e.strLabel,
                  onMouseEnter: i.OnMarkerMouseEnter,
                  onMouseLeave: i.OnMarkerMouseLeave
                })
              );
          });
          var S = [];
          return (
            r.GetTimelineSegments().forEach(function(t, e) {
              var n = r.GetPercentOffsetFromTime(t.nTimeStart, zn.Timeline);
              if (!(100 < n)) {
                var o = r.GetPercentOffsetFromTime(t.nTimeEnd, zn.Timeline);
                o < 0 ||
                  S.push(
                    ve.createElement(Qc, {
                      key: e,
                      startPos: n,
                      endPos: o,
                      label: t.strLabel,
                      color: t.color,
                      onClick: function(e) {
                        return i.OnSegmentClick(t.nTimeStart);
                      }
                    })
                  );
              }
            }),
            ve.createElement(
              "div",
              { className: "videoTimelineMain" },
              ve.createElement(
                "div",
                { className: g, onKeyDown: this.OnKeyDown },
                ve.createElement("div", { className: "DialogLabel" }, _),
                ve.createElement(
                  "div",
                  { className: "STV_timelineSegmentsContainer" },
                  S
                ),
                ve.createElement(
                  "div",
                  {
                    className: "DialogSlider_SliderContainer",
                    onMouseDown: this.OnMouseDown
                  },
                  ve.createElement(
                    "div",
                    { className: "DialogSlider_Slider" },
                    ve.createElement("div", {
                      className: "STV_timelineValue",
                      style: p
                    }),
                    ve.createElement("div", {
                      className: "STV_timelineGhostValue",
                      style: u
                    }),
                    ve.createElement("div", {
                      className: "STV_timelineNoVideo",
                      style: m
                    }),
                    v,
                    ve.createElement(
                      "div",
                      { className: "STV_timelineGrabber_Wrapper", style: d },
                      ve.createElement(
                        "div",
                        { className: "STV_timelineGrabber" + b },
                        ve.createElement(
                          "div",
                          {
                            key: "grabbertime",
                            className: "STV_timelineGrabberValue"
                          },
                          f
                        ),
                        ve.createElement(
                          "div",
                          { className: "STV_timelineGrabberArrow" },
                          ve.createElement(Qo.M, null)
                        )
                      )
                    )
                  )
                )
              )
            )
          );
        }),
        R.c([M.a], e.prototype, "OnMouseDown", null),
        R.c([M.a], e.prototype, "OnMouseMove", null),
        R.c([M.a], e.prototype, "OnMouseUp", null),
        R.c([M.a], e.prototype, "OnKeyDown", null),
        R.c([M.a], e.prototype, "OnSegmentClick", null),
        R.c([M.a], e.prototype, "OnMarkerMouseEnter", null),
        R.c([M.a], e.prototype, "OnMarkerMouseLeave", null),
        (e = R.c([Hi.observer], e))
      );
    })(ve.Component);
    var $c = (function(t) {
        function e() {
          var e = (null !== t && t.apply(this, arguments)) || this;
          return (e.state = { info: null }), e;
        }
        return (
          R.d(e, t),
          (e.getDerivedStateFromProps = function(e, t) {
            return t.info && t.info.m_steamIDBroadcast === e.steamID
              ? null
              : (t.info && Zn.StopInfo(t.info),
                { info: Zn.StartInfo(e.steamID) });
          }),
          (e.prototype.componentWillUnmount = function() {
            this.state.info && Zn.StopInfo(this.state.info);
          }),
          (e.prototype.RenderStreamSwitcher = function() {
            return null;
          }),
          (e.prototype.render = function() {
            var e = this.state.info,
              t = "";
            e && e.m_nViewerCount && (t = e.m_nViewerCount.toLocaleString());
            var n = "583950" == e.m_strAppId;
            return ve.createElement(
              "div",
              { className: "BroadcastDetails" },
              !this.props.bHideThumbnail &&
                ve.createElement(es, {
                  className: "broadcastDetailsThumbBlur",
                  src: e.m_strThumbnailUrl,
                  draggable: !1,
                  duration: 2500
                }),
              ve.createElement(
                "div",
                { className: "BroadcastDetailsHeader" },
                ve.createElement(
                  "div",
                  { className: "displayColumn" },
                  ve.createElement(
                    "div",
                    { className: "Info" },
                    ve.createElement(
                      "span",
                      { className: "AppTitle" },
                      e.m_strAppTitle
                    ),
                    e.m_strTitle &&
                      ve.createElement(
                        "span",
                        { className: "BroadcastTitle" },
                        "- ",
                        e.m_strTitle
                      ),
                    this.props.onLocalStreamChange &&
                      this.RenderStreamSwitcher()
                  ),
                  t &&
                    ve.createElement(
                      "div",
                      { className: "BroadcastDetailsHeader_ViewerCount" },
                      ve.createElement(Qo.bb, null),
                      Object(re.b)("#Broadcast_ViewerCount", t)
                    )
                ),
                ve.createElement(
                  "div",
                  { className: "Actions" },
                  ve.createElement(
                    "div",
                    {
                      onClick: function(e) {
                        return Ac(e, "https://steam.tv/quakechampions");
                      },
                      className: "BroadcastLink"
                    },
                    "steam.tv/quakechampions"
                  ),
                  n &&
                    ve.createElement(
                      "div",
                      {
                        onClick: function(e) {
                          return Ac(e, "http://playartifact.com/");
                        },
                        className: "BroadcastLink"
                      },
                      "Learn more at playartifact.com"
                    )
                )
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      el = (ve.Component,
      (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.m_chat = null), t;
        }
        return (
          R.d(e, n),
          (e.prototype.StopChat = function() {
            this.m_chat && (Zn.StopChat(this.m_chat), (this.m_chat = null));
          }),
          (e.prototype.componentWillUnmount = function() {
            this.StopChat();
          }),
          (e.prototype.BindChatRef = function(e) {
            this.StopChat(),
              e &&
                (this.m_chat = Zn.StartChat(
                  e,
                  this.props.steamID,
                  this.props.watchLocation
                ));
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              "div",
              {
                className: Za("BroadcastChat", this.props.className),
                style: this.props.hidden ? { display: "none" } : void 0
              },
              ve.createElement("iframe", { ref: this.BindChatRef })
            );
          }),
          R.c([M.a], e.prototype, "BindChatRef", null),
          e
        );
      })(ve.Component)),
      tl = function(e) {
        var t = e.group,
          n = e.onClick,
          o = t.watching_broadcast_steamid;
        return Se.a.createElement(
          "button",
          {
            className:
              "ChatRoomListGroupItem NoChannels WatchPartyGroup DialogButton watchHowButton",
            onClick: n
          },
          Se.a.createElement(
            "div",
            { className: "ChatRoomListGroupItem_header" },
            Se.a.createElement(ss, { group: t, small: !0 }),
            Se.a.createElement(
              "div",
              { className: "groupNameStatusContainer" },
              Se.a.createElement("div", { className: "chatRoomName" }, t.name),
              o &&
                Se.a.createElement(
                  "div",
                  { className: "chatRoomDetails" },
                  Object(re.b)("#Broadcast_WatchParty_Viewers_NoneActive")
                )
            )
          )
        );
      },
      nl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.CreateWatchParty = function(e) {
            void 0 === e && (e = !1);
            var t = this.props,
              n = t.browserContext,
              o = t.ownerWindow,
              i = t.broadcastAccountId,
              r = t.initialFriend;
            this.Close();
            var a,
              s,
              c,
              l,
              p = e && r ? [r.accountid] : [];
            (a = n),
              (s = o || window),
              (c = i),
              (l = p),
              Ji(
                Se.a.createElement(_s, {
                  browserContext: a,
                  bHideChatNameEntry: !1,
                  vecInvitePlayers: l,
                  chatViewToReplace: void 0,
                  creationOptions: { unBroadcastAccountId: c },
                  strTitle: Object(re.b)("#Broadcast_CreateWatchParty")
                }),
                s,
                "CreateChatDialog",
                {
                  strTitle: Object(re.b)("#Broadcast_CreateWatchParty"),
                  popupWidth: 450,
                  popupHeight: 600
                }
              );
          }),
          (t.prototype.WatchAlone = function() {
            this.Close();
          }),
          (t.prototype.JoinExisting = function(e) {
            var t = this.props,
              n = t.broadcastTabId,
              o = t.browserContext;
            this.Close();
            var i = Yo.UIStore.ShowAndOrActivateChatRoomGroup(o, e, !0);
            Yo.UIStore.CloseTabByID(n), i.ShowBroadcast();
          }),
          (t.prototype.UpgradeExisting = function(e) {
            var t = this.props,
              n = t.broadcastAccountId,
              o = t.browserContext;
            this.Close(),
              e.SetChatRoomGroupWatchingBroadcast(n),
              Yo.UIStore.ShowAndOrActivateChatRoomGroup(
                o,
                e,
                !0
              ).ShowBroadcast();
          }),
          (t.prototype.Close = function() {
            var e = this.props.closeModal;
            e && e();
          }),
          (t.prototype.render = function() {
            var t = this,
              e = this.props,
              n = e.closeModal,
              o = e.initialFriend,
              i = Yo.ChatStore.currentChatRoomGroups,
              r = i.filter(function(e) {
                return e.watching_broadcast_steamid;
              }),
              a = i.filter(function(e) {
                return (
                  e.BCanIAssociateBroadcast() && !e.watching_broadcast_steamid
                );
              }),
              s = o;
            return Se.a.createElement(
              "div",
              { className: "chatModalCover" },
              Se.a.createElement(
                Ki,
                { onEscKeypress: n },
                Se.a.createElement(
                  Ci,
                  { className: "watchPartyDialog" },
                  Se.a.createElement(
                    fi,
                    null,
                    Se.a.createElement(
                      "div",
                      { className: "watchPartyPrompt" },
                      Object(re.b)("#Broadcast_WatchPrompt")
                    ),
                    Se.a.createElement(
                      gi,
                      null,
                      Se.a.createElement(
                        wi,
                        {
                          svgicon: Qo.p,
                          className: "watchHowButton",
                          onClick: this.WatchAlone
                        },
                        Object(re.b)("#Broadcast_WatchAlone")
                      ),
                      s &&
                        Se.a.createElement(
                          wi,
                          {
                            className: "watchHowButton",
                            onClick: function() {
                              return t.CreateWatchParty(!0);
                            }
                          },
                          Se.a.createElement($s, {
                            friend: s,
                            context: null,
                            bLarge: !1
                          }),
                          Object(re.d)(
                            "#Broadcast_WatchWith",
                            Se.a.createElement(
                              "span",
                              { className: "highlight" },
                              " ",
                              s.display_name
                            )
                          )
                        ),
                      0 !== r.length &&
                        Se.a.createElement(
                          Se.a.Fragment,
                          null,
                          Se.a.createElement(
                            hi,
                            null,
                            Object(re.b)(
                              "#Broadcast_WatchWithExistingWatchParty"
                            )
                          ),
                          r.map(function(e) {
                            return Se.a.createElement(tl, {
                              key: e.unique_id,
                              group: e,
                              onClick: function() {
                                return t.JoinExisting(e);
                              }
                            });
                          })
                        ),
                      0 !== a.length &&
                        Se.a.createElement(
                          Se.a.Fragment,
                          null,
                          Se.a.createElement(
                            hi,
                            null,
                            Object(re.b)("#Broadcast_LinkBroadcastToGroup")
                          ),
                          a.map(function(e) {
                            return Se.a.createElement(tl, {
                              key: e.unique_id,
                              group: e,
                              onClick: function() {
                                return t.UpgradeExisting(e);
                              }
                            });
                          })
                        ),
                      Se.a.createElement(
                        wi,
                        {
                          className: "watchHowButton newWatchGroup",
                          svgicon: Qo.D,
                          onClick: function() {
                            return t.CreateWatchParty(!1);
                          }
                        },
                        Object(re.b)("#Broadcast_LinkBroadcastToGroup_New")
                      )
                    )
                  ),
                  Se.a.createElement(di, null)
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "WatchAlone", null),
          R.c([M.a], t.prototype, "Close", null),
          t
        );
      })(Se.a.Component);
    function ol() {
      return G.a.STEAM_TV ? 1 : 3;
    }
    var il = (function(o) {
        function e(e) {
          var t = o.call(this, e) || this;
          t.m_broadcastInfo = null;
          var n = t.props.broadcastView.GetSteamID().ConvertTo64BitString();
          return (
            (t.m_broadcastInfo = Zn.StartInfo(n)),
            (t.state = { bChatCollapsed: !1 }),
            t
          );
        }
        return (
          R.d(e, o),
          (e.prototype.componentWillUnmount = function() {
            this.m_broadcastInfo &&
              (Zn.StopInfo(this.m_broadcastInfo),
              (this.m_broadcastInfo = null));
          }),
          (e.prototype.OnWatchWithFriends = function() {
            this.props.broadcastView.ShowWatchPromptDialog();
          }),
          (e.prototype.ToggleChat = function() {
            this.setState({ bChatCollapsed: !this.state.bChatCollapsed });
          }),
          (e.prototype.ToggleTheaterMode = function() {
            Yo.UIStore.SetTheaterMode(!Yo.UIStore.GetTheaterMode());
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.broadcastView,
              n = e.popup,
              o = e.style,
              i = t.GetSteamID().ConvertTo64BitString(),
              r = ol(),
              a = t.m_bShowWatchPromptDialog
                ? Se.a.createElement(nl, {
                    closeModal: function() {
                      return t.HideWatchPromptDialog();
                    },
                    broadcastAccountId: t.GetSteamID().GetAccountID(),
                    broadcastTabId: t.GetUniqueID(),
                    initialFriend: t.m_watchPromptInitialFriend,
                    browserContext: qo,
                    ownerWindow: n
                  })
                : null;
            return Se.a.createElement(
              "div",
              { className: "BroadcastTab", style: o },
              Se.a.createElement(es, {
                className: "FullpageBroadcastBackdrop",
                src: this.m_broadcastInfo.m_strThumbnailUrl,
                draggable: !1,
                duration: 2500
              }),
              Se.a.createElement(
                "div",
                { className: "BroadcastTab_OverBackground" },
                Se.a.createElement(
                  "div",
                  { className: "BroadcastTabHeaderContainer" },
                  Se.a.createElement(
                    "div",
                    {
                      className:
                        "BroadcastTab_HeaderRow" +
                        (this.state.bChatCollapsed ? " ChatCollapsed" : "")
                    },
                    Se.a.createElement(al, {
                      onClick: this.OnWatchWithFriends
                    }),
                    Se.a.createElement(sl, {
                      onClick: this.ToggleChat,
                      hideIcon: this.state.bChatCollapsed
                    })
                  )
                ),
                Se.a.createElement(
                  ll,
                  {
                    steamID: i,
                    watchLocation: r,
                    bHideChat: this.state.bChatCollapsed,
                    onTheaterMode: this.ToggleTheaterMode
                  },
                  a
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnWatchWithFriends", null),
          R.c([M.a], e.prototype, "ToggleChat", null),
          R.c([M.a], e.prototype, "ToggleTheaterMode", null),
          (e = R.c([Hi.observer], e))
        );
      })(Se.a.Component),
      rl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_broadcastInfo = null),
            (t.m_broadcastInfo = Zn.StartInfo(t.props.app.GetSteamIDWatched())),
            (t.state = { bChatCollapsed: !1, bTheaterMode: !1 }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            this.m_broadcastInfo &&
              (Zn.StopInfo(this.m_broadcastInfo),
              (this.m_broadcastInfo = null));
          }),
          (e.prototype.OnShowLogin = function() {
            this.props.app.ShowLogonDialog();
          }),
          (e.prototype.ToggleChat = function() {
            this.setState({ bChatCollapsed: !this.state.bChatCollapsed });
          }),
          (e.prototype.ToggleTheaterMode = function() {
            this.setState({ bTheaterMode: !this.state.bTheaterMode });
          }),
          (e.prototype.render = function() {
            var e = this.props.app,
              t = this.m_broadcastInfo,
              n = ol();
            return Se.a.createElement(
              Se.a.Fragment,
              null,
              e.BReadyToRender() &&
                Se.a.createElement(
                  "div",
                  {
                    className:
                      "StandalonePlayer" +
                      (this.state.bTheaterMode ? " TheaterMode" : "")
                  },
                  Se.a.createElement(es, {
                    className: "FullpageBroadcastBackdrop",
                    src: t.m_strThumbnailUrl,
                    draggable: !1,
                    duration: 2500
                  }),
                  Se.a.createElement(
                    "div",
                    { className: "StandalonePlayerHeader" },
                    Se.a.createElement(
                      "div",
                      { className: "STV_Logo" },
                      Se.a.createElement(Qo.T, null)
                    ),
                    Se.a.createElement(
                      "div",
                      {
                        className:
                          "BroadcastTab_HeaderRow" +
                          (this.state.bChatCollapsed ? " ChatCollapsed" : "")
                      },
                      Se.a.createElement(al, { onClick: this.OnShowLogin }),
                      Se.a.createElement(sl, {
                        onClick: this.ToggleChat,
                        hideIcon: this.state.bChatCollapsed
                      })
                    )
                  ),
                  Se.a.createElement(
                    ll,
                    {
                      steamID: e.GetSteamIDWatched(),
                      watchLocation: n,
                      bHideChat: this.state.bChatCollapsed,
                      onTheaterMode: this.ToggleTheaterMode
                    },
                    Se.a.createElement(ml, { app: e })
                  )
                ),
              Se.a.createElement(cl, { app: e })
            );
          }),
          R.c([M.a], e.prototype, "OnShowLogin", null),
          R.c([M.a], e.prototype, "ToggleChat", null),
          R.c([M.a], e.prototype, "ToggleTheaterMode", null),
          (e = R.c([Hi.observer], e))
        );
      })(Se.a.Component);
    function al(e) {
      return Se.a.createElement(
        "div",
        { className: "BroadcastButton WatchWithFriends", onClick: e.onClick },
        Se.a.createElement(Qo.bb, null),
        Object(re.b)("#Broadcast_WatchWithFriends")
      );
    }
    function sl(e) {
      return Se.a.createElement(
        "div",
        {
          className: "ToggleBroadcastChat",
          title: Object(re.b)("#Broadcast_ToggleChat"),
          onClick: e.onClick
        },
        Se.a.createElement(Qo.t, { showChat: e.hideIcon })
      );
    }
    var cl = Object(Hi.observer)(function(e) {
        var t = e.app;
        return t.BIsPerformingLogonCheck()
          ? Se.a.createElement(
              "div",
              null,
              Se.a.createElement("iframe", {
                style: { display: "none" },
                src: t.GetLoginURL()
              })
            )
          : null;
      }),
      ll = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.m_strLocalSteamID = ""), (t.state = { info: null }), t;
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            return t.info && t.info.m_steamIDBroadcast === e.steamID
              ? null
              : (t.info && Zn.StopInfo(t.info),
                { info: Zn.StartInfo(e.steamID) });
          }),
          (e.prototype.componentWillUnmount = function() {
            this.state.info && Zn.StopInfo(this.state.info);
          }),
          (e.prototype.OnLocalStreamChange = function(e) {
            this.m_strLocalSteamID = e;
          }),
          (e.prototype.render = function() {
            var e = this.props,
              t = e.steamID,
              n = e.children,
              o = this.m_strLocalSteamID || t,
              i = this.state.info.m_bIsOnline;
            return Se.a.createElement(
              "div",
              { className: "BroadcastContainer" },
              Se.a.createElement(
                "div",
                { className: "BroadcastContainerSection" },
                Se.a.createElement(
                  "div",
                  { className: "BroadcastContainerSectionVideoContainer" },
                  i &&
                    Se.a.createElement(Fc, {
                      key: o,
                      steamID: o,
                      watchLocation: this.props.watchLocation,
                      onTheaterMode: this.props.onTheaterMode
                    }),
                  !i && Se.a.createElement(pl, null),
                  Se.a.createElement("div", {
                    className: "videoContainerSizer"
                  })
                ),
                n,
                Se.a.createElement(
                  "div",
                  { className: "BroadcastDetailsSection" },
                  Se.a.createElement($c, {
                    steamID: o,
                    onLocalStreamChange: this.OnLocalStreamChange
                  })
                )
              ),
              Se.a.createElement(el, {
                steamID: t,
                watchLocation: this.props.watchLocation,
                hidden: this.props.bHideChat
              })
            );
          }),
          R.c([m.observable], e.prototype, "m_strLocalSteamID", void 0),
          R.c([M.a], e.prototype, "OnLocalStreamChange", null),
          (e = R.c([Hi.observer], e))
        );
      })(Se.a.Component);
    function pl(e) {
      return Se.a.createElement("div", {
        className: "BroadcastQuakeLiveOffline"
      });
    }
    var ul = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.Dismiss = function() {
            this.props.app.DismissLogonDialog();
          }),
          (t.prototype.render = function() {
            return Se.a.createElement(
              Ki,
              { onEscKeypress: this.Dismiss },
              Se.a.createElement(
                Ci,
                { className: "SteamTVLoginDialog" },
                Se.a.createElement("iframe", {
                  className: "steamTVLogin",
                  src: this.props.app.GetLoginURL()
                })
              )
            );
          }),
          R.c([M.a], t.prototype, "Dismiss", null),
          t
        );
      })(Se.a.Component),
      ml = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            if (!this.props.app.BIsLogonDialogVisible()) return null;
            var e = Se.a.createElement(ul, { app: this.props.app });
            return Se.a.createElement(
              "div",
              { className: "chat_full_modaloverlay" },
              Se.a.createElement("div", {
                className: "chat_modal_position chat_modal_background"
              }),
              Se.a.createElement(
                "div",
                { className: "chat_modal_position active" },
                e
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(Se.a.Component);
    function dl(e) {
      return ve.createElement(
        "div",
        { className: "msg" },
        ve.createElement(
          "div",
          { className: "msgText MessageFromBlockedUser" },
          Object(re.b)("#Friend_Chat_Blocked")
        )
      );
    }
    var hl = Object(Hi.observer)(function(e) {
        return ve.createElement(
          Xs,
          { friend: e.player, context: e.context },
          ve.createElement("span", null, e.player.display_name)
        );
      }),
      _l = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.messages,
              t = this.props.friendRenderContext;
            if (0 == e.length) return null;
            for (var n = [], o = [], i = !0, r = 0, a = e; r < a.length; r++) {
              var s = a[r];
              if (-1 == o.indexOf(s.unServerMsgParamAccountID)) {
                0 < n.length && n.push(", ");
                var c = Yo.FriendStore.GetPlayer(s.unServerMsgParamAccountID);
                n.push(ve.createElement(hl, { context: t, player: c })),
                  o.push(s.unServerMsgParamAccountID),
                  c.is_ready || (c.LoadIfNecessary(), (i = !1));
              }
            }
            var l = Yo.FriendStore.GetPlayer(e[0].unAccountID);
            l.is_ready || (l.LoadIfNecessary(), (i = !1));
            var p = ve.createElement(hl, { context: t, player: l }),
              u = "";
            if (1 < n.length) {
              var m = ve.createElement.apply(ve, [ve.Fragment, null].concat(n));
              u = Object(re.d)(
                "#ChatRoom_ServerMessage_Invited_Multiple",
                m,
                p
              );
            } else u = Object(re.d)("#ChatRoom_ServerMessage_Invited", n[0], p);
            return ve.createElement(
              cc,
              { style: "server" },
              ve.createElement(
                "div",
                { className: "msg serverMsg" },
                ve.createElement("div", { className: "msgText" }, i ? u : "")
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      fl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.messages,
              t = this.props.friendRenderContext;
            if (0 == e.length) return null;
            for (var n = [], o = [], i = !0, r = 0, a = e; r < a.length; r++) {
              var s = a[r];
              if (-1 == o.indexOf(s.unServerMsgParamAccountID)) {
                0 < n.length &&
                  n.push(
                    Object(re.b)("#ChatRoom_ServerMessageMultiple_Separator")
                  );
                var c = Yo.FriendStore.GetPlayer(s.unServerMsgParamAccountID);
                n.push(ve.createElement(hl, { context: t, player: c })),
                  o.push(s.unServerMsgParamAccountID),
                  c.is_ready || (c.LoadIfNecessary(), (i = !1));
              }
            }
            var l = "";
            if (1 < n.length) {
              var p = n.pop();
              2 == n.length && n.pop();
              var u = ve.createElement.apply(ve, [ve.Fragment, null].concat(n));
              l = Object(re.d)(this.props.tokenPrefix + "_Multiple", u, p);
            } else l = Object(re.d)(this.props.tokenPrefix, n[0]);
            return ve.createElement(
              cc,
              { style: "server" },
              ve.createElement(
                "div",
                { className: "msg serverMsg" },
                ve.createElement("div", { className: "msgText" }, i ? l : "")
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      gl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.BIsEmoticonsOnly = function(e) {
            if (e.startsWith("[emoticon")) {
              var t = e.match(/^(?:\[emoticon\][^\[]+\[\/emoticon\]\s*)+$/);
              if (t && t.length) {
                var n = e.match(/\[emoticon\][^\[]+\[\/emoticon\]/g);
                return n && n.length <= 6;
              }
            }
            return !1;
          }),
          (t.prototype.OnAnimationStart = function() {
            this.m_nAnimationsInFlight || (this.m_nAnimationsInFlight = 0),
              this.m_nAnimationsInFlight++;
          }),
          (t.prototype.OnAnimationEnd = function() {
            this.m_nAnimationsInFlight && this.m_nAnimationsInFlight--,
              this.m_nAnimationsInFlight || this.props.msg.OnAnimationEnd();
          }),
          (t.prototype.OnMessageContextMenu = function(e) {
            var t,
              n = this,
              o = this.props.msg.unAccountID;
            this.props.chatView.chat instanceof Tt &&
              (t = this.props.chatView.chat);
            var i = [];
            return (
              t &&
                t.BCanDeleteMemberMessages(o) &&
                i.push(
                  ve.createElement(
                    mr.d,
                    {
                      key: "delete",
                      onSelected: function() {
                        t.DeleteChatMessges([n.props.msg]);
                      }
                    },
                    Object(re.b)("#Chat_Actions_Delete")
                  )
                ),
              i.length ? Object(Zo.a)(ve.createElement(mr.c, null, i), e) : null
            );
          }),
          (t.prototype.render = function() {
            var e,
              t,
              n = this.props,
              o = n.msg,
              i = n.speakerWidth,
              r = n.chatView,
              a = n.onUpdate,
              s = n.children,
              c = n.extraClassName,
              l = r.chat,
              p = o.strMessage,
              u = this.props.hideTimeStamp || r.IsChatRoom(),
              m = !u && Yo.FriendStore.GetPlayer(o.unAccountID);
            if (o.eErrorSending != Fe.None)
              switch (o.eErrorSending) {
                case Fe.NotFriends:
                  (t = "ChatMessageErrorSending"),
                    (e = ve.createElement(
                      "div",
                      { className: "ChatMessageErrorSendingAlert" },
                      Object(re.b)("#Chat_ErrorSending_NotFriends")
                    ));
                  break;
                case Fe.RateLimitExceeded:
                  (t = "ChatMessageErrorSending"),
                    (e = ve.createElement(
                      "div",
                      { className: "ChatMessageErrorSendingAlert" },
                      Object(re.b)("#Chat_ErrorSending_RateLimitExceeded")
                    ));
                  break;
                case Fe.NoChatPermissionInGroup:
                  (t = "ChatMessageErrorSendingPermissionDenied"),
                    (e = ve.createElement(
                      "div",
                      { className: "ChatMessageErrorPermissionDeniedAlert" },
                      ve.createElement(Qo.x, null),
                      Object(re.b)("#Chat_ErrorPermissionDenied")
                    ));
                  break;
                case Fe.Generic:
                default:
                  (t = "ChatMessageErrorSending"),
                    (e = ve.createElement(
                      "div",
                      { className: "ChatMessageErrorSendingAlert" },
                      Object(re.b)("#Chat_ErrorSending")
                    ));
              }
            var d = Za("msg", c, t, {
                isCurrentUser: l.self.accountid === o.unAccountID,
                HasTimeStamp: !u,
                EmojiOnly: Mn(p)
              }),
              h = { paddingLeft: i ? i + "px" : void 0 },
              _ = { width: i ? i + "px" : void 0 },
              f = {
                chat: l,
                unAccountIDSender: o.unAccountID,
                rtTimestamp: o.rtTimestamp,
                key: o.UniqueKey(),
                onLoad: a,
                chatGutterWidth: i,
                bUseLargeEmoticons: this.BIsEmoticonsOnly(p),
                bAnimate: o.eAnimationState === Ae.Animating,
                onAnimationStart: this.OnAnimationStart,
                onAnimationEnd: this.OnAnimationEnd
              },
              g =
                s ||
                ve.createElement(Ce, {
                  bbcode: p,
                  context: f,
                  parser: l.GetBBCodeParser()
                }),
              b = Za("msgText", { MsgNoUserContent: !o.HasUserContent() });
            return ve.createElement(
              "div",
              { className: d, style: h },
              !u &&
                ve.createElement(
                  bl,
                  { className: "FriendChatTimeStamp", friend: m, style: _ },
                  ve.createElement(Cr, { rtime: o.rtTimestamp, bTimeOnly: !0 })
                ),
              e,
              ve.createElement(
                cc,
                null,
                ve.createElement(
                  "div",
                  { className: b, onContextMenu: this.OnMessageContextMenu },
                  g
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnAnimationStart", null),
          R.c([M.a], t.prototype, "OnAnimationEnd", null),
          R.c([M.a], t.prototype, "OnMessageContextMenu", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      bl = Object(Hi.observer)(function(e) {
        var t = e.friend.persona,
          n = Za(
            e.className,
            (t.is_ingame ? "ingame" : t.is_online && "online") || "offline",
            {
              away: t.is_awayOrSnooze,
              watchingbroadcast:
                t.m_broadcastAccountId && IsFeatureBroadcastEnabled()
            }
          );
        return ve.createElement(
          "div",
          { className: n, style: e.style },
          e.children
        );
      }),
      vl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.friend;
            if (this.props.chatView.IsChatRoom()) {
              var t = void 0,
                n = "",
                o = this.props.chatView.chat,
                i = void 0;
              switch ((o.GetMember(e.accountid) &&
                (i = o.GetGroup().GetMemberRank(e.accountid)),
              i)) {
                default:
                  break;
                case 30:
                  n = "Moderator";
                  break;
                case 40:
                  n = "Officer";
                  break;
                case 50:
                  (n = "Owner"),
                    o.GetGroup().BIsClanChatRoom() ||
                      (t = ve.createElement(
                        "div",
                        { className: "rankIcon rankOwner" },
                        ve.createElement(Qo.h, null)
                      ));
              }
              return (
                o.GetGroup().BIsClanChatRoom() &&
                  (40 <= i
                    ? (t = ve.createElement(
                        "div",
                        { className: "rankIcon rankOwner" },
                        ve.createElement("img", {
                          src:
                            G.a.COMMUNITY_CDN_URL +
                            "public/images/skin_1/comment_modindicator_officer.png"
                        })
                      ))
                    : 30 <= i &&
                      (t = ve.createElement(
                        "div",
                        { className: "rankIcon rankOwner" },
                        ve.createElement("img", {
                          src:
                            G.a.COMMUNITY_CDN_URL +
                            "public/images/skin_1/comment_modindicator_moderator.png"
                        })
                      ))),
                ve.createElement(
                  cc,
                  {
                    style: "speaker allow-embedded-newlines",
                    text: [
                      "[" +
                        _r(this.props.msg.rtTimestamp, {
                          bIncludeWeekday: !1
                        }) +
                        "]",
                      e.primary_display_name + ":"
                    ]
                  },
                  ve.createElement(
                    "div",
                    {
                      className:
                        "ChatSpeaker ChatRoomSpeaker SpeakerLineBreak" +
                        (e.accountid == this.props.chatView.chat.self.accountid
                          ? " isCurrentUser"
                          : "")
                    },
                    ve.createElement(
                      bl,
                      { friend: e, className: "speaker" },
                      ve.createElement(
                        Xs,
                        { friend: e, context: this.props.friendRenderContext },
                        ve.createElement(
                          "div",
                          { className: "speakerHoverArea " + n },
                          t,
                          ve.createElement("img", {
                            className: "avatar speakerAvatar",
                            src: e.persona.avatar_url
                          }),
                          ve.createElement("div", {
                            className: "speakerStatus"
                          }),
                          ve.createElement(
                            "div",
                            { className: "speakerName" },
                            e.primary_display_name,
                            !e.is_display_name_nickname &&
                              e.has_secondary_display_name &&
                              ve.createElement(
                                "span",
                                { className: "playerNickname" },
                                " (",
                                e.secondary_display_name,
                                ")"
                              ),
                            e.is_display_name_nickname &&
                              ve.createElement(
                                "span",
                                {
                                  className: "playerNicknameBracket",
                                  title: Object(re.b)("#isNickname")
                                },
                                "*"
                              )
                          )
                        )
                      ),
                      ve.createElement(
                        "div",
                        { className: "speakerTimeStamp" },
                        ve.createElement(Cr, {
                          rtime: this.props.msg.rtTimestamp,
                          bTimeOnly: !1
                        })
                      )
                    )
                  )
                )
              );
            }
            var r = {};
            return (
              (r.width = this.props.speakerWidth + "px"),
              ve.createElement(
                cc,
                {
                  style: "speaker allow-embedded-newlines",
                  text: [
                    "[" +
                      _r(this.props.msg.rtTimestamp, { bIncludeWeekday: !1 }) +
                      "]",
                    e.display_name + ":"
                  ]
                },
                ve.createElement(
                  "div",
                  {
                    className:
                      "ChatSpeaker FriendChatSpeaker SpeakerLineBreak" +
                      (this.props.msg.unAccountID ==
                      this.props.chatView.chat.self.accountid
                        ? " isCurrentUser"
                        : ""),
                    style: r
                  },
                  ve.createElement(
                    Xs,
                    { friend: e, context: this.props.friendRenderContext },
                    ve.createElement(
                      bl,
                      { friend: e, className: "speaker" },
                      ve.createElement(
                        "div",
                        { className: "nameAndColon" },
                        ve.createElement(
                          "div",
                          { className: "speakerName", style: r },
                          e.display_name
                        ),
                        ve.createElement(
                          "div",
                          { className: "speakerColon" },
                          ":"
                        )
                      )
                    )
                  ),
                  ve.createElement(
                    bl,
                    { className: "FriendChatTimeStamp", friend: e },
                    ve.createElement(Cr, {
                      rtime: this.props.msg.rtTimestamp,
                      bTimeOnly: !0
                    })
                  )
                )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Sl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnUpdate = function() {
            this.props.onUpdate(
              "ChatMessageSlashEmote " + this.props.msg.UniqueKey()
            );
          }),
          (t.prototype.render = function() {
            var e = this.props.msg,
              t = this.props.chatView.chat,
              n = Yo.FriendStore.GetPlayer(e.unAccountID),
              o = e.strMessage.slice(e.strMessage.search(/\s/g) + 1),
              i = this.props.chatView.IsChatRoom(),
              r = Za(
                "speaker",
                n.persona.is_ingame
                  ? "ingame"
                  : n.persona.is_online ? "online" : "offline"
              ),
              a = {
                width: this.props.speakerWidth
                  ? this.props.speakerWidth + "px"
                  : void 0
              },
              s = Za(
                "msg",
                "ChatMsgSlashEmote",
                i ? "ChatRoomSlashEmote" : "FriendChatSlashEmote",
                {
                  isCurrentUser: t.self.accountid === e.unAccountID,
                  ChatMessageErrorSending: e.eErrorSending != Fe.None
                }
              );
            return ve.createElement(
              "div",
              { className: s },
              e.eErrorSending != Fe.None &&
                ve.createElement(
                  "div",
                  { className: "ChatMessageErrorSendingAlert" },
                  Object(re.b)("#Chat_ErrorSending")
                ),
              ve.createElement(
                "div",
                {
                  className:
                    "SpeakerLineBreak" +
                    (e.unAccountID == t.self.accountid ? " isCurrentUser" : "")
                },
                ve.createElement(
                  "div",
                  { className: r },
                  ve.createElement(
                    Xs,
                    { friend: n, context: { chat: t, chatContext: "message" } },
                    ve.createElement(
                      cc,
                      {
                        style: "speaker allow-embedded-newlines",
                        text: [
                          "[" +
                            _r(this.props.msg.rtTimestamp, {
                              bIncludeWeekday: !1
                            }) +
                            "]",
                          n.display_name + ":"
                        ]
                      },
                      ve.createElement(
                        "div",
                        { className: "speakerHoverArea" },
                        i &&
                          ve.createElement("img", {
                            className: "avatar speakerAvatar",
                            src: n.persona.avatar_url,
                            onLoad: this.OnUpdate
                          }),
                        i &&
                          ve.createElement("div", {
                            className: "speakerStatus"
                          }),
                        ve.createElement(
                          "div",
                          { className: "speakerName", style: a },
                          n.display_name
                        )
                      )
                    )
                  ),
                  ve.createElement(
                    cc,
                    { style: "force-display append-innertext", text: "/me" },
                    ve.createElement(
                      "div",
                      { className: "msgText" },
                      ve.createElement(Ce, {
                        bbcode: o,
                        context: {
                          chat: t,
                          unAccountIDSender: e.unAccountID,
                          rtTimestamp: e.rtTimestamp,
                          onUpdate: this.props.onUpdate
                        },
                        parser: t.GetBBCodeParser()
                      })
                    )
                  ),
                  ve.createElement(
                    "div",
                    { className: "speakerTimeStamp" },
                    ve.createElement(Cr, {
                      rtime: e.rtTimestamp,
                      bTimeOnly: !i
                    })
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OnUpdate", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      yl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(
              gl,
              R.a({}, this.props, { extraClassName: "ChatMessageDeleted" }),
              ve.createElement(
                "div",
                { className: "msgText" },
                ve.createElement(
                  "span",
                  { className: "filteredURL bb_removedlink" },
                  Object(re.b)("#Chat_MessageDeleted")
                )
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Cl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.msg,
              t = this.props.friendRenderContext,
              n = (function(e) {
                switch (e.eServerMsgType) {
                  case 1:
                    var t = Yo.FriendStore.GetPlayer(e.unAccountID);
                    return {
                      strToken: "#ChatRoom_ServerMessage_RenameChatRoom",
                      parts: [e.strServerMsgParam, t]
                    };
                  case 2:
                    return {
                      strToken: "#ChatRoom_ServerMessage_Joined",
                      parts: [
                        Yo.FriendStore.GetPlayer(e.unServerMsgParamAccountID)
                      ]
                    };
                  case 3:
                    return {
                      strToken: "#ChatRoom_ServerMessage_Parted",
                      parts: [
                        Yo.FriendStore.GetPlayer(e.unServerMsgParamAccountID)
                      ]
                    };
                  case 4:
                    var n = Yo.FriendStore.GetPlayer(e.unAccountID);
                    return {
                      strToken: "#ChatRoom_ServerMessage_Kicked",
                      parts: [
                        Yo.FriendStore.GetPlayer(e.unServerMsgParamAccountID),
                        n
                      ]
                    };
                  case 9:
                    return (
                      (t = Yo.FriendStore.GetPlayer(e.unAccountID)),
                      e.strServerMsgParam.length
                        ? {
                            strToken:
                              "#ChatRoom_ServerMessage_ChatRoomTaglineChanged",
                            parts: [e.strServerMsgParam, t]
                          }
                        : {
                            strToken:
                              "#ChatRoom_ServerMessage_ChatRoomTaglineRemoved",
                            parts: [t]
                          }
                    );
                  case 10:
                    return {
                      strToken: "#ChatRoom_ServerMessage_ChatRoomAvatarChanged",
                      parts: [(t = Yo.FriendStore.GetPlayer(e.unAccountID))]
                    };
                  case 5:
                    return {
                      strToken: "#ChatRoom_ServerMessage_Invited",
                      parts: [
                        Yo.FriendStore.GetPlayer(e.unServerMsgParamAccountID),
                        Yo.FriendStore.GetPlayer(e.unAccountID)
                      ]
                    };
                  default:
                    return {
                      strToken: "#ChatRoom_ServerMessage_Unhandled",
                      parts: []
                    };
                }
              })(e),
              o = n.parts.length
                ? function(e, t) {
                    for (var n = [], o = 2; o < arguments.length; o++)
                      n[o - 2] = arguments[o];
                    for (var i = [], r = 0, a = n; r < a.length; r++) {
                      var s = a[r];
                      s instanceof ut
                        ? i.push(
                            ve.createElement(hl, { context: e, player: s })
                          )
                        : i.push(s);
                    }
                    return re.d.apply(void 0, [t].concat(i));
                  }.apply(void 0, [t, n.strToken].concat(n.parts))
                : Object(re.b)(n.strToken);
            return ve.createElement(
              cc,
              { style: "server" },
              ve.createElement(
                "div",
                { className: "msg serverMsg" },
                ve.createElement("div", { className: "msgText" }, o)
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Il = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          Object.defineProperty(t.prototype, "TradeRequestMsg", {
            get: function() {
              return this.props.msg;
            },
            enumerable: !0,
            configurable: !0
          }),
          (t.prototype.AcceptTrade = function() {
            Yo.FriendStore.RespondToTradeRequest(
              this.TradeRequestMsg.TradeRequestID(),
              !0
            );
          }),
          (t.prototype.DeclineTrade = function() {
            Yo.FriendStore.RespondToTradeRequest(
              this.TradeRequestMsg.TradeRequestID(),
              !1
            ),
              this.TradeRequestMsg.MarkAsDeclined();
          }),
          (t.prototype.CancelTradeRequest = function() {
            Yo.FriendStore.CancelTradeRequest(
              this.TradeRequestMsg.TargetSteamID()
            ),
              this.TradeRequestMsg.MarkAsCancelled();
          }),
          (t.prototype.ViewAcceptedTrade = function() {
            Yo.FriendStore.OpenTradeWindow(
              this.TradeRequestMsg.TargetSteamID()
            );
          }),
          (t.prototype.GetLocalizedErrorResponseString = function() {
            var e = new E.a(
                this.TradeRequestMsg.TargetSteamID()
              ).GetAccountID(),
              t =
                e != Yo.FriendStore.self.accountid
                  ? this.props.msg.unAccountID
                  : Yo.FriendStore.self.accountid;
            return (function(e, t, n) {
              var o = Yo.FriendStore.GetPlayer(n).display_name,
                i = Yo.FriendStore.GetPlayer(t).display_name,
                r = t == Yo.FriendStore.self.accountid;
              switch (e.result) {
                case 1:
                  return Object(re.b)("#friends_trade_declined", o);
                case 14:
                  return Object(re.b)("#friends_trade_you_are_cafe", o);
                case 15:
                  return Object(re.b)("#friends_trade_they_are_cafe", o);
                case 16:
                  return Object(re.b)("#friends_trade_you_are_school", o);
                case 17:
                  return Object(re.b)("#friends_trade_they_are_school", o);
                case 2:
                  return Object(re.b)("#friends_trade_you_are_banned", o);
                case 3:
                  return Object(re.b)("#friends_trade_they_are_banned", o);
                case 4:
                  return Object(re.b)("#friends_trade_they_are_trading", o);
                case 5:
                  return Object(re.b)("#friends_trade_disabled");
                case 6:
                  return Object(re.b)("#friends_trade_not_logged_in", o);
                case 7:
                  return Object(re.b)("#friends_trade_cancelled");
                case 8:
                  return Object(re.b)("#friends_trade_too_soon", o);
                case 9:
                  return Object(re.b)("#friends_trade_too_soon_penalty", o);
                case 10:
                  return Object(re.b)("#friends_trade_connection_failed", o);
                case 11:
                  return Object(re.b)("#friends_trade_you_are_already_trading");
                case 12:
                  return Object(re.b)(
                    "#friends_trade_you_are_already_requesting_trade"
                  );
                case 13:
                  return r
                    ? Object(re.b)("#friends_trade_no_respond", o)
                    : Object(re.b)("#friends_trade_you_didnt_respond", i);
                case 18:
                  return Object(re.b)("#friends_trade_they_are_blocked", o);
                case 20:
                  return Object(re.b)("#friends_trade_you_need_verified_email");
                case 21:
                  return Object(re.b)(
                    "#friends_trade_you_have_steam_guard_disabled"
                  );
                case 22:
                  return Object(re.b)(
                    "#friends_trade_their_account_cannot_trade",
                    o,
                    o
                  );
                case 23:
                  return Object(re.b)(
                    "#friends_trade_you_havent_had_steam_guard_enabled_long_enough",
                    e.steamguard_required_days
                  );
                case 24:
                  return 0 < e.default_password_reset_probation_days &&
                    0 < e.password_reset_probation_days
                    ? e.password_reset_probation_days >
                      e.default_password_reset_probation_days
                      ? Object(re.b)(
                          "#friends_trade_you_recently_reset_password_long",
                          e.password_reset_probation_days
                        )
                      : 1 == e.password_reset_probation_days
                        ? Object(re.b)(
                            "#friends_trade_you_recently_reset_password_oneday"
                          )
                        : Object(re.b)(
                            "#friends_trade_you_recently_reset_password_short",
                            e.password_reset_probation_days
                          )
                    : Object(re.b)(
                        "#friends_trade_you_recently_reset_password"
                      );
                case 28:
                  return 0 < e.email_change_probation_days
                    ? 1 == e.email_change_probation_days
                      ? Object(re.b)(
                          "#friends_trade_you_recently_changed_email_oneday"
                        )
                      : Object(re.b)(
                          "#friends_trade_you_recently_changed_email_days",
                          e.email_change_probation_days
                        )
                    : Object(re.b)("#friends_trade_you_recently_changed_email");
                case 25:
                  return Object(re.b)(
                    "#friends_trade_you_are_using_new_device",
                    e.new_device_cooldown_days
                  );
                case 30:
                  return Object(re.b)(
                    "#friends_trade_trade_hold_for_cleared_trades_initiator",
                    o
                  );
                case 31:
                  return Object(re.b)(
                    "#friends_trade_would_exceed_max_asset_count"
                  );
                case 32:
                  return Object(re.b)(
                    "#friends_trade_disabled_in_your_country"
                  );
                case 33:
                  return Object(re.b)(
                    "#friends_trade_disabled_in_other_country"
                  );
                default:
                  return Object(re.b)("#friends_trade_generic_failure", o);
              }
            })(this.TradeRequestMsg.m_ErrorDetails, t, e);
          }),
          (t.prototype.render = function() {
            var e = this.props.msg,
              t = e.unAccountID == Yo.FriendStore.self.accountid,
              n = {};
            if (
              (this.props.speakerWidth &&
                (n.paddingLeft = this.props.speakerWidth + "px"),
              this.TradeRequestMsg.m_bAccepted)
            )
              return ve.createElement(
                "div",
                { className: "msg", style: n },
                ve.createElement(
                  "div",
                  { className: "msgText" },
                  ve.createElement(
                    "div",
                    { className: "msg tradeRequest tradeRequestCancelled" },
                    ve.createElement(
                      "div",
                      { className: "centerBlock" },
                      ve.createElement(
                        "div",
                        null,
                        Object(re.b)("#ChatRoom_TradeRequest_Accepted")
                      ),
                      this.TradeRequestMsg.m_bPopupBlocked &&
                        ve.createElement(
                          "div",
                          null,
                          Object(re.b)("#ChatRoom_TradeRequest_Popup_Blocked")
                        ),
                      ve.createElement(Cr, {
                        rtime: e.rtTimestamp,
                        bTimeOnly: !0
                      }),
                      ve.createElement(
                        "div",
                        { className: "tradeRequestButtonContainer" },
                        this.TradeRequestMsg.m_bPopupBlocked &&
                          ve.createElement(
                            "div",
                            {
                              className: "tradeRequestButton",
                              onClick: this.ViewAcceptedTrade
                            },
                            Object(re.b)("#ChatRoom_TradeRequest_ViewTrade")
                          )
                      )
                    )
                  )
                )
              );
            if (this.TradeRequestMsg.m_bDeclined) {
              var o = new E.a(
                  this.TradeRequestMsg.TargetSteamID()
                ).GetAccountID(),
                i = Yo.FriendStore.GetPlayer(o).display_name;
              return ve.createElement(
                "div",
                { className: "msg" + (t ? " isCurrentUser" : ""), style: n },
                ve.createElement(
                  "div",
                  { className: "msgText" },
                  ve.createElement(
                    "div",
                    { className: "tradeInviteDismissed" },
                    ve.createElement(
                      "div",
                      null,
                      ve.createElement(Qo.Y, null),
                      t &&
                        Object(re.d)(
                          "#ChatRoom_TradeRequest_Recipient_Declined",
                          i
                        ),
                      !t &&
                        Object(re.d)("#ChatRoom_TradeRequest_Self_Declined", i)
                    )
                  )
                )
              );
            }
            if (this.TradeRequestMsg.m_bCancelled)
              return ve.createElement(
                "div",
                { className: "msg" + (t ? " isCurrentUser" : ""), style: n },
                ve.createElement(
                  "div",
                  { className: "msgText" },
                  ve.createElement(
                    "div",
                    { className: "tradeInviteDismissed" },
                    ve.createElement(
                      "div",
                      null,
                      ve.createElement(Qo.Y, null),
                      this.GetLocalizedErrorResponseString()
                    )
                  )
                )
              );
            if (t) {
              o = new E.a(this.TradeRequestMsg.TargetSteamID()).GetAccountID();
              var r = Yo.FriendStore.GetPlayer(o).display_name;
              return ve.createElement(
                "div",
                { className: "msg", style: n },
                ve.createElement(
                  "div",
                  { className: "msgText" },
                  ve.createElement(
                    "div",
                    {
                      className:
                        "msg ChatMessageInvite gameInviteMsg tradeInviteMsg tradeInviteSender"
                    },
                    ve.createElement(
                      "div",
                      { className: "leftInviteContainer" },
                      ve.createElement(Qo.Y, null)
                    ),
                    ve.createElement(
                      "div",
                      { className: "rightInviteContainer" },
                      ve.createElement(
                        "div",
                        { className: "centerBlock" },
                        ve.createElement(
                          "div",
                          { className: "inviteLabel" },
                          Object(re.d)(
                            "#ChatRoom_TradeRequest_Sender_Pending",
                            r
                          )
                        )
                      ),
                      ve.createElement(
                        "button",
                        {
                          className: "DialogButton Primary",
                          onClick: this.CancelTradeRequest
                        },
                        Object(re.b)("#Button_Cancel")
                      )
                    )
                  )
                )
              );
            }
            r = Yo.FriendStore.GetPlayer(e.unAccountID);
            return ve.createElement(
              "div",
              { className: "msg", style: n },
              ve.createElement(
                "div",
                { className: "msgText" },
                ve.createElement(
                  "div",
                  {
                    className:
                      "msg ChatMessageInvite gameInviteMsg tradeInviteMsg"
                  },
                  ve.createElement(
                    "div",
                    { className: "leftInviteContainer" },
                    ve.createElement(Qo.Y, null)
                  ),
                  ve.createElement(
                    "div",
                    { className: "rightInviteContainer" },
                    ve.createElement(
                      "div",
                      { className: "centerBlock" },
                      ve.createElement(
                        "div",
                        { className: "invitedTimeLabel" },
                        Object(re.b)("#ChatRoom_GameInvite_InviteTime"),
                        ve.createElement(Cr, {
                          rtime: e.rtTimestamp,
                          bTimeOnly: !0
                        })
                      ),
                      ve.createElement(
                        "div",
                        { className: "inviteLabel" },
                        Object(re.b)(
                          "#ChatRoom_TradeRequest_Recipient_Pending",
                          r.display_name
                        )
                      ),
                      ve.createElement(
                        "div",
                        { className: "productName" },
                        "Trade"
                      )
                    ),
                    ve.createElement(
                      "button",
                      {
                        className: "DialogButton Primary",
                        onClick: this.AcceptTrade
                      },
                      Object(re.b)("#ChatRoom_TradeRequest_Accept")
                    ),
                    ve.createElement(
                      "div",
                      { className: "closeButton", onClick: this.DeclineTrade },
                      ve.createElement(Qo.fb, null)
                    )
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "AcceptTrade", null),
          R.c([M.a], t.prototype, "DeclineTrade", null),
          R.c([M.a], t.prototype, "CancelTradeRequest", null),
          R.c([M.a], t.prototype, "ViewAcceptedTrade", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Ol = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(
              cc,
              { style: "invite", text: this.props.msg.strMessage },
              ve.createElement(
                "div",
                { className: "msg" },
                ve.createElement(
                  "div",
                  { className: "msg voiceChannelInvite" },
                  this.props.msg.strMessage
                ),
                ve.createElement("div", {
                  className: "msg voiceChannelInviteClear"
                })
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      El = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.componentDidUpdate = function() {
            this.props.onUpdate(
              "ChatMessageBlocks " + this.props.chatView.GetUniqueID()
            );
          }),
          (t.prototype.renderBlock = function(e) {
            var t,
              n = this.props,
              o = this.props.chatView,
              i = o.chat.chat_message_blocks,
              r = !o.IsChatRoom() && i.time_passes_index,
              a = o.IsChatRoom() ? o.chat.first_unread_msg_time : S.c,
              s = i.message_blocks[e],
              c = 0 == e ? S.c : i.message_blocks[e - 1].GetRTimeLastMessage();
            if (a && c <= a && s.GetRTimeLastMessage() > a) {
              var l = s,
                p = void 0;
              a > s.GetRTimeFirstMessage() &&
                ((p = (t = s.CreateVirtualSplitOnTimestamp(a))[0]),
                (l = t[1]),
                AssertMsg(p.messages.length, "No messages in prefix"));
              var u = a;
              return ve.createElement(
                ve.Fragment,
                { key: s.UniqueKey() },
                p &&
                  ve.createElement(
                    wl,
                    R.a({}, n, {
                      block: p,
                      bIsInitialBlock: 0 === e,
                      bShowTimePasses: e === r
                    })
                  ),
                ve.createElement(Gl, { rtTimestamp: u, bUnread: !0 }),
                0 < l.messages.length &&
                  ve.createElement(
                    wl,
                    R.a({}, n, {
                      block: l,
                      bIsInitialBlock: !1,
                      bShowTimePasses: !1
                    })
                  )
              );
            }
            return ve.createElement(
              wl,
              R.a({}, n, {
                key: s.UniqueKey(),
                block: s,
                bIsInitialBlock: 0 === e,
                bShowTimePasses: e === r
              })
            );
          }),
          (t.prototype.render = function() {
            var n = this;
            this.props;
            return this.props.chatView.chat.chat_message_blocks.message_blocks.map(
              function(e, t) {
                return n.renderBlock(t);
              }
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      wl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.componentDidUpdate = function() {
            this.props.block.is_last_block &&
              this.props.onUpdate(
                "ChatMessageBlock " + this.props.block.UniqueKey()
              );
          }),
          (t.prototype.render = function() {
            var e,
              t,
              n = this.props,
              o = n.block,
              i = n.bIsInitialBlock,
              r = n.bShowTimePasses,
              a = R.f(n, ["block", "bIsInitialBlock", "bShowTimePasses"]),
              s = a.friendRenderContext,
              c = o.messages;
            if (
              (o.BIsInvite()
                ? (e = ve.createElement(_l, {
                    messages: c,
                    friendRenderContext: s
                  }))
                : o.BIsServerMsg()
                  ? (e = ve.createElement(Rl, {
                      block: o,
                      friendRenderContext: s
                    }))
                  : c.length &&
                    (e = ve.createElement(
                      Dl,
                      R.a({}, a, {
                        messages: c,
                        bLastMessageBlock: o.is_last_block
                      })
                    )),
              o.is_last_block)
            ) {
              var l = Yo.GetLocalMidnightInRTime32();
              o.GetRTimeMidnightBeforeBlock() != l &&
                (t = ve.createElement(Gl, { rtTimestamp: l }));
            } else
              o.GetRTimeMidnightBeforeBlock() !=
                o.GetRTimeMidnightBeforeNextBlock() &&
                (t = ve.createElement(Gl, {
                  rtTimestamp: o.GetRTimeMidnightBeforeNextBlock()
                }));
            return ve.createElement(
              ve.Fragment,
              null,
              i && 0 < c.length && ve.createElement(Ml, { msg: c[0] }),
              r &&
                ve.createElement(Gl, {
                  rtTimestamp: c[0].rtTimestamp,
                  bTimePassesLine: !0
                }),
              e,
              t
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component);
    function Ml(e) {
      return e.msg.rtTimestamp < Yo.GetLocalMidnightInRTime32()
        ? ve.createElement(Gl, { rtTimestamp: e.msg.rtTimestamp })
        : null;
    }
    var Dl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bHoveringDelete: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnHoverDelete = function(e) {
            this.setState({ bHoveringDelete: e });
          }),
          (e.prototype.render = function() {
            var e = !0,
              t = !1,
              n = this.props.bLastMessageBlock,
              o = this.props.messages[0].unAccountID,
              i = Yo.FriendStore.GetPlayer(o),
              r = this.props.chatView.IsChatRoom()
                ? this.props.chatView.chat
                : null,
              a = r && r.BCanDeleteMemberMessages(o),
              s = a && this.state.bHoveringDelete,
              c = "ChatMessageBlock",
              l = [];
            if (r && i.is_blocked)
              l.push(ve.createElement(dl, { key: "blocked" })),
                (c += " ChatMessageBlock_BlockedSender");
            else {
              this.props.messages.length &&
                "/me" === this.props.messages[0].GetSlashCommand() &&
                (e = !1);
              for (
                var p = 0, u = !1, m = 0;
                m < this.props.messages.length;
                m++
              ) {
                var d = this.props.messages[m],
                  h = !0;
                if (!r) {
                  var _ = Math.floor(d.rtTimestamp / 60);
                  p && _ != p
                    ? (t = !(h = !1))
                    : n && t && m == this.props.messages.length - 1 && (h = !1),
                    (p = _);
                }
                var f = {
                  msg: d,
                  key: d.UniqueKey(),
                  chatView: this.props.chatView,
                  hideTimeStamp: h,
                  onUpdate: this.props.onUpdate
                };
                d.eDeleteState != Le.Deleting && d.eDeleteState != Le.Deleted
                  ? ((u = !1),
                    "/me" === d.GetSlashCommand()
                      ? l.push(
                          ve.createElement(
                            Sl,
                            R.a({}, f, {
                              speakerWidth: this.props.speakerWidth
                            })
                          )
                        )
                      : d instanceof We
                        ? l.push(
                            ve.createElement(
                              cc,
                              null,
                              ve.createElement(
                                Il,
                                R.a({}, f, {
                                  speakerWidth: this.props.speakerWidth
                                })
                              )
                            )
                          )
                        : d instanceof He
                          ? ((e = !1), l.push(ve.createElement(Ol, R.a({}, f))))
                          : l.push(
                              ve.createElement(
                                gl,
                                R.a({}, f, {
                                  speakerWidth: this.props.speakerWidth
                                })
                              )
                            ))
                  : (u ||
                      l.push(
                        ve.createElement(
                          yl,
                          R.a({}, f, { speakerWidth: this.props.speakerWidth })
                        )
                      ),
                    (u = !0));
              }
            }
            return (
              n &&
                ((c += " LastMessageBlock"),
                t && (c += " HasInternalTimeStamp")),
              s && (c += " ChatMessageBlock_HighlightDelete"),
              1 != l.length || r || (c += " SingletonMsg"),
              ve.createElement(
                cc,
                null,
                ve.createElement(
                  "div",
                  { className: c },
                  e &&
                    ve.createElement(vl, {
                      friend: i,
                      chatView: this.props.chatView,
                      msg: this.props.messages[0],
                      friendRenderContext: this.props.friendRenderContext,
                      key: "speaker",
                      speakerWidth: this.props.speakerWidth,
                      onUpdate: this.props.onUpdate
                    }),
                  a &&
                    ve.createElement(Tl, {
                      chatRoom: r,
                      messages: this.props.messages,
                      onHover: this.OnHoverDelete
                    }),
                  l
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnHoverDelete", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Tl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnMouseEnter = function() {
            this.props.onHover(!0);
          }),
          (t.prototype.OnMouseLeave = function() {
            this.props.onHover(!1);
          }),
          (t.prototype.OnDeleteMessages = function(e) {
            !(function(c, l, p) {
              R.b(this, void 0, void 0, function() {
                var t, n, o, i, r, a, s;
                return R.e(this, function(e) {
                  switch (e.label) {
                    case 0:
                      return 0 == p.length
                        ? [2]
                        : ((t = p[0].unAccountID),
                          (n = Yo.FriendStore.GetPlayer(t)
                            .primary_display_name),
                          (o = Object(re.b)(
                            "#Chat_Actions_DeleteChatMessages"
                          )),
                          (i = Object(re.b)(
                            "#Chat_Actions_DeleteChatMessages_Confirm",
                            n
                          )),
                          (r = Object(re.b)("#Chat_Actions_Delete")),
                          [4, $i(c, o, i, r)]);
                    case 1:
                      return e.sent() ? [4, l.DeleteChatMessges(p)] : [2];
                    case 2:
                      return (
                        1 == (a = e.sent()) ||
                          ((s =
                            15 == a
                              ? "#Chat_Actions_DeleteChatMessage_FailAccess"
                              : "#Chat_Actions_DeleteChatMessage_Fail"),
                          (i = Object(re.b)(s, n)),
                          er(c, o, i)),
                        [2]
                      );
                  }
                });
              });
            })(Yu(e), this.props.chatRoom, this.props.messages);
          }),
          (t.prototype.render = function() {
            return ve.createElement(
              "div",
              {
                className: "ChatMessageBlockDelete",
                onMouseEnter: this.OnMouseEnter,
                onMouseLeave: this.OnMouseLeave,
                onClick: this.OnDeleteMessages,
                title: Object(re.b)("#Chat_Actions_Delete")
              },
              ve.createElement(Qo.Z, null)
            );
          }),
          R.c([M.a], t.prototype, "OnMouseEnter", null),
          R.c([M.a], t.prototype, "OnMouseLeave", null),
          R.c([M.a], t.prototype, "OnDeleteMessages", null),
          t
        );
      })(ve.Component);
    var Gl = (function(e) {
      function t() {
        return (null !== e && e.apply(this, arguments)) || this;
      }
      return (
        R.d(t, e),
        (t.prototype.shouldComponentUpdate = function(e) {
          return (
            e.rtTimestamp !== this.props.rtTimestamp ||
            e.bUnread !== this.props.bUnread ||
            e.bTimePassesLine !== this.props.bTimePassesLine
          );
        }),
        (t.prototype.render = function() {
          var e,
            t = Yo.RTime32ToDate(this.props.rtTimestamp),
            n = ["msg", "timeDivision"];
          if (this.props.bUnread) {
            var o = {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric",
              hour: "numeric",
              minute: "numeric"
            };
            (e = Object(re.b)(
              "#ChatRoom_New_Messages",
              t.toLocaleDateString(re.a.GetPreferredLocales(), o)
            )),
              n.push("new_messages");
          } else if (this.props.bTimePassesLine)
            (e = ""), n.push("time_passes");
          else {
            o = {
              weekday: "long",
              year: "numeric",
              month: "long",
              day: "numeric"
            };
            e = t.toLocaleDateString(re.a.GetPreferredLocales(), o);
          }
          return ve.createElement(
            cc,
            { style: "timestamp", text: e },
            ve.createElement(
              "div",
              { className: n.join(" ") },
              ve.createElement("div", { className: "preHorizDivider" }),
              e,
              ve.createElement("div", { className: "horizDivider" })
            )
          );
        }),
        t
      );
    })(ve.Component);
    function Rl(e) {
      var t = e.friendRenderContext,
        n = [],
        o = [],
        i = [],
        r = function() {
          o.length &&
            (n.push(
              ve.createElement(fl, {
                key: o[0].UniqueKey(),
                messages: o,
                friendRenderContext: t,
                tokenPrefix: "#ChatRoom_ServerMessage_Joined"
              })
            ),
            (o = []));
        },
        a = function() {
          i.length &&
            (n.push(
              ve.createElement(fl, {
                key: i[0].UniqueKey(),
                messages: i,
                friendRenderContext: t,
                tokenPrefix: "#ChatRoom_ServerMessage_Parted"
              })
            ),
            (i = []));
        };
      return (
        e.block.messages.forEach(function(e) {
          2 == e.eServerMsgType
            ? (a(), o.push(e), 4 == o.length && r())
            : 3 == e.eServerMsgType
              ? (r(), i.push(e), 4 == i.length && a())
              : (r(),
                a(),
                n.push(
                  ve.createElement(Cl, {
                    key: e.UniqueKey(),
                    msg: e,
                    friendRenderContext: t
                  })
                ));
        }),
        r(),
        a(),
        ve.createElement(ve.Fragment, null, n)
      );
    }
    var Nl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bInitialized = !1),
            (t.LOG = Te.create(function() {
              return t.props.chatView.GetUniqueID();
            }, !1)),
            (t.m_bLoadHistoryInProgress = !1),
            (t.m_bLoadingOperationInProgress = !1),
            (t.m_bHasPendedLoadOlder = !1),
            (t.m_nIgnoreScrollUpUntilTime = 0),
            (t.state = { speakerLabelWidth: -1 }),
            e.isActive && t.InitForChatView(e.chatView),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.InitForChatView = function(e) {
            e.AddOnChatFrameChangedCallback(this.OnFrameChanged),
              (this.m_bInitialized = !0);
          }),
          (e.prototype.GetScrollTop = function() {
            return (
              this.LOG(
                "scrollTop is",
                this.m_elHistoryScroll.scrollTop,
                "returning",
                Math.ceil(this.m_elHistoryScroll.scrollTop)
              ),
              Math.ceil(this.m_elHistoryScroll.scrollTop)
            );
          }),
          (e.prototype.GetScrollInfo = function() {
            if (this.m_elHistoryScroll) {
              var e = this.m_elHistoryScroll,
                t = e.scrollHeight,
                n = e.clientHeight;
              return {
                scrollTop: this.GetScrollTop(),
                scrollHeight: t,
                clientHeight: n
              };
            }
            return { scrollTop: 0, scrollHeight: 0, clientHeight: 0 };
          }),
          (e.prototype.LogScrollInfo = function(e) {}),
          (e.prototype.DumpChildSizes = function() {}),
          (e.prototype.OnHistoryScrollRef = function(e) {
            this.m_elHistoryScroll &&
              this.m_window &&
              this.m_window.removeEventListener("resize", this.OnResize),
              (this.m_elHistoryScroll = e) &&
                ((this.m_window = e.ownerDocument.defaultView),
                this.m_window.addEventListener("resize", this.OnResize));
          }),
          (e.prototype.OnScrollEvent = function(e) {
            this.LogScrollInfo("*** OnScrollEvent"), this.OnScroll();
          }),
          (e.prototype.OnScroll = function() {
            var e = this.props.chatView,
              t = this.GetScrollInfo(),
              n = t.scrollTop,
              o = t.scrollHeight,
              i = t.clientHeight,
              r = e.lastScrollTop,
              a = e.lastScrollHeight,
              s = e.lastClientHeight;
            if ((this.LogScrollInfo("OnScroll"), 0 != i)) {
              var c = o - n <= i,
                l = a - r <= s;
              AssertMsg(
                l == e.is_scrolled_to_bottom,
                e.GetUniqueID() + ": computed and stored at bottom don't match"
              ),
                this.LOG("bAtBottom", c, "bWasAtBottom", l);
              var p = n;
              l &&
                r - p == 1 &&
                (this.LOG(
                  "*** Scroll position off by one while pinned, ignoring and setting scrollTop to",
                  r
                ),
                (p = r)),
                c ||
                (l && o != a) ||
                (p < r && l && Date.now() < this.m_nIgnoreScrollUpUntilTime)
                  ? (this.LogScrollInfo("At bottom"),
                    p < r &&
                      l &&
                      Date.now() < this.m_nIgnoreScrollUpUntilTime &&
                      this.LOG(
                        "**** IGNORING APPARENT SCROLL UP WHILE PINNED TO BOTTOM IN LAYOUT"
                      ),
                    (p = o - i),
                    AssertMsg(
                      0 <= p,
                      e.GetUniqueID() +
                        ": Onscroll client height bigger than scroll height"
                    ),
                    (e.is_scrolled_to_bottom = !0),
                    p != n &&
                      (this.LOG("Setting scrollTop to", p),
                      (this.m_elHistoryScroll.scrollTop = p)))
                  : i < s && l
                    ? (this.LogScrollInfo(
                        "Shrinking window while pinned to bottom"
                      ),
                      (p = o - i),
                      (e.is_scrolled_to_bottom = !0),
                      p != n &&
                        (this.LOG("Setting scrollTop to", p),
                        (this.m_elHistoryScroll.scrollTop = p)))
                    : p < r
                      ? (this.LogScrollInfo("Detected scroll up"),
                        (e.is_scrolled_to_bottom = c))
                      : p != r &&
                        (this.LogScrollInfo(
                          "Detected scroll down but not to bottom"
                        ),
                        (e.is_scrolled_to_bottom = !1)),
                (e.lastScrollTop = p),
                (e.lastScrollHeight = o),
                (e.lastClientHeight = i);
              var u = !(
                e.is_scrolled_to_bottom ==
                e.lastScrollHeight - e.lastScrollTop <= e.lastClientHeight
              );
              u &&
                (AssertMsg(
                  !u,
                  e.GetUniqueID() + ": setting mismatched computed and stored"
                ),
                this.LOG(
                  e.lastScrollTop,
                  e.lastScrollHeight,
                  e.lastClientHeight,
                  e.is_scrolled_to_bottom
                )),
                p < 10 && this.LoadOlderMessages();
            } else this.LOG("Onscroll zero clientHeight, ignoring");
          }),
          (e.prototype.ScrollToBottom = function() {
            var e = this.GetScrollInfo(),
              t = e.scrollHeight,
              n = e.clientHeight;
            this.LogScrollInfo("ScrollToBottom");
            var o = t - n;
            AssertMsg(
              0 <= o,
              this.props.chatView.GetUniqueID() +
                ": ScrollToBottom client height bigger than scroll height"
            ),
              this.m_animation && this.m_animation.Cancel(),
              (this.m_animation = new pi(
                this.m_elHistoryScroll,
                { scrollTop: o },
                { msDuration: 300, timing: "sine", onComplete: function() {} }
              )),
              this.m_animation.Start();
          }),
          (e.prototype.LoadOlderMessages = function() {
            var o = this,
              i = this.props.chatView,
              e = i.chat;
            if (e.IsMoreHistoryAvailable()) {
              if (this.m_bLoadingOperationInProgress)
                return (
                  this.LOG("noting pended load"),
                  void (this.m_bHasPendedLoadOlder = !0)
                );
              var r = function() {
                return e.LoadMoreHistory().then(function(e) {
                  var t = o.GetScrollInfo().scrollHeight,
                    n = i.lastScrollTop + t - i.lastScrollHeight;
                  return (
                    o.LogScrollInfo("LoadOlderMessags"),
                    (o.m_elHistoryScroll.scrollTop = n),
                    o.m_bHasPendedLoadOlder
                      ? (o.LOG("LoadOlderMessages starting pended"),
                        (o.m_bHasPendedLoadOlder = !1),
                        r())
                      : ((o.m_bLoadingOperationInProgress = !1), e)
                  );
                });
              };
              this.LOG("LoadOlderMessages starting"),
                (this.m_bLoadHistoryInProgress = !0),
                (this.m_bLoadingOperationInProgress = !0),
                this.DoAndDelay(this.m_window, r, 500).then(function(e) {
                  o.LOG("loading over"), (o.m_bLoadHistoryInProgress = !1);
                });
            }
          }),
          (e.prototype.DoAndDelay = function(o, e, i) {
            var r = performance.now();
            return e().then(function(t) {
              var n = performance.now() - r;
              return n < i
                ? new Promise(function(e) {
                    return o.setTimeout(e.bind(null, t), i - n);
                  })
                : t;
            });
          }),
          (e.prototype.Focus = function() {
            this.m_elHistoryScroll && this.m_elHistoryScroll.focus();
          }),
          (e.prototype.componentDidMount = function() {
            if (
              (this.LOG("ComponentDidMount"),
              this.m_elHistoryScroll &&
                this.props.chatView.is_scrolled_to_bottom)
            ) {
              var e = this.props.chatView,
                t = this.GetScrollInfo(),
                n = t.scrollHeight,
                o = t.clientHeight;
              (e.lastScrollTop = n - o),
                (e.lastScrollHeight = n),
                (e.lastClientHeight = o),
                (this.m_elHistoryScroll.scrollTop = e.lastScrollTop),
                AssertMsg(
                  e.is_scrolled_to_bottom ==
                    e.lastScrollHeight - e.lastScrollTop <= e.lastClientHeight,
                  e.GetUniqueID() + ": setting mismatched computed and stored"
                );
            }
          }),
          (e.prototype.componentDidUpdate = function() {
            var e = this.props.chatView,
              t = this.GetScrollInfo(),
              n = t.scrollTop,
              o = t.scrollHeight,
              i = t.clientHeight,
              r = e.lastScrollTop,
              a = e.lastScrollHeight;
            if (0 != i) {
              var s = n;
              o == a ? (s = r) : o - n <= i && (s = o - i),
                this.LogScrollInfo("componentDidUpdate"),
                this.DelayedScrollTo(s);
            } else this.LOG("componentDidUpdate clientHeight == 0, ignoring");
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_window &&
              (this.m_window.removeEventListener("resize", this.OnResize),
              (this.m_window = void 0)),
              this.props.chatView.RemoveOnChatFrameChangedCallback(
                this.OnFrameChanged
              );
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            e.chatView != this.props.chatView &&
              (this.props.chatView.RemoveOnChatFrameChangedCallback(
                this.OnFrameChanged
              ),
              (this.m_bInitialized = !1)),
              !this.m_bInitialized &&
                e.isActive &&
                this.InitForChatView(e.chatView);
          }),
          (e.prototype.GetFriendRenderContext = function() {
            return (
              (this.m_FriendRenderContext &&
                this.m_FriendRenderContext.chat == this.props.chatView.chat) ||
                (this.m_FriendRenderContext = {
                  chatContext: "message",
                  chat: this.props.chatView.chat
                }),
              this.m_FriendRenderContext
            );
          }),
          (e.prototype.OnFrameChanged = function() {
            var e,
              t = this.props.chatView,
              n = this.GetScrollInfo(),
              o = n.scrollHeight,
              i = n.clientHeight,
              r = t.lastScrollTop,
              a = t.lastScrollHeight,
              s = t.lastClientHeight;
            this.LogScrollInfo("OnFrameChanged"),
              (this.m_nIgnoreScrollUpUntilTime = Date.now() + 300),
              t.is_scrolled_to_bottom
                ? (this.LOG("OnFrameChanged scrolling to bottom"), (e = o - i))
                : (this.LOG("OnFrameChanged preserving bottom"),
                  (e = r + s + o - a - i)),
              this.LOG("OnFrameChanged setting scrollTop to", e),
              this.DelayedScrollTo(e);
          }),
          (e.prototype.DelayedScrollTo = function(e) {
            var t = this;
            this.LOG("DelayedScrollTo", e),
              (this.m_elHistoryScroll.scrollTop = e),
              this.m_window.setTimeout(function() {
                t.LOG("DelayedOnScroll firing", e), t.OnScroll();
              }, 30);
          }),
          (e.prototype.OnUpdate = function(e) {
            var t = this.props.chatView,
              n = this.GetScrollInfo(),
              o = n.scrollHeight,
              i = n.clientHeight;
            if (
              (this.LogScrollInfo("OnUpdate for " + e),
              this.LOG("Scrolled to bottom is", t.is_scrolled_to_bottom),
              0 == o)
            )
              this.LOG("OnUpdate zero scroll height");
            else if (t.is_scrolled_to_bottom) {
              this.LogScrollInfo("OnUpdate currently scrolled to bottom");
              var r = o - i;
              this.DelayedScrollTo(r);
            } else if (t.chat.BIsPrepend) {
              t.chat.ResetPrepended();
              var a = t.lastScrollTop,
                s = t.lastScrollHeight,
                c = t.lastClientHeight;
              this.LogScrollInfo("OnUpdate prepended messages");
              r = a + c + o - s - i;
              this.DelayedScrollTo(r);
            } else
              this.LogScrollInfo("OnUpdate content updated, doing nothing");
          }),
          (e.prototype.OnResize = function() {
            var e = this.GetScrollInfo(),
              t = e.scrollTop,
              n = e.scrollHeight,
              o = e.clientHeight;
            this.LogScrollInfo("OnResize");
            var i = t;
            n - t <= o && (i = n - o), this.DelayedScrollTo(i);
          }),
          (e.prototype.Swallow = function(e) {
            e.stopPropagation(), e.preventDefault();
          }),
          (e.prototype.render = function() {
            if (!this.m_bInitialized) return null;
            var e = this.props,
              t = e.chatView,
              n = e.speakerLabelWidth,
              o = e.blockInteraction,
              i = t.chat,
              r = this.GetFriendRenderContext(),
              a = n && Math.max(Math.min(n, 120), 50);
            this.LOG("Render"), i.LoadChatLogs();
            var s = null;
            if (i instanceof Tt) {
              var c = "currentTextChannelName";
              i.IsDefaultRoomForGroup() && (c += " DefaultChatRoom"),
                (s = ve.createElement("div", { className: c }, "#", i.name));
            }
            var l = Yo.SettingsStore.FriendsSettings.nChatFontSize,
              p = "ChatHistoryContainer";
            return (
              l == wa.k_EChatFontSizeSmall
                ? (p += " smallChatFont")
                : l == wa.k_EChatFontSizeLarge && (p += " largeChatFont"),
              ve.createElement(
                "div",
                { className: p },
                o &&
                  ve.createElement("div", {
                    className: "interactionBlocker",
                    onClick: this.Swallow
                  }),
                s,
                ve.createElement(
                  "div",
                  { className: "friendsListInsetShadowCtn" },
                  ve.createElement("div", {
                    className: "friendListInsetShadowTop"
                  })
                ),
                ve.createElement(Ll, { chatHistory: this, chatView: t }),
                ve.createElement(
                  "div",
                  {
                    className: "chatHistoryScroll",
                    ref: this.OnHistoryScrollRef,
                    onScroll: this.OnScrollEvent,
                    tabIndex: 0
                  },
                  ve.createElement(
                    "div",
                    { className: "chatHistory" },
                    ve.createElement(El, {
                      chatView: t,
                      friendRenderContext: r,
                      onUpdate: this.OnUpdate,
                      speakerWidth: a
                    }),
                    ve.createElement("div", { className: "disconnectBlocker" })
                  )
                ),
                ve.createElement(Xl, { chatView: t }),
                ve.createElement(kl, {
                  chatView: t,
                  action: this.ScrollToBottom
                }),
                ve.createElement(
                  "div",
                  { className: "friendsListInsetShadowCtn" },
                  ve.createElement("div", {
                    className: "friendListInsetShadowBottom"
                  })
                )
              )
            );
          }),
          R.c([m.observable], e.prototype, "m_bLoadHistoryInProgress", void 0),
          R.c([M.a], e.prototype, "DumpChildSizes", null),
          R.c([M.a], e.prototype, "OnHistoryScrollRef", null),
          R.c([M.a], e.prototype, "OnScrollEvent", null),
          R.c([M.a], e.prototype, "OnScroll", null),
          R.c([M.a], e.prototype, "ScrollToBottom", null),
          R.c([M.a], e.prototype, "LoadOlderMessages", null),
          R.c([M.a], e.prototype, "OnFrameChanged", null),
          R.c([M.a], e.prototype, "OnUpdate", null),
          R.c([M.a], e.prototype, "OnResize", null),
          R.c([M.a], e.prototype, "Swallow", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ll = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = "LoadingOlderMessages";
            return (
              this.props.chatHistory.m_bLoadHistoryInProgress ||
                (e += " Hidden"),
              ve.createElement(
                "div",
                { className: e },
                ve.createElement("span", null, Object(re.b)("#Chat_Loading"))
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      kl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.chatView,
              n = e.action,
              o = "ScrollToBottomButton";
            t.is_scrolled_to_bottom && (o += " Hidden");
            var i = Object(re.b)("#Chat_ScrollToBottom");
            return (
              0 < t.chat.unread_message_count &&
                ((i = Object(re.c)(
                  "#Chat_UnreadMessages",
                  t.chat.unread_message_count
                )),
                (o += " UnreadMessages")),
              ve.createElement(
                "div",
                { className: o, onClick: n },
                ve.createElement("span", null, i)
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Al = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_keyEventListener = "keydown"),
            (t.macUserAgentStrings = /(MacIntel|Macintosh|Mac OS X)/),
            (t.linuxUserAgentStrings = /(Linux|X11)/),
            (-1 == navigator.userAgent.search(t.macUserAgentStrings) &&
              -1 == navigator.userAgent.search(t.linuxUserAgentStrings)) ||
              (t.m_keyEventListener = "keyup"),
            t.props.popup &&
              t.props.popup.addEventListener(
                t.m_keyEventListener,
                t.OnHTMLKeyEvent
              ),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            this.props.popup &&
              this.props.popup.removeEventListener(
                this.m_keyEventListener,
                this.OnHTMLKeyEvent
              );
          }),
          (e.prototype.OnCopy = function(e) {
            if (this.props.popup) {
              var t = this.props.popup.getSelection();
              if (0 != t.rangeCount) {
                for (
                  var n = "",
                    o = "",
                    i = !1,
                    r = t.getRangeAt(0).cloneContents(),
                    a = (
                      r.querySelector("[data-activechat=true]") || r
                    ).querySelectorAll("[data-copytext]"),
                    s = 0;
                  s < a.length;
                  ++s
                ) {
                  var c = a[s];
                  if (!(s + 1 < a.length && Object(ci.d)(c, a[s + 1]))) {
                    var l = c.tagName.toLowerCase(),
                      p = c.getAttribute("data-copystyle") || "msg",
                      u = p.includes("block"),
                      m = p.includes("timestamp"),
                      d = p.includes("server"),
                      h = p.includes("invite"),
                      _ = p.includes("emote"),
                      f = p.includes("no-prefix"),
                      g = p.includes("no-suffix"),
                      b = p.includes("allow-embedded-newlines"),
                      v = p.includes("block-continue"),
                      S = p.includes("force-display"),
                      y = p.includes("prepend-innertext"),
                      C = p.includes("append-innertext"),
                      I = p.includes("prepend-newline"),
                      O = p.includes("append-newline"),
                      E = p.includes("speaker");
                    if (!S) {
                      var w = null != l.match(/img|iframe/),
                        M = null != c.querySelector("img,iframe");
                      if (!c.innerText && !w && !M) continue;
                    }
                    E && (i = !0);
                    var D = "",
                      T = "\n";
                    m || E || d || h || _
                      ? (0 != n.length && (D += "\n"),
                        (d || h) && (D += "\t\t"))
                      : (i && (D += "\t"),
                        o.includes("msg") && u && (I = !0),
                        o.includes("block") && !v && (I = !0)),
                      f && (D = ""),
                      g && (T = "");
                    var G = c.getAttribute("data-copytext");
                    0 == G.length
                      ? (G = c.innerText)
                      : y && 0 < c.innerText.length
                        ? (G =
                            c.innerText +
                            (p.includes("-with-newline") ? "\n" : " ") +
                            G)
                        : C &&
                          0 < c.innerText.length &&
                          (G +=
                            (p.includes("-with-newline") ? "\n" : " ") +
                            c.innerText),
                      0 != G.length &&
                        (I && (n += "\n"),
                        (n += D + (b ? G : G.replace(/\n/g, T + D)) + T),
                        O && (n += "\n")),
                      (o = p);
                  }
                }
                0 != n.length &&
                  ("Win32" === this.props.popup.navigator.platform &&
                    (n = n.replace(/\n/g, "\r\n")),
                  e.clipboardData.setData("text", n),
                  e.preventDefault());
              }
            }
          }),
          (e.prototype.OnChatTabRef = function(e) {
            this.m_refChatTabs = e;
          }),
          (e.prototype.OnDragEnter = function(e) {
            if (
              (AssertMsg(
                e &&
                  ("chattab" == e.type ||
                    "friend" == e.type ||
                    "chatroomgroup" == e.type),
                "Invalid data type passed to MultiChatDialog.OnDragEnter",
                e.type
              ),
              "chattab" == e.type)
            ) {
              var t = this.props.tabs,
                n = e;
              (n.tabSet != t || 1 < t.tabCount) &&
                (t.Focus(),
                this.m_refChatTabs &&
                  this.m_refChatTabs.GetDragTab() != n.tab &&
                  this.m_refChatTabs.SetDragTab(n.tab));
            }
            return !0;
          }),
          (e.prototype.OnDragLeave = function() {
            this.m_refChatTabs && this.m_refChatTabs.SetDragTab(void 0);
          }),
          (e.prototype.OnDragOver = function(e) {
            this.m_refChatTabs && this.m_refChatTabs.UpdateDragOffset(e);
          }),
          (e.prototype.OnDrop = function(e, t) {
            if (
              (AssertMsg(
                e &&
                  ("chattab" == e.type ||
                    "friend" == e.type ||
                    "chatroomgroup" == e.type),
                "Invalid data type passed to MultiChatDialog.OnDrop",
                e.type
              ),
              "chattab" == e.type)
            ) {
              var n = e,
                o = -1;
              this.m_refChatTabs && (o = this.m_refChatTabs.state.iDragIndex),
                Qu.DragDropManager.SetDropConsumed(),
                n.tabSet != this.props.tabs &&
                  (n.tabSet.RemoveTab(n.tab),
                  this.props.tabs.AddTab(n.tab),
                  Qu.DragDropManager.EndDrag()),
                -1 != o && this.props.tabs.MoveTabToIndex(n.tab, o),
                this.props.tabs.ActivateTab(n.tab),
                this.setState({ tabDrag: void 0 });
            } else if ("friend" == e.type) {
              Qu.DragDropManager.SetDropConsumed(),
                e.friend.OpenChatDialog(zu(this, t));
            } else if ("chatroomgroup" == e.type) {
              Qu.DragDropManager.SetDropConsumed();
              var i = e;
              Yo.UIStore.ShowAndOrActivateChatRoomGroup(zu(this), i.group, !0);
            }
          }),
          (e.prototype.OnHTMLKeyEvent = function(e) {
            if (G.a.IN_CLIENT && e.ctrlKey && !e.altKey) {
              if ((!e.shiftKey && 9 == e.keyCode) || 34 == e.keyCode)
                this.props.tabs.ActivateNextTab();
              else if (9 == e.keyCode || 33 == e.keyCode)
                this.props.tabs.ActivatePreviousTab();
              else {
                if ("W" != e.key && "w" != e.key) return;
                this.props.tabs.RemoveTab(this.props.tabs.activeTab);
              }
              return e.preventDefault(), void e.stopPropagation();
            }
          }),
          (e.prototype.OnKeyDown = function(e) {
            var t = this.props.tabs.activeTab;
            if (
              t &&
              !(e.ctrlKey || e.altKey || e.metaKey || 1 < e.key.length)
            ) {
              var n = e.target,
                o = n && n.tagName ? n.tagName.toLowerCase() : "";
              "input" != o &&
                "select" != o &&
                "textarea" != o &&
                t.GetChatView().FocusTextInput();
            }
          }),
          (e.prototype.render = function() {
            var i = this,
              r = this.props.tabs.activeTab;
            this.m_refChatTabs &&
              this.m_refChatTabs.GetDragTab() &&
              (r = this.m_refChatTabs.GetDragTab());
            var e = this.props.tabs.tabs.slice();
            this.m_refChatTabs &&
              this.m_refChatTabs.GetDragTab() &&
              -1 == e.indexOf(this.m_refChatTabs.GetDragTab()) &&
              e.push(this.m_refChatTabs.GetDragTab()),
              e.sort(function(e, t) {
                return e.GetUniqueID() < t.GetUniqueID() ? 1 : -1;
              });
            var t = e.map(function(e) {
              var t = null,
                n = e instanceof Pt && e,
                o = e instanceof no;
              return (
                (t = n
                  ? ve.createElement(jl, {
                      groupView: n,
                      isActive: e == r,
                      popup: i.props.popup,
                      showWindowControls: !1
                    })
                  : o && IsFeatureBroadcastEnabled()
                    ? ve.createElement(zl, {
                        broadcastView: e,
                        isActive: e == r,
                        popup: i.props.popup,
                        showWindowControls: !1
                      })
                    : ve.createElement(Vl, {
                        chatView: e.GetChatView(),
                        isActive: e == r,
                        popup: i.props.popup,
                        showWindowControls: !1
                      })),
                ve.createElement(qi, { key: e.GetUniqueID() }, t)
              );
            });
            return ve.createElement(
              ji,
              {
                className: "multiChatDialog",
                rgAcceptedTypes: ["chattab", "friend", "chatroomgroup"],
                fnDragEnter: this.OnDragEnter,
                fnDragOver: this.OnDragOver,
                fnDragLeave: this.OnDragLeave,
                fnDrop: this.OnDrop,
                onKeyDown: this.OnKeyDown,
                onCopy: this.OnCopy,
                tabIndex: 0
              },
              ve.createElement(Dc, {
                tabSet: this.props.tabs,
                popup: this.props.popup,
                activeTab: r,
                ref: this.OnChatTabRef,
                ResponsiveWindowState: this.props.ResponsiveWindowState,
                showOpenFriendsList: this.props.showOpenFriendsList
              }),
              ve.createElement(
                "div",
                { className: "chatDialogs" },
                0 == t.length &&
                  ve.createElement(
                    "div",
                    { className: "emptyChatDialogs" },
                    Object(re.b)("#Chat_EmptyDialogsWindowMsg")
                  ),
                t
              )
            );
          }),
          R.c([M.a], e.prototype, "OnCopy", null),
          R.c([M.a], e.prototype, "OnChatTabRef", null),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          R.c([M.a], e.prototype, "OnHTMLKeyEvent", null),
          R.c([M.a], e.prototype, "OnKeyDown", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Pl = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.InitiateVoiceChat = function() {
            var e = this.props.chatView.chat.accountid_partner;
            Yo.VoiceStore.InitiateFriendChat(e);
          }),
          (e.prototype.VoidOnClick = function() {}),
          (e.prototype.EndVoiceChat = function() {
            Yo.VoiceStore.GetActiveOneOnOneVoiceChatAccountID() ==
              this.props.chatView.chat.accountid_partner &&
              Yo.VoiceStore.OnUserEndVoiceChat();
          }),
          (e.prototype.OnCloseClick = function() {
            Yo.VoiceStore.GetActiveOneOnOneVoiceChatAccountID() ==
            this.props.chatView.chat.accountid_partner
              ? Yo.VoiceStore.OnUserEndVoiceChat()
              : Yo.VoiceStore.OnRejectOneOnOneVoiceChatForPartner(
                  this.props.chatView.chat.accountid_partner
                );
          }),
          (e.prototype.render = function() {
            var e = Yo.VoiceStore.BInitiatedOneOnOneChat(
                this.props.chatView.chat.accountid_partner
              ),
              t = Yo.CMInterface.steamid.GetAccountID(),
              n = this.props.chatView.chat.accountid_partner,
              o = Yo.FriendStore.GetPlayer(t),
              i = Yo.VoiceStore.BSelfHasAcceptedOrInitiatedOneOnOneChat(n),
              r = Yo.VoiceStore.BSelfHadPreviouslyJoinedOneOnOneChat(n),
              a = this.props.chatView.chat.chat_partner,
              s = Yo.VoiceStore.BPartnerHasAcceptedOrInitiatedOneOnOneChat(n),
              c =
                !i &&
                Yo.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(
                  a.accountid
                ),
              l = void 0;
            l =
              e || i
                ? ve.createElement(
                    Jo,
                    { key: t, classNames: "friend-anim", timeout: 320 },
                    ve.createElement(Qs, {
                      friend: o,
                      key: t,
                      showVoiceLevel: !0,
                      context: { chat: this.props.chatView.chat },
                      listStatusIndicator: ve.createElement("div", {
                        className: "connectionSpinner"
                      })
                    })
                  )
                : ve.createElement(
                    Jo,
                    { key: t, classNames: "friend-anim", timeout: 320 },
                    ve.createElement(
                      "div",
                      {
                        className: "friend emptyFriend",
                        onClick: !i && this.InitiateVoiceChat
                      },
                      ve.createElement(
                        "div",
                        { className: "avatarHolder" },
                        ve.createElement("img", {
                          className: "avatar",
                          src:
                            "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",
                          draggable: !1
                        })
                      )
                    )
                  );
            var p = new Array();
            e && p.push(l),
              s || c
                ? p.push(
                    ve.createElement(
                      Jo,
                      { key: n, classNames: "friend-anim", timeout: 320 },
                      ve.createElement(Qs, {
                        friend: a,
                        key: n,
                        showVoiceLevel: !0,
                        context: { chat: this.props.chatView.chat },
                        listStatusIndicator: ve.createElement("div", {
                          className: "connectionSpinner"
                        })
                      })
                    )
                  )
                : p.push(
                    ve.createElement(
                      Jo,
                      { key: n, classNames: "friend-anim", timeout: 320 },
                      ve.createElement(
                        "div",
                        {
                          className: "friend emptyFriend",
                          onClick: i ? this.VoidOnClick : this.InitiateVoiceChat
                        },
                        ve.createElement(
                          "div",
                          { className: "avatarHolder " },
                          ve.createElement("img", {
                            className: "avatar",
                            src:
                              "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA",
                            draggable: !1
                          })
                        )
                      )
                    )
                  ),
              e || p.push(l);
            var u = void 0;
            u =
              i && s
                ? ve.createElement(
                    "button",
                    {
                      className: "inviteButton inviteButtonJoinVoice",
                      onClick: this.EndVoiceChat
                    },
                    Object(re.b)("#Voice_StopTalking")
                  )
                : i && !s
                  ? ve.createElement(
                      "button",
                      {
                        className: "inviteButton inviteButtonJoinVoice",
                        onClick: this.EndVoiceChat
                      },
                      Object(re.b)("#Voice_EndVoice")
                    )
                  : ve.createElement(
                      "button",
                      {
                        className: "inviteButton inviteButtonJoinVoice",
                        onClick: this.InitiateVoiceChat
                      },
                      Object(re.b)("#Voice_StartTalking")
                    );
            var m = "",
              d = "OneOnOneVoiceRoomControls",
              h = !1;
            i && !s
              ? ((m = Object(re.b)(
                  "#Voice_WaitingForFriendToJoin",
                  a.display_name
                )),
                (d += " WaitingForPartner"))
              : s && !i
                ? (r
                    ? (m = Object(re.b)(
                        "#Voice_ChannelRejoinAvailable",
                        a.display_name
                      ))
                    : ((m = Object(re.b)(
                        "#Voice_ChannelAvailable",
                        a.display_name
                      )),
                      (d += " WaitingForYouFirstTime")),
                  (d += " WaitingForYou"))
                : ((m = Object(re.b)("#Voice_ChannelActive", a.display_name)),
                  (d += " OneOnOneVoiceActive"),
                  (h = !0));
            var _ = ve.createElement(
              "div",
              { className: "OneOnOneVoiceStatusLabel" },
              m
            );
            return ve.createElement(
              "div",
              { className: d },
              ve.createElement(
                "div",
                { className: "VoiceToggleIconCtn" },
                ve.createElement(Qo.cb, null),
                ve.createElement(
                  "div",
                  { className: "Sonar" },
                  ve.createElement("div", { className: "SonarCircle" })
                )
              ),
              ve.createElement(
                "div",
                { className: "OneOnOneVoiceMembers" },
                u,
                p,
                _
              ),
              !h &&
                ve.createElement(
                  "div",
                  {
                    className: "OneOnOneVoiceClose",
                    onClick: this.OnCloseClick,
                    title: i
                      ? Object(re.b)("#Voice_EndVoice")
                      : Object(re.b)("#Tooltip_DismissVoice")
                  },
                  ve.createElement(Qo.fb, null)
                )
            );
          }),
          R.c([M.a], e.prototype, "InitiateVoiceChat", null),
          R.c([M.a], e.prototype, "VoidOnClick", null),
          R.c([M.a], e.prototype, "EndVoiceChat", null),
          R.c([M.a], e.prototype, "OnCloseClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component);
    function Fl(e, t, n) {
      var o,
        i = !1,
        r = !0;
      if (e.invitedto instanceof ut) o = 300;
      else if (e.invitedto instanceof At) {
        (o = 340),
          (a = e.invitedto).BCanInvite() ||
            a.BHasMember(e.invitee.accountid) ||
            (r = !1);
      } else if (e.invitedto instanceof Tt) {
        var a;
        (i = !0),
          (o = 340),
          (a = e.invitedto.GetGroup()).BCanInvite() ||
            a.BHasMember(e.invitee.accountid) ||
            (r = !1);
      }
      r
        ? Ji(ve.createElement(Bl, R.a({}, e)), n, "InviteDialog", {
            strTitle: i
              ? Object(re.b)("#Chat_Actions_InviteFriend_VoiceChat")
              : Object(re.b)("#Chat_Actions_DropGroupInvite_Title"),
            popupWidth: 650,
            popupHeight: o
          })
        : er(
            n,
            Object(re.b)("#Chat_Actions_DropGroupInvite_Denied"),
            Object(re.b)("#Chat_Actions_DropGroupInvite_Denied_Description")
          );
    }
    var Bl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.invitee = t.props.invitee), t;
        }
        return (
          R.d(e, n),
          (e.prototype.AddMoreFriends = function(e) {
            var t = [],
              n = e.currentTarget.ownerDocument.defaultView;
            t.push(this.invitee.accountid),
              this.props.invitedto instanceof ut
                ? ds(zu(this, e), n, this.props.chatview, !0, t)
                : this.props.invitedto instanceof At
                  ? jr(zu(this, e), n, this.props.invitedto, void 0, !0, t)
                  : this.props.invitedto instanceof Tt &&
                    Ur(
                      zu(this, e),
                      n,
                      this.props.invitedto.GetGroup(),
                      this.props.invitedto,
                      t
                    ),
              this.props.closeModal();
          }),
          (e.prototype.Cancel = function() {
            this.props.closeModal();
          }),
          (e.prototype.componentDidMount = function() {
            var e = W.findDOMNode(this);
            if (e) {
              var t = e.querySelector("button[type=submit]");
              t && t.focus();
            }
          }),
          (e.prototype.OnInviteClicked = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            if (this.props.invitedto instanceof ut)
              (this.invitedToPlayer = this.props.invitedto),
                (n = []).push(
                  this.invitedToPlayer.persona.m_steamid.ConvertTo64BitString()
                ),
                n.push(this.invitee.persona.m_steamid.ConvertTo64BitString()),
                hs(t, this.props.chatview, n);
            else if (this.props.invitedto instanceof At)
              (this.invitedToGroup = this.props.invitedto),
                this.invitedToGroup.InviteFriend(this.invitee.accountid);
            else if (this.props.invitedto instanceof Tt) {
              var n;
              (n = []).push(this.invitee.accountid),
                (this.invitedToChatRoom = this.props.invitedto),
                this.invitedToChatRoom
                  .GetGroup()
                  .InviteFriend(this.invitee.accountid, this.invitedToChatRoom);
            }
            this.props.closeModal();
          }),
          (e.prototype.render = function() {
            var e,
              t,
              n,
              o = this.props.invitee,
              i = Yo.FriendStore.self,
              r = !1;
            this.props.invitedto instanceof ut
              ? (e = this.props.invitedto)
              : this.props.invitedto instanceof At
                ? (t = this.props.invitedto)
                : this.props.invitedto instanceof Tt &&
                  (n = this.props.invitedto);
            var a,
              s,
              c = !o.is_in_beta,
              l = e && !e.is_in_beta,
              p = "#Chat_Actions_DropGroupInvite_Confirm",
              u = !1;
            t
              ? (t.BIsUserGroupMember(o) &&
                  (p = "#Chat_Actions_DropGroupInvite_Member_Confirm"),
                (r =
                  !!t.BIsClanChatRoom() &&
                  Yo.FriendStore.ClanStore.GetClan(t.GetClanID()).BIsOGG()),
                (a = t.name),
                (s = ve.createElement(ss, { group: t, name: t.name })),
                (u = t.BIsUserGroupMember(o)))
              : e
                ? ((p = "#Chat_Actions_DropGroupInvite_1v2_Confirm"),
                  (a = e.display_name),
                  (s = ve.createElement(
                    "div",
                    { className: "displayRow" },
                    ve.createElement(
                      "div",
                      { className: "dropGroupInviteDialog_Friend" },
                      ve.createElement("img", {
                        src: i.persona.avatar_url_medium
                      })
                    ),
                    ve.createElement(
                      "div",
                      { className: "dropGroupInviteDialog_Friend" },
                      ve.createElement("img", {
                        src: e.persona.avatar_url_medium
                      })
                    )
                  )))
                : n &&
                  ((p = "#Chat_Actions_DropVoiceInvite_Confirm"),
                  (a = n.name),
                  (s = ve.createElement(
                    "div",
                    { className: "displayRow" },
                    ve.createElement(Qo.cb, null)
                  )));
            var m = null,
              d = !0;
            return (
              Yo.IsInBeta() &&
                ((d = !c && !l),
                l && c
                  ? (m = ve.createElement(
                      "span",
                      { className: "dropGroupInviteDialog_Desc" },
                      Object(re.b)(
                        "#Chat_InviteFriend_Unavailable_Short_NoBetas"
                      )
                    ))
                  : c
                    ? (m = ve.createElement(
                        "span",
                        { className: "dropGroupInviteDialog_Desc" },
                        Object(re.d)(
                          "#Chat_InviteFriend_Unavailable_Short",
                          ve.createElement(
                            "span",
                            { className: "whiteText" },
                            o.display_name
                          )
                        )
                      ))
                    : l &&
                      (m = ve.createElement(
                        "span",
                        { className: "dropGroupInviteDialog_Desc" },
                        Object(re.d)(
                          "#Chat_InviteFriend_Unavailable_Short_InvitedTo",
                          ve.createElement(
                            "span",
                            { className: "whiteText" },
                            e.display_name
                          )
                        )
                      ))),
              ve.createElement(
                Ki,
                { onEscKeypress: this.Cancel },
                ve.createElement(
                  Oi,
                  {
                    classNameContent: "GenericConfirmDialog",
                    onSubmit: this.OnInviteClicked,
                    bCenterVertically: !0
                  },
                  ve.createElement(
                    mi,
                    null,
                    n
                      ? Object(re.b)("#Chat_Actions_InviteFriend_VoiceChat")
                      : Object(re.b)("#Chat_Actions_DropGroupInvite_Title")
                  ),
                  ve.createElement(
                    fi,
                    null,
                    ve.createElement(
                      "div",
                      {
                        className:
                          "dropGroupInviteDialog displayColumn" +
                          (t || n ? " groupInviteHeight" : "")
                      },
                      d &&
                        ve.createElement(
                          "span",
                          { className: "dropGroupInviteDialog_Desc" },
                          Object(re.d)(
                            p,
                            ve.createElement(
                              "span",
                              { className: "highlight" },
                              o.display_name
                            ),
                            ve.createElement(
                              "span",
                              { className: "highlight" },
                              a
                            ),
                            e &&
                              ve.createElement(
                                "span",
                                { className: "highlight" },
                                Object(re.b)("#Chat_You")
                              )
                          )
                        ),
                      m,
                      ve.createElement(
                        "div",
                        {
                          className:
                            "dropGroupInviteDialog_Graphic" +
                            (r ? " isOGGGroup" : "")
                        },
                        ve.createElement(
                          "div",
                          { className: "dropGroupInviteDialog_Friend" },
                          ve.createElement("img", {
                            src: o.persona.avatar_url_medium
                          })
                        ),
                        d
                          ? ve.createElement(
                              "div",
                              { className: "movingArrow" },
                              ve.createElement(Qo.b, { angle: 90 })
                            )
                          : ve.createElement(
                              "div",
                              { className: "staticX" },
                              ve.createElement(Qo.fb, null)
                            ),
                        s,
                        ve.createElement(
                          "div",
                          {
                            className: "addMoreFriendsButton",
                            onClick: this.AddMoreFriends
                          },
                          ve.createElement(
                            "div",
                            null,
                            Object(re.b)("#Chat_Actions_AddMoreFriends")
                          ),
                          ve.createElement("div", { className: "ExpandArrow" })
                        )
                      )
                    )
                  ),
                  ve.createElement(
                    di,
                    null,
                    ve.createElement(
                      vi,
                      null,
                      ve.createElement(
                        Ei,
                        { disabled: c || l, onClick: this.OnInviteClicked },
                        u
                          ? Object(re.b)("#Chat_SendLink")
                          : Object(re.b)("#Chat_Invite"),
                        " "
                      ),
                      ve.createElement(
                        wi,
                        { onClick: this.Cancel },
                        Object(re.b)("#Button_Cancel")
                      )
                    )
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "AddMoreFriends", null),
          R.c([M.a], e.prototype, "Cancel", null),
          R.c([M.a], e.prototype, "OnInviteClicked", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Vl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_fnUnregisterDropComplete = void 0),
            (t.state = {
              dropToInviteFriend: void 0,
              dropGroupToInviteFriend: void 0,
              dropClanToInvite: void 0,
              speakerLabelWidth: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnDragEnter = function(e, t) {
            if (
              (e
                ? AssertMsg(
                    "friend" == e.type ||
                      "chatroomgroup" == e.type ||
                      "clan" == e.type,
                    "Invalid data type passed to FriendChatDialog.OnDrop"
                  )
                : AssertMsg(
                    t,
                    "Invalid data type passed to FriendChatDialog.OnDrop"
                  ),
              !e)
            )
              return !0;
            var n = "friend" == e.type ? e.friend : void 0;
            if (n && n.accountid !== this.props.chatView.chat.accountid_partner)
              return (
                this.m_fnUnregisterDropComplete ||
                  (this.m_fnUnregisterDropComplete = Qu.DragDropManager.RegisterForDropComplete(
                    this.OnDropComplete
                  )),
                this.setState({ dropToInviteFriend: n }),
                !0
              );
            var o = "chatroomgroup" == e.type ? e.group : void 0;
            if (o)
              return (
                this.m_fnUnregisterDropComplete ||
                  (this.m_fnUnregisterDropComplete = Qu.DragDropManager.RegisterForDropComplete(
                    this.OnDropComplete
                  )),
                this.setState({ dropGroupToInviteFriend: o }),
                !0
              );
            var i = "clan" == e.type ? e.clan : void 0;
            return (
              i &&
                (this.m_fnUnregisterDropComplete ||
                  (this.m_fnUnregisterDropComplete = Qu.DragDropManager.RegisterForDropComplete(
                    this.OnDropComplete
                  )),
                this.setState({ dropClanToInvite: i })),
              !0
            );
          }),
          (e.prototype.OnDragLeave = function() {
            (this.state.dropToInviteFriend ||
              this.state.dropGroupToInviteFriend ||
              this.state.dropClanToInvite) &&
              (this.m_fnUnregisterDropComplete.Unregister(),
              (this.m_fnUnregisterDropComplete = void 0),
              this.setState({
                dropToInviteFriend: void 0,
                dropGroupToInviteFriend: void 0,
                dropClanToInvite: void 0
              }));
          }),
          (e.prototype.OnDragOver = function(e) {
            e.dataTransfer.dropEffect = "move";
          }),
          (e.prototype.OnDrop = function(e, t) {
            e
              ? AssertMsg(
                  "friend" == e.type ||
                    "chatroomgroup" == e.type ||
                    "clan" == e.type,
                  "Invalid data type passed to FriendChatDialog.OnDrop"
                )
              : AssertMsg(
                  0 != t.dataTransfer.files.length,
                  "Invalid data type passed to FriendChatDialog.OnDrop"
                );
            var n = this.props.chatView;
            if (e) {
              var o = t.currentTarget.ownerDocument.defaultView,
                i = n.chat.chat_partner,
                r = "friend" == e.type ? e.friend : void 0,
                a = "chatroomgroup" == e.type ? e.group : void 0,
                s = "clan" == e.type ? e.clan : void 0;
              if (r) {
                if (i == r) return;
                this.state.dropToInviteFriend &&
                  (this.m_fnUnregisterDropComplete.Unregister(),
                  (this.m_fnUnregisterDropComplete = void 0),
                  this.setState({ dropToInviteFriend: void 0 })),
                  Qu.DragDropManager.SetDropConsumed(),
                  Fl({ invitee: r, chatview: n, invitedto: i }, zu(this, t), o);
              } else
                (a || s) &&
                  ((this.state.dropGroupToInviteFriend ||
                    this.state.dropClanToInvite) &&
                    (this.m_fnUnregisterDropComplete.Unregister(),
                    (this.m_fnUnregisterDropComplete = void 0),
                    this.setState({
                      dropGroupToInviteFriend: void 0,
                      dropClanToInvite: void 0
                    })),
                  Qu.DragDropManager.SetDropConsumed(),
                  s &&
                    (a = Yo.ChatStore.GetChatRoomGroup(
                      s.GetChatGroupIDIfLoaded()
                    )),
                  Fl({ invitee: i, invitedto: a }, zu(this, t), o));
            } else if (0 != t.dataTransfer.files.length) {
              var c = t.dataTransfer.files[0];
              n.SetFileToUpload(c);
            }
          }),
          (e.prototype.OnDropComplete = function(e) {
            !e &&
              this.state.dropToInviteFriend &&
              ((this.m_fnUnregisterDropComplete = void 0),
              this.setState({ dropToInviteFriend: void 0 }));
          }),
          (e.prototype.OnNameWidthChanged = function(e) {
            this.setState({ speakerLabelWidth: e });
          }),
          (e.prototype.render = function() {
            if (!this.props.chatView) return null;
            var e,
              t = this.props.chatView.chat,
              n = Yo.VoiceStore.BPartnerHasRequestedAndIsInOneOnOneChat(
                t.accountid_partner
              ),
              o = this.props.chatView.BVoiceActive(),
              i = t.GetShowNonFriendWarning(),
              r = {};
            this.props.isActive || (r.display = "none"),
              this.state.dropToInviteFriend
                ? (e = ve.createElement(
                    Jo,
                    {
                      key: "inviteDrop",
                      classNames: "inviteDrop-anim",
                      timeout: 300
                    },
                    ve.createElement(Yl, {
                      chatView: this.props.chatView,
                      friend: this.state.dropToInviteFriend
                    })
                  ))
                : (this.state.dropGroupToInviteFriend ||
                    this.state.dropClanToInvite) &&
                  (e = ve.createElement(
                    Jo,
                    {
                      key: "inviteDrop",
                      classNames: "inviteDrop-anim",
                      timeout: 300
                    },
                    ve.createElement(Jl, {
                      chatView: this.props.chatView,
                      group: this.state.dropGroupToInviteFriend,
                      clan: this.state.dropClanToInvite
                    })
                  ));
            var a = "chatWindow SingleUserChat";
            o &&
              ((a += " VoiceActive"),
              Yo.ChatStore.VoiceChat.IsMicMuted() && (a += " MicMuted")),
              n && (a += " VoiceRequested"),
              i && (a += " NotAFriendOrApproved");
            var s = "chatBody";
            return (
              (this.state.dropToInviteFriend ||
                this.state.dropGroupToInviteFriend ||
                this.state.dropClanToInvite) &&
                (s = "chatBody chatRoomActiveDrop"),
              Yo.SettingsStore.FriendsSettings.bCompactFriendsList &&
                (a += " compactView"),
              ve.createElement(
                ji,
                {
                  "data-activechat": this.props.isActive,
                  style: r,
                  className: a,
                  rgAcceptedTypes: [],
                  bAcceptsFiles: !0,
                  fnDrop: this.OnDrop
                },
                ve.createElement("div", { className: "chatHeader" }),
                this.props.isActive &&
                  ve.createElement(xl, {
                    chatView: this.props.chatView,
                    onNameWidthChanged: this.OnNameWidthChanged
                  }),
                ve.createElement(
                  Xo,
                  null,
                  (o || n) &&
                    ve.createElement(
                      Jo,
                      {
                        key: "OneOnOneVoiceHeader",
                        classNames: "OneOnOneVoice-anim",
                        timeout: 300
                      },
                      ve.createElement(
                        "div",
                        null,
                        ve.createElement(Pl, { chatView: this.props.chatView })
                      )
                    )
                ),
                ve.createElement(
                  ji,
                  {
                    style: r,
                    className: s,
                    rgAcceptedTypes: ["friend", "chatroomgroup", "clan"],
                    bAcceptsFiles: !0,
                    fnDragEnter: this.OnDragEnter,
                    fnDragLeave: this.OnDragLeave,
                    fnDragOver: this.OnDragOver,
                    fnDrop: this.OnDrop
                  },
                  ve.createElement(Xo, null, e),
                  i &&
                    ve.createElement(Kl, {
                      chatView: this.props.chatView,
                      friend: t.chat_partner
                    }),
                  ve.createElement(Nl, {
                    chatView: this.props.chatView,
                    isActive: this.props.isActive,
                    speakerLabelWidth: this.state.speakerLabelWidth,
                    blockInteraction: i
                  }),
                  ve.createElement(Ul, { chatView: this.props.chatView }),
                  ve.createElement("div", { className: "dropTargetBox" })
                ),
                ve.createElement(hc, {
                  key: t.unique_id,
                  chatView: this.props.chatView,
                  isActive: this.props.isActive,
                  disabled: i
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          R.c([M.a], e.prototype, "OnDropComplete", null),
          R.c([M.a], e.prototype, "OnNameWidthChanged", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      xl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.SpeakerLabel = function(e) {
            e && this.props.onNameWidthChanged(e.clientWidth);
          }),
          (t.prototype.render = function() {
            var e = this.props.chatView.chat,
              t = Yo.SettingsStore.FriendsSettings.nChatFontSize,
              n = "speakerLabelWidthContainer";
            return (
              t == wa.k_EChatFontSizeSmall
                ? (n += " smallChatFont")
                : t == wa.k_EChatFontSizeLarge && (n += " largeChatFont"),
              e.chat_partner.is_ready && e.self.is_ready
                ? ve.createElement(
                    "div",
                    { className: n, ref: this.SpeakerLabel },
                    ve.createElement(
                      "div",
                      { className: "nameWidthLabel" },
                      e.self.display_name + ":"
                    ),
                    ve.createElement(
                      "div",
                      { className: "nameWidthLabel" },
                      e.chat_partner.display_name + ":"
                    )
                  )
                : null
            );
          }),
          R.c([M.a], t.prototype, "SpeakerLabel", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Ul = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.AddFriendClick = function(e) {
            this.ContinueCreateChat(zu(this, e), Yu(e));
          }),
          (t.prototype.AddFriendClickNotInBeta = function(o) {
            return R.b(this, void 0, void 0, function() {
              var t, n;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return (
                      (t = zu(this, o)),
                      (n = Yu(o)),
                      Yo.IsInBeta()
                        ? (er(
                            n,
                            "",
                            Object(re.b)(
                              "#Chat_InviteFriend_Unavailable",
                              this.props.chatView.chat.chat_partner.display_name
                            )
                          ),
                          [3, 3])
                        : [3, 1]
                    );
                  case 1:
                    return [
                      4,
                      $i(
                        n,
                        "",
                        Object(re.b)(
                          "#Chat_InviteFriend_Unavailable_Released",
                          this.props.chatView.chat.chat_partner.display_name
                        ),
                        Object(re.b)("#Chat_StillInVoiceDialog_KeepChatting")
                      )
                    ];
                  case 2:
                    e.sent() && this.ContinueCreateChat(t, n), (e.label = 3);
                  case 3:
                    return [2];
                }
              });
            });
          }),
          (t.prototype.ContinueCreateChat = function(e, t) {
            ds(e, t, this.props.chatView, !0);
          }),
          (t.prototype.render = function() {
            var e = this.props.chatView.chat.chat_partner;
            return ve.createElement(
              "div",
              {
                title: Object(re.b)("#Chat_AddFriend_Hint"),
                className: "inviteAnotherFriendButton",
                onClick: e.is_in_beta
                  ? this.AddFriendClick
                  : this.AddFriendClickNotInBeta
              },
              ve.createElement(Qo.w, null)
            );
          }),
          R.c([M.a], t.prototype, "AddFriendClick", null),
          R.c([M.a], t.prototype, "AddFriendClickNotInBeta", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      jl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_msWentInactive = 0),
            (t.m_bShownTabIsGroupChat = !0),
            (t.m_keyEventListener = "keydown"),
            (t.m_refBroadcastContainer = ve.createRef()),
            (t.state = { dropToInviteFriend: void 0, bShowBothChats: !1 }),
            t.props.popup &&
              t.props.popup.addEventListener(
                t.m_keyEventListener,
                t.OnHTMLKeyEvent
              ),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnDragEnter = function(e, t) {
            if (
              (AssertMsg(
                (e && "friend" == e.type) || t,
                "Invalid data type passed to ChatRoomGroupDialog.OnDragEnter"
              ),
              e)
            ) {
              var n = e;
              n.friend &&
                n.sourceContext.group != this.props.groupView.GetGroup() &&
                this.setState({ dropToInviteFriend: n.friend });
            }
            return !0;
          }),
          (e.prototype.OnDragLeave = function() {
            this.state.dropToInviteFriend &&
              this.setState({ dropToInviteFriend: void 0 });
          }),
          (e.prototype.OnDragOver = function(e) {
            e.dataTransfer.dropEffect = "move";
          }),
          (e.prototype.OnDrop = function(e, t) {
            AssertMsg(
              (e && "friend" == e.type) || 0 != t.dataTransfer.files.length,
              "Invalid data type passed to ChatRoomGroupDialog.OnDrop"
            );
            var n = this.props.groupView.GetChatView();
            if (e && "friend" == e.type) {
              var o = e;
              if (o.friend) {
                this.state.dropToInviteFriend &&
                  this.setState({ dropToInviteFriend: void 0 }),
                  Qu.DragDropManager.SetDropConsumed();
                var i = t.currentTarget.ownerDocument.defaultView;
                o.sourceContext.group != this.props.groupView.GetGroup() &&
                  Fl(
                    {
                      invitee: o.friend,
                      chatview: null,
                      invitedto: this.props.groupView.GetGroup()
                    },
                    zu(this, t),
                    i
                  );
              }
            } else if (0 != t.dataTransfer.files.length) {
              var r = t.dataTransfer.files[0];
              n.SetFileToUpload(r);
            }
          }),
          (e.prototype.componentWillReceiveProps = function(e) {
            this.props.isActive && !e.isActive
              ? this.OnBecameInactive()
              : e.isActive && this.OnBecameActive();
          }),
          (e.prototype.OnBecameInactive = function() {
            (this.m_msWentInactive = performance.now()),
              (this.m_iIntervalInactive = SetBackgroundTimeout(
                this.forceUpdate.bind(this),
                10100
              )),
              (this.m_iIntervalVeryInactive = SetBackgroundTimeout(
                this.forceUpdate.bind(this),
                60100
              ));
          }),
          (e.prototype.OnBecameActive = function() {
            (this.m_msWentInactive = 0), this.ClearIntervals();
          }),
          (e.prototype.GetTitleBarDragDropProps = function() {
            var e = { rgAcceptedTypes: [], bAcceptsFiles: !0 };
            return (e.fnDrop = this.OnDrop), e;
          }),
          (e.prototype.GetChatBodyDragDropProps = function() {
            var e = { rgAcceptedTypes: ["friend"], bAcceptsFiles: !0 };
            return (
              (e.fnDragEnter = this.OnDragEnter),
              (e.fnDragLeave = this.OnDragLeave),
              (e.fnDragOver = this.OnDragOver),
              (e.fnDrop = this.OnDrop),
              e
            );
          }),
          (e.prototype.ClearIntervals = function() {
            this.m_iIntervalInactive &&
              (ClearBackgroundTimeout(this.m_iIntervalInactive),
              (this.m_iIntervalInactive = void 0)),
              this.m_iIntervalVeryInactive &&
                (ClearBackgroundTimeout(this.m_iIntervalVeryInactive),
                (this.m_iIntervalVeryInactive = void 0));
          }),
          (e.prototype.OnHTMLKeyEvent = function(e) {
            if (
              G.a.IN_CLIENT &&
              this.props.isActive &&
              e.altKey &&
              !e.ctrlKey &&
              !e.shiftKey
            ) {
              var t = this.props.groupView;
              if (!t) return;
              38 === e.keyCode && t.SelectPreviousChannel(),
                40 === e.keyCode && t.SelectNextChannel();
            }
          }),
          (e.prototype.componentDidMount = function() {
            (this.props.popup ? this.props.popup : window).addEventListener(
              "resize",
              this.OnLayoutChange
            );
          }),
          (e.prototype.componentWillUnmount = function() {
            this.ClearIntervals(),
              this.props.popup &&
                this.props.popup.removeEventListener(
                  this.m_keyEventListener,
                  this.OnHTMLKeyEvent
                ),
              (this.props.popup
                ? this.props.popup
                : window
              ).removeEventListener("resize", this.OnLayoutChange);
          }),
          (e.prototype.CalculateBroadcastSectionStyles = function(e) {
            if (this.props.groupView.m_bChatHidden)
              return { width: "100%", height: "100%" };
            var t = Qu.UIDisplayPrefs,
              n = t.nWatchPartyBroadcastHeightPercentage,
              o = t.nWatchPartyBroadcastWidthPercentage,
              i = {};
            if (e) {
              var r = n || 66;
              if (((i.height = r + "%"), this.m_elMainContent)) {
                var a = this.m_elMainContent,
                  s = ln(
                    r,
                    1,
                    (9 / 16 * a.clientWidth + 50) / a.clientHeight * 100
                  );
                i.height = s + "%";
              }
            } else i.width = o ? o + "%" : "66%";
            return i;
          }),
          (e.prototype.ShouldShowVerticalBroadcastChat = function() {
            return void 0 !== this.props.groupView.m_bShowVerticalBroadcastChat
              ? this.props.groupView.m_bShowVerticalBroadcastChat
              : !!this.m_elMainContent &&
                  this.m_elMainContent.clientHeight /
                    this.m_elMainContent.clientWidth >
                    5 / 7;
          }),
          (e.prototype.OnLayoutChange = function() {
            this.forceUpdate();
          }),
          (e.prototype.OnGrabberMouseDown = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            t.addEventListener("mousemove", this.HandleMouseMove),
              t.addEventListener("mouseup", this.UnregisterDragEvents),
              this.setState({ bDraggingChatGrabber: !0 });
          }),
          (e.prototype.HandleMouseMove = function(e) {
            e.preventDefault(), e.stopPropagation();
            var t = this.m_refBroadcastContainer.current.getBoundingClientRect(),
              n = this.m_refBroadcastContainer.current.parentElement.getBoundingClientRect(),
              o = this.ShouldShowVerticalBroadcastChat(),
              i = o ? t.top : t.left,
              r = ln(
                ((o ? e.clientY : e.clientX) - i) /
                  (o ? n.height : n.width) *
                  100,
                1,
                100
              ),
              a = o
                ? "nWatchPartyBroadcastHeightPercentage"
                : "nWatchPartyBroadcastWidthPercentage";
            Qu.SetUIDisplayPref(a, r);
          }),
          (e.prototype.UnregisterDragEvents = function(e) {
            e.view.removeEventListener("mousemove", this.HandleMouseMove),
              e.view.removeEventListener("mouseup", this.UnregisterDragEvents),
              this.setState({ bDraggingChatGrabber: !1 });
          }),
          (e.prototype.OnLocalStreamChange = function(e) {
            this.props.groupView.SetLocalBroadcastId(e);
          }),
          (e.prototype.ShowBroadcast = function() {
            this.props.groupView.ShowBroadcast();
          }),
          (e.prototype.HideChat = function() {
            this.props.groupView.SetChatHidden(!0);
          }),
          (e.prototype.ShowChat = function() {
            this.props.groupView.SetChatHidden(!1);
          }),
          (e.prototype.ToggleVerticalBroadcastChat = function() {
            this.props.groupView.SetVerticalBroadcastChat(
              !this.ShouldShowVerticalBroadcastChat()
            ),
              this.props.groupView.SetChatHidden(!1);
          }),
          (e.prototype.SetMainContentRef = function(e) {
            (this.m_elMainContent = e), this.OnLayoutChange();
          }),
          (e.prototype.ToggleShowBothChats = function() {
            this.state.bShowBothChats
              ? this.m_bShownTabIsGroupChat &&
                this.state.bShowBothChats &&
                this.props.groupView.SetGlobalBroadcastChatShown(!1)
              : ((this.m_bShownTabIsGroupChat = !this.props.groupView
                  .m_bShowGlobalChat),
                this.props.groupView.SetGlobalBroadcastChatShown(!0)),
              this.setState({ bShowBothChats: !this.state.bShowBothChats });
          }),
          (e.prototype.RenderInnerChatTabs = function() {
            var e = this.props.groupView,
              t = e.GetGroup();
            return ve.createElement(
              "div",
              { className: "ChatBodyControls" },
              ve.createElement(
                "div",
                {
                  className: "Close",
                  onClick: this.HideChat,
                  title: Object(re.b)("#Broadcast_View_HideChat")
                },
                ve.createElement(Qo.t, { showChat: !1 })
              ),
              ve.createElement(
                "div",
                { className: "InnerChatTabs" },
                ve.createElement(
                  "div",
                  {
                    className: Za(
                      "InnerChatTab",
                      !e.m_bShowGlobalChat && "Active"
                    ),
                    onClick: function() {
                      return e.SetGlobalBroadcastChatShown(!1);
                    }
                  },
                  ve.createElement(na, { group: t }),
                  ve.createElement(ss, { group: t, micro: !0 }),
                  ve.createElement(
                    "span",
                    { className: "InnerChatTabLabel" },
                    Object(re.b)("#Broadcast_Chat_GroupChatTab", t.name)
                  )
                ),
                (!this.state.bShowBothChats ||
                  (this.state.bShowBothChats &&
                    this.ShouldShowVerticalBroadcastChat())) &&
                  ve.createElement(
                    "div",
                    {
                      className: Za(
                        "InnerChatTab",
                        e.m_bShowGlobalChat && "Active"
                      ),
                      onClick: function() {
                        return e.SetGlobalBroadcastChatShown(!0);
                      }
                    },
                    ve.createElement(Qo.q, null),
                    ve.createElement(
                      "span",
                      { className: "InnerChatTabLabel" },
                      Object(re.b)("#Broadcast_Chat_PublicChatTab")
                    )
                  )
              ),
              ve.createElement(
                "div",
                {
                  className: "showBothTabs",
                  onClick: this.ToggleShowBothChats,
                  title: Object(re.b)(
                    this.state.bShowBothChats
                      ? "#Broadcast_View_ShowSingleChats"
                      : "#Broadcast_View_ShowBothChats"
                  )
                },
                ve.createElement(Qo.Q, null)
              )
            );
          }),
          (e.prototype.render = function() {
            if (!this.props.groupView || !this.props.groupView.GetChatView())
              return null;
            var e = this.props.groupView.GetGroup(),
              t = this.props.groupView,
              n = t.GetSelectedChatView(),
              o = t.GetPopoverChatView(),
              i = n.chat,
              r = this.state.bShowBothChats && t.isBroadcastShown,
              a = t.m_bShowGlobalChat,
              s = (a && r) || (!a && !r),
              c = (r && t.isBroadcastShown) || (!r && a),
              l = null;
            this.state.dropToInviteFriend &&
              (l = ve.createElement(
                Jo,
                {
                  key: "inviteDrop",
                  classNames: "inviteDrop-anim",
                  timeout: 300
                },
                ve.createElement(Yl, {
                  chatView: n,
                  friend: this.state.dropToInviteFriend
                })
              ));
            var p = !1,
              u = null,
              m = this.ShouldShowVerticalBroadcastChat(),
              d = t.m_bChatHidden;
            if (IsFeatureBroadcastEnabled())
              if (e.watching_broadcast_steamid && t.isBroadcastShown) {
                var h = Qu.UIDisplayPrefs,
                  _ = (h.nWatchPartyBroadcastHeightPercentage,
                  h.nWatchPartyBroadcastWidthPercentage,
                  this.CalculateBroadcastSectionStyles(m));
                (u = ve.createElement(
                  ve.Fragment,
                  null,
                  ve.createElement(Wl, {
                    ref: this.m_refBroadcastContainer,
                    steamID: e.watching_broadcast_steamid.ConvertTo64BitString(),
                    localSteamID: t.m_strLocalBroadcastId,
                    onRequestClose: t.HideBroadcast,
                    onLocalStreamChange: this.OnLocalStreamChange,
                    actions: [
                      ve.createElement("div", {
                        key: "ChatPosToggle",
                        onClick: this.ToggleVerticalBroadcastChat,
                        title:
                          "" +
                          (m
                            ? Object(re.b)("#Broadcast_View_Stack_H")
                            : Object(re.b)("#Broadcast_View_Stack_V")),
                        className:
                          "BroadcastChatPositionToggle " +
                          (m ? "right" : "bottom")
                      })
                    ],
                    style: _,
                    onTheaterMode: t.ToggleTheaterModeBroadcastChat
                  }),
                  !d &&
                    ve.createElement("div", {
                      className:
                        "BroadcastChatDivider " +
                        (m ? "vertical" : "horizontal"),
                      onMouseDown: this.OnGrabberMouseDown
                    }),
                  d &&
                    ve.createElement(Hl, {
                      onClick: this.ShowChat,
                      edge: m ? "bottom" : "right"
                    })
                )),
                  (p = !0);
              } else p = !1;
            var f = !1,
              g = !1,
              b = {};
            if (this.props.isActive) i.LoadChatLogs();
            else {
              b.display = "none";
              var v = this.m_msWentInactive
                ? performance.now() - this.m_msWentInactive
                : 6e4;
              1e4 <= v && (f = !0), 6e4 <= v && !u && (g = !0);
            }
            var S = "chatWindow MultiUserChat",
              y = "ChatRoomGroupDialog_contents";
            o && (y += " InsetWindowOpen"),
              r && (y += " BothChatsDisplayed"),
              e.IsNamedGroupChat() && (S += " namedGroup");
            var C = "chatBody";
            this.state.dropToInviteFriend &&
              (C = "chatBody chatRoomActiveDrop"),
              Yo.SettingsStore.FriendsSettings.bCompactFriendsList &&
                (S += " compactView"),
              p && (S += " broadcastVisible");
            var I,
              O = ve.createElement(_a, {
                groupView: this.props.groupView,
                inactive: f
              }),
              E =
                t.isBroadcastShown && ((!r && t.m_bShowGlobalChat) || d)
                  ? null
                  : ve.createElement(hc, {
                      key: i.unique_id,
                      chatView: t.GetActiveChatView(),
                      isActive: this.props.isActive,
                      disabled: !1
                    }),
              w = ve.createElement(
                ji,
                R.a(
                  { style: b, className: "chatHistoryAndMembers" },
                  this.GetChatBodyDragDropProps()
                ),
                ve.createElement(Xo, null, l),
                ve.createElement(
                  "div",
                  { className: "displayColumn fullWidth" },
                  ve.createElement(
                    "div",
                    { className: "displayRow minHeightZero" },
                    ve.createElement(
                      "div",
                      { className: "ChatRoomGroupDialog_history" },
                      ve.createElement(Nl, {
                        chatView: n,
                        isActive: this.props.isActive
                      }),
                      ve.createElement(
                        Xo,
                        null,
                        ve.createElement(ql, { groupView: t })
                      )
                    ),
                    ve.createElement("div", { className: "dropTargetBox" }),
                    O
                  ),
                  E
                )
              );
            if (e.watching_broadcast_steamid && t.isBroadcastShown) {
              var M = 4;
              G.a.STEAM_TV && (M = 2);
              var D = ve.createElement(el, {
                steamID: e.watching_broadcast_steamid.ConvertTo64BitString(),
                watchLocation: M,
                hidden: !t.m_bShowGlobalChat,
                className: this.state.bDraggingChatGrabber
                  ? "avoidEvents"
                  : void 0
              });
              I = ve.createElement(ve.Fragment, null, D);
            }
            var T = "chatStack " + (m ? "displayRow" : "displayColumn");
            return (
              c && (T += " GlobalChatVisible"),
              s && (T += " GroupChatVisible"),
              ve.createElement(
                ji,
                R.a(
                  {
                    "data-activechat": this.props.isActive,
                    style: b,
                    className: S
                  },
                  this.GetTitleBarDragDropProps()
                ),
                !g &&
                  ve.createElement(
                    "div",
                    { className: "chatHeader titleBarContainer" },
                    ve.createElement("div", {
                      className: "chatHeaderGradient"
                    }),
                    ve.createElement(ts, {
                      groupView: t,
                      onBroadcastPreviewClick: this.ShowBroadcast
                    }),
                    ve.createElement("div", { className: "disconnectBlocker" })
                  ),
                e.readyToRender &&
                  !g &&
                  ve.createElement(
                    "div",
                    { className: y },
                    ve.createElement(ha, { groupView: t, inactive: f }),
                    ve.createElement(
                      "div",
                      {
                        className:
                          "ChatRoomGroup_MainAndChatEntry displayColumn",
                        ref: this.SetMainContentRef
                      },
                      ve.createElement(
                        "div",
                        {
                          className:
                            "ChatRoomGroup_Main_ContentAndMembers displayRow"
                        },
                        ve.createElement(
                          "div",
                          {
                            className:
                              "ChatRoomGroup_Main_Content " +
                              (m ? "Vertical" : "Horizontal") +
                              " " +
                              (d ? "chatHidden" : "")
                          },
                          u,
                          (!t.m_bChatHidden || !t.isBroadcastShown) &&
                            ve.createElement(
                              "div",
                              { className: C },
                              t.isBroadcastShown && this.RenderInnerChatTabs(),
                              ve.createElement(
                                "div",
                                { className: T },
                                w,
                                r &&
                                  ve.createElement("div", {
                                    className: "BothChatsSeperator"
                                  }),
                                r &&
                                  !this.ShouldShowVerticalBroadcastChat() &&
                                  ve.createElement(
                                    "div",
                                    {
                                      className: "InnerChatTab",
                                      onClick: function() {
                                        return t.SetGlobalBroadcastChatShown(
                                          !0
                                        );
                                      }
                                    },
                                    ve.createElement(Qo.q, null),
                                    ve.createElement(
                                      "span",
                                      { className: "InnerChatTabLabel" },
                                      Object(re.b)(
                                        "#Broadcast_Chat_PublicChatTab"
                                      )
                                    )
                                  ),
                                I
                              ),
                              !s && t.isBroadcastShown && E
                            )
                        )
                      )
                    )
                  ),
                !e.readyToRender &&
                  !g &&
                  ve.createElement(
                    "div",
                    { className: y },
                    ve.createElement(Ea, {
                      string: Object(re.b)("#Chat_ChatRoomGroup_Requesting")
                    })
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnDragEnter", null),
          R.c([M.a], e.prototype, "OnDragLeave", null),
          R.c([M.a], e.prototype, "OnDragOver", null),
          R.c([M.a], e.prototype, "OnDrop", null),
          R.c([M.a], e.prototype, "OnHTMLKeyEvent", null),
          R.c([M.a], e.prototype, "ShouldShowVerticalBroadcastChat", null),
          R.c([M.a], e.prototype, "OnLayoutChange", null),
          R.c([M.a], e.prototype, "OnGrabberMouseDown", null),
          R.c([M.a], e.prototype, "HandleMouseMove", null),
          R.c([M.a], e.prototype, "UnregisterDragEvents", null),
          R.c([M.a], e.prototype, "OnLocalStreamChange", null),
          R.c([M.a], e.prototype, "ShowBroadcast", null),
          R.c([M.a], e.prototype, "HideChat", null),
          R.c([M.a], e.prototype, "ShowChat", null),
          R.c([M.a], e.prototype, "ToggleVerticalBroadcastChat", null),
          R.c([M.a], e.prototype, "SetMainContentRef", null),
          R.c([M.a], e.prototype, "ToggleShowBothChats", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Hl = function(e) {
        var t = e.onClick,
          n = e.edge;
        return ve.createElement(
          "div",
          {
            className: Za("BroadcastChatExpander", n),
            onClick: t,
            title: Object(re.b)("#Broadcast_View_ShowChat")
          },
          ve.createElement(Qo.t, { showChat: !0 })
        );
      },
      Wl = ve.forwardRef(function(e, t) {
        var n = e.localSteamID,
          o = e.steamID,
          i = e.style,
          r = e.onRequestClose,
          a = e.actions,
          s = e.onTheaterMode,
          c = e.onLocalStreamChange,
          l = n || o,
          p = 4;
        return (
          G.a.STEAM_TV && (p = 2),
          ve.createElement(
            "div",
            {
              ref: t,
              style: R.a({ display: "flex", flexDirection: "column" }, i)
            },
            ve.createElement(
              "div",
              { className: "BroadcastSection" },
              ve.createElement(Fc, {
                key: l,
                steamID: l,
                watchLocation: p,
                onRequestClose: r,
                actions: a,
                onTheaterMode: s
              }),
              ve.createElement("div", { className: "videoContainerSizer" })
            ),
            ve.createElement(
              "div",
              { className: "BroadcastDetailsSection" },
              ve.createElement($c, { steamID: l, onLocalStreamChange: c })
            )
          )
        );
      }),
      zl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.broadcastView;
            if (!e) return null;
            var t = {};
            return (
              this.props.isActive || (t.display = "none"),
              ve.createElement(il, {
                style: t,
                broadcastView: e,
                popup: this.props.popup
              })
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ql = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnTextChannelCloseClick = function(e) {
            this.props.groupView.ClosePopoverChat();
          }),
          (t.prototype.OnChatHistoryRef = function(e) {
            e && e.Focus();
          }),
          (t.prototype.render = function() {
            var e = this.props.groupView.GetPopoverChatView();
            return e
              ? ve.createElement(
                  Jo,
                  {
                    key: "quickChat",
                    classNames: "chatWindow-anim",
                    timeout: 320
                  },
                  ve.createElement(
                    "div",
                    { className: "VoiceRoomChatHistory" },
                    ve.createElement(
                      "div",
                      { className: "VoiceRoomChatWindow" },
                      ve.createElement(
                        "div",
                        { className: "VoiceRoomChatTitle" },
                        ve.createElement(
                          "div",
                          { className: "VoiceRoomTitleLabels" },
                          ve.createElement(
                            "div",
                            { className: "VoiceChatTextChannelName" },
                            Object(re.b)("#Chat_Scratch_Pad")
                          )
                        ),
                        ve.createElement(
                          "div",
                          {
                            className: "MinimizeTextChat",
                            onClick: this.OnTextChannelCloseClick
                          },
                          ve.createElement(Qo.fb, null)
                        )
                      ),
                      ve.createElement(
                        "div",
                        { className: "VoiceChatTextChannelDesc" },
                        Object(re.b)("#Chat_Scratch_Pad_Desc")
                      ),
                      ve.createElement(Nl, {
                        chatView: e,
                        isActive: !0,
                        ref: this.OnChatHistoryRef
                      })
                    )
                  )
                )
              : null;
          }),
          R.c([M.a], t.prototype, "OnTextChannelCloseClick", null),
          R.c([M.a], t.prototype, "OnChatHistoryRef", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Kl = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.OnBlock = function() {
            Yo.FriendStore.BlockPlayer(this.props.friend, !1),
              Yo.UIStore.CloseTabByID(this.props.chatView.GetUniqueID());
          }),
          (e.prototype.OnAllow = function() {
            Yo.FriendStore.SetApprovedNonFriendMessages(
              this.props.friend.accountid
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(
              "div",
              { className: "NotAFriendMessage" },
              ve.createElement(
                "div",
                { className: "NotAFriendBody" },
                ve.createElement(
                  "div",
                  { className: "Exclamation" },
                  ve.createElement(Qo.d, null)
                ),
                ve.createElement(
                  "div",
                  { className: "Explanation" },
                  ve.createElement(
                    "div",
                    { className: "ExplanationHeader" },
                    Object(re.b)("#DirectMessageFromNonFriend")
                  ),
                  ve.createElement(
                    "div",
                    { className: "ExplanationBody" },
                    Object(re.b)("#DirectMessageFromNonFriendNote")
                  ),
                  ve.createElement(
                    fr,
                    {
                      href:
                        "https://support.steampowered.com/kb_article.php?ref=1266-OAFV-8478",
                      className: "ExplanationMoreInfo"
                    },
                    "More Information"
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "Buttons" },
                  ve.createElement(
                    "button",
                    {
                      className: "NotAFriendActionButton",
                      onClick: this.OnBlock
                    },
                    Object(re.b)("#NonFriendAction_Block")
                  ),
                  ve.createElement(
                    "button",
                    {
                      className: "NotAFriendActionButton",
                      onClick: this.OnAllow
                    },
                    Object(re.b)("#NonFriendAction_Allow")
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnBlock", null),
          R.c([M.a], e.prototype, "OnAllow", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Yl = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = !1;
            return (
              this.props.chatView.chat instanceof Tt && (e = !0),
              ve.createElement(
                "div",
                { className: "chatModalCover inviteDrop" },
                ve.createElement(
                  Ki,
                  null,
                  ve.createElement(
                    mi,
                    null,
                    e
                      ? Object(re.b)("#Chat_DropToInviteGroup")
                      : Object(re.b)("#Chat_DropToInvite")
                  ),
                  ve.createElement(
                    Ci,
                    null,
                    ve.createElement(
                      _i,
                      null,
                      ve.createElement(Qs, {
                        friend: this.props.friend,
                        context: null,
                        avatarQualityFull: !0
                      })
                    )
                  )
                )
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Jl = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.render = function() {
            var e = "";
            return (
              this.props.group
                ? (e = this.props.group.name)
                : this.props.clan && (e = this.props.clan.name),
              ve.createElement(
                "div",
                {
                  className: "chatModalCover inviteDrop DropGroupToInviteFriend"
                },
                ve.createElement(
                  Ki,
                  null,
                  ve.createElement(
                    mi,
                    null,
                    Object(re.b)("#Chat_DropGroupToInviteFriend")
                  ),
                  ve.createElement(
                    Ci,
                    null,
                    ve.createElement(
                      _i,
                      { className: "avatarHolder" },
                      this.props.clan
                        ? ve.createElement(as, {
                            clan: this.props.clan,
                            large: !0
                          })
                        : ve.createElement(ss, {
                            group: this.props.group,
                            large: !0
                          }),
                      ve.createElement("div", { className: "dropGroupName" }, e)
                    )
                  )
                )
              )
            );
          }),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Xl = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = !1;
            if (!(this.props.chatView.chat instanceof zt)) return null;
            var t = this.props.chatView.chat;
            return (
              t.is_friend_typing && (e = !0),
              ve.createElement(
                "div",
                {
                  className:
                    "FriendChatTypingNotification" +
                    (e ? " FriendIsTyping" : "")
                },
                Object(re.b)("#Friend_Chat_Typing", t.chat_partner.display_name)
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      Ql = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_fnExistingPopupInitializer = void 0),
            (t.BindResizeGrip = t.BindResizeGrip.bind(t)),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.BindResizeGrip = function(e) {
            var t = 0,
              n = 0;
            if (e) {
              var o = e.getBoundingClientRect(),
                i = e.ownerDocument.defaultView;
              o &&
                i &&
                ((t = Math.ceil(i.innerWidth - o.left)),
                (n = Math.ceil(i.innerHeight - o.top)));
            }
            var r = this.props.popup;
            r.SteamClient &&
              r.SteamClient.Window &&
              r.SteamClient.Window.SetResizeGrip &&
              r.SteamClient.Window.SetResizeGrip(t, n);
          }),
          (e.prototype.componentWillUnmount = function() {
            this.props.popup.SteamClient.Window.SetResizeGrip(0, 0);
          }),
          (e.prototype.render = function() {
            return ve.createElement("div", {
              className: "window_resize_grip",
              ref: this.BindResizeGrip
            });
          }),
          e
        );
      })(ve.PureComponent),
      Zl = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_refTextInput = null), (t.state = { error: 1, strPIN: "" }), t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidMount = function() {
            this.m_refTextInput.focus();
          }),
          (e.prototype.BindTextInput = function(e) {
            this.m_refTextInput = e;
          }),
          (e.prototype.OnPINInput = function(e) {
            this.setState({ strPIN: e.target.value });
          }),
          (e.prototype.onOK = function(e) {
            var t = this;
            return (
              e.preventDefault(),
              Yo.ParentalStore.Unlock(this.state.strPIN).then(function(e) {
                1 != e && t.setState({ error: e });
              }),
              !0
            );
          }),
          (e.prototype.render = function() {
            var e = "";
            switch (this.state.error) {
              case 1:
                break;
              case 25:
                e = Object(re.b)("#FamilyView_TooManyAttempts");
                break;
              default:
                e = Object(re.b)("#FamilyView_BadPIN");
            }
            return ve.createElement(
              "div",
              null,
              ve.createElement(
                "div",
                { className: "FamilyViewTitle" },
                Object(re.b)("#FamilyView_Title")
              ),
              ve.createElement(
                "div",
                { className: "FamilyViewInstructions" },
                Object(re.b)("#FamilyView_Unlock_Instructions")
              ),
              ve.createElement(
                "form",
                { onSubmit: this.onOK },
                ve.createElement("input", {
                  type: "password",
                  maxLength: 4,
                  className: "pinInput",
                  autoComplete: "current-pin",
                  ref: this.BindTextInput,
                  value: this.state.strPIN,
                  onChange: this.OnPINInput
                }),
                ve.createElement(
                  "button",
                  { type: "submit" },
                  Object(re.b)("#Button_OK")
                )
              ),
              e && ve.createElement("p", { className: "error_text" }, e)
            );
          }),
          R.c([M.a], e.prototype, "BindTextInput", null),
          R.c([M.a], e.prototype, "OnPINInput", null),
          R.c([M.a], e.prototype, "onOK", null),
          e
        );
      })(ve.Component);
    n("AAD4");
    var $l = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props,
              t = e.browserContext,
              n = e.friends,
              o = e.chats,
              i = e.elTarget,
              r = new xu(i.ownerDocument.defaultView),
              a = null;
            return (
              Yo.ready_to_render &&
                ((a = Yo.UIStore.GetDefaultTabSetForContext(t)),
                Yo.UIStore.GetPerContextChatData(t).SetFriendsListWindow(r)),
              [
                ve.createElement(
                  Jo,
                  {
                    key: "throbber",
                    in: !Yo.ready_to_render,
                    classNames: "throbberContainer",
                    timeout: 2500
                  },
                  ve.createElement(
                    "div",
                    { className: "throbberContainer" },
                    ve.createElement(
                      "div",
                      { className: "WaitingForInterFaceReadyContainer" },
                      ve.createElement(
                        "div",
                        { className: "WaitingForInterFaceReadyThrobber" },
                        ve.createElement(Ea, {
                          className: "Throbber_Blur",
                          size: "xlarge"
                        }),
                        ve.createElement(Ea, { size: "xlarge" })
                      )
                    )
                  )
                ),
                Yo.ready_to_render
                  ? ve.createElement(op, {
                      key: "interface",
                      friends: n,
                      chats: o,
                      tabset: a,
                      container: r
                    })
                  : null
              ]
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ep = (function(i) {
        function e(e, t, n, o) {
          return i.call(this, e, t, n, o) || this;
        }
        return (
          R.d(e, i),
          (e.prototype.GetSavedDimensionsKey = function() {
            if (this.BIsInOverlay()) {
              var e = Yo.UIStore.GetPerContextChatData(
                this.m_rgParams.target_browser
              ).screen_info;
              return (
                "Overlay_" +
                (e && e.width && e.height
                  ? e.width + "x" + e.height + "_"
                  : "") +
                this.m_strSavedDimensionsKey
              );
            }
            return this.m_strSavedDimensionsKey;
          }),
          e
        );
      })(Wi.b),
      tp = (function(s) {
        function e(e, t, n, o) {
          var i = this,
            r = Wi.c.Resizable;
          o && (r |= Wi.c.Minimized);
          var a = {
            dimensions: { width: 300, height: 650 },
            minWidth: 226,
            minHeight: 400,
            title: Object(re.b)("#WindowTitle_FriendsList"),
            html_class: "client_chat_frame fullheight SavedDimensionsPopup",
            body_class: "fullheight",
            target_browser: 0 < n.m_unPID ? n : void 0,
            eCreationFlags: r
          };
          return (
            ((i =
              s.call(
                this,
                "friendslist",
                "PopupFriendsListDimensions",
                a,
                !1
              ) || this).m_friends = e),
            (i.m_chats = t),
            Qu.m_strLoaderWindowRestoreDetails &&
              (i.SaveWindowPosition(Qu.m_strLoaderWindowRestoreDetails),
              (Qu.m_strLoaderWindowRestoreDetails = void 0)),
            i
          );
        }
        return (
          R.d(e, s),
          (e.prototype.Render = function(e, t) {
            t.setAttribute("class", "fullheight popup_chat_frame");
            var n = new xu(e),
              o = this.browser_info || qo,
              i = Yo.UIStore.GetDefaultTabSetForContext(o);
            (this.m_browserContext = o),
              W.render(
                ve.createElement(op, {
                  popup: this,
                  friends: this.m_friends,
                  chats: this.m_chats,
                  tabset: i,
                  container: n
                }),
                t
              );
          }),
          (e.prototype.OnResizeComplete = function(e) {
            s.prototype.OnResizeComplete.call(this, e),
              window.parent.postMessage(
                { message: "FriendsListRestoreDetailsChanged", data: e },
                "https://steamloopback.host"
              );
          }),
          (e.prototype.OnClose = function() {
            s.prototype.OnClose.call(this),
              window.parent.postMessage(
                {
                  message: "FriendsListRestoreDetailsChanged",
                  data: this.m_rgParams.strRestoreDetails
                },
                "https://steamloopback.host"
              ),
              Yo.OnFriendsListClosed(this.m_browserContext);
          }),
          e
        );
      })(ep);
    function np(e) {
      var t = [],
        n = Yu(e),
        o = n.getSelection(),
        i = o && 0 < o.rangeCount && 0 < o.toString().length,
        r = e.target,
        a = !1;
      if (
        (r &&
          "tagName" in r &&
          (("INPUT" != r.tagName && "TEXTAREA" != r.tagName) || (a = !0)),
        (n.document.queryCommandEnabled("cut") || (i && a)) &&
          t.push(
            ve.createElement(
              mr.d,
              {
                key: "cut",
                onSelected: function() {
                  n.document.execCommand("cut");
                }
              },
              Object(re.b)("#ContextMenu_Cut")
            )
          ),
        (document.queryCommandEnabled("copy") || i) &&
          t.push(
            ve.createElement(
              mr.d,
              {
                key: "copy",
                onSelected: function() {
                  n.document.execCommand("copy");
                }
              },
              Object(re.b)("#ContextMenu_Copy")
            )
          ),
        G.a.IN_CLIENT &&
          a &&
          t.push(
            ve.createElement(
              mr.d,
              {
                key: "paste",
                onSelected: function() {
                  r.focus(), n.SteamClient._internal.Paste();
                }
              },
              Object(re.b)("#ContextMenu_Paste")
            )
          ),
        t.length)
      )
        Object(Zo.a)(ve.createElement(mr.c, null, t), e);
      else {
        if (e.shiftKey) return;
        e.preventDefault(), e.stopPropagation();
      }
    }
    var op = (function(o) {
        function e(e) {
          var t = o.call(this, e) || this;
          (t.m_bUsePopups = !1), (t.m_nWindowTitleUnreadCycleCount = 0);
          t.m_browserContext =
            t.props.popup && t.props.popup.browser_info
              ? t.props.popup.browser_info
              : qo;
          var n = Yo.UIStore.GetPerContextChatData(t.m_browserContext);
          return (
            (t.m_bUsePopups = n.BUsePopups()),
            t.m_bUsePopups
              ? (t.m_nInlineChatWidth = 640)
              : ((t.m_nInlineChatWidth = 530),
                (t.m_ResponsiveWindowState = Yo.UIStore.GetResponsiveWindowState(
                  t.m_browserContext
                ))),
            (t.state = { bIsResizingWindow: !1 }),
            t
          );
        }
        return (
          R.d(e, o),
          (e.prototype.OnWindowResizeEvent = function(e) {
            var o = this,
              i = this.m_bUsePopups ? this.props.popup : null;
            i &&
              i.IsMinimized().then(function(e) {
                if (!e) {
                  var t = i.window;
                  if (!(t.innerWidth < 226)) {
                    var n = t.innerWidth >= o.m_nInlineChatWidth;
                    Yo.UIStore.SetFriendsListSingleWindowMode(
                      o.m_browserContext,
                      n
                    );
                  }
                }
              });
          }),
          (e.prototype.BindWindowHandlers = function() {
            var i = this;
            (this.m_popupActionDisposer = Object(m.autorun)(function() {
              if (!G.a.IN_CLIENT) {
                var e = Yo.ChatStore.FriendChatStore.GetUnfilteredFriendsWithUnreadMessages();
                e.length && void 0 === i.m_unTimerWindowTitleUnreadCycle
                  ? (i.m_unTimerWindowTitleUnreadCycle = window.setInterval(
                      function() {
                        i.m_nWindowTitleUnreadCycleCount =
                          (i.m_nWindowTitleUnreadCycleCount + 1) % 1e3;
                      },
                      2e3
                    ))
                  : e.length ||
                    void 0 === i.m_unTimerWindowTitleUnreadCycle ||
                    (window.clearInterval(i.m_unTimerWindowTitleUnreadCycle),
                    (i.m_unTimerWindowTitleUnreadCycle = void 0));
                var t = 1 + e.length,
                  n = i.m_nWindowTitleUnreadCycleCount % t;
                if (0 < n) {
                  var o = e[n - 1];
                  return void (i.props.container.title = Object(re.b)(
                    "#WindowTitle_UnreadMessage",
                    o.name
                  ));
                }
              }
              Yo.UIStore.BIsFriendsListSingleWindow(i.m_browserContext) &&
              i.props.tabset.GetTitle()
                ? G.a.IN_CLIENT
                  ? (i.props.container.title =
                      Object(re.b)("#WindowTitle_FriendsList") +
                      " - " +
                      i.props.tabset.GetTitle())
                  : (i.props.container.title = i.props.tabset.GetTitle())
                : (i.props.container.title = Object(re.b)(
                    "#WindowTitle_FriendsList"
                  ));
            })),
              (this.m_popupFocusDisposer = this.props.container.OnFocus(
                function() {
                  Yo.UIStore.BIsFriendsListSingleWindow(i.m_browserContext) &&
                    i.props.tabset.OnWindowFocus();
                }
              ));
          }),
          (e.prototype.UnbindWindowHandlers = function() {
            this.m_popupActionDisposer &&
              (this.m_popupActionDisposer(),
              (this.m_popupActionDisposer = void 0)),
              this.m_popupFocusDisposer &&
                (this.m_popupFocusDisposer.unregister(),
                (this.m_popupFocusDisposer = void 0));
          }),
          (e.prototype.componentWillMount = function() {
            var e = this.props.popup ? this.props.popup.window : window;
            e && e.addEventListener("resize", this.OnWindowResizeEvent),
              this.BindWindowHandlers();
          }),
          (e.prototype.componentWillUnmount = function() {
            var e = this.props.popup ? this.props.popup.window : window;
            e && e.removeEventListener("resize", this.OnWindowResizeEvent),
              this.UnbindWindowHandlers();
          }),
          (e.prototype.BindFriendsListContainer = function(e) {
            this.m_elFriendsListContainer = e && e.div;
          }),
          (e.prototype.OnGrabberMouseDown = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            this.setState({ bIsResizingWindow: !0 }),
              t.addEventListener("mousemove", this.HandleMouseMove),
              t.addEventListener(
                "mouseup",
                this.UnregisterFriendsListDragEvents
              );
          }),
          (e.prototype.OnGrabberTouchStart = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            t.addEventListener("touchmove", this.HandleTouchMove),
              t.addEventListener(
                "touchend",
                this.UnregisterFriendsListDragEvents
              );
          }),
          (e.prototype.HandleTouchMove = function(e) {
            1 <= e.touches.length &&
              this.InternalAdjustFriendsListContainerOnDrag(
                e.touches[0].clientX
              );
          }),
          (e.prototype.HandleMouseMove = function(e) {
            this.InternalAdjustFriendsListContainerOnDrag(e.clientX);
          }),
          (e.prototype.InternalAdjustFriendsListContainerOnDrag = function(e) {
            if (this.m_elFriendsListContainer) {
              var t = ln(
                e - this.m_elFriendsListContainer.getBoundingClientRect().left,
                200,
                600
              );
              Qu.SetUIDisplayPref("nFriendsListSingleWindowWidthPx", t);
            }
          }),
          (e.prototype.UnregisterFriendsListDragEvents = function(e) {
            this.setState({ bIsResizingWindow: !1 }),
              e.view.removeEventListener("mousemove", this.HandleMouseMove),
              e.view.removeEventListener("touchmove", this.HandleTouchMove),
              e.view.removeEventListener(
                "mouseup",
                this.UnregisterFriendsListDragEvents
              ),
              e.view.removeEventListener(
                "touchend",
                this.UnregisterFriendsListDragEvents
              );
          }),
          (e.prototype.render = function() {
            var e = !0,
              t = !0,
              n = !1,
              o = !1;
            if (!Yo.UIStore.BIsFriendsListSingleWindow(this.m_browserContext))
              if (this.m_ResponsiveWindowState) {
                var i = this.m_ResponsiveWindowState.GetActiveView();
                (e = i == $n.FriendsList), (t = i == $n.Chat);
              } else t = !1;
            var r = Yo.UIStore.GetTheaterMode(),
              a = "chat_main fullheight",
              s = null;
            e && t
              ? (0 < this.props.tabset.tabCount &&
                  ((o = !0),
                  (n = Yo.UIStore.BIsFriendsListCollapsed(
                    this.m_browserContext
                  ))),
                (a += " singlewindow"),
                (s = ve.createElement("div", {
                  className:
                    "singleWindowDivider" + (n ? " friendsListCollapsed" : ""),
                  onMouseDown: this.OnGrabberMouseDown,
                  onTouchStart: this.OnGrabberTouchStart
                })))
              : e
                ? (a += " responsive_friends")
                : t && (a += " responsive_chats"),
              this.state.bIsResizingWindow && (a += " resizingSingleWindow"),
              r && (a += " TheaterMode"),
              this.props.popup && this.props.popup.focused && (a += " focused"),
              Yo.CMInterface.BDisconnected() && (a += " errorDisconnected");
            var c = this.props.popup && this.props.popup.window,
              l = n
                ? {
                    width: 0,
                    transition:
                      "width 0.32s ease-in-out, opacity 0.32s ease-in-out"
                  }
                : {
                    width:
                      Qu.UIDisplayPrefs.nFriendsListSingleWindowWidthPx + "px"
                  };
            return Yo.ParentalStore.BIsFriendsBlocked()
              ? G.a.IN_CLIENT
                ? ve.createElement(
                    "div",
                    { className: a },
                    ve.createElement(Zl, null)
                  )
                : (location.reload(), ve.createElement("div", null))
              : ve.createElement(
                  "div",
                  { className: a, onContextMenu: np },
                  ve.createElement(
                    qi,
                    null,
                    ve.createElement(sp, {
                      popup: this.props.popup ? this.props.popup.window : void 0
                    })
                  ),
                  ve.createElement(
                    "div",
                    { className: "chat_main_flex displayRow" },
                    !1,
                    Yo.ready_to_render &&
                      ve.createElement(
                        qi,
                        null,
                        ve.createElement(ap, {
                          ModalManager: Qu.GetModalManager(c || window)
                        }),
                        e &&
                          ve.createElement(
                            ji,
                            {
                              className:
                                "friendsListContainer fullheight " +
                                (n ? "collapsed" : ""),
                              style: t ? l : null,
                              ref: this.BindFriendsListContainer,
                              rgAcceptedTypes: [],
                              bAcceptsFiles: !0
                            },
                            ve.createElement(As, {
                              friends: this.props.friends,
                              chats: this.props.chats,
                              popup: c,
                              browserContext: this.m_browserContext,
                              collapsible: o,
                              collapsed: n
                            })
                          ),
                        ve.createElement(
                          ji,
                          {
                            className: "singleWindowDividerDropTarget",
                            rgAcceptedTypes: [],
                            bAcceptsFiles: !0
                          },
                          s
                        ),
                        t &&
                          ve.createElement(Al, {
                            tabs: this.props.tabset,
                            popup: c,
                            ResponsiveWindowState: e
                              ? null
                              : this.m_ResponsiveWindowState,
                            showOpenFriendsList: o && n
                          }),
                        this.props.popup &&
                          G.a.IN_CLIENT &&
                          ve.createElement(Ql, { popup: c }),
                        ve.createElement("div", {
                          className: "singleWindowFocusBar"
                        })
                      )
                  )
                );
          }),
          R.c(
            [m.observable],
            e.prototype,
            "m_nWindowTitleUnreadCycleCount",
            void 0
          ),
          R.c([M.a], e.prototype, "OnWindowResizeEvent", null),
          R.c([M.a], e.prototype, "BindFriendsListContainer", null),
          R.c([M.a], e.prototype, "OnGrabberMouseDown", null),
          R.c([M.a], e.prototype, "OnGrabberTouchStart", null),
          R.c([M.a], e.prototype, "HandleTouchMove", null),
          R.c([M.a], e.prototype, "HandleMouseMove", null),
          R.c([M.a], e.prototype, "UnregisterFriendsListDragEvents", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      ip = (function(c) {
        function e(e, t, n, o, i, r) {
          var a = this,
            s = {
              title: "",
              html_class: "client_chat_frame fullheight ChatPopup",
              body_class: "fullheight",
              minWidth: 400,
              minHeight: 250,
              strRestoreDetails: o,
              dimensions: { width: 740, height: 650 },
              target_browser: 0 < e.m_unPID ? e : void 0,
              eCreationFlags: Wi.c.Resizable
            };
          return (
            r && (s.eCreationFlags |= Wi.c.Minimized),
            i &&
              (Object.assign(s.dimensions, i), (s.bIgnoreSavedDimensions = !0)),
            ((a =
              c.call(this, "chat_" + t, n.GetTabSetIdentifier(), s, !0) ||
              this).m_tabSet = n),
            a
          );
        }
        return (
          R.d(e, c),
          (e.prototype.SetTitle = function() {
            if (this.m_popup && this.m_popup.document && this.m_tabSet) {
              var e = this.m_tabSet.GetTitle();
              this.m_popup.document.title = e;
            }
          }),
          (e.prototype.OnFocus = function() {
            this.m_tabSet.OnWindowFocus();
          }),
          (e.prototype.BindWindowHandlers = function() {
            this.m_popupActionDisposer ||
              (this.m_popupActionDisposer = Object(m.autorun)(this.SetTitle));
          }),
          (e.prototype.UnbindWindowHandlers = function() {
            this.m_popupActionDisposer &&
              (this.m_popupActionDisposer(),
              (this.m_popupActionDisposer = void 0));
          }),
          Object.defineProperty(e.prototype, "tab_set", {
            get: function() {
              return this.m_tabSet;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ClearTabSet = function() {
            this.m_tabSet = void 0;
          }),
          (e.prototype.OnResize = function() {
            Yo.UIStore.OnTabSetResized(this.m_tabSet),
              c.prototype.OnResize.call(this);
          }),
          (e.prototype.OnBeforeUnload = function() {
            c.prototype.SetSavedDimensionsKey.call(
              this,
              this.m_tabSet.GetTabSetIdentifier()
            ),
              c.prototype.OnBeforeUnload.call(this);
          }),
          (e.prototype.OnClose = function() {
            if (this.m_tabSet) {
              var e = !1;
              null != this.m_popup.window &&
                this.m_popup.window.SteamClient &&
                this.m_popup.window.SteamClient.Window &&
                this.m_popup.window.SteamClient.Window.ProcessShuttingDown &&
                (e = this.m_popup.window.SteamClient.Window.ProcessShuttingDown()),
                this.m_tabSet.OnPopupClosed(e);
            }
            this.UnbindWindowHandlers();
          }),
          (e.prototype.Render = function(e, t) {
            t.setAttribute("class", "fullheight popup_chat_frame"),
              this.BindWindowHandlers(),
              W.render(
                ve.createElement(rp, { popup: this, chatTabs: this.m_tabSet }),
                t
              );
          }),
          R.c([M.a], e.prototype, "SetTitle", null),
          e
        );
      })(ep),
      rp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.popup.window,
              t = this.props.chatTabs,
              n = "popup_chat_frame fullheight";
            return (
              this.props.popup.focused && (n += " focused"),
              Yo.UIStore.GetTheaterMode() && (n += " TheaterMode"),
              Yo.CMInterface.BDisconnected() && (n += " errorDisconnected"),
              ve.createElement(
                "div",
                { className: n, onContextMenu: np },
                ve.createElement(sp, { popup: this.props.popup.window }),
                !1,
                ve.createElement(ap, { ModalManager: Qu.GetModalManager(e) }),
                ve.createElement(Al, {
                  tabs: t,
                  popup: e,
                  ResponsiveWindowState: null
                }),
                G.a.IN_CLIENT && ve.createElement(Ql, { popup: e })
              )
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      ap = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.ModalManager.modals;
            if (!e || !e.length) return null;
            var o = this.props.ModalManager.active_modal,
              t = e.map(function(e, t) {
                var n =
                  "chat_modal_position" + (e != o ? " inactive" : " active");
                return ve.createElement(
                  "div",
                  { className: n, key: t },
                  e.element
                );
              });
            return ve.createElement(
              "div",
              { className: "chat_full_modaloverlay" },
              ve.createElement("div", {
                className: "chat_modal_position chat_modal_background"
              }),
              t
            );
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      sp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnKeyDown = function(e) {
            e.preventDefault(), e.stopPropagation();
          }),
          (t.prototype.render = function() {
            if (G.a.IN_CLIENT) {
              if (Yo.CMInterface.BDisconnected()) {
                qu(this.props.popup);
                return ve.createElement(
                  "div",
                  {
                    className: "ConnectionTrouble",
                    tabIndex: 0,
                    onKeyDown: this.OnKeyDown
                  },
                  ve.createElement(
                    "div",
                    { className: "ConnectionTroubleContent" },
                    ve.createElement(zi, {
                      hideMinMax: !0,
                      popup: this.props.popup
                    }),
                    ve.createElement(
                      "div",
                      { className: "ConnectionTroubleMessage" },
                      Object(re.b)("#ConnectionTrouble_CurrentlyDisconnected")
                    )
                  )
                );
              }
              return null;
            }
            return ve.createElement(cp, null);
          }),
          R.c([M.a], t.prototype, "OnKeyDown", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      cp = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bRequestingNotificationPermission = !1),
            (t.state = {
              bShouldRequestNotificationPermission: !0,
              bShowStartupDelayMessage: !1,
              bShowReconnectWaitMessage: !1,
              cReconnectWaitSeconds: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillMount = function() {
            var e = this;
            if (!Yo.ready_to_render) {
              var t = performance.now() - Yo.GetStartupTime();
              this.m_iIntervalDelayedStartup = window.setTimeout(function() {
                e.setState({ bShowStartupDelayMessage: !0 }),
                  (e.m_iIntervalDelayedStartup = void 0);
              }, 1500 - t);
            }
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_iIntervalDelayedStartup &&
              (window.clearTimeout(this.m_iIntervalDelayedStartup),
              (this.m_iIntervalDelayedStartup = void 0)),
              this.m_iIntervalUpdateReconnectStatus &&
                (window.clearInterval(this.m_iIntervalUpdateReconnectStatus),
                (this.m_iIntervalUpdateReconnectStatus = void 0));
          }),
          (e.prototype.IntervalUpdateReconnectWaitStatus = function() {
            var e = Qu.WebLogonManager;
            if (e.BIsWaitingToReconnect()) {
              var t = Math.ceil(e.GetMSUntilNextReconnectAttempt() / 1e3);
              t != this.state.cReconnectWaitSeconds &&
                this.setState({
                  bShowReconnectWaitMessage: !0,
                  cReconnectWaitSeconds: t
                });
            } else
              window.clearInterval(this.m_iIntervalUpdateReconnectStatus),
                (this.m_iIntervalUpdateReconnectStatus = void 0),
                this.setState({
                  bShowReconnectWaitMessage: !1,
                  cReconnectWaitSeconds: 0
                });
          }),
          (e.prototype.StartReconnectUpdateInterval = function() {
            this.m_iIntervalUpdateReconnectStatus ||
              (this.m_iIntervalUpdateReconnectStatus = window.setInterval(
                this.IntervalUpdateReconnectWaitStatus,
                250
              ));
          }),
          (e.prototype.OnReconnectNowClick = function() {
            Qu.WebLogonManager.ReconnectNow();
          }),
          (e.prototype.OnLoginClick = function() {
            window.location.href = window.location.href;
          }),
          (e.prototype.render = function() {
            var e = this,
              t = Qu.WebLogonManager;
            if (
              (AssertMsg(
                t,
                "No WebLogonManager in WebConnectionTroubleOverlay"
              ),
              !t)
            )
              return null;
            var n = null,
              o = t.web_logon_state,
              i =
                !Yo.NotificationManager.BNotificationsPermitted() &&
                this.state.bShouldRequestNotificationPermission;
            if (9 != o || i) {
              var r = void 0,
                a = "",
                s = !1,
                c = !1;
              if (9 != o)
                if (
                  Yo.ready_to_render ||
                  this.state.bShowStartupDelayMessage ||
                  !t.BIsInInitialConnect()
                )
                  switch (o) {
                    case 1:
                    case 3:
                      (r = Object(re.b)("#ConnectionTrouble_Connecting")),
                        (c = !0);
                      break;
                    case 5:
                    case 7:
                      (r = Object(re.b)("#ConnectionTrouble_LoggingIn")),
                        (c = !0);
                      break;
                    case 11:
                      (r = Object(re.b)("#ConnectionTrouble_RetrievingLogin")),
                        (c = !0);
                      break;
                    case 2:
                    case 4:
                    case 12:
                      r = Object(re.b)("#ConnectionTrouble_FailedToConnect");
                      break;
                    case 8:
                    case 6:
                      r = Object(re.b)("#ConnectionTrouble_FailedToLogIn");
                      break;
                    case 10:
                      r = Object(re.b)("#ConnectionTrouble_DisconnectedFinal");
                      break;
                    case 13:
                      (r = Object(re.b)("#ConnectionTrouble_LoginLost")),
                        (s = !0);
                      break;
                    case 14:
                      (r = Object(re.b)("#ConnectionTrouble_LoginChanged")),
                        (s = !0);
                      break;
                    case 15:
                      r = Object(re.b)("#ConnectionTrouble_LoggedOnElsewhere");
                      break;
                    default:
                      AssertMsg(!1, "No message for trouble state " + o);
                  }
                else a = "InitialConnect";
              else
                i &&
                  (this.m_bRequestingNotificationPermission ||
                    (Yo.NotificationManager.RequestNotificationPermission().then(
                      function() {
                        (e.m_bRequestingNotificationPermission = !1),
                          e.setState({
                            bShouldRequestNotificationPermission: !1
                          });
                      }
                    ),
                    (this.m_bRequestingNotificationPermission = !0)),
                  (a = "NotificationBrowserWarning"),
                  (r = Object(re.b)("#NotificationBrowserWarning")));
              var l = t.BIsWaitingToReconnect(),
                p = t.BWillAutoReconnect();
              !this.state.bShowReconnectWaitMessage &&
                p &&
                this.StartReconnectUpdateInterval(),
                (!r && Yo.ready_to_render) ||
                  (n = ve.createElement(
                    Jo,
                    { classNames: "modalbg-anim", timeout: 300 },
                    ve.createElement(
                      "div",
                      {
                        className:
                          "ConnectionTrouble WebConnectionTrouble" +
                          (Yo.ready_to_render ? "" : " NotReadyToRender")
                      },
                      ve.createElement("div", { className: "" + a }),
                      ve.createElement(
                        "div",
                        { className: "ConnectionTroubleContent" },
                        ve.createElement(
                          "div",
                          { className: "ConnectionTroubleMessage " + a },
                          ve.createElement(
                            "div",
                            { className: "errorMessageContainer" },
                            ve.createElement(
                              "div",
                              {
                                className:
                                  "connectionThrobber" +
                                  (c ? " showThrobber" : "")
                              },
                              ve.createElement(Ea, { size: "small" }),
                              " "
                            ),
                            ve.createElement(
                              "div",
                              null,
                              Yo.ready_to_render
                                ? r
                                : Object(re.b)("#ConnectionTrouble_Connecting")
                            )
                          ),
                          l &&
                            p &&
                            ve.createElement(
                              "div",
                              { className: "ReconnectWaitMessage" },
                              Object(re.c)(
                                "#ConnectionTrouble_ReconnectingInSeconds",
                                Math.ceil(
                                  t.GetMSUntilNextReconnectAttempt() / 1e3
                                )
                              )
                            ),
                          l &&
                            ve.createElement(
                              "div",
                              {
                                className: "ConnectionTroubleReconnectMessage"
                              },
                              ve.createElement(
                                "div",
                                { className: "ReconnectNow" },
                                ve.createElement(
                                  "button",
                                  {
                                    type: "button",
                                    className: "DialogButton Primary",
                                    onClick: this.OnReconnectNowClick
                                  },
                                  Object(re.b)(
                                    "#ConnectionTrouble_ReconnectNow"
                                  )
                                )
                              )
                            ),
                          s &&
                            ve.createElement(
                              "div",
                              {
                                className: "ConnectionTroubleReconnectMessage"
                              },
                              ve.createElement(
                                "div",
                                { className: "ReconnectNow" },
                                ve.createElement(
                                  "button",
                                  {
                                    type: "button",
                                    className: "DialogButton Primary",
                                    onClick: this.OnLoginClick
                                  },
                                  Object(re.b)(
                                    14 != o
                                      ? "#ConnectionTrouble_LoginAgain"
                                      : "#ConnectionTrouble_LoginChanged_Reload"
                                  )
                                )
                              )
                            )
                        )
                      )
                    )
                  ));
            }
            return ve.createElement(Xo, null, n);
          }),
          R.c([M.a], e.prototype, "IntervalUpdateReconnectWaitStatus", null),
          R.c([M.a], e.prototype, "OnReconnectNowClick", null),
          R.c([M.a], e.prototype, "OnLoginClick", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      lp = "DEBUG_MobxDevTools",
      pp = Object(m.observable)({ bEnabled: null });
    function up() {
      return pp.bEnabled;
    }
    var mp,
      dp,
      hp,
      _p = Uo(
        (mp = function(e, t, n) {
          Ji(
            ve.createElement(bp, R.a({}, e, { bIsInviteDialog: !0 })),
            n,
            "InviteDialog",
            { strTitle: "Invite", popupWidth: 540, popupHeight: 260 }
          );
        }),
        mp.name
      ),
      fp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.AcceptInvite = function(e) {
            var t = this,
              n = Yu(e);
            Yo.ChatStore.InviteStore.AcceptInvite(
              this.props.invite,
              zu(this, e)
            ).then(function(e) {
              t.HandleJoinResult(n, e);
            });
          }),
          (t.prototype.HandleJoinResult = function(e, t) {
            if (15 == t.result) {
              0 == t.time && console.log("no longer valid");
              var n = Yo.RTime32ToDate(t.time).toLocaleString([], {
                weekday: "long",
                year: "numeric",
                month: "numeric",
                day: "numeric",
                hour: "numeric",
                minute: "numeric"
              });
              er(
                e,
                Object(re.b)("#ChatRoom_InviteMessage_Header"),
                Object(re.b)("#ChatRoom_InviteMessage_Failed_Kicked", n),
                Object(re.b)("#Button_OK")
              );
            } else
              17 == t.result
                ? er(
                    e,
                    Object(re.b)("#ChatRoom_InviteMessage_Header"),
                    Object(re.b)("#ChatRoom_InviteMessage_Failed_Banned"),
                    Object(re.b)("#Button_OK")
                  )
                : 42 == t.result &&
                  er(
                    e,
                    Object(re.b)("#ChatRoom_InviteMessage_Header"),
                    Object(re.b)("#ChatRoom_InviteMessage_Not_Found"),
                    Object(re.b)("#Button_OK")
                  );
            this.props.onAccept && this.props.onAccept();
          }),
          (t.prototype.render = function() {
            var e = this.props.invite;
            if (!e || !e.BIsReady())
              return ve.createElement(
                "div",
                { className: "ChatMessageInvite RequestingInfo displayRow" },
                ve.createElement(Ea, { size: "small" }),
                ve.createElement(
                  "div",
                  { className: "postedExpiredInvite" },
                  Object(re.b)("#bbcode_invite_requesting_info")
                )
              );
            if (!e.BIsValid())
              return ve.createElement(
                "div",
                { className: "ChatMessageInvite InviteExpired" },
                ve.createElement(
                  "div",
                  { className: "postedExpiredInvite" },
                  Object(re.b)("#bbcode_invite_no_longer_valid")
                )
              );
            var t =
                this.props.inviter &&
                Yo.FriendStore.self.accountid == this.props.inviter.accountid,
              n = Yo.ChatStore.GetChatRoomGroup(e.GetChatRoomGroupID()),
              o = n && n.BIsCurrentUserAMember(),
              i = e.BIsExpired(),
              r = n && n.name,
              a = "",
              s = "ChatMessageInvite NoBGSplitInvite",
              c = "inviteButton inviteButtonJoinChat";
            this.props.strClassName && (s += " " + this.props.strClassName);
            var l,
              p,
              u = e.BIsInviteLink(),
              m = e.BIsVoiceChatInvite();
            if (m) {
              (c += " inviteButtonJoinVoice"), (s += " VoiceChannelInvite");
              var d = n.GetChatRoom(e.GetChatID());
              d && (a = d.name);
            }
            if (
              (this.props.bIsInviteDialog ||
                (o && !t && (s += " GroupAlreadyJoined"),
                t && (s += " Inviter")),
              u && (s += " InviteLink"),
              i)
            )
              s += " InviteExpired";
            else if (e.BNeverExpires())
              l = ve.createElement(
                "div",
                { className: "Invite_ExpireTime" },
                Object(re.b)("#bbcode_invite_never_expires")
              );
            else {
              var h = Yo.RTime32ToDate(e.time_expires);
              l = ve.createElement(
                "div",
                { className: "Invite_ExpireTime" },
                Object(re.b)(
                  "#bbcode_invite_expires",
                  h.toLocaleTimeString(),
                  h.toDateString()
                )
              );
            }
            p = t
              ? m
                ? Object(re.b)("#Voice_StartTalking")
                : Object(re.b)("#ChatRoom_Invite_Accept_Inviter")
              : m
                ? Object(re.b)("#Voice_StartTalking")
                : o
                  ? Object(re.b)("#ChatRoom_Invite_Accept_Inviter")
                  : Object(re.b)("#ChatRoom_Invite_Accept");
            var _ = null,
              f = !1;
            if (e.BIsUserBanned())
              (f = !0),
                (_ = ve.createElement(
                  "div",
                  null,
                  Object(re.b)("#bbcode_invite_banned_forever")
                ));
            else if (
              e.GetTimeKickExpires() &&
              e.GetTimeKickExpires() > Yo.GetServerRTime32()
            ) {
              f = !0;
              var g = (h = Yo.RTime32ToDate(
                e.GetTimeKickExpires()
              )).toLocaleString([], {
                weekday: "long",
                year: "numeric",
                month: "numeric",
                day: "numeric",
                hour: "numeric",
                minute: "numeric"
              });
              _ = ve.createElement(
                "div",
                null,
                Object(re.b)("#bbcode_invite_banned_until", g)
              );
            }
            var b = this.props.inviter && o,
              v = !b && !t,
              S = m ? a : r;
            return ve.createElement(
              cc,
              { text: [p, S, e.GetURL()] },
              ve.createElement(
                "div",
                { className: s },
                ve.createElement(
                  "div",
                  { className: "leftInviteContainer" },
                  ve.createElement(ss, { group: n, small: b, large: v }),
                  m &&
                    ve.createElement("div", null, ve.createElement(Qo.cb, null))
                ),
                ve.createElement(
                  "div",
                  {
                    className:
                      "rightInviteContainer" +
                      (o || t ? " rightInvite_Horizontal" : "")
                  },
                  ve.createElement(
                    "div",
                    { className: "rightInviteContainerContent" },
                    ve.createElement(gp, {
                      invite: this.props.invite,
                      inviter: this.props.inviter,
                      invitee: this.props.invitee
                    }),
                    ve.createElement(
                      "div",
                      null,
                      ve.createElement("div", { className: "groupName" }, S)
                    ),
                    u &&
                      ve.createElement(vp, {
                        url: e.GetURL(),
                        bDisabled: e.BIsExpired()
                      }),
                    _,
                    !t &&
                      o &&
                      !m &&
                      ve.createElement(
                        "div",
                        null,
                        ve.createElement(
                          "span",
                          { className: "groupAlreadyJoined" },
                          Object(re.b)("#bbcode_invite_already_group_member")
                        )
                      )
                  ),
                  !i &&
                    !f &&
                    ve.createElement(
                      "button",
                      {
                        className: c,
                        type: "button",
                        onClick: this.AcceptInvite
                      },
                      p
                    )
                ),
                ((!t && !o) || u) && l,
                ve.createElement("div", { style: { clear: "left" } })
              )
            );
          }),
          R.c([M.a], t.prototype, "AcceptInvite", null),
          (t = R.c([Hi.observer], t))
        );
      })(ve.Component),
      gp = Object(Hi.observer)(function(e) {
        var t = e.invite,
          n = e.inviter,
          o = e.invitee,
          i = t.BIsVoiceChatInvite(),
          r = t.BIsInviteLink(),
          a = e.inviter && Yo.FriendStore.self.accountid == e.inviter.accountid,
          s = Yo.ChatStore.GetChatRoomGroup(t.GetChatRoomGroupID()).name,
          c = Object(re.b)("#bbcode_invite_youre_invited");
        return (
          a
            ? (c = i
                ? r
                  ? Object(re.d)(
                      "#bbcode_invite_you_shared_voice_link",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        s,
                        " "
                      )
                    )
                  : Object(re.d)(
                      "#bbcode_invite_you_invited_friend_voice",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        o.display_name,
                        " "
                      ),
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        s,
                        " "
                      )
                    )
                : r
                  ? Object(re.d)("#bbcode_invite_you_shared_invite_link")
                  : Object(re.d)(
                      "#bbcode_invite_you_invited_friend",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        o.display_name,
                        " "
                      )
                    ))
            : n &&
              (c = i
                ? r
                  ? Object(re.d)(
                      "#bbcode_invite_voice_url_description",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        n.display_name,
                        " "
                      ),
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        s,
                        " "
                      )
                    )
                  : Object(re.d)(
                      "#bbcode_invite_voice_description",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        n.display_name,
                        " "
                      ),
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        s,
                        " "
                      )
                    )
                : r
                  ? Object(re.d)(
                      "#bbcode_invite_url_description",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        n.display_name,
                        " "
                      )
                    )
                  : Object(re.d)(
                      "#bbcode_invite_description",
                      ve.createElement(
                        "span",
                        { className: "inviteHighlight" },
                        n.display_name,
                        " "
                      )
                    )),
          ve.createElement("div", { className: "inviteLabel" }, c)
        );
      }),
      bp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this,
              t = this.props,
              n = t.closeModal,
              o = (t.onAccept, t.strClassName),
              i = R.f(t, ["closeModal", "onAccept", "strClassName"]);
            return (
              (o = "InviteDialog" + (o ? " " + o : "")),
              ve.createElement(
                Ki,
                { onEscKeypress: n },
                ve.createElement(
                  fp,
                  R.a({}, i, {
                    strClassName: o,
                    onAccept: function() {
                      e.props.closeModal && e.props.closeModal();
                    }
                  })
                )
              )
            );
          }),
          t
        );
      })(ve.Component),
      vp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.CopyToClipboard = function(e) {
            ci.i(this.props.url);
          }),
          (t.prototype.HandleFocus = function(e) {
            e.currentTarget.select();
          }),
          (t.prototype.render = function() {
            var e =
              this.props.strLabel || Object(re.b)("#bbcode_invite_url_desc");
            return ve.createElement(
              "div",
              { className: "inviteURLContainer" },
              ve.createElement("span", { className: "inviteURLLinkDesc" }, e),
              ve.createElement(
                "div",
                { className: "inviteURLAndCopy" },
                ve.createElement("input", {
                  className: "inviteURLLink",
                  value: this.props.bDisabled
                    ? Object(re.b)("#bbcode_invite_link_text_expired")
                    : this.props.url,
                  onFocus: this.HandleFocus,
                  onClick: this.HandleFocus,
                  readOnly: !0
                }),
                !this.props.bDisabled &&
                  ve.createElement(
                    "span",
                    {
                      className: "copyInviteLink",
                      onClick: this.CopyToClipboard,
                      title: Object(re.b)("#Chat_Copy_Clipboard")
                    },
                    ve.createElement(Qo.g, null)
                  )
              )
            );
          }),
          R.c([M.a], t.prototype, "CopyToClipboard", null),
          R.c([M.a], t.prototype, "HandleFocus", null),
          t
        );
      })(ve.Component),
      Sp = (function(t) {
        function e(e) {
          return t.call(this, e) || this;
        }
        return (
          R.d(e, t),
          (e.prototype.AcceptGameInvite = function() {
            this.props.gameInvite.AcceptGameInvite();
          }),
          (e.prototype.DismissInvite = function() {
            this.props.gameInvite.DismissInvite();
          }),
          (e.prototype.OnShowGameContextMenu = function(e) {
            qs(zu(this, e), this.props.gameInvite.appID, e);
          }),
          (e.prototype.render = function() {
            var e = Yo.AppInfoStore.GetAppInfo(this.props.gameInvite.appID);
            if (!e) return null;
            if (Yo.FriendStore.self == this.props.inviter) {
              var t = this.props.inviteTarget.display_name;
              return ve.createElement(
                "div",
                { className: "gameInviteSelf" },
                ve.createElement(
                  "div",
                  { onContextMenu: this.OnShowGameContextMenu },
                  Object(re.d)(
                    "#ChatRoom_GameInvite_YouInvited",
                    t,
                    ve.createElement("img", {
                      src: e.icon_url,
                      className: "productImage"
                    }),
                    e.name
                  )
                )
              );
            }
            if (
              21600 <
                Yo.GetServerRTime32() - this.props.gameInvite.rtTimestamp ||
              this.props.gameInvite.bDismissed ||
              this.props.inviter.persona.m_unGamePlayedAppID !=
                this.props.gameInvite.appID
            ) {
              var n = this.props.inviter.display_name;
              return ve.createElement(
                "div",
                { className: "gameInviteDismissed" },
                ve.createElement(
                  "div",
                  { onContextMenu: this.OnShowGameContextMenu },
                  Object(re.d)(
                    "#ChatRoom_GameInvite_Dismissed",
                    n,
                    ve.createElement("img", {
                      src: e.icon_url,
                      className: "productImage"
                    }),
                    e.name
                  )
                )
              );
            }
            if (this.props.gameInvite.bAccepted)
              return ve.createElement(
                "div",
                { className: "gameInviteAccepted" },
                ve.createElement(
                  "div",
                  { onContextMenu: this.OnShowGameContextMenu },
                  Object(re.d)(
                    "#ChatRoom_GameInvite_Accepted",
                    ve.createElement("img", {
                      src: e.icon_url,
                      className: "productImage"
                    }),
                    e.name
                  )
                )
              );
            var o = this.props.inviter,
              i = null,
              r = o.persona.player_group_size - 1;
            if (
              o.persona.m_unGamePlayedAppID == this.props.gameInvite.appID &&
              0 < o.persona.player_group_size
            ) {
              var a = o.persona.player_group;
              Yo.FriendStore.all_friends;
              i = Yo.FriendStore.FriendGroupStore.ingame_group.member_list.map(
                function(e) {
                  return e != o && e.persona.player_group == a
                    ? (r--,
                      ve.createElement($s, {
                        key: e.accountid,
                        friend: e,
                        context: null
                      }))
                    : null;
                }
              );
            }
            var s = {};
            this.props.chatGutterWidth &&
              (s.marginLeft = "-" + this.props.chatGutterWidth + "px");
            var c = Object(re.d)(
              "#ChatRoom_GameInvite_Invite",
              this.props.inviter.display_name
            );
            return ve.createElement(
              "div",
              { className: "msg ChatMessageInvite gameInviteMsg", style: s },
              ve.createElement(
                "div",
                { className: "leftInviteContainer" },
                ve.createElement("img", {
                  src: e.header_image_url,
                  className: "productImage productImageBlur"
                }),
                ve.createElement("img", {
                  src: e.header_image_url,
                  className: "productImage"
                })
              ),
              ve.createElement(
                "div",
                { className: "rightInviteContainer" },
                ve.createElement(
                  "div",
                  { className: "centerBlock" },
                  ve.createElement(
                    "div",
                    { className: "invitedTimeLabel" },
                    Object(re.b)("#ChatRoom_GameInvite_InviteTime"),
                    ve.createElement(Cr, {
                      rtime: this.props.gameInvite.rtTimestamp,
                      bTimeOnly: !0
                    })
                  ),
                  ve.createElement(
                    cc,
                    null,
                    ve.createElement("div", { className: "inviteLabel" }, c)
                  ),
                  ve.createElement(
                    cc,
                    null,
                    ve.createElement(
                      "div",
                      { className: "productName" },
                      e.name
                    )
                  ),
                  0 < o.persona.player_group_size &&
                    ve.createElement(
                      cc,
                      null,
                      ve.createElement(
                        "div",
                        { className: "playingWithBlock" },
                        ve.createElement(
                          "div",
                          null,
                          Object(re.b)("#ChatRoom_GameInvite_PlayingWith")
                        ),
                        ve.createElement(
                          "div",
                          { className: "playingWithAvatars" },
                          ve.createElement("div", {
                            className: "playingWithLine"
                          }),
                          i,
                          0 < r &&
                            ve.createElement(
                              "div",
                              { className: "playingWithExtraCount" },
                              Object(re.b)("#ChatRoom_GameInvite_PartyMore", r),
                              " "
                            )
                        )
                      )
                    )
                ),
                ve.createElement(
                  "button",
                  {
                    className: "DialogButton GreenPlay",
                    onClick: this.AcceptGameInvite
                  },
                  Object(re.b)("#ChatRoom_GameInvite_Accept")
                ),
                ve.createElement(
                  "div",
                  { className: "closeButton", onClick: this.DismissInvite },
                  ve.createElement(Qo.fb, null)
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "AcceptGameInvite", null),
          R.c([M.a], e.prototype, "DismissInvite", null),
          R.c([M.a], e.prototype, "OnShowGameContextMenu", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      yp = n("Nlnv"),
      Cp = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_pollTimeout = void 0),
            (t.state = {
              bDismissed: !1,
              bExpired: !1,
              strThumbnail: "",
              nUpdateInterval: 10,
              bThumbnailLoaded: !1,
              nThumbnailUpdateCounter: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentDidMount = function() {
            this.props.broadcaster.accountid != Yo.FriendStore.self.accountid &&
              (this.props.broadcastid
                ? this.PollForStatus()
                : this.setState({ bExpired: !0 }));
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_pollTimeout &&
              (window.clearTimeout(this.m_pollTimeout),
              (this.m_pollTimeout = void 0));
          }),
          (e.prototype.PollForStatus = function() {
            var t = this;
            this.m_pollTimeout ||
              this.state.bExpired ||
              this.FetchBroadcastStatus().then(function(e) {
                1 != e.GetEResult()
                  ? t.setState({ bExpired: !0 })
                  : (t.state.strThumbnail
                      ? t.setState({
                          nThumbnailUpdateCounter:
                            t.state.nThumbnailUpdateCounter + 1
                        })
                      : t.FetchBroadcastThumbnail(),
                    t.SchedulePollForStatus());
              });
          }),
          (e.prototype.SchedulePollForStatus = function() {
            var e = this;
            if (!this.m_pollTimeout) {
              var t = 1e3 * this.state.nUpdateInterval;
              this.state.bThumbnailLoaded || (t = 1e4),
                (this.m_pollTimeout = window.setTimeout(function() {
                  (e.m_pollTimeout = void 0), e.PollForStatus();
                }, t));
            }
          }),
          (e.prototype.FetchBroadcastStatus = function() {
            var e = Yo.CMInterface;
            if (e) {
              var t = u.Init(yp.b);
              return (
                t.Body().set_steamid(this.props.broadcaster.steamid64),
                t.Body().set_broadcast_id(this.props.broadcastid),
                yp.a.GetBroadcastStatus(e.GetServiceTransport(), t)
              );
            }
            return Promise.reject("No CM interface");
          }),
          (e.prototype.FetchBroadcastThumbnail = function() {
            var o = this,
              e = Yo.CMInterface;
            if (e) {
              var t = u.Init(yp.c);
              t.Body().set_steamid(this.props.broadcaster.steamid64),
                t.Body().set_broadcast_id(this.props.broadcastid),
                yp.a
                  .GetBroadcastThumbnail(e.GetServiceTransport(), t)
                  .then(function(e) {
                    if (1 == e.GetEResult()) {
                      var t = e.Body().thumbnail_url(),
                        n = e.Body().update_interval();
                      t &&
                        n &&
                        o.setState({ strThumbnail: t, nUpdateInterval: n });
                    }
                  });
            }
          }),
          (e.prototype.OnWatch = function(e) {
            if (
              "undefined" != typeof SteamClient &&
              void 0 !== SteamClient.WebChat
            ) {
              var t =
                  "steam://broadcast/watch/" + this.props.broadcaster.steamid64,
                n = zu(this, e);
              SteamClient.WebChat.OpenURLInClient(t, n.m_unPID);
            } else {
              yr(
                e,
                G.a.COMMUNITY_BASE_URL +
                  "broadcast/watch/" +
                  this.props.broadcaster.steamid64
              ),
                e.stopPropagation();
            }
            this.OnClose();
          }),
          (e.prototype.OnClose = function() {
            this.setState({ bDismissed: !0 });
          }),
          (e.prototype.OnOpen = function() {
            this.setState({ bDismissed: !1 });
          }),
          (e.prototype.ShowThumbnail = function() {
            this.setState({ bThumbnailLoaded: !0 });
          }),
          (e.prototype.render = function() {
            var e = Yo.AppInfoStore.GetAppInfo(this.props.appid),
              t = ve.createElement(
                "span",
                null,
                ve.createElement("img", {
                  src: e.icon_url,
                  className: "productImage"
                }),
                ve.createElement("span", { className: "productName" }, e.name)
              );
            if (
              this.props.broadcaster.accountid == Yo.FriendStore.self.accountid
            ) {
              var n = this.props.viewer.display_name;
              return ve.createElement(
                "div",
                { className: "broadcastInviteSelf" },
                this.props.appid
                  ? Object(re.d)("#ChatRoom_BroadcastInvite_YouInvited", n, t)
                  : Object(re.d)(
                      "#ChatRoom_BroadcastInvite_YouInvited_NoAppID",
                      n
                    )
              );
            }
            var o = this.props.broadcaster.display_name;
            if (this.state.bDismissed || this.state.bExpired)
              return ve.createElement(
                "div",
                { className: "broadcastInviteDismissed" },
                this.props.appid
                  ? Object(re.d)("#ChatRoom_BroadcastInvite_Expired", o, t)
                  : Object(re.d)("#ChatRoom_BroadcastInvite_Expired_NoAppID", o)
              );
            var i =
                G.a.COMMUNITY_CDN_URL +
                "public/images/broadcast/apphub_default_thumbnail.jpg",
              r = this.state.nThumbnailUpdateCounter,
              a = Object(re.d)("#ChatRoom_BroadcastInvite_Invite", o);
            return ve.createElement(
              "div",
              { className: "msg ChatMessageInvite broadcastInviteMsg" },
              ve.createElement(
                "div",
                { className: "leftInviteContainer" },
                ve.createElement("img", {
                  src: this.state.strThumbnail + "?n=" + r,
                  onLoad: this.ShowThumbnail,
                  className:
                    "broadcastThumbnail" +
                    (this.state.bThumbnailLoaded ? " loaded" : "")
                }),
                ve.createElement("img", {
                  src: i,
                  className:
                    "broadcastThumbnail broadcastThumbnailFallback" +
                    (this.state.bThumbnailLoaded ? "" : " loaded")
                }),
                ve.createElement("div", { className: "noisePattern" })
              ),
              ve.createElement(
                "div",
                { className: "rightInviteContainer" },
                ve.createElement(
                  cc,
                  null,
                  ve.createElement(
                    "div",
                    { className: "centerBlock" },
                    ve.createElement("div", { className: "inviteLabel" }, a),
                    ve.createElement(
                      "div",
                      { className: "productName" },
                      e.name
                    )
                  )
                ),
                ">",
                ve.createElement(
                  "button",
                  {
                    className:
                      "DialogButton Primary inviteButtonWatchBroadcast",
                    onClick: this.OnWatch
                  },
                  Object(re.b)("#ChatRoom_BroadcastInvite_Watch")
                ),
                ve.createElement(
                  "div",
                  { className: "closeButton", onClick: this.OnClose },
                  ve.createElement(Qo.fb, null)
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnWatch", null),
          R.c([M.a], e.prototype, "OnClose", null),
          R.c([M.a], e.prototype, "OnOpen", null),
          R.c([M.a], e.prototype, "ShowThumbnail", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Ip = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_pollTimeout = void 0),
            (t.m_broadcastid = void 0),
            (t.m_bExpired = !1),
            (t.state = {
              strThumbnail: "",
              nUpdateInterval: 10,
              bThumbnailLoaded: !1,
              nThumbnailUpdateCounter: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnAccept = function(e) {
            Yo.BroadcastStore.ApproveViewerRequest(
              this.props.viewer.accountid,
              this.props.requestid
            );
          }),
          (e.prototype.OnClose = function() {
            Yo.BroadcastStore.RejectViewerRequest(
              this.props.viewer.accountid,
              this.props.requestid
            );
          }),
          (e.prototype.ShowThumbnail = function() {
            this.setState({ bThumbnailLoaded: !0 });
          }),
          (e.prototype.render = function() {
            var e = Yo.AppInfoStore.GetAppInfo(this.props.appid),
              t = ve.createElement(
                "span",
                null,
                ve.createElement("img", {
                  src: e.icon_url,
                  className: "productImage"
                }),
                ve.createElement("span", { className: "productName" }, e.name)
              ),
              n = this.props.viewer.display_name,
              o = Yo.BroadcastStore.GetRequestState(
                this.props.viewer.accountid,
                this.props.requestid
              ),
              i =
                void 0 !== this.m_broadcastid &&
                this.m_broadcastid != Yo.BroadcastStore.broadcastid;
            if (
              (void 0 === this.m_broadcastid &&
                "0" !== Yo.BroadcastStore.broadcastid &&
                (this.m_broadcastid = Yo.BroadcastStore.broadcastid),
              i || o != an.k_EPending)
            ) {
              var r = "#ChatRoom_BroadcastViewRequest_Expired";
              return (
                o == an.k_EAccepted
                  ? (r = "#ChatRoom_BroadcastViewRequest_Accepted")
                  : o == an.k_ERejected &&
                    (r = "#ChatRoom_BroadcastViewRequest_Dismissed"),
                ve.createElement(
                  "div",
                  { className: "broadcastViewRequestDismissed" },
                  Object(re.d)(r, n, t)
                )
              );
            }
            var a =
                G.a.COMMUNITY_CDN_URL +
                "public/images/broadcast/apphub_default_thumbnail.jpg",
              s = (this.state.bThumbnailLoaded,
              this.state.nThumbnailUpdateCounter),
              c = Object(re.d)("#ChatRoom_BroadcastViewRequest_Invite", n);
            return ve.createElement(
              "div",
              {
                className:
                  "msg ChatMessageInvite broadcastInviteMsg broadcastViewRequestMsg"
              },
              ve.createElement(
                "div",
                { className: "leftInviteContainer" },
                this.state.strThumbnail &&
                  ve.createElement("img", {
                    src: this.state.strThumbnail + "?n=" + s,
                    onLoad: this.ShowThumbnail,
                    className:
                      "broadcastThumbnail" +
                      (this.state.bThumbnailLoaded ? " loaded" : "")
                  }),
                ve.createElement("img", {
                  src: a,
                  className:
                    "broadcastThumbnail broadcastThumbnailFallback" +
                    (this.state.bThumbnailLoaded ? "" : " loaded")
                }),
                ve.createElement("div", { className: "noisePattern" })
              ),
              ve.createElement(
                "div",
                { className: "rightInviteContainer" },
                ve.createElement(
                  cc,
                  null,
                  ve.createElement(
                    "div",
                    { className: "centerBlock" },
                    ve.createElement("div", { className: "inviteLabel" }, c),
                    ve.createElement(
                      "div",
                      { className: "productName" },
                      e.name
                    )
                  )
                ),
                ve.createElement(
                  "button",
                  {
                    className: "inviteButton inviteButtonWatchBroadcast",
                    onClick: this.OnAccept
                  },
                  Object(re.b)("#ChatRoom_BroadcastViewRequest_Accept")
                ),
                ve.createElement("div", {
                  className: "closeButton",
                  onClick: this.OnClose
                })
              )
            );
          }),
          R.c([M.a], e.prototype, "OnAccept", null),
          R.c([M.a], e.prototype, "OnClose", null),
          R.c([M.a], e.prototype, "ShowThumbnail", null),
          (e = R.c([Hi.observer], e))
        );
      })(ve.Component),
      Op = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_pollTimeout = void 0),
            (t.m_broadcastid = void 0),
            (t.m_bExpired = !1),
            (t.state = {
              strThumbnail: "",
              nUpdateInterval: 10,
              bThumbnailLoaded: !1,
              nThumbnailUpdateCounter: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.OnWatch = function(e) {
            if (
              "undefined" != typeof SteamClient &&
              void 0 !== SteamClient.WebChat
            ) {
              var t =
                  "steam://broadcast/watch/" + this.props.broadcaster.steamid64,
                n = zu(this, e);
              SteamClient.WebChat.OpenURLInClient(t, n.m_unPID);
            } else {
              yr(
                e,
                G.a.COMMUNITY_BASE_URL +
                  "broadcast/watch/" +
                  this.props.broadcaster.steamid64
              ),
                e.stopPropagation();
            }
          }),
          (e.prototype.ShowThumbnail = function() {
            this.setState({ bThumbnailLoaded: !0 });
          }),
          (e.prototype.render = function() {
            var e = this.props.broadcaster.persona.current_game_name,
              t = this.props.broadcaster.display_name,
              n =
                G.a.COMMUNITY_CDN_URL +
                "public/images/broadcast/apphub_default_thumbnail.jpg",
              o = (this.state.bThumbnailLoaded,
              this.state.nThumbnailUpdateCounter),
              i = Object(re.d)("#ChatRoom_BroadcastInvite_WatchGame", t);
            return ve.createElement(
              "div",
              { className: "msg ChatMessageInvite broadcastInviteMsg" },
              ve.createElement(
                "div",
                { className: "leftInviteContainer" },
                this.state.strThumbnail &&
                  ve.createElement("img", {
                    src: this.state.strThumbnail + "?n=" + o,
                    onLoad: this.ShowThumbnail,
                    className:
                      "broadcastThumbnail" +
                      (this.state.bThumbnailLoaded ? " loaded" : "")
                  }),
                ve.createElement("img", {
                  src: n,
                  className:
                    "broadcastThumbnail broadcastThumbnailFallback" +
                    (this.state.bThumbnailLoaded ? "" : " loaded")
                }),
                ve.createElement("div", { className: "noisePattern" })
              ),
              ve.createElement(
                "div",
                { className: "rightInviteContainer" },
                ve.createElement(
                  cc,
                  null,
                  ve.createElement(
                    "div",
                    { className: "centerBlock" },
                    ve.createElement("div", { className: "inviteLabel" }, i),
                    e &&
                      ve.createElement("div", { className: "productName" }, e)
                  )
                ),
                ">",
                ve.createElement(
                  "button",
                  {
                    className:
                      "DialogButton Primary inviteButtonWatchBroadcast",
                    onClick: this.OnWatch
                  },
                  Object(re.b)("#ChatRoom_BroadcastInvite_Watch")
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnWatch", null),
          R.c([M.a], e.prototype, "ShowThumbnail", null),
          e
        );
      })(ve.Component);
    ((hp = dp || (dp = {}))[(hp.NotLoaded = 0)] = "NotLoaded"),
      (hp[(hp.Loading = 1)] = "Loading"),
      (hp[(hp.Loaded = 2)] = "Loaded");
    var Ep = dp.NotLoaded,
      wp = [];
    function Mp() {
      Ep = dp.Loaded;
      for (var e = 0, t = wp; e < t.length; e++) {
        (0, t[e])();
      }
      wp = [];
    }
    var Dp = (function(n) {
      function e(e) {
        var t = n.call(this, e) || this;
        return (
          (t.m_strPlayerID = ""),
          (t.m_player = null),
          (t.m_playerContainer = null),
          (t.m_bPlayerReady = !1),
          (t.state = { bYoutubeLoaded: !1 }),
          t
        );
      }
      return (
        R.d(e, n),
        (e.prototype.componentWillMount = function() {
          this.m_strPlayerID = "YoutubePlayer_" + e.s_nPlayerIndex++;
        }),
        (e.prototype.componentWillUnmount = function() {
          var e;
          this.DestroyPlayer(), (e = this.OnYoutubeScriptsReady), w.c(wp, e);
        }),
        (e.prototype.shouldComponentUpdate = function(e, t) {
          if (!this.m_player) return !1;
          var n = this.props;
          return (
            n.autoplay != e.autoplay ||
            n.controls != e.controls ||
            n.showInfo != e.showInfo ||
            n.video != e.video
              ? this.CreatePlayer(e)
              : (n.width == e.width && n.height == e.height) ||
                (this.m_bPlayerReady &&
                  this.m_player.setSize(e.width, e.height)),
            !1
          );
        }),
        (e.prototype.DestroyPlayer = function() {
          if (this.m_player)
            try {
              this.m_player.stopVideo && this.m_player.stopVideo(),
                this.m_player.destroy && this.m_player.destroy();
            } catch (e) {
            } finally {
              this.m_player = null;
            }
        }),
        (e.prototype.BindPlayerContainer = function(e) {
          this.m_playerContainer != e &&
            ((this.m_playerContainer = e),
            this.DestroyPlayer(),
            this.m_playerContainer &&
              (function(t) {
                if (Ep != dp.Loaded) {
                  if (Ep == dp.NotLoaded) {
                    var e = document.createElement("script");
                    e.src = "https://www.youtube.com/iframe_api";
                    var n = document.getElementsByTagName("script")[0];
                    n.parentNode.insertBefore(e, n),
                      (window.onYouTubeIframeAPIReady = Mp);
                  }
                  wp.findIndex(function(e) {
                    return t == e;
                  }) < 0 && wp.push(t);
                } else t();
              })(this.OnYoutubeScriptsReady));
        }),
        (e.prototype.OnYoutubeScriptsReady = function() {
          this.CreatePlayer(this.props);
        }),
        (e.prototype.CreatePlayer = function(e) {
          if ((this.DestroyPlayer(), this.m_playerContainer)) {
            var t = !1 === e.autoplay ? 0 : 1,
              n = !0 === e.showInfo ? 1 : 0,
              o = !0 === e.controls ? 1 : 0,
              i = !0 === e.showFullscreenBtn ? 1 : 0,
              r = {
                width: String(e.width),
                height: String(e.height),
                videoId: e.video,
                playerVars: {
                  autoplay: t,
                  showinfo: n,
                  autohide: 1,
                  fs: i,
                  modestbranding: 1,
                  rel: 0,
                  playsinline: 0,
                  iv_load_policy: 3,
                  controls: o,
                  start: e.startSeconds
                },
                events: {
                  onReady: this.OnPlayerReady,
                  onStateChange: this.OnPlayerStateChange,
                  onError: this.OnError
                }
              },
              a = this.m_playerContainer.firstElementChild;
            (this.m_bPlayerReady = !1), (this.m_player = new YT.Player(a, r));
          }
        }),
        (e.prototype.OnPlayerReady = function(e) {
          if (((this.m_bPlayerReady = !0), this.props.onVideoInfoChanged)) {
            var t = this.m_player.getVideoData(),
              n = { strAuthor: "", strTitle: "", strVideoID: "" };
            t.author && (n.strAuthor = t.author),
              t.title && (n.strTitle = t.title),
              t.video_id && (n.strVideoID = t.video_id),
              this.props.onVideoInfoChanged(n);
          }
          this.m_player.setSize(this.props.width, this.props.height),
            this.props.onPlayerReady && this.props.onPlayerReady();
        }),
        (e.prototype.OnPlayerStateChange = function(e) {
          switch (e.data) {
            case YT.PlayerState.UNSTARTED:
            case YT.PlayerState.PLAYING:
            case YT.PlayerState.PAUSED:
            case YT.PlayerState.BUFFERING:
              break;
            case YT.PlayerState.ENDED:
              this.props.onMovieEnd && this.props.onMovieEnd();
          }
        }),
        (e.prototype.OnError = function(e) {
          console.log("Youtube: Playback failed", e),
            this.props.onError && this.props.onError(e);
        }),
        (e.prototype.render = function() {
          return ve.createElement(
            "div",
            {
              key: this.m_strPlayerID,
              ref: this.BindPlayerContainer,
              className: "YoutubePlayer"
            },
            ve.createElement("div", null, "Loading Youtube...")
          );
        }),
        (e.s_nPlayerIndex = 0),
        R.c([M.a], e.prototype, "BindPlayerContainer", null),
        R.c([M.a], e.prototype, "OnYoutubeScriptsReady", null),
        R.c([M.a], e.prototype, "CreatePlayer", null),
        R.c([M.a], e.prototype, "OnPlayerReady", null),
        R.c([M.a], e.prototype, "OnPlayerStateChange", null),
        R.c([M.a], e.prototype, "OnError", null),
        e
      );
    })(ve.Component);
    function Tp(e) {
      var t,
        n,
        o = ((t = e),
        (n = new RegExp(
          "^(steam://openurl(_external)?/)?(f|ht)tps?://([^@/?#]*@)?([^/#?]+)",
          "im"
        )),
        t.match(n)[5].toString());
      return o.startsWith("www.") && (o = o.slice(4)), o;
    }
    var Gp = function(e) {
        var t = e.children;
        return Se.a.createElement(
          cc,
          { text: t },
          Se.a.createElement(
            "div",
            { className: "spoilerMsgText" },
            Se.a.createElement("div", { className: "spoilerMsg" }, t)
          )
        );
      },
      Rp = n("SOfK"),
      Np = n.n(Rp),
      Lp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.CheckLoadPrettify = function() {
            var e = this;
            if (this.m_preElem) {
              var t = this.m_preElem.ownerDocument.defaultView;
              if (t && "object" != typeof t.PR && !0 !== t.PR) {
                t.PR = !0;
                var n = t.document.createElement("script");
                t.document.head.appendChild(n),
                  (n.onload = function() {
                    e.TryRunPrettyPrint();
                  }),
                  (n.src =
                    G.a.COMMUNITY_CDN_ASSET_URL + "prettify/prettify.js");
              }
            }
          }),
          (t.prototype.BindRef = function(e) {
            this.m_preElem = e;
          }),
          (t.prototype.TryRunPrettyPrint = function() {
            if ((this.CheckLoadPrettify(), this.m_preElem)) {
              var e = this.m_preElem.ownerDocument.defaultView;
              e && "object" == typeof e.PR && e.PR.prettyPrint();
            }
          }),
          (t.prototype.componentDidMount = function() {
            this.TryRunPrettyPrint();
          }),
          (t.prototype.componentDidUpdate = function() {
            this.TryRunPrettyPrint();
          }),
          (t.prototype.render = function() {
            return Se.a.createElement(
              "div",
              null,
              Se.a.createElement(
                "pre",
                {
                  className: Za("prettyprint", Np.a.CodeMessage),
                  ref: this.BindRef
                },
                this.props.children
              )
            );
          }),
          R.c([M.a], t.prototype, "BindRef", null),
          t
        );
      })(Se.a.Component),
      kp = function(e) {
        var t = e.children;
        return Se.a.createElement(
          "div",
          null,
          Se.a.createElement("pre", { className: Np.a.PreMessage }, t)
        );
      },
      Ap = function(e) {
        var t = e.children;
        return Se.a.createElement("div", { className: Np.a.QuoteMessage }, t);
      };
    n("MfD9");
    function Pp() {
      return {
        url: Vp,
        youtube: Up,
        filteredurl: _u,
        emoticon: gu,
        img: Hp,
        video: Wp,
        og: Kp,
        tweet: Yp,
        inviteurl: iu,
        publishedfile: pu,
        tradeofferlink: uu,
        econitem: hu,
        steamstore: bu,
        broadcast: du,
        oembed: Jp,
        spoiler: Qp,
        plusone: Zp,
        flip: $p,
        random: eu,
        quote: tu,
        pre: nu,
        code: ou
      };
    }
    var Fp,
      Bp,
      Vp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e,
              t,
              n = this.GetArgument(),
              o = this.props.children,
              i = null,
              r = ((e = n),
              ((t = document.createElement("a")).href = e),
              0 <= t.hostname.indexOf("xn--") ? t.href : e);
            return (
              r != n && (i = r),
              o || (i = r),
              Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining &&
              "string" != typeof o
                ? ve.createElement(
                    jp,
                    { href: n },
                    ve.createElement(Qo.u, null),
                    r
                  )
                : ve.createElement(fr, { href: n }, i || o)
            );
          }),
          t
        );
      })(ye),
      xp = (function(i) {
        function e(e) {
          var t = i.call(this, e) || this,
            n = Yo.ChatStore.EmbedStore.GetCollapsedState(
              t.props.unAccountIDSender,
              t.props.msgUniqueKey
            ),
            o = Yo.ChatStore.EmbedStore.GetWidths(
              t.props.unAccountIDSender,
              t.props.msgUniqueKey
            );
          return (
            (t.state = {
              nResizedWidth: n ? 16 : o ? o.nDesiredWidth : 0,
              bResized: void 0 !== o,
              bIsResizing: !1,
              bIsRestoring: !1,
              bMinimized: n,
              bIsMinimizing: !1
            }),
            (t.m_frameInitialXPos = -1),
            (t.m_frameInitialYPos = -1),
            (t.m_frameInitialWidth = -1),
            (t.m_frameDefaultWidth = o ? o.nDefaultWidth : -1),
            (t.m_frameDesiredWidth = o ? o.nDesiredWidth : -1),
            t
          );
        }
        return (
          R.d(e, i),
          (e.prototype.BindContainer = function(e) {
            (this.m_elContainer = e),
              this.m_elContainer &&
                450 < this.props.height &&
                this.HandleTallImages();
          }),
          (e.prototype.handleCollapse = function(e) {
            var t = this;
            this.state.bMinimized ||
              (this.m_frameDesiredWidth = this.m_elContainer.clientWidth),
              this.m_animationCollapse && this.m_animationCollapse.Cancel();
            var n = !this.state.bMinimized,
              o = n ? this.m_frameDesiredWidth : 16,
              i = n ? 16 : this.m_frameDesiredWidth;
            this.setState(
              { nResizedWidth: o, bMinimized: !1, bIsMinimizing: !0 },
              function() {
                (t.m_animationCollapse = new ui(
                  t,
                  { nResizedWidth: i },
                  {
                    msDuration: 300,
                    timing: "sine",
                    setStateOnComplete: { bMinimized: n, bIsMinimizing: !1 },
                    onComplete: t.OnSizeChanged
                  }
                )),
                  t.m_animationCollapse.Start();
              }
            ),
              Yo.ChatStore.EmbedStore.SetCollapsedState(
                this.props.unAccountIDSender,
                this.props.msgUniqueKey,
                n
              );
          }),
          (e.prototype.OnSizeChanged = function() {
            this.props.onSizeChanged(
              "BBCodeResizableComponent " +
                this.props.msgUniqueKey +
                this.state.bResized +
                this.state.bMinimized
            );
          }),
          (e.prototype.handleRestore = function(e) {
            var t = this;
            this.state.bResized &&
              (this.m_animationCollapse && this.m_animationCollapse.Cancel(),
              this.setState({ bIsRestoring: !0 }, function() {
                (t.m_animationCollapse = new ui(
                  t,
                  { nResizedWidth: t.m_frameDefaultWidth },
                  {
                    msDuration: 300,
                    timing: "sine",
                    setStateOnComplete: {
                      bMinimized: !1,
                      bIsRestoring: !1,
                      bResized: !1
                    },
                    onComplete: t.OnSizeChanged
                  }
                )),
                  t.m_animationCollapse.Start();
              }),
              Yo.ChatStore.EmbedStore.SetWidths(
                this.props.unAccountIDSender,
                this.props.msgUniqueKey,
                this.m_frameDefaultWidth,
                this.m_frameDefaultWidth
              ));
          }),
          (e.prototype.OnResize = function(e) {
            var t = e.currentTarget.ownerDocument.defaultView;
            t.addEventListener("mousemove", this.HandleMouseMove),
              t.addEventListener("mouseup", this.HandleMouseUp);
          }),
          (e.prototype.HandleMouseMove = function(e) {
            this.m_frameInitialXPos < 0 &&
              (this.m_frameInitialXPos = e.clientX),
              this.m_frameInitialWidth < 0 &&
                (this.m_frameInitialWidth = this.m_elContainer.clientWidth),
              this.m_frameDefaultWidth < 0 &&
                !this.state.bResized &&
                (this.m_frameDefaultWidth = this.m_elContainer.clientWidth),
              this.m_frameInitialYPos < 0 &&
                (this.m_frameInitialYPos = e.clientY);
            var t = e.clientX - this.m_frameInitialXPos,
              n = e.clientY - this.m_frameInitialYPos,
              o = this.m_frameInitialWidth + t + n,
              i = "image" == this.props.strMediaType ? 64 : 320;
            o < i && (o = i),
              1280 < o && (o = 1280),
              this.setState({
                nResizedWidth: o,
                bResized: !0,
                bIsResizing: !0
              }),
              this.OnSizeChanged();
          }),
          (e.prototype.HandleTallImages = function() {
            var e = 450 * (this.props.width / this.props.height),
              t = this.props.width;
            t > Math.min(1280, e) && (t = Math.min(1280, e)),
              t <
                parseInt(
                  this.m_elContainer.ownerDocument.defaultView.getComputedStyle(
                    this.m_elContainer
                  ).maxWidth
                ) && this.setState({ nMaxWidth: t }),
              this.OnSizeChanged();
          }),
          (e.prototype.HandleMouseUp = function(e) {
            e.view.removeEventListener("mousemove", this.HandleMouseMove),
              e.view.removeEventListener("mouseup", this.HandleMouseUp),
              (this.m_frameInitialXPos = -1),
              (this.m_frameInitialYPos = -1),
              (this.m_frameInitialWidth = -1),
              this.state.bIsResizing && this.setState({ bIsResizing: !1 }),
              !this.state.bMinimized &&
                this.m_elContainer &&
                (this.m_frameDesiredWidth = this.m_elContainer.clientWidth),
              Yo.ChatStore.EmbedStore.SetWidths(
                this.props.unAccountIDSender,
                this.props.msgUniqueKey,
                this.m_frameDesiredWidth,
                this.m_frameDefaultWidth
              );
          }),
          (e.prototype.render = function() {
            var e = {};
            0 < this.state.nResizedWidth
              ? (e.width = this.state.nResizedWidth + "px")
              : this.state.nMaxWidth &&
                (e.maxWidth = this.state.nMaxWidth + "px");
            var t = "BBCodeResizableComponent";
            this.props.className && (t += " " + this.props.className),
              this.state.bResized && (t += " Resized"),
              this.state.bIsResizing && (t += " ActivelyResizing"),
              this.state.bMinimized && (t += " Minimized"),
              this.state.bIsMinimizing && (t += " Minimizing");
            var n = this.props.titleInfo ? this.props.titleInfo : "";
            return ve.createElement(
              cc,
              {
                style: this.props["data-copystyle"],
                text: this.props["data-copytext"]
              },
              ve.createElement(
                "div",
                { className: t, style: e, ref: this.BindContainer },
                ve.createElement(
                  "div",
                  {
                    className: "BBCodeCollapsed",
                    onClick: this.handleCollapse,
                    title: n
                  },
                  Object(re.b)(
                    "#bbcode_" + this.props.strMediaType + "_minimized"
                  )
                ),
                this.props.children,
                ve.createElement(
                  "div",
                  {
                    className: "BBCodeRestoreControl",
                    onClick: this.handleRestore,
                    title: Object(re.b)(
                      "#bbcode_" + this.props.strMediaType + "_tooltip_restore"
                    )
                  },
                  ve.createElement("div", { className: "restoreSize" })
                ),
                ve.createElement(
                  "div",
                  {
                    className: "BBCodeResizeControl",
                    onMouseDown: this.OnResize,
                    title: Object(re.b)(
                      "#bbcode_" + this.props.strMediaType + "_tooltip_resize"
                    )
                  },
                  ve.createElement(Qo.K, null)
                ),
                ve.createElement(
                  "div",
                  {
                    className: "BBCodeCollapseControl",
                    onClick: this.handleCollapse,
                    title: this.state.bMinimized
                      ? Object(re.b)(
                          "#bbcode_" +
                            this.props.strMediaType +
                            "_tooltip_uncollapse"
                        )
                      : Object(re.b)(
                          "#bbcode_" +
                            this.props.strMediaType +
                            "_tooltip_collapse"
                        )
                  },
                  ve.createElement(Qo.eb, null)
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "BindContainer", null),
          R.c([M.a], e.prototype, "handleCollapse", null),
          R.c([M.a], e.prototype, "OnSizeChanged", null),
          R.c([M.a], e.prototype, "handleRestore", null),
          R.c([M.a], e.prototype, "OnResize", null),
          R.c([M.a], e.prototype, "HandleMouseMove", null),
          R.c([M.a], e.prototype, "HandleTallImages", null),
          R.c([M.a], e.prototype, "HandleMouseUp", null),
          e
        );
      })(ve.Component),
      Up = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { strTitle: "", strAuthor: "", strVideoID: "" }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.OnVideoInfoChanged = function(e) {
            var t = e.strTitle,
              n = e.strAuthor,
              o = e.strVideoID;
            this.setState({ strTitle: t, strAuthor: n, strVideoID: o });
          }),
          (e.prototype.OnPlayerReady = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "BBCodeYouTubeComponent " + this.state.strVideoID
              );
          }),
          (e.prototype.OnPlaceholderImageLoad = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "BBCodeYouTubeComponent " + this.state.strVideoID
              );
          }),
          (e.prototype.componentDidMount = function() {
            var e = this;
            W.findDOMNode(this).ownerDocument.defaultView.setTimeout(
              function() {
                e.props.context.onLoad &&
                  e.props.context.onLoad(
                    "BBCodeYouTubeComponent " + e.state.strVideoID
                  );
              },
              250
            );
          }),
          (e.prototype.GetVideoID = function() {
            return this.GetArgument("v").replace(
              /^[^a-z0-9\-_]*([a-z0-9\-_]+).*$/gi,
              "$1"
            );
          }),
          (e.prototype.render = function() {
            var e = this.state.strAuthor,
              t = this.state.strTitle,
              n = "https://www.youtube.com/watch?v=" + this.state.strVideoID,
              o = this.GetArgument("t");
            if (
              (o && (n += "&t=" + encodeURIComponent(o)),
              Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining)
            ) {
              var i =
                "https://www.youtube.com/watch?v=" +
                encodeURIComponent(this.GetVideoID());
              return (
                o && (i += "&t=" + encodeURIComponent(o)),
                ve.createElement(
                  jp,
                  { href: i },
                  ve.createElement(Qo.gb, null),
                  i
                )
              );
            }
            var r = 0;
            if (o) {
              var a = o.match(/^(?:([\d]+)h)?(?:([\d]+)m)?(?:([\d]+)s)?/);
              0 < a[0].length
                ? (null != a[1] && (r += 3600 * parseInt(a[1])),
                  null != a[2] && (r += 60 * parseInt(a[2])),
                  null != a[3] && (r += parseInt(a[3])))
                : (r = parseInt(o));
            }
            return ve.createElement(
              cc,
              { style: "block", text: [t, n] },
              ve.createElement(
                xp,
                {
                  className: "BBCodeYouTubeComponent",
                  unAccountIDSender: this.props.context.unAccountIDSender,
                  msgUniqueKey: this.props.context.key,
                  strMediaType: "video",
                  titleInfo: t,
                  onSizeChanged: this.props.context.onLoad
                },
                ve.createElement(
                  "div",
                  {
                    className:
                      "BBCodeYouTubeComponent_Sizer BBCodeResizableElement"
                  },
                  ve.createElement(Dp, {
                    video: this.GetVideoID(),
                    startSeconds: r,
                    width: 640,
                    height: 385,
                    autoplay: !1,
                    controls: !0,
                    showFullscreenBtn: !0,
                    onVideoInfoChanged: this.OnVideoInfoChanged,
                    onPlayerReady: this.OnPlayerReady
                  }),
                  ve.createElement(
                    cc,
                    { style: "block", text: [t, n] },
                    ve.createElement("img", {
                      src:
                        G.a.PUBLIC_SHARED_URL +
                        "images/responsive/youtube_16x9_placeholder.gif",
                      width: "100%",
                      onLoad: this.OnPlaceholderImageLoad
                    })
                  )
                ),
                0 < t.length &&
                  ve.createElement(
                    fr,
                    { className: "test HideWhenMinimized", href: n },
                    ve.createElement("div", { className: "BBCodeTitle" }, t)
                  ),
                0 < e.length &&
                  ve.createElement(
                    "div",
                    { className: "BBCodeDetails HideWhenMinimized" },
                    Object(re.b)("#bbcode_youtube_author", e)
                  )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnVideoInfoChanged", null),
          R.c([M.a], e.prototype, "OnPlayerReady", null),
          R.c([M.a], e.prototype, "OnPlaceholderImageLoad", null),
          e
        );
      })(ye);
    function jp(e) {
      var t = e.copyText;
      return (
        null == t && (t = e.href),
        ve.createElement(
          cc,
          { text: t },
          ve.createElement(
            "div",
            { className: "NonInlinedEmbed" },
            ve.createElement(fr, { href: e.href, title: e.href }, e.children)
          )
        )
      );
    }
    ((Bp = Fp || (Fp = {}))[(Bp.Loading = 1)] = "Loading"),
      (Bp[(Bp.Loaded = 2)] = "Loaded"),
      (Bp[(Bp.Error = 3)] = "Error");
    var Hp = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { eLoadingState: Fp.Loading }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.IsEmbeddedInOtherTag = function() {
            for (var e = 0, t = this.props.parentTags; e < t.length; e++) {
              if ("tweet" == t[e]) return !0;
            }
            return !1;
          }),
          (e.prototype.OnImageLoad = function() {
            this.setState({ eLoadingState: Fp.Loaded }),
              this.props.context.onLoad &&
                this.props.context.onLoad("BBCodeImage " + this.props.args.src);
          }),
          (e.prototype.OnImageError = function() {
            this.setState({ eLoadingState: Fp.Error });
          }),
          (e.prototype.render = function() {
            var e,
              t = this.GetArgument("thumbnail_src"),
              n = this.GetArgument("srcset", !0),
              o = this.GetArgument("src"),
              i = this.GetArgument("title"),
              r = this.state.eLoadingState,
              a = parseInt(this.GetArgument("width")),
              s = parseInt(this.GetArgument("height")),
              c = void 0 !== this.GetArgument("giphy_search");
            if (
              (s && (s = Math.max(0, Math.min(s, 652))),
              a && (a = Math.max(0, Math.min(a, 652))),
              c && (e = "/giphy " + this.GetArgument("giphy_search")),
              Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining)
            ) {
              if (c)
                return ve.createElement(
                  jp,
                  { href: o, copyText: [e, o] },
                  ve.createElement("div", {
                    className: "NonInlinedEmbedLogo NonInlinedEmbedLogo_Giphy"
                  }),
                  ve.createElement(
                    "span",
                    { style: { fontWeight: "bold" } },
                    " ",
                    Object(re.d)(
                      "#bbcode_image_link_giphy",
                      ve.createElement(
                        "span",
                        { className: "giphySearch" },
                        this.GetArgument("giphy_search")
                      )
                    )
                  )
                );
              var l = o;
              return (
                i &&
                  (l = Object(re.b)(
                    "#bbcode_disable_embed_inlining_parenthetical",
                    i,
                    Tp(o)
                  )),
                ve.createElement(
                  jp,
                  { href: o, copyText: [i, o] },
                  ve.createElement(Qo.v, null),
                  l
                )
              );
            }
            if (
              ("true" == this.GetArgument("proxied") && (t += "?s=652x652"),
              this.IsEmbeddedInOtherTag())
            )
              return ve.createElement(zp, {
                className: "embeddedImg",
                context: this.props.context,
                src: t,
                onContextMenu: vr
              });
            var p = "chatImageContainer";
            c && (p += " giphyImg"), r == Fp.Error && (p += " FailedToLoad");
            var u = { display: "none" };
            return (
              r == Fp.Loaded && (u = { display: "block" }),
              ve.createElement(
                ve.Fragment,
                null,
                c &&
                  ve.createElement(cc, null, ve.createElement("div", null, e)),
                ve.createElement(
                  cc,
                  { style: "block", text: [i, o] },
                  ve.createElement(
                    xp,
                    {
                      className: p,
                      width: a,
                      height: s,
                      strMediaType: "image",
                      unAccountIDSender: this.props.context.unAccountIDSender,
                      msgUniqueKey: this.props.context.key,
                      titleInfo: c
                        ? Object(re.b)(
                            "#bbcode_image_link_giphy",
                            this.GetArgument("giphy_search")
                          )
                        : o,
                      onSizeChanged: this.props.context.onLoad
                    },
                    r == Fp.Loading &&
                      ve.createElement(
                        "div",
                        { className: "LoadingImage" },
                        "Loading image: ",
                        ve.createElement(fr, { href: o }, o)
                      ),
                    r == Fp.Error &&
                      ve.createElement(
                        "div",
                        { className: "FailedToLoadImage" },
                        ve.createElement("span", null, "Failed to load image:"),
                        " ",
                        ve.createElement(fr, { href: o }, o)
                      ),
                    ve.createElement("img", {
                      style: u,
                      className: "chatImageFull BBCodeResizableElement",
                      src: t,
                      srcSet: n,
                      onLoad: this.OnImageLoad,
                      onError: this.OnImageError,
                      onContextMenu: function(e) {
                        Sr(e, o);
                      }
                    }),
                    r == Fp.Loaded &&
                      ve.createElement(
                        ve.Fragment,
                        null,
                        ve.createElement(
                          fr,
                          {
                            className: "chatImageURL",
                            href: o,
                            title: c
                              ? Object(re.b)(
                                  "#bbcode_image_tooltip_link_giphy",
                                  this.GetArgument("giphy_search")
                                )
                              : Object(re.b)("#bbcode_image_tooltip_link")
                          },
                          ve.createElement(Qo.I, null),
                          ve.createElement(
                            "div",
                            { className: "giphyTag" },
                            c &&
                              Object(re.d)(
                                "#bbcode_image_link_giphy",
                                ve.createElement(
                                  "span",
                                  { className: "giphySearch" },
                                  this.GetArgument("giphy_search")
                                )
                              )
                          )
                        )
                      )
                  )
                )
              )
            );
          }),
          R.c([M.a], e.prototype, "OnImageLoad", null),
          R.c([M.a], e.prototype, "OnImageError", null),
          e
        );
      })(ye),
      Wp = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bSeeking: !1, bPlay: !1, bError: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.StartVideo = function() {
            this.m_elVideo && this.m_elVideo.play();
          }),
          (e.prototype.BindVideo = function(e) {
            this.m_elVideo = e;
          }),
          (e.prototype.OnVideoPlay = function() {
            this.setState({ bPlay: !0 });
          }),
          (e.prototype.OnVideoPause = function() {
            this.state.bPlay ||
              this.state.bSeeking ||
              this.setState({ bPlay: !1 });
          }),
          (e.prototype.OnVideoError = function(e) {
            this.setState({ bError: !0 });
          }),
          (e.prototype.OnVideoLoaded = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeVideo " + this.props.context.key
              );
          }),
          (e.prototype.render = function() {
            this.GetArgument("simple");
            var e = this.GetArgument("src"),
              t = this.GetArgument("title"),
              n = this.state.bError;
            if (Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining) {
              var o = e;
              return (
                t &&
                  (o = Object(re.b)(
                    "#bbcode_disable_embed_inlining_parenthetical",
                    t,
                    Tp(e)
                  )),
                ve.createElement(
                  jp,
                  { href: e },
                  ve.createElement(Qo.ab, null),
                  o
                )
              );
            }
            var i,
              r = {
                controls: this.state.bPlay,
                autoPlay: !1,
                loop: !1,
                muted: !1
              };
            return (
              n &&
                (i = ve.createElement(
                  fr,
                  {
                    className: "failedVideoURL",
                    href: e,
                    title: Object(re.b)("#bbcode_video_tooltip_link")
                  },
                  ve.createElement("span", { className: "failedVideoSpan" }, e)
                )),
              n
                ? ve.createElement(
                    "div",
                    { className: "ChatMessageErrorSendingAlert VideoFailed" },
                    Object(re.d)("#Chat_VideoLoadError", i)
                  )
                : ve.createElement(
                    cc,
                    { style: "block", text: [t, e] },
                    ve.createElement(
                      xp,
                      {
                        className: "chatVideoContainer",
                        strMediaType: "video",
                        unAccountIDSender: this.props.context.unAccountIDSender,
                        msgUniqueKey: this.props.context.key,
                        titleInfo: e,
                        onSizeChanged: this.props.context.onLoad
                      },
                      ve.createElement(
                        "video",
                        R.a({ className: "BBCodeResizableElement" }, r, {
                          ref: this.BindVideo,
                          onPause: this.OnVideoPause,
                          onPlay: this.OnVideoPlay,
                          controlsList: "nodownload",
                          onError: this.OnVideoError,
                          onLoadedData: this.OnVideoLoaded
                        }),
                        ve.createElement("source", {
                          src: e,
                          type: this.GetArgument("type", !0),
                          onError: this.OnVideoError,
                          onLoad: this.OnVideoLoaded
                        })
                      ),
                      !this.state.bPlay &&
                        ve.createElement(
                          "div",
                          {
                            className: "chatVideoPlayControl HideWhenMinimized",
                            onClick: this.StartVideo
                          },
                          ve.createElement(
                            "div",
                            { className: "playButtonContainer" },
                            ve.createElement(Qo.G, null)
                          )
                        ),
                      ve.createElement(
                        fr,
                        {
                          className: "chatImageURL",
                          href: e,
                          title: Object(re.b)("#bbcode_video_tooltip_link")
                        },
                        ve.createElement(Qo.I, null)
                      )
                    )
                  )
            );
          }),
          R.c([M.a], e.prototype, "StartVideo", null),
          R.c([M.a], e.prototype, "BindVideo", null),
          R.c([M.a], e.prototype, "OnVideoPlay", null),
          R.c([M.a], e.prototype, "OnVideoPause", null),
          R.c([M.a], e.prototype, "OnVideoError", null),
          R.c([M.a], e.prototype, "OnVideoLoaded", null),
          e
        );
      })(ye),
      zp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnLoad = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "ImgNotifyChatOnLoad " + this.props.src
              );
          }),
          (t.prototype.render = function() {
            var e = this.props,
              t = (e.context, R.f(e, ["context"]));
            return ve.createElement("img", R.a({}, t, { onLoad: this.OnLoad }));
          }),
          R.c([M.a], t.prototype, "OnLoad", null),
          t
        );
      })(ve.Component);
    function qp(e) {
      var t = e.context,
        n = e.width,
        o = e.height,
        i = e.src,
        r = R.f(e, ["context", "width", "height", "src"]),
        a = i + "?s=" + n + "x" + o,
        s = a + "dpx2x";
      return ve.createElement(
        zp,
        R.a({ context: t }, r, { src: a, srcSet: a + " 1x, " + s + " 2x" })
      );
    }
    var Kp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.CopyToClipboard = function() {
            var e = this.GetArgument("url");
            e && 0 != e.length && ci.i(e);
          }),
          (t.prototype.HandleFocus = function(e) {
            e.target.select();
          }),
          (t.prototype.OnLoad = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeOpenGraph.OnLoad " + this.GetArgument("url")
              );
          }),
          (t.prototype.render = function() {
            var e = this.GetArgument("img"),
              t = this.GetArgument("title"),
              n = this.GetArgument("desc"),
              o = this.GetArgument("url"),
              i = Tp(o);
            if (Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining) {
              var r = o;
              return (
                t &&
                  (r = Object(re.b)(
                    "#bbcode_disable_embed_inlining_parenthetical",
                    t,
                    i
                  )),
                ve.createElement(
                  jp,
                  { href: o, copyText: [r, o] },
                  ve.createElement(Qo.u, null),
                  r
                )
              );
            }
            return ve.createElement(
              cc,
              { style: "block", text: [t, n, o] },
              ve.createElement(
                "div",
                { className: "ChatMessageOpenGraph" },
                ve.createElement(
                  "div",
                  { className: "OpenGraphContent" },
                  e &&
                    0 < e.length &&
                    ve.createElement(
                      "div",
                      { className: "OpenGraphImgBackground" },
                      ve.createElement("img", {
                        className: "ChatMessageOpenGraph_Image",
                        src: e,
                        onLoad: this.OnLoad
                      })
                    ),
                  e &&
                    0 < e.length &&
                    ve.createElement(
                      fr,
                      { className: "OpenGraphImgContainer", href: o },
                      ve.createElement(qp, {
                        width: 256,
                        height: 140,
                        context: this.props.context,
                        className: "ChatMessageOpenGraph_Image",
                        src: e,
                        onContextMenu: function(e) {
                          vr(e, o);
                        }
                      })
                    ),
                  ve.createElement(
                    "div",
                    { className: "ChatMessageOpenGraph_Body" },
                    t &&
                      0 < t.length &&
                      ve.createElement(
                        fr,
                        { className: "ChatMessageOpenGraph_Title", href: o },
                        t
                      ),
                    n &&
                      0 < n.length &&
                      ve.createElement(
                        "div",
                        { className: "ChatMessageOpenGraph_Description" },
                        n
                      )
                  ),
                  ve.createElement("div", { style: { clear: "left" } })
                ),
                ve.createElement(
                  "div",
                  { className: "OpenGraphFooter" },
                  ve.createElement(
                    "div",
                    { className: "OpenGraphMessageURL" },
                    ve.createElement(
                      "span",
                      {
                        className: "OpenGraphMessageURLPosition",
                        onFocus: this.HandleFocus,
                        onClick: this.HandleFocus
                      },
                      ve.createElement(
                        "span",
                        { className: "OpenGraphMessageURL_short" },
                        i
                      ),
                      ve.createElement("input", {
                        className: "OpenGraphMessageURL_full",
                        value: o,
                        onFocus: this.HandleFocus,
                        onClick: this.HandleFocus,
                        readOnly: !0
                      })
                    )
                  ),
                  ve.createElement(
                    "div",
                    {
                      className: "OpenGraphURLButton CopyToClipboard",
                      onClick: this.CopyToClipboard,
                      title: Object(re.b)("#Chat_Copy_Link_Clipboard")
                    },
                    ve.createElement(Qo.g, null)
                  )
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "CopyToClipboard", null),
          R.c([M.a], t.prototype, "HandleFocus", null),
          R.c([M.a], t.prototype, "OnLoad", null),
          t
        );
      })(ye),
      Yp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.FormatCreatedDate = function(e) {
            var t = new Date(e),
              n = [
                "Jan",
                "Feb",
                "Mar",
                "Apr",
                "May",
                "Jun",
                "Jul",
                "Aug",
                "Sep",
                "Oct",
                "Nov",
                "Dec"
              ][t.getMonth()];
            return t.getDate() + " " + n + " " + t.getFullYear();
          }),
          (t.prototype.OpenTweet = function(e) {
            for (var t = !1, n = e.target, o = e.currentTarget; n && n != o; ) {
              if (
                "A" == n.nodeName ||
                n.classList.contains("chatVideoContainer")
              ) {
                t = !0;
                break;
              }
              n = n.parentElement;
            }
            t || ci.a(o) || yr(e, this.GetArgument("url"));
          }),
          (t.prototype.OnImageLoaded = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeTweet " + this.GetArgument("url")
              );
          }),
          (t.prototype.render = function() {
            var e = this.GetArgument("created"),
              t = this.GetArgument("profile_name"),
              n = this.GetArgument("profile_screen_name"),
              o = this.GetArgument("profile_image"),
              i = this.GetArgument("profile_verified"),
              r = this.GetArgument("url"),
              a = "http://twitter.com/" + n,
              s = "true" == i;
            if (
              ((e = this.FormatCreatedDate(e)),
              Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining)
            ) {
              var c = new Date(e).toLocaleDateString(
                  re.a.GetPreferredLocales(),
                  { year: "numeric", month: "long", day: "numeric" }
                ),
                l = void 0;
              if ("string" == typeof this.props.children)
                l = this.props.children;
              else if (this.props.children instanceof Array)
                for (var p = 0, u = this.props.children; p < u.length; p++) {
                  var m = u[p];
                  if ("string" == typeof m) {
                    l = m;
                    break;
                  }
                }
              return ve.createElement(
                jp,
                { href: r, copyText: [l, r] },
                ve.createElement("div", {
                  className: "NonInlinedEmbedLogo NonInlinedEmbedLogo_Twitter"
                }),
                Object(re.b)("#bbcode_disable_embed_inlining_tweet", t, c),
                ve.createElement("br", null),
                ve.createElement(
                  "div",
                  { className: "NonInlinedEmbedSingleLine" },
                  l
                )
              );
            }
            return ve.createElement(
              "div",
              { className: "ChatMessageTweet", onClick: this.OpenTweet },
              ve.createElement(
                cc,
                { style: "block", text: t + " (@" + n + ")" },
                ve.createElement(
                  "div",
                  { className: "ChatMessageTweet_Header" },
                  ve.createElement(
                    fr,
                    { className: "ChatMessageTweet_ProfileImage", href: a },
                    ve.createElement("img", {
                      src: o,
                      onLoad: this.OnImageLoaded
                    })
                  ),
                  ve.createElement(
                    "div",
                    { className: "ChatMessageTweet_NameSection" },
                    ve.createElement(
                      "div",
                      { className: "ChatMessageTweet_NameGroup" },
                      ve.createElement(
                        fr,
                        { className: "ChatMessageTweet_Name", href: a },
                        t
                      ),
                      s &&
                        ve.createElement("div", {
                          className: "ChatMessageTweet_Verified"
                        })
                    ),
                    ve.createElement(
                      fr,
                      { className: "ChatMessageTweet_ScreenName", href: a },
                      "@",
                      n
                    )
                  ),
                  ve.createElement(fr, {
                    className: "ChatMessageTweet_Logo",
                    href: r
                  })
                )
              ),
              ve.createElement(
                cc,
                {
                  style: "block-continue prepend-innertext-with-newline",
                  text: r
                },
                ve.createElement(
                  "div",
                  { className: "ChatMessageTweet_Body" },
                  this.props.children
                )
              ),
              ve.createElement(
                "div",
                { className: "ChatMessageTweet_Footer" },
                ve.createElement(
                  "div",
                  { className: "ChatMessageTweet_Created" },
                  e
                )
              )
            );
          }),
          R.c([M.a], t.prototype, "OpenTweet", null),
          R.c([M.a], t.prototype, "OnImageLoaded", null),
          t
        );
      })(ye),
      Jp = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { bActivated: !1 }), t;
        }
        return (
          R.d(e, n),
          (e.prototype.Activate = function() {
            this.setState({ bActivated: !0 });
          }),
          (e.prototype.OnImageLoaded = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeOEmbed " + this.props.context.key
              );
          }),
          (e.prototype.render = function() {
            var e = this.GetArgument("url"),
              t = this.GetArgument("title"),
              n = this.GetArgument("author"),
              o = this.GetArgument("provider_name"),
              i = this.GetArgument("preview_image");
            if (Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining) {
              var r = e;
              return (
                t &&
                  (r = Object(re.b)(
                    "#bbcode_disable_embed_inlining_parenthetical",
                    t,
                    e
                  )),
                ve.createElement(
                  jp,
                  { href: e, copyText: [t, e] },
                  ve.createElement(Qo.u, null),
                  r
                )
              );
            }
            var a,
              s = !this.state.bActivated;
            if ((("SoundCloud" != o && "Spotify" != o) || (s = !1), s))
              a = ve.createElement(
                "div",
                { className: "OEmbedPreview", onClick: this.Activate },
                ve.createElement(
                  "div",
                  { className: "oembedImgContainer" },
                  ve.createElement(
                    cc,
                    { style: "block", text: [t, e] },
                    ve.createElement("img", {
                      src: i,
                      onLoad: this.OnImageLoaded
                    })
                  ),
                  ve.createElement(
                    "div",
                    { className: "oembedHint" },
                    Object(re.b)("#bbcode_oembed_preview_hint")
                  )
                ),
                ve.createElement("div", { className: "oembedProvider" }, o),
                ve.createElement("div", { className: "oembedTitle" }, t)
              );
            else {
              var c = void 0,
                l = this.GetArgument("iframe_attrs");
              if (l)
                c = ve.createElement(Xp, {
                  strIFrameJSON: l,
                  strProviderName: o
                });
              else {
                var p = this.props.children;
                "SoundCloud" == o &&
                  (p = p.replace("visual=true", "visual=false")),
                  (c = ve.createElement("div", {
                    className: "oembedInner",
                    dangerouslySetInnerHTML: { __html: p }
                  }));
              }
              a = ve.createElement(
                fr,
                { className: "OpenGraphImgContainer", href: e },
                c,
                o &&
                  o.length &&
                  ve.createElement("div", { className: "oembedProvider" }, o),
                t &&
                  0 < t.length &&
                  ve.createElement("div", { className: "oembedTitle" }, t),
                n &&
                  0 < n.length &&
                  ve.createElement(
                    "div",
                    { className: "oembedAuthor" },
                    Object(re.b)("#bbcode_oembed_author", n)
                  )
              );
            }
            return ve.createElement(
              cc,
              { style: "block", text: [t, e] },
              ve.createElement(
                "div",
                { className: "BBCodeOEmbedComponent " + o },
                a
              )
            );
          }),
          R.c([M.a], e.prototype, "Activate", null),
          R.c([M.a], e.prototype, "OnImageLoaded", null),
          e
        );
      })(ye);
    function Xp(e) {
      var t = e.strProviderName,
        n = JSON.parse(e.strIFrameJSON),
        o = { width: n.width, height: n.height },
        i = n.src;
      return (
        "SoundCloud" == t && (i = i.replace("visual=true", "visual=false")),
        "Vimeo" == t && (o.allowFullScreen = !0),
        ve.createElement(
          "iframe",
          R.a({}, o, {
            src: i,
            scrolling: "no",
            frameBorder: 0,
            sandbox: "allow-scripts allow-same-origin"
          })
        )
      );
    }
    var Qp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(Gp, null, this.props.children);
          }),
          t
        );
      })(ye),
      Zp = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.context,
              t = e.bAnimate,
              n = e.onAnimationStart,
              o = e.onAnimationEnd;
            return ve.createElement(
              "div",
              {
                className: Za("plusOne", t && "MsgAnimating"),
                onAnimationStart: n,
                onAnimationEnd: o
              },
              "+1"
            );
          }),
          t
        );
      })(ye),
      $p = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.context,
              t = e.bAnimate,
              n = e.onAnimationStart,
              o = e.onAnimationEnd,
              i = this.props.children,
              r = this.GetArgument("result"),
              a = Za("flipCoinAndResult", t && "MsgAnimating"),
              s = Za("flipCoinContainer", r);
            return ve.createElement(
              cc,
              { text: i },
              ve.createElement(
                "div",
                { className: a, onAnimationStart: n, onAnimationEnd: o },
                ve.createElement("div", null, "/flip:"),
                ve.createElement(
                  "div",
                  { className: s },
                  ve.createElement(
                    "div",
                    { className: "coin" },
                    ve.createElement("div", { className: "front" }),
                    ve.createElement("div", { className: "front_b" }),
                    ve.createElement("div", { className: "mid" }),
                    ve.createElement("div", { className: "back" }),
                    ve.createElement("div", { className: "back_b" })
                  )
                ),
                ve.createElement(
                  "div",
                  { className: "resultLabel" },
                  Object(re.b)("#SlashCommandCoinFlip_Result_" + r)
                )
              )
            );
          }),
          t
        );
      })(ye),
      eu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.Pad = function(e, t) {
            for (var n = e + ""; n.length < t; ) n = "0" + n;
            return n;
          }),
          (t.prototype.GetLastNumber = function(e) {
            if (e < 10) return e;
            var t = Math.pow(10, Math.floor(Math.log(e) / Math.log(10)) - 1),
              n = Math.floor(e / t);
            return n - 10 * Math.floor(n / 10);
          }),
          (t.prototype.render = function() {
            for (
              var e = this.props.children,
                t = this.GetArgument("min"),
                n = this.GetArgument("max"),
                o = this.Pad(this.GetArgument("result"), n.length),
                i = [],
                r = !0,
                a = 0;
              a < n.length;
              a++
            ) {
              "0" != o[a] && (r = !1);
              var s = n.length - a,
                c = s * Math.max(0.5 * n.length, 2) / n.length,
                l = 10 - a;
              i.push(
                ve.createElement(
                  "div",
                  {
                    key: "random" + a,
                    className: "numberCounterContainer number" + s
                  },
                  ve.createElement(
                    "div",
                    {
                      className: "numberColumn" + (r ? " startingZero" : ""),
                      style: {
                        animationDuration: c + "s",
                        animationName: "randomNumbers" + l
                      }
                    },
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel randomActual" },
                      o[a]
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 1)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 2)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 3)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 4)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 5)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 6)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 7)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 8)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      this.GetLastNumber(parseInt(o[a]) + 9)
                    ),
                    ve.createElement(
                      "div",
                      { className: "randomNumberLabel" },
                      o[a]
                    )
                  ),
                  ve.createElement("div", { className: "randomNumberShadow" })
                )
              );
            }
            var p = this.props.context,
              u = p.bAnimate,
              m = p.onAnimationStart,
              d = p.onAnimationEnd;
            return ve.createElement(
              cc,
              { text: e },
              ve.createElement(
                "div",
                {
                  className: Za("randomMsg", u && "MsgAnimating"),
                  onAnimationStart: m,
                  onAnimationEnd: d
                },
                ve.createElement("span", null, "/random "),
                ve.createElement(
                  "span",
                  { className: "randomValues" },
                  t,
                  "-",
                  n
                ),
                " : ",
                i
              )
            );
          }),
          t
        );
      })(ye),
      tu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(Ap, null, this.props.children);
          }),
          t
        );
      })(ye),
      nu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(kp, null, this.props.children);
          }),
          t
        );
      })(ye),
      ou = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            return ve.createElement(Lp, null, this.props.children);
          }),
          t
        );
      })(ye),
      iu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { invite: void 0 }), t;
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n = e.args.invitecode;
            return {
              invite: e.context.chat.ChatStore.InviteStore.GetInviteFromCode(n)
            };
          }),
          (e.prototype.render = function() {
            var e = this.props.context.chat.GetMember(
              this.props.context.unAccountIDSender
            );
            return ve.createElement(fp, {
              invite: this.state.invite,
              inviter: e
            });
          }),
          e
        );
      })(ye),
      ru = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = { invite: void 0, inviter: void 0, invitee: void 0 }), t
          );
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n,
              o,
              i,
              r = e.args.chatgroupid,
              a = e.args.chatid,
              s = e.context.chat;
            return (
              s.self.accountid == e.context.unAccountIDSender
                ? ((o = s.self),
                  (i = s.chat_partner),
                  (n = s.accountid_partner))
                : ((o = s.chat_partner), (i = s.self), (n = s.self.accountid)),
              {
                invite: e.context.chat.ChatStore.InviteStore.GetDirectInviteInfo(
                  r,
                  a,
                  n
                ),
                inviter: o,
                invitee: i
              }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(fp, {
              invite: this.state.invite,
              inviter: this.state.inviter,
              invitee: this.state.invitee
            });
          }),
          e
        );
      })(ye),
      au = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              inviter: void 0,
              inviteTarget: void 0,
              gameInvite: void 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n,
              o,
              i = e.args.appid,
              r = e.args.connect,
              a = e.context.chat;
            return (
              a.self.accountid == e.context.unAccountIDSender
                ? ((n = a.self), (o = a.chat_partner))
                : ((n = a.chat_partner), (o = a.self)),
              {
                inviter: n,
                inviteTarget: o,
                gameInvite: e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(
                  e.context.unAccountIDSender,
                  e.context.rtTimestamp,
                  parseInt(i),
                  r,
                  void 0
                )
              }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(Sp, {
              inviter: this.state.inviter,
              inviteTarget: this.state.inviteTarget,
              gameInvite: this.state.gameInvite
            });
          }),
          e
        );
      })(ye),
      su = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              inviter: void 0,
              inviteTarget: void 0,
              gameInvite: void 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n,
              o,
              i = e.args.appid,
              r = e.args.lobbyid,
              a = e.context.chat;
            return (
              a.self.accountid == e.context.unAccountIDSender
                ? ((n = a.self), (o = a.chat_partner))
                : ((n = a.chat_partner), (o = a.self)),
              {
                inviter: n,
                inviteTarget: o,
                gameInvite: e.context.chat.ChatStore.GameInviteStore.RegisterGameInvite(
                  e.context.unAccountIDSender,
                  e.context.rtTimestamp,
                  parseInt(i),
                  "",
                  r
                )
              }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(Sp, {
              inviter: this.state.inviter,
              inviteTarget: this.state.inviteTarget,
              gameInvite: this.state.gameInvite
            });
          }),
          e
        );
      })(ye),
      cu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              broadcastid: "",
              broadcaster: void 0,
              viewer: void 0,
              appid: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n,
              o,
              i = e.args.broadcastid,
              r = Number(e.args.appid),
              a = e.context.chat;
            return (
              a.self.accountid == e.context.unAccountIDSender
                ? ((n = a.self), (o = a.chat_partner))
                : ((n = a.chat_partner), (o = a.self)),
              { broadcastid: i, broadcaster: n, viewer: o, appid: r }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(Cp, {
              broadcastid: this.state.broadcastid,
              appid: this.state.appid,
              broadcaster: this.state.broadcaster,
              viewer: this.state.viewer
            });
          }),
          e
        );
      })(ye),
      lu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              broadcaster: void 0,
              viewer: void 0,
              requestid: 0,
              appid: 0
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n,
              o,
              i = Number(e.args.requestid),
              r = e.context.chat,
              a = Yo.FriendStore.self.persona.m_unGamePlayedAppID;
            return (
              r.self.accountid != e.context.unAccountIDSender
                ? ((n = r.self), (o = r.chat_partner))
                : ((n = r.chat_partner), (o = r.self)),
              { requestid: i, appid: a, broadcaster: n, viewer: o }
            );
          }),
          (e.prototype.render = function() {
            return ve.createElement(Ip, {
              requestid: this.state.requestid,
              appid: this.state.appid,
              broadcaster: this.state.broadcaster,
              viewer: this.state.viewer
            });
          }),
          e
        );
      })(ye),
      pu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bMounted = !1),
            (t.state = {
              bHaveVoteData: !1,
              bLocalVoteDown: !1,
              bLocalVoteUp: !1,
              nCommentCount: parseInt(t.GetArgument("num_comments_public"))
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.componentWillUnmount = function() {
            this.m_bMounted = !1;
          }),
          (e.prototype.componentDidMount = function() {
            var n = this;
            this.m_bMounted = !0;
            var e = Yo.CMInterface;
            if (e) {
              var t = this.GetArgument("fileid"),
                o = u.Init(Qe.a, 8509);
              o
                .Body()
                .add_published_file_ids()
                .set_published_file_id(t),
                e.SendMsgAndAwaitResponse(o, Qe.b).then(function(e) {
                  if (
                    1 == e.Body().eresult() &&
                    1 == e.Body().user_item_vote_details().length
                  ) {
                    var t = e
                      .Body()
                      .user_item_vote_details()[0]
                      .vote();
                    n.m_bMounted &&
                      n.setState({
                        bHaveVoteData: !0,
                        bLocalVoteUp: 1 == t,
                        bLocalVoteDown: 2 == t
                      });
                  }
                });
            }
          }),
          (e.prototype.VoteItem = function(t, e) {
            var n = this,
              o = Yo.CMInterface;
            if (o) {
              var i = u.Init(Qe.c, 8507);
              i.Body().set_published_file_id(e),
                i.Body().set_vote_up(t),
                o.SendMsgAndAwaitResponse(i, Qe.d).then(function(e) {
                  1 == e.Body().eresult() &&
                    n.m_bMounted &&
                    n.setState({ bLocalVoteUp: t, bLocalVoteDown: !t });
                });
            }
          }),
          (e.prototype.render = function() {
            var e = this,
              t = this.GetArgument("fileid"),
              n = this.GetArgument("url"),
              o = this.GetArgument("title"),
              i = this.GetArgument("description"),
              r = this.GetArgument("preview_url"),
              a = parseInt(this.GetArgument("file_type")),
              s = ["SteamPublishedFile"];
            switch (a) {
              case 4:
                s.push("video");
                break;
              case 3:
              case 5:
                s.push("image");
            }
            if (Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining) {
              var c = n;
              o &&
                (c = Object(re.b)(
                  "#bbcode_disable_embed_inlining_steam_workshop",
                  o
                ));
              var l = ve.createElement(Qo.u, null);
              switch (a) {
                case 4:
                  l = ve.createElement(Qo.ab, null);
                  break;
                case 3:
                case 5:
                  l = ve.createElement(Qo.v, null);
              }
              return ve.createElement(jp, { href: n, copyText: [c, n] }, l, c);
            }
            var p,
              u = parseInt(this.GetArgument("num_comments_public")),
              m = parseInt(this.GetArgument("votes_up"));
            return (
              this.state.bLocalVoteUp && m++,
              (o || i) &&
                (p = ve.createElement(
                  cc,
                  { text: [o, i, n] },
                  ve.createElement(
                    "div",
                    { className: "ChatLargeImageContainer_Description" },
                    o &&
                      ve.createElement(
                        fr,
                        { className: "ChatMessageOpenGraph_Title", href: n },
                        o
                      ),
                    i &&
                      ve.createElement(
                        "div",
                        { className: "ChatMessageOpenGraph_Description" },
                        i
                      )
                  )
                )),
              ve.createElement(
                "div",
                { className: s.join(" ") },
                r &&
                  0 < r.length &&
                  ve.createElement(
                    fr,
                    { className: "ChatLargeImageContainer", href: n },
                    ve.createElement(zp, {
                      context: this.props.context,
                      className: "ChatLargeImageContainer_Image",
                      src: r,
                      onContextMenu: function(e) {
                        Sr(e, n);
                      }
                    })
                  ),
                p,
                ve.createElement(fr, {
                  className: "SteamPublishedFile_Logo",
                  href: n
                }),
                this.state.bHaveVoteData &&
                  ve.createElement(
                    "div",
                    null,
                    ve.createElement(
                      "div",
                      { className: "workshopItemControls" },
                      ve.createElement(
                        "div",
                        { className: "workshopItemControlCtn" },
                        0 <= m &&
                          ve.createElement(
                            "span",
                            { className: "upvoteCount" },
                            m
                          ),
                        0 <= u &&
                          ve.createElement(
                            "span",
                            { className: "commentCount" },
                            u
                          ),
                        ve.createElement(
                          "span",
                          {
                            className: this.state.bLocalVoteUp
                              ? "general_btn voteUp toggled"
                              : "general_btn voteUp",
                            onClick: function() {
                              e.VoteItem(!0, t);
                            }
                          },
                          Object(re.b)(
                            "#bbcode_community_publishedfile_vote_up"
                          )
                        ),
                        ve.createElement("span", {
                          className: this.state.bLocalVoteDown
                            ? "general_btn voteDown toggled"
                            : "general_btn voteDown",
                          onClick: function() {
                            e.VoteItem(!1, t);
                          }
                        })
                      )
                    )
                  )
              )
            );
          }),
          e
        );
      })(ye),
      uu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.OnCreateOfferClick = function(e) {
            var t = "NewTradeOffer" + parseInt(this.GetArgument("partner"));
            Yu(e)
              .open(
                this.GetArgument("url"),
                t,
                "height=1120,width=1028,resize=yes,scrollbars=yes"
              )
              .focus();
          }),
          (t.prototype.render = function() {
            var e = this.GetArgument("url"),
              t = parseInt(this.GetArgument("partner"));
            if (t && t == this.props.context.unAccountIDSender) {
              var n = this.props.context.chat.GetMember(t);
              if (n) {
                var o = Object(re.b)("#TradeOfferLink_Label");
                return ve.createElement(
                  cc,
                  { style: "block", text: [o, e] },
                  ve.createElement(
                    "div",
                    {
                      className:
                        "ChatMessageInvite NoBGSplitInvite TradeOfferInvite"
                    },
                    ve.createElement(
                      "div",
                      { className: "leftInviteContainer" },
                      ve.createElement($s, {
                        friend: n,
                        context: { chat: this.props.context.chat },
                        bLarge: !0
                      })
                    ),
                    ve.createElement(
                      "div",
                      {
                        className: "rightInviteContainer rightInvite_Horizontal"
                      },
                      ve.createElement(
                        "div",
                        { className: "rightInviteContainerContent" },
                        ve.createElement(
                          "div",
                          { className: "inviteLabel TradeOfferInvite_Title" },
                          Object(re.d)(
                            "#TradeOfferLink_SharedTradeLink",
                            n.display_name
                          )
                        ),
                        ve.createElement(vp, { url: e, strLabel: o })
                      ),
                      ve.createElement(
                        "button",
                        {
                          className: "inviteButton inviteButtonJoinChat",
                          type: "button",
                          onClick: this.OnCreateOfferClick
                        },
                        Object(re.d)("#TradeOfferLink_SendUserOffer")
                      )
                    ),
                    ve.createElement("div", { style: { clear: "left" } })
                  )
                );
              }
            }
            return ve.createElement(fr, { href: e }, e);
          }),
          R.c([M.a], t.prototype, "OnCreateOfferClick", null),
          t
        );
      })(ye),
      mu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.ViewOfferClick = function(e) {
            var t = this.GetArgument("id"),
              n = G.a.COMMUNITY_BASE_URL + "tradeoffer/" + t + "/",
              o = "ViewTradeOffer" + t;
            Yu(e)
              .open(n, o, "height=1120,width=1028,resize=yes,scrollbars=yes")
              .focus();
          }),
          (t.prototype.ViewMyOffersClick = function(e) {
            var t = this.props.context.chat.self.steamid64,
              n = this.GetArgument("id");
            yr(
              e,
              G.a.COMMUNITY_BASE_URL +
                "profiles/" +
                t +
                "/tradeoffers/sent/#tradeofferid_" +
                n
            );
          }),
          (t.prototype.render = function() {
            var e = this.GetArgument("id"),
              t = parseInt(this.GetArgument("sender"));
            if (!e && this.GetArgument("url"))
              return ve.createElement(uu, R.a({}, this.props));
            var n = this.props.context.chat,
              o = n.self.accountid == t,
              i = ve.createElement(
                "span",
                { className: "inviteeNameLabel" },
                n.chat_partner.display_name
              );
            return ve.createElement(
              "div",
              { className: "ChatMessageInvite TradeOfferInvite" },
              ve.createElement(
                "div",
                { className: "leftInviteContainer" },
                ve.createElement($s, {
                  friend: o ? n.self : n.chat_partner,
                  context: { chat: n },
                  bLarge: !0
                }),
                ve.createElement(Qo.Y, null)
              ),
              ve.createElement(
                "div",
                {
                  className:
                    "rightInviteContainer" +
                    (o ? " rightInvite_Horizontal" : "")
                },
                ve.createElement(
                  "div",
                  { className: "rightInviteContainerContent" },
                  ve.createElement(
                    cc,
                    null,
                    ve.createElement(
                      "div",
                      { className: "inviteLabel TradeOfferInvite_Title" },
                      Object(re.d)(
                        o
                          ? "#TradeOffer_YouSentFriend"
                          : "#TradeOffer_FriendSentYou",
                        i
                      )
                    ),
                    0 < ve.Children.count(this.props.children) &&
                      ve.createElement(
                        "div",
                        { className: "TradeOffer_NoteFromFriendCtn" },
                        ve.createElement("div", {
                          className: "TradeOffer_NoteFromFriend_QuoteArrow"
                        }),
                        ve.createElement(
                          "div",
                          {
                            className: "inviteLabel TradeOffer_NoteFromFriend"
                          },
                          this.props.children
                        )
                      )
                  )
                ),
                ve.createElement(
                  "button",
                  {
                    className: "DialogButton Primary",
                    type: "button",
                    onClick: o ? this.ViewMyOffersClick : this.ViewOfferClick
                  },
                  Object(re.d)("#TradeOffer_ViewTradeOffer")
                )
              ),
              ve.createElement("div", { style: { clear: "left" } })
            );
          }),
          R.c([M.a], t.prototype, "ViewOfferClick", null),
          R.c([M.a], t.prototype, "ViewMyOffersClick", null),
          t
        );
      })(ye),
      du = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (t.state = { broadcaster: void 0 }), t;
        }
        return (
          R.d(e, n),
          (e.getDerivedStateFromProps = function(e, t) {
            var n = new E.a(e.args.broadcaster);
            return { broadcaster: Yo.FriendStore.GetPlayer(n.GetAccountID()) };
          }),
          (e.prototype.render = function() {
            return ve.createElement(Op, {
              broadcaster: this.state.broadcaster
            });
          }),
          e
        );
      })(ye),
      hu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.m_bMounted = !1),
            (t.state = {
              bLoading: !0,
              bStillLoading: !1,
              bLoadFail: !1,
              bLoadSuccess: !1,
              description: null
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.CopyToClipboard = function() {
            var e = this.GetArgument("url");
            e && 0 != e.length && ci.i(e);
          }),
          (e.prototype.componentWillUnmount = function() {
            this.m_bMounted = !1;
          }),
          (e.prototype.componentDidMount = function() {
            var t = this;
            this.m_bMounted = !0;
            var e = Yo.CMInterface;
            if (e) {
              var n = parseInt(this.GetArgument("appid")),
                o = this.GetArgument("classid"),
                i = this.GetArgument("instanceid"),
                r = u.Init(Ge.a);
              r.Body().set_language(G.a.LANGUAGE), r.Body().set_appid(n);
              var a = r.Body().add_classes();
              a.set_classid(o),
                a.set_instanceid(i),
                Ge.c
                  .GetAssetClassInfo(e.GetServiceTransport(), r)
                  .then(function(e) {
                    t.m_bMounted &&
                      (1 == e.GetEResult()
                        ? t.setState({
                            bLoading: !1,
                            bLoadFail: !1,
                            bLoadSuccess: !0,
                            description: e.Body().descriptions()[0]
                          })
                        : t.setState({
                            bLoading: !1,
                            bLoadFail: !0,
                            bLoadSuccess: !1
                          }));
                  });
            }
            W.findDOMNode(this).ownerDocument.defaultView.setTimeout(
              function() {
                t.m_bMounted &&
                  t.setState(function(e) {
                    return e.bLoading ? { bStillLoading: !0 } : null;
                  });
              },
              500
            );
          }),
          (e.prototype.OnImageLoaded = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeEconItem " + this.GetArgument("url")
              );
          }),
          (e.prototype.render = function() {
            var e = this.GetArgument("image"),
              t = this.GetArgument("url"),
              n = parseInt(this.GetArgument("appid")),
              o = this.GetArgument("contextid"),
              i = this.GetArgument("assetid"),
              r = this.GetArgument("market_hash_name"),
              a = parseInt(this.GetArgument("owner")),
              s = Yo.AppInfoStore.GetAppInfo(n);
            if (a && t) {
              var c = this.props.context.chat.GetMember(a),
                l = c ? c.display_name : this.GetArgument("persona"),
                p = Tp(t),
                u = G.a.COMMUNITY_BASE_URL + "economy/image/" + e + "/512x512",
                m = { color: "" },
                d = G.a.COMMUNITY_BASE_URL + "market/listings/" + n + "/" + r,
                h =
                  G.a.COMMUNITY_BASE_URL +
                  "tradeoffer/new/?partner=" +
                  a +
                  "&for_items[]=" +
                  n +
                  "_" +
                  o +
                  "_" +
                  i;
              return (
                this.state.bLoadSuccess &&
                  (this.state.description.name_color() &&
                    (m.color = "#" + this.state.description.name_color()),
                  this.state.description.icon_url_large()
                    ? (u =
                        G.a.COMMUNITY_BASE_URL +
                        "economy/image/" +
                        this.state.description.icon_url_large() +
                        "/512x512")
                    : this.state.description.icon_url() &&
                      (u =
                        G.a.COMMUNITY_BASE_URL +
                        "economy/image/" +
                        this.state.description.icon_url() +
                        "/512x512")),
                ve.createElement(
                  cc,
                  { text: t },
                  ve.createElement(
                    "div",
                    { className: "ChatMessageOpenGraph" },
                    ve.createElement(
                      "div",
                      { className: "OpenGraphContent ClientFetchesData" },
                      ve.createElement(
                        "div",
                        { className: "OpenGraphImgBackground" },
                        ve.createElement("img", {
                          className: "ChatMessageOpenGraph_Image",
                          src: u,
                          onLoad: this.OnImageLoaded
                        })
                      ),
                      ve.createElement(
                        fr,
                        { className: "OpenGraphImgContainer", href: t },
                        ve.createElement(zp, {
                          context: this.props.context,
                          className: "ChatMessageOpenGraph_Image",
                          src: u,
                          onContextMenu: function(e) {
                            vr(e, t);
                          }
                        })
                      ),
                      ve.createElement(
                        "div",
                        { className: "ChatMessageOpenGraph_Body" },
                        this.state.bStillLoading &&
                          ve.createElement(Ea, {
                            size: "medium",
                            position: "center"
                          }),
                        this.state.bLoadSuccess &&
                          ve.createElement(
                            cc,
                            {
                              text: [
                                Object(re.b)(
                                  "#bbcode_econ_ItemTitle",
                                  l,
                                  this.state.description.name()
                                ),
                                t
                              ]
                            },
                            ve.createElement(
                              "div",
                              null,
                              ve.createElement(
                                fr,
                                {
                                  className: "ChatMessageOpenGraph_Title",
                                  href: t,
                                  style: m
                                },
                                Object(re.b)(
                                  "#bbcode_econ_ItemTitle",
                                  l,
                                  this.state.description.name()
                                )
                              ),
                              ve.createElement(
                                "div",
                                {
                                  className: "ChatMessageOpenGraph_Description"
                                },
                                ve.createElement(
                                  "div",
                                  { className: "EconItemOpenGraph_GameInfo" },
                                  ve.createElement("img", {
                                    src: s.icon_url,
                                    onLoad: this.OnImageLoaded
                                  }),
                                  ve.createElement(
                                    "div",
                                    null,
                                    ve.createElement("div", null, s.m_strName),
                                    ve.createElement(
                                      "div",
                                      null,
                                      this.state.description.type()
                                    )
                                  )
                                )
                              ),
                              ve.createElement(
                                "div",
                                { style: { marginTop: "1em" } },
                                this.state.description.tradable() &&
                                  Yo.CMInterface &&
                                  a != Yo.CMInterface.steamid.GetAccountID() &&
                                  ve.createElement(
                                    fr,
                                    {
                                      className: "general_btn inline",
                                      href: h
                                    },
                                    Object(re.b)(
                                      "#bbcode_econ_TradeWithOwner",
                                      l
                                    )
                                  ),
                                this.state.description.marketable() &&
                                  ve.createElement(
                                    fr,
                                    {
                                      className: "general_btn inline",
                                      href: d
                                    },
                                    Object(re.b)("#bbcode_econ_ViewInMarket")
                                  )
                              )
                            )
                          ),
                        this.state.bLoadFail &&
                          ve.createElement(
                            "div",
                            null,
                            ve.createElement(
                              fr,
                              {
                                className: "ChatMessageOpenGraph_Title",
                                href: t
                              },
                              Object(re.b)("#bbcode_econ_UnknownItem")
                            ),
                            ve.createElement(
                              "div",
                              { className: "ChatMessageOpenGraph_Description" },
                              Object(re.b)("#bbcode_econ_LoadFail")
                            )
                          )
                      )
                    ),
                    ve.createElement(
                      "div",
                      { className: "OpenGraphFooter" },
                      ve.createElement(
                        fr,
                        { className: "OpenGraphMessageURL", href: t },
                        ve.createElement(
                          "span",
                          { className: "OpenGraphMessageURLPosition" },
                          ve.createElement(
                            "span",
                            { className: "OpenGraphMessageURL_short" },
                            p
                          ),
                          ve.createElement(
                            "span",
                            { className: "OpenGraphMessageURL_full" },
                            t
                          )
                        )
                      ),
                      ve.createElement(
                        "div",
                        {
                          className: "OpenGraphURLButton CopyToClipboard",
                          onClick: this.CopyToClipboard
                        },
                        ve.createElement(Qo.g, null)
                      )
                    )
                  )
                )
              );
            }
            return ve.createElement(fr, { href: t }, t);
          }),
          R.c([M.a], e.prototype, "CopyToClipboard", null),
          R.c([M.a], e.prototype, "OnImageLoaded", null),
          (e = R.c([Hi.observer], e))
        );
      })(ye),
      _u = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.props.children ? this.props.args[""] : "";
            return ve.createElement(
              cc,
              { text: Object(re.b)("#bbcode_linkremoved") },
              ve.createElement(
                "span",
                {
                  className: "filteredURL bb_removedlink",
                  title: Object(re.b)("#Community_RemoveLink_Tooltip")
                },
                ve.createElement(Qo.d, null),
                ve.createElement(
                  "span",
                  { className: "threatURLDesc" },
                  Object(re.b)("#bbcode_linkremoved_desc")
                ),
                ve.createElement("span", { className: "threatURL" }, e)
              )
            );
          }),
          t
        );
      })(ye),
      fu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = this.GetArgument();
            if (e) {
              if (("here" == e && (e = "online"), "all" == e || "online" == e))
                return ve.createElement(
                  "span",
                  { className: "mention me" },
                  ve.createElement(
                    "span",
                    { className: "MentionAtSymbol" },
                    "@"
                  ),
                  e
                );
              var t = parseInt(e),
                n = t && this.props.context.chat.GetMember(t);
              if ((n || (n = t && Yo.FriendStore.GetPlayer(t)), n)) {
                var o = n.accountid == this.props.context.chat.self.accountid;
                return ve.createElement(
                  Xs,
                  { friend: n, context: { chat: this.props.context.chat } },
                  ve.createElement(
                    "span",
                    { className: "mention" + (o ? " me" : "") },
                    ve.createElement(
                      "span",
                      { className: "MentionAtSymbol" },
                      "@"
                    ),
                    n.display_name
                  )
                );
              }
            }
            return ve.createElement("span", null, "@" + e);
          }),
          (t = R.c([Hi.observer], t))
        );
      })(ye),
      gu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.render = function() {
            var e = "";
            return (
              "string" == typeof this.props.children
                ? (e = this.props.children)
                : ve.Children.forEach(this.props.children, function(e) {}),
              e
                ? ve.createElement(lc, {
                    emoticon: e,
                    large: this.props.context.bUseLargeEmoticons
                  })
                : null
            );
          }),
          t
        );
      })(ye),
      bu = (function(n) {
        function e(e) {
          var t = n.call(this, e) || this;
          return (
            (t.state = {
              SteamStoreItem: null,
              bStoreRequestFailed: !1,
              bPlayVideo: !1,
              nThumbnailHovered: -1
            }),
            t
          );
        }
        return (
          R.d(e, n),
          (e.prototype.ExtractGameData = function(e, t) {
            var n = e.name,
              o = e.is_free,
              i = e.short_description,
              r = e.header_image,
              a = e.developers,
              s = e.screenshots,
              c = e.movies,
              l = e.release_date,
              p = e.price_overview;
            return {
              name: n,
              is_free: o,
              description: i,
              header_image: r,
              developer: a && a[0],
              screenshot: s && s[0] && s[0].path_thumbnail,
              screenshots: s && s,
              movie:
                c &&
                c[0] &&
                c[0].webm &&
                c[0].webm[480] &&
                c[0].webm[480].replace("http://", "https://"),
              thumbnail: c && c[0] && c[0].thumbnail,
              release_date: l && l.date,
              url: G.a.STORE_BASE_URL + "app/" + t,
              price:
                p &&
                "USD" === p.currency &&
                p.final &&
                "$" + (p.final / 100).toString(),
              initial_price:
                p &&
                "USD" === p.currency &&
                p.initial &&
                "$" + (p.initial / 100).toString(),
              discount: p && p.discount_percent && p.discount_percent
            };
          }),
          (e.prototype.OnFrameLoaded = function() {
            this.props.context.onLoad &&
              this.props.context.onLoad(
                "CBBCodeSteamStore " + this.GetArgument("app")
              );
          }),
          (e.prototype.componentDidMount = function() {
            var o = this,
              i = this.GetArgument("app"),
              e = G.a.COUNTRY || "US";
            C.a
              .get(
                G.a.STORE_BASE_URL +
                  "api/appdetails?appids=" +
                  i +
                  "&cc=" +
                  e +
                  "&language=" +
                  G.a.LANGUAGE +
                  "&filters=basic,price_overview,developers,screenshots,movies,release_date"
              )
              .then(function(e) {
                var t = null;
                if (e && e.data) {
                  var n = o.GetArgument("app");
                  t = e.data[n];
                }
                t && t.success
                  ? o.setState(
                      {
                        SteamStoreItem: o.ExtractGameData(t.data, i),
                        bStoreRequestFailed: !1
                      },
                      o.OnFrameLoaded
                    )
                  : o.setState({ bStoreRequestFailed: !0 });
              });
          }),
          (e.prototype.OpenStoreLink = function(e) {
            yr(e, this.state.SteamStoreItem.url);
          }),
          (e.prototype.PlayVideoClicked = function() {
            this.setState({ bPlayVideo: !this.state.bPlayVideo });
          }),
          (e.prototype.OnThumbnailOver = function(e) {
            this.setState({ nThumbnailHovered: e });
          }),
          (e.prototype.OnThumbnailLeave = function() {
            this.setState({ nThumbnailHovered: -1 });
          }),
          (e.prototype.CopyToClipboard = function() {
            var e = this.state.SteamStoreItem.url;
            e && 0 != e.length && ci.i(e);
          }),
          (e.prototype.render = function() {
            if (Yo.SettingsStore.FriendsSettings.bDisableEmbedInlining) {
              AssertMsg(
                "string" == typeof this.props.children,
                "Weird contents in CBBCodeSteamStore"
              );
              var e = this.props.children;
              return ve.createElement(
                jp,
                { href: e },
                ve.createElement(Qo.u, null),
                e
              );
            }
            var t = this.GetArgument("app"),
              n =
                "undefined" != typeof SteamClient &&
                void 0 !== SteamClient.SharedConnection,
              o =
                G.a.STORE_BASE_URL +
                "widget/" +
                t +
                "?friendsui=1&inclient=" +
                (n ? "1" : "0");
            return ve.createElement("iframe", {
              className: "CBBCodeSteamStore",
              src: o,
              frameBorder: "0",
              width: "640",
              height: "190",
              onLoad: this.OnFrameLoaded
            });
          }),
          R.c([M.a], e.prototype, "ExtractGameData", null),
          R.c([M.a], e.prototype, "OnFrameLoaded", null),
          R.c([M.a], e.prototype, "OpenStoreLink", null),
          R.c([M.a], e.prototype, "PlayVideoClicked", null),
          R.c([M.a], e.prototype, "OnThumbnailOver", null),
          R.c([M.a], e.prototype, "OnThumbnailLeave", null),
          R.c([M.a], e.prototype, "CopyToClipboard", null),
          e
        );
      })(ye);
    function vu(e) {
      if (e.context.chat instanceof zt) {
        var t = e.args.appid,
          n = Yo.AppInfoStore.GetAppInfo(parseInt(t)).m_strName;
        return {
          title: "",
          body: Object(re.b)(
            "#Friend_Notification_GameInvite",
            e.context.chat.chat_partner.display_name,
            n
          )
        };
      }
      return null;
    }
    function Su(e) {
      if (e.context.chat instanceof zt) {
        var t = e.args.appid,
          n = Yo.AppInfoStore.GetAppInfo(parseInt(t)).m_strName;
        return {
          title: "",
          body: Object(re.b)(
            "#Friend_Notification_GameInvite",
            e.context.chat.chat_partner.display_name,
            n
          )
        };
      }
      return null;
    }
    function yu(e) {
      return e.context.chat instanceof zt
        ? null != e.args.chatid
          ? {
              title: "",
              body: Object(re.b)(
                "#Friend_Notification_InviteVoice",
                e.context.chat.chat_partner.display_name,
                e.args.chatname
              )
            }
          : {
              title: "",
              body: Object(re.b)(
                "#Friend_Notification_Invite",
                e.context.chat.chat_partner.display_name,
                e.args.chatgroupname
              )
            }
        : null;
    }
    function Cu(e) {
      var t = e.context.chat;
      return t instanceof zt
        ? {
            title: Object(re.b)(
              "#TradeOffer_FriendSentYou",
              t.chat_partner.display_name
            ),
            body: e.text
          }
        : null;
    }
    function Iu(e) {
      return { body: Object(re.b)("#Notification_Spoiler") };
    }
    var Ou = (function() {
        function e() {}
        return (
          (e.prototype.GetObject = function(e) {
            return this.GetString(e).then(function(e) {
              return e ? JSON.parse(e) : null;
            });
          }),
          (e.prototype.StoreObject = function(e, t) {
            return this.StoreString(e, JSON.stringify(t));
          }),
          e
        );
      })(),
      Eu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetString = function(n) {
            return SteamClient.Storage.GetString(n).then(function(e) {
              if (e) return e;
              var t = localStorage.getItem(n);
              return t && SteamClient.Storage.SetString(n, t), t;
            });
          }),
          (t.prototype.StoreString = function(e, t) {
            return SteamClient.Storage.SetString(e, t), Promise.resolve();
          }),
          (t.prototype.RemoveObject = function(e) {
            return SteamClient.Storage.DeleteKey(e), Promise.resolve();
          }),
          t
        );
      })(Ou),
      wu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetString = function(e) {
            return Promise.resolve(localStorage.getItem(e));
          }),
          (t.prototype.StoreString = function(e, t) {
            return localStorage.setItem(e, t), Promise.resolve();
          }),
          (t.prototype.RemoveObject = function(e) {
            return localStorage.removeItem(e), Promise.resolve();
          }),
          t
        );
      })(Ou),
      Mu = (function() {
        function e() {
          this.m_mapEmoticonHovers = new Map();
        }
        return (
          (e.prototype.GetEmoticonHover = function(e) {
            var t = this.m_mapEmoticonHovers.get(e);
            return (
              t || ((t = new Du(e)), this.m_mapEmoticonHovers.set(e, t)), t
            );
          }),
          e
        );
      })(),
      Du = (function() {
        function i(e) {
          (this.m_bVisible = !1),
            (this.m_strEmoticonHoverHTML = void 0),
            (this.m_bLoadingData = !1),
            (this.m_strEmoticonName = e);
        }
        return (
          Object.defineProperty(i.prototype, "visible", {
            get: function() {
              return this.m_bVisible && !!this.m_strEmoticonHoverHTML;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(i.prototype, "emoticon_html", {
            get: function() {
              return this.m_strEmoticonHoverHTML;
            },
            enumerable: !0,
            configurable: !0
          }),
          (i.prototype.Show = function(e) {
            var t = this;
            this.EnsureEmoticonLoaded();
            var n = e.currentTarget,
              o = ve.createElement(pc, { hover: this, target: n });
            i.sm_embeddedElements
              .ShowElementDelayed(n.ownerDocument, 50, o, this)
              .then(function() {
                t.m_bVisible = !0;
              });
          }),
          (i.prototype.Hide = function(e) {
            (this.m_bVisible = !1),
              i.sm_embeddedElements.HideElement(
                e.currentTarget.ownerDocument,
                this,
                500
              );
          }),
          (i.prototype.EnsureEmoticonLoaded = function() {
            var t = this;
            if (
              void 0 === this.m_strEmoticonHoverHTML &&
              !this.m_bLoadingData
            ) {
              this.m_bLoadingData = !0;
              var e = "OnLoadEmoticon_" + this.m_strEmoticonName,
                n =
                  G.a.COMMUNITY_CDN_URL +
                  "economy/emoticonhover/" +
                  encodeURIComponent(this.m_strEmoticonName) +
                  "/jsonp.js?callback=" +
                  encodeURIComponent(e) +
                  "&l=" +
                  encodeURIComponent(G.a.LANGUAGE),
                o = void 0,
                i = void 0,
                r = function() {
                  (t.m_bLoadingData = !1),
                    delete window[e],
                    o && ClearBackgroundTimeout(o),
                    i && i.remove();
                };
              (window[e] = function(e) {
                (t.m_strEmoticonHoverHTML = e), (t.m_bVisible = !0), r();
              }),
                (o = SetBackgroundTimeout(r, 5e3)),
                ((i = window.document.createElement("script")).type =
                  "text/javascript"),
                (i.async = !0),
                (i.src = n),
                (i.onerror = r),
                window.document.head.appendChild(i);
            }
          }),
          (i.sm_embeddedElements = new $o.a("CEmoticonHoverContainer")),
          R.c([m.observable], i.prototype, "m_bVisible", void 0),
          R.c([m.observable], i.prototype, "m_strEmoticonHoverHTML", void 0),
          i
        );
      })(),
      Tu = (function() {
        function e() {
          (this.m_mapBrowserInfo = new Map()),
            (this.m_hOverlayChatBrowserInfoChanged = null);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_CMInterface = e),
              (this.m_hOverlayChatBrowserInfoChanged = SteamClient.WebChat.RegisterOverlayChatBrowserInfoChanged(
                this.OnOverlayChatBrowserInfoChanged
              )),
              this.m_CMInterface.RunWhenLoggedOn(function() {
                t.OnOverlayChatBrowserInfoChanged();
              });
          }),
          (e.prototype.HasOverlayInstance = function(e) {
            return this.m_mapBrowserInfo.has(e);
          }),
          (e.prototype.OnOverlayChatBrowserInfoChanged = function() {
            var s = this;
            SteamClient.WebChat.GetOverlayChatBrowserInfo()
              .then(function(e) {
                for (
                  var t = new Map(s.m_mapBrowserInfo), n = 0, o = e;
                  n < o.length;
                  n++
                ) {
                  var i = o[n];
                  t.delete(i.unPID);
                  var r = s.m_mapBrowserInfo.get(i.unPID);
                  if (
                    (r &&
                      (r.m_nBrowserID != i.nBrowserID
                        ? (s.OverlayBrowserClosed(r),
                          s.m_mapBrowserInfo.delete(i.unPID),
                          (r = void 0))
                        : Yo.UIStore.OnOverlayBrowserChanged(
                            { m_unPID: i.unPID, m_nBrowserID: i.nBrowserID },
                            i.nScreenWidth,
                            i.nScreenHeight
                          )),
                    !r)
                  ) {
                    var a = { m_unPID: i.unPID, m_nBrowserID: i.nBrowserID };
                    s.m_mapBrowserInfo.set(i.unPID, a),
                      s.OverlayBrowserCreated(
                        a,
                        i.nScreenWidth,
                        i.nScreenHeight
                      );
                  }
                }
                t.forEach(function(e, t) {
                  s.m_mapBrowserInfo.delete(t), s.OverlayBrowserClosed(e);
                });
              })
              .catch(function(e) {
                console.log("Failed to load overlay browser info:", e);
              });
          }),
          (e.prototype.OverlayBrowserCreated = function(e, t, n) {
            Yo.UIStore.OnOverlayBrowserCreated(e, t, n),
              Qu.ShowPopupFriendsList(e, !1, !1),
              Yo.SetDefaultPopupContext(e);
          }),
          (e.prototype.OverlayBrowserClosed = function(e) {
            Yo.UIStore.SetSuppressBrowserContextBroadcasting(!0),
              Yo.GetDefaultBrowserContext().m_nBrowserID == e.m_nBrowserID &&
                Yo.GetDefaultBrowserContext().m_unPID == e.m_unPID &&
                Yo.SetDefaultPopupContext(qo),
              console.log(
                "Removing overlay browser window:",
                e.m_unPID,
                e.m_nBrowserID
              ),
              Wi.d.ClosePopupsOwnedByBrowser(e),
              Yo.UIStore.SetSuppressBrowserContextBroadcasting(!1),
              Yo.UIStore.OnOverlayBrowserClosed(e);
          }),
          R.c([M.a], e.prototype, "OnOverlayChatBrowserInfoChanged", null),
          e
        );
      })(),
      Gu = (function() {
        function e(e) {
          this.m_FriendStore = e;
        }
        return (
          (e.prototype.DisplayNotificationFromFriend = function(t, e, n) {
            return (
              void 0 === n && (n = {}),
              this.DisplayNotification(
                R.a({ icon: t.persona.avatar_url_medium }, e),
                function(e) {
                  return t.OpenChatDialog(e);
                },
                n
              )
            );
          }),
          (e.prototype.BNotificationsPermitted = function() {
            return !Yo.ParentalStore.BIsFriendsBlocked();
          }),
          (e.prototype.RequestNotificationPermission = function() {
            return Promise.resolve(!0);
          }),
          e
        );
      })(),
      Ru = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.GetNotificationPermissionLevel = function() {
            if ("undefined" == typeof Notification) return "unsupported";
            var e = Notification.permission;
            return "default" == e || "granted" == e || "denied" == e
              ? e
              : "unsupported";
          }),
          (t.prototype.DisplayNotification = function(e, t, n) {
            var o = this;
            void 0 === n && (n = {});
            var i = { body: e.body, icon: e.icon, tag: e.tag, silent: !0 },
              r = new Notification(
                e.title,
                R.a(
                  {
                    badge:
                      G.a.COMMUNITY_CDN_URL +
                      "public/shared/images/responsive/share_steam_logo.png"
                  },
                  i
                )
              );
            return (
              window.setTimeout(function() {
                r.close();
              }, n.timeoutMS || 5e3),
              r.addEventListener("click", function() {
                return o.OnNotificationClicked(r, t);
              }),
              new Promise(function(e, t) {
                r.addEventListener("close", function() {
                  e();
                });
              })
            );
          }),
          (t.prototype.OnNotificationClicked = function(e, t) {
            t(qo), e.close();
          }),
          (t.prototype.BNotificationsPermitted = function() {
            return "granted" == this.GetNotificationPermissionLevel();
          }),
          (t.prototype.RequestNotificationPermission = function() {
            return "unsupported" == this.GetNotificationPermissionLevel()
              ? Promise.resolve(!1)
              : this.BNotificationsPermitted()
                ? e.prototype.RequestNotificationPermission.call(this)
                : new Promise(function(t, e) {
                    Notification.requestPermission(function(e) {
                      t("granted" == e);
                    });
                  });
          }),
          t
        );
      })(Gu),
      Nu = (function(e) {
        function t() {
          return (null !== e && e.apply(this, arguments)) || this;
        }
        return (
          R.d(t, e),
          (t.prototype.DisplayNotification = function(e, t, n) {
            if ((void 0 === n && (n = {}), e.tag)) {
              var o = JSON.stringify(e);
              e.tag.startsWith("groupmsg_")
                ? SteamClient.ClientNotifications.DisplayClientNotification(
                    tn.k_EClientUINotificationGroupChatMessage,
                    o,
                    t
                  )
                : e.tag.startsWith("message_")
                  ? SteamClient.ClientNotifications.DisplayClientNotification(
                      tn.k_EClientUINotificationFriendChatMessage,
                      o,
                      t
                    )
                  : Yo.SettingsStore.BClientHasFeatureOrOnWeb(
                      "PersonaNotifications"
                    ) &&
                    e.tag.startsWith("state_") &&
                    SteamClient.ClientNotifications.DisplayClientNotification(
                      tn.k_EClientUINotificationFriendPersonaState,
                      o,
                      t
                    );
            }
            return Promise.resolve();
          }),
          t
        );
      })(Gu),
      Lu = (function() {
        function e() {
          (this.m_mapPlaybackObjs = new Map()),
            (this.m_bVoiceActive = !1),
            (this.m_hCloseContextTimeout = void 0),
            (this.m_nLastObservedSampleRate = 0),
            (this.m_bSupportsAudioWorkletProcessors = !1),
            (this.m_MediaStreamDestination = void 0),
            (this.m_MediaStreamAudioElem = void 0);
        }
        return (
          Object.defineProperty(e.prototype, "context", {
            get: function() {
              return this.m_Context;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "supports_audio_worklets", {
            get: function() {
              return this.m_bSupportsAudioWorkletProcessors;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetActiveDestination = function() {
            if (
              (this.CreateContextIfNeeded(),
              Yo.VoiceStore.IsAnyVoiceActive() &&
                "default" != Yo.VoiceStore.GetSelectedOutputDevice())
            ) {
              if (null == this.m_MediaStreamDestination) {
                var e = this.m_Context;
                (this.m_MediaStreamDestination = e.createMediaStreamDestination()),
                  (this.m_MediaStreamAudioElem = document.createElement(
                    "audio"
                  )),
                  (this.m_MediaStreamAudioElem.srcObject = this.m_MediaStreamDestination.stream),
                  this.m_MediaStreamAudioElem.play();
                try {
                  this.m_MediaStreamAudioElem.setSinkId(
                    Yo.VoiceStore.GetSelectedOutputDevice()
                  );
                } catch (e) {
                  console.log(
                    "(CAudioPlaybackManager) Failed setting audio output device to " +
                      Yo.VoiceStore.GetSelectedOutputDevice() +
                      ": " +
                      e
                  );
                }
              }
              return this.m_MediaStreamDestination;
            }
            return this.m_Context.destination;
          }),
          (e.prototype.PlayAudioURL = function(e, t) {
            return void 0 === t && (t = 1), this.PlayAudioURLWithRepeats(e);
          }),
          (e.prototype.PlayAudioURLWithRepeats = function(e, t) {
            void 0 === t && (t = 0),
              console.log(
                "(CAudioPlaybackManager) web audio playback requested: " + e
              ),
              this.CreateContextIfNeeded();
            var n = new ku(this, e, t);
            return this.m_mapPlaybackObjs.set(n, !0), n;
          }),
          (e.prototype.PlaybackFinished = function(e) {
            this.m_mapPlaybackObjs.delete(e), this.CleanupContextIfUneeded(!1);
          }),
          (e.prototype.SetVoiceActive = function(e) {
            (this.m_bVoiceActive = !0), this.CreateContextIfNeeded(e);
          }),
          (e.prototype.SetVoiceNotActive = function() {
            (this.m_bVoiceActive = !1), this.CleanupContextIfUneeded(!0);
          }),
          (e.prototype.GetLastObservedSampleRate = function() {
            return this.m_nLastObservedSampleRate;
          }),
          (e.prototype.CreateContextIfNeeded = function(t) {
            if ((void 0 === t && (t = void 0), null == this.m_Context)) {
              console.log("(CAudioPlaybackManager) new context");
              var e = window,
                n = e.AudioContext || e.webkitAudioContext || !1;
              (this.m_Context = new n()),
                (this.m_Context.onstatechange = this.OnAudioContextStateChange),
                console.log(
                  "(CAudioPlaybackManager) sample rate " +
                    this.m_Context.sampleRate
                ),
                (this.m_nLastObservedSampleRate = this.m_Context.sampleRate);
              var o = this.m_Context;
              null != o.audioWorklet
                ? ((this.m_bSupportsAudioWorkletProcessors = !0),
                  o.audioWorklet
                    .addModule(
                      G.a.CHAT_BASE_URL +
                        "public/javascript/webui/noisegate-audio-worklet.js?v=3"
                    )
                    .then(function() {
                      console.log(
                        "(CAudioPlaybackManager) noisegate-audio-worklet.js worklet processor loaded"
                      ),
                        t && t();
                    })
                    .catch(function(e) {
                      console.log(
                        "(CAudioPlaybackManager) Failed to load noisegate-audio-worklet.js worklet processor"
                      ),
                        t && t();
                    }))
                : t && t();
            } else t && t();
          }),
          (e.prototype.DelayedCleanupContextIfInactive = function() {
            (this.m_hCloseContextTimeout = void 0),
              0 == this.m_mapPlaybackObjs.size &&
                0 == this.m_bVoiceActive &&
                (console.log("(CAudioPlaybackManager) close context"),
                null != this.m_MediaStreamAudioElem &&
                  (this.m_MediaStreamAudioElem.pause(),
                  (this.m_MediaStreamAudioElem.src = void 0),
                  (this.m_MediaStreamAudioElem.srcObject = void 0)),
                (this.m_MediaStreamAudioElem = void 0),
                (this.m_MediaStreamDestination = void 0),
                this.m_Context.close(),
                (this.m_Context = void 0));
          }),
          (e.prototype.CleanupContextIfUneeded = function(e) {
            if (0 == this.m_mapPlaybackObjs.size && 0 == this.m_bVoiceActive) {
              if (
                (null != this.m_hCloseContextTimeout &&
                  (clearTimeout(this.m_hCloseContextTimeout),
                  (this.m_hCloseContextTimeout = void 0)),
                e)
              )
                return void this.DelayedCleanupContextIfInactive();
              this.m_hCloseContextTimeout = SetBackgroundTimeout(
                this.DelayedCleanupContextIfInactive,
                1e4
              );
            }
          }),
          (e.prototype.OnAudioContextStateChange = function() {
            null != this.m_Context &&
              console.log(
                "(CAudioPlaybackManager) web audio context state changed: " +
                  this.m_Context.state
              );
          }),
          R.c([m.observable], e.prototype, "m_nLastObservedSampleRate", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_bSupportsAudioWorkletProcessors",
            void 0
          ),
          R.c([M.a], e.prototype, "DelayedCleanupContextIfInactive", null),
          R.c([m.action.bound], e.prototype, "OnAudioContextStateChange", null),
          e
        );
      })(),
      ku = (function() {
        function e(n, e, t) {
          var o = this;
          (this.m_Source = void 0),
            (this.m_RepeatCount = 0),
            (this.m_TimesPlayed = 0),
            (this.m_Cancelled = !1),
            (this.m_Manager = n),
            (this.m_URL = e),
            (this.m_RepeatCount = t),
            C.a
              .get(e, { responseType: "arraybuffer" })
              .then(function(e) {
                n.context
                  .decodeAudioData(e.data)
                  .then(function(e) {
                    if (o.m_Cancelled) o.m_Manager.PlaybackFinished(o);
                    else {
                      var t = n.context.createBufferSource();
                      (t.buffer = e),
                        t.connect(n.GetActiveDestination()),
                        t.start(0),
                        (t.onended = o.OnPlaybackEnded),
                        (o.m_Source = t);
                    }
                  })
                  .catch(function(e) {
                    o.OnFailure();
                  });
              })
              .catch(function(e) {
                o.OnFailure();
              });
        }
        return (
          (e.prototype.StopPlayback = function() {
            (this.m_Cancelled = !0),
              this.m_Source &&
                (this.m_Source.stop(0),
                this.m_Source.disconnect(),
                (this.m_Source = void 0),
                this.m_Manager.PlaybackFinished(this));
          }),
          Object.defineProperty(e.prototype, "url", {
            get: function() {
              return this.m_URL;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.OnFailure = function() {
            var e = this;
            SetBackgroundTimeout(function() {
              return e.m_Manager.PlaybackFinished(e);
            }, 1);
          }),
          (e.prototype.OnPlaybackEnded = function(e) {
            if (
              ((this.m_TimesPlayed += 1),
              !this.m_Cancelled && this.m_TimesPlayed <= this.m_RepeatCount)
            ) {
              var t = this.m_Manager.context.createBufferSource();
              return (
                (t.buffer = this.m_Source.buffer),
                t.connect(this.m_Manager.GetActiveDestination()),
                t.start(0),
                (t.onended = this.OnPlaybackEnded),
                this.m_Source.disconnect(),
                (this.m_Source = void 0),
                void (this.m_Source = t)
              );
            }
            this.m_Source.disconnect(),
              (this.m_Source = void 0),
              this.m_Manager.PlaybackFinished(this);
          }),
          R.c([m.action.bound], e.prototype, "OnFailure", null),
          R.c([m.action.bound], e.prototype, "OnPlaybackEnded", null),
          e
        );
      })(),
      Au = (function() {
        function e() {
          this.m_rgActivityCallbacks = [];
        }
        return (
          (e.prototype.AddTrackedWindow = function(e) {}),
          (e.prototype.BIsUserIdle = function(e) {
            return this.GetUserIdleTime() > e;
          }),
          (e.prototype.AddOnIdleCallback = function(e, t) {
            this.RunOnIdleCallback(e, t);
          }),
          (e.prototype.AddOnNextActivityCallback = function(e) {
            this.m_rgActivityCallbacks.push(e);
          }),
          (e.prototype.FireOnUserActivityCallbacks = function() {
            if (this.m_rgActivityCallbacks.length) {
              for (
                var e = 0, t = this.m_rgActivityCallbacks;
                e < t.length;
                e++
              ) {
                (0, t[e])();
              }
              this.m_rgActivityCallbacks = [];
            }
          }),
          (e.prototype.RunOnIdleCallback = function(e, t) {
            this.GetUserIdleTime() >= t - 1
              ? e()
              : SetBackgroundTimeout(
                  this.RunOnIdleCallback.bind(this, e, t),
                  1e3 * (t - this.GetUserIdleTime())
                );
          }),
          e
        );
      })(),
      Pu = (function(t) {
        function i() {
          var e = t.call(this) || this;
          return (
            (e.m_rgWindows = []),
            (e.m_bEventTrackingActive = !1),
            e.OnUserAction(),
            e
          );
        }
        return (
          R.d(i, t),
          (i.prototype.GetUserIdleTime = function() {
            return Math.floor(
              (performance.now() - this.m_msUserLastAction) / 1e3
            );
          }),
          (i.prototype.AddTrackedWindow = function(e) {
            this.m_rgWindows.push(e),
              e.addEventListener(
                "unload",
                this.RemoveTrackedWindow.bind(this, e)
              ),
              this.m_bEventTrackingActive && this.BindEventsForWindow(e);
          }),
          (i.prototype.RemoveTrackedWindow = function(e) {
            this.m_bEventTrackingActive && this.UnbindEventsForWindow(e),
              w.c(this.m_rgWindows, e);
          }),
          (i.prototype.OnUserAction = function() {
            (this.m_msUserLastAction = performance.now()),
              this.FireOnUserActivityCallbacks(),
              this.UnbindEvents(),
              window.setTimeout(this.BindEvents.bind(this), 1e4);
          }),
          (i.prototype.BindEvents = function() {
            if (!this.m_bEventTrackingActive) {
              this.m_bEventTrackingActive = !0;
              for (var e = 0, t = this.m_rgWindows; e < t.length; e++) {
                var n = t[e];
                this.BindEventsForWindow(n);
              }
            }
          }),
          (i.prototype.UnbindEvents = function() {
            if (this.m_bEventTrackingActive) {
              this.m_bEventTrackingActive = !1;
              for (var e = 0, t = this.m_rgWindows; e < t.length; e++) {
                var n = t[e];
                this.UnbindEventsForWindow(n);
              }
            }
          }),
          (i.prototype.UnbindEventsForWindow = function(e) {
            for (var t = 0, n = i.sm_rgUserEvents; t < n.length; t++) {
              var o = n[t];
              e.removeEventListener(o, this.OnUserAction);
            }
          }),
          (i.prototype.BindEventsForWindow = function(e) {
            for (var t = 0, n = i.sm_rgUserEvents; t < n.length; t++) {
              var o = n[t];
              e.addEventListener(o, this.OnUserAction);
            }
          }),
          (i.sm_rgUserEvents = ["mousemove", "mousedown", "keypress", "focus"]),
          R.c([M.a], i.prototype, "OnUserAction", null),
          i
        );
      })(Au),
      Fu = (function(t) {
        function e() {
          var e = t.call(this) || this;
          return (
            (e.m_eActiveState = on.k_EComputerActiveStateActive),
            (e.m_hRegisterForComputerActiveStateChange = null),
            (e.m_hFireUserStillActive = void 0),
            (e.m_hRegisterForComputerActiveStateChange = SteamClient.WebChat.RegisterForComputerActiveStateChange(
              e.OnComputerActiveStateChange
            )),
            e
          );
        }
        return (
          R.d(e, t),
          (e.prototype.OnComputerActiveStateChange = function(e, t) {
            var n = new Date().getTime() / 1e3 - t;
            (this.m_eActiveState = e),
              (this.m_msUserLastAction = Math.max(
                performance.now() - 1e3 * n,
                this.m_msUserLastAction
              )),
              this.m_eActiveState == on.k_EComputerActiveStateActive &&
                (this.m_hFireUserStillActive &&
                  (clearTimeout(this.m_hFireUserStillActive),
                  (this.m_hFireUserStillActive = void 0)),
                this.UpdateStillActive());
          }),
          (e.prototype.UpdateStillActive = function() {
            (this.m_hFireUserStillActive = void 0),
              this.m_eActiveState == on.k_EComputerActiveStateActive &&
                (this.OnUserAction(),
                (this.m_hFireUserStillActive = SetBackgroundTimeout(
                  this.UpdateStillActive,
                  1e4
                )));
          }),
          R.c([M.a], e.prototype, "OnComputerActiveStateChange", null),
          R.c([M.a], e.prototype, "UpdateStillActive", null),
          e
        );
      })(Pu),
      Bu = (function() {
        function e() {
          (this.m_bDropConsumed = !1),
            (this.m_onDropCompleteCallbacks = new D()),
            (this.m_vecClasses = []);
        }
        return (
          (e.prototype.BInDrag = function() {
            return !!this.m_data;
          }),
          (e.prototype.StartDrag = function(e) {
            var t, n;
            AssertMsg(
              !this.m_data,
              "second drag started, existing data discarded",
              this.m_data
            ),
              (this.m_data = e),
              (this.m_bDropConsumed = !1),
              this.m_vecClasses.push("in_global_drag"),
              this.m_vecClasses.push("drag_type_" + e.type),
              void 0 !== e.source &&
                this.m_vecClasses.push("drag_source_" + e.source);
            for (
              var o = 0, i = Array.from(Wi.d.GetPopups());
              o < i.length;
              o++
            ) {
              var r = i[o];
              r.window &&
                r.window.document.body &&
                (t = r.window.document.body.classList).add.apply(
                  t,
                  this.m_vecClasses
                );
            }
            (n = window.document.body.classList).add.apply(
              n,
              this.m_vecClasses
            );
          }),
          (e.prototype.EndDrag = function() {
            var e, t;
            this.m_onDropCompleteCallbacks.Dispatch(this.m_bDropConsumed),
              this.m_onDropCompleteCallbacks.ClearAllCallbacks(),
              (this.m_data = void 0),
              (this.m_bDropConsumed = void 0);
            for (
              var n = 0, o = Array.from(Wi.d.GetPopups());
              n < o.length;
              n++
            ) {
              var i = o[n];
              i.window &&
                i.window.document.body &&
                (e = i.window.document.body.classList).remove.apply(
                  e,
                  this.m_vecClasses
                );
            }
            (t = window.document.body.classList).remove.apply(
              t,
              this.m_vecClasses
            ),
              (this.m_vecClasses = []);
          }),
          (e.prototype.GetDragData = function() {
            return this.m_data;
          }),
          (e.prototype.BWasDropConsumed = function() {
            return this.m_bDropConsumed;
          }),
          (e.prototype.SetDropConsumed = function() {
            AssertMsg(
              this.BInDrag(),
              "Asked to set drop consumed but no active drag"
            ),
              (this.m_bDropConsumed = !0);
          }),
          (e.prototype.RegisterForDropComplete = function(e) {
            return this.m_onDropCompleteCallbacks.Register(e);
          }),
          e
        );
      })(),
      Vu = (function() {
        return function(e) {
          var t = this;
          (this.m_UsabilityHandler = h(
            ie.X.NotifyRequestClientUsabilityMetricsHandler,
            function(n) {
              return R.b(t, void 0, void 0, function() {
                var t;
                return R.e(this, function(e) {
                  switch (e.label) {
                    case 0:
                      return (
                        (t = u.Init(ie.Q))
                          .Body()
                          .set_metrics_run_id(n.Body().metrics_run_id()),
                        t.Body().set_metrics_version(3),
                        t.Body().set_client_build(G.a.BUILD_TIMESTAMP),
                        t.Body().set_in_web(!G.a.IN_CLIENT),
                        Yo.ready_to_render
                          ? [3, 2]
                          : [
                              4,
                              Object(m.when)(function() {
                                return Yo.ready_to_render;
                              })
                            ]
                      );
                    case 1:
                      e.sent(), (e.label = 2);
                    case 2:
                      return [
                        4,
                        Yo.SettingsStore.FillInChatUsabilityMetrics(t.Body())
                      ];
                    case 3:
                      return (
                        e.sent(),
                        [4, Yo.FriendStore.FillInChatUsabilityMetrics(t.Body())]
                      );
                    case 4:
                      return (
                        e.sent(),
                        [4, Yo.ChatStore.FillInChatUsabilityMetrics(t.Body())]
                      );
                    case 5:
                      return (
                        e.sent(),
                        [4, Yo.UIStore.FillInChatUsabilityMetrics(t.Body())]
                      );
                    case 6:
                      return (
                        e.sent(),
                        [4, Yo.VoiceStore.FillInChatUsabilityMetrics(t.Body())]
                      );
                    case 7:
                      return (
                        e.sent(),
                        this.m_fnFillAppUsabilityMetrics
                          ? [4, this.m_fnFillAppUsabilityMetrics(t.Body())]
                          : [3, 9]
                      );
                    case 8:
                      e.sent(), (e.label = 9);
                    case 9:
                      return (
                        ie.Y.NotifyClientUsabilityMetrics(
                          Yo.CMInterface.GetServiceTransport(),
                          t
                        ),
                        [2, 1]
                      );
                  }
                });
              });
            }
          )),
            (this.m_fnFillAppUsabilityMetrics = e);
        };
      })(),
      xu = (function(n) {
        function e(e) {
          var t = n.call(this) || this;
          return (t.m_window = e), t;
        }
        return (
          R.d(e, n),
          (e.prototype.BringToFront = function() {
            null != this.m_window.SteamClient &&
            null != this.m_window.SteamClient.Window &&
            null != this.m_window.SteamClient.Window.BringToFront
              ? this.m_window.SteamClient.Window.BringToFront()
              : this.m_window.focus();
          }),
          (e.prototype.FlashWindow = function() {
            null != this.m_window.SteamClient &&
              null != this.m_window.SteamClient.Window &&
              null != this.m_window.SteamClient.Window.FlashWindow &&
              this.m_window.SteamClient.Window.FlashWindow();
          }),
          (e.prototype.Close = function() {
            this.m_window && this.m_window.close();
          }),
          Object.defineProperty(e.prototype, "title", {
            get: function() {
              return this.m_window.document.title;
            },
            set: function(e) {
              this.m_window.document.title = e;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.BIsClosed = function() {
            return this.m_window.closed;
          }),
          (e.prototype.BIsVisible = function() {
            return "visible" == this.m_window.document.visibilityState;
          }),
          (e.prototype.BIsFocused = function() {
            return this.m_window.document.hasFocus();
          }),
          (e.prototype.OnFocus = function(e) {
            var t = this,
              n = function() {
                e();
              };
            return (
              this.m_window.addEventListener("focus", n),
              {
                unregister: function() {
                  t.m_window.removeEventListener("focus", n);
                }
              }
            );
          }),
          (e.prototype.GetWindow = function() {
            return this.m_window;
          }),
          e
        );
      })(Ho),
      Uu = (function(n) {
        function e(e) {
          var t = n.call(this) || this;
          return (t.m_popup = e), t;
        }
        return (
          R.d(e, n),
          Object.defineProperty(e.prototype, "container", {
            get: function() {
              return (
                !this.m_container &&
                  this.m_popup.window &&
                  (this.m_container = new xu(this.m_popup.window)),
                this.m_container
              );
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.Show = function(e) {
            Yo.ParentalStore.BIsFriendsBlocked()
              ? console.log("Blocked popup due to parental controls")
              : this.m_popup.Show(e);
          }),
          (e.prototype.Close = function() {
            this.m_popup.Close();
          }),
          (e.prototype.GetWindowRestoreDetails = function() {
            return this.m_popup.GetWindowRestoreDetails();
          }),
          (e.prototype.IsMinimized = function() {
            return this.m_popup.IsMinimized();
          }),
          (e.prototype.GetBrowserContext = function() {
            return this.m_popup.browser_info;
          }),
          (e.prototype.GetWindow = function() {
            return this.m_popup.window;
          }),
          e
        );
      })(Wo),
      ju = {
        nChatRoomListHeightPx: 224,
        bChatRoomListCollapsed: !1,
        bDontShowVoiceAlert: !1,
        nFriendsListSingleWindowWidthPx: 300,
        bFavoritesHintDismissed: !1,
        nChangeLogDismissed: 0
      },
      Hu = "UIDisplayPrefs",
      Wu = (function() {
        function e(e) {
          var t = this;
          (this.m_FriendHoverStore = new bs()),
            (this.m_EmoticonHoverStore = new Mu()),
            (this.m_DragDropManager = new Bu()),
            (this.m_mapModalManagers = new WeakMap()),
            (this.m_OverlayStore = new Tu()),
            (this.m_UsabilityMetricsStore = new Vu(
              this.FillInChatUsabilityMetrics.bind(this)
            )),
            (this.m_mapFriendsListPopups = new Map()),
            (this.m_UIDisplayPrefs = ju),
            (this.m_bUpdatedBuildAvailable = !1),
            (this.m_nSecondsOutOfDate = 0),
            (this.m_strLoaderWindowRestoreDetails = void 0),
            (this.m_bShowFriendsListOnLoadFromLoader = void 0),
            (this.m_FriendsUIApp = e),
            "undefined" != typeof SteamClient &&
            SteamClient.WebChat &&
            SteamClient.WebChat.RegisterForFriendPostMessage
              ? (SteamClient.WebChat.RegisterForFriendPostMessage(
                  this.HandlePostMessage
                ),
                window.addEventListener(
                  "message",
                  this.HandleWebLoaderPostMessage
                ))
              : (AssertMsg(
                  !G.a.IN_CLIENT,
                  "Config.IN_CLIENT set but SteamClient globals not available"
                ),
                window.addEventListener("message", this.HandlePostMessage)),
            (this.m_IdleTracker = G.a.IN_CLIENT ? new Fu() : new Pu()),
            this.InstrumentWindow(window, qo),
            Wi.d.AddPopupCreatedCallback(function(e) {
              t.InstrumentWindow(e.window, e.browser_info || qo);
            });
        }
        return (
          (e.prototype.OverlayStore = function() {
            return this.m_OverlayStore;
          }),
          (e.prototype.BNeedsUpdate = function() {
            return this.m_bUpdatedBuildAvailable;
          }),
          (e.prototype.GetSecondsOutOfDate = function() {
            return this.m_nSecondsOutOfDate;
          }),
          (e.prototype.InstrumentWindow = function(e, t) {
            (e.__FriendsUIBrowserContext = t),
              this.m_IdleTracker.AddTrackedWindow(e);
          }),
          (e.prototype.HandlePostMessage = function(e) {
            var t = e.data;
            if (t && t.command) {
              var n = Yo.GetDefaultBrowserContext();
              void 0 !== e.data.pid &&
                (n = { m_unPID: e.data.pid, m_nBrowserID: e.data.browserid }),
                this.ExecuteCommand(n, e.data);
            }
          }),
          (e.prototype.PerformFriendsUIUpdate = function() {
            var e = Yo.UIStore.SerializePopupStateToObject(!0);
            window.parent.postMessage(
              { message: "ChatReloadRequest", state: e },
              "https://steamloopback.host"
            );
          }),
          (e.prototype.HandleWebLoaderPostMessage = function(e) {
            null != e.data.message &&
              ("UpdatedBuildAvailable" == e.data.message
                ? (console.log(
                    "There is an updated friendsui build available, we are " +
                      (e.data.bVeryOutOfDate ? "" : "NOT ") +
                      "very out of date. We are " +
                      (e.data.bForce ? "" : "NOT ") +
                      "forcing an update."
                  ),
                  (this.m_bUpdatedBuildAvailable = !0),
                  void 0 !== e.data.nSecondsOutOfDate &&
                    (this.m_nSecondsOutOfDate = e.data.nSecondsOutOfDate),
                  (7200 < Yo.IdleTracker.GetUserIdleTime() ||
                    (void 0 !== e.data.bForce && 1 == e.data.bForce)) &&
                    this.PerformFriendsUIUpdate())
                : "ReloadSerializedChatState" == e.data.message &&
                  void 0 !== e.data.state
                  ? (console.log(
                      "Asked by loader to reload serialized chat state"
                    ),
                    Yo.UIStore.SetStateToRestoreFrom(e.data.state))
                  : "LoaderWindowRestoreDetails" == e.data.message
                    ? ((this.m_bShowFriendsListOnLoadFromLoader =
                        e.data.bVisible),
                      (this.m_strLoaderWindowRestoreDetails = e.data.data))
                    : "SetPersonaState" == e.data.message &&
                      this.SetUserPersonaStateWhenReady(e.data.persona_state));
          }),
          (e.prototype.SetUserPersonaStateWhenReady = function(e) {
            Yo.FriendStore.SetUserPersonaState(e);
          }),
          (e.prototype.ExecuteCommand = function(e, t) {
            switch (t.command) {
              case "CheckForUpdates":
                window.parent.postMessage(
                  { message: "CheckForAndForceUpdate" },
                  "https://steamloopback.host"
                );
                break;
              case "ShowPopupFriendsList":
                this.ShowPopupFriendsList(e, !1, !0);
                break;
              case "ShowFriendChatDialog":
                (i = new E.a(t.steamid)).BIsIndividualAccount()
                  ? this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(
                      e,
                      i.GetAccountID()
                    )
                  : i.BIsClanAccount() &&
                    this.m_FriendsUIApp.FriendStore.ClanStore.JoinClanChatRoom(
                      e,
                      i
                    );
                break;
              case "CloseChatDialog":
                if ((i = new E.a(t.steamid)).BIsIndividualAccount()) {
                  var n = this.m_FriendsUIApp.ChatStore.GetFriendChat(
                    i.GetAccountID(),
                    !1
                  );
                  n && Yo.UIStore.CloseTabByID(n.unique_id);
                } else if (i.BIsClanAccount()) {
                  var o = Yo.FriendStore.ClanStore.GetClan(i);
                  if (o && o.GetChatGroupIDIfLoaded())
                    (a = Yo.ChatStore.GetChatRoomGroup(
                      o.GetChatGroupIDIfLoaded()
                    )) && Yo.UIStore.CloseTabByID(a.unique_id);
                }
                break;
              case "ShowInviteToTradeDialog":
                var i;
                if ((i = new E.a(t.steamid)).BIsIndividualAccount()) {
                  var r = this.m_FriendsUIApp.FriendStore.GetFriend(
                    i.GetAccountID()
                  );
                  r &&
                    (this.m_FriendsUIApp.UIStore.ShowFriendChatDialogWhenReady(
                      e,
                      r.accountid
                    ),
                    Yo.FriendStore.InviteToTrade(r));
                }
                break;
              case "ShowChatRoomGroupDialog":
                var a,
                  s = t.chat_group_id,
                  c = t.chat_room_id;
                if (
                  (a = this.m_FriendsUIApp.ChatStore.GetChatRoomGroup(s)) &&
                  a.BIsCurrentUserAMember() &&
                  !c
                )
                  this.m_FriendsUIApp.UIStore.ShowAndOrActivateChatRoomGroupWhenReady(
                    e,
                    a,
                    !0
                  );
                else {
                  var l = Yo.ChatStore.InviteStore.GetDirectInviteInfo(
                    s,
                    c,
                    Yo.FriendStore.self.accountid
                  );
                  _p({ invite: l, inviter: null }, e, window);
                }
                break;
              case "ShowChatRoomGroupInvite":
                if (Yo.ready_to_render) {
                  var p = t.invite_code;
                  l = Yo.ChatStore.InviteStore.GetInviteFromCode(p);
                  _p({ invite: l, inviter: null }, e, window);
                }
                break;
              case "SetPersonaState":
                Yo.FriendStore.SetUserPersonaState(t.persona_state);
                break;
              case "ShowWatchBroadcast":
                var u = new E.a(t.steamid);
                Yo.UIStore.ShowOrActivateBroadcast(
                  e,
                  u.GetAccountID(),
                  !0
                ).ShowWatchPromptDialog();
            }
          }),
          (e.prototype.Init = function(e, t, n) {
            var r = this,
              o = [],
              i = this.m_FriendsUIApp.SettingsStore.GetObjectFromLocalStorageWhenReady(
                Hu,
                ju
              ).then(function(e) {
                Object(m.runInAction)(function() {
                  r.m_UIDisplayPrefs = e;
                });
              });
            if (
              (o.push(i),
              e.RunWhenLoggedOn(function() {
                Wi.d.SetCurrentLoggedInAccountID(e.steamid.GetAccountID());
              }),
              (this.m_WebLogonManager = n),
              (Zo.b.GetBrowserInfoForPopup = Ku),
              t && this.m_OverlayStore.Init(e),
              window.addEventListener(
                "dragover",
                function(e) {
                  (e || event).preventDefault();
                },
                !1
              ),
              window.addEventListener(
                "dragenter",
                function(e) {
                  (e || event).preventDefault();
                },
                !1
              ),
              window.addEventListener(
                "drop",
                function(e) {
                  (e || event).preventDefault();
                },
                !1
              ),
              G.a.IN_CLIENT &&
                void 0 !== SteamClient.FriendSettings.GetEnabledFeatures)
            ) {
              var a = SteamClient.FriendSettings.GetEnabledFeatures().then(
                function(e) {
                  for (var t = !1, n = 0, o = e; n < o.length; n++) {
                    var i = o[n];
                    if ("LoaderWindowSynchronization" == i.feature) {
                      t = i.bEnabled;
                      break;
                    }
                  }
                  return t
                    ? Object(m.when)(function() {
                        return void 0 !== r.m_strLoaderWindowRestoreDetails;
                      })
                    : Promise.resolve();
                }
              );
              o.push(a);
            }
            return o;
          }),
          Object.defineProperty(e.prototype, "FriendHoverStore", {
            get: function() {
              return this.m_FriendHoverStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "EmoticonHoverStore", {
            get: function() {
              return this.m_EmoticonHoverStore;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "WebLogonManager", {
            get: function() {
              return this.m_WebLogonManager;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "DragDropManager", {
            get: function() {
              return this.m_DragDropManager;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.GetModalManager = function(e) {
            var t = this.m_mapModalManagers.get(e);
            return t || ((t = new Xu()), this.m_mapModalManagers.set(e, t)), t;
          }),
          Object.defineProperty(e.prototype, "IdleTrackerWeb", {
            get: function() {
              return this.m_IdleTracker;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "UIDisplayPrefs", {
            get: function() {
              return this.m_UIDisplayPrefs;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.SetUIDisplayPref = function(e, t) {
            var n = this;
            this.m_UIDisplayPrefs[e] != t &&
              ((this.m_UIDisplayPrefs[e] = t),
              this.m_iTimeoutSaveUIDisplayPrefs &&
                window.clearTimeout(this.m_iTimeoutSaveUIDisplayPrefs),
              (this.m_iTimeoutSaveUIDisplayPrefs = window.setTimeout(
                function() {
                  n.m_FriendsUIApp.SettingsStore.StoreObjectInLocalStorage(
                    Hu,
                    n.m_UIDisplayPrefs
                  ),
                    (n.m_iTimeoutSaveUIDisplayPrefs = void 0);
                },
                1e3
              )));
          }),
          (e.prototype.ShowPopupFriendsList = function(e, t, n) {
            if (Yo.ParentalStore.BIsFriendsBlocked())
              console.log(
                "Blocked friends list popup due to parental controls"
              );
            else {
              var o = this.m_mapFriendsListPopups.get(e.m_unPID);
              if (o) !t && n && o.Focus();
              else {
                (o = new tp(
                  this.m_FriendsUIApp.FriendStore,
                  this.m_FriendsUIApp.ChatStore,
                  e,
                  t
                )),
                  this.m_mapFriendsListPopups.set(e.m_unPID, o),
                  o.Show(!t && n);
                var i = new Uu(o);
                Yo.UIStore.GetPerContextChatData(e).SetFriendsListWindow(
                  i.container
                ),
                  Yo.UIStore.SerializePopupState();
              }
            }
          }),
          (e.prototype.OnFriendsListClosed = function(e) {
            this.m_mapFriendsListPopups.delete(e.m_unPID),
              Yo.UIStore.GetPerContextChatData(e).SetFriendsListWindow(void 0),
              Yo.UIStore.SerializePopupState();
          }),
          (e.prototype.ToggleSingleWindowToggle = function(e) {
            var t = qu(e);
            if (Yo.UIStore.BIsFriendsListSingleWindow(t)) {
              n = Math.min(
                Qu.UIDisplayPrefs.nFriendsListSingleWindowWidthPx,
                e.screen.availWidth
              );
              e.SteamClient.Window.ResizeTo(n, e.innerHeight);
            } else {
              var n = Math.min(1280, e.screen.availWidth);
              e.SteamClient.Window.ResizeTo(n, e.innerHeight),
                Qu.SetUIDisplayPref(
                  "nFriendsListSingleWindowWidthPx",
                  e.innerWidth
                );
            }
          }),
          (e.prototype.FillInChatUsabilityMetrics = function(e) {
            e
              .ui_state()
              .set_friends_list_group_chats_height(
                this.UIDisplayPrefs.nChatRoomListHeightPx
              );
            var t = Yo.UIStore.GetPerContextChatData(qo),
              n = t.friends_list_window;
            n &&
              n instanceof xu &&
              (e.ui_state().set_friends_list_width(n.GetWindow().outerWidth),
              e.ui_state().set_friends_list_height(n.GetWindow().outerHeight));
            for (
              var o = void 0, i = 0, r = Array.from(t.popup_list);
              i < r.length;
              i++
            ) {
              var a = r[i];
              if (
                (o = a).tab_set === t.default_tabset &&
                !t.IsFriendsListSingleWindow()
              )
                break;
            }
            o &&
              o.popup.GetWindow() &&
              (e
                .ui_state()
                .set_friends_list_width(o.popup.GetWindow().outerWidth),
              e
                .ui_state()
                .set_friends_list_height(o.popup.GetWindow().outerHeight));
          }),
          R.c([m.observable], e.prototype, "m_UIDisplayPrefs", void 0),
          R.c([m.observable], e.prototype, "m_bUpdatedBuildAvailable", void 0),
          R.c([m.observable], e.prototype, "m_nSecondsOutOfDate", void 0),
          R.c(
            [m.observable],
            e.prototype,
            "m_strLoaderWindowRestoreDetails",
            void 0
          ),
          R.c(
            [m.observable],
            e.prototype,
            "m_bShowFriendsListOnLoadFromLoader",
            void 0
          ),
          R.c([M.a], e.prototype, "HandlePostMessage", null),
          R.c([M.a], e.prototype, "HandleWebLoaderPostMessage", null),
          R.c([jo], e.prototype, "SetUserPersonaStateWhenReady", null),
          R.c([m.computed], e.prototype, "UIDisplayPrefs", null),
          R.c([m.action], e.prototype, "SetUIDisplayPref", null),
          R.c([jo], e.prototype, "ShowPopupFriendsList", null),
          e
        );
      })();
    function zu(e, t) {
      var n = Yu(t);
      if (!n && e) {
        var o = W.findDOMNode(e);
        o && o.ownerDocument && (n = o.ownerDocument.defaultView);
      }
      return (
        AssertMsg(
          n,
          "Couldn't find owning window to determine browser context"
        ),
        qu(n)
      );
    }
    function qu(e) {
      var t = qo;
      return (
        e &&
          (AssertMsg(
            e.__FriendsUIBrowserContext,
            "FriendsUI Browser context missing from owner window"
          ),
          e.__FriendsUIBrowserContext && (t = e.__FriendsUIBrowserContext)),
        t
      );
    }
    function Ku(e) {
      var t = qu(e);
      return t && t.m_unPID != qo.m_unPID && t.m_nBrowserID != qo.m_nBrowserID
        ? t
        : null;
    }
    function Yu(e) {
      var t = void 0;
      return (
        e && e.currentTarget && (t = e.currentTarget.ownerDocument.defaultView),
        t
      );
    }
    var Ju = (function(l) {
        function e() {
          var e =
            l.call(
              this,
              G.a.IN_CLIENT && void 0 !== SteamClient.Storage
                ? new Eu()
                : new wu()
            ) || this;
          return (
            (e.m_AudioPlaybackManager = new Lu()),
            (e.m_DesktopApp = new Wu(e)),
            (Qu = e.m_DesktopApp),
            AssertMsg(
              !G.a.IN_MOBILE,
              "DesktopApp initialized in mobile context"
            ),
            e
          );
        }
        return (
          R.d(e, l),
          (e.prototype.Init = function(e, t, n) {
            var o,
              i,
              r,
              a,
              s = t ? new Nu(this.m_FriendStore) : new Ru(this.m_FriendStore),
              c = this.m_DesktopApp.Init(e, t, n);
            l.prototype.InitInternal.call(this, e, s, c),
              (o = qo),
              (i = this.m_FriendStore),
              (r = this.m_ChatStore),
              (a = document.getElementById("friendslist-container")),
              W.render(
                ve.createElement($l, {
                  friends: i,
                  chats: r,
                  browserContext: o,
                  elTarget: a
                }),
                a
              );
          }),
          (e.prototype.OnReadyToRender = function() {
            return R.b(this, void 0, void 0, function() {
              var t, n, o, i, r, a, s, c;
              return R.e(this, function(e) {
                switch (e.label) {
                  case 0:
                    return [4, this.UIStore.RestorePopupState()];
                  case 1:
                    e.sent(),
                      (t = Wi.d.GetRestoreDetails(
                        "PopupFriendsListDimensions"
                      )) &&
                        window.parent.postMessage(
                          {
                            message: "FriendsListRestoreDetailsChanged",
                            data: t
                          },
                          "https://steamloopback.host"
                        ),
                      (n = "oFriendsUIStartupParam");
                    try {
                      (o = window.sessionStorage.getItem(n)) &&
                        (i = JSON.parse(o)) &&
                        i.command &&
                        this.m_DesktopApp.ExecuteCommand(qo, i.command),
                        window.sessionStorage.removeItem(n);
                    } catch (e) {}
                    if (window.opener)
                      for (
                        r = [
                          G.a.COMMUNITY_BASE_URL,
                          G.a.STORE_BASE_URL,
                          G.a.CHAT_BASE_URL
                        ],
                          a = 0,
                          s = r;
                        a < s.length;
                        a++
                      )
                        (c = s[a]),
                          window.opener.postMessage(
                            "FriendsUIReady",
                            c.replace(/\/$/, "")
                          );
                    return [2];
                }
              });
            });
          }),
          Object.defineProperty(e.prototype, "AudioPlaybackManager", {
            get: function() {
              return this.m_AudioPlaybackManager;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "IdleTracker", {
            get: function() {
              return this.m_DesktopApp.IdleTrackerWeb;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.AddPopupManagerShutdownCallback = function(e) {
            Wi.d.AddShutdownCallback(e);
          }),
          (e.prototype.GetChatRoomBBCodeDictionary = function() {
            return Object.assign(Pp(), { mention: fu });
          }),
          (e.prototype.GetFriendChatBBCodeDictionary = function() {
            return Object.assign(Pp(), {
              invite: ru,
              gameinvite: au,
              lobbyinvite: su,
              tradeoffer: mu,
              broadcastinvite: cu,
              broadcastviewrequest: lu
            });
          }),
          (e.prototype.GetNotificationBBCodeDictionary = function() {
            return {
              gameinvite: vu,
              lobbyinvite: Su,
              invite: yu,
              tradeoffer: Cu,
              spoiler: Iu
            };
          }),
          (e.prototype.CreateChatPopup = function(e, t, n, o, i, r) {
            var a = new ip(e, t, n, o, i, r),
              s = new Uu(a);
            return new ro(s, a);
          }),
          (e.prototype.ShowPopupFriendsListAtStartup = function(e) {
            var t = e;
            if (
              (void 0 !== Qu.m_bShowFriendsListOnLoadFromLoader &&
                (t = Qu.m_bShowFriendsListOnLoadFromLoader),
              t)
            ) {
              var n = !0 === Qu.m_bShowFriendsListOnLoadFromLoader;
              Yo.GetDefaultBrowserContext() != qo &&
                (console.log(
                  "Blocked taking focus in root context during ShowPopupFriendsList, because other context is primary"
                ),
                (n = !1)),
                Yo.ShowPopupFriendsList(qo, !1, n);
            }
          }),
          (e.prototype.ShowPopupFriendsList = function(e, t, n) {
            this.m_DesktopApp.ShowPopupFriendsList(e, t, n);
          }),
          (e.prototype.OnFriendsListClosed = function(e) {
            this.m_DesktopApp.OnFriendsListClosed(e);
          }),
          (e.prototype.ShowAlert = function(e, t, n) {
            return er(window, e, t, n);
          }),
          (e.prototype.OpenURLInBrowser = function(e, t) {
            G.a.IN_CLIENT
              ? SteamClient.WebChat.OpenURLInClient(e, t.m_unPID)
              : yr(window, e);
          }),
          (e.prototype.BIsValidBrowserContext = function(e) {
            return (
              l.prototype.BIsValidBrowserContext.call(this, e) ||
              this.m_DesktopApp.OverlayStore().HasOverlayInstance(e.m_unPID)
            );
          }),
          (e.prototype.ShowCloseActiveVoiceConfirmation = function(e, t) {
            if (!this.m_DesktopApp.UIDisplayPrefs.bDontShowVoiceAlert) {
              var n = t.popup;
              (o = n.GetWindow()),
                Qu.UIDisplayPrefs.bDontShowVoiceAlert ||
                  (o &&
                    Ji(ve.createElement(Nc, null), o, "ActiveVoiceAlert", {
                      strTitle: Object(re.b)("#Chat_StillInVoiceDialog_Title"),
                      popupWidth: 650,
                      popupHeight: 340
                    }));
            }
            var o;
          }),
          (e.prototype.SignOutOfFriends = function(e) {
            var t =
              Yo.UIStore.GetRootChatPerContextData().friends_list_window &&
              Yo.UIStore.GetRootChatPerContextData().friends_list_window.BIsVisible();
            window.parent.postMessage(
              {
                message: "SignOutRequest",
                bShowLoaderWindow: t,
                browserContext: e
              },
              "https://steamloopback.host"
            );
          }),
          e
        );
      })(Ko),
      Xu = (function() {
        function e() {
          (this.m_bUsePopups = !1),
            (this.m_rgModals = m.observable.array(null, { deep: !1 }));
        }
        return (
          Object.defineProperty(e.prototype, "modals", {
            get: function() {
              return this.m_rgModals;
            },
            enumerable: !0,
            configurable: !0
          }),
          Object.defineProperty(e.prototype, "active_modal", {
            get: function() {
              return this.m_rgModals.length
                ? this.m_rgModals[this.m_rgModals.length - 1]
                : void 0;
            },
            enumerable: !0,
            configurable: !0
          }),
          (e.prototype.ShowModal = function(e) {
            var t = this,
              n = { element: e };
            return (
              this.m_rgModals.push(n),
              {
                Close: function() {
                  var e = t.m_rgModals.indexOf(n);
                  -1 != e && t.m_rgModals.splice(e, 1);
                }
              }
            );
          }),
          e
        );
      })(),
      Qu = void 0,
      Zu = { steamid: "" };
    function $u() {
      window.sessionStorage.setItem(
        "oFriendsUIStartupParam",
        JSON.stringify({
          command: { command: "ShowWatchBroadcast", steamid: Zu.steamid }
        })
      );
    }
    var em = (function() {
        function e() {
          (this.m_iTimeoutLogin = void 0),
            (this.m_eLogonState = 0),
            (this.m_bLogonDialogVisisible = !1);
        }
        return (
          (e.prototype.Init = function(e) {
            var t = this;
            (this.m_fnLaunchChat = e),
              (this.m_steamID = Zu.steamid),
              window.addEventListener("message", this.HandlePostMessage),
              W.render(
                ve.createElement(rl, { app: this }),
                document.getElementById("friendslist-container")
              ),
              (this.m_iTimeoutLogin = SetBackgroundTimeout(function() {
                0 == t.m_eLogonState && (t.m_eLogonState = 1);
              }, 2500));
          }),
          (e.prototype.LaunchChat = function() {
            W.unmountComponentAtNode(
              document.getElementById("friendslist-container")
            ),
              window.removeEventListener("message", this.HandlePostMessage),
              window.clearTimeout(this.m_iTimeoutLogin),
              $u(),
              this.m_fnLaunchChat();
          }),
          (e.prototype.GetLoginURL = function() {
            return G.a.STORE_BASE_URL + "login/?steamtv";
          }),
          (e.prototype.BIsPerformingLogonCheck = function() {
            return 0 == this.m_eLogonState || 1 == this.m_eLogonState;
          }),
          (e.prototype.BIsLogonDialogVisible = function() {
            return this.m_bLogonDialogVisisible;
          }),
          (e.prototype.ShowLogonDialog = function() {
            this.m_bLogonDialogVisisible = !0;
          }),
          (e.prototype.BReadyToRender = function() {
            return 0 != this.m_eLogonState;
          }),
          (e.prototype.DismissLogonDialog = function() {
            this.m_bLogonDialogVisisible = !1;
          }),
          (e.prototype.GetSteamIDWatched = function() {
            return this.m_steamID;
          }),
          (e.prototype.ExtractOrigin = function(e) {
            return e.replace(/^(https?:\/\/[^/]*).*$/, "$1");
          }),
          (e.prototype.HandlePostMessage = function(e) {
            if (
              e.origin == this.ExtractOrigin(G.a.STORE_BASE_URL) ||
              e.origin == this.ExtractOrigin(G.a.CHAT_BASE_URL)
            ) {
              var t = e.data;
              if (t)
                if ("OnLoginButtonClicked" == t.msg)
                  console.log("Login button clicked"),
                    (this.m_bLogonDialogVisisible = !0);
                else if ("LoginNeeded" == t.command) this.m_eLogonState = 2;
                else if ("LogonComplete" == t.command)
                  return void this.LaunchChat();
            } else
              console.warn(
                'Ignoring message from untrusted domain "' + e.origin + '"'
              );
          }),
          R.c([m.observable], e.prototype, "m_eLogonState", void 0),
          R.c([m.observable], e.prototype, "m_bLogonDialogVisisible", void 0),
          R.c([m.observable], e.prototype, "m_steamID", void 0),
          R.c([m.action], e.prototype, "LaunchChat", null),
          R.c([m.action.bound], e.prototype, "HandlePostMessage", null),
          e
        );
      })(),
      tm = (n("Y3TG"), n("XaMz"));
    function nm() {
      return !0;
    }
    var om, im, rm;
    n("m1EC");
    (window.AssertMsg = tm.a),
      (window.IsFeatureBroadcastEnabled = nm),
      document.addEventListener("DOMContentLoaded", function() {
        Object(G.c)();
        var e = !0;
        if (!G.a.IN_CLIENT && G.a.STEAM_TV) {
          var t = Object(G.b)("broadcast");
          t && Object.assign(Zu, t),
            G.d.logged_in
              ? $u()
              : ((e = !1),
                new em().Init(function() {
                  window.location = window.location;
                }));
        }
        e &&
          (function() {
            var e,
              t = new Ju(),
              n = null,
              o = !1;
            if (G.a.IN_CLIENT) {
              var i = {
                message: "ChatJavascriptInitialized",
                data: G.a.BUILD_TIMESTAMP
              };
              window.parent.postMessage(i, "https://steamloopback.host"),
                window.parent.postMessage(
                  "ChatJavascriptIntialized",
                  "https://steamloopback.host"
                ),
                (o = !0),
                (e = x.ConstructClientCMInterface()).Connect();
            } else
              (e = x.ConstructWebCMInterface(t.Storage)),
                (n = new H(e)).PerformInitialLogon(G.d);
            t.Init(e, o, n);
          })();
      }),
      (window.LocalizationReady = function(e, t, n) {
        if ("english" !== t)
          "friendsui" == e ? (om = n) : "shared" == e && (im = n);
        else if ("shared" == e) rm = n;
        else {
          var o = void 0,
            i = null,
            r = void 0,
            a = null;
          void 0 !== om ? ((o = om), (i = n)) : (o = n),
            void 0 !== im ? ((r = im), (a = rm)) : (r = rm),
            re.a.InitFromObjects(o, i, r, a),
            (rm = im = om = void 0);
        }
      });
  },
  m1EC: function(e, t, n) {},
  oh5H: function(e, t, n) {
    "use strict";
    n.d(t, "b", function() {
      return i;
    }),
      n.d(t, "d", function() {
        return o;
      }),
      n.d(t, "c", function() {
        return r;
      }),
      n.d(t, "e", function() {
        return a;
      }),
      n.d(t, "a", function() {
        return _;
      });
    var l = n("q1tI");
    function i(e) {
      for (var o = [], t = 1; t < arguments.length; t++)
        o[t - 1] = arguments[t];
      var n = _.LocalizeString(e);
      return n
        ? (0 < o.length &&
            (n = n.replace(/%(\d+)\$s/g, function(e, t) {
              if (t <= o.length && 1 <= t) {
                var n = o[t - 1];
                return String(null == n ? "" : n);
              }
              return e;
            })),
          n)
        : e;
    }
    function o(e) {
      for (var t = [], n = 1; n < arguments.length; n++)
        t[n - 1] = arguments[n];
      var o = _.LocalizeString(e);
      if (!o) return e;
      for (var i, r = [], a = /(.*?)%(\d+)\$s/g, s = 0; (i = a.exec(o)); ) {
        (s += i[0].length), r.push(i[1]);
        var c = parseInt(i[2]);
        1 <= c && c <= t.length && r.push(t[c - 1]);
      }
      return (
        r.push(o.substr(s)),
        l.createElement.apply(l, [l.Fragment, null].concat(r))
      );
    }
    function r(e, t) {
      for (var n = [], o = 2; o < arguments.length; o++)
        n[o - 2] = arguments[o];
      return i.apply(
        void 0,
        1 === t || "1" === t ? [e, t].concat(n) : [e + "_Plural", t].concat(n)
      );
    }
    function a(e, t) {
      return void 0 === t && (t = !1), h(e, !t);
    }
    var s = 31536e3,
      c = 2628e3,
      p = 604800,
      u = 86400,
      m = 3600,
      d = 60;
    function h(e, t, n) {
      void 0 === t && (t = !1), void 0 === n && (n = !0);
      var o = t ? "#TimeSince_" : "#TimeInterval_";
      return 2 * s <= e
        ? i(o + "XYears", Math.floor(e / s))
        : s <= e
          ? 2 * c <= (e -= s)
            ? i(o + "1YearXMonths", Math.floor(e / c))
            : i(o + "1Year")
          : 2 * c <= e
            ? i(o + "XMonths", Math.floor(e / c))
            : 2 * p <= e
              ? i(o + "XWeeks", Math.floor(e / p))
              : 2 * u <= e
                ? i(o + "XDays", Math.floor(e / u))
                : u <= e
                  ? 2 * m <= (e -= u)
                    ? i(o + "1DayXHours", Math.floor(e / m))
                    : i(o + "1Day")
                  : 2 * m <= e
                    ? i(o + "XHours", Math.floor(e / m))
                    : m <= e
                      ? 2 * d <= (e -= m) && n
                        ? i(o + "1HourXMinutes", Math.floor(e / d))
                        : i(o + "1Hour")
                      : n
                        ? 2 * d <= e
                          ? i(o + "XMinutes", Math.floor(e / d))
                          : i(d <= e ? o + "1Minute" : o + "LessThanAMinute")
                        : i(o + "LessThanAnHour");
    }
    var _ = new ((function() {
      function e() {
        (this.m_mapTokens = new Map()), (this.m_mapFallbackTokens = new Map());
      }
      return (
        (e.prototype.InitFromObjects = function(n, o, i, r) {
          var a = this;
          this.m_mapTokens.clear(),
            Object.keys(i).forEach(function(e, t) {
              a.m_mapTokens.set(e, i[e]);
            }),
            Object.keys(n).forEach(function(e, t) {
              a.m_mapTokens.set(e, n[e]);
            }),
            o &&
              Object.keys(o).forEach(function(e, t) {
                a.m_mapTokens.has(e) || a.m_mapTokens.set(e, o[e]),
                  a.m_mapFallbackTokens.set(e, o[e]);
              }),
            r &&
              Object.keys(r).forEach(function(e, t) {
                a.m_mapTokens.has(e) || a.m_mapTokens.set(e, r[e]),
                  a.m_mapFallbackTokens.has(e) ||
                    a.m_mapFallbackTokens.set(e, r[e]);
              });
        }),
        (e.prototype.InitDirect = function(n) {
          var o = this;
          this.m_mapTokens.clear(),
            this.m_mapFallbackTokens.clear(),
            Object.keys(n).forEach(function(e, t) {
              o.m_mapTokens.set(e, n[e]);
            });
        }),
        (e.prototype.GetPreferredLocales = function() {
          var e = ["en-US"];
          return (
            "undefined" != typeof navigator &&
              void 0 !== navigator.languages &&
              (e = navigator.languages),
            e
          );
        }),
        (e.prototype.LocalizeString = function(e) {
          if (!e || 0 == e.length || "#" != e.charAt(0)) return "";
          var t = this.m_mapTokens.get(e.substring(1));
          return void 0 === t ? "" : t;
        }),
        (e.prototype.LocalizeStringFromFallback = function(e) {
          if (!e || 0 == e.length || "#" != e.charAt(0)) return "";
          var t = this.m_mapFallbackTokens.get(e.substring(1));
          return void 0 === t ? "" : t;
        }),
        e
      );
    })())();
    window.LocalizationManager = _;
  },
  "s+DT": function(e, t, n) {
    "use strict";
    n.d(t, "a", function() {
      return i;
    });
    var o = n("2lpH"),
      a = n.n(o),
      r = n("0N1H"),
      s = n("1n9R"),
      i = (function() {
        function i(e, t, n, o) {
          void 0 === e && (e = 0),
            e instanceof i
              ? (this.m_ulSteamID = e.m_ulSteamID)
              : "string" == typeof e
                ? (this.m_ulSteamID = a.a.fromString(e, !0))
                : t && n && void 0 !== o
                  ? this.SetFromComponents(e, o, n, t)
                  : (this.m_ulSteamID = e ? a.a.fromNumber(e, !0) : a.a.UZERO);
        }
        return (
          (i.InitFromAccountID = function(e) {
            return new i(e, s.a.EUNIVERSE, 1, r.k);
          }),
          (i.InitFromClanID = function(e) {
            return new i(e, s.a.EUNIVERSE, 7, 0);
          }),
          (i.prototype.GetAccountID = function() {
            return this.m_ulSteamID.getLowBitsUnsigned();
          }),
          (i.prototype.GetInstance = function() {
            return 1048575 & this.m_ulSteamID.getHighBitsUnsigned();
          }),
          (i.prototype.GetAccountType = function() {
            return (this.m_ulSteamID.getHighBitsUnsigned() >> 20) & 15;
          }),
          (i.prototype.GetUniverse = function() {
            return (this.m_ulSteamID.getHighBitsUnsigned() >> 24) & 255;
          }),
          (i.prototype.ConvertTo64BitString = function() {
            return this.m_ulSteamID.toString();
          }),
          (i.prototype.Render = function() {
            switch (this.GetAccountType()) {
              case 0:
                return (
                  "[I:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
              case 7:
                return (
                  "[g:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
              case 4:
                return (
                  "[A:" +
                  this.GetUniverse() +
                  ":" +
                  this.GetAccountID() +
                  ":" +
                  this.GetInstance() +
                  "]"
                );
              case 3:
                return (
                  "[G:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
              case 2:
                return (
                  "[M:" +
                  this.GetUniverse() +
                  ":" +
                  this.GetAccountID() +
                  ":" +
                  this.GetInstance() +
                  "]"
                );
              case 5:
                return (
                  "[P:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
              case 6:
                return (
                  "[C:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
              default:
                return (
                  "[U:" + this.GetUniverse() + ":" + this.GetAccountID() + "]"
                );
            }
          }),
          (i.prototype.BIsValid = function() {
            var e = this.GetAccountType();
            if (e <= 0 || 11 <= e) return !1;
            var t = this.GetUniverse();
            if (t <= 0 || 5 <= t) return !1;
            if (1 == e) {
              if (0 == this.GetAccountID() || this.GetInstance() > r.l)
                return !1;
            } else if (7 == e) {
              if (0 == this.GetAccountID() || 0 != this.GetInstance())
                return !1;
            } else if (3 == e && 0 == this.GetAccountID()) return !1;
            return !0;
          }),
          (i.prototype.BIsIndividualAccount = function() {
            return 1 == this.GetAccountType();
          }),
          (i.prototype.BIsClanAccount = function() {
            return 7 == this.GetAccountType();
          }),
          (i.prototype.SetAccountID = function(e) {
            this.m_ulSteamID = new a.a(
              e,
              this.m_ulSteamID.getHighBitsUnsigned(),
              !0
            );
          }),
          (i.prototype.SetInstance = function(e) {
            this.SetFromComponents(
              this.GetAccountID(),
              e,
              this.GetAccountType(),
              this.GetUniverse()
            );
          }),
          (i.prototype.SetAccountType = function(e) {
            this.SetFromComponents(
              this.GetAccountID(),
              this.GetInstance(),
              e,
              this.GetUniverse()
            );
          }),
          (i.prototype.SetUniverse = function(e) {
            this.SetFromComponents(
              this.GetAccountID(),
              this.GetInstance(),
              this.GetAccountType(),
              e
            );
          }),
          (i.prototype.SetFromComponents = function(e, t, n, o) {
            var i = ((255 & o) << 24) + ((15 & n) << 20) + (1048575 & t),
              r = 4294967295 & e;
            this.m_ulSteamID = new a.a(r, i, !0);
          }),
          i
        );
      })();
  },
  tkkQ: function(e, t, n) {
    "use strict";
    var o = n("1n9R");
    n.d(t, "a", function() {
      return o.a;
    }),
      n.d(t, "d", function() {
        return o.d;
      }),
      n.d(t, "c", function() {
        return o.c;
      }),
      n.d(t, "b", function() {
        return o.b;
      });
  }
});
