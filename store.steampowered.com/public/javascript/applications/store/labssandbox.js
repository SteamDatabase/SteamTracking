/**** (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/.
 ****/
(self.webpackChunkstore = self.webpackChunkstore || []).push([
  [1804],
  {
    50855: (e) => {
      e.exports = {
        LoginDialog: "_2Hj3a-BYR5A9d6Y6eTxf8I",
        AccountPasswordPanel: "_2LBKJjcyeeAER6uxAwF9VE",
        LoginPanelBackground: "_3Xp1HnNhHklf3nBxkQQrb7",
        LoginPanelContent: "UB5zID6zZyeYdo-h0Bvu4",
        ErrorMessage: "_3oDNF1ifw_JtcirOe7AGyh",
        AccountPasswordForm: "_2Mp7X_oS3ZCKkh1ZTF3bHM",
        AuthenticationPanel: "ApHu0QG3MlAA5pqo21-O2",
        AccountNameLabel: "_1WzDFzNss_PsfLbmsjMU6S",
        MedName: "_3V1uwLCqLwTY_zSH-rXgsC",
        LargeName: "_142CN0dD9Eao-3iX9ivMbZ",
        PasswordDots: "_1Xbz8g2o51UqV4DtJPj0hk",
        MedPass: "_2pUx4MzP1cOpmGrRyBWxjY",
        LargePass: "_3268nsJ4zxGvIOXnx6jH8L",
        AccountFieldHeader: "_2bLG3D_fmLYYr2bi7l9LYm",
        PasswordFieldHeader: "a3a45KMiAsgNFqNRn_q7W",
        NeedHelpLink: "_1Mi1lBerTs-M-thiecGA1l",
        NeedHelpHighlight: "_2RCec4CXzaWlw2Uf_YFDfE",
        CreateAccountLink: "x0CzniV8WOa1AUPRUHqQh",
        LoginCreateSeperator: "_TANIZGgITd9i_qKPHgvC",
        RefreshCaptchaText: "_1_C2PVNjSqHnFim6o1ZK0R",
        SigningInAccountName: "_2Tg37XxB9T4pq5VU2WlA2c",
        SigninTitle: "xJ2mRuljDUhf2a5fPUnIq",
        RememberMeCheck: "_1caeWNoZH6AeHjpb1OOeMY",
        SteamUpsellContainer: "_2Ge6aNfzBcM9sht2FBND1o",
        SteamUpsell: "_3r5LWZO4CCHaIeZbOAv_T4",
        CaptchaContainer: "_1waDjGmo6ZK85qbhzJrXqg",
        CaptchaBlock: "_1ltax2W2FWryYCSN0l-AxZ",
        CaptchaImageAndInput: "_3HUT29ELL8dnbkaS4kthbw",
        CaptchaImageBox: "dzf2fULDUt9ZuS8EBBesQ",
        CaptchaImage: "_3I-c16h7_cyh2s6MKplxCr",
        CaptchaInput: "FnbIIpLdCsi4E5dFejm-s",
        AuthenticatorInputcontainer: "_2_2v6YtNznSTXPdd4Sbe7n",
        Highlight: "_1tsysfOlsIWIDxj2Pbecpa",
        LoginComplete: "_2aP2Xz4mSeEEiQgMmrxzqj",
      };
    },
    62139: (e) => {
      e.exports = {
        AppSelector: "_2Fikzdx2lTWapJ8oB4VH_E",
        AppDisplay: "_3m6Shao1IRPuuFr0l_7k9l",
        LogoImage: "_3l4Ih5v0fiCKKodcEeMBx6",
        AppName: "_3kXBTGAEHZo3GGTE00v7fR",
        AppSelect: "_2VQ8j1BdC_eQDU74NrrgUf",
        Suggestions: "_102W4ows0_RdyFP6UygrQQ",
        Suggestion: "_3VfDLdhp_ip5SSQIxRvaP1",
        SimilarApp: "_3yV0M5fd6S0GJGbQUVr8v3",
        Spacer: "_1lpCSiBFFQ4eBhiy7uq863",
        Score: "_14zV9TivPpwwriU27MDzcJ",
        App: "_3xv8nd-XJp9gt6KQvKZz1e",
        Container: "_3r507eIQieIortWRpL_p-",
        TopSection: "ZS7SfmqvYN35Oo34Nulf3",
        Header: "_3PXzQH1cJBNzpq8n3h9tLj",
        Body: "LfOIb2hPYOsOlKu2fmCFl",
        SandboxSection: "-FZSwdssB08COThIQfMK8",
        LabsSimilarGames: "_3OMnQ2qb57wpm5YKWrF4mm",
        AppSelection: "_1U3311x5ZUGW7vJEJuzEH2",
        SimilarApps: "_3RByYPiaYU6aep4DLeH_TE",
        LabsSimilarity: "_32kTJnPnuMfAoOdT68EFxE",
        HorizontalSpacer: "_1FnF8c6Og53-dJM6GBdLWa",
        LabsPathfinder: "_1w-DUXN6LIasN_6v55P0_Y",
        SelectEndpoints: "_3QMIIB-guv958P7vast3i_",
        ComputeButton: "_230zDsKb1Xla9fd990J5-j",
        Disabled: "_3o1uEPeXS7kmhPp5j0fXKJ",
        ProgressMessage: "_2IvW-N7lSTGREjL8L5k6XC",
        Path: "V_RIvT-OYDPkuCbfdK2G2",
        LabsMixer: "_1Cns3SI2_c6tbhS9Ib5ZVE",
        Operand: "hILAxewgNwvhHBnXev-nT",
        OperatorSelect: "EM51KAc64W5DNP-imMK-P",
        AddOperand: "tZPTBtDnIu5m3W0blxApx",
        Tabs: "_3Uckh2jP7zKyhdyy5hM3LG",
        Tab: "_16ebkTYinAkWPZmoHK2c9y",
        Active: "_2J9KxT9Uk8my9bIJ76ab_v",
      };
    },
    21082: (e) => {
      e.exports = {
        EntryError: "_1UGoDpJ7HCnew3ISiLQi2r",
        ClusterConfig: "_3Qp2uY9UVYYKnJ-ptgEj0R",
        PlaytimeCluster: "_2qGfqWVATJJ7JZzV8beQLg",
        ClusterInfo: "_20dmpyf2P2BqcyJ1-ACi27",
        ClusterMembers: "VeQtFevYOvbG2bHTuR6U2",
        SimilarTitle: "gRxJTbzwDdBRGFpeDab1C",
      };
    },
    17083: (e, t, a) => {
      "use strict";
      a.d(t, { N_: () => g, k2: () => C });
      var r = a(92757),
        s = a(42891),
        i = a(90626),
        n = a(29248),
        o = a(58584),
        l = a(81115),
        p = a(68841);
      i.Component;
      i.Component;
      var m = function (e, t) {
          return "function" == typeof e ? e(t) : e;
        },
        c = function (e, t) {
          return "string" == typeof e ? (0, n.yJ)(e, null, null, t) : e;
        },
        d = function (e) {
          return e;
        },
        u = i.forwardRef;
      void 0 === u && (u = d);
      var h = u(function (e, t) {
        var a = e.innerRef,
          r = e.navigate,
          s = e.onClick,
          n = (0, l.A)(e, ["innerRef", "navigate", "onClick"]),
          p = n.target,
          m = (0, o.A)({}, n, {
            onClick: function (e) {
              try {
                s && s(e);
              } catch (t) {
                throw (e.preventDefault(), t);
              }
              e.defaultPrevented ||
                0 !== e.button ||
                (p && "_self" !== p) ||
                (function (e) {
                  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey);
                })(e) ||
                (e.preventDefault(), r());
            },
          });
        return (m.ref = (d !== u && t) || a), i.createElement("a", m);
      });
      var g = u(function (e, t) {
          var a = e.component,
            s = void 0 === a ? h : a,
            g = e.replace,
            _ = e.to,
            f = e.innerRef,
            C = (0, l.A)(e, ["component", "replace", "to", "innerRef"]);
          return i.createElement(r.XZ.Consumer, null, function (e) {
            e || (0, p.A)(!1);
            var a = e.history,
              r = c(m(_, e.location), e.location),
              l = r ? a.createHref(r) : "",
              h = (0, o.A)({}, C, {
                href: l,
                navigate: function () {
                  var t = m(_, e.location),
                    r = (0, n.AO)(e.location) === (0, n.AO)(c(t));
                  (g || r ? a.replace : a.push)(t);
                },
              });
            return (
              d !== u ? (h.ref = t || f) : (h.innerRef = f),
              i.createElement(s, h)
            );
          });
        }),
        _ = function (e) {
          return e;
        },
        f = i.forwardRef;
      void 0 === f && (f = _);
      var C = f(function (e, t) {
        var a = e["aria-current"],
          s = void 0 === a ? "page" : a,
          n = e.activeClassName,
          d = void 0 === n ? "active" : n,
          u = e.activeStyle,
          h = e.className,
          C = e.exact,
          S = e.isActive,
          y = e.location,
          b = e.sensitive,
          E = e.strict,
          w = e.style,
          v = e.to,
          I = e.innerRef,
          A = (0, l.A)(e, [
            "aria-current",
            "activeClassName",
            "activeStyle",
            "className",
            "exact",
            "isActive",
            "location",
            "sensitive",
            "strict",
            "style",
            "to",
            "innerRef",
          ]);
        return i.createElement(r.XZ.Consumer, null, function (e) {
          e || (0, p.A)(!1);
          var a = y || e.location,
            n = c(m(v, a), a),
            l = n.pathname,
            B = l && l.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1"),
            M = B
              ? (0, r.B6)(a.pathname, {
                  path: B,
                  exact: C,
                  sensitive: b,
                  strict: E,
                })
              : null,
            N = !!(S ? S(M, a) : M),
            R = "function" == typeof h ? h(N) : h,
            O = "function" == typeof w ? w(N) : w;
          N &&
            ((R = (function () {
              for (
                var e = arguments.length, t = new Array(e), a = 0;
                a < e;
                a++
              )
                t[a] = arguments[a];
              return t
                .filter(function (e) {
                  return e;
                })
                .join(" ");
            })(R, d)),
            (O = (0, o.A)({}, O, u)));
          var L = (0, o.A)(
            { "aria-current": (N && s) || null, className: R, style: O, to: n },
            A,
          );
          return (
            _ !== f ? (L.ref = t || I) : (L.innerRef = I), i.createElement(g, L)
          );
        });
      });
    },
    84155: (e, t, a) => {
      "use strict";
      a.r(t), a.d(t, { default: () => Me });
      var r = a(43527),
        s = a(34629),
        i = a(51006),
        n = a(72034),
        o = a(78327),
        l = a(14947),
        p = a(56093),
        m = a(41735),
        c = a.n(m);
      class d {
        rgModelNames = [];
        constructor() {
          (0, l.Gn)(this);
        }
        Init() {
          i.Vw.Init(new n.D(o.TS.WEBAPI_BASE_URL, o.iA.webapi_token));
          const e = `${o.TS.STORE_BASE_URL}labs/ajaxgetsimilaritymodelnames`;
          c()
            .get(e)
            .then((e) => {
              if (e.data) {
                let t = [];
                for (const a of e.data) "default" != a && t.push(a);
                t.sort(), (t = ["default", ...t]), (this.rgModelNames = t);
              }
            });
        }
        async ComputePathBetweenApps(e, t, a, r, s, i, n) {
          const o = Math.acos(a);
          let l = new h(
              async (e) => {
                let t = await this.GetNeighbors(e),
                  a = [];
                for (let e = 0; e < t.length; e++) {
                  const i = t[e];
                  if (
                    (!r || a.length > r) &&
                    (i.cost > o || (s && a.length >= s))
                  )
                    break;
                  a.push(i);
                }
                return a;
              },
              this.EstimateCosts,
              (e, t) => e == t,
              n,
            ),
            p = await l.FindPath(e, t, i || 10);
          if (p.path) {
            let e = [],
              t = 0;
            for (let a = 0; a < p.path.length; a++) {
              const r = p.path[a],
                s = r.cost - t;
              (t = r.cost), e.push({ appid: r.node, similarity: Math.cos(s) });
            }
            return e;
          }
          throw new Error("Unable to compute path.");
        }
        async GetNeighbors(e) {
          const t = `${o.TS.STORE_BASE_URL}labs/ajaxgetsimilarapps?appid=${e}`;
          let a = await c().get(t),
            r = [];
          if (a.data && a.data.appid == e)
            for (let e = 0; e < a.data.similar_appids.length; e++)
              r.push({
                node: a.data.similar_appids[e],
                cost: Math.acos(a.data.similarity_scores[e]),
              });
          return r;
        }
        async EstimateCosts(e, t) {
          const a = `${o.TS.STORE_BASE_URL}labs/ajaxgetappsimilarities?appidtarget=${t}&${e.map((e) => "appid[]=" + e.toString()).join("&")}`;
          let r = await c().get(a);
          if (r.data && r.data.similarity_scores)
            return r.data.similarity_scores.map((e) =>
              Math.acos(parseFloat(e)),
            );
          throw new Error("Unable to fetch cost estimates");
        }
      }
      (0, s.Cg)([l.sH], d.prototype, "rgModelNames", void 0),
        (0, s.Cg)([p.oI], d.prototype, "GetNeighbors", null),
        (0, s.Cg)([p.oI], d.prototype, "EstimateCosts", null);
      class u {
        m_fnCompare;
        m_Heap = [];
        m_Length = 0;
        constructor(e) {
          this.m_fnCompare = e;
        }
        get length() {
          return this.m_Length;
        }
        Clear() {
          (this.m_Heap = []), (this.m_Length = 0);
        }
        Peek() {
          return this.m_Length > 0 ? this.m_Heap[0] : void 0;
        }
        Pop() {
          if (0 != this.m_Length) {
            const e = this.m_Heap[0];
            return (
              (this.m_Heap[0] = this.m_Heap[this.m_Length - 1]),
              this.m_Length--,
              this.BubbleDown(),
              e
            );
          }
        }
        Push(e) {
          this.m_Heap.length == this.m_Length
            ? this.m_Heap.push(e)
            : (this.m_Heap[this.m_Length] = e),
            this.m_Length++,
            this.BubbleUp();
        }
        FindElement(e) {
          for (let t = 0; t < this.m_Length; t++)
            if (e(this.m_Heap[t])) return { index: t, element: this.m_Heap[t] };
        }
        LowerPriorityOfElement(e, t) {
          (this.m_Heap[e] = t), this.BubbleUp(e);
        }
        BubbleDown() {
          let e = 0;
          do {
            const t = 2 * e + 1,
              a = 2 * e + 2;
            let r = e;
            if (
              (t < this.m_Length &&
                this.m_fnCompare(this.m_Heap[r], this.m_Heap[t]) > 0 &&
                (r = t),
              a < this.m_Length &&
                this.m_fnCompare(this.m_Heap[r], this.m_Heap[a]) > 0 &&
                (r = a),
              r == e)
            )
              break;
            {
              const t = this.m_Heap[e];
              (this.m_Heap[e] = this.m_Heap[r]), (this.m_Heap[r] = t), (e = r);
            }
          } while (e < this.m_Length);
        }
        BubbleUp(e) {
          let t = e || this.m_Length - 1;
          for (; t > 0; ) {
            const e = (t - 1) >> 1;
            if (!(this.m_fnCompare(this.m_Heap[e], this.m_Heap[t]) > 0)) break;
            {
              const a = this.m_Heap[e];
              (this.m_Heap[e] = this.m_Heap[t]), (this.m_Heap[t] = a), (t = e);
            }
          }
        }
      }
      class h {
        m_fnGetNeighbors;
        m_fnEstimateCosts;
        m_fnEquality;
        m_fnIterationCallback;
        constructor(e, t, a, r) {
          (this.m_fnGetNeighbors = e),
            (this.m_fnEstimateCosts = t),
            (this.m_fnEquality = a),
            (this.m_fnIterationCallback = r);
        }
        async FindPath(e, t, a) {
          let r = new u((e, t) => e.cost - t.cost),
            s = new Set();
          r.Push({ node: e, cost: 0 });
          let i = new Map(),
            n = new Map(),
            o = new Map(),
            l = (await this.m_fnEstimateCosts([e], t))[0];
          i.set(e, l), n.set(e, 0);
          let p = 0;
          for (; r.length > 0 && p < a; ) {
            let e = r.Pop();
            if (this.m_fnEquality(e.node, t)) {
              let t = [],
                a = e.node;
              for (; o.has(a); ) t.push(a), (a = o.get(a));
              let r = [];
              for (let e = t.length - 1; e >= 0; e--)
                r.push({ node: t[e], cost: n.get(t[e]) });
              return { path: r };
            }
            s.add(e.node);
            let a = await this.m_fnGetNeighbors(e.node);
            if (a.length > 0) {
              let l = await this.m_fnEstimateCosts(
                a.map((e) => e.node),
                t,
              );
              if (l.length != a.length)
                return (
                  console.warn(
                    "Failed to fetch expected number of cost estimates. Failing pathfinding.",
                  ),
                  {}
                );
              let p = n.get(e.node);
              for (let t = 0; t < a.length; t++) {
                const m = a[t];
                let c = p + m.cost;
                if (
                  (!n.has(m.node) || c < n.get(m.node)) &&
                  (o.set(m.node, e.node),
                  n.set(m.node, c),
                  i.set(m.node, m.cost + l[t]),
                  !s.has(m.node))
                ) {
                  const e = m.cost + l[t];
                  let a = r.FindElement((e) => e.node == m.node);
                  a
                    ? a.element.cost > e &&
                      r.LowerPriorityOfElement(a.index, {
                        node: m.node,
                        cost: e,
                      })
                    : r.Push({ node: m.node, cost: e });
                }
              }
            }
            p++, this.m_fnIterationCallback && this.m_fnIterationCallback();
          }
          throw new Error("No path found.");
        }
      }
      const g = new d();
      window.g_LabsSandbox = g;
      var _ = a(90626),
        f = a(17083),
        C = a(92757),
        S = a(62139),
        y = a(7068),
        b = a(2160),
        E = a(75844),
        w = a(52038);
      class v extends _.Component {
        state = {
          appid: 0,
          appinfo: null,
          mode: "display",
          strSearch: "",
          rgSuggestions: [],
        };
        m_currentRequest = 0;
        constructor(e) {
          super(e),
            this.props.appidInitial &&
              (i.Vw.EnsureAppInfoForAppIDs([this.props.appidInitial]).then(
                () => {
                  i.Vw.GetAppInfo(this.props.appidInitial);
                  this.setState({
                    appid: this.props.appidInitial,
                    appinfo: i.Vw.GetAppInfo(this.props.appidInitial),
                  });
                },
              ),
              (this.state.appid = this.props.appidInitial));
        }
        OnDisplayClicked() {
          this.setState({ mode: "select" });
        }
        async UpdateAppSuggestions(e) {
          const t = e.target.value && e.target.value.trim();
          t?.length
            ? (window.clearTimeout(this.m_currentRequest),
              (this.m_currentRequest = window.setTimeout(async () => {
                const e = {
                    cc: o.TS.COUNTRY,
                    l: o.TS.LANGUAGE,
                    realm: b.TU.k_ESteamRealmGlobal,
                    origin: self.origin,
                    f: "jsonfull",
                    term: t.replace(" ", "+"),
                    require_type: "game",
                    excluded_tags: [],
                    excluded_content_descriptors: [],
                  },
                  a = `${o.TS.STORE_BASE_URL}search/suggest`,
                  r = await c().get(a, { params: e, withCredentials: !0 });
                let s;
                (s = r?.data?.length
                  ? r.data.map((e) =>
                      _.createElement(
                        "div",
                        {
                          className: S.Suggestion,
                          key: `suggestion-${e.id}`,
                          onClickCapture: () =>
                            this.SetSelectedApp(parseInt(e.id)),
                        },
                        _.createElement("img", {
                          src: e.img,
                          className: S.LogoImage,
                        }),
                        _.createElement(
                          "div",
                          { className: S.AppName },
                          e.name + (this.props.showAppIds ? ` (${e.id})` : ""),
                        ),
                      ),
                    )
                  : []),
                  this.setState({ strSearch: t, rgSuggestions: s });
              }, 250)))
            : this.setState({ strSearch: "", rgSuggestions: null });
        }
        SetSelectedApp(e) {
          e && 0 != e
            ? i.Vw.EnsureAppInfoForAppIDs([e]).then(() => {
                i.Vw.GetAppInfo(e);
                this.setState({
                  appid: e,
                  appinfo: i.Vw.GetAppInfo(e),
                  mode: "display",
                }),
                  this.props.fnOnSelection && this.props.fnOnSelection(e, this);
              })
            : this.setState({ appid: 0, appinfo: null, mode: "display" });
        }
        OnKeyUp(e) {
          27 == e.keyCode && this.setState({ mode: "display" });
        }
        render() {
          const e = this.props.classOverride ?? S.AppSelector;
          let t = null;
          const a = _.createElement(y.pd, {
            type: "text",
            onChange: this.UpdateAppSuggestions,
          });
          if ("display" == this.state.mode) {
            const e = this.state.appinfo
              ? this.state.appinfo.name +
                (this.props.showAppIds ? ` (${this.state.appid})` : "")
              : (this.props.strPrompt ?? "Select game");
            t = _.createElement(
              "div",
              { className: S.AppDisplay },
              this.state.appinfo &&
                _.createElement("img", {
                  src: this.state.appinfo.header_image_url,
                  className: S.LogoImage,
                }),
              _.createElement("div", { className: S.AppName }, e),
            );
          } else if ("select" == this.state.mode) {
            const e = this.state.strSearch.length > 0;
            t = _.createElement(
              "div",
              { className: S.AppSelect },
              a,
              e &&
                _.createElement(
                  "div",
                  { className: S.Suggestions },
                  this.state.rgSuggestions,
                ),
            );
          }
          return _.createElement(
            "div",
            {
              className: e,
              onClick: this.OnDisplayClicked,
              onKeyUpCapture: this.OnKeyUp,
            },
            t,
          );
        }
      }
      (0, s.Cg)([p.oI], v.prototype, "OnDisplayClicked", null),
        (0, s.Cg)([p.oI], v.prototype, "UpdateAppSuggestions", null),
        (0, s.Cg)([p.oI], v.prototype, "OnKeyUp", null);
      class I extends _.Component {
        render() {
          if (0 == this.props.appid)
            return _.createElement("div", { className: S.SimilarApp });
          {
            const e = i.Vw.GetAppInfo(this.props.appid);
            if (!e || !e.is_valid)
              return _.createElement("div", { className: S.SimilarApp });
            let t = [];
            if (this.props.score) {
              t.push(
                _.createElement("div", {
                  className: S.Spacer,
                  key: "score-spacer",
                }),
              );
              const e = Math.round(100 * this.props.score).toString() + "%";
              t.push(
                _.createElement(
                  "div",
                  { className: S.Score, key: "score-value" },
                  e,
                ),
              );
            }
            const a = e.name + " (" + this.props.appid.toString() + ")",
              r = this.props.fnOnSelected ? this.props.fnOnSelected : (e) => {};
            return _.createElement(
              "div",
              { className: S.SimilarApp, onClick: () => r(this.props.appid) },
              _.createElement("img", {
                src: e.header_image_url,
                className: S.LogoImage,
              }),
              _.createElement("div", { className: S.AppName }, a),
              t,
            );
          }
        }
      }
      class A extends _.Component {
        state = {};
        ref_app_a = _.createRef();
        ref_app_b = _.createRef();
        componentDidMount() {
          this.OnAppSelected();
        }
        OnAppSelected() {
          if (
            this.ref_app_a.current &&
            this.ref_app_b.current &&
            this.ref_app_a.current.state.appid &&
            this.ref_app_b.current.state.appid
          ) {
            const e = this.ref_app_a.current.state.appid,
              t = this.ref_app_b.current.state.appid,
              a = `${o.TS.STORE_BASE_URL}labs/ajaxgetappsimilarities?appidtarget=${e}&appid[]=${t}`;
            c()
              .get(a)
              .then((e) => {
                e.data && e.data.similarity_scores
                  ? this.setState({ score: e.data.similarity_scores[0] })
                  : this.setState({ score: null });
              });
          }
        }
        render() {
          const e = this.state.score
            ? (100 * this.state.score).toFixed(1) + "%"
            : "";
          return _.createElement(
            "div",
            { className: S.LabsSimilarity },
            _.createElement(v, {
              fnOnSelection: this.OnAppSelected,
              ref: this.ref_app_a,
              showAppIds: !0,
              appidInitial: 268500,
              key: "similar_app_a",
            }),
            _.createElement("div", { className: S.HorizontalSpacer }),
            _.createElement("div", { className: S.Score }, e),
            _.createElement("div", { className: S.HorizontalSpacer }),
            _.createElement(v, {
              fnOnSelection: this.OnAppSelected,
              ref: this.ref_app_b,
              showAppIds: !0,
              appidInitial: 200510,
              key: "similar_app_b",
            }),
          );
        }
      }
      (0, s.Cg)([p.oI], A.prototype, "OnAppSelected", null);
      let B = class extends _.Component {
        selected_app = 0;
        similar_apps = [];
        similarity_scores = [];
        similarity_model = "default";
        app_selector_ref = _.createRef();
        constructor(e) {
          super(e),
            (0, l.Gn)(this),
            e.default_app && this.SetSelectedApp(e.default_app);
        }
        componentDidMount() {
          this.app_selector_ref.current &&
            this.SetSelectedApp(this.app_selector_ref.current.state.appid);
        }
        OnSelectedApp(e) {
          e && this.SetSelectedApp(e);
        }
        SetSelectedApp(e, t) {
          if (t || e != this.selected_app) {
            (this.similar_apps = []),
              (this.selected_app = e),
              this.app_selector_ref.current &&
                this.app_selector_ref.current.SetSelectedApp(e);
            const t = `${o.TS.STORE_BASE_URL}labs/ajaxgetsimilarapps?appid=${e}&model=${this.similarity_model}`;
            c()
              .get(t)
              .then((e) => {
                if (e.data && e.data.appid == this.selected_app) {
                  let t = new Set(
                    e.data.similar_appids.slice(0, this.props.max_similar),
                  );
                  t.add(e.data.appid),
                    i.Vw.EnsureAppInfoForAppIDs(t).then(() => {
                      (this.similar_apps = e.data.similar_appids),
                        (this.similarity_scores = e.data.similarity_scores);
                    });
                }
              });
          }
        }
        OnModelChanged(e, t) {
          (this.similarity_model = e.data),
            this.SetSelectedApp(this.selected_app, !0);
        }
        render() {
          let e,
            t = [];
          const a = Math.min(
            this.similar_apps.length,
            this.similarity_scores.length,
            this.props.max_similar,
          );
          for (e = 0; e < a; e++) {
            const a = this.similar_apps[e],
              r = this.similarity_scores[e];
            t.push(
              _.createElement(I, {
                appid: a,
                score: r,
                key: a,
                fnOnSelected: this.SetSelectedApp,
              }),
            );
          }
          let r = [];
          for (const e of g.rgModelNames) {
            let t = { label: _.createElement("div", { key: e }, e), data: e };
            r.push(t);
          }
          return _.createElement(
            "div",
            { className: S.LabsSimilarGames },
            _.createElement(y.m, {
              rgOptions: r,
              onChange: this.OnModelChanged,
              selectedOption: "default",
            }),
            _.createElement("h1", null, "Games similar to:"),
            _.createElement(v, {
              fnOnSelection: this.OnSelectedApp,
              ref: this.app_selector_ref,
              appidInitial: 268500,
              showAppIds: !0,
            }),
            _.createElement("div", { className: S.SimilarApps }, t),
          );
        }
      };
      (0, s.Cg)([l.sH], B.prototype, "selected_app", void 0),
        (0, s.Cg)([l.sH], B.prototype, "similar_apps", void 0),
        (0, s.Cg)([l.sH], B.prototype, "similarity_scores", void 0),
        (0, s.Cg)([l.sH], B.prototype, "similarity_model", void 0),
        (0, s.Cg)([p.oI], B.prototype, "OnSelectedApp", null),
        (0, s.Cg)([p.oI], B.prototype, "SetSelectedApp", null),
        (0, s.Cg)([p.oI], B.prototype, "OnModelChanged", null),
        (B = (0, s.Cg)([E.PA], B));
      let M = class extends _.Component {
        selected_app = void 0;
        selected_operator = void 0;
        constructor(e) {
          super(e),
            (0, l.Gn)(this),
            (this.selected_app = e.app),
            (this.selected_operator = e.operator);
        }
        OnSelectedApp(e) {
          e &&
            e != this.selected_app &&
            ((this.selected_app = e),
            this.props.fnOnChange && this.props.fnOnChange());
        }
        OnSelectedOperator(e, t) {
          (this.selected_operator = e.data),
            this.props.fnOnChange && this.props.fnOnChange();
        }
        render() {
          let e = [
            {
              label: _.createElement("div", { key: "Plus" }, "Plus"),
              data: "Plus",
            },
            {
              label: _.createElement("div", { key: "Minus" }, "Minus"),
              data: "Minus",
            },
          ];
          return _.createElement(
            "div",
            { className: S.Operand },
            _.createElement(
              "div",
              { className: S.OperatorSelect },
              _.createElement(y.m, {
                rgOptions: e,
                onChange: this.OnSelectedOperator,
                selectedOption: "Plus",
              }),
            ),
            _.createElement(v, { fnOnSelection: this.OnSelectedApp }),
          );
        }
      };
      (0, s.Cg)([l.sH], M.prototype, "selected_app", void 0),
        (0, s.Cg)([l.sH], M.prototype, "selected_operator", void 0),
        (0, s.Cg)([p.oI], M.prototype, "OnSelectedApp", null),
        (0, s.Cg)([p.oI], M.prototype, "OnSelectedOperator", null),
        (M = (0, s.Cg)([E.PA], M));
      let N = class extends _.Component {
        operands = [];
        similarity_model = "default";
        similar_apps = [];
        similarity_scores = [];
        operand_refs;
        constructor(e) {
          super(e), (0, l.Gn)(this), (this.operand_refs = []);
          for (let t = 0; t < e.max_operands; t++)
            this.operand_refs.push(_.createRef());
        }
        OnModelChanged(e, t) {
          (this.similarity_model = e.data), this.RecomputeExpression();
        }
        OnAddOperand() {
          this.operands.length < this.props.max_operands &&
            this.operands.push({
              app: 0,
              operator: this.operands.length > 0 ? "Plus" : void 0,
            });
        }
        OnOperandChanged() {
          for (let e = 0; e < this.operands.length; e++) {
            const t = this.operand_refs[e].current;
            (this.operands[e].app = t.selected_app),
              (this.operands[e].operator = t.selected_operator);
          }
          this.RecomputeExpression();
        }
        RecomputeExpression() {
          if (0 == this.operands.length) return;
          const e = this.operands.map((e) => "appid[]=" + e.app.toString()),
            t = `${o.TS.STORE_BASE_URL}labs/ajaxgetappvectors?${e.join("&")}&model=${this.similarity_model}`;
          c()
            .get(t)
            .then((e) => {
              if (
                ((this.similar_apps = []),
                (this.similarity_scores = []),
                e.data && e.data.length == this.operands.length)
              ) {
                let t = e.data[0].components.map((e) => parseFloat(e));
                for (let a = 1; a < this.operands.length; a++) {
                  const r = e.data[a].components.map((e) => parseFloat(e));
                  "Plus" == this.operands[a].operator
                    ? (t = t.map((e, t) => e + r[t]))
                    : "Minus" == this.operands[a].operator
                      ? (t = t.map((e, t) => e - r[t]))
                      : console.log(
                          "Unexpected operator " + this.operands[a].operator,
                        );
                }
                const a = t.map((e) => e * e).reduce((e, t) => e + t, 0),
                  r = Math.sqrt(a);
                if (r > 1e-4) {
                  const e = t
                      .map((e) => e / r)
                      .map((e) => "x[]=" + e)
                      .join("&"),
                    a = `${o.TS.STORE_BASE_URL}labs/ajaxgetmostsimilarappstovector?${e}&model=${this.similarity_model}`;
                  c()
                    .get(a)
                    .then((e) => {
                      let t = new Set(
                        e.data.similar_appids.slice(0, this.props.max_similar),
                      );
                      i.Vw.EnsureAppInfoForAppIDs(t).then(() => {
                        (this.similar_apps = e.data.similar_appids),
                          (this.similarity_scores = e.data.similarity_scores);
                      });
                    });
                }
              }
            });
        }
        render() {
          let e = [];
          for (const t of g.rgModelNames) {
            let a = { label: _.createElement("div", { key: t }, t), data: t };
            e.push(a);
          }
          let t = [],
            a = 0;
          for (const e of this.operands)
            t.push(
              _.createElement(M, {
                app: e.app,
                operator: e.operator,
                key: a,
                fnOnChange: this.OnOperandChanged,
                ref: this.operand_refs[a],
              }),
            ),
              a++;
          let r = null;
          this.operands.length < this.props.max_operands &&
            (r = _.createElement(
              "div",
              { className: S.AddOperand, onClick: this.OnAddOperand },
              "+",
            ));
          let s = [];
          const i = Math.min(
            this.similar_apps.length,
            this.similarity_scores.length,
            this.props.max_similar,
          );
          for (let e = 0; e < i; e++) {
            const t = this.similar_apps[e],
              a = this.similarity_scores[e];
            s.push(_.createElement(I, { appid: t, score: a, key: t }));
          }
          return _.createElement(
            "div",
            { className: S.LabsMixer },
            _.createElement(y.m, {
              rgOptions: e,
              onChange: this.OnModelChanged,
              selectedOption: "default",
            }),
            _.createElement("h1", null, "Mixture"),
            t,
            r,
            _.createElement("h1", null, "Games similar to mixture"),
            _.createElement("div", { className: S.SimilarApps }, s),
          );
        }
      };
      (0, s.Cg)([l.sH], N.prototype, "operands", void 0),
        (0, s.Cg)([l.sH], N.prototype, "similarity_model", void 0),
        (0, s.Cg)([l.sH], N.prototype, "similar_apps", void 0),
        (0, s.Cg)([l.sH], N.prototype, "similarity_scores", void 0),
        (0, s.Cg)([p.oI], N.prototype, "OnModelChanged", null),
        (0, s.Cg)([p.oI], N.prototype, "OnAddOperand", null),
        (0, s.Cg)([p.oI], N.prototype, "OnOperandChanged", null),
        (N = (0, s.Cg)([E.PA], N));
      let R = class extends _.Component {
        constructor(e) {
          super(e), (0, l.Gn)(this);
        }
        app_start = 0;
        app_end = 0;
        in_progress = !1;
        progress_iteration = 0;
        found_path = void 0;
        IterationCallback() {
          this.progress_iteration++;
        }
        Pathfind() {
          this.in_progress ||
            ((this.in_progress = !0),
            (this.progress_iteration = 0),
            (this.found_path = void 0),
            g
              .ComputePathBetweenApps(
                this.app_start,
                this.app_end,
                0.75,
                3,
                10,
                200,
                this.IterationCallback,
              )
              .then((e) => {
                (this.in_progress = !1),
                  i.Vw.EnsureAppInfoForAppIDs(e.map((e) => e.appid)).then(
                    () => {
                      this.found_path = e;
                    },
                  );
              })
              .catch((e) => {
                console.warn(
                  "Caught pathfinding failure because: " + e.toString(),
                ),
                  (this.in_progress = !1),
                  (this.found_path = void 0);
              }));
        }
        OnSelectedStartApp(e) {
          i.Vw.EnsureAppInfoForAppIDs([e]).then(() => {
            this.app_start = e;
          });
        }
        OnSelectedEndApp(e) {
          i.Vw.EnsureAppInfoForAppIDs([e]).then(() => {
            this.app_end = e;
          });
        }
        render() {
          const e =
              0 != this.app_start &&
              0 != this.app_end &&
              !this.in_progress &&
              this.app_start != this.app_end,
            t = e ? S.ComputeButton : (0, w.A)(S.ComputeButton, S.Disable);
          let a = null;
          a = this.in_progress
            ? _.createElement(
                "div",
                { className: S.ProgressMessage },
                "Finding path, step " + this.progress_iteration,
              )
            : this.found_path
              ? _.createElement(
                  "div",
                  { className: S.ProgressMessage },
                  "Found path",
                )
              : _.createElement(
                  "div",
                  { className: S.ProgressMessage },
                  "No path found",
                );
          let r = [];
          if (this.found_path)
            for (let e = 0; e < this.found_path.length; e++) {
              const t = this.found_path[e];
              r.push(
                _.createElement(I, {
                  appid: t.appid,
                  score: t.similarity,
                  key: "pathstep" + e,
                }),
              );
            }
          return _.createElement(
            "div",
            { className: S.LabsPathfinder },
            _.createElement(
              "div",
              { className: S.SelectEndpoints },
              _.createElement(v, {
                fnOnSelection: this.OnSelectedStartApp,
                strPrompt: "Select start game",
              }),
              _.createElement(v, {
                fnOnSelection: this.OnSelectedEndApp,
                strPrompt: "Select end game",
              }),
            ),
            _.createElement(
              "div",
              { className: t, onClick: e ? this.Pathfind : () => {} },
              "Pathfind!",
            ),
            a,
            _.createElement("div", { className: S.Path }, r),
          );
        }
      };
      function O() {
        return _.createElement(
          _.Fragment,
          null,
          _.createElement("h1", null, "Similar Games"),
          _.createElement(B, { max_similar: 10 }),
          _.createElement("div", { className: S.Spacer }),
          _.createElement("h1", null, "Similarity"),
          _.createElement(A, null),
          _.createElement("div", { className: S.Spacer }),
          _.createElement("h1", null, "Mixer"),
          _.createElement(N, { max_similar: 10, max_operands: 6 }),
          _.createElement("div", { className: S.Spacer }),
          _.createElement("h1", null, "Pathfinder"),
          _.createElement(R, null),
        );
      }
      (0, s.Cg)([l.sH], R.prototype, "app_start", void 0),
        (0, s.Cg)([l.sH], R.prototype, "app_end", void 0),
        (0, s.Cg)([l.sH], R.prototype, "in_progress", void 0),
        (0, s.Cg)([l.sH], R.prototype, "progress_iteration", void 0),
        (0, s.Cg)([l.sH], R.prototype, "found_path", void 0),
        (0, s.Cg)([p.oI], R.prototype, "IterationCallback", null),
        (0, s.Cg)([p.oI], R.prototype, "Pathfind", null),
        (0, s.Cg)([p.oI], R.prototype, "OnSelectedStartApp", null),
        (0, s.Cg)([p.oI], R.prototype, "OnSelectedEndApp", null),
        (R = (0, s.Cg)([E.PA], R));
      var L = a(17720),
        P = a(51240),
        F = a(56545),
        T = a(80613),
        z = a(89068),
        x = a(15161);
      const U = T.Message;
      class k extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            k.prototype.tag_score_factor || z.Sg(k.M()),
            U.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            k.sm_m ||
              (k.sm_m = {
                proto: k,
                fields: {
                  tag_score_factor: {
                    n: 1,
                    d: 1,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                  playtime_max_seconds: {
                    n: 10,
                    d: 36e4,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  playtime_max_games: {
                    n: 11,
                    d: 3,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  playtime_score_factor: {
                    n: 12,
                    d: 0.9,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                  popularity_factor: {
                    n: 20,
                    d: 5,
                    br: z.qM.readEnum,
                    bw: z.gp.writeEnum,
                  },
                  popularity_reciprocal: {
                    n: 21,
                    d: 1e4,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  popularity_base_score: {
                    n: 22,
                    d: "5000000",
                    br: z.qM.readInt64String,
                    bw: z.gp.writeInt64String,
                  },
                },
              }),
            k.sm_m
          );
        }
        static MBF() {
          return k.sm_mbf || (k.sm_mbf = z.w0(k.M())), k.sm_mbf;
        }
        toObject(e = !1) {
          return k.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(k.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(k.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new k();
          return k.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(k.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return k.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(k.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return k.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "StoreAppSimilarityPriorityOptions";
        }
      }
      class D extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            D.prototype.steamid || z.Sg(D.M()),
            U.initialize(this, e, 0, -1, [3], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            D.sm_m ||
              (D.sm_m = {
                proto: D,
                fields: {
                  steamid: {
                    n: 1,
                    br: z.qM.readFixed64String,
                    bw: z.gp.writeFixed64String,
                  },
                  country_code: {
                    n: 2,
                    br: z.qM.readString,
                    bw: z.gp.writeString,
                  },
                  ids: { n: 3, c: x.O4, r: !0, q: !0 },
                  options: { n: 4, c: k },
                  debug: { n: 5, br: z.qM.readBool, bw: z.gp.writeBool },
                  include_owned_games: {
                    n: 6,
                    br: z.qM.readBool,
                    bw: z.gp.writeBool,
                  },
                },
              }),
            D.sm_m
          );
        }
        static MBF() {
          return D.sm_mbf || (D.sm_mbf = z.w0(D.M())), D.sm_mbf;
        }
        toObject(e = !1) {
          return D.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(D.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(D.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new D();
          return D.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(D.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return D.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(D.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return D.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_PrioritizeAppsForUser_Request";
        }
      }
      class q extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            q.prototype.items || z.Sg(q.M()),
            U.initialize(this, e, 0, -1, [1], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            q.sm_m ||
              (q.sm_m = {
                proto: q,
                fields: { items: { n: 1, c: G, r: !0, q: !0 } },
              }),
            q.sm_m
          );
        }
        static MBF() {
          return q.sm_mbf || (q.sm_mbf = z.w0(q.M())), q.sm_mbf;
        }
        toObject(e = !1) {
          return q.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(q.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(q.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new q();
          return q.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(q.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return q.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(q.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return q.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_PrioritizeAppsForUser_Response";
        }
      }
      class G extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            G.prototype.id || z.Sg(G.M()),
            U.initialize(this, e, 0, -1, [50], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            G.sm_m ||
              (G.sm_m = {
                proto: G,
                fields: {
                  id: { n: 1, c: x.O4 },
                  already_owned: {
                    n: 2,
                    br: z.qM.readBool,
                    bw: z.gp.writeBool,
                  },
                  weight: { n: 3, br: z.qM.readDouble, bw: z.gp.writeDouble },
                  weight_before_dedupe: {
                    n: 4,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                  debug_matches: { n: 50, c: H, r: !0, q: !0 },
                  debug_popularity: { n: 51, c: j },
                },
              }),
            G.sm_m
          );
        }
        static MBF() {
          return G.sm_mbf || (G.sm_mbf = z.w0(G.M())), G.sm_mbf;
        }
        toObject(e = !1) {
          return G.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(G.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(G.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new G();
          return G.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(G.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return G.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(G.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return G.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_PrioritizeAppsForUser_Response_ResultItem";
        }
      }
      class H extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            H.prototype.source_app || z.Sg(H.M()),
            U.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            H.sm_m ||
              (H.sm_m = {
                proto: H,
                fields: {
                  source_app: { n: 1, br: z.qM.readInt32, bw: z.gp.writeInt32 },
                  weight: { n: 2, br: z.qM.readDouble, bw: z.gp.writeDouble },
                  similarity: {
                    n: 3,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                },
              }),
            H.sm_m
          );
        }
        static MBF() {
          return H.sm_mbf || (H.sm_mbf = z.w0(H.M())), H.sm_mbf;
        }
        toObject(e = !1) {
          return H.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(H.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(H.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new H();
          return H.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(H.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return H.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(H.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return H.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_PrioritizeAppsForUser_Response_ResultItem_MatchDebugInfo";
        }
      }
      class j extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            j.prototype.rank || z.Sg(j.M()),
            U.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            j.sm_m ||
              (j.sm_m = {
                proto: j,
                fields: {
                  rank: { n: 1, br: z.qM.readUint32, bw: z.gp.writeUint32 },
                  popularity_factor: {
                    n: 2,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                  weight_before_popularity: {
                    n: 3,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                },
              }),
            j.sm_m
          );
        }
        static MBF() {
          return j.sm_mbf || (j.sm_mbf = z.w0(j.M())), j.sm_mbf;
        }
        toObject(e = !1) {
          return j.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(j.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(j.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new j();
          return j.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(j.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return j.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(j.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return j.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_PrioritizeAppsForUser_Response_ResultItem_PopularityDebugInfo";
        }
      }
      class W extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            W.prototype.steamid || z.Sg(W.M()),
            U.initialize(this, e, 0, -1, void 0, null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            W.sm_m ||
              (W.sm_m = {
                proto: W,
                fields: {
                  steamid: {
                    n: 1,
                    br: z.qM.readFixed64String,
                    bw: z.gp.writeFixed64String,
                  },
                  sort: { n: 2, d: 1, br: z.qM.readEnum, bw: z.gp.writeEnum },
                  clusters_to_return: {
                    n: 3,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  cluster_index: {
                    n: 4,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  context: { n: 10, c: x.TS },
                  data_request: { n: 11, c: x.gn },
                },
              }),
            W.sm_m
          );
        }
        static MBF() {
          return W.sm_mbf || (W.sm_mbf = z.w0(W.M())), W.sm_mbf;
        }
        toObject(e = !1) {
          return W.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(W.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(W.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new W();
          return W.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(W.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return W.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(W.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return W.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_IdentifyClustersFromPlaytime_Request";
        }
      }
      class V extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            V.prototype.clusters || z.Sg(V.M()),
            U.initialize(this, e, 0, -1, [1], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            V.sm_m ||
              (V.sm_m = {
                proto: V,
                fields: { clusters: { n: 1, c: K, r: !0, q: !0 } },
              }),
            V.sm_m
          );
        }
        static MBF() {
          return V.sm_mbf || (V.sm_mbf = z.w0(V.M())), V.sm_mbf;
        }
        toObject(e = !1) {
          return V.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(V.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(V.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new V();
          return V.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(V.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return V.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(V.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return V.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_IdentifyClustersFromPlaytime_Response";
        }
      }
      class K extends U {
        static ImplementsStaticInterface() {}
        constructor(e = null) {
          super(),
            K.prototype.cluster_id || z.Sg(K.M()),
            U.initialize(this, e, 0, -1, [5, 6, 7], null);
        }
        static sm_m;
        static sm_mbf;
        static M() {
          return (
            K.sm_m ||
              (K.sm_m = {
                proto: K,
                fields: {
                  cluster_id: { n: 1, br: z.qM.readInt32, bw: z.gp.writeInt32 },
                  playtime_forever: {
                    n: 2,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  playtime_2weeks: {
                    n: 3,
                    br: z.qM.readInt32,
                    bw: z.gp.writeInt32,
                  },
                  last_played: {
                    n: 4,
                    br: z.qM.readUint32,
                    bw: z.gp.writeUint32,
                  },
                  played_appids: {
                    n: 5,
                    r: !0,
                    q: !0,
                    br: z.qM.readInt32,
                    pbr: z.qM.readPackedInt32,
                    bw: z.gp.writeRepeatedInt32,
                  },
                  similar_items_appids: {
                    n: 6,
                    r: !0,
                    q: !0,
                    br: z.qM.readInt32,
                    pbr: z.qM.readPackedInt32,
                    bw: z.gp.writeRepeatedInt32,
                  },
                  similar_items: { n: 7, c: x.vB, r: !0, q: !0 },
                  similar_item_popularity_score: {
                    n: 8,
                    br: z.qM.readDouble,
                    bw: z.gp.writeDouble,
                  },
                },
              }),
            K.sm_m
          );
        }
        static MBF() {
          return K.sm_mbf || (K.sm_mbf = z.w0(K.M())), K.sm_mbf;
        }
        toObject(e = !1) {
          return K.toObject(e, this);
        }
        static toObject(e, t) {
          return z.BT(K.M(), e, t);
        }
        static fromObject(e) {
          return z.Uq(K.M(), e);
        }
        static deserializeBinary(e) {
          let t = new T.BinaryReader(e),
            a = new K();
          return K.deserializeBinaryFromReader(a, t);
        }
        static deserializeBinaryFromReader(e, t) {
          return z.zj(K.MBF(), e, t);
        }
        serializeBinary() {
          var e = new T.BinaryWriter();
          return K.serializeBinaryToWriter(this, e), e.getResultBuffer();
        }
        static serializeBinaryToWriter(e, t) {
          z.i0(K.M(), e, t);
        }
        serializeBase64String() {
          var e = new T.BinaryWriter();
          return K.serializeBinaryToWriter(this, e), e.getResultBase64String();
        }
        getClassName() {
          return "CStoreAppSimilarity_IdentifyClustersFromPlaytime_Response_Cluster";
        }
      }
      var $;
      !(function (e) {
        (e.PrioritizeAppsForUser = function (e, t) {
          return e.SendMsg(
            "StoreAppSimilarity.PrioritizeAppsForUser#1",
            (0, F.I8)(D, t),
            q,
            { bConstMethod: !0, ePrivilege: 2, eWebAPIKeyRequirement: 2 },
          );
        }),
          (e.IdentifyClustersFromPlaytime = function (e, t) {
            return e.SendMsg(
              "StoreAppSimilarity.IdentifyClustersFromPlaytime#1",
              (0, F.I8)(W, t),
              V,
              { ePrivilege: 2, eWebAPIKeyRequirement: 2 },
            );
          });
      })($ || ($ = {}));
      var Y = a(72839),
        J = a(16021);
      class Q {
        m_SteamInterface;
        constructor(e) {
          this.m_SteamInterface = e;
        }
        LoadPlaytimeClusters(e, t, a, r) {
          return new Z(this.m_SteamInterface, e, t, a, r);
        }
      }
      class Z {
        m_callbacksLoaded = new P.lu();
        m_rgClusters;
        constructor(e, t, a, r, s) {
          const i = F.w.Init(W);
          (0, Y.rV)(i),
            s && (0, Y.Bn)(i, s),
            i.Body().set_steamid(t || o.iA.steamid),
            r && i.Body().set_clusters_to_return(r),
            i.Body().set_sort(a),
            $.IdentifyClustersFromPlaytime(e.GetServiceTransport(), i).then(
              (e) => {
                const t = e.Body();
                this.m_rgClusters = [];
                for (const e of t.clusters())
                  this.m_rgClusters.push(this.ReadCluster(e, s));
                this.m_callbacksLoaded.Dispatch(this.m_rgClusters);
              },
            );
        }
        ReadCluster(e, t) {
          let a;
          return (
            t && (a = e.similar_items().map((e) => J.A.Get().ReadItem(e, t))),
            {
              nClusterID: e.cluster_id(),
              nPlaytimeMinutes: e.playtime_forever(),
              nPlaytimeMinutes2Weeks: e.playtime_2weeks(),
              rtLastPlayed: e.last_played(),
              rgAppIDsPlayed: e.played_appids(),
              rgSimilarItems: a.filter((e) => !!e),
              rgSimilarAppIDs: e.similar_items_appids(),
              flPopularityScore: e.similar_item_popularity_score(),
            }
          );
        }
        RegisterOnReadyCallback(e) {
          const t = this.m_callbacksLoaded.Register(e);
          return (
            void 0 !== this.m_rgClusters &&
              window.setTimeout(() => e(this.m_rgClusters), 0),
            t
          );
        }
      }
      var X = a(22797),
        ee = a(61859),
        te = a(21082),
        ae = a(55263),
        re = a(94607),
        se = a(84811);
      function ie(e) {
        const { SteamInterface: t } = e,
          a = _.useRef();
        return (
          a.current || (a.current = new Q(t)),
          _.createElement(
            _.Fragment,
            null,
            _.createElement(
              "div",
              null,
              _.createElement(
                "p",
                null,
                "This data is generated by analyzing games based on similar tags, and generating clusters from that.  We then look at your playtime history to see what games are in clusters together, and suggest other popular games in those clusters.",
              ),
              _.createElement(
                "p",
                null,
                "You can also ",
                _.createElement(
                  "a",
                  {
                    href: "http://store-tc.k.steam.net/graph",
                    target: "_blank",
                  },
                  "browse the cluster data graphically",
                ),
                " (requires Rack VPN).",
              ),
            ),
            _.createElement(oe, { SimilarityStore: a.current }),
          )
        );
      }
      const ne = {
        3: "Total Playtime",
        2: "Number of Played Games",
        1: "Most Recently Played",
      };
      function oe(e) {
        const { SimilarityStore: t } = e,
          [a, r] = _.useState(o.iA.steamid),
          [s, i] = _.useState("10"),
          [n, l] = _.useState(1),
          p = _.useCallback((e) => r(e.currentTarget.value), [r]),
          m = _.useCallback((e) => i(e.currentTarget.value), [i]),
          c = _.useCallback((e) => l(e.data), [l]);
        let d = !1;
        const u = _.useRef(o.iA.steamid),
          h = a && new L.b(a);
        let g;
        h &&
          h.BIsValid() &&
          h.BIsIndividualAccount() &&
          ((u.current = h.ConvertTo64BitString()), (d = !0)),
          s && !isNaN(parseInt(s)) && (g = parseInt(s));
        const f = _.useMemo(() => {
            let e = [];
            for (let t in ne) e.push({ data: Number(t), label: ne[t] });
            return e;
          }, []),
          C = (function (e, t, a, r = 1, s = null, i = []) {
            const [n, o] = _.useState(null);
            return (
              _.useEffect(() => {
                if ((o(null), a))
                  return e
                    .LoadPlaytimeClusters(a, r, s, t)
                    .RegisterOnReadyCallback(o).Unregister;
              }, [a, r, s, ...i]),
              n
            );
          })(
            t,
            { include_assets: !0, include_basic_info: !0 },
            u.current,
            n,
            g,
          );
        return _.createElement(
          "div",
          null,
          _.createElement(
            y.nB,
            { className: te.ClusterConfig },
            _.createElement(y.pd, {
              label: "SteamID",
              type: "text",
              value: a,
              onChange: p,
              description: !d && "Invalid SteamID",
            }),
            _.createElement(y.pd, {
              label: "Clusters to return (Set to blank for all clusters)",
              type: "text",
              value: s,
              onChange: m,
            }),
            _.createElement(y.m, {
              label: "Sort clusters by",
              rgOptions: f,
              selectedOption: n,
              onChange: c,
            }),
          ),
          d && !C && _.createElement(X.t, null),
          C && _.createElement(le, { rgPlaytimeClusters: C }),
        );
      }
      function le(e) {
        const { rgPlaytimeClusters: t } = e;
        return _.createElement(
          "div",
          null,
          t.map((e) =>
            _.createElement(
              se.tH,
              { key: e.nClusterID },
              _.createElement(pe, { cluster: e }),
            ),
          ),
        );
      }
      function pe(e) {
        const { cluster: t } = e,
          [a, r] = _.useState(!1),
          s = _.useCallback(() => r(!0), [r]),
          [i, n] = _.useState(!1),
          o = _.useCallback(() => n(!0), [n]);
        return _.createElement(
          re.Y,
          { onEnter: o },
          _.createElement(
            "div",
            { className: te.PlaytimeCluster },
            _.createElement(
              "div",
              { className: te.ClusterInfo },
              _.createElement("h1", null, "Cluster ", t.nClusterID),
              _.createElement(
                se.tH,
                null,
                _.createElement(
                  "div",
                  { className: te.Overview },
                  _.createElement(
                    "div",
                    null,
                    _.createElement("b", null, "Total Playtime:"),
                    " ",
                    Math.floor(t.nPlaytimeMinutes / 6) / 10,
                    "hr",
                  ),
                  _.createElement(
                    "div",
                    null,
                    _.createElement("b", null, "Last Played:"),
                    " ",
                    (0, ee.$z)(t.rtLastPlayed),
                    " ",
                  ),
                  _.createElement(
                    "div",
                    null,
                    _.createElement("b", null, "Games played:"),
                    " ",
                    i &&
                      t.rgAppIDsPlayed.map((e) =>
                        _.createElement(
                          _.Fragment,
                          { key: e },
                          _.createElement(ce, { appid: e }),
                          ", ",
                        ),
                      ),
                  ),
                  _.createElement(
                    "div",
                    null,
                    _.createElement("b", null, "Popularity Score:"),
                    " ",
                    Math.floor(100 * t.flPopularityScore),
                    "% ",
                    _.createElement(
                      "span",
                      {
                        title:
                          "Based on the top four items; we might decide not to show clusters if this score is less than some threshold, maybe 90%",
                        style: { cursor: "default" },
                      },
                      "(?)",
                    ),
                  ),
                ),
              ),
            ),
            _.createElement(
              "div",
              { className: te.ClusterMembers },
              _.createElement("h3", null, "Similar titles:"),
              _.createElement(
                se.tH,
                null,
                _.createElement(
                  "ul",
                  null,
                  t.rgSimilarItems.map((e, t) =>
                    a || t < 4
                      ? _.createElement(
                          "li",
                          { key: e.GetUniqueID() },
                          _.createElement(de, { item: e }),
                        )
                      : null,
                  ),
                ),
              ),
              !a &&
                _.createElement(
                  y.$n,
                  { onClick: s },
                  "Show all ",
                  t.rgSimilarItems.length,
                ),
            ),
          ),
        );
      }
      const me = {};
      function ce(e) {
        const { appid: t } = e,
          [a] = (0, ae.t7)(t, me);
        return a
          ? _.createElement(
              "a",
              { className: te.PlayedGame, href: a.GetStorePageURL() },
              a.GetName(),
            )
          : null;
      }
      function de(e) {
        const { item: t } = e;
        return _.createElement(
          "a",
          { className: te.SimilarTitle, href: t.GetStorePageURL() },
          _.createElement("img", {
            src: t.GetAssets().GetSmallCapsuleURL(),
            loading: "lazy",
          }),
          t.GetName(),
        );
      }
      var ue = a(12155),
        he = a(50855),
        ge = a.n(he),
        _e = a(4717),
        fe = a(10333);
      var Ce, Se;
      !(function (e) {
        (e[(e.Invalid = 0)] = "Invalid"),
          (e[(e.AccountName = 1)] = "AccountName"),
          (e[(e.EmailCode = 2)] = "EmailCode"),
          (e[(e.TwoFactorCode = 3)] = "TwoFactorCode"),
          (e[(e.Complete = 4)] = "Complete");
      })(Ce || (Ce = {})),
        (function (e) {
          (e[(e.None = 0)] = "None"), (e[(e.InvalidCode = 1)] = "InvalidCode");
        })(Se || (Se = {}));
      class ye {
        m_strBaseURL = "";
        m_strOAuthClientID = "";
        m_fnLoginComplete = null;
        m_bRequestInFlight = !1;
        m_userFields = void 0;
        m_eCurrentStep = Ce.AccountName;
        m_strErrorMessage = "";
        m_strEmailDomain = "";
        m_strCaptchaURL = "";
        m_eSteamGuardCodeError = Se.None;
        constructor(e, t) {
          (0, l.Gn)(this),
            (this.m_strBaseURL = e),
            (this.m_strOAuthClientID = t),
            (this.m_userFields = {
              strUserName: "",
              strPassword: "",
              strTwoFactorCode: "",
              strEmailAuthCode: "",
              emailSteamID: "",
              gidCaptcha: "",
              strCaptchaText: "",
              bRememberLogin: !1,
            });
        }
        Shutdown() {
          this.m_fnLoginComplete = null;
        }
        SetLoginCompleteCallback(e) {
          this.m_fnLoginComplete = e;
        }
        SetUserName(e) {
          this.m_userFields.strUserName = e;
        }
        GetUserName() {
          return this.m_userFields.strUserName;
        }
        SetPassword(e) {
          this.m_userFields.strPassword = e;
        }
        GetPassword() {
          return this.m_userFields.strPassword;
        }
        SetRememberPassword(e) {
          this.m_userFields.bRememberLogin = e;
        }
        GetRememberPassword() {
          return this.m_userFields.bRememberLogin;
        }
        SetEmailAuthCode(e) {
          this.m_userFields.strEmailAuthCode = e;
        }
        GetEmailAuthCode() {
          return this.m_userFields.strEmailAuthCode;
        }
        GetEmailDomain() {
          return this.m_strEmailDomain;
        }
        SetTwoFactorCode(e) {
          this.m_userFields.strTwoFactorCode = e;
        }
        GetTwoFactorCode() {
          return this.m_userFields.strTwoFactorCode;
        }
        SetCaptchaText(e) {
          this.m_userFields.strCaptchaText = e;
        }
        GetCaptchaText() {
          return this.m_userFields.strCaptchaText;
        }
        IsRequestInFlight() {
          return this.m_bRequestInFlight;
        }
        GetCurrentStep() {
          return this.m_eCurrentStep;
        }
        GetErrorMessage() {
          return this.m_strErrorMessage;
        }
        SetInitialErrorMessage(e) {
          this.m_strErrorMessage = e;
        }
        GetSteamGuardCodeError() {
          return this.m_eSteamGuardCodeError;
        }
        GetCaptchaURL() {
          return this.m_strCaptchaURL;
        }
        async DoLogin() {
          if (this.m_bRequestInFlight) return;
          (0, l.h5)(() => {
            (this.m_bRequestInFlight = !0), (this.m_strErrorMessage = "");
          });
          let e = await (0, _e.ZC)(
            this.m_strBaseURL,
            this.m_strOAuthClientID,
            this.m_userFields,
          );
          (0, l.h5)(() => {
            (this.m_bRequestInFlight = !1), this.UpdateLoginResult(e);
          });
        }
        UpdateLoginResult(e) {
          if (!e)
            return (
              console.log("Login timeout"),
              void (this.m_strErrorMessage = (0, ee.we)(
                "#ConnectionTrouble_FailedToConnect",
              ))
            );
          if (e.login_complete) {
            if (((this.m_eCurrentStep = Ce.Complete), this.m_fnLoginComplete)) {
              let t = {
                steamID: e.oauth ? e.oauth.steamid : "",
                strAccountName: e.oauth ? e.oauth.account_name : "",
                strOAuthToken: e.oauth ? e.oauth.oauth_token : "",
              };
              this.m_fnLoginComplete(t);
            }
          } else
            (this.m_strErrorMessage = e.message || ""),
              (this.m_eSteamGuardCodeError = Se.None),
              e.requires_twofactor
                ? (this.UpdateCaptchaURL("-1"),
                  this.m_eCurrentStep != Ce.TwoFactorCode ||
                    this.m_strErrorMessage ||
                    ((this.m_strErrorMessage = (0, ee.we)(
                      "#MobileLogin_IncorrectSteamGuard",
                    )),
                    (this.m_eSteamGuardCodeError = Se.InvalidCode),
                    (this.m_userFields.strTwoFactorCode = "")),
                  (this.m_eCurrentStep = Ce.TwoFactorCode))
                : e.captcha_needed && e.captcha_gid
                  ? ((this.m_eCurrentStep = Ce.AccountName),
                    this.UpdateCaptchaURL(e.captcha_gid))
                  : e.emailauth_needed
                    ? (e.emaildomain && (this.m_strEmailDomain = e.emaildomain),
                      e.emailsteamid &&
                        (this.m_userFields.emailSteamID = e.emailsteamid),
                      this.m_eCurrentStep != Ce.EmailCode ||
                        this.m_strErrorMessage ||
                        ((this.m_strErrorMessage = (0, ee.we)(
                          "#MobileLogin_IncorrectSteamGuard",
                        )),
                        (this.m_eSteamGuardCodeError = Se.InvalidCode),
                        (this.m_userFields.strEmailAuthCode = "")),
                      (this.m_eCurrentStep = Ce.EmailCode))
                    : e.agreement_session_url
                      ? (this.Shutdown(),
                        console.log(window.location.href),
                        (window.location.href =
                          e.agreement_session_url +
                          "&redir=" +
                          window.location.href))
                      : console.log("Unhandled login error");
        }
        async RefreshCaptcha() {
          let e = await (0, _e.Cr)(this.m_strBaseURL);
          e ? this.UpdateCaptchaURL(e) : console.log("Failed to get captcha");
        }
        UpdateCaptchaURL(e) {
          (this.m_userFields.gidCaptcha = e),
            (this.m_userFields.strCaptchaText = ""),
            (this.m_strCaptchaURL =
              "-1" != e ? (0, _e.Ok)(this.m_strBaseURL, e) : "");
        }
      }
      (0, s.Cg)([l.sH], ye.prototype, "m_bRequestInFlight", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_userFields", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_eCurrentStep", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_strErrorMessage", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_strEmailDomain", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_strCaptchaURL", void 0),
        (0, s.Cg)([l.sH], ye.prototype, "m_eSteamGuardCodeError", void 0),
        (0, s.Cg)([fe.o], ye.prototype, "DoLogin", null),
        (0, s.Cg)([l.XI.bound], ye.prototype, "UpdateCaptchaURL", null);
      let be = class extends _.Component {
        m_manager;
        constructor(e) {
          super(e),
            (this.m_manager = new ye(this.props.baseURL)),
            this.props.onLoginComplete &&
              this.m_manager.SetLoginCompleteCallback(
                this.props.onLoginComplete,
              );
        }
        componentWillUnmount() {
          this.m_manager.Shutdown();
        }
        render() {
          let {
              baseURL: e,
              onLoginComplete: t,
              className: a,
              ...r
            } = this.props,
            s = (0, w.A)(ge().LoginDialog, a),
            i = this.m_manager.GetCurrentStep(),
            n = this.m_manager.GetErrorMessage();
          return _.createElement(
            "div",
            { className: s, ...r },
            _.createElement(
              "div",
              { className: ge().LoginPanelBackground },
              _.createElement(ue.Qte, null),
            ),
            _.createElement(
              "div",
              { className: ge().LoginPanelContent },
              n && _.createElement(Ee, { text: n }),
              i == Ce.AccountName &&
                _.createElement(we, {
                  manager: this.m_manager,
                  autoFocus: this.props.autoFocus,
                }),
              i == Ce.TwoFactorCode &&
                _.createElement(Ie, {
                  manager: this.m_manager,
                  authtype: Ce.TwoFactorCode,
                }),
              i == Ce.EmailCode &&
                _.createElement(Ie, {
                  manager: this.m_manager,
                  authtype: Ce.EmailCode,
                }),
              i == Ce.Complete &&
                _.createElement(
                  "div",
                  { className: ge().LoginComplete },
                  _.createElement(X.t, null),
                ),
            ),
          );
        }
      };
      function Ee(e) {
        return _.createElement("div", { className: ge().ErrorMessage }, e.text);
      }
      be = (0, s.Cg)([E.PA], be);
      let we = class extends _.Component {
        constructor(e) {
          super(e), (this.state = { nNameSize: 0, nPassSize: 0 });
        }
        OnSubmit(e) {
          e.preventDefault(), this.props.manager.DoLogin();
        }
        OnChangeName(e) {
          let t = e.target.value || "";
          this.props.manager.SetUserName(e.target.value),
            t.length > 24 && t.length < 39
              ? this.setState({ nNameSize: 1 })
              : t.length > 38
                ? this.setState({ nNameSize: 2 })
                : this.setState({ nNameSize: 0 });
        }
        OnChangePassword(e) {
          let t = e.target.value || "";
          (t = t.replace(/[^\x00-\x7F]/g, "")),
            this.props.manager.SetPassword(t),
            t.length > 19 && t.length < 39
              ? this.setState({ nPassSize: 1 })
              : t.length > 38
                ? this.setState({ nPassSize: 2 })
                : this.setState({ nPassSize: 0 });
        }
        OnChangeRememberPass(e) {
          this.props.manager.SetRememberPassword(e.target.checked);
        }
        render() {
          let e,
            t,
            a = this.props.manager;
          return (
            (t =
              1 == this.state.nPassSize
                ? ge().MedPass
                : 2 == this.state.nPassSize
                  ? ge().LargePass
                  : ge().DefaultPass),
            (e =
              1 == this.state.nNameSize
                ? ge().MedName
                : 2 == this.state.nNameSize
                  ? ge().LargeName
                  : ge().DefaultNAme),
            _.createElement(
              "div",
              { className: ge().AccountPasswordPanel },
              _.createElement(
                "div",
                { className: ge().SigninTitle },
                (0, ee.we)("#Login_SignInTitle"),
              ),
              _.createElement(
                "form",
                {
                  className: ge().AccountPasswordForm,
                  onSubmit: this.OnSubmit,
                },
                _.createElement(y.pd, {
                  autoFocus: this.props.autoFocus,
                  className: (0, w.A)(ge().AccountNameLabel, e),
                  label: (0, ee.we)("#Login_AccountName"),
                  type: "text",
                  value: a.GetUserName(),
                  focusOnMount: !0,
                  maxLength: 64,
                  onChange: this.OnChangeName,
                }),
                _.createElement(y.pd, {
                  className: (0, w.A)(ge().PasswordDots, t),
                  label: (0, ee.we)("#Login_Password"),
                  type: "password",
                  autoComplete: "off",
                  maxLength: 64,
                  size: 64,
                  value: a.GetPassword(),
                  onChange: this.OnChangePassword,
                }),
                _.createElement(y.Yh, {
                  className: ge().RememberMeCheck,
                  label: (0, ee.we)("#Login_RememberMe"),
                  disabled: !1,
                  onChange: () => this.OnChangeRememberPass,
                  checked: a.GetRememberPassword(),
                }),
                a.GetCaptchaURL() && _.createElement(ve, { manager: a }),
                _.createElement(
                  y.jn,
                  { disabled: this.props.manager.IsRequestInFlight() },
                  (0, ee.we)("#Login_SignIn").toLocaleUpperCase(),
                ),
              ),
              _.createElement(
                "a",
                { className: ge().NeedHelpLink, href: o.TS.HELP_BASE_URL },
                (0, ee.we)("#Login_ForgotPassword"),
              ),
              _.createElement("div", { className: ge().LoginCreateSeperator }),
              _.createElement(
                "div",
                { className: ge().SteamUpsellContainer },
                _.createElement(
                  "div",
                  { className: ge().SteamUpsell },
                  (0, ee.we)("#Login_NoSteamAccount"),
                ),
                _.createElement(
                  "div",
                  { className: ge().CreateAccountLink },
                  _.createElement(
                    "a",
                    { href: `${o.TS.STORE_BASE_URL}join/` },
                    (0, ee.we)("#Login_CreateAccount"),
                  ),
                ),
              ),
            )
          );
        }
      };
      (0, s.Cg)([p.oI], we.prototype, "OnSubmit", null),
        (0, s.Cg)([p.oI], we.prototype, "OnChangeName", null),
        (0, s.Cg)([p.oI], we.prototype, "OnChangePassword", null),
        (0, s.Cg)([p.oI], we.prototype, "OnChangeRememberPass", null),
        (we = (0, s.Cg)([E.PA], we));
      let ve = class extends _.Component {
        OnCaptchaText(e) {
          this.props.manager.SetCaptchaText(e.target.value);
        }
        RefreshCaptcha(e) {
          this.props.manager.RefreshCaptcha();
        }
        render() {
          let e = this.props.manager;
          return _.createElement(
            "div",
            { className: ge().CaptchaContainer },
            _.createElement(
              "div",
              { className: ge().CaptchaBlock },
              _.createElement(
                "div",
                { className: ge().CaptchaImageAndInput },
                _.createElement(
                  "div",
                  { className: ge().CaptchaImageBox },
                  _.createElement("img", {
                    className: ge().CaptchaImage,
                    src: e.GetCaptchaURL(),
                  }),
                ),
                _.createElement(y.pd, {
                  className: ge().CaptchaInput,
                  type: "text",
                  autoComplete: "off",
                  maxLength: 6,
                  value: e.GetCaptchaText(),
                  onChange: this.OnCaptchaText,
                }),
              ),
              _.createElement(
                "div",
                { className: ge().ErrorMessage },
                (0, ee.we)("#Login_CaptchaVerification"),
              ),
            ),
            _.createElement(
              "div",
              null,
              _.createElement(
                "span",
                {
                  className: ge().RefreshCaptchaText,
                  onClick: this.RefreshCaptcha,
                },
                (0, ee.we)("#Login_RefreshCaptcha"),
              ),
            ),
          );
        }
      };
      (0, s.Cg)([p.oI], ve.prototype, "OnCaptchaText", null),
        (0, s.Cg)([p.oI], ve.prototype, "RefreshCaptcha", null),
        (ve = (0, s.Cg)([E.PA], ve));
      let Ie = class extends _.Component {
        OnSubmit(e) {
          e.preventDefault(), this.props.manager.DoLogin();
        }
        OnChangeAuthCode(e) {
          this.props.authtype == Ce.TwoFactorCode
            ? this.props.manager.SetTwoFactorCode(e.target.value)
            : this.props.manager.SetEmailAuthCode(e.target.value);
        }
        render() {
          let e,
            t = this.props.manager,
            a = "",
            r = null,
            s = "",
            i = t.GetSteamGuardCodeError() == Se.InvalidCode;
          switch (this.props.authtype) {
            case Ce.TwoFactorCode:
              (a = t.GetTwoFactorCode()),
                (r = (0, ee.we)("#Login_Enter2FA")),
                (e = _.createElement(ue.kaY, null)),
                (s = (0, ee.we)("#Login_Enter2FAHelp"));
              break;
            case Ce.EmailCode:
              (a = t.GetEmailAuthCode()),
                (r = (0, ee.PP)(
                  "#Login_SentSteamguard",
                  _.createElement(
                    "span",
                    { className: ge().Highlight },
                    "@",
                    t.GetEmailDomain(),
                  ),
                )),
                (s = (0, ee.we)("#Login_EnterSteamguard")),
                (e = _.createElement(ue.Lh2, null));
          }
          return _.createElement(
            "div",
            { className: ge().AuthenticationPanel },
            _.createElement(y.JU, null, (0, ee.we)("#Login_SigningIn")),
            _.createElement(
              "div",
              { className: ge().SigningInAccountName },
              t.GetUserName(),
            ),
            _.createElement(y.a3, null, r),
            _.createElement(
              "div",
              { className: ge().AuthenticatorInputcontainer },
              e,
              _.createElement(
                "form",
                {
                  className: ge().AccountPasswordForm,
                  onSubmit: this.OnSubmit,
                },
                _.createElement(y.pd, {
                  className: (0, w.A)(ge().AccountName),
                  label: "Steam Guard Code",
                  type: "text",
                  autoComplete: "off",
                  focusOnMount: !0,
                  maxLength: 64,
                  value: a,
                  onChange: this.OnChangeAuthCode,
                }),
                _.createElement(
                  y.jn,
                  { disabled: this.props.manager.IsRequestInFlight() },
                  (0, ee.we)("#Login_SteamguardSubmit").toLocaleUpperCase(),
                ),
              ),
            ),
            _.createElement(
              "a",
              {
                className: (0, w.A)(
                  ge().NeedHelpLink,
                  i ? ge().NeedHelpHighlight : null,
                ),
                href: "http://help.steampowered.com/",
              },
              s,
            ),
          );
        }
      };
      (0, s.Cg)([p.oI], Ie.prototype, "OnSubmit", null),
        (0, s.Cg)([p.oI], Ie.prototype, "OnChangeAuthCode", null),
        (Ie = (0, s.Cg)([E.PA], Ie));
      var Ae = a(23809);
      const Be = [
        {
          path: "similarity",
          render: () => _.createElement(O, null),
          name: "ML Similarity",
        },
        {
          path: "clustering",
          render: (e) =>
            _.createElement(ie, { SteamInterface: e.SteamInterface }),
          name: "Tag Clustering",
          requires_login: !0,
        },
      ];
      function Me(e) {
        const [t, a] = _.useState(!1),
          s = o.iA.logged_in,
          i = (0, Ae.TR)();
        if (
          ((0, _.useEffect)(() => {
            g.Init(), a(!0);
          }, []),
          !t)
        )
          return _.createElement("div", { className: S.App });
        const n = { SteamInterface: i };
        return _.createElement(
          "div",
          { className: S.App },
          _.createElement(
            "div",
            { className: S.Container },
            _.createElement(
              "div",
              { className: S.TopSection },
              _.createElement("div", { className: S.Header }, "Labs Sandbox"),
              _.createElement(
                "div",
                { className: S.Body },
                "Internal testbed page for Steam Labs experiments",
              ),
            ),
            _.createElement(
              "div",
              { className: S.Tabs },
              Be.map((e) =>
                _.createElement(
                  f.k2,
                  {
                    key: e.path,
                    to: `${r.B.LabsSandbox()}/${e.path}`,
                    className: S.Tab,
                    activeClassName: S.Active,
                  },
                  e.name,
                ),
              ),
            ),
            _.createElement(
              "div",
              { className: S.SandboxSection },
              _.createElement(
                se.tH,
                null,
                _.createElement(
                  C.dO,
                  null,
                  Be.map((e, t) =>
                    _.createElement(C.qh, {
                      key: e.path,
                      path: `${r.B.LabsSandbox()}/${e.path}`,
                      render: (t) =>
                        !e.requires_login || s
                          ? e.render({ ...t, ...n })
                          : _.createElement(Ne, null),
                    }),
                  ),
                ),
              ),
            ),
          ),
        );
      }
      function Ne() {
        return _.createElement(
          "div",
          null,
          _.createElement("h3", null, "Please login to view this page."),
          _.createElement(be, {
            baseURL: o.TS.STORE_BASE_URL,
            onLoginComplete: () => window.location.reload(),
          }),
        );
      }
    },
  },
]);
